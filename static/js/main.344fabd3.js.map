{"version":3,"file":"static/js/main.344fabd3.js","mappings":"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","sources":["helpers/deflate.js","helpers/encoder.js","../node_modules/blockly/blockly.js","com/google/javascript/jscomp/js/base.js","com/google/javascript/jscomp/js/es6/util/createtemplatetagfirstarg.js","com/google/javascript/jscomp/js/es6/util/arrayiterator.js","com/google/javascript/jscomp/js/es6/util/makeiterator.js","com/google/javascript/jscomp/js/es6/util/arrayfromiterator.js","com/google/javascript/jscomp/js/es6/util/arrayfromiterable.js","com/google/javascript/jscomp/js/util/owns.js","com/google/javascript/jscomp/js/util/defines.js","com/google/javascript/jscomp/js/util/defineproperty.js","com/google/javascript/jscomp/js/util/global.js","com/google/javascript/jscomp/js/util/shouldpolyfill.js","com/google/javascript/jscomp/js/util/polyfill.js","com/google/javascript/jscomp/js/es6/util/assign.js","com/google/javascript/jscomp/js/es6/object/assign.js","com/google/javascript/jscomp/js/util/objectcreate.js","com/google/javascript/jscomp/js/es6/util/construct.js","com/google/javascript/jscomp/js/es6/util/setprototypeof.js","com/google/javascript/jscomp/js/es6/util/inherits.js","com/google/javascript/jscomp/js/es6/reflect/reflect.js","com/google/javascript/jscomp/js/es6/reflect/construct.js","com/google/javascript/jscomp/js/es6/reflect/setprototypeof.js","com/google/javascript/jscomp/js/es6/globalthis.js","com/google/javascript/jscomp/js/util/checkstringargs.js","com/google/javascript/jscomp/js/es6/string/startswith.js","com/google/javascript/jscomp/js/es6/symbol.js","com/google/javascript/jscomp/js/es6/util/iteratorfromarray.js","com/google/javascript/jscomp/js/es6/array/keys.js","com/google/javascript/jscomp/js/es6/object/setprototypeof.js","com/google/javascript/jscomp/js/es6/array/values.js","com/google/javascript/jscomp/js/es6/conformance.js","com/google/javascript/jscomp/js/es6/weakmap.js","com/google/javascript/jscomp/js/es6/object/entries.js","com/google/javascript/jscomp/js/es6/object/getownpropertysymbols.js","com/google/javascript/jscomp/js/es6/reflect/ownkeys.js","com/google/javascript/jscomp/js/es6/object/getownpropertydescriptors.js","com/google/javascript/jscomp/js/es6/array/fill.js","com/google/javascript/jscomp/js/es6/typedarray/fill.js","com/google/javascript/jscomp/js/es6/map.js","com/google/javascript/jscomp/js/es6/set.js","../closure/goog/base_minimal.js","../node_modules/blockly/core/utils/deprecation.js","../node_modules/blockly/core/utils/string.js","../node_modules/blockly/core/css.js","../node_modules/blockly/core/utils/global.js","../node_modules/blockly/core/touch.js","../node_modules/blockly/core/utils/useragent.js","../node_modules/blockly/core/browser_events.js","../node_modules/blockly/core/common.js","../node_modules/blockly/core/blocks.js","../node_modules/blockly/core/tooltip.js","../node_modules/blockly/core/utils/dom.js","../node_modules/blockly/core/widgetdiv.js","../node_modules/blockly/core/utils/aria.js","../node_modules/blockly/core/utils/idgenerator.js","../node_modules/blockly/core/registry.js","../node_modules/blockly/core/events/utils.js","../node_modules/blockly/core/utils/math.js","../node_modules/blockly/core/bump_objects.js","../node_modules/blockly/core/utils/coordinate.js","../node_modules/blockly/core/utils/size.js","../node_modules/blockly/core/utils/style.js","../node_modules/blockly/core/utils/rect.js","../node_modules/blockly/core/dropdowndiv.js","../node_modules/blockly/core/utils/svg_math.js","../node_modules/blockly/core/utils/svg.js","../node_modules/blockly/core/block_drag_surface.js","../node_modules/blockly/core/grid.js","../node_modules/blockly/core/utils/xml.js","../node_modules/blockly/core/xml.js","../node_modules/blockly/core/msg.js","../node_modules/blockly/core/connection_type.js","../node_modules/blockly/core/input_types.js","../node_modules/blockly/core/utils/toolbox.js","../node_modules/blockly/core/utils/object.js","../node_modules/blockly/core/theme.js","../node_modules/blockly/core/theme/classic.js","../node_modules/blockly/core/options.js","../node_modules/blockly/core/scrollbar.js","../node_modules/blockly/core/scrollbar_pair.js","../node_modules/blockly/core/utils/keycodes.js","../node_modules/blockly/core/shortcut_registry.js","../node_modules/blockly/core/workspace_drag_surface_svg.js","../node_modules/blockly/core/clipboard.js","../node_modules/blockly/core/config.js","../node_modules/blockly/core/menuitem.js","../node_modules/blockly/core/menu.js","../node_modules/blockly/core/serialization/priorities.js","../node_modules/blockly/core/serialization/registry.js","../node_modules/blockly/core/serialization/exceptions.js","../node_modules/blockly/core/interfaces/i_serializer.js","../node_modules/blockly/core/serialization/blocks.js","../node_modules/blockly/core/events/events_abstract.js","../node_modules/blockly/core/events/events_block_base.js","../node_modules/blockly/core/events/events_block_create.js","../node_modules/blockly/core/contextmenu.js","../node_modules/blockly/core/utils/array.js","../node_modules/blockly/core/renderers/common/debug.js","../node_modules/blockly/core/renderers/measurables/types.js","../node_modules/blockly/core/renderers/measurables/row.js","../node_modules/blockly/core/renderers/measurables/bottom_row.js","../node_modules/blockly/core/renderers/measurables/base.js","../node_modules/blockly/core/renderers/measurables/connection.js","../node_modules/blockly/core/utils/colour.js","../node_modules/blockly/core/utils/svg_paths.js","../node_modules/blockly/core/utils/parsing.js","../node_modules/blockly/core/renderers/common/constants.js","../node_modules/blockly/core/renderers/measurables/field.js","../node_modules/blockly/core/field_registry.js","../node_modules/blockly/core/marker_manager.js","../node_modules/blockly/core/utils/sentinel.js","../node_modules/blockly/core/events/events_block_change.js","../node_modules/blockly/core/block_animations.js","../node_modules/blockly/core/internal_constants.js","../node_modules/blockly/core/component_manager.js","../node_modules/blockly/core/interfaces/i_contextmenu.js","../node_modules/blockly/core/dialog.js","../node_modules/blockly/core/events/events_var_base.js","../node_modules/blockly/core/events/events_var_create.js","../node_modules/blockly/core/variable_model.js","../node_modules/blockly/core/variables.js","../node_modules/blockly/core/names.js","../node_modules/blockly/core/events/events_var_delete.js","../node_modules/blockly/core/events/events_var_rename.js","../node_modules/blockly/core/variable_map.js","../node_modules/blockly/core/events/events_block_move.js","../node_modules/blockly/core/constants.js","../node_modules/blockly/core/connection.js","../node_modules/blockly/core/connection_checker.js","../node_modules/blockly/core/workspace.js","../node_modules/blockly/core/bubble.js","../node_modules/blockly/core/events/events_comment_base.js","../node_modules/blockly/core/events/events_comment_move.js","../node_modules/blockly/core/bubble_dragger.js","../node_modules/blockly/core/workspace_dragger.js","../node_modules/blockly/core/interfaces/i_block_dragger.js","../node_modules/blockly/core/insertion_marker_manager.js","../node_modules/blockly/core/events/events_ui_base.js","../node_modules/blockly/core/events/events_block_drag.js","../node_modules/blockly/core/block_dragger.js","../node_modules/blockly/core/events/events_click.js","../node_modules/blockly/core/gesture.js","../node_modules/blockly/core/field.js","../node_modules/blockly/core/field_label.js","../node_modules/blockly/core/renderers/measurables/input_connection.js","../node_modules/blockly/core/renderers/common/debugger.js","../node_modules/blockly/core/renderers/common/drawer.js","../node_modules/blockly/core/renderers/measurables/external_value_input.js","../node_modules/blockly/core/renderers/measurables/hat.js","../node_modules/blockly/core/renderers/common/i_path_object.js","../node_modules/blockly/core/renderers/measurables/icon.js","../node_modules/blockly/core/renderers/measurables/in_row_spacer.js","../node_modules/blockly/core/renderers/measurables/inline_input.js","../node_modules/blockly/core/renderers/measurables/statement_input.js","../node_modules/blockly/core/renderers/measurables/input_row.js","../node_modules/blockly/core/renderers/measurables/jagged_edge.js","../node_modules/blockly/core/keyboard_nav/ast_node.js","../node_modules/blockly/core/events/events_marker_move.js","../node_modules/blockly/core/renderers/common/marker_svg.js","../node_modules/blockly/core/renderers/measurables/next_connection.js","../node_modules/blockly/core/renderers/measurables/output_connection.js","../node_modules/blockly/core/renderers/common/path_object.js","../node_modules/blockly/core/renderers/measurables/previous_connection.js","../node_modules/blockly/core/input.js","../node_modules/blockly/core/renderers/measurables/round_corner.js","../node_modules/blockly/core/renderers/measurables/spacer_row.js","../node_modules/blockly/core/renderers/measurables/square_corner.js","../node_modules/blockly/core/renderers/measurables/top_row.js","../node_modules/blockly/core/renderers/common/info.js","../node_modules/blockly/core/renderers/common/renderer.js","../node_modules/blockly/core/renderers/common/block_rendering.js","../node_modules/blockly/core/field_dropdown.js","../node_modules/blockly/core/extensions.js","../node_modules/blockly/core/utils/metrics.js","../node_modules/blockly/core/utils.js","../node_modules/blockly/core/events/events_block_delete.js","../node_modules/blockly/core/block.js","../node_modules/blockly/core/contextmenu_registry.js","../node_modules/blockly/core/interfaces/i_bounded_element.js","../node_modules/blockly/core/rendered_connection.js","../node_modules/blockly/core/keyboard_nav/marker.js","../node_modules/blockly/core/keyboard_nav/cursor.js","../node_modules/blockly/core/keyboard_nav/basic_cursor.js","../node_modules/blockly/core/keyboard_nav/tab_navigate_cursor.js","../node_modules/blockly/core/events/events_selected.js","../node_modules/blockly/core/block_svg.js","../node_modules/blockly/core/connection_db.js","../node_modules/blockly/core/theme_manager.js","../node_modules/blockly/core/touch_gesture.js","../node_modules/blockly/core/workspace_audio.js","../node_modules/blockly/core/events/events_theme_change.js","../node_modules/blockly/core/events/events_viewport.js","../node_modules/blockly/core/interfaces/i_metrics_manager.js","../node_modules/blockly/core/metrics_manager.js","../node_modules/blockly/core/workspace_svg.js","../node_modules/blockly/core/inject.js","../node_modules/blockly/core/drag_target.js","../node_modules/blockly/core/interfaces/i_delete_area.js","../node_modules/blockly/core/delete_area.js","../node_modules/blockly/core/flyout_metrics_manager.js","../node_modules/blockly/core/interfaces/i_flyout.js","../node_modules/blockly/core/flyout_base.js","../node_modules/blockly/core/flyout_vertical.js","../node_modules/blockly/core/interfaces/i_toolbox_item.js","../node_modules/blockly/core/toolbox/toolbox_item.js","../node_modules/blockly/core/toolbox/category.js","../node_modules/blockly/core/toolbox/separator.js","../node_modules/blockly/core/toolbox/collapsible_category.js","../node_modules/blockly/core/interfaces/i_autohideable.js","../node_modules/blockly/core/events/events_toolbox_item_select.js","../node_modules/blockly/core/toolbox/toolbox.js","../node_modules/blockly/core/flyout_horizontal.js","../node_modules/blockly/core/generator.js","../node_modules/blockly/core/field_variable.js","../node_modules/blockly/core/field_textinput.js","../node_modules/blockly/core/field_number.js","../node_modules/blockly/core/field_multilineinput.js","../node_modules/blockly/core/field_label_serializable.js","../node_modules/blockly/core/field_colour.js","../node_modules/blockly/core/field_checkbox.js","../node_modules/blockly/core/field_angle.js","../node_modules/blockly/core/renderers/zelos/measurables/bottom_row.js","../node_modules/blockly/core/renderers/zelos/constants.js","../node_modules/blockly/core/renderers/zelos/drawer.js","../node_modules/blockly/core/renderers/zelos/marker_svg.js","../node_modules/blockly/core/renderers/zelos/path_object.js","../node_modules/blockly/core/field_image.js","../node_modules/blockly/core/renderers/zelos/measurables/row_elements.js","../node_modules/blockly/core/renderers/zelos/measurables/inputs.js","../node_modules/blockly/core/renderers/zelos/measurables/top_row.js","../node_modules/blockly/core/renderers/zelos/info.js","../node_modules/blockly/core/renderers/zelos/renderer.js","../node_modules/blockly/core/renderers/zelos/zelos.js","../node_modules/blockly/core/renderers/thrasos/info.js","../node_modules/blockly/core/renderers/thrasos/renderer.js","../node_modules/blockly/core/renderers/thrasos/thrasos.js","../node_modules/blockly/core/serialization/workspaces.js","../node_modules/blockly/core/serialization/variables.js","../node_modules/blockly/core/renderers/minimalist/constants.js","../node_modules/blockly/core/renderers/minimalist/drawer.js","../node_modules/blockly/core/renderers/minimalist/info.js","../node_modules/blockly/core/renderers/minimalist/renderer.js","../node_modules/blockly/core/renderers/minimalist/minimalist.js","../node_modules/blockly/core/renderers/geras/measurables/statement_input.js","../node_modules/blockly/core/renderers/geras/path_object.js","../node_modules/blockly/core/renderers/geras/constants.js","../node_modules/blockly/core/renderers/geras/measurables/inline_input.js","../node_modules/blockly/core/renderers/geras/highlighter.js","../node_modules/blockly/core/renderers/geras/drawer.js","../node_modules/blockly/core/renderers/geras/highlight_constants.js","../node_modules/blockly/core/renderers/geras/info.js","../node_modules/blockly/core/renderers/geras/renderer.js","../node_modules/blockly/core/renderers/geras/geras.js","../node_modules/blockly/core/theme/zelos.js","../node_modules/blockly/core/theme/themes.js","../node_modules/blockly/core/shortcut_items.js","../node_modules/blockly/core/events/workspace_events.js","../node_modules/blockly/core/events/events_ui.js","../node_modules/blockly/core/events/events_bubble_open.js","../node_modules/blockly/core/events/events_comment_change.js","../node_modules/blockly/core/events/events_comment_create.js","../node_modules/blockly/core/events/events_comment_delete.js","../node_modules/blockly/core/events/events_trashcan_open.js","../node_modules/blockly/core/events/events.js","../node_modules/blockly/core/contextmenu_items.js","../node_modules/blockly/core/icon.js","../node_modules/blockly/core/mutator.js","../node_modules/blockly/core/warning.js","../node_modules/blockly/core/comment.js","../node_modules/blockly/core/sprites.js","../node_modules/blockly/core/positionable_helpers.js","../node_modules/blockly/core/zoom_controls.js","../node_modules/blockly/core/workspace_comment.js","../node_modules/blockly/core/workspace_comment_svg.js","../node_modules/blockly/core/trashcan.js","../node_modules/blockly/core/flyout_button.js","../node_modules/blockly/core/blockly_options.js","../node_modules/blockly/core/procedures.js","../node_modules/blockly/core/variables_dynamic.js","../node_modules/blockly/core/blockly.js","../node_modules/blockly/core/interfaces/i_ast_node_location.js","../node_modules/blockly/core/interfaces/i_ast_node_location_svg.js","../node_modules/blockly/core/interfaces/i_ast_node_location_with_block.js","../node_modules/blockly/core/interfaces/i_bubble.js","../node_modules/blockly/core/interfaces/i_collapsible_toolbox_item.js","../node_modules/blockly/core/interfaces/i_component.js","../node_modules/blockly/core/interfaces/i_connection_checker.js","../node_modules/blockly/core/interfaces/i_copyable.js","../node_modules/blockly/core/interfaces/i_deletable.js","../node_modules/blockly/core/interfaces/i_drag_target.js","../node_modules/blockly/core/interfaces/i_draggable.js","../node_modules/blockly/core/interfaces/i_keyboard_accessible.js","../node_modules/blockly/core/interfaces/i_movable.js","../node_modules/blockly/core/interfaces/i_positionable.js","../node_modules/blockly/core/interfaces/i_registrable.js","../node_modules/blockly/core/interfaces/i_registrable_field.js","../node_modules/blockly/core/interfaces/i_selectable.js","../node_modules/blockly/core/interfaces/i_selectable_toolbox_item.js","../node_modules/blockly/core/interfaces/i_styleable.js","../node_modules/blockly/core/interfaces/i_toolbox.js","../node_modules/blockly/blocks.js","../node_modules/blockly/blocks/variables_dynamic.js","../node_modules/blockly/blocks/variables.js","../node_modules/blockly/blocks/text.js","../node_modules/blockly/blocks/procedures.js","../node_modules/blockly/blocks/math.js","../node_modules/blockly/blocks/loops.js","../node_modules/blockly/blocks/logic.js","../node_modules/blockly/blocks/lists.js","../node_modules/blockly/blocks/colour.js","../node_modules/blockly/blocks/blocks.js","../node_modules/blockly/browser.js","../node_modules/blockly/core-browser.js","../node_modules/blockly/index.js","../node_modules/blockly/javascript.js","../node_modules/blockly/generators/javascript.js","../node_modules/blockly/generators/javascript/variables.js","../node_modules/blockly/generators/javascript/variables_dynamic.js","../node_modules/blockly/generators/javascript/text.js","../node_modules/blockly/generators/javascript/procedures.js","../node_modules/blockly/generators/javascript/math.js","../node_modules/blockly/generators/javascript/loops.js","../node_modules/blockly/generators/javascript/logic.js","../node_modules/blockly/generators/javascript/lists.js","../node_modules/blockly/generators/javascript/colour.js","../node_modules/blockly/msg/en.js","../node_modules/exenv/index.js","../node_modules/object-assign/index.js","../node_modules/prop-types/factoryWithThrowingShims.js","../node_modules/prop-types/index.js","../node_modules/prop-types/lib/ReactPropTypesSecret.js","../node_modules/react-dom/cjs/react-dom.production.min.js","../node_modules/react-dom/index.js","../node_modules/react-lifecycles-compat/react-lifecycles-compat.es.js","../node_modules/react-modal/lib/components/Modal.js","../node_modules/react-modal/lib/components/ModalPortal.js","../node_modules/react-modal/lib/helpers/ariaAppHider.js","../node_modules/react-modal/lib/helpers/bodyTrap.js","../node_modules/react-modal/lib/helpers/classList.js","../node_modules/react-modal/lib/helpers/focusManager.js","../node_modules/react-modal/lib/helpers/portalOpenInstances.js","../node_modules/react-modal/lib/helpers/safeHTMLElement.js","../node_modules/react-modal/lib/helpers/scopeTab.js","../node_modules/react-modal/lib/helpers/tabbable.js","../node_modules/react-modal/lib/index.js","../node_modules/react/cjs/react-jsx-runtime.production.min.js","../node_modules/react/cjs/react.production.min.js","../node_modules/react/index.js","../node_modules/react/jsx-runtime.js","../node_modules/scheduler/cjs/scheduler.production.min.js","../node_modules/scheduler/index.js","../node_modules/warning/warning.js","../webpack/bootstrap","../webpack/runtime/compat get default export","../webpack/runtime/define property getters","../webpack/runtime/global","../webpack/runtime/hasOwnProperty shorthand","../webpack/runtime/make namespace object","../webpack/runtime/publicPath","../node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","blockly/custom_Blocks.js","../node_modules/react-blockly/dist/useBlocklyWorkspace.js","../node_modules/react-blockly/dist/debounce.js","../node_modules/react-blockly/dist/BlocklyWorkspace.js","XmlParser.js","blockly/toolbox.js","UML_DSL_Generator.js","../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/@babel/runtime/helpers/esm/objectSpread2.js","../node_modules/@babel/runtime/helpers/esm/createClass.js","Validator.js","../node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js","../node_modules/@babel/runtime/helpers/esm/classCallCheck.js","WarningItem.js","App.js","index.js"],"sourcesContent":["/*\n * $Id: rawdeflate.js,v 0.3 2009/03/01 19:05:05 dankogai Exp dankogai $\n *\n * Original:\n *   http://www.onicos.com/staff/iz/amuse/javascript/expert/deflate.txt\n */\n\n// if run as a web worker, respond to messages by deflating them\n\n/* Copyright (C) 1999 Masanao Izumo <iz@onicos.co.jp>\n * Version: 1.0.1\n * LastModified: Dec 25 1999\n */\n\n/* Interface:\n * data = deflate(src);\n */\n/* eslint-disable */\n/* constant parameters */\nvar zip_WSIZE = 32768;\t\t// Sliding Window size\nvar zip_STORED_BLOCK = 0;\nvar zip_STATIC_TREES = 1;\nvar zip_DYN_TREES    = 2;\n\n/* for deflate */\nvar zip_DEFAULT_LEVEL = 6;\nvar zip_FULL_SEARCH = true;\nvar zip_INBUFSIZ = 32768;\t// Input buffer size\nvar zip_INBUF_EXTRA = 64;\t// Extra buffer\nvar zip_OUTBUFSIZ = 1024 * 8;\nvar zip_window_size = 2 * zip_WSIZE;\nvar zip_MIN_MATCH = 3;\nvar zip_MAX_MATCH = 258;\nvar zip_BITS = 16;\n// for SMALL_MEM\nvar zip_LIT_BUFSIZE = 0x2000;\nvar zip_HASH_BITS = 13;\n// for MEDIUM_MEM\n// var zip_LIT_BUFSIZE = 0x4000;\n// var zip_HASH_BITS = 14;\n// for BIG_MEM\n// var zip_LIT_BUFSIZE = 0x8000;\n// var zip_HASH_BITS = 15;\n//if(zip_LIT_BUFSIZE > zip_INBUFSIZ)\n//    alert(\"error: zip_INBUFSIZ is too small\");\n//if((zip_WSIZE<<1) > (1<<zip_BITS))\n//    alert(\"error: zip_WSIZE is too large\");\n//if(zip_HASH_BITS > zip_BITS-1)\n//    alert(\"error: zip_HASH_BITS is too large\");\n//if(zip_HASH_BITS < 8 || zip_MAX_MATCH != 258)\n//    alert(\"error: Code too clever\");\nvar zip_DIST_BUFSIZE = zip_LIT_BUFSIZE;\nvar zip_HASH_SIZE = 1 << zip_HASH_BITS;\nvar zip_HASH_MASK = zip_HASH_SIZE - 1;\nvar zip_WMASK = zip_WSIZE - 1;\nvar zip_NIL = 0; // Tail of hash chains\nvar zip_TOO_FAR = 4096;\nvar zip_MIN_LOOKAHEAD = zip_MAX_MATCH + zip_MIN_MATCH + 1;\nvar zip_MAX_DIST = zip_WSIZE - zip_MIN_LOOKAHEAD;\nvar zip_SMALLEST = 1;\nvar zip_MAX_BITS = 15;\nvar zip_MAX_BL_BITS = 7;\nvar zip_LENGTH_CODES = 29;\nvar zip_LITERALS =256;\nvar zip_END_BLOCK = 256;\nvar zip_L_CODES = zip_LITERALS + 1 + zip_LENGTH_CODES;\nvar zip_D_CODES = 30;\nvar zip_BL_CODES = 19;\nvar zip_REP_3_6 = 16;\nvar zip_REPZ_3_10 = 17;\nvar zip_REPZ_11_138 = 18;\nvar zip_HEAP_SIZE = 2 * zip_L_CODES + 1;\nvar zip_H_SHIFT = parseInt((zip_HASH_BITS + zip_MIN_MATCH - 1) /\n\t\t\t   zip_MIN_MATCH);\n\n/* variables */\nvar zip_free_queue;\nvar zip_qhead, zip_qtail;\nvar zip_initflag;\nvar zip_outbuf = null;\nvar zip_outcnt, zip_outoff;\nvar zip_complete;\nvar zip_window;\nvar zip_d_buf;\nvar zip_l_buf;\nvar zip_prev;\nvar zip_bi_buf;\nvar zip_bi_valid;\nvar zip_block_start;\nvar zip_ins_h;\nvar zip_hash_head;\nvar zip_prev_match;\nvar zip_match_available;\nvar zip_match_length;\nvar zip_prev_length;\nvar zip_strstart;\nvar zip_match_start;\nvar zip_eofile;\nvar zip_lookahead;\nvar zip_max_chain_length;\nvar zip_max_lazy_match;\nvar zip_compr_level;\nvar zip_good_match;\nvar zip_nice_match;\nvar zip_dyn_ltree;\nvar zip_dyn_dtree;\nvar zip_static_ltree;\nvar zip_static_dtree;\nvar zip_bl_tree;\nvar zip_l_desc;\nvar zip_d_desc;\nvar zip_bl_desc;\nvar zip_bl_count;\nvar zip_heap;\nvar zip_heap_len;\nvar zip_heap_max;\nvar zip_depth;\nvar zip_length_code;\nvar zip_dist_code;\nvar zip_base_length;\nvar zip_base_dist;\nvar zip_flag_buf;\nvar zip_last_lit;\nvar zip_last_dist;\nvar zip_last_flags;\nvar zip_flags;\nvar zip_flag_bit;\nvar zip_opt_len;\nvar zip_static_len;\nvar zip_deflate_data;\nvar zip_deflate_pos;\n\n/* objects (deflate) */\n\nfunction zip_DeflateCT() {\n    this.fc = 0; // frequency count or bit string\n    this.dl = 0; // father node in Huffman tree or length of bit string\n}\n\nfunction zip_DeflateTreeDesc() {\n    this.dyn_tree = null;\t// the dynamic tree\n    this.static_tree = null;\t// corresponding static tree or NULL\n    this.extra_bits = null;\t// extra bits for each code or NULL\n    this.extra_base = 0;\t// base index for extra_bits\n    this.elems = 0;\t\t// max number of elements in the tree\n    this.max_length = 0;\t// max bit length for the codes\n    this.max_code = 0;\t\t// largest code with non zero frequency\n}\n\n/* Values for max_lazy_match, good_match and max_chain_length, depending on\n * the desired pack level (0..9). The values given below have been tuned to\n * exclude worst case performance for pathological files. Better values may be\n * found for specific files.\n */\nfunction zip_DeflateConfiguration(a, b, c, d) {\n    this.good_length = a; // reduce lazy search above this match length\n    this.max_lazy = b;    // do not perform lazy search above this match length\n    this.nice_length = c; // quit search above this match length\n    this.max_chain = d;\n}\n\nfunction zip_DeflateBuffer() {\n    this.next = null;\n    this.len = 0;\n    this.ptr = new Array(zip_OUTBUFSIZ);\n    this.off = 0;\n}\n\n/* constant tables */\nvar zip_extra_lbits = [\n    0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0];\nvar zip_extra_dbits = [\n    0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];\nvar zip_extra_blbits = [\n    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7];\nvar zip_bl_order = [16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];\nvar zip_configuration_table = [\n\tnew zip_DeflateConfiguration(0,    0,   0,    0),\n\tnew zip_DeflateConfiguration(4,    4,   8,    4),\n\tnew zip_DeflateConfiguration(4,    5,  16,    8),\n\tnew zip_DeflateConfiguration(4,    6,  32,   32),\n\tnew zip_DeflateConfiguration(4,    4,  16,   16),\n\tnew zip_DeflateConfiguration(8,   16,  32,   32),\n\tnew zip_DeflateConfiguration(8,   16, 128,  128),\n\tnew zip_DeflateConfiguration(8,   32, 128,  256),\n\tnew zip_DeflateConfiguration(32, 128, 258, 1024),\n\tnew zip_DeflateConfiguration(32, 258, 258, 4096)];\n\n\n/* routines (deflate) */\n\nfunction zip_deflate_start(level) {\n    var i;\n\n    if(!level)\n\tlevel = zip_DEFAULT_LEVEL;\n    else if(level < 1)\n\tlevel = 1;\n    else if(level > 9)\n\tlevel = 9;\n\n    zip_compr_level = level;\n    zip_initflag = false;\n    zip_eofile = false;\n    if(zip_outbuf != null)\n\treturn;\n\n    zip_free_queue = zip_qhead = zip_qtail = null;\n    zip_outbuf = new Array(zip_OUTBUFSIZ);\n    zip_window = new Array(zip_window_size);\n    zip_d_buf = new Array(zip_DIST_BUFSIZE);\n    zip_l_buf = new Array(zip_INBUFSIZ + zip_INBUF_EXTRA);\n    zip_prev = new Array(1 << zip_BITS);\n    zip_dyn_ltree = new Array(zip_HEAP_SIZE);\n    for(i = 0; i < zip_HEAP_SIZE; i++)\n\tzip_dyn_ltree[i] = new zip_DeflateCT();\n    zip_dyn_dtree = new Array(2*zip_D_CODES+1);\n    for(i = 0; i < 2*zip_D_CODES+1; i++)\n\tzip_dyn_dtree[i] = new zip_DeflateCT();\n    zip_static_ltree = new Array(zip_L_CODES+2);\n    for(i = 0; i < zip_L_CODES+2; i++)\n\tzip_static_ltree[i] = new zip_DeflateCT();\n    zip_static_dtree = new Array(zip_D_CODES);\n    for(i = 0; i < zip_D_CODES; i++)\n\tzip_static_dtree[i] = new zip_DeflateCT();\n    zip_bl_tree = new Array(2*zip_BL_CODES+1);\n    for(i = 0; i < 2*zip_BL_CODES+1; i++)\n\tzip_bl_tree[i] = new zip_DeflateCT();\n    zip_l_desc = new zip_DeflateTreeDesc();\n    zip_d_desc = new zip_DeflateTreeDesc();\n    zip_bl_desc = new zip_DeflateTreeDesc();\n    zip_bl_count = new Array(zip_MAX_BITS+1);\n    zip_heap = new Array(2*zip_L_CODES+1);\n    zip_depth = new Array(2*zip_L_CODES+1);\n    zip_length_code = new Array(zip_MAX_MATCH-zip_MIN_MATCH+1);\n    zip_dist_code = new Array(512);\n    zip_base_length = new Array(zip_LENGTH_CODES);\n    zip_base_dist = new Array(zip_D_CODES);\n    zip_flag_buf = new Array(parseInt(zip_LIT_BUFSIZE / 8));\n}\n\nfunction zip_deflate_end() {\n    zip_free_queue = zip_qhead = zip_qtail = null;\n    zip_outbuf = null;\n    zip_window = null;\n    zip_d_buf = null;\n    zip_l_buf = null;\n    zip_prev = null;\n    zip_dyn_ltree = null;\n    zip_dyn_dtree = null;\n    zip_static_ltree = null;\n    zip_static_dtree = null;\n    zip_bl_tree = null;\n    zip_l_desc = null;\n    zip_d_desc = null;\n    zip_bl_desc = null;\n    zip_bl_count = null;\n    zip_heap = null;\n    zip_depth = null;\n    zip_length_code = null;\n    zip_dist_code = null;\n    zip_base_length = null;\n    zip_base_dist = null;\n    zip_flag_buf = null;\n}\n\nfunction zip_reuse_queue(p) {\n    p.next = zip_free_queue;\n    zip_free_queue = p;\n}\n\nfunction zip_new_queue() {\n    var p;\n\n    if(zip_free_queue != null)\n    {\n\tp = zip_free_queue;\n\tzip_free_queue = zip_free_queue.next;\n    }\n    else\n\tp = new zip_DeflateBuffer();\n    p.next = null;\n    p.len = p.off = 0;\n\n    return p;\n}\n\nfunction zip_head1(i) {\n    return zip_prev[zip_WSIZE + i];\n}\n\nfunction zip_head2(i, val) {\n    return zip_prev[zip_WSIZE + i] = val;\n}\n\n/* put_byte is used for the compressed output, put_ubyte for the\n * uncompressed output. However unlzw() uses window for its\n * suffix table instead of its output buffer, so it does not use put_ubyte\n * (to be cleaned up).\n */\nfunction zip_put_byte(c) {\n    zip_outbuf[zip_outoff + zip_outcnt++] = c;\n    if(zip_outoff + zip_outcnt == zip_OUTBUFSIZ)\n\tzip_qoutbuf();\n}\n\n/* Output a 16 bit value, lsb first */\nfunction zip_put_short(w) {\n    w &= 0xffff;\n    if(zip_outoff + zip_outcnt < zip_OUTBUFSIZ - 2) {\n\tzip_outbuf[zip_outoff + zip_outcnt++] = (w & 0xff);\n\tzip_outbuf[zip_outoff + zip_outcnt++] = (w >>> 8);\n    } else {\n\tzip_put_byte(w & 0xff);\n\tzip_put_byte(w >>> 8);\n    }\n}\n\n/* ==========================================================================\n * Insert string s in the dictionary and set match_head to the previous head\n * of the hash chain (the most recent string with same hash key). Return\n * the previous length of the hash chain.\n * IN  assertion: all calls to to INSERT_STRING are made with consecutive\n *    input characters and the first MIN_MATCH bytes of s are valid\n *    (except for the last MIN_MATCH-1 bytes of the input file).\n */\nfunction zip_INSERT_STRING() {\n    zip_ins_h = ((zip_ins_h << zip_H_SHIFT)\n\t\t ^ (zip_window[zip_strstart + zip_MIN_MATCH - 1] & 0xff))\n\t& zip_HASH_MASK;\n    zip_hash_head = zip_head1(zip_ins_h);\n    zip_prev[zip_strstart & zip_WMASK] = zip_hash_head;\n    zip_head2(zip_ins_h, zip_strstart);\n}\n\n/* Send a code of the given tree. c and tree must not have side effects */\nfunction zip_SEND_CODE(c, tree) {\n    zip_send_bits(tree[c].fc, tree[c].dl);\n}\n\n/* Mapping from a distance to a distance code. dist is the distance - 1 and\n * must not have side effects. dist_code[256] and dist_code[257] are never\n * used.\n */\nfunction zip_D_CODE(dist) {\n    return (dist < 256 ? zip_dist_code[dist]\n\t    : zip_dist_code[256 + (dist>>7)]) & 0xff;\n}\n\n/* ==========================================================================\n * Compares to subtrees, using the tree depth as tie breaker when\n * the subtrees have equal frequency. This minimizes the worst case length.\n */\nfunction zip_SMALLER(tree, n, m) {\n    return tree[n].fc < tree[m].fc ||\n      (tree[n].fc == tree[m].fc && zip_depth[n] <= zip_depth[m]);\n}\n\n/* ==========================================================================\n * read string data\n */\nfunction zip_read_buff(buff, offset, n) {\n    var i;\n    for(i = 0; i < n && zip_deflate_pos < zip_deflate_data.length; i++)\n\tbuff[offset + i] =\n\t    zip_deflate_data.charCodeAt(zip_deflate_pos++) & 0xff;\n    return i;\n}\n\n/* ==========================================================================\n * Initialize the \"longest match\" routines for a new file\n */\nfunction zip_lm_init() {\n    var j;\n\n    /* Initialize the hash table. */\n    for(j = 0; j < zip_HASH_SIZE; j++)\n//\tzip_head2(j, zip_NIL);\n\tzip_prev[zip_WSIZE + j] = 0;\n    /* prev will be initialized on the fly */\n\n    /* Set the default configuration parameters:\n     */\n    zip_max_lazy_match = zip_configuration_table[zip_compr_level].max_lazy;\n    zip_good_match     = zip_configuration_table[zip_compr_level].good_length;\n    if(!zip_FULL_SEARCH)\n\tzip_nice_match = zip_configuration_table[zip_compr_level].nice_length;\n    zip_max_chain_length = zip_configuration_table[zip_compr_level].max_chain;\n\n    zip_strstart = 0;\n    zip_block_start = 0;\n\n    zip_lookahead = zip_read_buff(zip_window, 0, 2 * zip_WSIZE);\n    if(zip_lookahead <= 0) {\n\tzip_eofile = true;\n\tzip_lookahead = 0;\n\treturn;\n    }\n    zip_eofile = false;\n    /* Make sure that we always have enough lookahead. This is important\n     * if input comes from a device such as a tty.\n     */\n    while(zip_lookahead < zip_MIN_LOOKAHEAD && !zip_eofile)\n\tzip_fill_window();\n\n    /* If lookahead < MIN_MATCH, ins_h is garbage, but this is\n     * not important since only literal bytes will be emitted.\n     */\n    zip_ins_h = 0;\n    for(j = 0; j < zip_MIN_MATCH - 1; j++) {\n//      UPDATE_HASH(ins_h, window[j]);\n\tzip_ins_h = ((zip_ins_h << zip_H_SHIFT) ^ (zip_window[j] & 0xff)) & zip_HASH_MASK;\n    }\n}\n\n/* ==========================================================================\n * Set match_start to the longest match starting at the given string and\n * return its length. Matches shorter or equal to prev_length are discarded,\n * in which case the result is equal to prev_length and match_start is\n * garbage.\n * IN assertions: cur_match is the head of the hash chain for the current\n *   string (strstart) and its distance is <= MAX_DIST, and prev_length >= 1\n */\nfunction zip_longest_match(cur_match) {\n    var chain_length = zip_max_chain_length; // max hash chain length\n    var scanp = zip_strstart; // current string\n    var matchp;\t\t// matched string\n    var len;\t\t// length of current match\n    var best_len = zip_prev_length;\t// best match length so far\n\n    /* Stop when cur_match becomes <= limit. To simplify the code,\n     * we prevent matches with the string of window index 0.\n     */\n    var limit = (zip_strstart > zip_MAX_DIST ? zip_strstart - zip_MAX_DIST : zip_NIL);\n\n    var strendp = zip_strstart + zip_MAX_MATCH;\n    var scan_end1 = zip_window[scanp + best_len - 1];\n    var scan_end  = zip_window[scanp + best_len];\n\n    /* Do not waste too much time if we already have a good match: */\n    if(zip_prev_length >= zip_good_match)\n\tchain_length >>= 2;\n\n//  Assert(encoder->strstart <= window_size-MIN_LOOKAHEAD, \"insufficient lookahead\");\n\n    do {\n//    Assert(cur_match < encoder->strstart, \"no future\");\n\tmatchp = cur_match;\n\n\t/* Skip to next match if the match length cannot increase\n\t    * or if the match length is less than 2:\n\t*/\n\tif(zip_window[matchp + best_len]\t!= scan_end  ||\n\t   zip_window[matchp + best_len - 1]\t!= scan_end1 ||\n\t   zip_window[matchp]\t\t\t!= zip_window[scanp] ||\n\t   zip_window[++matchp]\t\t\t!= zip_window[scanp + 1]) {\n\t    continue;\n\t}\n\n\t/* The check at best_len-1 can be removed because it will be made\n         * again later. (This heuristic is not always a win.)\n         * It is not necessary to compare scan[2] and match[2] since they\n         * are always equal when the other bytes match, given that\n         * the hash keys are equal and that HASH_BITS >= 8.\n         */\n\tscanp += 2;\n\tmatchp++;\n\n\t/* We check for insufficient lookahead only every 8th comparison;\n         * the 256th check will be made at strstart+258.\n         */\n\tdo {\n\t} while(zip_window[++scanp] == zip_window[++matchp] &&\n\t\tzip_window[++scanp] == zip_window[++matchp] &&\n\t\tzip_window[++scanp] == zip_window[++matchp] &&\n\t\tzip_window[++scanp] == zip_window[++matchp] &&\n\t\tzip_window[++scanp] == zip_window[++matchp] &&\n\t\tzip_window[++scanp] == zip_window[++matchp] &&\n\t\tzip_window[++scanp] == zip_window[++matchp] &&\n\t\tzip_window[++scanp] == zip_window[++matchp] &&\n\t\tscanp < strendp);\n\n      len = zip_MAX_MATCH - (strendp - scanp);\n      scanp = strendp - zip_MAX_MATCH;\n\n      if(len > best_len) {\n\t  zip_match_start = cur_match;\n\t  best_len = len;\n\t  if(zip_FULL_SEARCH) {\n\t      if(len >= zip_MAX_MATCH) break;\n\t  } else {\n\t      if(len >= zip_nice_match) break;\n\t  }\n\n\t  scan_end1  = zip_window[scanp + best_len-1];\n\t  scan_end   = zip_window[scanp + best_len];\n      }\n    } while((cur_match = zip_prev[cur_match & zip_WMASK]) > limit\n\t    && --chain_length != 0);\n\n    return best_len;\n}\n\n/* ==========================================================================\n * Fill the window when the lookahead becomes insufficient.\n * Updates strstart and lookahead, and sets eofile if end of input file.\n * IN assertion: lookahead < MIN_LOOKAHEAD && strstart + lookahead > 0\n * OUT assertions: at least one byte has been read, or eofile is set;\n *    file reads are performed for at least two bytes (required for the\n *    translate_eol option).\n */\nfunction zip_fill_window() {\n    var n, m;\n\n    // Amount of free space at the end of the window.\n    var more = zip_window_size - zip_lookahead - zip_strstart;\n\n    /* If the window is almost full and there is insufficient lookahead,\n     * move the upper half to the lower one to make room in the upper half.\n     */\n    if(more == -1) {\n\t/* Very unlikely, but possible on 16 bit machine if strstart == 0\n         * and lookahead == 1 (input done one byte at time)\n         */\n\tmore--;\n    } else if(zip_strstart >= zip_WSIZE + zip_MAX_DIST) {\n\t/* By the IN assertion, the window is not empty so we can't confuse\n         * more == 0 with more == 64K on a 16 bit machine.\n         */\n//\tAssert(window_size == (ulg)2*WSIZE, \"no sliding with BIG_MEM\");\n\n//\tSystem.arraycopy(window, WSIZE, window, 0, WSIZE);\n\tfor(n = 0; n < zip_WSIZE; n++)\n\t    zip_window[n] = zip_window[n + zip_WSIZE];\n      \n\tzip_match_start -= zip_WSIZE;\n\tzip_strstart    -= zip_WSIZE; /* we now have strstart >= MAX_DIST: */\n\tzip_block_start -= zip_WSIZE;\n\n\tfor(n = 0; n < zip_HASH_SIZE; n++) {\n\t    m = zip_head1(n);\n\t    zip_head2(n, m >= zip_WSIZE ? m - zip_WSIZE : zip_NIL);\n\t}\n\tfor(n = 0; n < zip_WSIZE; n++) {\n\t    /* If n is not on any hash chain, prev[n] is garbage but\n\t     * its value will never be used.\n\t     */\n\t    m = zip_prev[n];\n\t    zip_prev[n] = (m >= zip_WSIZE ? m - zip_WSIZE : zip_NIL);\n\t}\n\tmore += zip_WSIZE;\n    }\n    // At this point, more >= 2\n    if(!zip_eofile) {\n\tn = zip_read_buff(zip_window, zip_strstart + zip_lookahead, more);\n\tif(n <= 0)\n\t    zip_eofile = true;\n\telse\n\t    zip_lookahead += n;\n    }\n}\n\n/* ==========================================================================\n * Processes a new input file and return its compressed length. This\n * function does not perform lazy evaluationof matches and inserts\n * new strings in the dictionary only for unmatched strings or for short\n * matches. It is used only for the fast compression options.\n */\nfunction zip_deflate_fast() {\n    while(zip_lookahead != 0 && zip_qhead == null) {\n\tvar flush; // set if current block must be flushed\n\n\t/* Insert the string window[strstart .. strstart+2] in the\n\t * dictionary, and set hash_head to the head of the hash chain:\n\t */\n\tzip_INSERT_STRING();\n\n\t/* Find the longest match, discarding those <= prev_length.\n\t * At this point we have always match_length < MIN_MATCH\n\t */\n\tif(zip_hash_head != zip_NIL &&\n\t   zip_strstart - zip_hash_head <= zip_MAX_DIST) {\n\t    /* To simplify the code, we prevent matches with the string\n\t     * of window index 0 (in particular we have to avoid a match\n\t     * of the string with itself at the start of the input file).\n\t     */\n\t    zip_match_length = zip_longest_match(zip_hash_head);\n\t    /* longest_match() sets match_start */\n\t    if(zip_match_length > zip_lookahead)\n\t\tzip_match_length = zip_lookahead;\n\t}\n\tif(zip_match_length >= zip_MIN_MATCH) {\n//\t    check_match(strstart, match_start, match_length);\n\n\t    flush = zip_ct_tally(zip_strstart - zip_match_start,\n\t\t\t\t zip_match_length - zip_MIN_MATCH);\n\t    zip_lookahead -= zip_match_length;\n\n\t    /* Insert new strings in the hash table only if the match length\n\t     * is not too large. This saves time but degrades compression.\n\t     */\n\t    if(zip_match_length <= zip_max_lazy_match) {\n\t\tzip_match_length--; // string at strstart already in hash table\n\t\tdo {\n\t\t    zip_strstart++;\n\t\t    zip_INSERT_STRING();\n\t\t    /* strstart never exceeds WSIZE-MAX_MATCH, so there are\n\t\t     * always MIN_MATCH bytes ahead. If lookahead < MIN_MATCH\n\t\t     * these bytes are garbage, but it does not matter since\n\t\t     * the next lookahead bytes will be emitted as literals.\n\t\t     */\n\t\t} while(--zip_match_length != 0);\n\t\tzip_strstart++;\n\t    } else {\n\t\tzip_strstart += zip_match_length;\n\t\tzip_match_length = 0;\n\t\tzip_ins_h = zip_window[zip_strstart] & 0xff;\n//\t\tUPDATE_HASH(ins_h, window[strstart + 1]);\n\t\tzip_ins_h = ((zip_ins_h<<zip_H_SHIFT) ^ (zip_window[zip_strstart + 1] & 0xff)) & zip_HASH_MASK;\n\n//#if MIN_MATCH != 3\n//\t\tCall UPDATE_HASH() MIN_MATCH-3 more times\n//#endif\n\n\t    }\n\t} else {\n\t    /* No match, output a literal byte */\n\t    flush = zip_ct_tally(0, zip_window[zip_strstart] & 0xff);\n\t    zip_lookahead--;\n\t    zip_strstart++;\n\t}\n\tif(flush) {\n\t    zip_flush_block(0);\n\t    zip_block_start = zip_strstart;\n\t}\n\n\t/* Make sure that we always have enough lookahead, except\n\t * at the end of the input file. We need MAX_MATCH bytes\n\t * for the next match, plus MIN_MATCH bytes to insert the\n\t * string following the next match.\n\t */\n\twhile(zip_lookahead < zip_MIN_LOOKAHEAD && !zip_eofile)\n\t    zip_fill_window();\n    }\n}\n\nfunction zip_deflate_better() {\n    /* Process the input block. */\n    while(zip_lookahead != 0 && zip_qhead == null) {\n\t/* Insert the string window[strstart .. strstart+2] in the\n\t * dictionary, and set hash_head to the head of the hash chain:\n\t */\n\tzip_INSERT_STRING();\n\n\t/* Find the longest match, discarding those <= prev_length.\n\t */\n\tzip_prev_length = zip_match_length;\n\tzip_prev_match = zip_match_start;\n\tzip_match_length = zip_MIN_MATCH - 1;\n\n\tif(zip_hash_head != zip_NIL &&\n\t   zip_prev_length < zip_max_lazy_match &&\n\t   zip_strstart - zip_hash_head <= zip_MAX_DIST) {\n\t    /* To simplify the code, we prevent matches with the string\n\t     * of window index 0 (in particular we have to avoid a match\n\t     * of the string with itself at the start of the input file).\n\t     */\n\t    zip_match_length = zip_longest_match(zip_hash_head);\n\t    /* longest_match() sets match_start */\n\t    if(zip_match_length > zip_lookahead)\n\t\tzip_match_length = zip_lookahead;\n\n\t    /* Ignore a length 3 match if it is too distant: */\n\t    if(zip_match_length == zip_MIN_MATCH &&\n\t       zip_strstart - zip_match_start > zip_TOO_FAR) {\n\t\t/* If prev_match is also MIN_MATCH, match_start is garbage\n\t\t * but we will ignore the current match anyway.\n\t\t */\n\t\tzip_match_length--;\n\t    }\n\t}\n\t/* If there was a match at the previous step and the current\n\t * match is not better, output the previous match:\n\t */\n\tif(zip_prev_length >= zip_MIN_MATCH &&\n\t   zip_match_length <= zip_prev_length) {\n\t    var flush; // set if current block must be flushed\n\n//\t    check_match(strstart - 1, prev_match, prev_length);\n\t    flush = zip_ct_tally(zip_strstart - 1 - zip_prev_match,\n\t\t\t\t zip_prev_length - zip_MIN_MATCH);\n\n\t    /* Insert in hash table all strings up to the end of the match.\n\t     * strstart-1 and strstart are already inserted.\n\t     */\n\t    zip_lookahead -= zip_prev_length - 1;\n\t    zip_prev_length -= 2;\n\t    do {\n\t\tzip_strstart++;\n\t\tzip_INSERT_STRING();\n\t\t/* strstart never exceeds WSIZE-MAX_MATCH, so there are\n\t\t * always MIN_MATCH bytes ahead. If lookahead < MIN_MATCH\n\t\t * these bytes are garbage, but it does not matter since the\n\t\t * next lookahead bytes will always be emitted as literals.\n\t\t */\n\t    } while(--zip_prev_length != 0);\n\t    zip_match_available = 0;\n\t    zip_match_length = zip_MIN_MATCH - 1;\n\t    zip_strstart++;\n\t    if(flush) {\n\t\tzip_flush_block(0);\n\t\tzip_block_start = zip_strstart;\n\t    }\n\t} else if(zip_match_available != 0) {\n\t    /* If there was no match at the previous position, output a\n\t     * single literal. If there was a match but the current match\n\t     * is longer, truncate the previous match to a single literal.\n\t     */\n\t    if(zip_ct_tally(0, zip_window[zip_strstart - 1] & 0xff)) {\n\t\tzip_flush_block(0);\n\t\tzip_block_start = zip_strstart;\n\t    }\n\t    zip_strstart++;\n\t    zip_lookahead--;\n\t} else {\n\t    /* There is no previous match to compare with, wait for\n\t     * the next step to decide.\n\t     */\n\t    zip_match_available = 1;\n\t    zip_strstart++;\n\t    zip_lookahead--;\n\t}\n\n\t/* Make sure that we always have enough lookahead, except\n\t * at the end of the input file. We need MAX_MATCH bytes\n\t * for the next match, plus MIN_MATCH bytes to insert the\n\t * string following the next match.\n\t */\n\twhile(zip_lookahead < zip_MIN_LOOKAHEAD && !zip_eofile)\n\t    zip_fill_window();\n    }\n}\n\nfunction zip_init_deflate() {\n    if(zip_eofile)\n\treturn;\n    zip_bi_buf = 0;\n    zip_bi_valid = 0;\n    zip_ct_init();\n    zip_lm_init();\n\n    zip_qhead = null;\n    zip_outcnt = 0;\n    zip_outoff = 0;\n\n    if(zip_compr_level <= 3)\n    {\n\tzip_prev_length = zip_MIN_MATCH - 1;\n\tzip_match_length = 0;\n    }\n    else\n    {\n\tzip_match_length = zip_MIN_MATCH - 1;\n\tzip_match_available = 0;\n    }\n\n    zip_complete = false;\n}\n\n/* ==========================================================================\n * Same as above, but achieves better compression. We use a lazy\n * evaluation for matches: a match is finally adopted only if there is\n * no better match at the next window position.\n */\nfunction zip_deflate_internal(buff, off, buff_size) {\n    var n;\n\n    if(!zip_initflag)\n    {\n\tzip_init_deflate();\n\tzip_initflag = true;\n\tif(zip_lookahead == 0) { // empty\n\t    zip_complete = true;\n\t    return 0;\n\t}\n    }\n\n    if((n = zip_qcopy(buff, off, buff_size)) == buff_size)\n\treturn buff_size;\n\n    if(zip_complete)\n\treturn n;\n\n    if(zip_compr_level <= 3) // optimized for speed\n\tzip_deflate_fast();\n    else\n\tzip_deflate_better();\n    if(zip_lookahead == 0) {\n\tif(zip_match_available != 0)\n\t    zip_ct_tally(0, zip_window[zip_strstart - 1] & 0xff);\n\tzip_flush_block(1);\n\tzip_complete = true;\n    }\n    return n + zip_qcopy(buff, n + off, buff_size - n);\n}\n\nfunction zip_qcopy(buff, off, buff_size) {\n    var n, i, j;\n\n    n = 0;\n    while(zip_qhead != null && n < buff_size)\n    {\n\ti = buff_size - n;\n\tif(i > zip_qhead.len)\n\t    i = zip_qhead.len;\n//      System.arraycopy(qhead.ptr, qhead.off, buff, off + n, i);\n\tfor(j = 0; j < i; j++)\n\t    buff[off + n + j] = zip_qhead.ptr[zip_qhead.off + j];\n\t\n\tzip_qhead.off += i;\n\tzip_qhead.len -= i;\n\tn += i;\n\tif(zip_qhead.len == 0) {\n\t    var p;\n\t    p = zip_qhead;\n\t    zip_qhead = zip_qhead.next;\n\t    zip_reuse_queue(p);\n\t}\n    }\n\n    if(n == buff_size)\n\treturn n;\n\n    if(zip_outoff < zip_outcnt) {\n\ti = buff_size - n;\n\tif(i > zip_outcnt - zip_outoff)\n\t    i = zip_outcnt - zip_outoff;\n\t// System.arraycopy(outbuf, outoff, buff, off + n, i);\n\tfor(j = 0; j < i; j++)\n\t    buff[off + n + j] = zip_outbuf[zip_outoff + j];\n\tzip_outoff += i;\n\tn += i;\n\tif(zip_outcnt == zip_outoff)\n\t    zip_outcnt = zip_outoff = 0;\n    }\n    return n;\n}\n\n/* ==========================================================================\n * Allocate the match buffer, initialize the various tables and save the\n * location of the internal file attribute (ascii/binary) and method\n * (DEFLATE/STORE).\n */\nfunction zip_ct_init() {\n    var n;\t// iterates over tree elements\n    var bits;\t// bit counter\n    var length;\t// length value\n    var code;\t// code value\n    var dist;\t// distance index\n\n    if(zip_static_dtree[0].dl != 0) return; // ct_init already called\n\n    zip_l_desc.dyn_tree\t\t= zip_dyn_ltree;\n    zip_l_desc.static_tree\t= zip_static_ltree;\n    zip_l_desc.extra_bits\t= zip_extra_lbits;\n    zip_l_desc.extra_base\t= zip_LITERALS + 1;\n    zip_l_desc.elems\t\t= zip_L_CODES;\n    zip_l_desc.max_length\t= zip_MAX_BITS;\n    zip_l_desc.max_code\t\t= 0;\n\n    zip_d_desc.dyn_tree\t\t= zip_dyn_dtree;\n    zip_d_desc.static_tree\t= zip_static_dtree;\n    zip_d_desc.extra_bits\t= zip_extra_dbits;\n    zip_d_desc.extra_base\t= 0;\n    zip_d_desc.elems\t\t= zip_D_CODES;\n    zip_d_desc.max_length\t= zip_MAX_BITS;\n    zip_d_desc.max_code\t\t= 0;\n\n    zip_bl_desc.dyn_tree\t= zip_bl_tree;\n    zip_bl_desc.static_tree\t= null;\n    zip_bl_desc.extra_bits\t= zip_extra_blbits;\n    zip_bl_desc.extra_base\t= 0;\n    zip_bl_desc.elems\t\t= zip_BL_CODES;\n    zip_bl_desc.max_length\t= zip_MAX_BL_BITS;\n    zip_bl_desc.max_code\t= 0;\n\n    // Initialize the mapping length (0..255) -> length code (0..28)\n    length = 0;\n    for(code = 0; code < zip_LENGTH_CODES-1; code++) {\n\tzip_base_length[code] = length;\n\tfor(n = 0; n < (1<<zip_extra_lbits[code]); n++)\n\t    zip_length_code[length++] = code;\n    }\n    // Assert (length == 256, \"ct_init: length != 256\");\n\n    /* Note that the length 255 (match length 258) can be represented\n     * in two different ways: code 284 + 5 bits or code 285, so we\n     * overwrite length_code[255] to use the best encoding:\n     */\n    zip_length_code[length-1] = code;\n\n    /* Initialize the mapping dist (0..32K) -> dist code (0..29) */\n    dist = 0;\n    for(code = 0 ; code < 16; code++) {\n\tzip_base_dist[code] = dist;\n\tfor(n = 0; n < (1<<zip_extra_dbits[code]); n++) {\n\t    zip_dist_code[dist++] = code;\n\t}\n    }\n    // Assert (dist == 256, \"ct_init: dist != 256\");\n    dist >>= 7; // from now on, all distances are divided by 128\n    for( ; code < zip_D_CODES; code++) {\n\tzip_base_dist[code] = dist << 7;\n\tfor(n = 0; n < (1<<(zip_extra_dbits[code]-7)); n++)\n\t    zip_dist_code[256 + dist++] = code;\n    }\n    // Assert (dist == 256, \"ct_init: 256+dist != 512\");\n\n    // Construct the codes of the static literal tree\n    for(bits = 0; bits <= zip_MAX_BITS; bits++)\n\tzip_bl_count[bits] = 0;\n    n = 0;\n    while(n <= 143) { zip_static_ltree[n++].dl = 8; zip_bl_count[8]++; }\n    while(n <= 255) { zip_static_ltree[n++].dl = 9; zip_bl_count[9]++; }\n    while(n <= 279) { zip_static_ltree[n++].dl = 7; zip_bl_count[7]++; }\n    while(n <= 287) { zip_static_ltree[n++].dl = 8; zip_bl_count[8]++; }\n    /* Codes 286 and 287 do not exist, but we must include them in the\n     * tree construction to get a canonical Huffman tree (longest code\n     * all ones)\n     */\n    zip_gen_codes(zip_static_ltree, zip_L_CODES + 1);\n\n    /* The static distance tree is trivial: */\n    for(n = 0; n < zip_D_CODES; n++) {\n\tzip_static_dtree[n].dl = 5;\n\tzip_static_dtree[n].fc = zip_bi_reverse(n, 5);\n    }\n\n    // Initialize the first block of the first file:\n    zip_init_block();\n}\n\n/* ==========================================================================\n * Initialize a new block.\n */\nfunction zip_init_block() {\n    var n; // iterates over tree elements\n\n    // Initialize the trees.\n    for(n = 0; n < zip_L_CODES;  n++) zip_dyn_ltree[n].fc = 0;\n    for(n = 0; n < zip_D_CODES;  n++) zip_dyn_dtree[n].fc = 0;\n    for(n = 0; n < zip_BL_CODES; n++) zip_bl_tree[n].fc = 0;\n\n    zip_dyn_ltree[zip_END_BLOCK].fc = 1;\n    zip_opt_len = zip_static_len = 0;\n    zip_last_lit = zip_last_dist = zip_last_flags = 0;\n    zip_flags = 0;\n    zip_flag_bit = 1;\n}\n\n/* ==========================================================================\n * Restore the heap property by moving down the tree starting at node k,\n * exchanging a node with the smallest of its two sons if necessary, stopping\n * when the heap property is re-established (each father smaller than its\n * two sons).\n */\nfunction zip_pqdownheap(\n    tree,\t// the tree to restore\n    k) {\t// node to move down\n    var v = zip_heap[k];\n    var j = k << 1;\t// left son of k\n\n    while(j <= zip_heap_len) {\n\t// Set j to the smallest of the two sons:\n\tif(j < zip_heap_len &&\n\t   zip_SMALLER(tree, zip_heap[j + 1], zip_heap[j]))\n\t    j++;\n\n\t// Exit if v is smaller than both sons\n\tif(zip_SMALLER(tree, v, zip_heap[j]))\n\t    break;\n\n\t// Exchange v with the smallest son\n\tzip_heap[k] = zip_heap[j];\n\tk = j;\n\n\t// And continue down the tree, setting j to the left son of k\n\tj <<= 1;\n    }\n    zip_heap[k] = v;\n}\n\n/* ==========================================================================\n * Compute the optimal bit lengths for a tree and update the total bit length\n * for the current block.\n * IN assertion: the fields freq and dad are set, heap[heap_max] and\n *    above are the tree nodes sorted by increasing frequency.\n * OUT assertions: the field len is set to the optimal bit length, the\n *     array bl_count contains the frequencies for each bit length.\n *     The length opt_len is updated; static_len is also updated if stree is\n *     not null.\n */\nfunction zip_gen_bitlen(desc) { // the tree descriptor\n    var tree\t\t= desc.dyn_tree;\n    var extra\t\t= desc.extra_bits;\n    var base\t\t= desc.extra_base;\n    var max_code\t= desc.max_code;\n    var max_length\t= desc.max_length;\n    var stree\t\t= desc.static_tree;\n    var h;\t\t// heap index\n    var n, m;\t\t// iterate over the tree elements\n    var bits;\t\t// bit length\n    var xbits;\t\t// extra bits\n    var f;\t\t// frequency\n    var overflow = 0;\t// number of elements with bit length too large\n\n    for(bits = 0; bits <= zip_MAX_BITS; bits++)\n\tzip_bl_count[bits] = 0;\n\n    /* In a first pass, compute the optimal bit lengths (which may\n     * overflow in the case of the bit length tree).\n     */\n    tree[zip_heap[zip_heap_max]].dl = 0; // root of the heap\n\n    for(h = zip_heap_max + 1; h < zip_HEAP_SIZE; h++) {\n\tn = zip_heap[h];\n\tbits = tree[tree[n].dl].dl + 1;\n\tif(bits > max_length) {\n\t    bits = max_length;\n\t    overflow++;\n\t}\n\ttree[n].dl = bits;\n\t// We overwrite tree[n].dl which is no longer needed\n\n\tif(n > max_code)\n\t    continue; // not a leaf node\n\n\tzip_bl_count[bits]++;\n\txbits = 0;\n\tif(n >= base)\n\t    xbits = extra[n - base];\n\tf = tree[n].fc;\n\tzip_opt_len += f * (bits + xbits);\n\tif(stree != null)\n\t    zip_static_len += f * (stree[n].dl + xbits);\n    }\n    if(overflow == 0)\n\treturn;\n\n    // This happens for example on obj2 and pic of the Calgary corpus\n\n    // Find the first bit length which could increase:\n    do {\n\tbits = max_length - 1;\n\twhile(zip_bl_count[bits] == 0)\n\t    bits--;\n\tzip_bl_count[bits]--;\t\t// move one leaf down the tree\n\tzip_bl_count[bits + 1] += 2;\t// move one overflow item as its brother\n\tzip_bl_count[max_length]--;\n\t/* The brother of the overflow item also moves one step up,\n\t * but this does not affect bl_count[max_length]\n\t */\n\toverflow -= 2;\n    } while(overflow > 0);\n\n    /* Now recompute all bit lengths, scanning in increasing frequency.\n     * h is still equal to HEAP_SIZE. (It is simpler to reconstruct all\n     * lengths instead of fixing only the wrong ones. This idea is taken\n     * from 'ar' written by Haruhiko Okumura.)\n     */\n    for(bits = max_length; bits != 0; bits--) {\n\tn = zip_bl_count[bits];\n\twhile(n != 0) {\n\t    m = zip_heap[--h];\n\t    if(m > max_code)\n\t\tcontinue;\n\t    if(tree[m].dl != bits) {\n\t\tzip_opt_len += (bits - tree[m].dl) * tree[m].fc;\n\t\ttree[m].fc = bits;\n\t    }\n\t    n--;\n\t}\n    }\n}\n\n  /* ==========================================================================\n   * Generate the codes for a given tree and bit counts (which need not be\n   * optimal).\n   * IN assertion: the array bl_count contains the bit length statistics for\n   * the given tree and the field len is set for all tree elements.\n   * OUT assertion: the field code is set for all tree elements of non\n   *     zero code length.\n   */\nfunction zip_gen_codes(tree,\t// the tree to decorate\n\t\t   max_code) {\t// largest code with non zero frequency\n    var next_code = new Array(zip_MAX_BITS+1); // next code value for each bit length\n    var code = 0;\t\t// running code value\n    var bits;\t\t\t// bit index\n    var n;\t\t\t// code index\n\n    /* The distribution counts are first used to generate the code values\n     * without bit reversal.\n     */\n    for(bits = 1; bits <= zip_MAX_BITS; bits++) {\n\tcode = ((code + zip_bl_count[bits-1]) << 1);\n\tnext_code[bits] = code;\n    }\n\n    /* Check that the bit counts in bl_count are consistent. The last code\n     * must be all ones.\n     */\n//    Assert (code + encoder->bl_count[MAX_BITS]-1 == (1<<MAX_BITS)-1,\n//\t    \"inconsistent bit counts\");\n//    Tracev((stderr,\"\\ngen_codes: max_code %d \", max_code));\n\n    for(n = 0; n <= max_code; n++) {\n\tvar len = tree[n].dl;\n\tif(len == 0)\n\t    continue;\n\t// Now reverse the bits\n\ttree[n].fc = zip_bi_reverse(next_code[len]++, len);\n\n//      Tracec(tree != static_ltree, (stderr,\"\\nn %3d %c l %2d c %4x (%x) \",\n//\t  n, (isgraph(n) ? n : ' '), len, tree[n].fc, next_code[len]-1));\n    }\n}\n\n/* ==========================================================================\n * Construct one Huffman tree and assigns the code bit strings and lengths.\n * Update the total bit length for the current block.\n * IN assertion: the field freq is set for all tree elements.\n * OUT assertions: the fields len and code are set to the optimal bit length\n *     and corresponding code. The length opt_len is updated; static_len is\n *     also updated if stree is not null. The field max_code is set.\n */\nfunction zip_build_tree(desc) { // the tree descriptor\n    var tree\t= desc.dyn_tree;\n    var stree\t= desc.static_tree;\n    var elems\t= desc.elems;\n    var n, m;\t\t// iterate over heap elements\n    var max_code = -1;\t// largest code with non zero frequency\n    var node = elems;\t// next internal node of the tree\n\n    /* Construct the initial heap, with least frequent element in\n     * heap[SMALLEST]. The sons of heap[n] are heap[2*n] and heap[2*n+1].\n     * heap[0] is not used.\n     */\n    zip_heap_len = 0;\n    zip_heap_max = zip_HEAP_SIZE;\n\n    for(n = 0; n < elems; n++) {\n\tif(tree[n].fc != 0) {\n\t    zip_heap[++zip_heap_len] = max_code = n;\n\t    zip_depth[n] = 0;\n\t} else\n\t    tree[n].dl = 0;\n    }\n\n    /* The pkzip format requires that at least one distance code exists,\n     * and that at least one bit should be sent even if there is only one\n     * possible code. So to avoid special checks later on we force at least\n     * two codes of non zero frequency.\n     */\n    while(zip_heap_len < 2) {\n\tvar xnew = zip_heap[++zip_heap_len] = (max_code < 2 ? ++max_code : 0);\n\ttree[xnew].fc = 1;\n\tzip_depth[xnew] = 0;\n\tzip_opt_len--;\n\tif(stree != null)\n\t    zip_static_len -= stree[xnew].dl;\n\t// new is 0 or 1 so it does not have extra bits\n    }\n    desc.max_code = max_code;\n\n    /* The elements heap[heap_len/2+1 .. heap_len] are leaves of the tree,\n     * establish sub-heaps of increasing lengths:\n     */\n    for(n = zip_heap_len >> 1; n >= 1; n--)\n\tzip_pqdownheap(tree, n);\n\n    /* Construct the Huffman tree by repeatedly combining the least two\n     * frequent nodes.\n     */\n    do {\n\tn = zip_heap[zip_SMALLEST];\n\tzip_heap[zip_SMALLEST] = zip_heap[zip_heap_len--];\n\tzip_pqdownheap(tree, zip_SMALLEST);\n\n\tm = zip_heap[zip_SMALLEST];  // m = node of next least frequency\n\n\t// keep the nodes sorted by frequency\n\tzip_heap[--zip_heap_max] = n;\n\tzip_heap[--zip_heap_max] = m;\n\n\t// Create a new node father of n and m\n\ttree[node].fc = tree[n].fc + tree[m].fc;\n//\tdepth[node] = (char)(MAX(depth[n], depth[m]) + 1);\n\tif(zip_depth[n] > zip_depth[m] + 1)\n\t    zip_depth[node] = zip_depth[n];\n\telse\n\t    zip_depth[node] = zip_depth[m] + 1;\n\ttree[n].dl = tree[m].dl = node;\n\n\t// and insert the new node in the heap\n\tzip_heap[zip_SMALLEST] = node++;\n\tzip_pqdownheap(tree, zip_SMALLEST);\n\n    } while(zip_heap_len >= 2);\n\n    zip_heap[--zip_heap_max] = zip_heap[zip_SMALLEST];\n\n    /* At this point, the fields freq and dad are set. We can now\n     * generate the bit lengths.\n     */\n    zip_gen_bitlen(desc);\n\n    // The field len is now set, we can generate the bit codes\n    zip_gen_codes(tree, max_code);\n}\n\n/* ==========================================================================\n * Scan a literal or distance tree to determine the frequencies of the codes\n * in the bit length tree. Updates opt_len to take into account the repeat\n * counts. (The contribution of the bit length codes will be added later\n * during the construction of bl_tree.)\n */\nfunction zip_scan_tree(tree,// the tree to be scanned\n\t\t       max_code) {  // and its largest code of non zero frequency\n    var n;\t\t\t// iterates over all tree elements\n    var prevlen = -1;\t\t// last emitted length\n    var curlen;\t\t\t// length of current code\n    var nextlen = tree[0].dl;\t// length of next code\n    var count = 0;\t\t// repeat count of the current code\n    var max_count = 7;\t\t// max repeat count\n    var min_count = 4;\t\t// min repeat count\n\n    if(nextlen == 0) {\n\tmax_count = 138;\n\tmin_count = 3;\n    }\n    tree[max_code + 1].dl = 0xffff; // guard\n\n    for(n = 0; n <= max_code; n++) {\n\tcurlen = nextlen;\n\tnextlen = tree[n + 1].dl;\n\tif(++count < max_count && curlen == nextlen)\n\t    continue;\n\telse if(count < min_count)\n\t    zip_bl_tree[curlen].fc += count;\n\telse if(curlen != 0) {\n\t    if(curlen != prevlen)\n\t\tzip_bl_tree[curlen].fc++;\n\t    zip_bl_tree[zip_REP_3_6].fc++;\n\t} else if(count <= 10)\n\t    zip_bl_tree[zip_REPZ_3_10].fc++;\n\telse\n\t    zip_bl_tree[zip_REPZ_11_138].fc++;\n\tcount = 0; prevlen = curlen;\n\tif(nextlen == 0) {\n\t    max_count = 138;\n\t    min_count = 3;\n\t} else if(curlen == nextlen) {\n\t    max_count = 6;\n\t    min_count = 3;\n\t} else {\n\t    max_count = 7;\n\t    min_count = 4;\n\t}\n    }\n}\n\n  /* ==========================================================================\n   * Send a literal or distance tree in compressed form, using the codes in\n   * bl_tree.\n   */\nfunction zip_send_tree(tree, // the tree to be scanned\n\t\t   max_code) { // and its largest code of non zero frequency\n    var n;\t\t\t// iterates over all tree elements\n    var prevlen = -1;\t\t// last emitted length\n    var curlen;\t\t\t// length of current code\n    var nextlen = tree[0].dl;\t// length of next code\n    var count = 0;\t\t// repeat count of the current code\n    var max_count = 7;\t\t// max repeat count\n    var min_count = 4;\t\t// min repeat count\n\n    /* tree[max_code+1].dl = -1; */  /* guard already set */\n    if(nextlen == 0) {\n      max_count = 138;\n      min_count = 3;\n    }\n\n    for(n = 0; n <= max_code; n++) {\n\tcurlen = nextlen;\n\tnextlen = tree[n+1].dl;\n\tif(++count < max_count && curlen == nextlen) {\n\t    continue;\n\t} else if(count < min_count) {\n\t    do { zip_SEND_CODE(curlen, zip_bl_tree); } while(--count != 0);\n\t} else if(curlen != 0) {\n\t    if(curlen != prevlen) {\n\t\tzip_SEND_CODE(curlen, zip_bl_tree);\n\t\tcount--;\n\t    }\n\t    // Assert(count >= 3 && count <= 6, \" 3_6?\");\n\t    zip_SEND_CODE(zip_REP_3_6, zip_bl_tree);\n\t    zip_send_bits(count - 3, 2);\n\t} else if(count <= 10) {\n\t    zip_SEND_CODE(zip_REPZ_3_10, zip_bl_tree);\n\t    zip_send_bits(count-3, 3);\n\t} else {\n\t    zip_SEND_CODE(zip_REPZ_11_138, zip_bl_tree);\n\t    zip_send_bits(count-11, 7);\n\t}\n\tcount = 0;\n\tprevlen = curlen;\n\tif(nextlen == 0) {\n\t    max_count = 138;\n\t    min_count = 3;\n\t} else if(curlen == nextlen) {\n\t    max_count = 6;\n\t    min_count = 3;\n\t} else {\n\t    max_count = 7;\n\t    min_count = 4;\n\t}\n    }\n}\n\n/* ==========================================================================\n * Construct the Huffman tree for the bit lengths and return the index in\n * bl_order of the last bit length code to send.\n */\nfunction zip_build_bl_tree() {\n    var max_blindex;  // index of last bit length code of non zero freq\n\n    // Determine the bit length frequencies for literal and distance trees\n    zip_scan_tree(zip_dyn_ltree, zip_l_desc.max_code);\n    zip_scan_tree(zip_dyn_dtree, zip_d_desc.max_code);\n\n    // Build the bit length tree:\n    zip_build_tree(zip_bl_desc);\n    /* opt_len now includes the length of the tree representations, except\n     * the lengths of the bit lengths codes and the 5+5+4 bits for the counts.\n     */\n\n    /* Determine the number of bit length codes to send. The pkzip format\n     * requires that at least 4 bit length codes be sent. (appnote.txt says\n     * 3 but the actual value used is 4.)\n     */\n    for(max_blindex = zip_BL_CODES-1; max_blindex >= 3; max_blindex--) {\n\tif(zip_bl_tree[zip_bl_order[max_blindex]].dl != 0) break;\n    }\n    /* Update opt_len to include the bit length tree and counts */\n    zip_opt_len += 3*(max_blindex+1) + 5+5+4;\n//    Tracev((stderr, \"\\ndyn trees: dyn %ld, stat %ld\",\n//\t    encoder->opt_len, encoder->static_len));\n\n    return max_blindex;\n}\n\n/* ==========================================================================\n * Send the header for a block using dynamic Huffman trees: the counts, the\n * lengths of the bit length codes, the literal tree and the distance tree.\n * IN assertion: lcodes >= 257, dcodes >= 1, blcodes >= 4.\n */\nfunction zip_send_all_trees(lcodes, dcodes, blcodes) { // number of codes for each tree\n    var rank; // index in bl_order\n\n//    Assert (lcodes >= 257 && dcodes >= 1 && blcodes >= 4, \"not enough codes\");\n//    Assert (lcodes <= L_CODES && dcodes <= D_CODES && blcodes <= BL_CODES,\n//\t    \"too many codes\");\n//    Tracev((stderr, \"\\nbl counts: \"));\n    zip_send_bits(lcodes-257, 5); // not +255 as stated in appnote.txt\n    zip_send_bits(dcodes-1,   5);\n    zip_send_bits(blcodes-4,  4); // not -3 as stated in appnote.txt\n    for(rank = 0; rank < blcodes; rank++) {\n//      Tracev((stderr, \"\\nbl code %2d \", bl_order[rank]));\n\tzip_send_bits(zip_bl_tree[zip_bl_order[rank]].dl, 3);\n    }\n\n    // send the literal tree\n    zip_send_tree(zip_dyn_ltree,lcodes-1);\n\n    // send the distance tree\n    zip_send_tree(zip_dyn_dtree,dcodes-1);\n}\n\n/* ==========================================================================\n * Determine the best encoding for the current block: dynamic trees, static\n * trees or store, and output the encoded block to the zip file.\n */\nfunction zip_flush_block(eof) { // true if this is the last block for a file\n    var opt_lenb, static_lenb; // opt_len and static_len in bytes\n    var max_blindex;\t// index of last bit length code of non zero freq\n    var stored_len;\t// length of input block\n\n    stored_len = zip_strstart - zip_block_start;\n    zip_flag_buf[zip_last_flags] = zip_flags; // Save the flags for the last 8 items\n\n    // Construct the literal and distance trees\n    zip_build_tree(zip_l_desc);\n//    Tracev((stderr, \"\\nlit data: dyn %ld, stat %ld\",\n//\t    encoder->opt_len, encoder->static_len));\n\n    zip_build_tree(zip_d_desc);\n//    Tracev((stderr, \"\\ndist data: dyn %ld, stat %ld\",\n//\t    encoder->opt_len, encoder->static_len));\n    /* At this point, opt_len and static_len are the total bit lengths of\n     * the compressed block data, excluding the tree representations.\n     */\n\n    /* Build the bit length tree for the above two trees, and get the index\n     * in bl_order of the last bit length code to send.\n     */\n    max_blindex = zip_build_bl_tree();\n\n    // Determine the best encoding. Compute first the block length in bytes\n    opt_lenb\t= (zip_opt_len   +3+7)>>3;\n    static_lenb = (zip_static_len+3+7)>>3;\n\n//    Trace((stderr, \"\\nopt %lu(%lu) stat %lu(%lu) stored %lu lit %u dist %u \",\n//\t   opt_lenb, encoder->opt_len,\n//\t   static_lenb, encoder->static_len, stored_len,\n//\t   encoder->last_lit, encoder->last_dist));\n\n    if(static_lenb <= opt_lenb)\n\topt_lenb = static_lenb;\n    if(stored_len + 4 <= opt_lenb // 4: two words for the lengths\n       && zip_block_start >= 0) {\n\tvar i;\n\n\t/* The test buf != NULL is only necessary if LIT_BUFSIZE > WSIZE.\n\t * Otherwise we can't have processed more than WSIZE input bytes since\n\t * the last block flush, because compression would have been\n\t * successful. If LIT_BUFSIZE <= WSIZE, it is never too late to\n\t * transform a block into a stored block.\n\t */\n\tzip_send_bits((zip_STORED_BLOCK<<1)+eof, 3);  /* send block type */\n\tzip_bi_windup();\t\t /* align on byte boundary */\n\tzip_put_short(stored_len);\n\tzip_put_short(~stored_len);\n\n      // copy block\n/*\n      p = &window[block_start];\n      for(i = 0; i < stored_len; i++)\n\tput_byte(p[i]);\n*/\n\tfor(i = 0; i < stored_len; i++)\n\t    zip_put_byte(zip_window[zip_block_start + i]);\n\n    } else if(static_lenb == opt_lenb) {\n\tzip_send_bits((zip_STATIC_TREES<<1)+eof, 3);\n\tzip_compress_block(zip_static_ltree, zip_static_dtree);\n    } else {\n\tzip_send_bits((zip_DYN_TREES<<1)+eof, 3);\n\tzip_send_all_trees(zip_l_desc.max_code+1,\n\t\t\t   zip_d_desc.max_code+1,\n\t\t\t   max_blindex+1);\n\tzip_compress_block(zip_dyn_ltree, zip_dyn_dtree);\n    }\n\n    zip_init_block();\n\n    if(eof != 0)\n\tzip_bi_windup();\n}\n\n/* ==========================================================================\n * Save the match info and tally the frequency counts. Return true if\n * the current block must be flushed.\n */\nfunction zip_ct_tally(\n\tdist, // distance of matched string\n\tlc) { // match length-MIN_MATCH or unmatched char (if dist==0)\n    zip_l_buf[zip_last_lit++] = lc;\n    if(dist == 0) {\n\t// lc is the unmatched char\n\tzip_dyn_ltree[lc].fc++;\n    } else {\n\t// Here, lc is the match length - MIN_MATCH\n\tdist--;\t\t    // dist = match distance - 1\n//      Assert((ush)dist < (ush)MAX_DIST &&\n//\t     (ush)lc <= (ush)(MAX_MATCH-MIN_MATCH) &&\n//\t     (ush)D_CODE(dist) < (ush)D_CODES,  \"ct_tally: bad match\");\n\n\tzip_dyn_ltree[zip_length_code[lc]+zip_LITERALS+1].fc++;\n\tzip_dyn_dtree[zip_D_CODE(dist)].fc++;\n\n\tzip_d_buf[zip_last_dist++] = dist;\n\tzip_flags |= zip_flag_bit;\n    }\n    zip_flag_bit <<= 1;\n\n    // Output the flags if they fill a byte\n    if((zip_last_lit & 7) == 0) {\n\tzip_flag_buf[zip_last_flags++] = zip_flags;\n\tzip_flags = 0;\n\tzip_flag_bit = 1;\n    }\n    // Try to guess if it is profitable to stop the current block here\n    if(zip_compr_level > 2 && (zip_last_lit & 0xfff) == 0) {\n\t// Compute an upper bound for the compressed length\n\tvar out_length = zip_last_lit * 8;\n\tvar in_length = zip_strstart - zip_block_start;\n\tvar dcode;\n\n\tfor(dcode = 0; dcode < zip_D_CODES; dcode++) {\n\t    out_length += zip_dyn_dtree[dcode].fc * (5 + zip_extra_dbits[dcode]);\n\t}\n\tout_length >>= 3;\n//      Trace((stderr,\"\\nlast_lit %u, last_dist %u, in %ld, out ~%ld(%ld%%) \",\n//\t     encoder->last_lit, encoder->last_dist, in_length, out_length,\n//\t     100L - out_length*100L/in_length));\n\tif(zip_last_dist < parseInt(zip_last_lit/2) &&\n\t   out_length < parseInt(in_length/2))\n\t    return true;\n    }\n    return (zip_last_lit == zip_LIT_BUFSIZE-1 ||\n\t    zip_last_dist == zip_DIST_BUFSIZE);\n    /* We avoid equality with LIT_BUFSIZE because of wraparound at 64K\n     * on 16 bit machines and because stored blocks are restricted to\n     * 64K-1 bytes.\n     */\n}\n\n  /* ==========================================================================\n   * Send the block data compressed using the given Huffman trees\n   */\nfunction zip_compress_block(\n\tltree,\t// literal tree\n\tdtree) {\t// distance tree\n    var dist;\t\t// distance of matched string\n    var lc;\t\t// match length or unmatched char (if dist == 0)\n    var lx = 0;\t\t// running index in l_buf\n    var dx = 0;\t\t// running index in d_buf\n    var fx = 0;\t\t// running index in flag_buf\n    var flag = 0;\t// current flags\n    var code;\t\t// the code to send\n    var extra;\t\t// number of extra bits to send\n\n    if(zip_last_lit != 0) do {\n\tif((lx & 7) == 0)\n\t    flag = zip_flag_buf[fx++];\n\tlc = zip_l_buf[lx++] & 0xff;\n\tif((flag & 1) == 0) {\n\t    zip_SEND_CODE(lc, ltree); /* send a literal byte */\n//\tTracecv(isgraph(lc), (stderr,\" '%c' \", lc));\n\t} else {\n\t    // Here, lc is the match length - MIN_MATCH\n\t    code = zip_length_code[lc];\n\t    zip_SEND_CODE(code+zip_LITERALS+1, ltree); // send the length code\n\t    extra = zip_extra_lbits[code];\n\t    if(extra != 0) {\n\t\tlc -= zip_base_length[code];\n\t\tzip_send_bits(lc, extra); // send the extra length bits\n\t    }\n\t    dist = zip_d_buf[dx++];\n\t    // Here, dist is the match distance - 1\n\t    code = zip_D_CODE(dist);\n//\tAssert (code < D_CODES, \"bad d_code\");\n\n\t    zip_SEND_CODE(code, dtree);\t  // send the distance code\n\t    extra = zip_extra_dbits[code];\n\t    if(extra != 0) {\n\t\tdist -= zip_base_dist[code];\n\t\tzip_send_bits(dist, extra);   // send the extra distance bits\n\t    }\n\t} // literal or match pair ?\n\tflag >>= 1;\n    } while(lx < zip_last_lit);\n\n    zip_SEND_CODE(zip_END_BLOCK, ltree);\n}\n\n/* ==========================================================================\n * Send a value on a given number of bits.\n * IN assertion: length <= 16 and value fits in length bits.\n */\nvar zip_Buf_size = 16; // bit size of bi_buf\nfunction zip_send_bits(\n\tvalue,\t// value to send\n\tlength) {\t// number of bits\n    /* If not enough room in bi_buf, use (valid) bits from bi_buf and\n     * (16 - bi_valid) bits from value, leaving (width - (16-bi_valid))\n     * unused bits in value.\n     */\n    if(zip_bi_valid > zip_Buf_size - length) {\n\tzip_bi_buf |= (value << zip_bi_valid);\n\tzip_put_short(zip_bi_buf);\n\tzip_bi_buf = (value >> (zip_Buf_size - zip_bi_valid));\n\tzip_bi_valid += length - zip_Buf_size;\n    } else {\n\tzip_bi_buf |= value << zip_bi_valid;\n\tzip_bi_valid += length;\n    }\n}\n\n/* ==========================================================================\n * Reverse the first len bits of a code, using straightforward code (a faster\n * method would use a table)\n * IN assertion: 1 <= len <= 15\n */\nfunction zip_bi_reverse(\n\tcode,\t// the value to invert\n\tlen) {\t// its bit length\n    var res = 0;\n    do {\n\tres |= code & 1;\n\tcode >>= 1;\n\tres <<= 1;\n    } while(--len > 0);\n    return res >> 1;\n}\n\n/* ==========================================================================\n * Write out any remaining bits in an incomplete byte.\n */\nfunction zip_bi_windup() {\n    if(zip_bi_valid > 8) {\n\tzip_put_short(zip_bi_buf);\n    } else if(zip_bi_valid > 0) {\n\tzip_put_byte(zip_bi_buf);\n    }\n    zip_bi_buf = 0;\n    zip_bi_valid = 0;\n}\n\nfunction zip_qoutbuf() {\n    if(zip_outcnt != 0) {\n    var q, i;\n    q = zip_new_queue();\n    if(zip_qhead == null)\n        zip_qhead = zip_qtail = q;\n    else\n        zip_qtail = zip_qtail.next = q;\n    q.len = zip_outcnt - zip_outoff;\n//      System.arraycopy(zip_outbuf, zip_outoff, q.ptr, 0, q.len);\n    for(i = 0; i < q.len; i++)\n        q.ptr[i] = zip_outbuf[zip_outoff + i];\n    zip_outcnt = zip_outoff = 0;\n    }\n}\n\nexport function deflate(str, level) {\n    var i, j;\n\n    zip_deflate_data = str;\n    zip_deflate_pos = 0;\n    if(typeof level == \"undefined\")\n\tlevel = zip_DEFAULT_LEVEL;\n    zip_deflate_start(level);\n\n    var buff = new Array(1024);\n    var aout = [];\n    while((i = zip_deflate_internal(buff, 0, buff.length)) > 0) {\n    var cbuf = new Array(i);\n    for(j = 0; j < i; j++){\n        cbuf[j] = String.fromCharCode(buff[j]);\n    }\n    aout[aout.length] = cbuf.join(\"\");\n    }\n    zip_deflate_data = null; // G.C.\n    return aout.join(\"\");\n};\n\n\n// onmessage = function worker(m) {\n//   postMessage(deflate(m.data, 9));\n// };\n\n// var onconnect = function sharedWorker(e) {\n//   var port = e.ports[0];\n//   port.onmessage = function(m) {\n//     port.postMessage(deflate(m.data, 9));\n//   };\n// };\n \n/* eslint-enable */","export function encode64(data) {\n  let r = \"\";\n  for (let i = 0; i < data.length; i += 3) {\n      if (i + 2 === data.length) {\n          r += append3bytes(data.charCodeAt(i), data.charCodeAt(i + 1), 0);\n      } else if (i + 1 === data.length) {\n          r += append3bytes(data.charCodeAt(i), 0, 0);\n      } else {\n          r += append3bytes(data.charCodeAt(i), data.charCodeAt(i + 1),\n              data.charCodeAt(i + 2));\n      }\n  }\n  return r;\n}\n\nfunction append3bytes(b1, b2, b3) {\n  let c1 = b1 >> 2;\n  let c2 = ((b1 & 0x3) << 4) | (b2 >> 4);\n  let c3 = ((b2 & 0xF) << 2) | (b3 >> 6);\n  let c4 = b3 & 0x3F;\n  let r = \"\";\n  r += encode6bit(c1 & 0x3F);\n  r += encode6bit(c2 & 0x3F);\n  r += encode6bit(c3 & 0x3F);\n  r += encode6bit(c4 & 0x3F);\n  return r;\n}\n\nfunction encode6bit(b) {\n  if (b < 10) {\n      return String.fromCharCode(48 + b);\n  }\n  b -= 10;\n  if (b < 26) {\n      return String.fromCharCode(65 + b);\n  }\n  b -= 26;\n  if (b < 26) {\n      return String.fromCharCode(97 + b);\n  }\n  b -= 26;\n  if (b === 0) {\n      return '-';\n  }\n  if (b === 1) {\n      return '_';\n  }\n  return '?';\n}","/* eslint-disable */\n;(function(root, factory) {\n  if (typeof define === 'function' && define.amd) { // AMD\n    define(['./blockly_compressed'], factory);\n  } else if (typeof exports === 'object') { // Node.js\n    module.exports = factory(require('./blockly_compressed'));\n  } else { // Browser\n    root.Blockly = factory(root.Blockly);\n  }\n}(this, function(Blockly) {\n/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Blockly module; just a wrapper for blockly_compressed.js.\n */\n\nreturn Blockly;\n})); \n",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Helper function for warning developers about deprecations.\n * This method is not specific to Blockly.\n */\n'use strict';\n\n/**\n * Helper function for warning developers about deprecations.\n * This method is not specific to Blockly.\n * @namespace Blockly.utils.deprecation\n */\ngoog.module('Blockly.utils.deprecation');\n\n\n/**\n * Warn developers that a function or property is deprecated.\n * @param {string} name The name of the function or property.\n * @param {string} deprecationDate The date of deprecation.\n *     Prefer 'month yyyy' or 'quarter yyyy' format.\n * @param {string} deletionDate The date of deletion, in the same format as the\n *     deprecation date.\n * @param {string=} opt_use The name of a function or property to use instead,\n *     if any.\n * @alias Blockly.utils.deprecation.warn\n * @package\n */\nconst warn = function(name, deprecationDate, deletionDate, opt_use) {\n  let msg = name + ' was deprecated on ' + deprecationDate +\n      ' and will be deleted on ' + deletionDate + '.';\n  if (opt_use) {\n    msg += '\\nUse ' + opt_use + ' instead.';\n  }\n  console.warn(msg);\n};\nexports.warn = warn;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Utility methods for string manipulation.\n * These methods are not specific to Blockly, and could be factored out into\n * a JavaScript framework such as Closure.\n */\n'use strict';\n\n/**\n * Utility methods for string manipulation.\n * These methods are not specific to Blockly, and could be factored out into\n * a JavaScript framework such as Closure.\n * @namespace Blockly.utils.string\n */\ngoog.module('Blockly.utils.string');\n\n\n/**\n * Fast prefix-checker.\n * Copied from Closure's goog.string.startsWith.\n * @param {string} str The string to check.\n * @param {string} prefix A string to look for at the start of `str`.\n * @return {boolean} True if `str` begins with `prefix`.\n * @alias Blockly.utils.string.startsWith\n */\nconst startsWith = function(str, prefix) {\n  return str.lastIndexOf(prefix, 0) === 0;\n};\nexports.startsWith = startsWith;\n\n/**\n * Given an array of strings, return the length of the shortest one.\n * @param {!Array<string>} array Array of strings.\n * @return {number} Length of shortest string.\n * @alias Blockly.utils.string.shortestStringLength\n */\nconst shortestStringLength = function(array) {\n  if (!array.length) {\n    return 0;\n  }\n  return array\n      .reduce(function(a, b) {\n        return a.length < b.length ? a : b;\n      })\n      .length;\n};\nexports.shortestStringLength = shortestStringLength;\n\n/**\n * Given an array of strings, return the length of the common prefix.\n * Words may not be split.  Any space after a word is included in the length.\n * @param {!Array<string>} array Array of strings.\n * @param {number=} opt_shortest Length of shortest string.\n * @return {number} Length of common prefix.\n * @alias Blockly.utils.string.commonWordPrefix\n */\nconst commonWordPrefix = function(array, opt_shortest) {\n  if (!array.length) {\n    return 0;\n  } else if (array.length === 1) {\n    return array[0].length;\n  }\n  let wordPrefix = 0;\n  const max = opt_shortest || shortestStringLength(array);\n  let len;\n  for (len = 0; len < max; len++) {\n    const letter = array[0][len];\n    for (let i = 1; i < array.length; i++) {\n      if (letter !== array[i][len]) {\n        return wordPrefix;\n      }\n    }\n    if (letter === ' ') {\n      wordPrefix = len + 1;\n    }\n  }\n  for (let i = 1; i < array.length; i++) {\n    const letter = array[i][len];\n    if (letter && letter !== ' ') {\n      return wordPrefix;\n    }\n  }\n  return max;\n};\nexports.commonWordPrefix = commonWordPrefix;\n\n/**\n * Given an array of strings, return the length of the common suffix.\n * Words may not be split.  Any space after a word is included in the length.\n * @param {!Array<string>} array Array of strings.\n * @param {number=} opt_shortest Length of shortest string.\n * @return {number} Length of common suffix.\n * @alias Blockly.utils.string.commonWordSuffix\n */\nconst commonWordSuffix = function(array, opt_shortest) {\n  if (!array.length) {\n    return 0;\n  } else if (array.length === 1) {\n    return array[0].length;\n  }\n  let wordPrefix = 0;\n  const max = opt_shortest || shortestStringLength(array);\n  let len;\n  for (len = 0; len < max; len++) {\n    const letter = array[0].substr(-len - 1, 1);\n    for (let i = 1; i < array.length; i++) {\n      if (letter !== array[i].substr(-len - 1, 1)) {\n        return wordPrefix;\n      }\n    }\n    if (letter === ' ') {\n      wordPrefix = len + 1;\n    }\n  }\n  for (let i = 1; i < array.length; i++) {\n    const letter = array[i].charAt(array[i].length - len - 1);\n    if (letter && letter !== ' ') {\n      return wordPrefix;\n    }\n  }\n  return max;\n};\nexports.commonWordSuffix = commonWordSuffix;\n\n/**\n * Wrap text to the specified width.\n * @param {string} text Text to wrap.\n * @param {number} limit Width to wrap each line.\n * @return {string} Wrapped text.\n * @alias Blockly.utils.string.wrap\n */\nconst wrap = function(text, limit) {\n  const lines = text.split('\\n');\n  for (let i = 0; i < lines.length; i++) {\n    lines[i] = wrapLine(lines[i], limit);\n  }\n  return lines.join('\\n');\n};\nexports.wrap = wrap;\n\n/**\n * Wrap single line of text to the specified width.\n * @param {string} text Text to wrap.\n * @param {number} limit Width to wrap each line.\n * @return {string} Wrapped text.\n */\nconst wrapLine = function(text, limit) {\n  if (text.length <= limit) {\n    // Short text, no need to wrap.\n    return text;\n  }\n  // Split the text into words.\n  const words = text.trim().split(/\\s+/);\n  // Set limit to be the length of the largest word.\n  for (let i = 0; i < words.length; i++) {\n    if (words[i].length > limit) {\n      limit = words[i].length;\n    }\n  }\n\n  let lastScore;\n  let score = -Infinity;\n  let lastText;\n  let lineCount = 1;\n  do {\n    lastScore = score;\n    lastText = text;\n    // Create a list of booleans representing if a space (false) or\n    // a break (true) appears after each word.\n    let wordBreaks = [];\n    // Seed the list with evenly spaced linebreaks.\n    const steps = words.length / lineCount;\n    let insertedBreaks = 1;\n    for (let i = 0; i < words.length - 1; i++) {\n      if (insertedBreaks < (i + 1.5) / steps) {\n        insertedBreaks++;\n        wordBreaks[i] = true;\n      } else {\n        wordBreaks[i] = false;\n      }\n    }\n    wordBreaks = wrapMutate(words, wordBreaks, limit);\n    score = wrapScore(words, wordBreaks, limit);\n    text = wrapToText(words, wordBreaks);\n    lineCount++;\n  } while (score > lastScore);\n  return lastText;\n};\n\n/**\n * Compute a score for how good the wrapping is.\n * @param {!Array<string>} words Array of each word.\n * @param {!Array<boolean>} wordBreaks Array of line breaks.\n * @param {number} limit Width to wrap each line.\n * @return {number} Larger the better.\n */\nconst wrapScore = function(words, wordBreaks, limit) {\n  // If this function becomes a performance liability, add caching.\n  // Compute the length of each line.\n  const lineLengths = [0];\n  const linePunctuation = [];\n  for (let i = 0; i < words.length; i++) {\n    lineLengths[lineLengths.length - 1] += words[i].length;\n    if (wordBreaks[i] === true) {\n      lineLengths.push(0);\n      linePunctuation.push(words[i].charAt(words[i].length - 1));\n    } else if (wordBreaks[i] === false) {\n      lineLengths[lineLengths.length - 1]++;\n    }\n  }\n  const maxLength = Math.max.apply(Math, lineLengths);\n\n  let score = 0;\n  for (let i = 0; i < lineLengths.length; i++) {\n    // Optimize for width.\n    // -2 points per char over limit (scaled to the power of 1.5).\n    score -= Math.pow(Math.abs(limit - lineLengths[i]), 1.5) * 2;\n    // Optimize for even lines.\n    // -1 point per char smaller than max (scaled to the power of 1.5).\n    score -= Math.pow(maxLength - lineLengths[i], 1.5);\n    // Optimize for structure.\n    // Add score to line endings after punctuation.\n    if ('.?!'.indexOf(linePunctuation[i]) !== -1) {\n      score += limit / 3;\n    } else if (',;)]}'.indexOf(linePunctuation[i]) !== -1) {\n      score += limit / 4;\n    }\n  }\n  // All else being equal, the last line should not be longer than the\n  // previous line.  For example, this looks wrong:\n  // aaa bbb\n  // ccc ddd eee\n  if (lineLengths.length > 1 &&\n      lineLengths[lineLengths.length - 1] <=\n          lineLengths[lineLengths.length - 2]) {\n    score += 0.5;\n  }\n  return score;\n};\n\n/**\n * Mutate the array of line break locations until an optimal solution is found.\n * No line breaks are added or deleted, they are simply moved around.\n * @param {!Array<string>} words Array of each word.\n * @param {!Array<boolean>} wordBreaks Array of line breaks.\n * @param {number} limit Width to wrap each line.\n * @return {!Array<boolean>} New array of optimal line breaks.\n */\nconst wrapMutate = function(words, wordBreaks, limit) {\n  let bestScore = wrapScore(words, wordBreaks, limit);\n  let bestBreaks;\n  // Try shifting every line break forward or backward.\n  for (let i = 0; i < wordBreaks.length - 1; i++) {\n    if (wordBreaks[i] === wordBreaks[i + 1]) {\n      continue;\n    }\n    const mutatedWordBreaks = [].concat(wordBreaks);\n    mutatedWordBreaks[i] = !mutatedWordBreaks[i];\n    mutatedWordBreaks[i + 1] = !mutatedWordBreaks[i + 1];\n    const mutatedScore = wrapScore(words, mutatedWordBreaks, limit);\n    if (mutatedScore > bestScore) {\n      bestScore = mutatedScore;\n      bestBreaks = mutatedWordBreaks;\n    }\n  }\n  if (bestBreaks) {\n    // Found an improvement.  See if it may be improved further.\n    return wrapMutate(words, bestBreaks, limit);\n  }\n  // No improvements found.  Done.\n  return wordBreaks;\n};\n\n/**\n * Reassemble the array of words into text, with the specified line breaks.\n * @param {!Array<string>} words Array of each word.\n * @param {!Array<boolean>} wordBreaks Array of line breaks.\n * @return {string} Plain text.\n */\nconst wrapToText = function(words, wordBreaks) {\n  const text = [];\n  for (let i = 0; i < words.length; i++) {\n    text.push(words[i]);\n    if (wordBreaks[i] !== undefined) {\n      text.push(wordBreaks[i] ? '\\n' : ' ');\n    }\n  }\n  return text.join('');\n};\n\n/**\n * Is the given string a number (includes negative and decimals).\n * @param {string} str Input string.\n * @return {boolean} True if number, false otherwise.\n * @alias Blockly.utils.string.isNumber\n */\nconst isNumber = function(str) {\n  return /^\\s*-?\\d+(\\.\\d+)?\\s*$/.test(str);\n};\nexports.isNumber = isNumber;\n","/**\n * @license\n * Copyright 2013 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Inject Blockly's CSS synchronously.\n */\n'use strict';\n\n/**\n * Inject Blockly's CSS synchronously.\n * @namespace Blockly.Css\n */\ngoog.module('Blockly.Css');\n\nconst deprecation = goog.require('Blockly.utils.deprecation');\n\n\n/**\n * Has CSS already been injected?\n * @type {boolean}\n * @private\n */\nlet injected = false;\n\n/**\n * Add some CSS to the blob that will be injected later.  Allows optional\n * components such as fields and the toolbox to store separate CSS.\n * @param {string|!Array<string>} cssContent Multiline CSS string or an array of\n *    single lines of CSS.\n * @alias Blockly.Css.register\n */\nconst register = function(cssContent) {\n  if (injected) {\n    throw Error('CSS already injected');\n  }\n\n  if (Array.isArray(cssContent)) {\n    deprecation.warn(\n        'Registering CSS by passing an array of strings', 'September 2021',\n        'September 2022', 'css.register passing a multiline string');\n    content += ('\\n' + cssContent.join('\\n'));\n  } else {\n    // Add new cssContent in the global content.\n    content += ('\\n' + cssContent);\n  }\n};\nexports.register = register;\n\n/**\n * Inject the CSS into the DOM.  This is preferable over using a regular CSS\n * file since:\n * a) It loads synchronously and doesn't force a redraw later.\n * b) It speeds up loading by not blocking on a separate HTTP transfer.\n * c) The CSS content may be made dynamic depending on init options.\n * @param {boolean} hasCss If false, don't inject CSS\n *     (providing CSS becomes the document's responsibility).\n * @param {string} pathToMedia Path from page to the Blockly media directory.\n * @alias Blockly.Css.inject\n */\nconst inject = function(hasCss, pathToMedia) {\n  // Only inject the CSS once.\n  if (injected) {\n    return;\n  }\n  injected = true;\n  if (!hasCss) {\n    return;\n  }\n  // Strip off any trailing slash (either Unix or Windows).\n  const mediaPath = pathToMedia.replace(/[\\\\/]$/, '');\n  const cssContent = content.replace(/<<<PATH>>>/g, mediaPath);\n  // Cleanup the collected css content after injecting it to the DOM.\n  content = '';\n\n  // Inject CSS tag at start of head.\n  const cssNode = document.createElement('style');\n  cssNode.id = 'blockly-common-style';\n  const cssTextNode = document.createTextNode(cssContent);\n  cssNode.appendChild(cssTextNode);\n  document.head.insertBefore(cssNode, document.head.firstChild);\n};\nexports.inject = inject;\n\n/**\n * The CSS content for Blockly.\n * @alias Blockly.Css.content\n */\nlet content = (`\n.blocklySvg {\n  background-color: #fff;\n  outline: none;\n  overflow: hidden;  /* IE overflows by default. */\n  position: absolute;\n  display: block;\n}\n\n.blocklyWidgetDiv {\n  display: none;\n  position: absolute;\n  z-index: 99999;  /* big value for bootstrap3 compatibility */\n}\n\n.injectionDiv {\n  height: 100%;\n  position: relative;\n  overflow: hidden;  /* So blocks in drag surface disappear at edges */\n  touch-action: none;\n}\n\n.blocklyNonSelectable {\n  user-select: none;\n  -ms-user-select: none;\n  -webkit-user-select: none;\n}\n\n.blocklyWsDragSurface {\n  display: none;\n  position: absolute;\n  top: 0;\n  left: 0;\n}\n\n/* Added as a separate rule with multiple classes to make it more specific\n   than a bootstrap rule that selects svg:root. See issue #1275 for context.\n*/\n.blocklyWsDragSurface.blocklyOverflowVisible {\n  overflow: visible;\n}\n\n.blocklyBlockDragSurface {\n  display: none;\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  overflow: visible !important;\n  z-index: 50;  /* Display below toolbox, but above everything else. */\n}\n\n.blocklyBlockCanvas.blocklyCanvasTransitioning,\n.blocklyBubbleCanvas.blocklyCanvasTransitioning {\n  transition: transform .5s;\n}\n\n.blocklyTooltipDiv {\n  background-color: #ffffc7;\n  border: 1px solid #ddc;\n  box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);\n  color: #000;\n  display: none;\n  font: 9pt sans-serif;\n  opacity: .9;\n  padding: 2px;\n  position: absolute;\n  z-index: 100000;  /* big value for bootstrap3 compatibility */\n}\n\n.blocklyDropDownDiv {\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 1000;\n  display: none;\n  border: 1px solid;\n  border-color: #dadce0;\n  background-color: #fff;\n  border-radius: 2px;\n  padding: 4px;\n  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);\n}\n\n.blocklyDropDownDiv.blocklyFocused {\n  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);\n}\n\n.blocklyDropDownContent {\n  max-height: 300px;  // @todo: spec for maximum height.\n  overflow: auto;\n  overflow-x: hidden;\n  position: relative;\n}\n\n.blocklyDropDownArrow {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 16px;\n  height: 16px;\n  z-index: -1;\n  background-color: inherit;\n  border-color: inherit;\n}\n\n.blocklyDropDownButton {\n  display: inline-block;\n  float: left;\n  padding: 0;\n  margin: 4px;\n  border-radius: 4px;\n  outline: none;\n  border: 1px solid;\n  transition: box-shadow .1s;\n  cursor: pointer;\n}\n\n.blocklyArrowTop {\n  border-top: 1px solid;\n  border-left: 1px solid;\n  border-top-left-radius: 4px;\n  border-color: inherit;\n}\n\n.blocklyArrowBottom {\n  border-bottom: 1px solid;\n  border-right: 1px solid;\n  border-bottom-right-radius: 4px;\n  border-color: inherit;\n}\n\n.blocklyResizeSE {\n  cursor: se-resize;\n  fill: #aaa;\n}\n\n.blocklyResizeSW {\n  cursor: sw-resize;\n  fill: #aaa;\n}\n\n.blocklyResizeLine {\n  stroke: #515A5A;\n  stroke-width: 1;\n}\n\n.blocklyHighlightedConnectionPath {\n  fill: none;\n  stroke: #fc3;\n  stroke-width: 4px;\n}\n\n.blocklyPathLight {\n  fill: none;\n  stroke-linecap: round;\n  stroke-width: 1;\n}\n\n.blocklySelected>.blocklyPathLight {\n  display: none;\n}\n\n.blocklyDraggable {\n  /* backup for browsers (e.g. IE11) that don't support grab */\n  cursor: url(\"<<<PATH>>>/handopen.cur\"), auto;\n  cursor: grab;\n  cursor: -webkit-grab;\n}\n\n  /* backup for browsers (e.g. IE11) that don't support grabbing */\n.blocklyDragging {\n  /* backup for browsers (e.g. IE11) that don't support grabbing */\n  cursor: url(\"<<<PATH>>>/handclosed.cur\"), auto;\n  cursor: grabbing;\n  cursor: -webkit-grabbing;\n}\n\n  /* Changes cursor on mouse down. Not effective in Firefox because of\n     https://bugzilla.mozilla.org/show_bug.cgi?id=771241 */\n.blocklyDraggable:active {\n  /* backup for browsers (e.g. IE11) that don't support grabbing */\n  cursor: url(\"<<<PATH>>>/handclosed.cur\"), auto;\n  cursor: grabbing;\n  cursor: -webkit-grabbing;\n}\n\n/* Change the cursor on the whole drag surface in case the mouse gets\n   ahead of block during a drag. This way the cursor is still a closed hand.\n  */\n.blocklyBlockDragSurface .blocklyDraggable {\n  /* backup for browsers (e.g. IE11) that don't support grabbing */\n  cursor: url(\"<<<PATH>>>/handclosed.cur\"), auto;\n  cursor: grabbing;\n  cursor: -webkit-grabbing;\n}\n\n.blocklyDragging.blocklyDraggingDelete {\n  cursor: url(\"<<<PATH>>>/handdelete.cur\"), auto;\n}\n\n.blocklyDragging>.blocklyPath,\n.blocklyDragging>.blocklyPathLight {\n  fill-opacity: .8;\n  stroke-opacity: .8;\n}\n\n.blocklyDragging>.blocklyPathDark {\n  display: none;\n}\n\n.blocklyDisabled>.blocklyPath {\n  fill-opacity: .5;\n  stroke-opacity: .5;\n}\n\n.blocklyDisabled>.blocklyPathLight,\n.blocklyDisabled>.blocklyPathDark {\n  display: none;\n}\n\n.blocklyInsertionMarker>.blocklyPath,\n.blocklyInsertionMarker>.blocklyPathLight,\n.blocklyInsertionMarker>.blocklyPathDark {\n  fill-opacity: .2;\n  stroke: none;\n}\n\n.blocklyMultilineText {\n  font-family: monospace;\n}\n\n.blocklyNonEditableText>text {\n  pointer-events: none;\n}\n\n.blocklyFlyout {\n  position: absolute;\n  z-index: 20;\n}\n\n.blocklyText text {\n  cursor: default;\n}\n\n/*\n  Don't allow users to select text.  It gets annoying when trying to\n  drag a block and selected text moves instead.\n*/\n.blocklySvg text,\n.blocklyBlockDragSurface text {\n  user-select: none;\n  -ms-user-select: none;\n  -webkit-user-select: none;\n  cursor: inherit;\n}\n\n.blocklyHidden {\n  display: none;\n}\n\n.blocklyFieldDropdown:not(.blocklyHidden) {\n  display: block;\n}\n\n.blocklyIconGroup {\n  cursor: default;\n}\n\n.blocklyIconGroup:not(:hover),\n.blocklyIconGroupReadonly {\n  opacity: .6;\n}\n\n.blocklyIconShape {\n  fill: #00f;\n  stroke: #fff;\n  stroke-width: 1px;\n}\n\n.blocklyIconSymbol {\n  fill: #fff;\n}\n\n.blocklyMinimalBody {\n  margin: 0;\n  padding: 0;\n}\n\n.blocklyHtmlInput {\n  border: none;\n  border-radius: 4px;\n  height: 100%;\n  margin: 0;\n  outline: none;\n  padding: 0;\n  width: 100%;\n  text-align: center;\n  display: block;\n  box-sizing: border-box;\n}\n\n/* Edge and IE introduce a close icon when the input value is longer than a\n   certain length. This affects our sizing calculations of the text input.\n   Hiding the close icon to avoid that. */\n.blocklyHtmlInput::-ms-clear {\n  display: none;\n}\n\n.blocklyMainBackground {\n  stroke-width: 1;\n  stroke: #c6c6c6;  /* Equates to #ddd due to border being off-pixel. */\n}\n\n.blocklyMutatorBackground {\n  fill: #fff;\n  stroke: #ddd;\n  stroke-width: 1;\n}\n\n.blocklyFlyoutBackground {\n  fill: #ddd;\n  fill-opacity: .8;\n}\n\n.blocklyMainWorkspaceScrollbar {\n  z-index: 20;\n}\n\n.blocklyFlyoutScrollbar {\n  z-index: 30;\n}\n\n.blocklyScrollbarHorizontal,\n.blocklyScrollbarVertical {\n  position: absolute;\n  outline: none;\n}\n\n.blocklyScrollbarBackground {\n  opacity: 0;\n}\n\n.blocklyScrollbarHandle {\n  fill: #ccc;\n}\n\n.blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,\n.blocklyScrollbarHandle:hover {\n  fill: #bbb;\n}\n\n/* Darken flyout scrollbars due to being on a grey background. */\n/* By contrast, workspace scrollbars are on a white background. */\n.blocklyFlyout .blocklyScrollbarHandle {\n  fill: #bbb;\n}\n\n.blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,\n.blocklyFlyout .blocklyScrollbarHandle:hover {\n  fill: #aaa;\n}\n\n.blocklyInvalidInput {\n  background: #faa;\n}\n\n.blocklyVerticalMarker {\n  stroke-width: 3px;\n  fill: rgba(255,255,255,.5);\n  pointer-events: none;\n}\n\n.blocklyComputeCanvas {\n  position: absolute;\n  width: 0;\n  height: 0;\n}\n\n.blocklyNoPointerEvents {\n  pointer-events: none;\n}\n\n.blocklyContextMenu {\n  border-radius: 4px;\n  max-height: 100%;\n}\n\n.blocklyDropdownMenu {\n  border-radius: 2px;\n  padding: 0 !important;\n}\n\n.blocklyDropdownMenu .blocklyMenuItem {\n  /* 28px on the left for icon or checkbox. */\n  padding-left: 28px;\n}\n\n/* BiDi override for the resting state. */\n.blocklyDropdownMenu .blocklyMenuItemRtl {\n  /* Flip left/right padding for BiDi. */\n  padding-left: 5px;\n  padding-right: 28px;\n}\n\n.blocklyWidgetDiv .blocklyMenu {\n  background: #fff;\n  border: 1px solid transparent;\n  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);\n  font: normal 13px Arial, sans-serif;\n  margin: 0;\n  outline: none;\n  padding: 4px 0;\n  position: absolute;\n  overflow-y: auto;\n  overflow-x: hidden;\n  max-height: 100%;\n  z-index: 20000;  /* Arbitrary, but some apps depend on it... */\n}\n\n.blocklyWidgetDiv .blocklyMenu.blocklyFocused {\n  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);\n}\n\n.blocklyDropDownDiv .blocklyMenu {\n  background: inherit;  /* Compatibility with gapi, reset from goog-menu */\n  border: inherit;  /* Compatibility with gapi, reset from goog-menu */\n  font: normal 13px \"Helvetica Neue\", Helvetica, sans-serif;\n  outline: none;\n  position: relative;  /* Compatibility with gapi, reset from goog-menu */\n  z-index: 20000;  /* Arbitrary, but some apps depend on it... */\n}\n\n/* State: resting. */\n.blocklyMenuItem {\n  border: none;\n  color: #000;\n  cursor: pointer;\n  list-style: none;\n  margin: 0;\n  /* 7em on the right for shortcut. */\n  min-width: 7em;\n  padding: 6px 15px;\n  white-space: nowrap;\n}\n\n/* State: disabled. */\n.blocklyMenuItemDisabled {\n  color: #ccc;\n  cursor: inherit;\n}\n\n/* State: hover. */\n.blocklyMenuItemHighlight {\n  background-color: rgba(0,0,0,.1);\n}\n\n/* State: selected/checked. */\n.blocklyMenuItemCheckbox {\n  height: 16px;\n  position: absolute;\n  width: 16px;\n}\n\n.blocklyMenuItemSelected .blocklyMenuItemCheckbox {\n  background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;\n  float: left;\n  margin-left: -24px;\n  position: static;  /* Scroll with the menu. */\n}\n\n.blocklyMenuItemRtl .blocklyMenuItemCheckbox {\n  float: right;\n  margin-right: -24px;\n}\n`);\nexports.content = content;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Provides a reference to the global object.\n */\n'use strict';\n\n/**\n * Provides a reference to the global object.\n * @namespace Blockly.utils.global\n */\ngoog.module('Blockly.utils.global');\n\n\n/* eslint-disable no-undef, no-invalid-this */\n\n/**\n * Reference to the global object.\n *\n * More info on this implementation here:\n * https://docs.google.com/document/d/1NAeW4Wk7I7FV0Y2tcUFvQdGMc89k2vdgSXInw8_nvCI\n */\nexports.globalThis = (function() {  // Not \"let globalThis\" to avoid shadowing.\n  if (typeof globalThis === 'object') {\n    return globalThis;\n  }\n  if (typeof self === 'object') {\n    return self;\n  }\n  if (typeof window === 'object') {\n    return window;\n  }\n  if (typeof global === 'object') {\n    return global;\n  }\n  return this;\n})();\n","/**\n * @license\n * Copyright 2016 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Touch handling for Blockly.\n */\n'use strict';\n\n/**\n * Touch handling for Blockly.\n * @namespace Blockly.Touch\n */\ngoog.module('Blockly.Touch');\n\nconst utilsString = goog.require('Blockly.utils.string');\n/* eslint-disable-next-line no-unused-vars */\nconst {Gesture} = goog.requireType('Blockly.Gesture');\nconst {globalThis} = goog.require('Blockly.utils.global');\n\n\n/**\n * Length in ms for a touch to become a long press.\n * @const\n */\nconst LONGPRESS = 750;\n\n/**\n * Whether touch is enabled in the browser.\n * Copied from Closure's goog.events.BrowserFeature.TOUCH_ENABLED\n * @const\n */\nconst TOUCH_ENABLED =\n    ('ontouchstart' in globalThis ||\n     !!(globalThis['document'] && document.documentElement &&\n        'ontouchstart' in document.documentElement) ||\n     // IE10 uses non-standard touch events, so it has a different check.\n     !!(globalThis['navigator'] &&\n        (globalThis['navigator']['maxTouchPoints'] ||\n         globalThis['navigator']['msMaxTouchPoints'])));\nexports.TOUCH_ENABLED = TOUCH_ENABLED;\n\n/**\n * Which touch events are we currently paying attention to?\n * @type {?string}\n */\nlet touchIdentifier_ = null;\n\n/**\n * The TOUCH_MAP lookup dictionary specifies additional touch events to fire,\n * in conjunction with mouse events.\n * @type {Object}\n * @alias Blockly.Touch.TOUCH_MAP\n */\nlet TOUCH_MAP = {};\nif (globalThis['PointerEvent']) {\n  TOUCH_MAP = {\n    'mousedown': ['pointerdown'],\n    'mouseenter': ['pointerenter'],\n    'mouseleave': ['pointerleave'],\n    'mousemove': ['pointermove'],\n    'mouseout': ['pointerout'],\n    'mouseover': ['pointerover'],\n    'mouseup': ['pointerup', 'pointercancel'],\n    'touchend': ['pointerup'],\n    'touchcancel': ['pointercancel'],\n  };\n} else if (TOUCH_ENABLED) {\n  TOUCH_MAP = {\n    'mousedown': ['touchstart'],\n    'mousemove': ['touchmove'],\n    'mouseup': ['touchend', 'touchcancel'],\n  };\n}\nexports.TOUCH_MAP = TOUCH_MAP;\n\n/**\n * PID of queued long-press task.\n */\nlet longPid_ = 0;\n\n/**\n * Context menus on touch devices are activated using a long-press.\n * Unfortunately the contextmenu touch event is currently (2015) only supported\n * by Chrome.  This function is fired on any touchstart event, queues a task,\n * which after about a second opens the context menu.  The tasks is killed\n * if the touch event terminates early.\n * @param {!Event} e Touch start event.\n * @param {Gesture} gesture The gesture that triggered this longStart.\n * @alias Blockly.Touch.longStart\n * @package\n */\nconst longStart = function(e, gesture) {\n  longStop();\n  // Punt on multitouch events.\n  if (e.changedTouches && e.changedTouches.length !== 1) {\n    return;\n  }\n  longPid_ = setTimeout(function() {\n    // Additional check to distinguish between touch events and pointer events\n    if (e.changedTouches) {\n      // TouchEvent\n      e.button = 2;  // Simulate a right button click.\n      // e was a touch event.  It needs to pretend to be a mouse event.\n      e.clientX = e.changedTouches[0].clientX;\n      e.clientY = e.changedTouches[0].clientY;\n    }\n\n    // Let the gesture route the right-click correctly.\n    if (gesture) {\n      gesture.handleRightClick(e);\n    }\n  }, LONGPRESS);\n};\nexports.longStart = longStart;\n\n/**\n * Nope, that's not a long-press.  Either touchend or touchcancel was fired,\n * or a drag hath begun.  Kill the queued long-press task.\n * @alias Blockly.Touch.longStop\n * @package\n */\nconst longStop = function() {\n  if (longPid_) {\n    clearTimeout(longPid_);\n    longPid_ = 0;\n  }\n};\nexports.longStop = longStop;\n\n/**\n * Clear the touch identifier that tracks which touch stream to pay attention\n * to.  This ends the current drag/gesture and allows other pointers to be\n * captured.\n * @alias Blockly.Touch.clearTouchIdentifier\n */\nconst clearTouchIdentifier = function() {\n  touchIdentifier_ = null;\n};\nexports.clearTouchIdentifier = clearTouchIdentifier;\n\n/**\n * Decide whether Blockly should handle or ignore this event.\n * Mouse and touch events require special checks because we only want to deal\n * with one touch stream at a time.  All other events should always be handled.\n * @param {!Event} e The event to check.\n * @return {boolean} True if this event should be passed through to the\n *     registered handler; false if it should be blocked.\n * @alias Blockly.Touch.shouldHandleEvent\n */\nconst shouldHandleEvent = function(e) {\n  return !isMouseOrTouchEvent(e) || checkTouchIdentifier(e);\n};\nexports.shouldHandleEvent = shouldHandleEvent;\n\n/**\n * Get the touch identifier from the given event.  If it was a mouse event, the\n * identifier is the string 'mouse'.\n * @param {!Event} e Mouse event or touch event.\n * @return {string} The touch identifier from the first changed touch, if\n *     defined.  Otherwise 'mouse'.\n * @alias Blockly.Touch.getTouchIdentifierFromEvent\n */\nconst getTouchIdentifierFromEvent = function(e) {\n  return e.pointerId !== undefined ? e.pointerId :\n      (e.changedTouches && e.changedTouches[0] &&\n       e.changedTouches[0].identifier !== undefined &&\n       e.changedTouches[0].identifier !== null) ?\n                                     e.changedTouches[0].identifier :\n                                     'mouse';\n};\nexports.getTouchIdentifierFromEvent = getTouchIdentifierFromEvent;\n\n/**\n * Check whether the touch identifier on the event matches the current saved\n * identifier.  If there is no identifier, that means it's a mouse event and\n * we'll use the identifier \"mouse\".  This means we won't deal well with\n * multiple mice being used at the same time.  That seems okay.\n * If the current identifier was unset, save the identifier from the\n * event.  This starts a drag/gesture, during which touch events with other\n * identifiers will be silently ignored.\n * @param {!Event} e Mouse event or touch event.\n * @return {boolean} Whether the identifier on the event matches the current\n *     saved identifier.\n * @alias Blockly.Touch.checkTouchIdentifier\n */\nconst checkTouchIdentifier = function(e) {\n  const identifier = getTouchIdentifierFromEvent(e);\n\n  // if (touchIdentifier_) is insufficient because Android touch\n  // identifiers may be zero.\n  if (touchIdentifier_ !== undefined && touchIdentifier_ !== null) {\n    // We're already tracking some touch/mouse event.  Is this from the same\n    // source?\n    return touchIdentifier_ === identifier;\n  }\n  if (e.type === 'mousedown' || e.type === 'touchstart' ||\n      e.type === 'pointerdown') {\n    // No identifier set yet, and this is the start of a drag.  Set it and\n    // return.\n    touchIdentifier_ = identifier;\n    return true;\n  }\n  // There was no identifier yet, but this wasn't a start event so we're going\n  // to ignore it.  This probably means that another drag finished while this\n  // pointer was down.\n  return false;\n};\nexports.checkTouchIdentifier = checkTouchIdentifier;\n\n/**\n * Set an event's clientX and clientY from its first changed touch.  Use this to\n * make a touch event work in a mouse event handler.\n * @param {!Event} e A touch event.\n * @alias Blockly.Touch.setClientFromTouch\n */\nconst setClientFromTouch = function(e) {\n  if (utilsString.startsWith(e.type, 'touch') && e.changedTouches) {\n    // Map the touch event's properties to the event.\n    const touchPoint = e.changedTouches[0];\n    e.clientX = touchPoint.clientX;\n    e.clientY = touchPoint.clientY;\n  }\n};\nexports.setClientFromTouch = setClientFromTouch;\n\n/**\n * Check whether a given event is a mouse or touch event.\n * @param {!Event} e An event.\n * @return {boolean} True if it is a mouse or touch event; false otherwise.\n * @alias Blockly.Touch.isMouseOrTouchEvent\n */\nconst isMouseOrTouchEvent = function(e) {\n  return utilsString.startsWith(e.type, 'touch') ||\n      utilsString.startsWith(e.type, 'mouse') ||\n      utilsString.startsWith(e.type, 'pointer');\n};\nexports.isMouseOrTouchEvent = isMouseOrTouchEvent;\n\n/**\n * Check whether a given event is a touch event or a pointer event.\n * @param {!Event} e An event.\n * @return {boolean} True if it is a touch event; false otherwise.\n * @alias Blockly.Touch.isTouchEvent\n */\nconst isTouchEvent = function(e) {\n  return utilsString.startsWith(e.type, 'touch') ||\n      utilsString.startsWith(e.type, 'pointer');\n};\nexports.isTouchEvent = isTouchEvent;\n\n/**\n * Split an event into an array of events, one per changed touch or mouse\n * point.\n * @param {!Event} e A mouse event or a touch event with one or more changed\n * touches.\n * @return {!Array<!Event>} An array of mouse or touch events.  Each touch\n *     event will have exactly one changed touch.\n * @alias Blockly.Touch.splitEventByTouches\n */\nconst splitEventByTouches = function(e) {\n  const events = [];\n  if (e.changedTouches) {\n    for (let i = 0; i < e.changedTouches.length; i++) {\n      const newEvent = {\n        type: e.type,\n        changedTouches: [e.changedTouches[i]],\n        target: e.target,\n        stopPropagation: function() {\n          e.stopPropagation();\n        },\n        preventDefault: function() {\n          e.preventDefault();\n        },\n      };\n      events[i] = newEvent;\n    }\n  } else {\n    events.push(e);\n  }\n  return events;\n};\nexports.splitEventByTouches = splitEventByTouches;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Useragent detection.\n * These methods are not specific to Blockly, and could be factored out into\n * a JavaScript framework such as Closure.\n */\n'use strict';\n\n/**\n * Useragent detection.\n * These methods are not specific to Blockly, and could be factored out into\n * a JavaScript framework such as Closure.\n * @namespace Blockly.utils.userAgent\n */\ngoog.module('Blockly.utils.userAgent');\n\nconst {globalThis} = goog.require('Blockly.utils.global');\n\n\n/**\n * The raw useragent string.\n * @type {string}\n */\nlet rawUserAgent;\n\n/** @type {boolean} */\nlet isIe;\n\n/** @type {boolean} */\nlet isEdge;\n\n/** @type {boolean} */\nlet isJavaFx;\n\n/** @type {boolean} */\nlet isChrome;\n\n/** @type {boolean} */\nlet isWebKit;\n\n/** @type {boolean} */\nlet isGecko;\n\n/** @type {boolean} */\nlet isAndroid;\n\n/** @type {boolean} */\nlet isIPad;\n\n/** @type {boolean} */\nlet isIPod;\n\n/** @type {boolean} */\nlet isIPhone;\n\n/** @type {boolean} */\nlet isMac;\n\n/** @type {boolean} */\nlet isTablet;\n\n/** @type {boolean} */\nlet isMobile;\n\n(function(raw) {\nrawUserAgent = raw;\nconst rawUpper = rawUserAgent.toUpperCase();\n/**\n * Case-insensitive test of whether name is in the useragent string.\n * @param {string} name Name to test.\n * @return {boolean} True if name is present.\n */\nfunction has(name) {\n  return rawUpper.indexOf(name.toUpperCase()) !== -1;\n}\n\n// Browsers.  Logic from:\n// https://github.com/google/closure-library/blob/master/closure/goog/labs/useragent/browser.js\nisIe = has('Trident') || has('MSIE');\nisEdge = has('Edge');\n// Useragent for JavaFX:\n// Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.44\n//     (KHTML, like Gecko) JavaFX/8.0 Safari/537.44\nisJavaFx = has('JavaFX');\nisChrome = (has('Chrome') || has('CriOS')) && !isEdge;\n\n// Engines.  Logic from:\n// https://github.com/google/closure-library/blob/master/closure/goog/labs/useragent/engine.js\nisWebKit = has('WebKit') && !isEdge;\nisGecko = has('Gecko') && !isWebKit && !isIe && !isEdge;\n\n// Platforms.  Logic from:\n// https://github.com/google/closure-library/blob/master/closure/goog/labs/useragent/platform.js\n// and\n// https://github.com/google/closure-library/blob/master/closure/goog/labs/useragent/extra.js\nisAndroid = has('Android');\nconst maxTouchPoints =\n    globalThis['navigator'] && globalThis['navigator']['maxTouchPoints'];\nisIPad = has('iPad') || has('Macintosh') && maxTouchPoints > 0;\nisIPod = has('iPod');\nisIPhone = has('iPhone') && !isIPad && !isIPod;\nisMac = has('Macintosh');\n\n// Devices.  Logic from:\n// https://github.com/google/closure-library/blob/master/closure/goog/labs/useragent/device.js\nisTablet = isIPad || (isAndroid && !has('Mobile')) || has('Silk');\nisMobile = !isTablet && (isIPod || isIPhone || isAndroid || has('IEMobile'));\n})((globalThis['navigator'] && globalThis['navigator']['userAgent']) || '');\n\n/**\n * @const {string}\n * @alias Blockly.utils.userAgent.raw\n */\nexports.raw = rawUserAgent;\n\n/**\n * @const {boolean}\n * @alias Blockly.utils.userAgent.IE\n */\nexports.IE = isIe;\n\n/**\n * @const {boolean}\n * @alias Blockly.utils.userAgent.EDGE\n */\nexports.EDGE = isEdge;\n\n/**\n * @const {boolean}\n * @alias Blockly.utils.userAgent.JavaFx\n */\nexports.JavaFx = isJavaFx;\n\n/**\n * @const {boolean}\n * @alias Blockly.utils.userAgent.CHROME\n */\nexports.CHROME = isChrome;\n\n/**\n * @const {boolean}\n * @alias Blockly.utils.userAgent.WEBKIT\n */\nexports.WEBKIT = isWebKit;\n\n/**\n * @const {boolean}\n * @alias Blockly.utils.userAgent.GECKO\n */\nexports.GECKO = isGecko;\n\n/**\n * @const {boolean}\n * @alias Blockly.utils.userAgent.ANDROID\n */\nexports.ANDROID = isAndroid;\n\n/**\n * @const {boolean}\n * @alias Blockly.utils.userAgent.IPAD\n */\nexports.IPAD = isIPad;\n\n/**\n * @const {boolean}\n * @alias Blockly.utils.userAgent.IPOD\n */\nexports.IPOD = isIPod;\n\n/**\n * @const {boolean}\n * @alias Blockly.utils.userAgent.IPHONE\n */\nexports.IPHONE = isIPhone;\n\n/**\n * @const {boolean}\n * @alias Blockly.utils.userAgent.MAC\n */\nexports.MAC = isMac;\n\n/**\n * @const {boolean}\n * @alias Blockly.utils.userAgent.TABLET\n */\nexports.TABLET = isTablet;\n\n/**\n * @const {boolean}\n * @alias Blockly.utils.userAgent.MOBILE\n */\nexports.MOBILE = isMobile;\n","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Browser event handling.\n */\n'use strict';\n\n/**\n * Browser event handling.\n * @namespace Blockly.browserEvents\n */\ngoog.module('Blockly.browserEvents');\n\nconst Touch = goog.require('Blockly.Touch');\nconst userAgent = goog.require('Blockly.utils.userAgent');\nconst {globalThis} = goog.require('Blockly.utils.global');\n\n\n/**\n * Blockly opaque event data used to unbind events when using\n * `bind` and `conditionalBind`.\n * @typedef {!Array<!Array>}\n * @alias Blockly.browserEvents.Data\n */\nlet Data;\nexports.Data = Data;\n\n/**\n * The multiplier for scroll wheel deltas using the line delta mode.\n * See https://developer.mozilla.org/en-US/docs/Web/API/WheelEvent/deltaMode\n * for more information on deltaMode.\n * @type {number}\n * @const\n */\nconst LINE_MODE_MULTIPLIER = 40;\n\n/**\n * The multiplier for scroll wheel deltas using the page delta mode.\n * See https://developer.mozilla.org/en-US/docs/Web/API/WheelEvent/deltaMode\n * for more information on deltaMode.\n * @type {number}\n * @const\n */\nconst PAGE_MODE_MULTIPLIER = 125;\n\n/**\n * Bind an event handler that can be ignored if it is not part of the active\n * touch stream.\n * Use this for events that either start or continue a multi-part gesture (e.g.\n * mousedown or mousemove, which may be part of a drag or click).\n * @param {!EventTarget} node Node upon which to listen.\n * @param {string} name Event name to listen to (e.g. 'mousedown').\n * @param {?Object} thisObject The value of 'this' in the function.\n * @param {!Function} func Function to call when event is triggered.\n * @param {boolean=} opt_noCaptureIdentifier True if triggering on this event\n *     should not block execution of other event handlers on this touch or\n *     other simultaneous touches.  False by default.\n * @param {boolean=} opt_noPreventDefault True if triggering on this event\n *     should prevent the default handler.  False by default.  If\n *     opt_noPreventDefault is provided, opt_noCaptureIdentifier must also be\n *     provided.\n * @return {!Data} Opaque data that can be passed to\n *     unbindEvent_.\n * @alias Blockly.browserEvents.conditionalBind\n */\nconst conditionalBind = function(\n    node, name, thisObject, func, opt_noCaptureIdentifier,\n    opt_noPreventDefault) {\n  let handled = false;\n  const wrapFunc = function(e) {\n    const captureIdentifier = !opt_noCaptureIdentifier;\n    // Handle each touch point separately.  If the event was a mouse event, this\n    // will hand back an array with one element, which we're fine handling.\n    const events = Touch.splitEventByTouches(e);\n    for (let i = 0; i < events.length; i++) {\n      const event = events[i];\n      if (captureIdentifier && !Touch.shouldHandleEvent(event)) {\n        continue;\n      }\n      Touch.setClientFromTouch(event);\n      if (thisObject) {\n        func.call(thisObject, event);\n      } else {\n        func(event);\n      }\n      handled = true;\n    }\n  };\n\n  const bindData = [];\n  if (globalThis['PointerEvent'] && (name in Touch.TOUCH_MAP)) {\n    for (let i = 0; i < Touch.TOUCH_MAP[name].length; i++) {\n      const type = Touch.TOUCH_MAP[name][i];\n      node.addEventListener(type, wrapFunc, false);\n      bindData.push([node, type, wrapFunc]);\n    }\n  } else {\n    node.addEventListener(name, wrapFunc, false);\n    bindData.push([node, name, wrapFunc]);\n\n    // Add equivalent touch event.\n    if (name in Touch.TOUCH_MAP) {\n      const touchWrapFunc = function(e) {\n        wrapFunc(e);\n        // Calling preventDefault stops the browser from scrolling/zooming the\n        // page.\n        const preventDef = !opt_noPreventDefault;\n        if (handled && preventDef) {\n          e.preventDefault();\n        }\n      };\n      for (let i = 0; i < Touch.TOUCH_MAP[name].length; i++) {\n        const type = Touch.TOUCH_MAP[name][i];\n        node.addEventListener(type, touchWrapFunc, false);\n        bindData.push([node, type, touchWrapFunc]);\n      }\n    }\n  }\n  return bindData;\n};\nexports.conditionalBind = conditionalBind;\n\n\n/**\n * Bind an event handler that should be called regardless of whether it is part\n * of the active touch stream.\n * Use this for events that are not part of a multi-part gesture (e.g.\n * mouseover for tooltips).\n * @param {!EventTarget} node Node upon which to listen.\n * @param {string} name Event name to listen to (e.g. 'mousedown').\n * @param {?Object} thisObject The value of 'this' in the function.\n * @param {!Function} func Function to call when event is triggered.\n * @return {!Data} Opaque data that can be passed to\n *     unbindEvent_.\n * @alias Blockly.browserEvents.bind\n */\nconst bind = function(node, name, thisObject, func) {\n  const wrapFunc = function(e) {\n    if (thisObject) {\n      func.call(thisObject, e);\n    } else {\n      func(e);\n    }\n  };\n\n  const bindData = [];\n  if (globalThis['PointerEvent'] && (name in Touch.TOUCH_MAP)) {\n    for (let i = 0; i < Touch.TOUCH_MAP[name].length; i++) {\n      const type = Touch.TOUCH_MAP[name][i];\n      node.addEventListener(type, wrapFunc, false);\n      bindData.push([node, type, wrapFunc]);\n    }\n  } else {\n    node.addEventListener(name, wrapFunc, false);\n    bindData.push([node, name, wrapFunc]);\n\n    // Add equivalent touch event.\n    if (name in Touch.TOUCH_MAP) {\n      const touchWrapFunc = function(e) {\n        // Punt on multitouch events.\n        if (e.changedTouches && e.changedTouches.length === 1) {\n          // Map the touch event's properties to the event.\n          const touchPoint = e.changedTouches[0];\n          e.clientX = touchPoint.clientX;\n          e.clientY = touchPoint.clientY;\n        }\n        wrapFunc(e);\n\n        // Stop the browser from scrolling/zooming the page.\n        e.preventDefault();\n      };\n      for (let i = 0; i < Touch.TOUCH_MAP[name].length; i++) {\n        const type = Touch.TOUCH_MAP[name][i];\n        node.addEventListener(type, touchWrapFunc, false);\n        bindData.push([node, type, touchWrapFunc]);\n      }\n    }\n  }\n  return bindData;\n};\nexports.bind = bind;\n\n/**\n * Unbind one or more events event from a function call.\n * @param {!Data} bindData Opaque data from bindEvent_.\n *     This list is emptied during the course of calling this function.\n * @return {!Function} The function call.\n * @alias Blockly.browserEvents.unbind\n */\nconst unbind = function(bindData) {\n  let func;\n  while (bindData.length) {\n    const bindDatum = bindData.pop();\n    const node = bindDatum[0];\n    const name = bindDatum[1];\n    func = bindDatum[2];\n    node.removeEventListener(name, func, false);\n  }\n  return func;\n};\nexports.unbind = unbind;\n\n/**\n * Returns true if this event is targeting a text input widget?\n * @param {!Event} e An event.\n * @return {boolean} True if text input.\n * @alias Blockly.browserEvents.isTargetInput\n */\nconst isTargetInput = function(e) {\n  return e.target.type === 'textarea' || e.target.type === 'text' ||\n      e.target.type === 'number' || e.target.type === 'email' ||\n      e.target.type === 'password' || e.target.type === 'search' ||\n      e.target.type === 'tel' || e.target.type === 'url' ||\n      e.target.isContentEditable ||\n      (e.target.dataset && e.target.dataset.isTextInput === 'true');\n};\nexports.isTargetInput = isTargetInput;\n\n/**\n * Returns true this event is a right-click.\n * @param {!Event} e Mouse event.\n * @return {boolean} True if right-click.\n * @alias Blockly.browserEvents.isRightButton\n */\nconst isRightButton = function(e) {\n  if (e.ctrlKey && userAgent.MAC) {\n    // Control-clicking on Mac OS X is treated as a right-click.\n    // WebKit on Mac OS X fails to change button to 2 (but Gecko does).\n    return true;\n  }\n  return e.button === 2;\n};\nexports.isRightButton = isRightButton;\n\n/**\n * Returns the converted coordinates of the given mouse event.\n * The origin (0,0) is the top-left corner of the Blockly SVG.\n * @param {!Event} e Mouse event.\n * @param {!Element} svg SVG element.\n * @param {?SVGMatrix} matrix Inverted screen CTM to use.\n * @return {!SVGPoint} Object with .x and .y properties.\n * @alias Blockly.browserEvents.mouseToSvg\n */\nconst mouseToSvg = function(e, svg, matrix) {\n  const svgPoint = svg.createSVGPoint();\n  svgPoint.x = e.clientX;\n  svgPoint.y = e.clientY;\n\n  if (!matrix) {\n    matrix = svg.getScreenCTM().inverse();\n  }\n  return svgPoint.matrixTransform(matrix);\n};\nexports.mouseToSvg = mouseToSvg;\n\n/**\n * Returns the scroll delta of a mouse event in pixel units.\n * @param {!Event} e Mouse event.\n * @return {{x: number, y: number}} Scroll delta object with .x and .y\n *    properties.\n * @alias Blockly.browserEvents.getScrollDeltaPixels\n */\nconst getScrollDeltaPixels = function(e) {\n  switch (e.deltaMode) {\n    case 0x00:  // Pixel mode.\n    default:\n      return {x: e.deltaX, y: e.deltaY};\n    case 0x01:  // Line mode.\n      return {\n        x: e.deltaX * LINE_MODE_MULTIPLIER,\n        y: e.deltaY * LINE_MODE_MULTIPLIER,\n      };\n    case 0x02:  // Page mode.\n      return {\n        x: e.deltaX * PAGE_MODE_MULTIPLIER,\n        y: e.deltaY * PAGE_MODE_MULTIPLIER,\n      };\n  }\n};\nexports.getScrollDeltaPixels = getScrollDeltaPixels;\n","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Common functions used both internally and externally, but which\n * must not be at the top level to avoid circular dependencies.\n */\n'use strict';\n\n/**\n * Common functions used both internally and externally, but which\n * must not be at the top level to avoid circular dependencies.\n * @namespace Blockly.common\n */\ngoog.module('Blockly.common');\n\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockDefinition, Blocks} = goog.require('Blockly.blocks');\n/* eslint-disable-next-line no-unused-vars */\nconst {Connection} = goog.requireType('Blockly.Connection');\n/* eslint-disable-next-line no-unused-vars */\nconst {ICopyable} = goog.requireType('Blockly.ICopyable');\n/* eslint-disable-next-line no-unused-vars */\nconst {Block} = goog.requireType('Blockly.Block');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceSvg} = goog.requireType('Blockly.WorkspaceSvg');\n/* eslint-disable-next-line no-unused-vars */\nconst {Workspace} = goog.requireType('Blockly.Workspace');\n\n\n/**\n * The main workspace most recently used.\n * Set by Blockly.WorkspaceSvg.prototype.markFocused\n * @type {!Workspace}\n */\nlet mainWorkspace;\n\n/**\n * Returns the last used top level workspace (based on focus).  Try not to use\n * this function, particularly if there are multiple Blockly instances on a\n * page.\n * @return {!Workspace} The main workspace.\n * @alias Blockly.common.getMainWorkspace\n */\nconst getMainWorkspace = function() {\n  return mainWorkspace;\n};\nexports.getMainWorkspace = getMainWorkspace;\n\n/**\n * Sets last used main workspace.\n * @param {!Workspace} workspace The most recently used top level workspace.\n * @alias Blockly.common.setMainWorkspace\n */\nconst setMainWorkspace = function(workspace) {\n  mainWorkspace = workspace;\n};\nexports.setMainWorkspace = setMainWorkspace;\n\n/**\n * Currently selected block.\n * @type {?ICopyable}\n */\nlet selected = null;\n\n/**\n * Returns the currently selected block.\n * @return {?ICopyable} The currently selected block.\n * @alias Blockly.common.getSelected\n */\nconst getSelected = function() {\n  return selected;\n};\nexports.getSelected = getSelected;\n\n/**\n * Sets the currently selected block. This function does not visually mark the\n * block as selected or fire the required events. If you wish to\n * programmatically select a block, use `BlockSvg#select`.\n * @param {?ICopyable} newSelection The newly selected block.\n * @alias Blockly.common.setSelected\n * @package\n */\nconst setSelected = function(newSelection) {\n  selected = newSelection;\n};\nexports.setSelected = setSelected;\n\n/**\n * Container element in which to render the WidgetDiv, DropDownDiv and Tooltip.\n * @type {?Element}\n */\nlet parentContainer;\n\n/**\n * Get the container element in which to render the WidgetDiv, DropDownDiv and\\\n * Tooltip.\n * @return {?Element} The parent container.\n * @alias Blockly.common.getParentContainer\n */\nconst getParentContainer = function() {\n  return parentContainer;\n};\nexports.getParentContainer = getParentContainer;\n\n/**\n * Set the parent container.  This is the container element that the WidgetDiv,\n * DropDownDiv, and Tooltip are rendered into the first time `Blockly.inject`\n * is called.\n * This method is a NOP if called after the first ``Blockly.inject``.\n * @param {!Element} newParent The container element.\n * @alias Blockly.common.setParentContainer\n */\nconst setParentContainer = function(newParent) {\n  parentContainer = newParent;\n};\nexports.setParentContainer = setParentContainer;\n\n/**\n * Size the SVG image to completely fill its container. Call this when the view\n * actually changes sizes (e.g. on a window resize/device orientation change).\n * See workspace.resizeContents to resize the workspace when the contents\n * change (e.g. when a block is added or removed).\n * Record the height/width of the SVG image.\n * @param {!WorkspaceSvg} workspace Any workspace in the SVG.\n * @alias Blockly.common.svgResize\n */\nconst svgResize = function(workspace) {\n  let mainWorkspace = workspace;\n  while (mainWorkspace.options.parentWorkspace) {\n    mainWorkspace = mainWorkspace.options.parentWorkspace;\n  }\n  const svg = mainWorkspace.getParentSvg();\n  const cachedSize = mainWorkspace.getCachedParentSvgSize();\n  const div = svg.parentNode;\n  if (!div) {\n    // Workspace deleted, or something.\n    return;\n  }\n  const width = div.offsetWidth;\n  const height = div.offsetHeight;\n  if (cachedSize.width !== width) {\n    svg.setAttribute('width', width + 'px');\n    mainWorkspace.setCachedParentSvgSize(width, null);\n  }\n  if (cachedSize.height !== height) {\n    svg.setAttribute('height', height + 'px');\n    mainWorkspace.setCachedParentSvgSize(null, height);\n  }\n  mainWorkspace.resize();\n};\nexports.svgResize = svgResize;\n\n/**\n * All of the connections on blocks that are currently being dragged.\n * @type {!Array<!Connection>}\n */\nexports.draggingConnections = [];\n\n/**\n * Get a map of all the block's descendants mapping their type to the number of\n *    children with that type.\n * @param {!Block} block The block to map.\n * @param {boolean=} opt_stripFollowing Optionally ignore all following\n *    statements (blocks that are not inside a value or statement input\n *    of the block).\n * @return {!Object} Map of types to type counts for descendants of the bock.\n * @alias Blockly.common.getBlockTypeCounts\n */\nconst getBlockTypeCounts = function(block, opt_stripFollowing) {\n  const typeCountsMap = Object.create(null);\n  const descendants = block.getDescendants(true);\n  if (opt_stripFollowing) {\n    const nextBlock = block.getNextBlock();\n    if (nextBlock) {\n      const index = descendants.indexOf(nextBlock);\n      descendants.splice(index, descendants.length - index);\n    }\n  }\n  for (let i = 0, checkBlock; (checkBlock = descendants[i]); i++) {\n    if (typeCountsMap[checkBlock.type]) {\n      typeCountsMap[checkBlock.type]++;\n    } else {\n      typeCountsMap[checkBlock.type] = 1;\n    }\n  }\n  return typeCountsMap;\n};\nexports.getBlockTypeCounts = getBlockTypeCounts;\n\n/**\n * Helper function for defining a block from JSON.  The resulting function has\n * the correct value of jsonDef at the point in code where jsonInit is called.\n * @param {!Object} jsonDef The JSON definition of a block.\n * @return {function()} A function that calls jsonInit with the correct value\n *     of jsonDef.\n */\nconst jsonInitFactory = function(jsonDef) {\n  return /** @this {Block} */ function() {\n    this.jsonInit(jsonDef);\n  };\n};\n\n/**\n * Define blocks from an array of JSON block definitions, as might be generated\n * by the Blockly Developer Tools.\n * @param {!Array<!Object>} jsonArray An array of JSON block definitions.\n * @alias Blockly.common.defineBlocksWithJsonArray\n */\nconst defineBlocksWithJsonArray = function(jsonArray) {\n  defineBlocks(createBlockDefinitionsFromJsonArray(jsonArray));\n};\nexports.defineBlocksWithJsonArray = defineBlocksWithJsonArray;\n\n/**\n * Define blocks from an array of JSON block definitions, as might be generated\n * by the Blockly Developer Tools.\n * @param {!Array<!Object>} jsonArray An array of JSON block definitions.\n * @return {!Object<string, !BlockDefinition>} A map of the block\n *     definitions created.\n * @alias Blockly.common.defineBlocksWithJsonArray\n */\nconst createBlockDefinitionsFromJsonArray = function(jsonArray) {\n  const /** @type {!Object<string,!BlockDefinition>} */ blocks = {};\n  for (let i = 0; i < jsonArray.length; i++) {\n    const elem = jsonArray[i];\n    if (!elem) {\n      console.warn(`Block definition #${i} in JSON array is ${elem}. Skipping`);\n      continue;\n    }\n    const type = elem.type;\n    if (!type) {\n      console.warn(\n          `Block definition #${i} in JSON array is missing a type attribute. ` +\n          'Skipping.');\n      continue;\n    }\n    blocks[type] = {init: jsonInitFactory(elem)};\n  }\n  return blocks;\n};\nexports.createBlockDefinitionsFromJsonArray =\n    createBlockDefinitionsFromJsonArray;\n\n/**\n * Add the specified block definitions to the block definitions\n * dictionary (Blockly.Blocks).\n * @param {!Object<string,!BlockDefinition>} blocks A map of block\n *     type names to block definitions.\n * @alias Blockly.common.defineBlocks\n */\nconst defineBlocks = function(blocks) {\n  // Iterate over own enumerable properties.\n  for (const type of Object.keys(blocks)) {\n    const definition = blocks[type];\n    if (type in Blocks) {\n      console.warn(`Block definiton \"${type}\" overwrites previous definition.`);\n    }\n    Blocks[type] = definition;\n  }\n};\nexports.defineBlocks = defineBlocks;\n","/**\n * @license\n * Copyright 2013 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview A mapping of block type names to block prototype objects.\n */\n'use strict';\n\n/**\n * A mapping of block type names to block prototype objects.\n * @namespace Blockly.blocks\n */\ngoog.module('Blockly.blocks');\n\n\n/**\n * A block definition.  For now this very lose, but it can potentially\n * be refined e.g. by replacing this typedef with a class definition.\n * @typedef {!Object}\n */\nlet BlockDefinition;\nexports.BlockDefinition = BlockDefinition;\n\n/**\n * A mapping of block type names to block prototype objects.\n * @type {!Object<string,!BlockDefinition>}\n * @alias Blockly.blocks.Blocks\n */\nconst Blocks = Object.create(null);\nexports.Blocks = Blocks;\n","/**\n * @license\n * Copyright 2011 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n'use strict';\n\n/**\n * Library to create tooltips for Blockly.\n * First, call createDom() after onload.\n * Second, set the 'tooltip' property on any SVG element that needs a tooltip.\n * If the tooltip is a string, or a function that returns a string, that message\n * will be displayed. If the tooltip is an SVG element, then that object's\n * tooltip will be used. Third, call bindMouseEvents(e) passing the SVG element.\n * @namespace Blockly.Tooltip\n */\ngoog.module('Blockly.Tooltip');\n\nconst blocklyString = goog.require('Blockly.utils.string');\nconst browserEvents = goog.require('Blockly.browserEvents');\nconst common = goog.require('Blockly.common');\nconst deprecation = goog.require('Blockly.utils.deprecation');\n\n\n/**\n * A type which can define a tooltip.\n * Either a string, an object containing a tooltip property, or a function which\n * returns either a string, or another arbitrarily nested function which\n * eventually unwinds to a string.\n * @typedef {string|{tooltip}|function(): (string|!Function)}\n * @alias Blockly.Tooltip.TipInfo\n */\nlet TipInfo;\nexports.TipInfo = TipInfo;\n\n/**\n * A function that renders custom tooltip UI.\n * 1st parameter: the div element to render content into.\n * 2nd parameter: the element being moused over (i.e., the element for which the\n * tooltip should be shown).\n * @typedef {function(!Element, !Element)}\n * @alias Blockly.Tooltip.CustomTooltip\n */\nlet CustomTooltip;\nexports.CustomTooltip = CustomTooltip;\n\n/**\n * An optional function that renders custom tooltips into the provided DIV. If\n * this is defined, the function will be called instead of rendering the default\n * tooltip UI.\n * @type {!CustomTooltip|undefined}\n */\nlet customTooltip = undefined;\n\n/**\n * Sets a custom function that will be called if present instead of the default\n * tooltip UI.\n * @param {!CustomTooltip} customFn A custom tooltip used to render an alternate\n *     tooltip UI.\n * @alias Blockly.Tooltip.setCustomTooltip\n */\nconst setCustomTooltip = function(customFn) {\n  customTooltip = customFn;\n};\nexports.setCustomTooltip = setCustomTooltip;\n\n/**\n * Gets the custom tooltip function.\n * @returns {!CustomTooltip|undefined} The custom tooltip function, if defined.\n */\nconst getCustomTooltip = function() {\n  return customTooltip;\n};\nexports.getCustomTooltip = getCustomTooltip;\n\n/**\n * Is a tooltip currently showing?\n * @type {boolean}\n */\nlet visible = false;\n\n/**\n * Returns whether or not a tooltip is showing\n * @returns {boolean} True if a tooltip is showing\n * @alias Blockly.Tooltip.isVisible\n */\nconst isVisible = function() {\n  return visible;\n};\nexports.isVisible = isVisible;\n\nObject.defineProperties(exports, {\n  /**\n   * Is a tooltip currently showing?\n   * @name Blockly.Tooltip.visible\n   * @type {boolean}\n   * @deprecated Use Blockly.Tooltip.isVisible() instead.  (September\n   *     2021)\n   * @suppress {checkTypes}\n   */\n  visible: {\n    get: function() {\n      deprecation.warn(\n          'Blockly.Tooltip.visible', 'September 2021', 'September 2022',\n          'Blockly.Tooltip.isVisible()');\n      return isVisible();\n    },\n  },\n});\n\n/**\n * Is someone else blocking the tooltip from being shown?\n * @type {boolean}\n */\nlet blocked = false;\n\n/**\n * Maximum width (in characters) of a tooltip.\n * @alias Blockly.Tooltip.LIMIT\n */\nconst LIMIT = 50;\nexports.LIMIT = LIMIT;\n\n/**\n * PID of suspended thread to clear tooltip on mouse out.\n */\nlet mouseOutPid = 0;\n\n/**\n * PID of suspended thread to show the tooltip.\n */\nlet showPid = 0;\n\n/**\n * Last observed X location of the mouse pointer (freezes when tooltip appears).\n */\nlet lastX = 0;\n\n/**\n * Last observed Y location of the mouse pointer (freezes when tooltip appears).\n */\nlet lastY = 0;\n\n/**\n * Current element being pointed at.\n * @type {Element}\n */\nlet element = null;\n\n/**\n * Once a tooltip has opened for an element, that element is 'poisoned' and\n * cannot respawn a tooltip until the pointer moves over a different element.\n * @type {Element}\n */\nlet poisonedElement = null;\n\n/**\n * Horizontal offset between mouse cursor and tooltip.\n * @alias Blockly.Tooltip.OFFSET_X\n */\nconst OFFSET_X = 0;\nexports.OFFSET_X = OFFSET_X;\n\n/**\n * Vertical offset between mouse cursor and tooltip.\n * @alias Blockly.Tooltip.OFFSET_Y\n */\nconst OFFSET_Y = 10;\nexports.OFFSET_Y = OFFSET_Y;\n\n/**\n * Radius mouse can move before killing tooltip.\n * @alias Blockly.Tooltip.RADIUS_OK\n */\nconst RADIUS_OK = 10;\nexports.RADIUS_OK = RADIUS_OK;\n\n/**\n * Delay before tooltip appears.\n * @alias Blockly.Tooltip.HOVER_MS\n */\nconst HOVER_MS = 750;\nexports.HOVER_MS = HOVER_MS;\n\n/**\n * Horizontal padding between tooltip and screen edge.\n * @alias Blockly.Tooltip.MARGINS\n */\nconst MARGINS = 5;\nexports.MARGINS = MARGINS;\n\n/**\n * The HTML container.  Set once by createDom.\n * @type {?HTMLDivElement}\n */\nlet DIV = null;\n\n/**\n * Returns the HTML tooltip container.\n * @returns {?HTMLDivElement} The HTML tooltip container.\n * @alias Blockly.Tooltip.getDiv\n */\nconst getDiv = function() {\n  return DIV;\n};\nexports.getDiv = getDiv;\n\nObject.defineProperties(exports, {\n  /**\n   * The HTML container.  Set once by createDom.\n   * @name Blockly.Tooltip.DIV\n   * @type {HTMLDivElement}\n   * @deprecated Use Blockly.Tooltip.getDiv() and .setDiv().\n   *     (September 2021)\n   * @suppress {checkTypes}\n   */\n  DIV: {\n    get: function() {\n      deprecation.warn(\n          'Blockly.Tooltip.DIV', 'September 2021', 'September 2022',\n          'Blockly.Tooltip.getDiv()');\n      return getDiv();\n    },\n  },\n});\n\n/**\n * Returns the tooltip text for the given element.\n * @param {?Object} object The object to get the tooltip text of.\n * @return {string} The tooltip text of the element.\n * @alias Blockly.Tooltip.getTooltipOfObject\n */\nconst getTooltipOfObject = function(object) {\n  const obj = getTargetObject(object);\n  if (obj) {\n    let tooltip = obj.tooltip;\n    while (typeof tooltip === 'function') {\n      tooltip = tooltip();\n    }\n    if (typeof tooltip !== 'string') {\n      throw Error('Tooltip function must return a string.');\n    }\n    return tooltip;\n  }\n  return '';\n};\nexports.getTooltipOfObject = getTooltipOfObject;\n\n/**\n * Returns the target object that the given object is targeting for its\n * tooltip. Could be the object itself.\n * @param {?Object} obj The object are trying to find the target tooltip\n *     object of.\n * @return {?{tooltip}} The target tooltip object.\n */\nconst getTargetObject = function(obj) {\n  while (obj && obj.tooltip) {\n    if ((typeof obj.tooltip === 'string') ||\n        (typeof obj.tooltip === 'function')) {\n      return obj;\n    }\n    obj = obj.tooltip;\n  }\n  return null;\n};\n\n/**\n * Create the tooltip div and inject it onto the page.\n * @alias Blockly.Tooltip.createDom\n */\nconst createDom = function() {\n  if (DIV) {\n    return;  // Already created.\n  }\n  // Create an HTML container for popup overlays (e.g. editor widgets).\n  DIV = /** @type {!HTMLDivElement} */ (document.createElement('div'));\n  DIV.className = 'blocklyTooltipDiv';\n  const container = common.getParentContainer() || document.body;\n  container.appendChild(DIV);\n};\nexports.createDom = createDom;\n\n/**\n * Binds the required mouse events onto an SVG element.\n * @param {!Element} element SVG element onto which tooltip is to be bound.\n * @alias Blockly.Tooltip.bindMouseEvents\n */\nconst bindMouseEvents = function(element) {\n  element.mouseOverWrapper_ =\n      browserEvents.bind(element, 'mouseover', null, onMouseOver);\n  element.mouseOutWrapper_ =\n      browserEvents.bind(element, 'mouseout', null, onMouseOut);\n\n  // Don't use bindEvent_ for mousemove since that would create a\n  // corresponding touch handler, even though this only makes sense in the\n  // context of a mouseover/mouseout.\n  element.addEventListener('mousemove', onMouseMove, false);\n};\nexports.bindMouseEvents = bindMouseEvents;\n\n/**\n * Unbinds tooltip mouse events from the SVG element.\n * @param {!Element} element SVG element onto which tooltip is bound.\n * @alias Blockly.Tooltip.unbindMouseEvents\n */\nconst unbindMouseEvents = function(element) {\n  if (!element) {\n    return;\n  }\n  browserEvents.unbind(element.mouseOverWrapper_);\n  browserEvents.unbind(element.mouseOutWrapper_);\n  element.removeEventListener('mousemove', onMouseMove);\n};\nexports.unbindMouseEvents = unbindMouseEvents;\n\n/**\n * Hide the tooltip if the mouse is over a different object.\n * Initialize the tooltip to potentially appear for this object.\n * @param {!Event} e Mouse event.\n */\nconst onMouseOver = function(e) {\n  if (blocked) {\n    // Someone doesn't want us to show tooltips.\n    return;\n  }\n  // If the tooltip is an object, treat it as a pointer to the next object in\n  // the chain to look at.  Terminate when a string or function is found.\n  const newElement = /** @type {Element} */ (getTargetObject(e.currentTarget));\n  if (element !== newElement) {\n    hide();\n    poisonedElement = null;\n    element = newElement;\n  }\n  // Forget about any immediately preceding mouseOut event.\n  clearTimeout(mouseOutPid);\n};\n\n/**\n * Hide the tooltip if the mouse leaves the object and enters the workspace.\n * @param {!Event} _e Mouse event.\n */\nconst onMouseOut = function(_e) {\n  if (blocked) {\n    // Someone doesn't want us to show tooltips.\n    return;\n  }\n  // Moving from one element to another (overlapping or with no gap) generates\n  // a mouseOut followed instantly by a mouseOver.  Fork off the mouseOut\n  // event and kill it if a mouseOver is received immediately.\n  // This way the task only fully executes if mousing into the void.\n  mouseOutPid = setTimeout(function() {\n    element = null;\n    poisonedElement = null;\n    hide();\n  }, 1);\n  clearTimeout(showPid);\n};\n\n/**\n * When hovering over an element, schedule a tooltip to be shown.  If a tooltip\n * is already visible, hide it if the mouse strays out of a certain radius.\n * @param {!Event} e Mouse event.\n */\nconst onMouseMove = function(e) {\n  if (!element || !element.tooltip) {\n    // No tooltip here to show.\n    return;\n  } else if (blocked) {\n    // Someone doesn't want us to show tooltips.  We are probably handling a\n    // user gesture, such as a click or drag.\n    return;\n  }\n  if (visible) {\n    // Compute the distance between the mouse position when the tooltip was\n    // shown and the current mouse position.  Pythagorean theorem.\n    const dx = lastX - e.pageX;\n    const dy = lastY - e.pageY;\n    if (Math.sqrt(dx * dx + dy * dy) > RADIUS_OK) {\n      hide();\n    }\n  } else if (poisonedElement !== element) {\n    // The mouse moved, clear any previously scheduled tooltip.\n    clearTimeout(showPid);\n    // Maybe this time the mouse will stay put.  Schedule showing of tooltip.\n    lastX = e.pageX;\n    lastY = e.pageY;\n    showPid = setTimeout(show, HOVER_MS);\n  }\n};\n\n/**\n * Dispose of the tooltip.\n * @alias Blockly.Tooltip.dispose\n * @package\n */\nconst dispose = function() {\n  element = null;\n  poisonedElement = null;\n  hide();\n};\nexports.dispose = dispose;\n\n/**\n * Hide the tooltip.\n * @alias Blockly.Tooltip.hide\n */\nconst hide = function() {\n  if (visible) {\n    visible = false;\n    if (DIV) {\n      DIV.style.display = 'none';\n    }\n  }\n  if (showPid) {\n    clearTimeout(showPid);\n  }\n};\nexports.hide = hide;\n\n/**\n * Hide any in-progress tooltips and block showing new tooltips until the next\n * call to unblock().\n * @alias Blockly.Tooltip.block\n * @package\n */\nconst block = function() {\n  hide();\n  blocked = true;\n};\nexports.block = block;\n\n/**\n * Unblock tooltips: allow them to be scheduled and shown according to their own\n * logic.\n * @alias Blockly.Tooltip.unblock\n * @package\n */\nconst unblock = function() {\n  blocked = false;\n};\nexports.unblock = unblock;\n\n/**\n * Renders the tooltip content into the tooltip div.\n */\nconst renderContent = function() {\n  if (!DIV || !element) {\n    // This shouldn't happen, but if it does, we can't render.\n    return;\n  }\n  if (typeof customTooltip === 'function') {\n    customTooltip(DIV, element);\n  } else {\n    renderDefaultContent();\n  }\n};\n\n/**\n * Renders the default tooltip UI.\n */\nconst renderDefaultContent = function() {\n  let tip = getTooltipOfObject(element);\n  tip = blocklyString.wrap(tip, LIMIT);\n  // Create new text, line by line.\n  const lines = tip.split('\\n');\n  for (let i = 0; i < lines.length; i++) {\n    const div = /** @type {!HTMLDivElement} */ (document.createElement('div'));\n    div.appendChild(document.createTextNode(lines[i]));\n    DIV.appendChild(div);\n  }\n};\n\n/**\n * Gets the coordinates for the tooltip div, taking into account the edges of\n * the screen to prevent showing the tooltip offscreen.\n * @param {boolean} rtl True if the tooltip should be in right-to-left layout.\n * @returns {{x: number, y: number}} Coordinates at which the tooltip div should\n *     be placed.\n */\nconst getPosition = function(rtl) {\n  // Position the tooltip just below the cursor.\n  const windowWidth = document.documentElement.clientWidth;\n  const windowHeight = document.documentElement.clientHeight;\n\n  let anchorX = lastX;\n  if (rtl) {\n    anchorX -= OFFSET_X + DIV.offsetWidth;\n  } else {\n    anchorX += OFFSET_X;\n  }\n\n  let anchorY = lastY + OFFSET_Y;\n  if (anchorY + DIV.offsetHeight > windowHeight + window.scrollY) {\n    // Falling off the bottom of the screen; shift the tooltip up.\n    anchorY -= DIV.offsetHeight + 2 * OFFSET_Y;\n  }\n\n  if (rtl) {\n    // Prevent falling off left edge in RTL mode.\n    anchorX = Math.max(MARGINS - window.scrollX, anchorX);\n  } else {\n    if (anchorX + DIV.offsetWidth >\n        windowWidth + window.scrollX - 2 * MARGINS) {\n      // Falling off the right edge of the screen;\n      // clamp the tooltip on the edge.\n      anchorX = windowWidth - DIV.offsetWidth - 2 * MARGINS;\n    }\n  }\n\n  return {x: anchorX, y: anchorY};\n};\n\n/**\n * Create the tooltip and show it.\n */\nconst show = function() {\n  if (blocked) {\n    // Someone doesn't want us to show tooltips.\n    return;\n  }\n  poisonedElement = element;\n  if (!DIV) {\n    return;\n  }\n  // Erase all existing text.\n  DIV.textContent = '';\n\n  // Add new content.\n  renderContent();\n\n  // Display the tooltip.\n  const rtl = /** @type {{RTL: boolean}} */ (element).RTL;\n  DIV.style.direction = rtl ? 'rtl' : 'ltr';\n  DIV.style.display = 'block';\n  visible = true;\n\n  const {x, y} = getPosition(rtl);\n  DIV.style.left = x + 'px';\n  DIV.style.top = y + 'px';\n};\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Utility methods for DOM manipulation.\n * These methods are not specific to Blockly, and could be factored out into\n * a JavaScript framework such as Closure.\n */\n'use strict';\n\n/**\n * Utility methods for DOM manipulation.\n * These methods are not specific to Blockly, and could be factored out into\n * a JavaScript framework such as Closure.\n * @namespace Blockly.utils.dom\n */\ngoog.module('Blockly.utils.dom');\n\nconst userAgent = goog.require('Blockly.utils.userAgent');\n/* eslint-disable-next-line no-unused-vars */\nconst {Svg} = goog.requireType('Blockly.utils.Svg');\n\n\n/**\n * Required name space for SVG elements.\n * @const\n * @alias Blockly.utils.dom.SVG_NS\n */\nconst SVG_NS = 'http://www.w3.org/2000/svg';\nexports.SVG_NS = SVG_NS;\n\n/**\n * Required name space for HTML elements.\n * @const\n * @alias Blockly.utils.dom.HTML_NS\n */\nconst HTML_NS = 'http://www.w3.org/1999/xhtml';\nexports.HTML_NS = HTML_NS;\n\n/**\n * Required name space for XLINK elements.\n * @const\n * @alias Blockly.utils.dom.XLINK_NS\n */\nconst XLINK_NS = 'http://www.w3.org/1999/xlink';\nexports.XLINK_NS = XLINK_NS;\n\n/**\n * Node type constants.\n * https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeType\n * @enum {number}\n * @alias Blockly.utils.dom.NodeType\n */\nconst NodeType = {\n  ELEMENT_NODE: 1,\n  TEXT_NODE: 3,\n  COMMENT_NODE: 8,\n  DOCUMENT_POSITION_CONTAINED_BY: 16,\n};\nexports.NodeType = NodeType;\n\n/**\n * Temporary cache of text widths.\n * @type {Object}\n * @private\n */\nlet cacheWidths = null;\n\n/**\n * Number of current references to cache.\n * @type {number}\n * @private\n */\nlet cacheReference = 0;\n\n/**\n * A HTML canvas context used for computing text width.\n * @type {CanvasRenderingContext2D}\n * @private\n */\nlet canvasContext = null;\n\n/**\n * Helper method for creating SVG elements.\n * @param {string|Svg<T>} name Element's tag name.\n * @param {!Object} attrs Dictionary of attribute names and values.\n * @param {Element=} opt_parent Optional parent on which to append the element.\n * @return {T} Newly created SVG element.  The return type is {!SVGElement} if\n *     name is a string or a more specific type if it a member of Svg.\n * @template T\n * @alias Blockly.utils.dom.createSvgElement\n */\nconst createSvgElement = function(name, attrs, opt_parent) {\n  const e = /** @type {T} */\n      (document.createElementNS(SVG_NS, String(name)));\n  for (const key in attrs) {\n    e.setAttribute(key, attrs[key]);\n  }\n  // IE defines a unique attribute \"runtimeStyle\", it is NOT applied to\n  // elements created with createElementNS. However, Closure checks for IE\n  // and assumes the presence of the attribute and crashes.\n  if (document.body.runtimeStyle) {  // Indicates presence of IE-only attr.\n    e.runtimeStyle = e.currentStyle = e.style;\n  }\n  if (opt_parent) {\n    opt_parent.appendChild(e);\n  }\n  return e;\n};\nexports.createSvgElement = createSvgElement;\n\n/**\n * Add a CSS class to a element.\n * Similar to Closure's goog.dom.classes.add, except it handles SVG elements.\n * @param {!Element} element DOM element to add class to.\n * @param {string} className Name of class to add.\n * @return {boolean} True if class was added, false if already present.\n * @alias Blockly.utils.dom.addClass\n */\nconst addClass = function(element, className) {\n  let classes = element.getAttribute('class') || '';\n  if ((' ' + classes + ' ').indexOf(' ' + className + ' ') !== -1) {\n    return false;\n  }\n  if (classes) {\n    classes += ' ';\n  }\n  element.setAttribute('class', classes + className);\n  return true;\n};\nexports.addClass = addClass;\n\n/**\n * Removes multiple calsses from an element.\n * @param {!Element} element DOM element to remove classes from.\n * @param {string} classNames A string of one or multiple class names for an\n *    element.\n * @alias Blockly.utils.dom.removeClasses\n */\nconst removeClasses = function(element, classNames) {\n  const classList = classNames.split(' ');\n  for (let i = 0; i < classList.length; i++) {\n    removeClass(element, classList[i]);\n  }\n};\nexports.removeClasses = removeClasses;\n\n/**\n * Remove a CSS class from a element.\n * Similar to Closure's goog.dom.classes.remove, except it handles SVG elements.\n * @param {!Element} element DOM element to remove class from.\n * @param {string} className Name of class to remove.\n * @return {boolean} True if class was removed, false if never present.\n * @alias Blockly.utils.dom.removeClass\n */\nconst removeClass = function(element, className) {\n  const classes = element.getAttribute('class');\n  if ((' ' + classes + ' ').indexOf(' ' + className + ' ') === -1) {\n    return false;\n  }\n  const classList = classes.split(/\\s+/);\n  for (let i = 0; i < classList.length; i++) {\n    if (!classList[i] || classList[i] === className) {\n      classList.splice(i, 1);\n      i--;\n    }\n  }\n  if (classList.length) {\n    element.setAttribute('class', classList.join(' '));\n  } else {\n    element.removeAttribute('class');\n  }\n  return true;\n};\nexports.removeClass = removeClass;\n\n/**\n * Checks if an element has the specified CSS class.\n * Similar to Closure's goog.dom.classes.has, except it handles SVG elements.\n * @param {!Element} element DOM element to check.\n * @param {string} className Name of class to check.\n * @return {boolean} True if class exists, false otherwise.\n * @alias Blockly.utils.dom.hasClass\n */\nconst hasClass = function(element, className) {\n  const classes = element.getAttribute('class');\n  return (' ' + classes + ' ').indexOf(' ' + className + ' ') !== -1;\n};\nexports.hasClass = hasClass;\n\n/**\n * Removes a node from its parent. No-op if not attached to a parent.\n * @param {?Node} node The node to remove.\n * @return {?Node} The node removed if removed; else, null.\n * @alias Blockly.utils.dom.removeNode\n */\n// Copied from Closure goog.dom.removeNode\nconst removeNode = function(node) {\n  return node && node.parentNode ? node.parentNode.removeChild(node) : null;\n};\nexports.removeNode = removeNode;\n\n/**\n * Insert a node after a reference node.\n * Contrast with node.insertBefore function.\n * @param {!Element} newNode New element to insert.\n * @param {!Element} refNode Existing element to precede new node.\n * @alias Blockly.utils.dom.insertAfter\n */\nconst insertAfter = function(newNode, refNode) {\n  const siblingNode = refNode.nextSibling;\n  const parentNode = refNode.parentNode;\n  if (!parentNode) {\n    throw Error('Reference node has no parent.');\n  }\n  if (siblingNode) {\n    parentNode.insertBefore(newNode, siblingNode);\n  } else {\n    parentNode.appendChild(newNode);\n  }\n};\nexports.insertAfter = insertAfter;\n\n/**\n * Whether a node contains another node.\n * @param {!Node} parent The node that should contain the other node.\n * @param {!Node} descendant The node to test presence of.\n * @return {boolean} Whether the parent node contains the descendant node.\n * @alias Blockly.utils.dom.containsNode\n */\nconst containsNode = function(parent, descendant) {\n  return !!(\n      parent.compareDocumentPosition(descendant) &\n      NodeType.DOCUMENT_POSITION_CONTAINED_BY);\n};\nexports.containsNode = containsNode;\n\n/**\n * Sets the CSS transform property on an element. This function sets the\n * non-vendor-prefixed and vendor-prefixed versions for backwards compatibility\n * with older browsers. See https://caniuse.com/#feat=transforms2d\n * @param {!Element} element Element to which the CSS transform will be applied.\n * @param {string} transform The value of the CSS `transform` property.\n * @alias Blockly.utils.dom.setCssTransform\n */\nconst setCssTransform = function(element, transform) {\n  element.style['transform'] = transform;\n  element.style['-webkit-transform'] = transform;\n};\nexports.setCssTransform = setCssTransform;\n\n/**\n * Start caching text widths. Every call to this function MUST also call\n * stopTextWidthCache. Caches must not survive between execution threads.\n * @alias Blockly.utils.dom.startTextWidthCache\n */\nconst startTextWidthCache = function() {\n  cacheReference++;\n  if (!cacheWidths) {\n    cacheWidths = Object.create(null);\n  }\n};\nexports.startTextWidthCache = startTextWidthCache;\n\n/**\n * Stop caching field widths. Unless caching was already on when the\n * corresponding call to startTextWidthCache was made.\n * @alias Blockly.utils.dom.stopTextWidthCache\n */\nconst stopTextWidthCache = function() {\n  cacheReference--;\n  if (!cacheReference) {\n    cacheWidths = null;\n  }\n};\nexports.stopTextWidthCache = stopTextWidthCache;\n\n/**\n * Gets the width of a text element, caching it in the process.\n * @param {!Element} textElement An SVG 'text' element.\n * @return {number} Width of element.\n * @alias Blockly.utils.dom.getTextWidth\n */\nconst getTextWidth = function(textElement) {\n  const key = textElement.textContent + '\\n' + textElement.className.baseVal;\n  let width;\n\n  // Return the cached width if it exists.\n  if (cacheWidths) {\n    width = cacheWidths[key];\n    if (width) {\n      return width;\n    }\n  }\n\n  // Attempt to compute fetch the width of the SVG text element.\n  try {\n    if (userAgent.IE || userAgent.EDGE) {\n      width = textElement.getBBox().width;\n    } else {\n      width = textElement.getComputedTextLength();\n    }\n  } catch (e) {\n    // In other cases where we fail to get the computed text. Instead, use an\n    // approximation and do not cache the result. At some later point in time\n    // when the block is inserted into the visible DOM, this method will be\n    // called again and, at that point in time, will not throw an exception.\n    return textElement.textContent.length * 8;\n  }\n\n  // Cache the computed width and return.\n  if (cacheWidths) {\n    cacheWidths[key] = width;\n  }\n  return width;\n};\nexports.getTextWidth = getTextWidth;\n\n/**\n * Gets the width of a text element using a faster method than `getTextWidth`.\n * This method requires that we know the text element's font family and size in\n * advance. Similar to `getTextWidth`, we cache the width we compute.\n * @param {!Element} textElement An SVG 'text' element.\n * @param {number} fontSize The font size to use.\n * @param {string} fontWeight The font weight to use.\n * @param {string} fontFamily The font family to use.\n * @return {number} Width of element.\n * @alias Blockly.utils.dom.getFastTextWidth\n */\nconst getFastTextWidth = function(\n    textElement, fontSize, fontWeight, fontFamily) {\n  return getFastTextWidthWithSizeString(\n      textElement, fontSize + 'pt', fontWeight, fontFamily);\n};\nexports.getFastTextWidth = getFastTextWidth;\n\n/**\n * Gets the width of a text element using a faster method than `getTextWidth`.\n * This method requires that we know the text element's font family and size in\n * advance. Similar to `getTextWidth`, we cache the width we compute.\n * This method is similar to ``getFastTextWidth`` but expects the font size\n * parameter to be a string.\n * @param {!Element} textElement An SVG 'text' element.\n * @param {string} fontSize The font size to use.\n * @param {string} fontWeight The font weight to use.\n * @param {string} fontFamily The font family to use.\n * @return {number} Width of element.\n * @alias Blockly.utils.dom.getFastTextWidthWithSizeString\n */\nconst getFastTextWidthWithSizeString = function(\n    textElement, fontSize, fontWeight, fontFamily) {\n  const text = textElement.textContent;\n  const key = text + '\\n' + textElement.className.baseVal;\n  let width;\n\n  // Return the cached width if it exists.\n  if (cacheWidths) {\n    width = cacheWidths[key];\n    if (width) {\n      return width;\n    }\n  }\n\n  if (!canvasContext) {\n    // Inject the canvas element used for computing text widths.\n    const computeCanvas = document.createElement('canvas');\n    computeCanvas.className = 'blocklyComputeCanvas';\n    document.body.appendChild(computeCanvas);\n\n    // Initialize the HTML canvas context and set the font.\n    // The context font must match blocklyText's fontsize and font-family\n    // set in CSS.\n    canvasContext = computeCanvas.getContext('2d');\n  }\n  // Set the desired font size and family.\n  canvasContext.font = fontWeight + ' ' + fontSize + ' ' + fontFamily;\n\n  // Measure the text width using the helper canvas context.\n  width = canvasContext.measureText(text).width;\n\n  // Cache the computed width and return.\n  if (cacheWidths) {\n    cacheWidths[key] = width;\n  }\n  return width;\n};\nexports.getFastTextWidthWithSizeString = getFastTextWidthWithSizeString;\n\n/**\n * Measure a font's metrics. The height and baseline values.\n * @param {string} text Text to measure the font dimensions of.\n * @param {string} fontSize The font size to use.\n * @param {string} fontWeight The font weight to use.\n * @param {string} fontFamily The font family to use.\n * @return {{height: number, baseline: number}} Font measurements.\n * @alias Blockly.utils.dom.measureFontMetrics\n */\nconst measureFontMetrics = function(text, fontSize, fontWeight, fontFamily) {\n  const span = document.createElement('span');\n  span.style.font = fontWeight + ' ' + fontSize + ' ' + fontFamily;\n  span.textContent = text;\n\n  const block = /** @type {!HTMLDivElement} */ (document.createElement('div'));\n  block.style.width = '1px';\n  block.style.height = 0;\n\n  const div = /** @type {!HTMLDivElement} */ (document.createElement('div'));\n  div.setAttribute('style', 'position: fixed; top: 0; left: 0; display: flex;');\n  div.appendChild(span);\n  div.appendChild(block);\n\n  document.body.appendChild(div);\n  const result = {\n    height: 0,\n    baseline: 0,\n  };\n  try {\n    div.style.alignItems = 'baseline';\n    result.baseline = block.offsetTop - span.offsetTop;\n    div.style.alignItems = 'flex-end';\n    result.height = block.offsetTop - span.offsetTop;\n  } finally {\n    document.body.removeChild(div);\n  }\n  return result;\n};\nexports.measureFontMetrics = measureFontMetrics;\n","/**\n * @license\n * Copyright 2013 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview A div that floats on top of Blockly.  This singleton contains\n *     temporary HTML UI widgets that the user is currently interacting with.\n *     E.g. text input areas, colour pickers, context menus.\n */\n'use strict';\n\n/**\n * A div that floats on top of Blockly.  This singleton contains\n *     temporary HTML UI widgets that the user is currently interacting with.\n *     E.g. text input areas, colour pickers, context menus.\n * @namespace Blockly.WidgetDiv\n */\ngoog.module('Blockly.WidgetDiv');\n\nconst common = goog.require('Blockly.common');\nconst deprecation = goog.require('Blockly.utils.deprecation');\nconst dom = goog.require('Blockly.utils.dom');\n/* eslint-disable-next-line no-unused-vars */\nconst {Rect} = goog.requireType('Blockly.utils.Rect');\n/* eslint-disable-next-line no-unused-vars */\nconst {Size} = goog.requireType('Blockly.utils.Size');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceSvg} = goog.requireType('Blockly.WorkspaceSvg');\n\n\n/**\n * The object currently using this container.\n * @type {Object}\n */\nlet owner = null;\n\n/**\n * Optional cleanup function set by whichever object uses the widget.\n * @type {Function}\n */\nlet dispose = null;\n\n/**\n * A class name representing the current owner's workspace renderer.\n * @type {string}\n */\nlet rendererClassName = '';\n\n/**\n * A class name representing the current owner's workspace theme.\n * @type {string}\n */\nlet themeClassName = '';\n\n/**\n * The HTML container for popup overlays (e.g. editor widgets).\n * @type {?HTMLDivElement}\n */\nlet DIV;\n\n/**\n * Returns the HTML container for editor widgets.\n * @return {?HTMLDivElement} The editor widget container.\n * @alias Blockly.WidgetDiv.getDiv\n */\nconst getDiv = function() {\n  return DIV;\n};\nexports.getDiv = getDiv;\n\n/**\n * Allows unit tests to reset the div.\n * @param {?HTMLDivElement} newDiv The new value for the DIV field.\n * @alias Blockly.WidgetDiv.testOnly_setDiv\n * @ignore\n */\nconst testOnly_setDiv = function(newDiv) {\n  DIV = newDiv;\n};\nexports.testOnly_setDiv = testOnly_setDiv;\n\nObject.defineProperties(exports, {\n  /**\n   * The HTML container for popup overlays (e.g. editor widgets).\n   * @name Blockly.WidgetDiv.DIV\n   * @type {?Element}\n   * @deprecated Use Blockly.WidgetDiv.getDiv() and .setDiv().\n   *     (September 2021)\n   * @suppress {checkTypes}\n   */\n  DIV: {\n    get: function() {\n      deprecation.warn(\n          'Blockly.WidgetDiv.DIV', 'September 2021', 'September 2022',\n          'Blockly.WidgetDiv.getDiv()');\n      return getDiv();\n    },\n  },\n});\n\n/**\n * Create the widget div and inject it onto the page.\n * @alias Blockly.WidgetDiv.createDom\n */\nconst createDom = function() {\n  if (DIV) {\n    return;  // Already created.\n  }\n\n  DIV = /** @type {!HTMLDivElement} */ (document.createElement('div'));\n  DIV.className = 'blocklyWidgetDiv';\n  const container = common.getParentContainer() || document.body;\n  container.appendChild(DIV);\n};\nexports.createDom = createDom;\n\n/**\n * Initialize and display the widget div.  Close the old one if needed.\n * @param {!Object} newOwner The object that will be using this container.\n * @param {boolean} rtl Right-to-left (true) or left-to-right (false).\n * @param {Function} newDispose Optional cleanup function to be run when the\n *     widget is closed.\n * @alias Blockly.WidgetDiv.show\n */\nconst show = function(newOwner, rtl, newDispose) {\n  hide();\n  owner = newOwner;\n  dispose = newDispose;\n  const div = DIV;\n  div.style.direction = rtl ? 'rtl' : 'ltr';\n  div.style.display = 'block';\n  const mainWorkspace =\n      /** @type {!WorkspaceSvg} */ (common.getMainWorkspace());\n  rendererClassName = mainWorkspace.getRenderer().getClassName();\n  themeClassName = mainWorkspace.getTheme().getClassName();\n  dom.addClass(div, rendererClassName);\n  dom.addClass(div, themeClassName);\n};\nexports.show = show;\n\n/**\n * Destroy the widget and hide the div.\n * @alias Blockly.WidgetDiv.hide\n */\nconst hide = function() {\n  if (!isVisible()) {\n    return;\n  }\n  owner = null;\n\n  const div = DIV;\n  div.style.display = 'none';\n  div.style.left = '';\n  div.style.top = '';\n  dispose && dispose();\n  dispose = null;\n  div.textContent = '';\n\n  if (rendererClassName) {\n    dom.removeClass(div, rendererClassName);\n    rendererClassName = '';\n  }\n  if (themeClassName) {\n    dom.removeClass(div, themeClassName);\n    themeClassName = '';\n  }\n  (/** @type {!WorkspaceSvg} */ (common.getMainWorkspace())).markFocused();\n};\nexports.hide = hide;\n\n/**\n * Is the container visible?\n * @return {boolean} True if visible.\n * @alias Blockly.WidgetDiv.isVisible\n */\nconst isVisible = function() {\n  return !!owner;\n};\nexports.isVisible = isVisible;\n\n/**\n * Destroy the widget and hide the div if it is being used by the specified\n * object.\n * @param {!Object} oldOwner The object that was using this container.\n * @alias Blockly.WidgetDiv.hideIfOwner\n */\nconst hideIfOwner = function(oldOwner) {\n  if (owner === oldOwner) {\n    hide();\n  }\n};\nexports.hideIfOwner = hideIfOwner;\n\n/**\n * Set the widget div's position and height.  This function does nothing clever:\n * it will not ensure that your widget div ends up in the visible window.\n * @param {number} x Horizontal location (window coordinates, not body).\n * @param {number} y Vertical location (window coordinates, not body).\n * @param {number} height The height of the widget div (pixels).\n */\nconst positionInternal = function(x, y, height) {\n  DIV.style.left = x + 'px';\n  DIV.style.top = y + 'px';\n  DIV.style.height = height + 'px';\n};\n\n/**\n * Position the widget div based on an anchor rectangle.\n * The widget should be placed adjacent to but not overlapping the anchor\n * rectangle.  The preferred position is directly below and aligned to the left\n * (LTR) or right (RTL) side of the anchor.\n * @param {!Rect} viewportBBox The bounding rectangle of the\n *     current viewport, in window coordinates.\n * @param {!Rect} anchorBBox The bounding rectangle of the anchor,\n *     in window coordinates.\n * @param {!Size} widgetSize The size of the widget that is inside\n *     the widget div, in window coordinates.\n * @param {boolean} rtl Whether the workspace is in RTL mode.  This determines\n *     horizontal alignment.\n * @alias Blockly.WidgetDiv.positionWithAnchor\n * @package\n */\nconst positionWithAnchor = function(viewportBBox, anchorBBox, widgetSize, rtl) {\n  const y = calculateY(viewportBBox, anchorBBox, widgetSize);\n  const x = calculateX(viewportBBox, anchorBBox, widgetSize, rtl);\n\n  if (y < 0) {\n    positionInternal(x, 0, widgetSize.height + y);\n  } else {\n    positionInternal(x, y, widgetSize.height);\n  }\n};\nexports.positionWithAnchor = positionWithAnchor;\n\n/**\n * Calculate an x position (in window coordinates) such that the widget will not\n * be offscreen on the right or left.\n * @param {!Rect} viewportBBox The bounding rectangle of the\n *     current viewport, in window coordinates.\n * @param {!Rect} anchorBBox The bounding rectangle of the anchor,\n *     in window coordinates.\n * @param {!Size} widgetSize The dimensions of the widget inside\n *     the widget div.\n * @param {boolean} rtl Whether the Blockly workspace is in RTL mode.\n * @return {number} A valid x-coordinate for the top left corner of the widget\n *     div, in window coordinates.\n */\nconst calculateX = function(viewportBBox, anchorBBox, widgetSize, rtl) {\n  if (rtl) {\n    // Try to align the right side of the field and the right side of widget.\n    const widgetLeft = anchorBBox.right - widgetSize.width;\n    // Don't go offscreen left.\n    const x = Math.max(widgetLeft, viewportBBox.left);\n    // But really don't go offscreen right:\n    return Math.min(x, viewportBBox.right - widgetSize.width);\n  } else {\n    // Try to align the left side of the field and the left side of widget.\n    // Don't go offscreen right.\n    const x = Math.min(anchorBBox.left, viewportBBox.right - widgetSize.width);\n    // But left is more important, because that's where the text is.\n    return Math.max(x, viewportBBox.left);\n  }\n};\n\n/**\n * Calculate a y position (in window coordinates) such that the widget will not\n * be offscreen on the top or bottom.\n * @param {!Rect} viewportBBox The bounding rectangle of the\n *     current viewport, in window coordinates.\n * @param {!Rect} anchorBBox The bounding rectangle of the anchor,\n *     in window coordinates.\n * @param {!Size} widgetSize The dimensions of the widget inside\n *     the widget div.\n * @return {number} A valid y-coordinate for the top left corner of the widget\n *     div, in window coordinates.\n */\nconst calculateY = function(viewportBBox, anchorBBox, widgetSize) {\n  // Flip the widget vertically if off the bottom.\n  if (anchorBBox.bottom + widgetSize.height >= viewportBBox.bottom) {\n    // The bottom of the widget is at the top of the field.\n    return anchorBBox.top - widgetSize.height;\n    // The widget could go off the top of the window, but it would also go off\n    // the bottom.  The window is just too small.\n  } else {\n    // The top of the widget is at the bottom of the field.\n    return anchorBBox.bottom;\n  }\n};\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview ARIA-related constants and utilities.\n * These methods are not specific to Blockly, and could be factored out into\n * a JavaScript framework such as Closure.\n */\n'use strict';\n\n/**\n * ARIA-related constants and utilities.\n * These methods are not specific to Blockly, and could be factored out into\n * a JavaScript framework such as Closure.\n * @namespace Blockly.utils.aria\n */\ngoog.module('Blockly.utils.aria');\n\n\n/** ARIA states/properties prefix. */\nconst ARIA_PREFIX = 'aria-';\n\n/** ARIA role attribute. */\nconst ROLE_ATTRIBUTE = 'role';\n\n/**\n * ARIA role values.\n * Copied from Closure's goog.a11y.aria.Role\n * @enum {string}\n * @alias Blockly.utils.aria.Role\n */\nconst Role = {\n  // ARIA role for an interactive control of tabular data.\n  GRID: 'grid',\n\n  // ARIA role for a cell in a grid.\n  GRIDCELL: 'gridcell',\n\n  // ARIA role for a group of related elements like tree item siblings.\n  GROUP: 'group',\n\n  // ARIA role for a listbox.\n  LISTBOX: 'listbox',\n\n  // ARIA role for a popup menu.\n  MENU: 'menu',\n\n  // ARIA role for menu item elements.\n  MENUITEM: 'menuitem',\n\n  // ARIA role for a checkbox box element inside a menu.\n  MENUITEMCHECKBOX: 'menuitemcheckbox',\n\n  // ARIA role for option items that are  children of combobox, listbox, menu,\n  // radiogroup, or tree elements.\n  OPTION: 'option',\n\n  // ARIA role for ignorable cosmetic elements with no semantic significance.\n  PRESENTATION: 'presentation',\n\n  // ARIA role for a row of cells in a grid.\n  ROW: 'row',\n\n  // ARIA role for a tree.\n  TREE: 'tree',\n\n  // ARIA role for a tree item that sometimes may be expanded or collapsed.\n  TREEITEM: 'treeitem',\n};\nexports.Role = Role;\n\n/**\n * ARIA states and properties.\n * Copied from Closure's goog.a11y.aria.State\n * @enum {string}\n * @alias Blockly.utils.aria.State\n */\nconst State = {\n  // ARIA property for setting the currently active descendant of an element,\n  // for example the selected item in a list box. Value: ID of an element.\n  ACTIVEDESCENDANT: 'activedescendant',\n\n  // ARIA property defines the total number of columns in a table, grid, or\n  // treegrid.\n  // Value: integer.\n  COLCOUNT: 'colcount',\n\n  // ARIA state for a disabled item. Value: one of {true, false}.\n  DISABLED: 'disabled',\n\n  // ARIA state for setting whether the element like a tree node is expanded.\n  // Value: one of {true, false, undefined}.\n  EXPANDED: 'expanded',\n\n  // ARIA state indicating that the entered value does not conform. Value:\n  // one of {false, true, 'grammar', 'spelling'}\n  INVALID: 'invalid',\n\n  // ARIA property that provides a label to override any other text, value, or\n  // contents used to describe this element. Value: string.\n  LABEL: 'label',\n\n  // ARIA property for setting the element which labels another element.\n  // Value: space-separated IDs of elements.\n  LABELLEDBY: 'labelledby',\n\n  // ARIA property for setting the level of an element in the hierarchy.\n  // Value: integer.\n  LEVEL: 'level',\n\n  // ARIA property indicating if the element is horizontal or vertical.\n  // Value: one of {'vertical', 'horizontal'}.\n  ORIENTATION: 'orientation',\n\n  // ARIA property that defines an element's number of position in a list.\n  // Value: integer.\n  POSINSET: 'posinset',\n\n  // ARIA property defines the total number of rows in a table, grid, or\n  // treegrid.\n  // Value: integer.\n  ROWCOUNT: 'rowcount',\n\n  // ARIA state for setting the currently selected item in the list.\n  // Value: one of {true, false, undefined}.\n  SELECTED: 'selected',\n\n  // ARIA property defining the number of items in a list. Value: integer.\n  SETSIZE: 'setsize',\n\n  // ARIA property for slider maximum value. Value: number.\n  VALUEMAX: 'valuemax',\n\n  // ARIA property for slider minimum value. Value: number.\n  VALUEMIN: 'valuemin',\n};\nexports.State = State;\n\n/**\n * Sets the role of an element.\n *\n * Similar to Closure's goog.a11y.aria\n *\n * @param {!Element} element DOM node to set role of.\n * @param {!Role} roleName Role name.\n * @alias Blockly.utils.aria.setRole\n */\nconst setRole = function(element, roleName) {\n  element.setAttribute(ROLE_ATTRIBUTE, roleName);\n};\nexports.setRole = setRole;\n\n/**\n * Sets the state or property of an element.\n * Copied from Closure's goog.a11y.aria\n * @param {!Element} element DOM node where we set state.\n * @param {!State} stateName State attribute being set.\n *     Automatically adds prefix 'aria-' to the state name if the attribute is\n *     not an extra attribute.\n * @param {string|boolean|number|!Array<string>} value Value\n * for the state attribute.\n * @alias Blockly.utils.aria.setState\n */\nconst setState = function(element, stateName, value) {\n  if (Array.isArray(value)) {\n    value = value.join(' ');\n  }\n  const attrStateName = ARIA_PREFIX + stateName;\n  element.setAttribute(attrStateName, value);\n};\nexports.setState = setState;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Generators for unique IDs.\n */\n'use strict';\n\n/**\n * Generators for unique IDs.\n * @namespace Blockly.utils.idGenerator\n */\ngoog.module('Blockly.utils.idGenerator');\n\n\n/**\n * Namespace object for internal implementations we want to be able to\n * stub in tests.\n * @ignore\n */\nconst internal = {};\nexports.TEST_ONLY = internal;\n\n/**\n * Next unique ID to use.\n * @type {number}\n */\nlet nextId = 0;\n\n/**\n * Generate the next unique element IDs.\n * IDs are compatible with the HTML4 id attribute restrictions:\n * Use only ASCII letters, digits, '_', '-' and '.'\n *\n * For UUIDs use genUid (below) instead; this ID generator should\n * primarily be used for IDs that end up in the DOM.\n *\n * @return {string} The next unique identifier.\n * @alias Blockly.utils.idGenerator.getNextUniqueId\n */\nconst getNextUniqueId = function() {\n  return 'blockly-' + (nextId++).toString(36);\n};\nexports.getNextUniqueId = getNextUniqueId;\n\n/**\n * Legal characters for the universally unique IDs.  Should be all on\n * a US keyboard.  No characters that conflict with XML or JSON.\n * Requests to remove additional 'problematic' characters from this\n * soup will be denied.  That's your failure to properly escape in\n * your own environment.  Issues #251, #625, #682, #1304.\n */\nconst soup = '!#$%()*+,-./:;=?@[]^_`{|}~' +\n    'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n\n/**\n * Generate a random unique ID.  This should be globally unique.\n * 87 characters ^ 20 length > 128 bits (better than a UUID).\n * @return {string} A globally unique ID string.\n */\ninternal.genUid = function() {\n  const length = 20;\n  const soupLength = soup.length;\n  const id = [];\n  for (let i = 0; i < length; i++) {\n    id[i] = soup.charAt(Math.random() * soupLength);\n  }\n  return id.join('');\n};\n\n/**\n * Generate a random unique ID.\n * @see internal.genUid\n * @return {string} A globally unique ID string.\n * @alias Blockly.utils.idGenerator.genUid\n */\nconst genUid = function() {\n  return internal.genUid();\n};\nexports.genUid = genUid;\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview This file is a universal registry that provides generic methods\n *    for registering and unregistering different types of classes.\n */\n'use strict';\n\n/**\n * This file is a universal registry that provides generic methods\n *    for registering and unregistering different types of classes.\n * @namespace Blockly.registry\n */\ngoog.module('Blockly.registry');\n\n/* eslint-disable-next-line no-unused-vars */\nconst {Abstract} = goog.requireType('Blockly.Events.Abstract');\n/* eslint-disable-next-line no-unused-vars */\nconst {Cursor} = goog.requireType('Blockly.Cursor');\n/* eslint-disable-next-line no-unused-vars */\nconst {Field} = goog.requireType('Blockly.Field');\n/* eslint-disable-next-line no-unused-vars */\nconst {IBlockDragger} = goog.requireType('Blockly.IBlockDragger');\n/* eslint-disable-next-line no-unused-vars */\nconst {IConnectionChecker} = goog.requireType('Blockly.IConnectionChecker');\n/* eslint-disable-next-line no-unused-vars */\nconst {IFlyout} = goog.requireType('Blockly.IFlyout');\n/* eslint-disable-next-line no-unused-vars */\nconst {IMetricsManager} = goog.requireType('Blockly.IMetricsManager');\n/* eslint-disable-next-line no-unused-vars */\nconst {ISerializer} = goog.requireType('Blockly.serialization.ISerializer');\n/* eslint-disable-next-line no-unused-vars */\nconst {IToolbox} = goog.requireType('Blockly.IToolbox');\n/* eslint-disable-next-line no-unused-vars */\nconst {Options} = goog.requireType('Blockly.Options');\n/* eslint-disable-next-line no-unused-vars */\nconst {Renderer} = goog.requireType('Blockly.blockRendering.Renderer');\n/* eslint-disable-next-line no-unused-vars */\nconst {Theme} = goog.requireType('Blockly.Theme');\n/* eslint-disable-next-line no-unused-vars */\nconst {ToolboxItem} = goog.requireType('Blockly.ToolboxItem');\n\n\n/**\n * A map of maps. With the keys being the type and name of the class we are\n * registering and the value being the constructor function.\n * e.g. {'field': {'field_angle': Blockly.FieldAngle}}\n *\n * @type {!Object<string, !Object<string, (function(new:?)|!Object)>>}\n */\nconst typeMap = Object.create(null);\nexports.TEST_ONLY = {typeMap};\n\n/**\n * A map of maps. With the keys being the type and caseless name of the class we\n * are registring, and the value being the most recent cased name for that\n * registration.\n * @type {!Object<string, !Object<string, string>>}\n */\nconst nameMap = Object.create(null);\n\n/**\n * The string used to register the default class for a type of plugin.\n * @type {string}\n * @alias Blockly.registry.DEFAULT\n */\nconst DEFAULT = 'default';\nexports.DEFAULT = DEFAULT;\n\n/**\n * A name with the type of the element stored in the generic.\n * @template T\n * @alias Blockly.registry.Type\n */\nclass Type {\n  /**\n   * @param {string} name The name of the registry type.\n   */\n  constructor(name) {\n    /**\n     * @type {string}\n     * @private\n     */\n    this.name_ = name;\n  }\n\n  /**\n   * Returns the name of the type.\n   * @return {string} The name.\n   */\n  toString() {\n    return this.name_;\n  }\n}\nexports.Type = Type;\n\n\n/** @type {!Type<IConnectionChecker>} */\nType.CONNECTION_CHECKER = new Type('connectionChecker');\n\n/** @type {!Type<Cursor>} */\nType.CURSOR = new Type('cursor');\n\n/** @type {!Type<Abstract>} */\nType.EVENT = new Type('event');\n\n/** @type {!Type<Field>} */\nType.FIELD = new Type('field');\n\n/** @type {!Type<Renderer>} */\nType.RENDERER = new Type('renderer');\n\n/** @type {!Type<IToolbox>} */\nType.TOOLBOX = new Type('toolbox');\n\n/** @type {!Type<Theme>} */\nType.THEME = new Type('theme');\n\n/** @type {!Type<ToolboxItem>} */\nType.TOOLBOX_ITEM = new Type('toolboxItem');\n\n/** @type {!Type<IFlyout>} */\nType.FLYOUTS_VERTICAL_TOOLBOX = new Type('flyoutsVerticalToolbox');\n\n/** @type {!Type<IFlyout>} */\nType.FLYOUTS_HORIZONTAL_TOOLBOX = new Type('flyoutsHorizontalToolbox');\n\n/** @type {!Type<IMetricsManager>} */\nType.METRICS_MANAGER = new Type('metricsManager');\n\n/** @type {!Type<IBlockDragger>} */\nType.BLOCK_DRAGGER = new Type('blockDragger');\n\n/**\n * @type {!Type<ISerializer>}\n * @package\n */\nType.SERIALIZER = new Type('serializer');\n\n/**\n * Registers a class based on a type and name.\n * @param {string|!Type<T>} type The type of the plugin.\n *     (e.g. Field, Renderer)\n * @param {string} name The plugin's name. (Ex. field_angle, geras)\n * @param {?function(new:T, ...?)|Object} registryItem The class or object to\n *     register.\n * @param {boolean=} opt_allowOverrides True to prevent an error when overriding\n *     an already registered item.\n * @throws {Error} if the type or name is empty, a name with the given type has\n *     already been registered, or if the given class or object is not valid for\n *     its type.\n * @template T\n * @alias Blockly.registry.register\n */\nconst register = function(type, name, registryItem, opt_allowOverrides) {\n  if ((!(type instanceof Type) && typeof type !== 'string') ||\n      String(type).trim() === '') {\n    throw Error(\n        'Invalid type \"' + type + '\". The type must be a' +\n        ' non-empty string or a Blockly.registry.Type.');\n  }\n  type = String(type).toLowerCase();\n\n  if ((typeof name !== 'string') || (name.trim() === '')) {\n    throw Error(\n        'Invalid name \"' + name + '\". The name must be a' +\n        ' non-empty string.');\n  }\n  const caselessName = name.toLowerCase();\n  if (!registryItem) {\n    throw Error('Can not register a null value');\n  }\n  let typeRegistry = typeMap[type];\n  let nameRegistry = nameMap[type];\n  // If the type registry has not been created, create it.\n  if (!typeRegistry) {\n    typeRegistry = typeMap[type] = Object.create(null);\n    nameRegistry = nameMap[type] = Object.create(null);\n  }\n\n  // Validate that the given class has all the required properties.\n  validate(type, registryItem);\n\n  // Don't throw an error if opt_allowOverrides is true.\n  if (!opt_allowOverrides && typeRegistry[caselessName]) {\n    throw Error(\n        'Name \"' + caselessName + '\" with type \"' + type +\n        '\" already registered.');\n  }\n  typeRegistry[caselessName] = registryItem;\n  nameRegistry[caselessName] = name;\n};\nexports.register = register;\n\n/**\n * Checks the given registry item for properties that are required based on the\n * type.\n * @param {string} type The type of the plugin. (e.g. Field, Renderer)\n * @param {Function|Object} registryItem A class or object that we are checking\n *     for the required properties.\n */\nconst validate = function(type, registryItem) {\n  switch (type) {\n    case String(Type.FIELD):\n      if (typeof registryItem.fromJson !== 'function') {\n        throw Error('Type \"' + type + '\" must have a fromJson function');\n      }\n      break;\n  }\n};\n\n/**\n * Unregisters the registry item with the given type and name.\n * @param {string|!Type<T>} type The type of the plugin.\n *     (e.g. Field, Renderer)\n * @param {string} name The plugin's name. (Ex. field_angle, geras)\n * @template T\n * @alias Blockly.registry.unregister\n */\nconst unregister = function(type, name) {\n  type = String(type).toLowerCase();\n  name = name.toLowerCase();\n  const typeRegistry = typeMap[type];\n  if (!typeRegistry || !typeRegistry[name]) {\n    console.warn(\n        'Unable to unregister [' + name + '][' + type + '] from the ' +\n        'registry.');\n    return;\n  }\n  delete typeMap[type][name];\n  delete nameMap[type][name];\n};\nexports.unregister = unregister;\n\n/**\n * Gets the registry item for the given name and type. This can be either a\n * class or an object.\n * @param {string|!Type<T>} type The type of the plugin.\n *     (e.g. Field, Renderer)\n * @param {string} name The plugin's name. (Ex. field_angle, geras)\n * @param {boolean=} opt_throwIfMissing Whether or not to throw an error if we\n *     are unable to find the plugin.\n * @return {?function(new:T, ...?)|Object} The class or object with the given\n *     name and type or null if none exists.\n * @template T\n */\nconst getItem = function(type, name, opt_throwIfMissing) {\n  type = String(type).toLowerCase();\n  name = name.toLowerCase();\n  const typeRegistry = typeMap[type];\n  if (!typeRegistry || !typeRegistry[name]) {\n    const msg = 'Unable to find [' + name + '][' + type + '] in the registry.';\n    if (opt_throwIfMissing) {\n      throw new Error(\n          msg + ' You must require or register a ' + type + ' plugin.');\n    } else {\n      console.warn(msg);\n    }\n    return null;\n  }\n  return typeRegistry[name];\n};\n\n/**\n * Returns whether or not the registry contains an item with the given type and\n * name.\n * @param {string|!Type<T>} type The type of the plugin.\n *     (e.g. Field, Renderer)\n * @param {string} name The plugin's name. (Ex. field_angle, geras)\n * @return {boolean} True if the registry has an item with the given type and\n *     name, false otherwise.\n * @template T\n * @alias Blockly.registry.hasItem\n */\nconst hasItem = function(type, name) {\n  type = String(type).toLowerCase();\n  name = name.toLowerCase();\n  const typeRegistry = typeMap[type];\n  if (!typeRegistry) {\n    return false;\n  }\n  return !!(typeRegistry[name]);\n};\nexports.hasItem = hasItem;\n\n/**\n * Gets the class for the given name and type.\n * @param {string|!Type<T>} type The type of the plugin.\n *     (e.g. Field, Renderer)\n * @param {string} name The plugin's name. (Ex. field_angle, geras)\n * @param {boolean=} opt_throwIfMissing Whether or not to throw an error if we\n *     are unable to find the plugin.\n * @return {?function(new:T, ...?)} The class with the given name and type or\n *     null if none exists.\n * @template T\n * @alias Blockly.registry.getClass\n */\nconst getClass = function(type, name, opt_throwIfMissing) {\n  return /** @type {?function(new:T, ...?)} */ (\n      getItem(type, name, opt_throwIfMissing));\n};\nexports.getClass = getClass;\n\n/**\n * Gets the object for the given name and type.\n * @param {string|!Type<T>} type The type of the plugin.\n *     (e.g. Category)\n * @param {string} name The plugin's name. (Ex. logic_category)\n * @param {boolean=} opt_throwIfMissing Whether or not to throw an error if we\n *     are unable to find the object.\n * @return {?T} The object with the given name and type or null if none exists.\n * @template T\n * @alias Blockly.registry.getObject\n */\nconst getObject = function(type, name, opt_throwIfMissing) {\n  return /** @type {T} */ (getItem(type, name, opt_throwIfMissing));\n};\nexports.getObject = getObject;\n\n/**\n * Returns a map of items registered with the given type.\n * @param {string|!Type<T>} type The type of the plugin. (e.g. Category)\n * @param {boolean} opt_cased Whether or not to return a map with cased keys\n *     (rather than caseless keys). False by default.\n * @param {boolean=} opt_throwIfMissing Whether or not to throw an error if we\n *     are unable to find the object. False by default.\n * @return {?Object<string, ?T|?function(new:T, ...?)>} A map of objects with\n *     the given type, or null if none exists.\n * @template T\n * @alias Blockly.registry.getAllItems\n */\nconst getAllItems = function(type, opt_cased, opt_throwIfMissing) {\n  type = String(type).toLowerCase();\n  const typeRegistry = typeMap[type];\n  if (!typeRegistry) {\n    const msg = `Unable to find [${type}] in the registry.`;\n    if (opt_throwIfMissing) {\n      throw new Error(`${msg} You must require or register a ${type} plugin.`);\n    } else {\n      console.warn(msg);\n    }\n    return null;\n  }\n  if (!opt_cased) {\n    return typeRegistry;\n  }\n  const nameRegistry = nameMap[type];\n  const casedRegistry = Object.create(null);\n  const keys = Object.keys(typeRegistry);\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i];\n    casedRegistry[nameRegistry[key]] = typeRegistry[key];\n  }\n  return casedRegistry;\n};\nexports.getAllItems = getAllItems;\n\n/**\n * Gets the class from Blockly options for the given type.\n * This is used for plugins that override a built in feature. (e.g. Toolbox)\n * @param {!Type<T>} type The type of the plugin.\n * @param {!Options} options The option object to check for the given\n *     plugin.\n * @param {boolean=} opt_throwIfMissing Whether or not to throw an error if we\n *     are unable to find the plugin.\n * @return {?function(new:T, ...?)} The class for the plugin.\n * @template T\n * @alias Blockly.registry.getClassFromOptions\n */\nconst getClassFromOptions = function(type, options, opt_throwIfMissing) {\n  const typeName = type.toString();\n  const plugin = options.plugins[typeName] || DEFAULT;\n\n  // If the user passed in a plugin class instead of a registered plugin name.\n  if (typeof plugin === 'function') {\n    return plugin;\n  }\n  return getClass(type, plugin, opt_throwIfMissing);\n};\nexports.getClassFromOptions = getClassFromOptions;\n","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Helper methods for events that are fired as a result of\n * actions in Blockly's editor.\n */\n'use strict';\n\n/**\n * Helper methods for events that are fired as a result of\n * actions in Blockly's editor.\n * @namespace Blockly.Events.utils\n */\ngoog.module('Blockly.Events.utils');\n\nconst idGenerator = goog.require('Blockly.utils.idGenerator');\nconst registry = goog.require('Blockly.registry');\n/* eslint-disable-next-line no-unused-vars */\nconst {Abstract} = goog.requireType('Blockly.Events.Abstract');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockChange} = goog.requireType('Blockly.Events.BlockChange');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockCreate} = goog.requireType('Blockly.Events.BlockCreate');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockMove} = goog.requireType('Blockly.Events.BlockMove');\n/* eslint-disable-next-line no-unused-vars */\nconst {Block} = goog.requireType('Blockly.Block');\n/* eslint-disable-next-line no-unused-vars */\nconst {CommentCreate} = goog.requireType('Blockly.Events.CommentCreate');\n/* eslint-disable-next-line no-unused-vars */\nconst {CommentMove} = goog.requireType('Blockly.Events.CommentMove');\n/* eslint-disable-next-line no-unused-vars */\nconst {ViewportChange} = goog.requireType('Blockly.Events.ViewportChange');\n/* eslint-disable-next-line no-unused-vars */\nconst {Workspace} = goog.requireType('Blockly.Workspace');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceSvg} = goog.requireType('Blockly.WorkspaceSvg');\n\n\n/**\n * Group ID for new events.  Grouped events are indivisible.\n * @type {string}\n */\nlet group = '';\n\n/**\n * Sets whether the next event should be added to the undo stack.\n * @type {boolean}\n */\nlet recordUndo = true;\n\n/**\n * Sets whether events should be added to the undo stack.\n * @param {boolean} newValue True if events should be added to the undo stack.\n * @alias Blockly.Events.utils.setRecordUndo\n */\nconst setRecordUndo = function(newValue) {\n  recordUndo = newValue;\n};\nexports.setRecordUndo = setRecordUndo;\n\n/**\n * Returns whether or not events will be added to the undo stack.\n * @returns {boolean} True if events will be added to the undo stack.\n * @alias Blockly.Events.utils.getRecordUndo\n */\nconst getRecordUndo = function() {\n  return recordUndo;\n};\nexports.getRecordUndo = getRecordUndo;\n\n/**\n * Allow change events to be created and fired.\n * @type {number}\n */\nlet disabled = 0;\n\n/**\n * Name of event that creates a block. Will be deprecated for BLOCK_CREATE.\n * @const\n * @alias Blockly.Events.utils.CREATE\n */\nconst CREATE = 'create';\nexports.CREATE = CREATE;\n\n/**\n * Name of event that creates a block.\n * @const\n * @alias Blockly.Events.utils.BLOCK_CREATE\n */\nconst BLOCK_CREATE = CREATE;\nexports.BLOCK_CREATE = BLOCK_CREATE;\n\n/**\n * Name of event that deletes a block. Will be deprecated for BLOCK_DELETE.\n * @const\n * @alias Blockly.Events.utils.DELETE\n */\nconst DELETE = 'delete';\nexports.DELETE = DELETE;\n\n/**\n * Name of event that deletes a block.\n * @const\n * @alias Blockly.Events.utils.BLOCK_DELETE\n */\nconst BLOCK_DELETE = DELETE;\nexports.BLOCK_DELETE = BLOCK_DELETE;\n\n/**\n * Name of event that changes a block. Will be deprecated for BLOCK_CHANGE.\n * @const\n * @alias Blockly.Events.utils.CHANGE\n */\nconst CHANGE = 'change';\nexports.CHANGE = CHANGE;\n\n/**\n * Name of event that changes a block.\n * @const\n * @alias Blockly.Events.utils.BLOCK_CHANGE\n */\nconst BLOCK_CHANGE = CHANGE;\nexports.BLOCK_CHANGE = BLOCK_CHANGE;\n\n/**\n * Name of event that moves a block. Will be deprecated for BLOCK_MOVE.\n * @const\n * @alias Blockly.Events.utils.MOVE\n */\nconst MOVE = 'move';\nexports.MOVE = MOVE;\n\n/**\n * Name of event that moves a block.\n * @const\n * @alias Blockly.Events.utils.BLOCK_MOVE\n */\nconst BLOCK_MOVE = MOVE;\nexports.BLOCK_MOVE = BLOCK_MOVE;\n\n/**\n * Name of event that creates a variable.\n * @const\n * @alias Blockly.Events.utils.VAR_CREATE\n */\nconst VAR_CREATE = 'var_create';\nexports.VAR_CREATE = VAR_CREATE;\n\n/**\n * Name of event that deletes a variable.\n * @const\n * @alias Blockly.Events.utils.VAR_DELETE\n */\nconst VAR_DELETE = 'var_delete';\nexports.VAR_DELETE = VAR_DELETE;\n\n/**\n * Name of event that renames a variable.\n * @const\n * @alias Blockly.Events.utils.VAR_RENAME\n */\nconst VAR_RENAME = 'var_rename';\nexports.VAR_RENAME = VAR_RENAME;\n\n/**\n * Name of generic event that records a UI change.\n * @const\n * @alias Blockly.Events.utils.UI\n */\nconst UI = 'ui';\nexports.UI = UI;\n\n/**\n * Name of event that record a block drags a block.\n * @const\n * @alias Blockly.Events.utils.BLOCK_DRAG\n */\nconst BLOCK_DRAG = 'drag';\nexports.BLOCK_DRAG = BLOCK_DRAG;\n\n/**\n * Name of event that records a change in selected element.\n * @const\n * @alias Blockly.Events.utils.SELECTED\n */\nconst SELECTED = 'selected';\nexports.SELECTED = SELECTED;\n\n/**\n * Name of event that records a click.\n * @const\n * @alias Blockly.Events.utils.CLICK\n */\nconst CLICK = 'click';\nexports.CLICK = CLICK;\n\n/**\n * Name of event that records a marker move.\n * @const\n * @alias Blockly.Events.utils.MARKER_MOVE\n */\nconst MARKER_MOVE = 'marker_move';\nexports.MARKER_MOVE = MARKER_MOVE;\n\n/**\n * Name of event that records a bubble open.\n * @const\n * @alias Blockly.Events.utils.BUBBLE_OPEN\n */\nconst BUBBLE_OPEN = 'bubble_open';\nexports.BUBBLE_OPEN = BUBBLE_OPEN;\n\n/**\n * Name of event that records a trashcan open.\n * @const\n * @alias Blockly.Events.utils.TRASHCAN_OPEN\n */\nconst TRASHCAN_OPEN = 'trashcan_open';\nexports.TRASHCAN_OPEN = TRASHCAN_OPEN;\n\n/**\n * Name of event that records a toolbox item select.\n * @const\n * @alias Blockly.Events.utils.TOOLBOX_ITEM_SELECT\n */\nconst TOOLBOX_ITEM_SELECT = 'toolbox_item_select';\nexports.TOOLBOX_ITEM_SELECT = TOOLBOX_ITEM_SELECT;\n\n/**\n * Name of event that records a theme change.\n * @const\n * @alias Blockly.Events.utils.THEME_CHANGE\n */\nconst THEME_CHANGE = 'theme_change';\nexports.THEME_CHANGE = THEME_CHANGE;\n\n/**\n * Name of event that records a viewport change.\n * @const\n * @alias Blockly.Events.utils.VIEWPORT_CHANGE\n */\nconst VIEWPORT_CHANGE = 'viewport_change';\nexports.VIEWPORT_CHANGE = VIEWPORT_CHANGE;\n\n/**\n * Name of event that creates a comment.\n * @const\n * @alias Blockly.Events.utils.COMMENT_CREATE\n */\nconst COMMENT_CREATE = 'comment_create';\nexports.COMMENT_CREATE = COMMENT_CREATE;\n\n/**\n * Name of event that deletes a comment.\n * @const\n * @alias Blockly.Events.utils.COMMENT_DELETE\n */\nconst COMMENT_DELETE = 'comment_delete';\nexports.COMMENT_DELETE = COMMENT_DELETE;\n\n/**\n * Name of event that changes a comment.\n * @const\n * @alias Blockly.Events.utils.COMMENT_CHANGE\n */\nconst COMMENT_CHANGE = 'comment_change';\nexports.COMMENT_CHANGE = COMMENT_CHANGE;\n\n/**\n * Name of event that moves a comment.\n * @const\n * @alias Blockly.Events.utils.COMMENT_MOVE\n */\nconst COMMENT_MOVE = 'comment_move';\nexports.COMMENT_MOVE = COMMENT_MOVE;\n\n/**\n * Name of event that records a workspace load.\n * @alias Blockly.Events.utils.FINISHED_LOADING\n */\nconst FINISHED_LOADING = 'finished_loading';\nexports.FINISHED_LOADING = FINISHED_LOADING;\n\n/**\n * Type of events that cause objects to be bumped back into the visible\n * portion of the workspace.\n *\n * Not to be confused with bumping so that disconnected connections do not\n * appear connected.\n * @typedef {!BlockCreate|!BlockMove|\n * !CommentCreate|!CommentMove}\n * @alias Blockly.Events.utils.BumpEvent\n */\nlet BumpEvent;\nexports.BumpEvent = BumpEvent;\n\n/**\n * List of events that cause objects to be bumped back into the visible\n * portion of the workspace.\n *\n * Not to be confused with bumping so that disconnected connections do not\n * appear connected.\n * @const\n * @alias Blockly.Events.utils.BUMP_EVENTS\n */\nconst BUMP_EVENTS = [BLOCK_CREATE, BLOCK_MOVE, COMMENT_CREATE, COMMENT_MOVE];\nexports.BUMP_EVENTS = BUMP_EVENTS;\n\n/**\n * List of events queued for firing.\n * @type {!Array<!Abstract>}\n */\nconst FIRE_QUEUE = [];\n\n/**\n * Create a custom event and fire it.\n * @param {!Abstract} event Custom data for event.\n * @alias Blockly.Events.utils.fire\n */\nconst fire = function(event) {\n  if (!isEnabled()) {\n    return;\n  }\n  if (!FIRE_QUEUE.length) {\n    // First event added; schedule a firing of the event queue.\n    setTimeout(fireNow, 0);\n  }\n  FIRE_QUEUE.push(event);\n};\nexports.fire = fire;\n\n/**\n * Fire all queued events.\n */\nconst fireNow = function() {\n  const queue = filter(FIRE_QUEUE, true);\n  FIRE_QUEUE.length = 0;\n  for (let i = 0, event; (event = queue[i]); i++) {\n    if (!event.workspaceId) {\n      continue;\n    }\n    const {Workspace} = goog.module.get('Blockly.Workspace');\n    const eventWorkspace = Workspace.getById(event.workspaceId);\n    if (eventWorkspace) {\n      eventWorkspace.fireChangeListener(event);\n    }\n  }\n};\n\n/**\n * Filter the queued events and merge duplicates.\n * @param {!Array<!Abstract>} queueIn Array of events.\n * @param {boolean} forward True if forward (redo), false if backward (undo).\n * @return {!Array<!Abstract>} Array of filtered events.\n * @alias Blockly.Events.utils.filter\n */\nconst filter = function(queueIn, forward) {\n  let queue = queueIn.slice();  // Shallow copy of queue.\n  if (!forward) {\n    // Undo is merged in reverse order.\n    queue.reverse();\n  }\n  const mergedQueue = [];\n  const hash = Object.create(null);\n  // Merge duplicates.\n  for (let i = 0, event; (event = queue[i]); i++) {\n    if (!event.isNull()) {\n      // Treat all UI events as the same type in hash table.\n      const eventType = event.isUiEvent ? UI : event.type;\n      // TODO(#5927): Ceck whether `blockId` exists before accessing it.\n      const blockId = /** @type {*} */ (event).blockId;\n      const key = [eventType, blockId, event.workspaceId].join(' ');\n\n      const lastEntry = hash[key];\n      const lastEvent = lastEntry ? lastEntry.event : null;\n      if (!lastEntry) {\n        // Each item in the hash table has the event and the index of that event\n        // in the input array.  This lets us make sure we only merge adjacent\n        // move events.\n        hash[key] = {event: event, index: i};\n        mergedQueue.push(event);\n      } else if (event.type === MOVE && lastEntry.index === i - 1) {\n        const moveEvent = /** @type {!BlockMove} */ (event);\n        // Merge move events.\n        lastEvent.newParentId = moveEvent.newParentId;\n        lastEvent.newInputName = moveEvent.newInputName;\n        lastEvent.newCoordinate = moveEvent.newCoordinate;\n        lastEntry.index = i;\n      } else if (\n          event.type === CHANGE && event.element === lastEvent.element &&\n          event.name === lastEvent.name) {\n        const changeEvent = /** @type {!BlockChange} */ (event);\n        // Merge change events.\n        lastEvent.newValue = changeEvent.newValue;\n      } else if (event.type === VIEWPORT_CHANGE) {\n        const viewportEvent = /** @type {!ViewportChange} */ (event);\n        // Merge viewport change events.\n        lastEvent.viewTop = viewportEvent.viewTop;\n        lastEvent.viewLeft = viewportEvent.viewLeft;\n        lastEvent.scale = viewportEvent.scale;\n        lastEvent.oldScale = viewportEvent.oldScale;\n      } else if (event.type === CLICK && lastEvent.type === BUBBLE_OPEN) {\n        // Drop click events caused by opening/closing bubbles.\n      } else {\n        // Collision: newer events should merge into this event to maintain\n        // order.\n        hash[key] = {event: event, index: i};\n        mergedQueue.push(event);\n      }\n    }\n  }\n  // Filter out any events that have become null due to merging.\n  queue = mergedQueue.filter(function(e) {\n    return !e.isNull();\n  });\n  if (!forward) {\n    // Restore undo order.\n    queue.reverse();\n  }\n  // Move mutation events to the top of the queue.\n  // Intentionally skip first event.\n  for (let i = 1, event; (event = queue[i]); i++) {\n    if (event.type === CHANGE && event.element === 'mutation') {\n      queue.unshift(queue.splice(i, 1)[0]);\n    }\n  }\n  return queue;\n};\nexports.filter = filter;\n\n/**\n * Modify pending undo events so that when they are fired they don't land\n * in the undo stack.  Called by Workspace.clearUndo.\n * @alias Blockly.Events.utils.clearPendingUndo\n */\nconst clearPendingUndo = function() {\n  for (let i = 0, event; (event = FIRE_QUEUE[i]); i++) {\n    event.recordUndo = false;\n  }\n};\nexports.clearPendingUndo = clearPendingUndo;\n\n/**\n * Stop sending events.  Every call to this function MUST also call enable.\n * @alias Blockly.Events.utils.disable\n */\nconst disable = function() {\n  disabled++;\n};\nexports.disable = disable;\n\n/**\n * Start sending events.  Unless events were already disabled when the\n * corresponding call to disable was made.\n * @alias Blockly.Events.utils.enable\n */\nconst enable = function() {\n  disabled--;\n};\nexports.enable = enable;\n\n/**\n * Returns whether events may be fired or not.\n * @return {boolean} True if enabled.\n * @alias Blockly.Events.utils.isEnabled\n */\nconst isEnabled = function() {\n  return disabled === 0;\n};\nexports.isEnabled = isEnabled;\n\n/**\n * Current group.\n * @return {string} ID string.\n * @alias Blockly.Events.utils.getGroup\n */\nconst getGroup = function() {\n  return group;\n};\nexports.getGroup = getGroup;\n\n/**\n * Start or stop a group.\n * @param {boolean|string} state True to start new group, false to end group.\n *   String to set group explicitly.\n * @alias Blockly.Events.utils.setGroup\n */\nconst setGroup = function(state) {\n  if (typeof state === 'boolean') {\n    group = state ? idGenerator.genUid() : '';\n  } else {\n    group = state;\n  }\n};\nexports.setGroup = setGroup;\n\n/**\n * Compute a list of the IDs of the specified block and all its descendants.\n * @param {!Block} block The root block.\n * @return {!Array<string>} List of block IDs.\n * @alias Blockly.Events.utils.getDescendantIds\n * @package\n */\nconst getDescendantIds = function(block) {\n  const ids = [];\n  const descendants = block.getDescendants(false);\n  for (let i = 0, descendant; (descendant = descendants[i]); i++) {\n    ids[i] = descendant.id;\n  }\n  return ids;\n};\nexports.getDescendantIds = getDescendantIds;\n\n/**\n * Decode the JSON into an event.\n * @param {!Object} json JSON representation.\n * @param {!Workspace} workspace Target workspace for event.\n * @return {!Abstract} The event represented by the JSON.\n * @throws {Error} if an event type is not found in the registry.\n * @alias Blockly.Events.utils.fromJson\n */\nconst fromJson = function(json, workspace) {\n  const eventClass = get(json.type);\n  if (!eventClass) {\n    throw Error('Unknown event type.');\n  }\n  const event = new eventClass();\n  event.fromJson(json);\n  event.workspaceId = workspace.id;\n  return event;\n};\nexports.fromJson = fromJson;\n\n/**\n * Gets the class for a specific event type from the registry.\n * @param {string} eventType The type of the event to get.\n * @return {?function(new:Abstract, ...?)} The event class with\n *     the given type or null if none exists.\n * @alias Blockly.Events.utils.get\n */\nconst get = function(eventType) {\n  return registry.getClass(registry.Type.EVENT, eventType);\n};\nexports.get = get;\n\n/**\n * Enable/disable a block depending on whether it is properly connected.\n * Use this on applications where all blocks should be connected to a top block.\n * Recommend setting the 'disable' option to 'false' in the config so that\n * users don't try to re-enable disabled orphan blocks.\n * @param {!Abstract} event Custom data for event.\n * @alias Blockly.Events.utils.disableOrphans\n */\nconst disableOrphans = function(event) {\n  if (event.type === MOVE || event.type === CREATE) {\n    const blockEvent = /** @type {!BlockMove|!BlockCreate} */ (event);\n    if (!blockEvent.workspaceId) {\n      return;\n    }\n    const {Workspace} = goog.module.get('Blockly.Workspace');\n    const eventWorkspace =\n        /** @type {!WorkspaceSvg} */ (\n            Workspace.getById(blockEvent.workspaceId));\n    let block = eventWorkspace.getBlockById(blockEvent.blockId);\n    if (block) {\n      // Changing blocks as part of this event shouldn't be undoable.\n      const initialUndoFlag = recordUndo;\n      try {\n        recordUndo = false;\n        const parent = block.getParent();\n        if (parent && parent.isEnabled()) {\n          const children = block.getDescendants(false);\n          for (let i = 0, child; (child = children[i]); i++) {\n            child.setEnabled(true);\n          }\n        } else if (\n            (block.outputConnection || block.previousConnection) &&\n            !eventWorkspace.isDragging()) {\n          do {\n            block.setEnabled(false);\n            block = block.getNextBlock();\n          } while (block);\n        }\n      } finally {\n        recordUndo = initialUndoFlag;\n      }\n    }\n  }\n};\nexports.disableOrphans = disableOrphans;\n\nexports.TEST_ONLY = {\n  FIRE_QUEUE,\n  fireNow,\n};\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Utility methods for math.\n * These methods are not specific to Blockly, and could be factored out into\n * a JavaScript framework such as Closure.\n */\n'use strict';\n\n/**\n * Utility methods for math.\n * These methods are not specific to Blockly, and could be factored out into\n * a JavaScript framework such as Closure.\n * @namespace Blockly.utils.math\n */\ngoog.module('Blockly.utils.math');\n\n\n/**\n * Converts degrees to radians.\n * Copied from Closure's goog.math.toRadians.\n * @param {number} angleDegrees Angle in degrees.\n * @return {number} Angle in radians.\n * @alias Blockly.utils.math.toRadians\n */\nconst toRadians = function(angleDegrees) {\n  return angleDegrees * Math.PI / 180;\n};\nexports.toRadians = toRadians;\n\n/**\n * Converts radians to degrees.\n * Copied from Closure's goog.math.toDegrees.\n * @param {number} angleRadians Angle in radians.\n * @return {number} Angle in degrees.\n * @alias Blockly.utils.math.toDegrees\n */\nconst toDegrees = function(angleRadians) {\n  return angleRadians * 180 / Math.PI;\n};\nexports.toDegrees = toDegrees;\n\n/**\n * Clamp the provided number between the lower bound and the upper bound.\n * @param {number} lowerBound The desired lower bound.\n * @param {number} number The number to clamp.\n * @param {number} upperBound The desired upper bound.\n * @return {number} The clamped number.\n * @alias Blockly.utils.math.clamp\n */\nconst clamp = function(lowerBound, number, upperBound) {\n  if (upperBound < lowerBound) {\n    const temp = upperBound;\n    upperBound = lowerBound;\n    lowerBound = temp;\n  }\n  return Math.max(lowerBound, Math.min(number, upperBound));\n};\nexports.clamp = clamp;\n","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Utilities for bumping objects back into worksapce bounds.\n */\n'use strict';\n\n/**\n * Utilities for bumping objects back into worksapce bounds.\n * @namespace Blockly.bumpObjects\n */\ngoog.module('Blockly.bumpObjects');\n\nconst eventUtils = goog.require('Blockly.Events.utils');\nconst mathUtils = goog.require('Blockly.utils.math');\n/* eslint-disable-next-line no-unused-vars */\nconst {Abstract} = goog.requireType('Blockly.Events.Abstract');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockSvg} = goog.requireType('Blockly.BlockSvg');\n/* eslint-disable-next-line no-unused-vars */\nconst {IBoundedElement} = goog.requireType('Blockly.IBoundedElement');\n/* eslint-disable-next-line no-unused-vars */\nconst {MetricsManager} = goog.requireType('Blockly.MetricsManager');\n/* eslint-disable-next-line no-unused-vars */\nconst {ViewportChange} = goog.requireType('Blockly.Events.ViewportChange');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceCommentSvg} = goog.requireType('Blockly.WorkspaceCommentSvg');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceSvg} = goog.requireType('Blockly.WorkspaceSvg');\n\n\n/**\n * Bumps the given object that has passed out of bounds.\n * @param {!WorkspaceSvg} workspace The workspace containing the object.\n * @param {!MetricsManager.ContainerRegion} scrollMetrics Scroll metrics\n *    in workspace coordinates.\n * @param {!IBoundedElement} object The object to bump.\n * @return {boolean} True if block was bumped.\n * @alias Blockly.bumpObjects.bumpIntoBounds\n */\nconst bumpObjectIntoBounds = function(workspace, scrollMetrics, object) {\n  // Compute new top/left position for object.\n  const objectMetrics = object.getBoundingRectangle();\n  const height = objectMetrics.bottom - objectMetrics.top;\n  const width = objectMetrics.right - objectMetrics.left;\n\n  const topClamp = scrollMetrics.top;\n  const scrollMetricsBottom = scrollMetrics.top + scrollMetrics.height;\n  const bottomClamp = scrollMetricsBottom - height;\n  // If the object is taller than the workspace we want to\n  // top-align the block\n  const newYPosition =\n      mathUtils.clamp(topClamp, objectMetrics.top, bottomClamp);\n  const deltaY = newYPosition - objectMetrics.top;\n\n  // Note: Even in RTL mode the \"anchor\" of the object is the\n  // top-left corner of the object.\n  let leftClamp = scrollMetrics.left;\n  const scrollMetricsRight = scrollMetrics.left + scrollMetrics.width;\n  let rightClamp = scrollMetricsRight - width;\n  if (workspace.RTL) {\n    // If the object is wider than the workspace and we're in RTL\n    // mode we want to right-align the block, which means setting\n    // the left clamp to match.\n    leftClamp = Math.min(rightClamp, leftClamp);\n  } else {\n    // If the object is wider than the workspace and we're in LTR\n    // mode we want to left-align the block, which means setting\n    // the right clamp to match.\n    rightClamp = Math.max(leftClamp, rightClamp);\n  }\n  const newXPosition =\n      mathUtils.clamp(leftClamp, objectMetrics.left, rightClamp);\n  const deltaX = newXPosition - objectMetrics.left;\n\n  if (deltaX || deltaY) {\n    object.moveBy(deltaX, deltaY);\n    return true;\n  }\n  return false;\n};\nexports.bumpIntoBounds = bumpObjectIntoBounds;\n\n/**\n * Creates a handler for bumping objects when they cross fixed bounds.\n * @param {!WorkspaceSvg} workspace The workspace to handle.\n * @return {function(Abstract)} The event handler.\n * @alias Blockly.bumpObjects.bumpIntoBoundsHandler\n */\nconst bumpIntoBoundsHandler = function(workspace) {\n  return function(e) {\n    const metricsManager = workspace.getMetricsManager();\n    if (!metricsManager.hasFixedEdges() || workspace.isDragging()) {\n      return;\n    }\n\n    if (eventUtils.BUMP_EVENTS.indexOf(e.type) !== -1) {\n      const scrollMetricsInWsCoords = metricsManager.getScrollMetrics(true);\n\n      // Triggered by move/create event\n      const object = extractObjectFromEvent(workspace, e);\n      if (!object) {\n        return;\n      }\n      // Handle undo.\n      const oldGroup = eventUtils.getGroup();\n      eventUtils.setGroup(e.group);\n\n      const wasBumped = bumpObjectIntoBounds(\n          workspace, scrollMetricsInWsCoords,\n          /** @type {!IBoundedElement} */ (object));\n\n      if (wasBumped && !e.group) {\n        console.warn(\n            'Moved object in bounds but there was no' +\n            ' event group. This may break undo.');\n      }\n      if (oldGroup !== null) {\n        eventUtils.setGroup(oldGroup);\n      }\n    } else if (e.type === eventUtils.VIEWPORT_CHANGE) {\n      const viewportEvent = /** @type {!ViewportChange} */ (e);\n      if (viewportEvent.scale > viewportEvent.oldScale) {\n        bumpTopObjectsIntoBounds(workspace);\n      }\n    }\n  };\n};\nexports.bumpIntoBoundsHandler = bumpIntoBoundsHandler;\n\n/**\n * Extracts the object from the given event.\n * @param {!WorkspaceSvg} workspace The workspace the event originated\n *    from.\n * @param {!eventUtils.BumpEvent} e An event containing an object.\n * @return {?BlockSvg|?WorkspaceCommentSvg} The extracted\n *    object.\n */\nconst extractObjectFromEvent = function(workspace, e) {\n  let object = null;\n  switch (e.type) {\n    case eventUtils.BLOCK_CREATE:\n    case eventUtils.BLOCK_MOVE:\n      object = workspace.getBlockById(e.blockId);\n      if (object) {\n        object = object.getRootBlock();\n      }\n      break;\n    case eventUtils.COMMENT_CREATE:\n    case eventUtils.COMMENT_MOVE:\n      object = (\n          /** @type {?WorkspaceCommentSvg} */\n          (workspace.getCommentById(e.commentId)));\n      break;\n  }\n  return object;\n};\n\n/**\n * Bumps the top objects in the given workspace into bounds.\n * @param {!WorkspaceSvg} workspace The workspace.\n * @alias Blockly.bumpObjects.bumpTopObjectsIntoBounds\n */\nconst bumpTopObjectsIntoBounds = function(workspace) {\n  const metricsManager = workspace.getMetricsManager();\n  if (!metricsManager.hasFixedEdges() || workspace.isDragging()) {\n    return;\n  }\n\n  const scrollMetricsInWsCoords = metricsManager.getScrollMetrics(true);\n  const topBlocks = workspace.getTopBoundedElements();\n  for (let i = 0, block; (block = topBlocks[i]); i++) {\n    bumpObjectIntoBounds(workspace, scrollMetricsInWsCoords, block);\n  }\n};\nexports.bumpTopObjectsIntoBounds = bumpTopObjectsIntoBounds;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Utility methods for coordinate manipulation.\n * These methods are not specific to Blockly, and could be factored out into\n * a JavaScript framework such as Closure.\n */\n'use strict';\n\n/**\n * Utility methods for coordinate manipulation.\n * These methods are not specific to Blockly, and could be factored out into\n * a JavaScript framework such as Closure.\n * @class\n */\ngoog.module('Blockly.utils.Coordinate');\n\n/**\n * Class for representing coordinates and positions.\n * @alias Blockly.utils.Coordinate\n */\nconst Coordinate = class {\n  /**\n   * @param {number} x Left.\n   * @param {number} y Top.\n   */\n  constructor(x, y) {\n    /**\n     * X-value\n     * @type {number}\n     */\n    this.x = x;\n\n    /**\n     * Y-value\n     * @type {number}\n     */\n    this.y = y;\n  }\n\n  /**\n   * Creates a new copy of this coordinate.\n   * @return {!Coordinate} A copy of this coordinate.\n   */\n  clone() {\n    return new Coordinate(this.x, this.y);\n  }\n\n  /**\n   * Scales this coordinate by the given scale factor.\n   * @param {number} s The scale factor to use for both x and y dimensions.\n   * @return {!Coordinate} This coordinate after scaling.\n   */\n  scale(s) {\n    this.x *= s;\n    this.y *= s;\n    return this;\n  }\n\n  /**\n   * Translates this coordinate by the given offsets.\n   * respectively.\n   * @param {number} tx The value to translate x by.\n   * @param {number} ty The value to translate y by.\n   * @return {!Coordinate} This coordinate after translating.\n   */\n  translate(tx, ty) {\n    this.x += tx;\n    this.y += ty;\n    return this;\n  }\n\n  /**\n   * Compares coordinates for equality.\n   * @param {?Coordinate} a A Coordinate.\n   * @param {?Coordinate} b A Coordinate.\n   * @return {boolean} True iff the coordinates are equal, or if both are null.\n   */\n  static equals(a, b) {\n    if (a === b) {\n      return true;\n    }\n    if (!a || !b) {\n      return false;\n    }\n    return a.x === b.x && a.y === b.y;\n  }\n\n  /**\n   * Returns the distance between two coordinates.\n   * @param {!Coordinate} a A Coordinate.\n   * @param {!Coordinate} b A Coordinate.\n   * @return {number} The distance between `a` and `b`.\n   */\n  static distance(a, b) {\n    const dx = a.x - b.x;\n    const dy = a.y - b.y;\n    return Math.sqrt(dx * dx + dy * dy);\n  }\n\n  /**\n   * Returns the magnitude of a coordinate.\n   * @param {!Coordinate} a A Coordinate.\n   * @return {number} The distance between the origin and `a`.\n   */\n  static magnitude(a) {\n    return Math.sqrt(a.x * a.x + a.y * a.y);\n  }\n\n  /**\n   * Returns the difference between two coordinates as a new\n   * Coordinate.\n   * @param {!Coordinate|!SVGPoint} a An x/y coordinate.\n   * @param {!Coordinate|!SVGPoint} b An x/y coordinate.\n   * @return {!Coordinate} A Coordinate representing the difference\n   *     between `a` and `b`.\n   */\n  static difference(a, b) {\n    return new Coordinate(a.x - b.x, a.y - b.y);\n  }\n\n  /**\n   * Returns the sum of two coordinates as a new Coordinate.\n   * @param {!Coordinate|!SVGPoint} a An x/y coordinate.\n   * @param {!Coordinate|!SVGPoint} b An x/y coordinate.\n   * @return {!Coordinate} A Coordinate representing the sum of\n   *     the two coordinates.\n   */\n  static sum(a, b) {\n    return new Coordinate(a.x + b.x, a.y + b.y);\n  }\n};\n\nexports.Coordinate = Coordinate;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Utility methods for size calculation.\n * These methods are not specific to Blockly, and could be factored out into\n * a JavaScript framework such as Closure.\n */\n'use strict';\n\n/**\n * Utility methods for size calculation.\n * These methods are not specific to Blockly, and could be factored out into\n * a JavaScript framework such as Closure.\n * @class\n */\ngoog.module('Blockly.utils.Size');\n\n\n/**\n * Class for representing sizes consisting of a width and height.\n * @alias Blockly.utils.Size\n */\nconst Size = class {\n  /**\n   * @param {number} width Width.\n   * @param {number} height Height.\n   * @struct\n   */\n  constructor(width, height) {\n    /**\n     * Width\n     * @type {number}\n     */\n    this.width = width;\n\n    /**\n     * Height\n     * @type {number}\n     */\n    this.height = height;\n  }\n\n  /**\n   * Compares sizes for equality.\n   * @param {?Size} a A Size.\n   * @param {?Size} b A Size.\n   * @return {boolean} True iff the sizes have equal widths and equal\n   *     heights, or if both are null.\n   */\n  static equals(a, b) {\n    if (a === b) {\n      return true;\n    }\n    if (!a || !b) {\n      return false;\n    }\n    return a.width === b.width && a.height === b.height;\n  }\n};\n\nexports.Size = Size;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Utilities for element styles.\n * These methods are not specific to Blockly, and could be factored out into\n * a JavaScript framework such as Closure.\n */\n'use strict';\n\n/**\n * Utilities for element styles.\n * These methods are not specific to Blockly, and could be factored out into\n * a JavaScript framework such as Closure.\n * @namespace Blockly.utils.style\n */\ngoog.module('Blockly.utils.style');\n\nconst {Coordinate} = goog.require('Blockly.utils.Coordinate');\nconst {Size} = goog.require('Blockly.utils.Size');\n\n\n/**\n * Gets the height and width of an element.\n * Similar to Closure's goog.style.getSize\n * @param {!Element} element Element to get size of.\n * @return {!Size} Object with width/height properties.\n * @alias Blockly.utils.style.getSize\n */\nconst getSize = function(element) {\n  if (getStyle(element, 'display') !== 'none') {\n    return getSizeWithDisplay(element);\n  }\n\n  // Evaluate size with a temporary element.\n  const style = element.style;\n  const originalDisplay = style.display;\n  const originalVisibility = style.visibility;\n  const originalPosition = style.position;\n\n  style.visibility = 'hidden';\n  style.position = 'absolute';\n  style.display = 'inline';\n\n  const offsetWidth = /** @type {!HTMLElement} */ (element).offsetWidth;\n  const offsetHeight = /** @type {!HTMLElement} */ (element).offsetHeight;\n\n  style.display = originalDisplay;\n  style.position = originalPosition;\n  style.visibility = originalVisibility;\n\n  return new Size(offsetWidth, offsetHeight);\n};\nexports.getSize = getSize;\n\n/**\n * Gets the height and width of an element when the display is not none.\n * @param {!Element} element Element to get size of.\n * @return {!Size} Object with width/height properties.\n */\nconst getSizeWithDisplay = function(element) {\n  const offsetWidth = /** @type {!HTMLElement} */ (element).offsetWidth;\n  const offsetHeight = /** @type {!HTMLElement} */ (element).offsetHeight;\n  return new Size(offsetWidth, offsetHeight);\n};\n\n/**\n * Cross-browser pseudo get computed style. It returns the computed style where\n * available. If not available it tries the cascaded style value (IE\n * currentStyle) and in worst case the inline style value.  It shouldn't be\n * called directly, see http://wiki/Main/ComputedStyleVsCascadedStyle for\n * discussion.\n *\n * Copied from Closure's goog.style.getStyle_\n *\n * @param {!Element} element Element to get style of.\n * @param {string} style Property to get (must be camelCase, not CSS-style).\n * @return {string} Style value.\n */\nconst getStyle = function(element, style) {\n  return getComputedStyle(element, style) || getCascadedStyle(element, style) ||\n      (element.style && element.style[style]);\n};\n\n/**\n * Retrieves a computed style value of a node. It returns empty string if the\n * value cannot be computed (which will be the case in Internet Explorer) or\n * \"none\" if the property requested is an SVG one and it has not been\n * explicitly set (firefox and webkit).\n *\n * Copied from Closure's goog.style.getComputedStyle\n *\n * @param {!Element} element Element to get style of.\n * @param {string} property Property to get (camel-case).\n * @return {string} Style value.\n * @alias Blockly.utils.style.getComputedStyle\n */\nconst getComputedStyle = function(element, property) {\n  if (document.defaultView && document.defaultView.getComputedStyle) {\n    const styles = document.defaultView.getComputedStyle(element, null);\n    if (styles) {\n      // element.style[..] is undefined for browser specific styles\n      // as 'filter'.\n      return styles[property] || styles.getPropertyValue(property) || '';\n    }\n  }\n\n  return '';\n};\nexports.getComputedStyle = getComputedStyle;\n\n/**\n * Gets the cascaded style value of a node, or null if the value cannot be\n * computed (only Internet Explorer can do this).\n *\n * Copied from Closure's goog.style.getCascadedStyle\n *\n * @param {!Element} element Element to get style of.\n * @param {string} style Property to get (camel-case).\n * @return {string} Style value.\n * @alias Blockly.utils.style.getCascadedStyle\n */\nconst getCascadedStyle = function(element, style) {\n  return /** @type {string} */ (\n      element.currentStyle ? element.currentStyle[style] : null);\n};\nexports.getCascadedStyle = getCascadedStyle;\n\n/**\n * Returns a Coordinate object relative to the top-left of the HTML document.\n * Similar to Closure's goog.style.getPageOffset\n * @param {!Element} el Element to get the page offset for.\n * @return {!Coordinate} The page offset.\n * @alias Blockly.utils.style.getPageOffset\n */\nconst getPageOffset = function(el) {\n  const pos = new Coordinate(0, 0);\n  const box = el.getBoundingClientRect();\n  const documentElement = document.documentElement;\n  // Must add the scroll coordinates in to get the absolute page offset\n  // of element since getBoundingClientRect returns relative coordinates to\n  // the viewport.\n  const scrollCoord = new Coordinate(\n      window.pageXOffset || documentElement.scrollLeft,\n      window.pageYOffset || documentElement.scrollTop);\n  pos.x = box.left + scrollCoord.x;\n  pos.y = box.top + scrollCoord.y;\n\n  return pos;\n};\nexports.getPageOffset = getPageOffset;\n\n/**\n * Calculates the viewport coordinates relative to the document.\n * Similar to Closure's goog.style.getViewportPageOffset\n * @return {!Coordinate} The page offset of the viewport.\n * @alias Blockly.utils.style.getViewportPageOffset\n */\nconst getViewportPageOffset = function() {\n  const body = document.body;\n  const documentElement = document.documentElement;\n  const scrollLeft = body.scrollLeft || documentElement.scrollLeft;\n  const scrollTop = body.scrollTop || documentElement.scrollTop;\n  return new Coordinate(scrollLeft, scrollTop);\n};\nexports.getViewportPageOffset = getViewportPageOffset;\n\n/**\n * Shows or hides an element from the page. Hiding the element is done by\n * setting the display property to \"none\", removing the element from the\n * rendering hierarchy so it takes up no space. To show the element, the default\n * inherited display property is restored (defined either in stylesheets or by\n * the browser's default style rules).\n * Copied from Closure's goog.style.getViewportPageOffset\n *\n * @param {!Element} el Element to show or hide.\n * @param {*} isShown True to render the element in its default style,\n *     false to disable rendering the element.\n * @alias Blockly.utils.style.setElementShown\n */\nconst setElementShown = function(el, isShown) {\n  el.style.display = isShown ? '' : 'none';\n};\nexports.setElementShown = setElementShown;\n\n/**\n * Returns true if the element is using right to left (RTL) direction.\n * Copied from Closure's goog.style.isRightToLeft\n *\n * @param {!Element} el The element to test.\n * @return {boolean} True for right to left, false for left to right.\n * @alias Blockly.utils.style.isRightToLeft\n */\nconst isRightToLeft = function(el) {\n  return 'rtl' === getStyle(el, 'direction');\n};\nexports.isRightToLeft = isRightToLeft;\n\n/**\n * Gets the computed border widths (on all sides) in pixels\n * Copied from Closure's goog.style.getBorderBox\n * @param {!Element} element  The element to get the border widths for.\n * @return {!Object} The computed border widths.\n * @alias Blockly.utils.style.getBorderBox\n */\nconst getBorderBox = function(element) {\n  const left = getComputedStyle(element, 'borderLeftWidth');\n  const right = getComputedStyle(element, 'borderRightWidth');\n  const top = getComputedStyle(element, 'borderTopWidth');\n  const bottom = getComputedStyle(element, 'borderBottomWidth');\n\n  return {\n    top: parseFloat(top),\n    right: parseFloat(right),\n    bottom: parseFloat(bottom),\n    left: parseFloat(left),\n  };\n};\nexports.getBorderBox = getBorderBox;\n\n/**\n * Changes the scroll position of `container` with the minimum amount so\n * that the content and the borders of the given `element` become visible.\n * If the element is bigger than the container, its top left corner will be\n * aligned as close to the container's top left corner as possible.\n * Copied from Closure's goog.style.scrollIntoContainerView\n *\n * @param {!Element} element The element to make visible.\n * @param {!Element} container The container to scroll. If not set, then the\n *     document scroll element will be used.\n * @param {boolean=} opt_center Whether to center the element in the container.\n *     Defaults to false.\n * @alias Blockly.utils.style.scrollIntoContainerView\n */\nconst scrollIntoContainerView = function(element, container, opt_center) {\n  const offset = getContainerOffsetToScrollInto(element, container, opt_center);\n  container.scrollLeft = offset.x;\n  container.scrollTop = offset.y;\n};\nexports.scrollIntoContainerView = scrollIntoContainerView;\n\n/**\n * Calculate the scroll position of `container` with the minimum amount so\n * that the content and the borders of the given `element` become visible.\n * If the element is bigger than the container, its top left corner will be\n * aligned as close to the container's top left corner as possible.\n * Copied from Closure's goog.style.getContainerOffsetToScrollInto\n *\n * @param {!Element} element The element to make visible.\n * @param {!Element} container The container to scroll. If not set, then the\n *     document scroll element will be used.\n * @param {boolean=} opt_center Whether to center the element in the container.\n *     Defaults to false.\n * @return {!Coordinate} The new scroll position of the container,\n *     in form of goog.math.Coordinate(scrollLeft, scrollTop).\n * @alias Blockly.utils.style.getContainerOffsetToScrollInto\n */\nconst getContainerOffsetToScrollInto = function(\n    element, container, opt_center) {\n  // Absolute position of the element's border's top left corner.\n  const elementPos = getPageOffset(element);\n  // Absolute position of the container's border's top left corner.\n  const containerPos = getPageOffset(container);\n  const containerBorder = getBorderBox(container);\n  // Relative pos. of the element's border box to the container's content box.\n  const relX = elementPos.x - containerPos.x - containerBorder.left;\n  const relY = elementPos.y - containerPos.y - containerBorder.top;\n  // How much the element can move in the container, i.e. the difference between\n  // the element's bottom-right-most and top-left-most position where it's\n  // fully visible.\n  const elementSize = getSizeWithDisplay(element);\n  const spaceX = container.clientWidth - elementSize.width;\n  const spaceY = container.clientHeight - elementSize.height;\n  let scrollLeft = container.scrollLeft;\n  let scrollTop = container.scrollTop;\n  if (opt_center) {\n    // All browsers round non-integer scroll positions down.\n    scrollLeft += relX - spaceX / 2;\n    scrollTop += relY - spaceY / 2;\n  } else {\n    // This formula was designed to give the correct scroll values in the\n    // following cases:\n    // - element is higher than container (spaceY < 0) => scroll down by relY\n    // - element is not higher that container (spaceY >= 0):\n    //   - it is above container (relY < 0) => scroll up by abs(relY)\n    //   - it is below container (relY > spaceY) => scroll down by relY - spaceY\n    //   - it is in the container => don't scroll\n    scrollLeft += Math.min(relX, Math.max(relX - spaceX, 0));\n    scrollTop += Math.min(relY, Math.max(relY - spaceY, 0));\n  }\n  return new Coordinate(scrollLeft, scrollTop);\n};\nexports.getContainerOffsetToScrollInto = getContainerOffsetToScrollInto;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Utility methods for rectangle manipulation.\n * These methods are not specific to Blockly, and could be factored out into\n * a JavaScript framework such as Closure.\n */\n'use strict';\n\n/**\n * Utility methods for rectangle manipulation.\n * These methods are not specific to Blockly, and could be factored out into\n * a JavaScript framework such as Closure.\n * @class\n */\ngoog.module('Blockly.utils.Rect');\n\n\n/**\n * Class for representing rectangular regions.\n * @alias Blockly.utils.Rect\n */\nconst Rect = class {\n  /**\n   * @param {number} top Top.\n   * @param {number} bottom Bottom.\n   * @param {number} left Left.\n   * @param {number} right Right.\n   * @struct\n   */\n  constructor(top, bottom, left, right) {\n    /** @type {number} */\n    this.top = top;\n\n    /** @type {number} */\n    this.bottom = bottom;\n\n    /** @type {number} */\n    this.left = left;\n\n    /** @type {number} */\n    this.right = right;\n  }\n\n  /**\n   * Tests whether this rectangle contains a x/y coordinate.\n   *\n   * @param {number} x The x coordinate to test for containment.\n   * @param {number} y The y coordinate to test for containment.\n   * @return {boolean} Whether this rectangle contains given coordinate.\n   */\n  contains(x, y) {\n    return x >= this.left && x <= this.right && y >= this.top &&\n        y <= this.bottom;\n  }\n\n  /**\n   * Tests whether this rectangle intersects the provided rectangle.\n   * Assumes that the coordinate system increases going down and left.\n   * @param {!Rect} other The other rectangle to check for\n   *    intersection with.\n   * @return {boolean} Whether this rectangle intersects the provided rectangle.\n   */\n  intersects(other) {\n    return !(\n        this.left > other.right || this.right < other.left ||\n        this.top > other.bottom || this.bottom < other.top);\n  }\n};\n\nexports.Rect = Rect;\n","/**\n * @license\n * Copyright 2016 Massachusetts Institute of Technology\n * All rights reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview A div that floats on top of the workspace, for drop-down menus.\n * The drop-down can be kept inside the workspace, animate in/out, etc.\n */\n\n'use strict';\n\n/**\n * A div that floats on top of the workspace, for drop-down menus.\n * @class\n */\ngoog.module('Blockly.dropDownDiv');\n\nconst common = goog.require('Blockly.common');\nconst dom = goog.require('Blockly.utils.dom');\nconst math = goog.require('Blockly.utils.math');\nconst style = goog.require('Blockly.utils.style');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockSvg} = goog.requireType('Blockly.BlockSvg');\n/* eslint-disable-next-line no-unused-vars */\nconst {Field} = goog.requireType('Blockly.Field');\nconst {Rect} = goog.require('Blockly.utils.Rect');\n/* eslint-disable-next-line no-unused-vars */\nconst {Size} = goog.requireType('Blockly.utils.Size');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceSvg} = goog.requireType('Blockly.WorkspaceSvg');\n\n\n/**\n * Arrow size in px. Should match the value in CSS\n * (need to position pre-render).\n * @type {number}\n * @const\n */\nconst ARROW_SIZE = 16;\nexports.ARROW_SIZE = ARROW_SIZE;\n\n/**\n * Drop-down border size in px. Should match the value in CSS (need to position\n * the arrow).\n * @type {number}\n * @const\n */\nconst BORDER_SIZE = 1;\nexports.BORDER_SIZE = BORDER_SIZE;\n\n/**\n * Amount the arrow must be kept away from the edges of the main drop-down div,\n * in px.\n * @type {number}\n * @const\n */\nconst ARROW_HORIZONTAL_PADDING = 12;\nexports.ARROW_HORIZONTAL_PADDING = ARROW_HORIZONTAL_PADDING;\n\n/**\n * Amount drop-downs should be padded away from the source, in px.\n * @type {number}\n * @const\n */\nconst PADDING_Y = 16;\nexports.PADDING_Y = PADDING_Y;\n\n/**\n * Length of animations in seconds.\n * @type {number}\n * @const\n */\nconst ANIMATION_TIME = 0.25;\nexports.ANIMATION_TIME = ANIMATION_TIME;\n\n/**\n * Timer for animation out, to be cleared if we need to immediately hide\n * without disrupting new shows.\n * @type {?number}\n */\nlet animateOutTimer = null;\n\n/**\n * Callback for when the drop-down is hidden.\n * @type {?Function}\n */\nlet onHide = null;\n\n/**\n * A class name representing the current owner's workspace renderer.\n * @type {string}\n */\nlet renderedClassName = '';\n\n/**\n * A class name representing the current owner's workspace theme.\n * @type {string}\n */\nlet themeClassName = '';\n\n/**\n * The content element.\n * @type {!HTMLDivElement}\n */\nlet div;\n\n/**\n * The content element.\n * @type {!HTMLDivElement}\n */\nlet content;\n\n/**\n * The arrow element.\n * @type {!HTMLDivElement}\n */\nlet arrow;\n\n/**\n * Drop-downs will appear within the bounds of this element if possible.\n * Set in setBoundsElement.\n * @type {?Element}\n */\nlet boundsElement = null;\n\n/**\n * The object currently using the drop-down.\n * @type {?Object}\n */\nlet owner = null;\n\n/**\n * Whether the dropdown was positioned to a field or the source block.\n * @type {?boolean}\n */\nlet positionToField = null;\n\n/**\n * Dropdown bounds info object used to encapsulate sizing information about a\n * bounding element (bounding box and width/height).\n * @typedef {{\n *        top:number,\n *        left:number,\n *        bottom:number,\n *        right:number,\n *        width:number,\n *        height:number\n * }}\n */\nlet BoundsInfo;\nexports.BoundsInfo = BoundsInfo;\n\n/**\n * Dropdown position metrics.\n * @typedef {{\n *        initialX:number,\n *        initialY:number,\n *        finalX:number,\n *        finalY:number,\n *        arrowX:?number,\n *        arrowY:?number,\n *        arrowAtTop:?boolean,\n *        arrowVisible:boolean\n * }}\n */\nlet PositionMetrics;\nexports.PositionMetrics = PositionMetrics;\n\n/**\n * Create and insert the DOM element for this div.\n * @package\n */\nconst createDom = function() {\n  if (div) {\n    return;  // Already created.\n  }\n  div = /** @type {!HTMLDivElement} */ (document.createElement('div'));\n  div.className = 'blocklyDropDownDiv';\n  const parentDiv = common.getParentContainer() || document.body;\n  parentDiv.appendChild(div);\n\n  content = /** @type {!HTMLDivElement} */ (document.createElement('div'));\n  content.className = 'blocklyDropDownContent';\n  div.appendChild(content);\n\n  arrow = /** @type {!HTMLDivElement} */ (document.createElement('div'));\n  arrow.className = 'blocklyDropDownArrow';\n  div.appendChild(arrow);\n\n  div.style.opacity = 0;\n\n  // Transition animation for transform: translate() and opacity.\n  div.style.transition = 'transform ' + ANIMATION_TIME + 's, ' +\n      'opacity ' + ANIMATION_TIME + 's';\n\n  // Handle focusin/out events to add a visual indicator when\n  // a child is focused or blurred.\n  div.addEventListener('focusin', function() {\n    dom.addClass(div, 'blocklyFocused');\n  });\n  div.addEventListener('focusout', function() {\n    dom.removeClass(div, 'blocklyFocused');\n  });\n};\nexports.createDom = createDom;\n\n/**\n * Set an element to maintain bounds within. Drop-downs will appear\n * within the box of this element if possible.\n * @param {?Element} boundsElem Element to bind drop-down to.\n */\nconst setBoundsElement = function(boundsElem) {\n  boundsElement = boundsElem;\n};\nexports.setBoundsElement = setBoundsElement;\n\n/**\n * Provide the div for inserting content into the drop-down.\n * @return {!Element} Div to populate with content.\n */\nconst getContentDiv = function() {\n  return content;\n};\nexports.getContentDiv = getContentDiv;\n\n/**\n * Clear the content of the drop-down.\n */\nconst clearContent = function() {\n  content.textContent = '';\n  content.style.width = '';\n};\nexports.clearContent = clearContent;\n\n/**\n * Set the colour for the drop-down.\n * @param {string} backgroundColour Any CSS colour for the background.\n * @param {string} borderColour Any CSS colour for the border.\n */\nconst setColour = function(backgroundColour, borderColour) {\n  div.style.backgroundColor = backgroundColour;\n  div.style.borderColor = borderColour;\n};\nexports.setColour = setColour;\n\n/**\n * Shortcut to show and place the drop-down with positioning determined\n * by a particular block. The primary position will be below the block,\n * and the secondary position above the block. Drop-down will be\n * constrained to the block's workspace.\n * @param {!Field} field The field showing the drop-down.\n * @param {!BlockSvg} block Block to position the drop-down around.\n * @param {Function=} opt_onHide Optional callback for when the drop-down is\n *   hidden.\n * @param {number=} opt_secondaryYOffset Optional Y offset for above-block\n *   positioning.\n * @return {boolean} True if the menu rendered below block; false if above.\n */\nconst showPositionedByBlock = function(\n    field, block, opt_onHide, opt_secondaryYOffset) {\n  return showPositionedByRect(\n      getScaledBboxOfBlock(block), field, opt_onHide, opt_secondaryYOffset);\n};\nexports.showPositionedByBlock = showPositionedByBlock;\n\n/**\n * Shortcut to show and place the drop-down with positioning determined\n * by a particular field. The primary position will be below the field,\n * and the secondary position above the field. Drop-down will be\n * constrained to the block's workspace.\n * @param {!Field} field The field to position the dropdown against.\n * @param {Function=} opt_onHide Optional callback for when the drop-down is\n *   hidden.\n * @param {number=} opt_secondaryYOffset Optional Y offset for above-block\n *   positioning.\n * @return {boolean} True if the menu rendered below block; false if above.\n */\nconst showPositionedByField = function(\n    field, opt_onHide, opt_secondaryYOffset) {\n  positionToField = true;\n  return showPositionedByRect(\n      getScaledBboxOfField(field), field, opt_onHide, opt_secondaryYOffset);\n};\nexports.showPositionedByField = showPositionedByField;\n\n/**\n * Get the scaled bounding box of a block.\n * @param {!BlockSvg} block The block.\n * @return {!Rect} The scaled bounding box of the block.\n */\nconst getScaledBboxOfBlock = function(block) {\n  const blockSvg = block.getSvgRoot();\n  const bBox = blockSvg.getBBox();\n  const scale = block.workspace.scale;\n  const scaledHeight = bBox.height * scale;\n  const scaledWidth = bBox.width * scale;\n  const xy = style.getPageOffset(blockSvg);\n  return new Rect(xy.y, xy.y + scaledHeight, xy.x, xy.x + scaledWidth);\n};\n\n/**\n * Get the scaled bounding box of a field.\n * @param {!Field} field The field.\n * @return {!Rect} The scaled bounding box of the field.\n */\nconst getScaledBboxOfField = function(field) {\n  const bBox = field.getScaledBBox();\n  return new Rect(bBox.top, bBox.bottom, bBox.left, bBox.right);\n};\n\n/**\n * Helper method to show and place the drop-down with positioning determined\n * by a scaled bounding box.  The primary position will be below the rect,\n * and the secondary position above the rect. Drop-down will be constrained to\n * the block's workspace.\n * @param {!Rect} bBox The scaled bounding box.\n * @param {!Field} field The field to position the dropdown against.\n * @param {Function=} opt_onHide Optional callback for when the drop-down is\n *   hidden.\n * @param {number=} opt_secondaryYOffset Optional Y offset for above-block\n *   positioning.\n * @return {boolean} True if the menu rendered below block; false if above.\n */\nconst showPositionedByRect = function(\n    bBox, field, opt_onHide, opt_secondaryYOffset) {\n  // If we can fit it, render below the block.\n  const primaryX = bBox.left + (bBox.right - bBox.left) / 2;\n  const primaryY = bBox.bottom;\n  // If we can't fit it, render above the entire parent block.\n  const secondaryX = primaryX;\n  let secondaryY = bBox.top;\n  if (opt_secondaryYOffset) {\n    secondaryY += opt_secondaryYOffset;\n  }\n  const sourceBlock = /** @type {!BlockSvg} */ (field.getSourceBlock());\n  // Set bounds to main workspace; show the drop-down.\n  let workspace = sourceBlock.workspace;\n  while (workspace.options.parentWorkspace) {\n    workspace =\n        /** @type {!WorkspaceSvg} */ (workspace.options.parentWorkspace);\n  }\n  setBoundsElement(\n      /** @type {?Element} */ (workspace.getParentSvg().parentNode));\n  return show(\n      field, sourceBlock.RTL, primaryX, primaryY, secondaryX, secondaryY,\n      opt_onHide);\n};\n\n/**\n * Show and place the drop-down.\n * The drop-down is placed with an absolute \"origin point\" (x, y) - i.e.,\n * the arrow will point at this origin and box will positioned below or above\n * it.  If we can maintain the container bounds at the primary point, the arrow\n * will point there, and the container will be positioned below it.\n * If we can't maintain the container bounds at the primary point, fall-back to\n * the secondary point and position above.\n * @param {?Object} newOwner The object showing the drop-down\n * @param {boolean} rtl Right-to-left (true) or left-to-right (false).\n * @param {number} primaryX Desired origin point x, in absolute px.\n * @param {number} primaryY Desired origin point y, in absolute px.\n * @param {number} secondaryX Secondary/alternative origin point x, in absolute\n *     px.\n * @param {number} secondaryY Secondary/alternative origin point y, in absolute\n *     px.\n * @param {Function=} opt_onHide Optional callback for when the drop-down is\n *     hidden.\n * @return {boolean} True if the menu rendered at the primary origin point.\n * @package\n */\nconst show = function(\n    newOwner, rtl, primaryX, primaryY, secondaryX, secondaryY, opt_onHide) {\n  owner = newOwner;\n  onHide = opt_onHide || null;\n  // Set direction.\n  div.style.direction = rtl ? 'rtl' : 'ltr';\n\n  const mainWorkspace =\n      /** @type {!WorkspaceSvg} */ (common.getMainWorkspace());\n  renderedClassName = mainWorkspace.getRenderer().getClassName();\n  themeClassName = mainWorkspace.getTheme().getClassName();\n  dom.addClass(div, renderedClassName);\n  dom.addClass(div, themeClassName);\n\n  // When we change `translate` multiple times in close succession,\n  // Chrome may choose to wait and apply them all at once.\n  // Since we want the translation to initial X, Y to be immediate,\n  // and the translation to final X, Y to be animated,\n  // we saw problems where both would be applied after animation was turned on,\n  // making the dropdown appear to fly in from (0, 0).\n  // Using both `left`, `top` for the initial translation and then `translate`\n  // for the animated transition to final X, Y is a workaround.\n\n  return positionInternal(primaryX, primaryY, secondaryX, secondaryY);\n};\nexports.show = show;\n\nconst internal = {};\n\n/**\n * Get sizing info about the bounding element.\n * @return {!BoundsInfo} An object containing size\n *     information about the bounding element (bounding box and width/height).\n */\ninternal.getBoundsInfo = function() {\n  const boundPosition = style.getPageOffset(\n      /** @type {!Element} */ (boundsElement));\n  const boundSize = style.getSize(\n      /** @type {!Element} */ (boundsElement));\n\n  return {\n    left: boundPosition.x,\n    right: boundPosition.x + boundSize.width,\n    top: boundPosition.y,\n    bottom: boundPosition.y + boundSize.height,\n    width: boundSize.width,\n    height: boundSize.height,\n  };\n};\n\n/**\n * Helper to position the drop-down and the arrow, maintaining bounds.\n * See explanation of origin points in show.\n * @param {number} primaryX Desired origin point x, in absolute px.\n * @param {number} primaryY Desired origin point y, in absolute px.\n * @param {number} secondaryX Secondary/alternative origin point x,\n *     in absolute px.\n * @param {number} secondaryY Secondary/alternative origin point y,\n *     in absolute px.\n * @return {!PositionMetrics} Various final metrics,\n *     including rendered positions for drop-down and arrow.\n */\ninternal.getPositionMetrics = function(\n    primaryX, primaryY, secondaryX, secondaryY) {\n  const boundsInfo = internal.getBoundsInfo();\n  const divSize = style.getSize(\n      /** @type {!Element} */ (div));\n\n  // Can we fit in-bounds below the target?\n  if (primaryY + divSize.height < boundsInfo.bottom) {\n    return getPositionBelowMetrics(primaryX, primaryY, boundsInfo, divSize);\n  }\n  // Can we fit in-bounds above the target?\n  if (secondaryY - divSize.height > boundsInfo.top) {\n    return getPositionAboveMetrics(secondaryX, secondaryY, boundsInfo, divSize);\n  }\n  // Can we fit outside the workspace bounds (but inside the window) below?\n  if (primaryY + divSize.height < document.documentElement.clientHeight) {\n    return getPositionBelowMetrics(primaryX, primaryY, boundsInfo, divSize);\n  }\n  // Can we fit outside the workspace bounds (but inside the window) above?\n  if (secondaryY - divSize.height > document.documentElement.clientTop) {\n    return getPositionAboveMetrics(secondaryX, secondaryY, boundsInfo, divSize);\n  }\n\n  // Last resort, render at top of page.\n  return getPositionTopOfPageMetrics(primaryX, boundsInfo, divSize);\n};\n\n/**\n * Get the metrics for positioning the div below the source.\n * @param {number} primaryX Desired origin point x, in absolute px.\n * @param {number} primaryY Desired origin point y, in absolute px.\n * @param {!BoundsInfo} boundsInfo An object containing size\n *     information about the bounding element (bounding box and width/height).\n * @param {!Size} divSize An object containing information about\n *     the size of the DropDownDiv (width & height).\n * @return {!PositionMetrics} Various final metrics,\n *     including rendered positions for drop-down and arrow.\n */\nconst getPositionBelowMetrics = function(\n    primaryX, primaryY, boundsInfo, divSize) {\n  const xCoords =\n      getPositionX(primaryX, boundsInfo.left, boundsInfo.right, divSize.width);\n\n  const arrowY = -(ARROW_SIZE / 2 + BORDER_SIZE);\n  const finalY = primaryY + PADDING_Y;\n\n  return {\n    initialX: xCoords.divX,\n    initialY: primaryY,\n    finalX: xCoords.divX,  // X position remains constant during animation.\n    finalY: finalY,\n    arrowX: xCoords.arrowX,\n    arrowY: arrowY,\n    arrowAtTop: true,\n    arrowVisible: true,\n  };\n};\n\n/**\n * Get the metrics for positioning the div above the source.\n * @param {number} secondaryX Secondary/alternative origin point x,\n *     in absolute px.\n * @param {number} secondaryY Secondary/alternative origin point y,\n *     in absolute px.\n * @param {!BoundsInfo} boundsInfo An object containing size\n *     information about the bounding element (bounding box and width/height).\n * @param {!Size} divSize An object containing information about\n *     the size of the DropDownDiv (width & height).\n * @return {!PositionMetrics} Various final metrics,\n *     including rendered positions for drop-down and arrow.\n */\nconst getPositionAboveMetrics = function(\n    secondaryX, secondaryY, boundsInfo, divSize) {\n  const xCoords = getPositionX(\n      secondaryX, boundsInfo.left, boundsInfo.right, divSize.width);\n\n  const arrowY = divSize.height - (BORDER_SIZE * 2) - (ARROW_SIZE / 2);\n  const finalY = secondaryY - divSize.height - PADDING_Y;\n  const initialY = secondaryY - divSize.height;  // No padding on Y.\n\n  return {\n    initialX: xCoords.divX,\n    initialY: initialY,\n    finalX: xCoords.divX,  // X position remains constant during animation.\n    finalY: finalY,\n    arrowX: xCoords.arrowX,\n    arrowY: arrowY,\n    arrowAtTop: false,\n    arrowVisible: true,\n  };\n};\n\n/**\n * Get the metrics for positioning the div at the top of the page.\n * @param {number} sourceX Desired origin point x, in absolute px.\n * @param {!BoundsInfo} boundsInfo An object containing size\n *     information about the bounding element (bounding box and width/height).\n * @param {!Size} divSize An object containing information about\n *     the size of the DropDownDiv (width & height).\n * @return {!PositionMetrics} Various final metrics,\n *     including rendered positions for drop-down and arrow.\n */\nconst getPositionTopOfPageMetrics = function(sourceX, boundsInfo, divSize) {\n  const xCoords =\n      getPositionX(sourceX, boundsInfo.left, boundsInfo.right, divSize.width);\n\n  // No need to provide arrow-specific information because it won't be visible.\n  return {\n    initialX: xCoords.divX,\n    initialY: 0,\n    finalX: xCoords.divX,  // X position remains constant during animation.\n    finalY: 0,             // Y position remains constant during animation.\n    arrowAtTop: null,\n    arrowX: null,\n    arrowY: null,\n    arrowVisible: false,\n  };\n};\n\n/**\n * Get the x positions for the left side of the DropDownDiv and the arrow,\n * accounting for the bounds of the workspace.\n * @param {number} sourceX Desired origin point x, in absolute px.\n * @param {number} boundsLeft The left edge of the bounding element, in\n *    absolute px.\n * @param {number} boundsRight The right edge of the bounding element, in\n *    absolute px.\n * @param {number} divWidth The width of the div in px.\n * @return {{divX: number, arrowX: number}} An object containing metrics for\n *    the x positions of the left side of the DropDownDiv and the arrow.\n * @package\n */\nconst getPositionX = function(sourceX, boundsLeft, boundsRight, divWidth) {\n  let divX = sourceX;\n  // Offset the topLeft coord so that the dropdowndiv is centered.\n  divX -= divWidth / 2;\n  // Fit the dropdowndiv within the bounds of the workspace.\n  divX = math.clamp(boundsLeft, divX, boundsRight - divWidth);\n\n  let arrowX = sourceX;\n  // Offset the arrow coord so that the arrow is centered.\n  arrowX -= ARROW_SIZE / 2;\n  // Convert the arrow position to be relative to the top left of the div.\n  let relativeArrowX = arrowX - divX;\n  const horizPadding = ARROW_HORIZONTAL_PADDING;\n  // Clamp the arrow position so that it stays attached to the dropdowndiv.\n  relativeArrowX = math.clamp(\n      horizPadding, relativeArrowX, divWidth - horizPadding - ARROW_SIZE);\n\n  return {arrowX: relativeArrowX, divX: divX};\n};\nexports.getPositionX = getPositionX;\n\n/**\n * Is the container visible?\n * @return {boolean} True if visible.\n */\nconst isVisible = function() {\n  return !!owner;\n};\nexports.isVisible = isVisible;\n\n/**\n * Hide the menu only if it is owned by the provided object.\n * @param {?Object} divOwner Object which must be owning the drop-down to hide.\n * @param {boolean=} opt_withoutAnimation True if we should hide the dropdown\n *     without animating.\n * @return {boolean} True if hidden.\n */\nconst hideIfOwner = function(divOwner, opt_withoutAnimation) {\n  if (owner === divOwner) {\n    if (opt_withoutAnimation) {\n      hideWithoutAnimation();\n    } else {\n      hide();\n    }\n    return true;\n  }\n  return false;\n};\nexports.hideIfOwner = hideIfOwner;\n\n/**\n * Hide the menu, triggering animation.\n */\nconst hide = function() {\n  // Start the animation by setting the translation and fading out.\n  // Reset to (initialX, initialY) - i.e., no translation.\n  div.style.transform = 'translate(0, 0)';\n  div.style.opacity = 0;\n  // Finish animation - reset all values to default.\n  animateOutTimer = setTimeout(function() {\n    hideWithoutAnimation();\n  }, ANIMATION_TIME * 1000);\n  if (onHide) {\n    onHide();\n    onHide = null;\n  }\n};\nexports.hide = hide;\n\n/**\n * Hide the menu, without animation.\n */\nconst hideWithoutAnimation = function() {\n  if (!isVisible()) {\n    return;\n  }\n  if (animateOutTimer) {\n    clearTimeout(animateOutTimer);\n  }\n\n  // Reset style properties in case this gets called directly\n  // instead of hide() - see discussion on #2551.\n  div.style.transform = '';\n  div.style.left = '';\n  div.style.top = '';\n  div.style.opacity = 0;\n  div.style.display = 'none';\n  div.style.backgroundColor = '';\n  div.style.borderColor = '';\n\n  if (onHide) {\n    onHide();\n    onHide = null;\n  }\n  clearContent();\n  owner = null;\n\n  if (renderedClassName) {\n    dom.removeClass(div, renderedClassName);\n    renderedClassName = '';\n  }\n  if (themeClassName) {\n    dom.removeClass(div, themeClassName);\n    themeClassName = '';\n  }\n  (/** @type {!WorkspaceSvg} */ (common.getMainWorkspace())).markFocused();\n};\nexports.hideWithoutAnimation = hideWithoutAnimation;\n\n/**\n * Set the dropdown div's position.\n * @param {number} primaryX Desired origin point x, in absolute px.\n * @param {number} primaryY Desired origin point y, in absolute px.\n * @param {number} secondaryX Secondary/alternative origin point x,\n *    in absolute px.\n * @param {number} secondaryY Secondary/alternative origin point y,\n *    in absolute px.\n * @return {boolean} True if the menu rendered at the primary origin point.\n */\nconst positionInternal = function(primaryX, primaryY, secondaryX, secondaryY) {\n  const metrics =\n      internal.getPositionMetrics(primaryX, primaryY, secondaryX, secondaryY);\n\n  // Update arrow CSS.\n  if (metrics.arrowVisible) {\n    arrow.style.display = '';\n    arrow.style.transform = 'translate(' + metrics.arrowX + 'px,' +\n        metrics.arrowY + 'px) rotate(45deg)';\n    arrow.setAttribute(\n        'class',\n        metrics.arrowAtTop ? 'blocklyDropDownArrow blocklyArrowTop' :\n                             'blocklyDropDownArrow blocklyArrowBottom');\n  } else {\n    arrow.style.display = 'none';\n  }\n\n  const initialX = Math.floor(metrics.initialX);\n  const initialY = Math.floor(metrics.initialY);\n  const finalX = Math.floor(metrics.finalX);\n  const finalY = Math.floor(metrics.finalY);\n\n  // First apply initial translation.\n  div.style.left = initialX + 'px';\n  div.style.top = initialY + 'px';\n\n  // Show the div.\n  div.style.display = 'block';\n  div.style.opacity = 1;\n  // Add final translate, animated through `transition`.\n  // Coordinates are relative to (initialX, initialY),\n  // where the drop-down is absolutely positioned.\n  const dx = finalX - initialX;\n  const dy = finalY - initialY;\n  div.style.transform = 'translate(' + dx + 'px,' + dy + 'px)';\n\n  return !!metrics.arrowAtTop;\n};\n\n/**\n * Repositions the dropdownDiv on window resize. If it doesn't know how to\n * calculate the new position, it will just hide it instead.\n * @package\n */\nconst repositionForWindowResize = function() {\n  // This condition mainly catches the dropdown div when it is being used as a\n  // dropdown.  It is important not to close it in this case because on Android,\n  // when a field is focused, the soft keyboard opens triggering a window resize\n  // event and we want the dropdown div to stick around so users can type into\n  // it.\n  if (owner) {\n    const field = /** @type {!Field} */ (owner);\n    const block = /** @type {!BlockSvg} */ (field.getSourceBlock());\n    const bBox = positionToField ? getScaledBboxOfField(field) :\n                                   getScaledBboxOfBlock(block);\n    // If we can fit it, render below the block.\n    const primaryX = bBox.left + (bBox.right - bBox.left) / 2;\n    const primaryY = bBox.bottom;\n    // If we can't fit it, render above the entire parent block.\n    const secondaryX = primaryX;\n    const secondaryY = bBox.top;\n    positionInternal(primaryX, primaryY, secondaryX, secondaryY);\n  } else {\n    hide();\n  }\n};\nexports.repositionForWindowResize = repositionForWindowResize;\n\nexports.TEST_ONLY = internal;\n","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Utility methods for SVG math.\n */\n'use strict';\n\n/**\n * Utility methods realted to figuring out positions of SVG elements.\n * @namespace Blockly.utils.svgMath\n */\ngoog.module('Blockly.utils.svgMath');\n\nconst deprecation = goog.require('Blockly.utils.deprecation');\nconst global = goog.require('Blockly.utils.global');\nconst style = goog.require('Blockly.utils.style');\nconst userAgent = goog.require('Blockly.utils.userAgent');\nconst {Coordinate} = goog.require('Blockly.utils.Coordinate');\nconst {Rect} = goog.require('Blockly.utils.Rect');\nconst {Size} = goog.require('Blockly.utils.Size');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceSvg} = goog.requireType('Blockly.WorkspaceSvg');\n\n\n/**\n * Static regex to pull the x,y values out of an SVG translate() directive.\n * Note that Firefox and IE (9,10) return 'translate(12)' instead of\n * 'translate(12, 0)'.\n * Note that IE (9,10) returns 'translate(16 8)' instead of 'translate(16, 8)'.\n * Note that IE has been reported to return scientific notation (0.123456e-42).\n * @type {!RegExp}\n */\nconst XY_REGEX = /translate\\(\\s*([-+\\d.e]+)([ ,]\\s*([-+\\d.e]+)\\s*)?/;\n\n/**\n * Static regex to pull the x,y values out of a translate() or translate3d()\n * style property.\n * Accounts for same exceptions as XY_REGEX.\n * @type {!RegExp}\n */\nconst XY_STYLE_REGEX =\n    /transform:\\s*translate(?:3d)?\\(\\s*([-+\\d.e]+)\\s*px([ ,]\\s*([-+\\d.e]+)\\s*px)?/;\n\n\n/**\n * Return the coordinates of the top-left corner of this element relative to\n * its parent.  Only for SVG elements and children (e.g. rect, g, path).\n * @param {!Element} element SVG element to find the coordinates of.\n * @return {!Coordinate} Object with .x and .y properties.\n * @alias Blockly.utils.svgMath.getRelativeXY\n */\nconst getRelativeXY = function(element) {\n  const xy = new Coordinate(0, 0);\n  // First, check for x and y attributes.\n  const x = element.getAttribute('x');\n  if (x) {\n    xy.x = parseInt(x, 10);\n  }\n  const y = element.getAttribute('y');\n  if (y) {\n    xy.y = parseInt(y, 10);\n  }\n  // Second, check for transform=\"translate(...)\" attribute.\n  const transform = element.getAttribute('transform');\n  const r = transform && transform.match(XY_REGEX);\n  if (r) {\n    xy.x += Number(r[1]);\n    if (r[3]) {\n      xy.y += Number(r[3]);\n    }\n  }\n\n  // Then check for style = transform: translate(...) or translate3d(...)\n  const style = element.getAttribute('style');\n  if (style && style.indexOf('translate') > -1) {\n    const styleComponents = style.match(XY_STYLE_REGEX);\n    if (styleComponents) {\n      xy.x += Number(styleComponents[1]);\n      if (styleComponents[3]) {\n        xy.y += Number(styleComponents[3]);\n      }\n    }\n  }\n  return xy;\n};\nexports.getRelativeXY = getRelativeXY;\n\n/**\n * Return the coordinates of the top-left corner of this element relative to\n * the div Blockly was injected into.\n * @param {!Element} element SVG element to find the coordinates of. If this is\n *     not a child of the div Blockly was injected into, the behaviour is\n *     undefined.\n * @return {!Coordinate} Object with .x and .y properties.\n * @alias Blockly.utils.svgMath.getInjectionDivXY\n */\nconst getInjectionDivXY = function(element) {\n  let x = 0;\n  let y = 0;\n  while (element) {\n    const xy = getRelativeXY(element);\n    x = x + xy.x;\n    y = y + xy.y;\n    const classes = element.getAttribute('class') || '';\n    if ((' ' + classes + ' ').indexOf(' injectionDiv ') !== -1) {\n      break;\n    }\n    element = /** @type {!Element} */ (element.parentNode);\n  }\n  return new Coordinate(x, y);\n};\nexports.getInjectionDivXY = getInjectionDivXY;\n\n/**\n * Check if 3D transforms are supported by adding an element\n * and attempting to set the property.\n * @return {boolean} True if 3D transforms are supported.\n * @alias Blockly.utils.svgMath.is3dSupported\n */\nconst is3dSupported = function() {\n  if (is3dSupported.cached_ !== undefined) {\n    return is3dSupported.cached_;\n  }\n  // CC-BY-SA Lorenzo Polidori\n  // stackoverflow.com/questions/5661671/detecting-transform-translate3d-support\n  if (!global.globalThis['getComputedStyle']) {\n    return false;\n  }\n\n  const el = document.createElement('p');\n  let has3d = 'none';\n  const transforms = {\n    'webkitTransform': '-webkit-transform',\n    'OTransform': '-o-transform',\n    'msTransform': '-ms-transform',\n    'MozTransform': '-moz-transform',\n    'transform': 'transform',\n  };\n\n  // Add it to the body to get the computed style.\n  document.body.insertBefore(el, null);\n\n  for (const t in transforms) {\n    if (el.style[t] !== undefined) {\n      el.style[t] = 'translate3d(1px,1px,1px)';\n      const computedStyle = global.globalThis['getComputedStyle'](el);\n      if (!computedStyle) {\n        // getComputedStyle in Firefox returns null when Blockly is loaded\n        // inside an iframe with display: none.  Returning false and not\n        // caching is3dSupported means we try again later.  This is most likely\n        // when users are interacting with blocks which should mean Blockly is\n        // visible again.\n        // See https://bugzilla.mozilla.org/show_bug.cgi?id=548397\n        document.body.removeChild(el);\n        return false;\n      }\n      has3d = computedStyle.getPropertyValue(transforms[t]);\n    }\n  }\n  document.body.removeChild(el);\n  is3dSupported.cached_ = has3d !== 'none';\n  return is3dSupported.cached_;\n};\nexports.is3dSupported = is3dSupported;\n\n/**\n * Get the position of the current viewport in window coordinates.  This takes\n * scroll into account.\n * @return {!Rect} An object containing window width, height, and\n *     scroll position in window coordinates.\n * @alias Blockly.utils.svgMath.getViewportBBox\n * @package\n */\nconst getViewportBBox = function() {\n  // Pixels, in window coordinates.\n  const scrollOffset = style.getViewportPageOffset();\n  return new Rect(\n      scrollOffset.y, document.documentElement.clientHeight + scrollOffset.y,\n      scrollOffset.x, document.documentElement.clientWidth + scrollOffset.x);\n};\nexports.getViewportBBox = getViewportBBox;\n\n/**\n * Gets the document scroll distance as a coordinate object.\n * Copied from Closure's goog.dom.getDocumentScroll.\n * @return {!Coordinate} Object with values 'x' and 'y'.\n * @alias Blockly.utils.svgMath.getDocumentScroll\n */\nconst getDocumentScroll = function() {\n  const el = document.documentElement;\n  const win = window;\n  if (userAgent.IE && win.pageYOffset !== el.scrollTop) {\n    // The keyboard on IE10 touch devices shifts the page using the pageYOffset\n    // without modifying scrollTop. For this case, we want the body scroll\n    // offsets.\n    return new Coordinate(el.scrollLeft, el.scrollTop);\n  }\n  return new Coordinate(\n      win.pageXOffset || el.scrollLeft, win.pageYOffset || el.scrollTop);\n};\nexports.getDocumentScroll = getDocumentScroll;\n\n/**\n * Converts screen coordinates to workspace coordinates.\n * @param {!WorkspaceSvg} ws The workspace to find the coordinates on.\n * @param {!Coordinate} screenCoordinates The screen coordinates to\n * be converted to workspace coordinates\n * @return {!Coordinate} The workspace coordinates.\n * @alias Blockly.utils.svgMath.screenToWsCoordinates\n */\nconst screenToWsCoordinates = function(ws, screenCoordinates) {\n  const screenX = screenCoordinates.x;\n  const screenY = screenCoordinates.y;\n\n  const injectionDiv = ws.getInjectionDiv();\n  // Bounding rect coordinates are in client coordinates, meaning that they\n  // are in pixels relative to the upper left corner of the visible browser\n  // window.  These coordinates change when you scroll the browser window.\n  const boundingRect = injectionDiv.getBoundingClientRect();\n\n  // The client coordinates offset by the injection div's upper left corner.\n  const clientOffsetPixels =\n      new Coordinate(screenX - boundingRect.left, screenY - boundingRect.top);\n\n  // The offset in pixels between the main workspace's origin and the upper\n  // left corner of the injection div.\n  const mainOffsetPixels = ws.getOriginOffsetInPixels();\n\n  // The position of the new comment in pixels relative to the origin of the\n  // main workspace.\n  const finalOffsetPixels =\n      Coordinate.difference(clientOffsetPixels, mainOffsetPixels);\n\n  // The position in main workspace coordinates.\n  const finalOffsetMainWs = finalOffsetPixels.scale(1 / ws.scale);\n  return finalOffsetMainWs;\n};\nexports.screenToWsCoordinates = screenToWsCoordinates;\n\n/**\n * Returns the dimensions of the specified SVG image.\n * @param {!SVGElement} svg SVG image.\n * @return {!Size} Contains width and height properties.\n * @deprecated Use workspace.getCachedParentSvgSize. (2021 March 5)\n * @alias Blockly.utils.svgMath.svgSize\n */\nconst svgSize = function(svg) {\n  // When removing this function, remove svg.cachedWidth_ and svg.cachedHeight_\n  // from setCachedParentSvgSize.\n  // The deprecated name is `Blockly.svgSize` because this function used to be\n  // declared in Blockly.js.\n  deprecation.warn(\n      'Blockly.svgSize', 'March 2021', 'March 2022',\n      'workspace.getCachedParentSvgSize');\n  svg = /** @type {?} */ (svg);\n  return new Size(svg.cachedWidth_, svg.cachedHeight_);\n};\nexports.svgSize = svgSize;\n\n\nexports.TEST_ONLY = {\n  XY_REGEX,\n  XY_STYLE_REGEX,\n};\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Defines the Svg class. Its constants enumerate\n * all SVG tag names used by Blockly.\n */\n'use strict';\n\n/**\n * Defines the Svg class. Its constants enumerate\n * all SVG tag names used by Blockly.\n * @class\n */\ngoog.module('Blockly.utils.Svg');\n\n\n/**\n * A name with the type of the SVG element stored in the generic.\n * @template T\n * @alias Blockly.utils.Svg\n */\nclass Svg {\n  /**\n   * @param {string} tagName The SVG element tag name.\n   * @package\n   */\n  constructor(tagName) {\n    /**\n     * @type {string}\n     * @private\n     */\n    this.tagName_ = tagName;\n  }\n\n  /**\n   * Returns the SVG element tag name.\n   * @return {string} The name.\n   */\n  toString() {\n    return this.tagName_;\n  }\n}\n\n/**\n * @type {!Svg<!SVGAnimateElement>}\n * @package\n */\nSvg.ANIMATE = new Svg('animate');\n\n/**\n * @type {!Svg<!SVGCircleElement>}\n * @package\n */\nSvg.CIRCLE = new Svg('circle');\n\n/**\n * @type {!Svg<!SVGClipPathElement>}\n * @package\n */\nSvg.CLIPPATH = new Svg('clipPath');\n\n/**\n * @type {!Svg<!SVGDefsElement>}\n * @package\n */\nSvg.DEFS = new Svg('defs');\n\n/**\n * @type {!Svg<!SVGFECompositeElement>}\n * @package\n */\nSvg.FECOMPOSITE = new Svg('feComposite');\n\n/**\n * @type {!Svg<!SVGFEComponentTransferElement>}\n * @package\n */\nSvg.FECOMPONENTTRANSFER = new Svg('feComponentTransfer');\n\n/**\n * @type {!Svg<!SVGFEFloodElement>}\n * @package\n */\nSvg.FEFLOOD = new Svg('feFlood');\n\n/**\n * @type {!Svg<!SVGFEFuncAElement>}\n * @package\n */\nSvg.FEFUNCA = new Svg('feFuncA');\n\n/**\n * @type {!Svg<!SVGFEGaussianBlurElement>}\n * @package\n */\nSvg.FEGAUSSIANBLUR = new Svg('feGaussianBlur');\n\n/**\n * @type {!Svg<!SVGFEPointLightElement>}\n * @package\n */\nSvg.FEPOINTLIGHT = new Svg('fePointLight');\n\n/**\n * @type {!Svg<!SVGFESpecularLightingElement>}\n * @package\n */\nSvg.FESPECULARLIGHTING = new Svg('feSpecularLighting');\n\n/**\n * @type {!Svg<!SVGFilterElement>}\n * @package\n */\nSvg.FILTER = new Svg('filter');\n\n/**\n * @type {!Svg<!SVGForeignObjectElement>}\n * @package\n */\nSvg.FOREIGNOBJECT = new Svg('foreignObject');\n\n/**\n * @type {!Svg<!SVGGElement>}\n * @package\n */\nSvg.G = new Svg('g');\n\n/**\n * @type {!Svg<!SVGImageElement>}\n * @package\n */\nSvg.IMAGE = new Svg('image');\n\n/**\n * @type {!Svg<!SVGLineElement>}\n * @package\n */\nSvg.LINE = new Svg('line');\n\n/**\n * @type {!Svg<!SVGPathElement>}\n * @package\n */\nSvg.PATH = new Svg('path');\n\n/**\n * @type {!Svg<!SVGPatternElement>}\n * @package\n */\nSvg.PATTERN = new Svg('pattern');\n\n/**\n * @type {!Svg<!SVGPolygonElement>}\n * @package\n */\nSvg.POLYGON = new Svg('polygon');\n\n/**\n * @type {!Svg<!SVGRectElement>}\n * @package\n */\nSvg.RECT = new Svg('rect');\n\n/**\n * @type {!Svg<!SVGSVGElement>}\n * @package\n */\nSvg.SVG = new Svg('svg');\n\n/**\n * @type {!Svg<!SVGTextElement>}\n * @package\n */\nSvg.TEXT = new Svg('text');\n\n/**\n * @type {!Svg<!SVGTSpanElement>}\n * @package\n */\nSvg.TSPAN = new Svg('tspan');\n\nexports.Svg = Svg;\n","/**\n * @license\n * Copyright 2016 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview A class that manages a surface for dragging blocks.  When a\n * block drag is started, we move the block (and children) to a separate DOM\n * element that we move around using translate3d. At the end of the drag, the\n * blocks are put back in into the SVG they came from. This helps\n * performance by avoiding repainting the entire SVG on every mouse move\n * while dragging blocks.\n */\n\n'use strict';\n\n/**\n * A class that manages a surface for dragging blocks.  When a\n * block drag is started, we move the block (and children) to a separate DOM\n * element that we move around using translate3d. At the end of the drag, the\n * blocks are put back in into the SVG they came from. This helps\n * performance by avoiding repainting the entire SVG on every mouse move\n * while dragging blocks.\n * @class\n */\ngoog.module('Blockly.BlockDragSurfaceSvg');\n\nconst dom = goog.require('Blockly.utils.dom');\nconst svgMath = goog.require('Blockly.utils.svgMath');\nconst {Coordinate} = goog.require('Blockly.utils.Coordinate');\nconst {Svg} = goog.require('Blockly.utils.Svg');\n\n\n/**\n * Class for a drag surface for the currently dragged block. This is a separate\n * SVG that contains only the currently moving block, or nothing.\n * @alias Blockly.BlockDragSurfaceSvg\n */\nconst BlockDragSurfaceSvg = class {\n  /**\n   * @param {!Element} container Containing element.\n   */\n  constructor(container) {\n    /**\n     * The SVG drag surface. Set once by BlockDragSurfaceSvg.createDom.\n     * @type {?SVGElement}\n     * @private\n     */\n    this.SVG_ = null;\n\n    /**\n     * This is where blocks live while they are being dragged if the drag\n     * surface is enabled.\n     * @type {?SVGElement}\n     * @private\n     */\n    this.dragGroup_ = null;\n\n    /**\n     * Containing HTML element; parent of the workspace and the drag surface.\n     * @type {!Element}\n     * @private\n     */\n    this.container_ = container;\n\n    /**\n     * Cached value for the scale of the drag surface.\n     * Used to set/get the correct translation during and after a drag.\n     * @type {number}\n     * @private\n     */\n    this.scale_ = 1;\n\n    /**\n     * Cached value for the translation of the drag surface.\n     * This translation is in pixel units, because the scale is applied to the\n     * drag group rather than the top-level SVG.\n     * @type {?Coordinate}\n     * @private\n     */\n    this.surfaceXY_ = null;\n\n    /**\n     * Cached value for the translation of the child drag surface in pixel\n     * units. Since the child drag surface tracks the translation of the\n     * workspace this is ultimately the translation of the workspace.\n     * @type {!Coordinate}\n     * @private\n     */\n    this.childSurfaceXY_ = new Coordinate(0, 0);\n\n    this.createDom();\n  }\n\n  /**\n   * Create the drag surface and inject it into the container.\n   */\n  createDom() {\n    if (this.SVG_) {\n      return;  // Already created.\n    }\n    this.SVG_ = dom.createSvgElement(\n        Svg.SVG, {\n          'xmlns': dom.SVG_NS,\n          'xmlns:html': dom.HTML_NS,\n          'xmlns:xlink': dom.XLINK_NS,\n          'version': '1.1',\n          'class': 'blocklyBlockDragSurface',\n        },\n        this.container_);\n    this.dragGroup_ = dom.createSvgElement(Svg.G, {}, this.SVG_);\n  }\n\n  /**\n   * Set the SVG blocks on the drag surface's group and show the surface.\n   * Only one block group should be on the drag surface at a time.\n   * @param {!SVGElement} blocks Block or group of blocks to place on the drag\n   * surface.\n   */\n  setBlocksAndShow(blocks) {\n    if (this.dragGroup_.childNodes.length) {\n      throw Error('Already dragging a block.');\n    }\n    // appendChild removes the blocks from the previous parent\n    this.dragGroup_.appendChild(blocks);\n    this.SVG_.style.display = 'block';\n    this.surfaceXY_ = new Coordinate(0, 0);\n  }\n\n  /**\n   * Translate and scale the entire drag surface group to the given position, to\n   * keep in sync with the workspace.\n   * @param {number} x X translation in pixel coordinates.\n   * @param {number} y Y translation in pixel coordinates.\n   * @param {number} scale Scale of the group.\n   */\n  translateAndScaleGroup(x, y, scale) {\n    this.scale_ = scale;\n    // This is a work-around to prevent a the blocks from rendering\n    // fuzzy while they are being dragged on the drag surface.\n    const fixedX = x.toFixed(0);\n    const fixedY = y.toFixed(0);\n\n    this.childSurfaceXY_.x = parseInt(fixedX, 10);\n    this.childSurfaceXY_.y = parseInt(fixedY, 10);\n\n    this.dragGroup_.setAttribute(\n        'transform',\n        'translate(' + fixedX + ',' + fixedY + ') scale(' + scale + ')');\n  }\n\n  /**\n   * Translate the drag surface's SVG based on its internal state.\n   * @private\n   */\n  translateSurfaceInternal_() {\n    let x = this.surfaceXY_.x;\n    let y = this.surfaceXY_.y;\n    // This is a work-around to prevent a the blocks from rendering\n    // fuzzy while they are being dragged on the drag surface.\n    x = x.toFixed(0);\n    y = y.toFixed(0);\n    this.SVG_.style.display = 'block';\n\n    dom.setCssTransform(this.SVG_, 'translate3d(' + x + 'px, ' + y + 'px, 0)');\n  }\n\n  /**\n   * Translates the entire surface by a relative offset.\n   * @param {number} deltaX Horizontal offset in pixel units.\n   * @param {number} deltaY Vertical offset in pixel units.\n   */\n  translateBy(deltaX, deltaY) {\n    const x = this.surfaceXY_.x + deltaX;\n    const y = this.surfaceXY_.y + deltaY;\n    this.surfaceXY_ = new Coordinate(x, y);\n    this.translateSurfaceInternal_();\n  }\n\n  /**\n   * Translate the entire drag surface during a drag.\n   * We translate the drag surface instead of the blocks inside the surface\n   * so that the browser avoids repainting the SVG.\n   * Because of this, the drag coordinates must be adjusted by scale.\n   * @param {number} x X translation for the entire surface.\n   * @param {number} y Y translation for the entire surface.\n   */\n  translateSurface(x, y) {\n    this.surfaceXY_ = new Coordinate(x * this.scale_, y * this.scale_);\n    this.translateSurfaceInternal_();\n  }\n\n  /**\n   * Reports the surface translation in scaled workspace coordinates.\n   * Use this when finishing a drag to return blocks to the correct position.\n   * @return {!Coordinate} Current translation of the surface.\n   */\n  getSurfaceTranslation() {\n    const xy = svgMath.getRelativeXY(/** @type {!SVGElement} */ (this.SVG_));\n    return new Coordinate(xy.x / this.scale_, xy.y / this.scale_);\n  }\n\n  /**\n   * Provide a reference to the drag group (primarily for\n   * BlockSvg.getRelativeToSurfaceXY).\n   * @return {?SVGElement} Drag surface group element.\n   */\n  getGroup() {\n    return this.dragGroup_;\n  }\n\n  /**\n   * Returns the SVG drag surface.\n   * @returns {?SVGElement} The SVG drag surface.\n   */\n  getSvgRoot() {\n    return this.SVG_;\n  }\n\n  /**\n   * Get the current blocks on the drag surface, if any (primarily\n   * for BlockSvg.getRelativeToSurfaceXY).\n   * @return {?Element} Drag surface block DOM element, or null if no blocks\n   *     exist.\n   */\n  getCurrentBlock() {\n    return /** @type {Element} */ (this.dragGroup_.firstChild);\n  }\n\n  /**\n   * Gets the translation of the child block surface\n   * This surface is in charge of keeping track of how much the workspace has\n   * moved.\n   * @return {!Coordinate} The amount the workspace has been moved.\n   */\n  getWsTranslation() {\n    // Returning a copy so the coordinate can not be changed outside this class.\n    return this.childSurfaceXY_.clone();\n  }\n\n  /**\n   * Clear the group and hide the surface; move the blocks off onto the provided\n   * element.\n   * If the block is being deleted it doesn't need to go back to the original\n   * surface, since it would be removed immediately during dispose.\n   * @param {Element=} opt_newSurface Surface the dragging blocks should be\n   *     moved to, or null if the blocks should be removed from this surface\n   *     without being moved to a different surface.\n   */\n  clearAndHide(opt_newSurface) {\n    const currentBlockElement = this.getCurrentBlock();\n    if (currentBlockElement) {\n      if (opt_newSurface) {\n        // appendChild removes the node from this.dragGroup_\n        opt_newSurface.appendChild(currentBlockElement);\n      } else {\n        this.dragGroup_.removeChild(currentBlockElement);\n      }\n    }\n    this.SVG_.style.display = 'none';\n    if (this.dragGroup_.childNodes.length) {\n      throw Error('Drag group was not cleared.');\n    }\n    this.surfaceXY_ = null;\n  }\n};\n\nexports.BlockDragSurfaceSvg = BlockDragSurfaceSvg;\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Object for configuring and updating a workspace grid in\n * Blockly.\n */\n'use strict';\n\n/**\n * Object for configuring and updating a workspace grid in\n * Blockly.\n * @class\n */\ngoog.module('Blockly.Grid');\n\nconst dom = goog.require('Blockly.utils.dom');\nconst userAgent = goog.require('Blockly.utils.userAgent');\nconst {Svg} = goog.require('Blockly.utils.Svg');\n\n\n/**\n * Class for a workspace's grid.\n * @alias Blockly.Grid\n */\nclass Grid {\n  /**\n   * @param {!SVGElement} pattern The grid's SVG pattern, created during\n   *     injection.\n   * @param {!Object} options A dictionary of normalized options for the grid.\n   *     See grid documentation:\n   *     https://developers.google.com/blockly/guides/configure/web/grid\n   */\n  constructor(pattern, options) {\n    /**\n     * The scale of the grid, used to set stroke width on grid lines.\n     * This should always be the same as the workspace scale.\n     * @type {number}\n     * @private\n     */\n    this.scale_ = 1;\n\n    /**\n     * The grid's SVG pattern, created during injection.\n     * @type {!SVGElement}\n     * @private\n     */\n    this.gridPattern_ = pattern;\n\n    /**\n     * The spacing of the grid lines (in px).\n     * @type {number}\n     * @private\n     */\n    this.spacing_ = options['spacing'];\n\n    /**\n     * How long the grid lines should be (in px).\n     * @type {number}\n     * @private\n     */\n    this.length_ = options['length'];\n\n    /**\n     * The horizontal grid line, if it exists.\n     * @type {SVGElement}\n     * @private\n     */\n    this.line1_ = /** @type {SVGElement} */ (pattern.firstChild);\n\n    /**\n     * The vertical grid line, if it exists.\n     * @type {SVGElement}\n     * @private\n     */\n    this.line2_ =\n        this.line1_ && (/** @type {SVGElement} */ (this.line1_.nextSibling));\n\n    /**\n     * Whether blocks should snap to the grid.\n     * @type {boolean}\n     * @private\n     */\n    this.snapToGrid_ = options['snap'];\n  }\n\n  /**\n   * Dispose of this grid and unlink from the DOM.\n   * @package\n   * @suppress {checkTypes}\n   */\n  dispose() {\n    this.gridPattern_ = null;\n  }\n\n  /**\n   * Whether blocks should snap to the grid, based on the initial configuration.\n   * @return {boolean} True if blocks should snap, false otherwise.\n   * @package\n   */\n  shouldSnap() {\n    return this.snapToGrid_;\n  }\n\n  /**\n   * Get the spacing of the grid points (in px).\n   * @return {number} The spacing of the grid points.\n   * @package\n   */\n  getSpacing() {\n    return this.spacing_;\n  }\n\n  /**\n   * Get the ID of the pattern element, which should be randomized to avoid\n   * conflicts with other Blockly instances on the page.\n   * @return {string} The pattern ID.\n   * @package\n   */\n  getPatternId() {\n    return this.gridPattern_.id;\n  }\n\n  /**\n   * Update the grid with a new scale.\n   * @param {number} scale The new workspace scale.\n   * @package\n   */\n  update(scale) {\n    this.scale_ = scale;\n    // MSIE freaks if it sees a 0x0 pattern, so set empty patterns to 100x100.\n    const safeSpacing = (this.spacing_ * scale) || 100;\n\n    this.gridPattern_.setAttribute('width', safeSpacing);\n    this.gridPattern_.setAttribute('height', safeSpacing);\n\n    let half = Math.floor(this.spacing_ / 2) + 0.5;\n    let start = half - this.length_ / 2;\n    let end = half + this.length_ / 2;\n\n    half *= scale;\n    start *= scale;\n    end *= scale;\n\n    this.setLineAttributes_(this.line1_, scale, start, end, half, half);\n    this.setLineAttributes_(this.line2_, scale, half, half, start, end);\n  }\n\n  /**\n   * Set the attributes on one of the lines in the grid.  Use this to update the\n   * length and stroke width of the grid lines.\n   * @param {SVGElement} line Which line to update.\n   * @param {number} width The new stroke size (in px).\n   * @param {number} x1 The new x start position of the line (in px).\n   * @param {number} x2 The new x end position of the line (in px).\n   * @param {number} y1 The new y start position of the line (in px).\n   * @param {number} y2 The new y end position of the line (in px).\n   * @private\n   */\n  setLineAttributes_(line, width, x1, x2, y1, y2) {\n    if (line) {\n      line.setAttribute('stroke-width', width);\n      line.setAttribute('x1', x1);\n      line.setAttribute('y1', y1);\n      line.setAttribute('x2', x2);\n      line.setAttribute('y2', y2);\n    }\n  }\n\n  /**\n   * Move the grid to a new x and y position, and make sure that change is\n   * visible.\n   * @param {number} x The new x position of the grid (in px).\n   * @param {number} y The new y position of the grid (in px).\n   * @package\n   */\n  moveTo(x, y) {\n    this.gridPattern_.setAttribute('x', x);\n    this.gridPattern_.setAttribute('y', y);\n\n    if (userAgent.IE || userAgent.EDGE) {\n      // IE/Edge doesn't notice that the x/y offsets have changed.\n      // Force an update.\n      this.update(this.scale_);\n    }\n  }\n\n  /**\n   * Create the DOM for the grid described by options.\n   * @param {string} rnd A random ID to append to the pattern's ID.\n   * @param {!Object} gridOptions The object containing grid configuration.\n   * @param {!SVGElement} defs The root SVG element for this workspace's defs.\n   * @return {!SVGElement} The SVG element for the grid pattern.\n   * @package\n   */\n  static createDom(rnd, gridOptions, defs) {\n    /*\n      <pattern id=\"blocklyGridPattern837493\" patternUnits=\"userSpaceOnUse\">\n        <rect stroke=\"#888\" />\n        <rect stroke=\"#888\" />\n      </pattern>\n    */\n    const gridPattern = dom.createSvgElement(\n        Svg.PATTERN,\n        {'id': 'blocklyGridPattern' + rnd, 'patternUnits': 'userSpaceOnUse'},\n        defs);\n    if (gridOptions['length'] > 0 && gridOptions['spacing'] > 0) {\n      dom.createSvgElement(\n          Svg.LINE, {'stroke': gridOptions['colour']}, gridPattern);\n      if (gridOptions['length'] > 1) {\n        dom.createSvgElement(\n            Svg.LINE, {'stroke': gridOptions['colour']}, gridPattern);\n      }\n      // x1, y1, x1, x2 properties will be set later in update.\n    } else {\n      // Edge 16 doesn't handle empty patterns\n      dom.createSvgElement(Svg.LINE, {}, gridPattern);\n    }\n    return gridPattern;\n  }\n}\n\nexports.Grid = Grid;\n","/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview XML element manipulation.\n * These methods are not specific to Blockly, and could be factored out into\n * a JavaScript framework such as Closure.\n */\n'use strict';\n\n/**\n * XML element manipulation.\n * These methods are not specific to Blockly, and could be factored out into\n * a JavaScript framework such as Closure.\n * @namespace Blockly.utils.xml\n */\ngoog.module('Blockly.utils.xml');\n\nconst {globalThis} = goog.require('Blockly.utils.global');\n\n\n/**\n * Namespace for Blockly's XML.\n * @alias Blockly.utils.xml.NAME_SPACE\n */\nconst NAME_SPACE = 'https://developers.google.com/blockly/xml';\nexports.NAME_SPACE = NAME_SPACE;\n\n/**\n * The Document object to use.  By default this is just document, but\n * the Node.js build of Blockly (see scripts/package/node/core.js)\n * calls setDocument to supply a Document implementation from the\n * jsdom package instead.\n * @type {!Document}\n */\nlet xmlDocument = globalThis['document'];\n\n/**\n * Get the document object to use for XML serialization.\n * @return {!Document} The document object.\n * @alias Blockly.utils.xml.getDocument\n */\nconst getDocument = function() {\n  return xmlDocument;\n};\nexports.getDocument = getDocument;\n\n/**\n * Get the document object to use for XML serialization.\n * @param {!Document} document The document object to use.\n * @alias Blockly.utils.xml.setDocument\n */\nconst setDocument = function(document) {\n  xmlDocument = document;\n};\nexports.setDocument = setDocument;\n\n/**\n * Create DOM element for XML.\n * @param {string} tagName Name of DOM element.\n * @return {!Element} New DOM element.\n * @alias Blockly.utils.xml.createElement\n */\nconst createElement = function(tagName) {\n  return xmlDocument.createElementNS(NAME_SPACE, tagName);\n};\nexports.createElement = createElement;\n\n/**\n * Create text element for XML.\n * @param {string} text Text content.\n * @return {!Text} New DOM text node.\n * @alias Blockly.utils.xml.createTextNode\n */\nconst createTextNode = function(text) {\n  return xmlDocument.createTextNode(text);\n};\nexports.createTextNode = createTextNode;\n\n/**\n * Converts an XML string into a DOM tree.\n * @param {string} text XML string.\n * @return {Document} The DOM document.\n * @throws if XML doesn't parse.\n * @alias Blockly.utils.xml.textToDomDocument\n */\nconst textToDomDocument = function(text) {\n  const oParser = new DOMParser();\n  return oParser.parseFromString(text, 'text/xml');\n};\nexports.textToDomDocument = textToDomDocument;\n\n/**\n * Converts a DOM structure into plain text.\n * Currently the text format is fairly ugly: all one line with no whitespace.\n * @param {!Node} dom A tree of XML nodes.\n * @return {string} Text representation.\n * @alias Blockly.utils.xml.domToText\n */\nconst domToText = function(dom) {\n  const oSerializer = new XMLSerializer();\n  return oSerializer.serializeToString(dom);\n};\nexports.domToText = domToText;\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview XML reader and writer.\n */\n'use strict';\n\n/**\n * XML reader and writer.\n * @namespace Blockly.Xml\n */\ngoog.module('Blockly.Xml');\n\nconst dom = goog.require('Blockly.utils.dom');\nconst eventUtils = goog.require('Blockly.Events.utils');\nconst utilsXml = goog.require('Blockly.utils.xml');\n/* eslint-disable-next-line no-unused-vars */\nconst {Block} = goog.requireType('Blockly.Block');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockSvg} = goog.requireType('Blockly.BlockSvg');\n/* eslint-disable-next-line no-unused-vars */\nconst {Connection} = goog.requireType('Blockly.Connection');\n/* eslint-disable-next-line no-unused-vars */\nconst {Field} = goog.requireType('Blockly.Field');\nconst {Size} = goog.require('Blockly.utils.Size');\n/* eslint-disable-next-line no-unused-vars */\nconst {VariableModel} = goog.requireType('Blockly.VariableModel');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceSvg} = goog.requireType('Blockly.WorkspaceSvg');\n/* eslint-disable-next-line no-unused-vars */\nconst {Workspace} = goog.requireType('Blockly.Workspace');\nconst {inputTypes} = goog.require('Blockly.inputTypes');\ngoog.requireType('Blockly.Comment');\ngoog.requireType('Blockly.Variables');\ngoog.requireType('Blockly.WorkspaceComment');\ngoog.requireType('Blockly.WorkspaceCommentSvg');\n\n\n/**\n * Encode a block tree as XML.\n * @param {!Workspace} workspace The workspace containing blocks.\n * @param {boolean=} opt_noId True if the encoder should skip the block IDs.\n * @return {!Element} XML DOM element.\n * @alias Blockly.Xml.workspaceToDom\n */\nconst workspaceToDom = function(workspace, opt_noId) {\n  const treeXml = utilsXml.createElement('xml');\n  const variablesElement = variablesToDom(\n      goog.module.get('Blockly.Variables').allUsedVarModels(workspace));\n  if (variablesElement.hasChildNodes()) {\n    treeXml.appendChild(variablesElement);\n  }\n  const comments = workspace.getTopComments(true);\n  for (let i = 0; i < comments.length; i++) {\n    const comment = comments[i];\n    treeXml.appendChild(comment.toXmlWithXY(opt_noId));\n  }\n  const blocks = workspace.getTopBlocks(true);\n  for (let i = 0; i < blocks.length; i++) {\n    const block = blocks[i];\n    treeXml.appendChild(blockToDomWithXY(block, opt_noId));\n  }\n  return treeXml;\n};\nexports.workspaceToDom = workspaceToDom;\n\n/**\n * Encode a list of variables as XML.\n * @param {!Array<!VariableModel>} variableList List of all variable\n *     models.\n * @return {!Element} Tree of XML elements.\n * @alias Blockly.Xml.variablesToDom\n */\nconst variablesToDom = function(variableList) {\n  const variables = utilsXml.createElement('variables');\n  for (let i = 0; i < variableList.length; i++) {\n    const variable = variableList[i];\n    const element = utilsXml.createElement('variable');\n    element.appendChild(utilsXml.createTextNode(variable.name));\n    if (variable.type) {\n      element.setAttribute('type', variable.type);\n    }\n    element.id = variable.getId();\n    variables.appendChild(element);\n  }\n  return variables;\n};\nexports.variablesToDom = variablesToDom;\n\n/**\n * Encode a block subtree as XML with XY coordinates.\n * @param {!Block} block The root block to encode.\n * @param {boolean=} opt_noId True if the encoder should skip the block ID.\n * @return {!Element|!DocumentFragment} Tree of XML elements or an empty\n *     document fragment if the block was an insertion marker.\n * @alias Blockly.Xml.blockToDomWithXY\n */\nconst blockToDomWithXY = function(block, opt_noId) {\n  if (block.isInsertionMarker()) {  // Skip over insertion markers.\n    block = block.getChildren(false)[0];\n    if (!block) {\n      // Disappears when appended.\n      return new DocumentFragment();\n    }\n  }\n\n  let width;  // Not used in LTR.\n  if (block.workspace.RTL) {\n    width = block.workspace.getWidth();\n  }\n\n  const element = blockToDom(block, opt_noId);\n  const xy = block.getRelativeToSurfaceXY();\n  element.setAttribute(\n      'x', Math.round(block.workspace.RTL ? width - xy.x : xy.x));\n  element.setAttribute('y', Math.round(xy.y));\n  return element;\n};\nexports.blockToDomWithXY = blockToDomWithXY;\n\n/**\n * Encode a field as XML.\n * @param {!Field} field The field to encode.\n * @return {?Element} XML element, or null if the field did not need to be\n *     serialized.\n */\nconst fieldToDom = function(field) {\n  if (field.isSerializable()) {\n    const container = utilsXml.createElement('field');\n    container.setAttribute('name', field.name || '');\n    return field.toXml(container);\n  }\n  return null;\n};\n\n/**\n * Encode all of a block's fields as XML and attach them to the given tree of\n * XML elements.\n * @param {!Block} block A block with fields to be encoded.\n * @param {!Element} element The XML element to which the field DOM should be\n *     attached.\n */\nconst allFieldsToDom = function(block, element) {\n  for (let i = 0; i < block.inputList.length; i++) {\n    const input = block.inputList[i];\n    for (let j = 0; j < input.fieldRow.length; j++) {\n      const field = input.fieldRow[j];\n      const fieldDom = fieldToDom(field);\n      if (fieldDom) {\n        element.appendChild(fieldDom);\n      }\n    }\n  }\n};\n\n/**\n * Encode a block subtree as XML.\n * @param {!Block} block The root block to encode.\n * @param {boolean=} opt_noId True if the encoder should skip the block ID.\n * @return {!Element|!DocumentFragment} Tree of XML elements or an empty\n *     document fragment if the block was an insertion marker.\n * @alias Blockly.Xml.blockToDom\n */\nconst blockToDom = function(block, opt_noId) {\n  // Skip over insertion markers.\n  if (block.isInsertionMarker()) {\n    const child = block.getChildren(false)[0];\n    if (child) {\n      return blockToDom(child);\n    } else {\n      // Disappears when appended.\n      return new DocumentFragment();\n    }\n  }\n\n  const element = utilsXml.createElement(block.isShadow() ? 'shadow' : 'block');\n  element.setAttribute('type', block.type);\n  if (!opt_noId) {\n    // It's important to use setAttribute here otherwise IE11 won't serialize\n    // the block's ID when domToText is called.\n    element.setAttribute('id', block.id);\n  }\n  if (block.mutationToDom) {\n    // Custom data for an advanced block.\n    const mutation = block.mutationToDom();\n    if (mutation && (mutation.hasChildNodes() || mutation.hasAttributes())) {\n      element.appendChild(mutation);\n    }\n  }\n\n  allFieldsToDom(block, element);\n\n  const commentText = block.getCommentText();\n  if (commentText) {\n    const size = block.commentModel.size;\n    const pinned = block.commentModel.pinned;\n\n    const commentElement = utilsXml.createElement('comment');\n    commentElement.appendChild(utilsXml.createTextNode(commentText));\n    commentElement.setAttribute('pinned', pinned);\n    commentElement.setAttribute('h', size.height);\n    commentElement.setAttribute('w', size.width);\n\n    element.appendChild(commentElement);\n  }\n\n  if (block.data) {\n    const dataElement = utilsXml.createElement('data');\n    dataElement.appendChild(utilsXml.createTextNode(block.data));\n    element.appendChild(dataElement);\n  }\n\n  for (let i = 0; i < block.inputList.length; i++) {\n    const input = block.inputList[i];\n    let container;\n    let empty = true;\n    if (input.type === inputTypes.DUMMY) {\n      continue;\n    } else {\n      const childBlock = input.connection.targetBlock();\n      if (input.type === inputTypes.VALUE) {\n        container = utilsXml.createElement('value');\n      } else if (input.type === inputTypes.STATEMENT) {\n        container = utilsXml.createElement('statement');\n      }\n      const childShadow = input.connection.getShadowDom();\n      if (childShadow && (!childBlock || !childBlock.isShadow())) {\n        container.appendChild(cloneShadow(childShadow, opt_noId));\n      }\n      if (childBlock) {\n        const childElem = blockToDom(childBlock, opt_noId);\n        if (childElem.nodeType === dom.NodeType.ELEMENT_NODE) {\n          container.appendChild(childElem);\n          empty = false;\n        }\n      }\n    }\n    container.setAttribute('name', input.name);\n    if (!empty) {\n      element.appendChild(container);\n    }\n  }\n  if (block.inputsInline !== undefined &&\n      block.inputsInline !== block.inputsInlineDefault) {\n    element.setAttribute('inline', block.inputsInline);\n  }\n  if (block.isCollapsed()) {\n    element.setAttribute('collapsed', true);\n  }\n  if (!block.isEnabled()) {\n    element.setAttribute('disabled', true);\n  }\n  if (!block.isDeletable() && !block.isShadow()) {\n    element.setAttribute('deletable', false);\n  }\n  if (!block.isMovable() && !block.isShadow()) {\n    element.setAttribute('movable', false);\n  }\n  if (!block.isEditable()) {\n    element.setAttribute('editable', false);\n  }\n\n  const nextBlock = block.getNextBlock();\n  let container;\n  if (nextBlock) {\n    const nextElem = blockToDom(nextBlock, opt_noId);\n    if (nextElem.nodeType === dom.NodeType.ELEMENT_NODE) {\n      container = utilsXml.createElement('next');\n      container.appendChild(nextElem);\n      element.appendChild(container);\n    }\n  }\n  const nextShadow =\n      block.nextConnection && block.nextConnection.getShadowDom();\n  if (nextShadow && (!nextBlock || !nextBlock.isShadow())) {\n    container.appendChild(cloneShadow(nextShadow, opt_noId));\n  }\n\n  return element;\n};\nexports.blockToDom = blockToDom;\n\n/**\n * Deeply clone the shadow's DOM so that changes don't back-wash to the block.\n * @param {!Element} shadow A tree of XML elements.\n * @param {boolean=} opt_noId True if the encoder should skip the block ID.\n * @return {!Element} A tree of XML elements.\n */\nconst cloneShadow = function(shadow, opt_noId) {\n  shadow = shadow.cloneNode(true);\n  // Walk the tree looking for whitespace.  Don't prune whitespace in a tag.\n  let node = shadow;\n  let textNode;\n  while (node) {\n    if (opt_noId && node.nodeName === 'shadow') {\n      // Strip off IDs from shadow blocks.  There should never be a 'block' as\n      // a child of a 'shadow', so no need to check that.\n      node.removeAttribute('id');\n    }\n    if (node.firstChild) {\n      node = node.firstChild;\n    } else {\n      while (node && !node.nextSibling) {\n        textNode = node;\n        node = node.parentNode;\n        if (textNode.nodeType === dom.NodeType.TEXT_NODE &&\n            textNode.data.trim() === '' && node.firstChild !== textNode) {\n          // Prune whitespace after a tag.\n          dom.removeNode(textNode);\n        }\n      }\n      if (node) {\n        textNode = node;\n        node = node.nextSibling;\n        if (textNode.nodeType === dom.NodeType.TEXT_NODE &&\n            textNode.data.trim() === '') {\n          // Prune whitespace before a tag.\n          dom.removeNode(textNode);\n        }\n      }\n    }\n  }\n  return shadow;\n};\n\n/**\n * Converts a DOM structure into plain text.\n * Currently the text format is fairly ugly: all one line with no whitespace,\n * unless the DOM itself has whitespace built-in.\n * @param {!Node} dom A tree of XML nodes.\n * @return {string} Text representation.\n * @alias Blockly.Xml.domToText\n */\nconst domToText = function(dom) {\n  const text = utilsXml.domToText(dom);\n  // Unpack self-closing tags.  These tags fail when embedded in HTML.\n  // <block name=\"foo\"/> -> <block name=\"foo\"></block>\n  return text.replace(/<(\\w+)([^<]*)\\/>/g, '<$1$2></$1>');\n};\nexports.domToText = domToText;\n\n/**\n * Converts a DOM structure into properly indented text.\n * @param {!Node} dom A tree of XML elements.\n * @return {string} Text representation.\n * @alias Blockly.Xml.domToPrettyText\n */\nconst domToPrettyText = function(dom) {\n  // This function is not guaranteed to be correct for all XML.\n  // But it handles the XML that Blockly generates.\n  const blob = domToText(dom);\n  // Place every open and close tag on its own line.\n  const lines = blob.split('<');\n  // Indent every line.\n  let indent = '';\n  for (let i = 1; i < lines.length; i++) {\n    const line = lines[i];\n    if (line[0] === '/') {\n      indent = indent.substring(2);\n    }\n    lines[i] = indent + '<' + line;\n    if (line[0] !== '/' && line.slice(-2) !== '/>') {\n      indent += '  ';\n    }\n  }\n  // Pull simple tags back together.\n  // E.g. <foo></foo>\n  let text = lines.join('\\n');\n  text = text.replace(/(<(\\w+)\\b[^>]*>[^\\n]*)\\n *<\\/\\2>/g, '$1</$2>');\n  // Trim leading blank line.\n  return text.replace(/^\\n/, '');\n};\nexports.domToPrettyText = domToPrettyText;\n\n/**\n * Converts an XML string into a DOM structure.\n * @param {string} text An XML string.\n * @return {!Element} A DOM object representing the singular child of the\n *     document element.\n * @throws if the text doesn't parse.\n * @alias Blockly.Xml.textToDom\n */\nconst textToDom = function(text) {\n  const doc = utilsXml.textToDomDocument(text);\n  if (!doc || !doc.documentElement ||\n      doc.getElementsByTagName('parsererror').length) {\n    throw Error('textToDom was unable to parse: ' + text);\n  }\n  return doc.documentElement;\n};\nexports.textToDom = textToDom;\n\n/**\n * Clear the given workspace then decode an XML DOM and\n * create blocks on the workspace.\n * @param {!Element} xml XML DOM.\n * @param {!WorkspaceSvg} workspace The workspace.\n * @return {!Array<string>} An array containing new block IDs.\n * @alias Blockly.Xml.clearWorkspaceAndLoadFromXml\n */\nconst clearWorkspaceAndLoadFromXml = function(xml, workspace) {\n  workspace.setResizesEnabled(false);\n  workspace.clear();\n  const blockIds = domToWorkspace(xml, workspace);\n  workspace.setResizesEnabled(true);\n  return blockIds;\n};\nexports.clearWorkspaceAndLoadFromXml = clearWorkspaceAndLoadFromXml;\n\n/**\n * Decode an XML DOM and create blocks on the workspace.\n * @param {!Element} xml XML DOM.\n * @param {!Workspace} workspace The workspace.\n * @return {!Array<string>} An array containing new block IDs.\n * @suppress {strictModuleDepCheck} Suppress module check while workspace\n *     comments are not bundled in.\n * @alias Blockly.Xml.domToWorkspace\n */\nconst domToWorkspace = function(xml, workspace) {\n  const {Workspace} = goog.module.get('Blockly.Workspace');\n  if (xml instanceof Workspace) {\n    const swap = xml;\n    // Closure Compiler complains here because the arguments are reversed.\n    /** @suppress {checkTypes} */\n    xml = workspace;\n    workspace = swap;\n    console.warn(\n        'Deprecated call to domToWorkspace, ' +\n        'swap the arguments.');\n  }\n\n  let width;  // Not used in LTR.\n  if (workspace.RTL) {\n    width = workspace.getWidth();\n  }\n  const newBlockIds = [];  // A list of block IDs added by this call.\n  dom.startTextWidthCache();\n  const existingGroup = eventUtils.getGroup();\n  if (!existingGroup) {\n    eventUtils.setGroup(true);\n  }\n\n  // Disable workspace resizes as an optimization.\n  // Assume it is rendered so we can check.\n  if (/** @type {!WorkspaceSvg} */ (workspace).setResizesEnabled) {\n    /** @type {!WorkspaceSvg} */ (workspace).setResizesEnabled(false);\n  }\n  let variablesFirst = true;\n  try {\n    for (let i = 0, xmlChild; (xmlChild = xml.childNodes[i]); i++) {\n      const name = xmlChild.nodeName.toLowerCase();\n      const xmlChildElement = /** @type {!Element} */ (xmlChild);\n      if (name === 'block' ||\n          (name === 'shadow' && !eventUtils.getRecordUndo())) {\n        // Allow top-level shadow blocks if recordUndo is disabled since\n        // that means an undo is in progress.  Such a block is expected\n        // to be moved to a nested destination in the next operation.\n        const block = domToBlock(xmlChildElement, workspace);\n        newBlockIds.push(block.id);\n        const blockX = xmlChildElement.hasAttribute('x') ?\n            parseInt(xmlChildElement.getAttribute('x'), 10) :\n            10;\n        const blockY = xmlChildElement.hasAttribute('y') ?\n            parseInt(xmlChildElement.getAttribute('y'), 10) :\n            10;\n        if (!isNaN(blockX) && !isNaN(blockY)) {\n          block.moveBy(workspace.RTL ? width - blockX : blockX, blockY);\n        }\n        variablesFirst = false;\n      } else if (name === 'shadow') {\n        throw TypeError('Shadow block cannot be a top-level block.');\n      } else if (name === 'comment') {\n        if (workspace.rendered) {\n          const {WorkspaceCommentSvg} =\n              goog.module.get('Blockly.WorkspaceCommentSvg');\n          if (!WorkspaceCommentSvg) {\n            console.warn(\n                'Missing require for Blockly.WorkspaceCommentSvg, ' +\n                'ignoring workspace comment.');\n          } else {\n            WorkspaceCommentSvg.fromXmlRendered(\n                xmlChildElement,\n                /** @type {!WorkspaceSvg} */ (workspace), width);\n          }\n        } else {\n          const {WorkspaceComment} =\n              goog.module.get('Blockly.WorkspaceComment');\n          if (!WorkspaceComment) {\n            console.warn(\n                'Missing require for Blockly.WorkspaceComment, ' +\n                'ignoring workspace comment.');\n          } else {\n            WorkspaceComment.fromXml(xmlChildElement, workspace);\n          }\n        }\n      } else if (name === 'variables') {\n        if (variablesFirst) {\n          domToVariables(xmlChildElement, workspace);\n        } else {\n          throw Error(\n              '\\'variables\\' tag must exist once before block and ' +\n              'shadow tag elements in the workspace XML, but it was found in ' +\n              'another location.');\n        }\n        variablesFirst = false;\n      }\n    }\n  } finally {\n    if (!existingGroup) {\n      eventUtils.setGroup(false);\n    }\n    dom.stopTextWidthCache();\n  }\n  // Re-enable workspace resizing.\n  if (/** @type {!WorkspaceSvg} */ (workspace).setResizesEnabled) {\n    /** @type {!WorkspaceSvg} */ (workspace).setResizesEnabled(true);\n  }\n  eventUtils.fire(new (eventUtils.get(eventUtils.FINISHED_LOADING))(workspace));\n  return newBlockIds;\n};\nexports.domToWorkspace = domToWorkspace;\n\n/**\n * Decode an XML DOM and create blocks on the workspace. Position the new\n * blocks immediately below prior blocks, aligned by their starting edge.\n * @param {!Element} xml The XML DOM.\n * @param {!Workspace} workspace The workspace to add to.\n * @return {!Array<string>} An array containing new block IDs.\n * @alias Blockly.Xml.appendDomToWorkspace\n */\nconst appendDomToWorkspace = function(xml, workspace) {\n  // First check if we have a WorkspaceSvg, otherwise the blocks have no shape\n  // and the position does not matter.\n  // Assume it is rendered so we can check.\n  if (!/** @type {!WorkspaceSvg} */ (workspace).getBlocksBoundingBox) {\n    return domToWorkspace(xml, workspace);\n  }\n\n  const bbox = /** @type {!WorkspaceSvg} */ (workspace).getBlocksBoundingBox();\n  // Load the new blocks into the workspace and get the IDs of the new blocks.\n  const newBlockIds = domToWorkspace(xml, workspace);\n  if (bbox && bbox.top !== bbox.bottom) {  // check if any previous block\n    let offsetY = 0;  // offset to add to y of the new block\n    let offsetX = 0;\n    const farY = bbox.bottom;                             // bottom position\n    const topX = workspace.RTL ? bbox.right : bbox.left;  // x of bounding box\n    // Check position of the new blocks.\n    let newLeftX = Infinity;    // x of top left corner\n    let newRightX = -Infinity;  // x of top right corner\n    let newY = Infinity;        // y of top corner\n    const ySeparation = 10;\n    for (let i = 0; i < newBlockIds.length; i++) {\n      const blockXY =\n          workspace.getBlockById(newBlockIds[i]).getRelativeToSurfaceXY();\n      if (blockXY.y < newY) {\n        newY = blockXY.y;\n      }\n      if (blockXY.x < newLeftX) {  // if we left align also on x\n        newLeftX = blockXY.x;\n      }\n      if (blockXY.x > newRightX) {  // if we right align also on x\n        newRightX = blockXY.x;\n      }\n    }\n    offsetY = farY - newY + ySeparation;\n    offsetX = workspace.RTL ? topX - newRightX : topX - newLeftX;\n    for (let i = 0; i < newBlockIds.length; i++) {\n      const block = workspace.getBlockById(newBlockIds[i]);\n      block.moveBy(offsetX, offsetY);\n    }\n  }\n  return newBlockIds;\n};\nexports.appendDomToWorkspace = appendDomToWorkspace;\n\n/**\n * Decode an XML block tag and create a block (and possibly sub blocks) on the\n * workspace.\n * @param {!Element} xmlBlock XML block element.\n * @param {!Workspace} workspace The workspace.\n * @return {!Block} The root block created.\n * @alias Blockly.Xml.domToBlock\n */\nconst domToBlock = function(xmlBlock, workspace) {\n  const {Workspace} = goog.module.get('Blockly.Workspace');\n  if (xmlBlock instanceof Workspace) {\n    const swap = xmlBlock;\n    // Closure Compiler complains here because the arguments are reversed.\n    /** @suppress {checkTypes} */\n    xmlBlock = /** @type {!Element} */ (workspace);\n    workspace = swap;\n    console.warn(\n        'Deprecated call to domToBlock, ' +\n        'swap the arguments.');\n  }\n  // Create top-level block.\n  eventUtils.disable();\n  const variablesBeforeCreation = workspace.getAllVariables();\n  let topBlock;\n  try {\n    topBlock = domToBlockHeadless(xmlBlock, workspace);\n    // Generate list of all blocks.\n    if (workspace.rendered) {\n      const topBlockSvg = /** @type {!BlockSvg} */ (topBlock);\n      const blocks = topBlock.getDescendants(false);\n      topBlockSvg.setConnectionTracking(false);\n      // Render each block.\n      for (let i = blocks.length - 1; i >= 0; i--) {\n        blocks[i].initSvg();\n      }\n      for (let i = blocks.length - 1; i >= 0; i--) {\n        blocks[i].render(false);\n      }\n      // Populating the connection database may be deferred until after the\n      // blocks have rendered.\n      setTimeout(function() {\n        if (!topBlockSvg.disposed) {\n          topBlockSvg.setConnectionTracking(true);\n        }\n      }, 1);\n      topBlockSvg.updateDisabled();\n      // Allow the scrollbars to resize and move based on the new contents.\n      // TODO(@picklesrus): #387. Remove when domToBlock avoids resizing.\n      /** @type {!WorkspaceSvg} */ (workspace).resizeContents();\n    } else {\n      const blocks = topBlock.getDescendants(false);\n      for (let i = blocks.length - 1; i >= 0; i--) {\n        blocks[i].initModel();\n      }\n    }\n  } finally {\n    eventUtils.enable();\n  }\n  if (eventUtils.isEnabled()) {\n    const newVariables =\n        goog.module.get('Blockly.Variables')\n            .getAddedVariables(workspace, variablesBeforeCreation);\n    // Fire a VarCreate event for each (if any) new variable created.\n    for (let i = 0; i < newVariables.length; i++) {\n      const thisVariable = newVariables[i];\n      eventUtils.fire(\n          new (eventUtils.get(eventUtils.VAR_CREATE))(thisVariable));\n    }\n    // Block events come after var events, in case they refer to newly created\n    // variables.\n    eventUtils.fire(new (eventUtils.get(eventUtils.CREATE))(topBlock));\n  }\n  return topBlock;\n};\nexports.domToBlock = domToBlock;\n\n/**\n * Decode an XML list of variables and add the variables to the workspace.\n * @param {!Element} xmlVariables List of XML variable elements.\n * @param {!Workspace} workspace The workspace to which the variable\n *     should be added.\n * @alias Blockly.Xml.domToVariables\n */\nconst domToVariables = function(xmlVariables, workspace) {\n  for (let i = 0; i < xmlVariables.childNodes.length; i++) {\n    const xmlChild = xmlVariables.childNodes[i];\n    if (xmlChild.nodeType !== dom.NodeType.ELEMENT_NODE) {\n      continue;  // Skip text nodes.\n    }\n    const type = xmlChild.getAttribute('type');\n    const id = xmlChild.getAttribute('id');\n    const name = xmlChild.textContent;\n\n    workspace.createVariable(name, type, id);\n  }\n};\nexports.domToVariables = domToVariables;\n\n/**\n * A mapping of nodeName to node for child nodes of xmlBlock.\n * @typedef {{\n *      mutation: !Array<!Element>,\n *      comment: !Array<!Element>,\n *      data: !Array<!Element>,\n *      field: !Array<!Element>,\n *      input: !Array<!Element>,\n *      next: !Array<!Element>\n *    }}\n */\nlet childNodeTagMap;  // eslint-disable-line no-unused-vars\n\n/**\n * Creates a mapping of childNodes for each supported XML tag for the provided\n * xmlBlock. Logs a warning for any encountered unsupported tags.\n * @param {!Element} xmlBlock XML block element.\n * @return {!childNodeTagMap} The childNode map from nodeName to\n *    node.\n */\nconst mapSupportedXmlTags = function(xmlBlock) {\n  const childNodeMap =\n      {mutation: [], comment: [], data: [], field: [], input: [], next: []};\n  for (let i = 0; i < xmlBlock.childNodes.length; i++) {\n    const xmlChild = xmlBlock.childNodes[i];\n    if (xmlChild.nodeType === dom.NodeType.TEXT_NODE) {\n      // Ignore any text at the <block> level.  It's all whitespace anyway.\n      continue;\n    }\n    switch (xmlChild.nodeName.toLowerCase()) {\n      case 'mutation':\n        childNodeMap.mutation.push(xmlChild);\n        break;\n      case 'comment':\n        if (!goog.module.get('Blockly.Comment')) {\n          console.warn(\n              'Missing require for Comment, ' +\n              'ignoring block comment.');\n          break;\n        }\n        childNodeMap.comment.push(xmlChild);\n        break;\n      case 'data':\n        childNodeMap.data.push(xmlChild);\n        break;\n      case 'title':\n        // Titles were renamed to field in December 2013.\n        // Fall through.\n      case 'field':\n        childNodeMap.field.push(xmlChild);\n        break;\n      case 'value':\n      case 'statement':\n        childNodeMap.input.push(xmlChild);\n        break;\n      case 'next':\n        childNodeMap.next.push(xmlChild);\n        break;\n      default:\n        // Unknown tag; ignore.  Same principle as HTML parsers.\n        console.warn('Ignoring unknown tag: ' + xmlChild.nodeName);\n    }\n  }\n  return childNodeMap;\n};\n\n/**\n * Applies mutation tag child nodes to the given block.\n * @param {!Array<!Element>} xmlChildren Child nodes.\n * @param {!Block} block The block to apply the child nodes on.\n * @return {boolean} True if mutation may have added some elements that need\n *    initialization (requiring initSvg call).\n */\nconst applyMutationTagNodes = function(xmlChildren, block) {\n  let shouldCallInitSvg = false;\n  for (let i = 0; i < xmlChildren.length; i++) {\n    const xmlChild = xmlChildren[i];\n    // Custom data for an advanced block.\n    if (block.domToMutation) {\n      block.domToMutation(xmlChild);\n      if (block.initSvg) {\n        // Mutation may have added some elements that need initializing.\n        shouldCallInitSvg = true;\n      }\n    }\n  }\n  return shouldCallInitSvg;\n};\n\n/**\n * Applies comment tag child nodes to the given block.\n * @param {!Array<!Element>} xmlChildren Child nodes.\n * @param {!Block} block The block to apply the child nodes on.\n */\nconst applyCommentTagNodes = function(xmlChildren, block) {\n  for (let i = 0; i < xmlChildren.length; i++) {\n    const xmlChild = xmlChildren[i];\n    const text = xmlChild.textContent;\n    const pinned = xmlChild.getAttribute('pinned') === 'true';\n    const width = parseInt(xmlChild.getAttribute('w'), 10);\n    const height = parseInt(xmlChild.getAttribute('h'), 10);\n\n    block.setCommentText(text);\n    block.commentModel.pinned = pinned;\n    if (!isNaN(width) && !isNaN(height)) {\n      block.commentModel.size = new Size(width, height);\n    }\n\n    if (pinned && block.getCommentIcon && !block.isInFlyout) {\n      const blockSvg = /** @type {BlockSvg} */ (block);\n      setTimeout(function() {\n        blockSvg.getCommentIcon().setVisible(true);\n      }, 1);\n    }\n  }\n};\n\n/**\n * Applies data tag child nodes to the given block.\n * @param {!Array<!Element>} xmlChildren Child nodes.\n * @param {!Block} block The block to apply the child nodes on.\n */\nconst applyDataTagNodes = function(xmlChildren, block) {\n  for (let i = 0; i < xmlChildren.length; i++) {\n    const xmlChild = xmlChildren[i];\n    block.data = xmlChild.textContent;\n  }\n};\n\n/**\n * Applies field tag child nodes to the given block.\n * @param {!Array<!Element>} xmlChildren Child nodes.\n * @param {!Block} block The block to apply the child nodes on.\n */\nconst applyFieldTagNodes = function(xmlChildren, block) {\n  for (let i = 0; i < xmlChildren.length; i++) {\n    const xmlChild = xmlChildren[i];\n    const nodeName = xmlChild.getAttribute('name');\n    domToField(block, nodeName, xmlChild);\n  }\n};\n\n/**\n * Finds any enclosed blocks or shadows within this XML node.\n * @param {!Element} xmlNode The XML node to extract child block info from.\n * @return {{childBlockElement: ?Element, childShadowElement: ?Element}} Any\n *    found child block.\n */\nconst findChildBlocks = function(xmlNode) {\n  const childBlockInfo = {childBlockElement: null, childShadowElement: null};\n  for (let i = 0; i < xmlNode.childNodes.length; i++) {\n    const xmlChild = xmlNode.childNodes[i];\n    if (xmlChild.nodeType === dom.NodeType.ELEMENT_NODE) {\n      if (xmlChild.nodeName.toLowerCase() === 'block') {\n        childBlockInfo.childBlockElement = /** @type {!Element} */ (xmlChild);\n      } else if (xmlChild.nodeName.toLowerCase() === 'shadow') {\n        childBlockInfo.childShadowElement = /** @type {!Element} */ (xmlChild);\n      }\n    }\n  }\n  return childBlockInfo;\n};\n\n/**\n * Applies input child nodes (value or statement) to the given block.\n * @param {!Array<!Element>} xmlChildren Child nodes.\n * @param {!Workspace} workspace The workspace containing the given\n *    block.\n * @param {!Block} block The block to apply the child nodes on.\n * @param {string} prototypeName The prototype name of the block.\n */\nconst applyInputTagNodes = function(\n    xmlChildren, workspace, block, prototypeName) {\n  for (let i = 0; i < xmlChildren.length; i++) {\n    const xmlChild = xmlChildren[i];\n    const nodeName = xmlChild.getAttribute('name');\n    const input = block.getInput(nodeName);\n    if (!input) {\n      console.warn(\n          'Ignoring non-existent input ' + nodeName + ' in block ' +\n          prototypeName);\n      break;\n    }\n    const childBlockInfo = findChildBlocks(xmlChild);\n    if (childBlockInfo.childBlockElement) {\n      if (!input.connection) {\n        throw TypeError('Input connection does not exist.');\n      }\n      domToBlockHeadless(\n          childBlockInfo.childBlockElement, workspace, input.connection, false);\n    }\n    // Set shadow after so we don't create a shadow we delete immediately.\n    if (childBlockInfo.childShadowElement) {\n      input.connection.setShadowDom(childBlockInfo.childShadowElement);\n    }\n  }\n};\n\n/**\n * Applies next child nodes to the given block.\n * @param {!Array<!Element>} xmlChildren Child nodes.\n * @param {!Workspace} workspace The workspace containing the given\n *    block.\n * @param {!Block} block The block to apply the child nodes on.\n */\nconst applyNextTagNodes = function(xmlChildren, workspace, block) {\n  for (let i = 0; i < xmlChildren.length; i++) {\n    const xmlChild = xmlChildren[i];\n    const childBlockInfo = findChildBlocks(xmlChild);\n    if (childBlockInfo.childBlockElement) {\n      if (!block.nextConnection) {\n        throw TypeError('Next statement does not exist.');\n      }\n      // If there is more than one XML 'next' tag.\n      if (block.nextConnection.isConnected()) {\n        throw TypeError('Next statement is already connected.');\n      }\n      // Create child block.\n      domToBlockHeadless(\n          childBlockInfo.childBlockElement, workspace, block.nextConnection,\n          true);\n    }\n    // Set shadow after so we don't create a shadow we delete immediately.\n    if (childBlockInfo.childShadowElement && block.nextConnection) {\n      block.nextConnection.setShadowDom(childBlockInfo.childShadowElement);\n    }\n  }\n};\n\n\n/**\n * Decode an XML block tag and create a block (and possibly sub blocks) on the\n * workspace.\n * @param {!Element} xmlBlock XML block element.\n * @param {!Workspace} workspace The workspace.\n * @param {!Connection=} parentConnection The parent connection to\n *    to connect this block to after instantiating.\n * @param {boolean=} connectedToParentNext Whether the provided parent\n *     connection\n *    is a next connection, rather than output or statement.\n * @return {!Block} The root block created.\n */\nconst domToBlockHeadless = function(\n    xmlBlock, workspace, parentConnection, connectedToParentNext) {\n  let block = null;\n  const prototypeName = xmlBlock.getAttribute('type');\n  if (!prototypeName) {\n    throw TypeError('Block type unspecified: ' + xmlBlock.outerHTML);\n  }\n  const id = xmlBlock.getAttribute('id');\n  block = workspace.newBlock(prototypeName, id);\n\n  // Preprocess childNodes so tags can be processed in a consistent order.\n  const xmlChildNameMap = mapSupportedXmlTags(xmlBlock);\n\n  const shouldCallInitSvg =\n      applyMutationTagNodes(xmlChildNameMap.mutation, block);\n  applyCommentTagNodes(xmlChildNameMap.comment, block);\n  applyDataTagNodes(xmlChildNameMap.data, block);\n\n  // Connect parent after processing mutation and before setting fields.\n  if (parentConnection) {\n    if (connectedToParentNext) {\n      if (block.previousConnection) {\n        parentConnection.connect(block.previousConnection);\n      } else {\n        throw TypeError('Next block does not have previous statement.');\n      }\n    } else {\n      if (block.outputConnection) {\n        parentConnection.connect(block.outputConnection);\n      } else if (block.previousConnection) {\n        parentConnection.connect(block.previousConnection);\n      } else {\n        throw TypeError(\n            'Child block does not have output or previous statement.');\n      }\n    }\n  }\n\n  applyFieldTagNodes(xmlChildNameMap.field, block);\n  applyInputTagNodes(xmlChildNameMap.input, workspace, block, prototypeName);\n  applyNextTagNodes(xmlChildNameMap.next, workspace, block);\n\n  if (shouldCallInitSvg) {\n    // This shouldn't even be called here\n    // (ref: https://github.com/google/blockly/pull/4296#issuecomment-884226021\n    // But the XML serializer/deserializer is iceboxed so I'm not going to fix\n    // it.\n    (/** @type {!BlockSvg} */ (block)).initSvg();\n  }\n\n  const inline = xmlBlock.getAttribute('inline');\n  if (inline) {\n    block.setInputsInline(inline === 'true');\n  }\n  const disabled = xmlBlock.getAttribute('disabled');\n  if (disabled) {\n    block.setEnabled(disabled !== 'true' && disabled !== 'disabled');\n  }\n  const deletable = xmlBlock.getAttribute('deletable');\n  if (deletable) {\n    block.setDeletable(deletable === 'true');\n  }\n  const movable = xmlBlock.getAttribute('movable');\n  if (movable) {\n    block.setMovable(movable === 'true');\n  }\n  const editable = xmlBlock.getAttribute('editable');\n  if (editable) {\n    block.setEditable(editable === 'true');\n  }\n  const collapsed = xmlBlock.getAttribute('collapsed');\n  if (collapsed) {\n    block.setCollapsed(collapsed === 'true');\n  }\n  if (xmlBlock.nodeName.toLowerCase() === 'shadow') {\n    // Ensure all children are also shadows.\n    const children = block.getChildren(false);\n    for (let i = 0; i < children.length; i++) {\n      const child = children[i];\n      if (!child.isShadow()) {\n        throw TypeError('Shadow block not allowed non-shadow child.');\n      }\n    }\n    // Ensure this block doesn't have any variable inputs.\n    if (block.getVarModels().length) {\n      throw TypeError('Shadow blocks cannot have variable references.');\n    }\n    block.setShadow(true);\n  }\n  return block;\n};\n\n/**\n * Decode an XML field tag and set the value of that field on the given block.\n * @param {!Block} block The block that is currently being deserialized.\n * @param {string} fieldName The name of the field on the block.\n * @param {!Element} xml The field tag to decode.\n */\nconst domToField = function(block, fieldName, xml) {\n  const field = block.getField(fieldName);\n  if (!field) {\n    console.warn(\n        'Ignoring non-existent field ' + fieldName + ' in block ' + block.type);\n    return;\n  }\n  field.fromXml(xml);\n};\n\n/**\n * Remove any 'next' block (statements in a stack).\n * @param {!Element|!DocumentFragment} xmlBlock XML block element or an empty\n *     DocumentFragment if the block was an insertion marker.\n * @alias Blockly.Xml.deleteNext\n */\nconst deleteNext = function(xmlBlock) {\n  for (let i = 0; i < xmlBlock.childNodes.length; i++) {\n    const child = xmlBlock.childNodes[i];\n    if (child.nodeName.toLowerCase() === 'next') {\n      xmlBlock.removeChild(child);\n      break;\n    }\n  }\n};\nexports.deleteNext = deleteNext;\n","/**\n * @license\n * Copyright 2013 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Empty name space for the Message singleton.\n */\n'use strict';\n\n/**\n * Empty name space for the Message singleton.\n * @namespace Blockly.Msg\n */\ngoog.module('Blockly.Msg');\n\n\n/**\n * A dictionary of localised messages.\n * @type {!Object<string>}\n */\nconst Msg = Object.create(null);\nexports.Msg = Msg;\n","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview An enum for the possible types of connections.\n */\n\n'use strict';\n\n/**\n * An enum for the possible types of connections.\n * @namespace Blockly.ConnectionType\n */\ngoog.module('Blockly.ConnectionType');\n\n\n/**\n * Enum for the type of a connection or input.\n * @enum {number}\n * @alias Blockly.ConnectionType\n */\nconst ConnectionType = {\n  // A right-facing value input.  E.g. 'set item to' or 'return'.\n  INPUT_VALUE: 1,\n  // A left-facing value output.  E.g. 'random fraction'.\n  OUTPUT_VALUE: 2,\n  // A down-facing block stack.  E.g. 'if-do' or 'else'.\n  NEXT_STATEMENT: 3,\n  // An up-facing block stack.  E.g. 'break out of loop'.\n  PREVIOUS_STATEMENT: 4,\n};\n\nexports.ConnectionType = ConnectionType;\n","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview An enum for the possible types of inputs.\n */\n\n'use strict';\n\n/**\n * An enum for the possible types of inputs.\n * @namespace Blockly.inputTypes\n */\ngoog.module('Blockly.inputTypes');\n\nconst {ConnectionType} = goog.require('Blockly.ConnectionType');\n\n\n/**\n * Enum for the type of a connection or input.\n * @enum {number}\n * @alias Blockly.inputTypes\n */\nconst inputTypes = {\n  // A right-facing value input.  E.g. 'set item to' or 'return'.\n  VALUE: ConnectionType.INPUT_VALUE,\n  // A down-facing block stack.  E.g. 'if-do' or 'else'.\n  STATEMENT: ConnectionType.NEXT_STATEMENT,\n  // A dummy input.  Used to add field(s) with no input.\n  DUMMY: 5,\n};\n\nexports.inputTypes = inputTypes;\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Utility functions for the toolbox and flyout.\n */\n'use strict';\n\n/**\n * Utility functions for the toolbox and flyout.\n * @namespace Blockly.utils.toolbox\n */\ngoog.module('Blockly.utils.toolbox');\n\nconst Xml = goog.require('Blockly.Xml');\nconst userAgent = goog.require('Blockly.utils.userAgent');\n/* eslint-disable-next-line no-unused-vars */\nconst {ConnectionState} = goog.requireType('Blockly.serialization.blocks');\n/* eslint-disable-next-line no-unused-vars */\nconst {ToolboxCategory} = goog.requireType('Blockly.ToolboxCategory');\n/* eslint-disable-next-line no-unused-vars */\nconst {ToolboxSeparator} = goog.requireType('Blockly.ToolboxSeparator');\n\n/**\n * The information needed to create a block in the toolbox.\n * Note that disabled has a different type for backwards compatibility.\n * @typedef {{\n *            kind:string,\n *            blockxml:(string|!Node|undefined),\n *            type:(string|undefined),\n *            gap:(string|number|undefined),\n *            disabled: (string|boolean|undefined),\n *            enabled: (boolean|undefined),\n *            id: (string|undefined),\n *            x: (number|undefined),\n *            y: (number|undefined),\n *            collapsed: (boolean|undefined),\n *            inline: (boolean|undefined),\n *            data: (string|undefined),\n *            extra-state: (*|undefined),\n *            icons: (!Object<string, *>|undefined),\n *            fields: (!Object<string, *>|undefined),\n *            inputs: (!Object<string, !ConnectionState>|undefined),\n *            next: (!ConnectionState|undefined)\n *          }}\n * @alias Blockly.utils.toolbox.BlockInfo\n */\nlet BlockInfo;\nexports.BlockInfo = BlockInfo;\n\n/**\n * The information needed to create a separator in the toolbox.\n * @typedef {{\n *            kind:string,\n *            id:(string|undefined),\n *            gap:(number|undefined),\n *            cssconfig:(!ToolboxSeparator.CssConfig|undefined)\n *          }}\n * @alias Blockly.utils.toolbox.SeparatorInfo\n */\nlet SeparatorInfo;\nexports.SeparatorInfo = SeparatorInfo;\n\n/**\n * The information needed to create a button in the toolbox.\n * @typedef {{\n *            kind:string,\n *            text:string,\n *            callbackkey:string\n *          }}\n * @alias Blockly.utils.toolbox.ButtonInfo\n */\nlet ButtonInfo;\nexports.ButtonInfo = ButtonInfo;\n\n/**\n * The information needed to create a label in the toolbox.\n * @typedef {{\n *            kind:string,\n *            text:string,\n *            id:(string|undefined)\n *          }}\n * @alias Blockly.utils.toolbox.LabelInfo\n */\nlet LabelInfo;\nexports.LabelInfo = LabelInfo;\n\n/**\n * The information needed to create either a button or a label in the flyout.\n * @typedef {ButtonInfo|\n *           LabelInfo}\n * @alias Blockly.utils.toolbox.ButtonOrLabelInfo\n */\nlet ButtonOrLabelInfo;\nexports.ButtonOrLabelInfo = ButtonOrLabelInfo;\n\n/**\n * The information needed to create a category in the toolbox.\n * @typedef {{\n *            kind:string,\n *            name:string,\n *            contents:!Array<!ToolboxItemInfo>,\n *            id:(string|undefined),\n *            categorystyle:(string|undefined),\n *            colour:(string|undefined),\n *            cssconfig:(!ToolboxCategory.CssConfig|undefined),\n *            hidden:(string|undefined)\n *          }}\n * @alias Blockly.utils.toolbox.StaticCategoryInfo\n */\nlet StaticCategoryInfo;\nexports.StaticCategoryInfo = StaticCategoryInfo;\n\n/**\n * The information needed to create a custom category.\n * @typedef {{\n *            kind:string,\n *            custom:string,\n *            id:(string|undefined),\n *            categorystyle:(string|undefined),\n *            colour:(string|undefined),\n *            cssconfig:(!ToolboxCategory.CssConfig|undefined),\n *            hidden:(string|undefined)\n *          }}\n * @alias Blockly.utils.toolbox.DynamicCategoryInfo\n */\nlet DynamicCategoryInfo;\nexports.DynamicCategoryInfo = DynamicCategoryInfo;\n\n/**\n * The information needed to create either a dynamic or static category.\n * @typedef {StaticCategoryInfo|\n *           DynamicCategoryInfo}\n * @alias Blockly.utils.toolbox.CategoryInfo\n */\nlet CategoryInfo;\nexports.CategoryInfo = CategoryInfo;\n\n/**\n * Any information that can be used to create an item in the toolbox.\n * @typedef {FlyoutItemInfo|\n *           StaticCategoryInfo}\n * @alias Blockly.utils.toolbox.ToolboxItemInfo\n */\nlet ToolboxItemInfo;\nexports.ToolboxItemInfo = ToolboxItemInfo;\n\n/**\n * All the different types that can be displayed in a flyout.\n * @typedef {BlockInfo|\n *           SeparatorInfo|\n *           ButtonInfo|\n *           LabelInfo|\n *           DynamicCategoryInfo}\n * @alias Blockly.utils.toolbox.FlyoutItemInfo\n */\nlet FlyoutItemInfo;\nexports.FlyoutItemInfo = FlyoutItemInfo;\n\n/**\n * The JSON definition of a toolbox.\n * @typedef {{\n *            kind:(string|undefined),\n *            contents:!Array<!ToolboxItemInfo>\n *          }}\n * @alias Blockly.utils.toolbox.ToolboxInfo\n */\nlet ToolboxInfo;\nexports.ToolboxInfo = ToolboxInfo;\n\n/**\n * An array holding flyout items.\n * @typedef {\n *            Array<!FlyoutItemInfo>\n *          }\n * @alias Blockly.utils.toolbox.FlyoutItemInfoArray\n */\nlet FlyoutItemInfoArray;\nexports.FlyoutItemInfoArray = FlyoutItemInfoArray;\n\n/**\n * All of the different types that can create a toolbox.\n * @typedef {Node|\n *           ToolboxInfo|\n *           string}\n * @alias Blockly.utils.toolbox.ToolboxDefinition\n */\nlet ToolboxDefinition;\nexports.ToolboxDefinition = ToolboxDefinition;\n\n/**\n * All of the different types that can be used to show items in a flyout.\n * @typedef {FlyoutItemInfoArray|\n *           NodeList|\n *           ToolboxInfo|\n *           Array<!Node>}\n * @alias Blockly.utils.toolbox.FlyoutDefinition\n */\nlet FlyoutDefinition;\nexports.FlyoutDefinition = FlyoutDefinition;\n\n/**\n * The name used to identify a toolbox that has category like items.\n * This only needs to be used if a toolbox wants to be treated like a category\n * toolbox but does not actually contain any toolbox items with the kind\n * 'category'.\n * @const {string}\n */\nconst CATEGORY_TOOLBOX_KIND = 'categoryToolbox';\n\n/**\n * The name used to identify a toolbox that has no categories and is displayed\n * as a simple flyout displaying blocks, buttons, or labels.\n * @const {string}\n */\nconst FLYOUT_TOOLBOX_KIND = 'flyoutToolbox';\n\n/**\n * Position of the toolbox and/or flyout relative to the workspace.\n * @enum {number}\n * @alias Blockly.utils.toolbox.Position\n */\nconst Position = {\n  TOP: 0,\n  BOTTOM: 1,\n  LEFT: 2,\n  RIGHT: 3,\n};\nexports.Position = Position;\n\n/**\n * Converts the toolbox definition into toolbox JSON.\n * @param {?ToolboxDefinition} toolboxDef The definition\n *     of the toolbox in one of its many forms.\n * @return {?ToolboxInfo} Object holding information\n *     for creating a toolbox.\n * @alias Blockly.utils.toolbox.convertToolboxDefToJson\n * @package\n */\nconst convertToolboxDefToJson = function(toolboxDef) {\n  if (!toolboxDef) {\n    return null;\n  }\n\n  if (toolboxDef instanceof Element || typeof toolboxDef === 'string') {\n    toolboxDef = parseToolboxTree(toolboxDef);\n    toolboxDef = convertToToolboxJson(toolboxDef);\n  }\n\n  const toolboxJson = /** @type {ToolboxInfo} */ (toolboxDef);\n  validateToolbox(toolboxJson);\n  return toolboxJson;\n};\nexports.convertToolboxDefToJson = convertToolboxDefToJson;\n\n/**\n * Validates the toolbox JSON fields have been set correctly.\n * @param {!ToolboxInfo} toolboxJson Object holding\n *     information for creating a toolbox.\n * @throws {Error} if the toolbox is not the correct format.\n */\nconst validateToolbox = function(toolboxJson) {\n  const toolboxKind = toolboxJson['kind'];\n  const toolboxContents = toolboxJson['contents'];\n\n  if (toolboxKind) {\n    if (toolboxKind !== FLYOUT_TOOLBOX_KIND &&\n        toolboxKind !== CATEGORY_TOOLBOX_KIND) {\n      throw Error(\n          'Invalid toolbox kind ' + toolboxKind + '.' +\n          ' Please supply either ' + FLYOUT_TOOLBOX_KIND + ' or ' +\n          CATEGORY_TOOLBOX_KIND);\n    }\n  }\n  if (!toolboxContents) {\n    throw Error('Toolbox must have a contents attribute.');\n  }\n};\n\n/**\n * Converts the flyout definition into a list of flyout items.\n * @param {?FlyoutDefinition} flyoutDef The definition of\n *    the flyout in one of its many forms.\n * @return {!FlyoutItemInfoArray} A list of flyout items.\n * @alias Blockly.utils.toolbox.convertFlyoutDefToJsonArray\n * @package\n */\nconst convertFlyoutDefToJsonArray = function(flyoutDef) {\n  if (!flyoutDef) {\n    return [];\n  }\n\n  if (flyoutDef['contents']) {\n    return flyoutDef['contents'];\n  }\n\n  // If it is already in the correct format return the flyoutDef.\n  if (Array.isArray(flyoutDef) && flyoutDef.length > 0 &&\n      !flyoutDef[0].nodeType) {\n    return flyoutDef;\n  }\n\n  return xmlToJsonArray(/** @type {!Array<Node>|!NodeList} */ (flyoutDef));\n};\nexports.convertFlyoutDefToJsonArray = convertFlyoutDefToJsonArray;\n\n/**\n * Whether or not the toolbox definition has categories.\n * @param {?ToolboxInfo} toolboxJson Object holding\n *     information for creating a toolbox.\n * @return {boolean} True if the toolbox has categories.\n * @alias Blockly.utils.toolbox.hasCategories\n * @package\n */\nconst hasCategories = function(toolboxJson) {\n  if (!toolboxJson) {\n    return false;\n  }\n\n  const toolboxKind = toolboxJson['kind'];\n  if (toolboxKind) {\n    return toolboxKind === CATEGORY_TOOLBOX_KIND;\n  }\n\n  const categories = toolboxJson['contents'].filter(function(item) {\n    return item['kind'].toUpperCase() === 'CATEGORY';\n  });\n  return !!categories.length;\n};\nexports.hasCategories = hasCategories;\n\n/**\n * Whether or not the category is collapsible.\n * @param {!CategoryInfo} categoryInfo Object holing\n *    information for creating a category.\n * @return {boolean} True if the category has subcategories.\n * @alias Blockly.utils.toolbox.isCategoryCollapsible\n * @package\n */\nconst isCategoryCollapsible = function(categoryInfo) {\n  if (!categoryInfo || !categoryInfo['contents']) {\n    return false;\n  }\n\n  const categories = categoryInfo['contents'].filter(function(item) {\n    return item['kind'].toUpperCase() === 'CATEGORY';\n  });\n  return !!categories.length;\n};\nexports.isCategoryCollapsible = isCategoryCollapsible;\n\n/**\n * Parses the provided toolbox definition into a consistent format.\n * @param {Node} toolboxDef The definition of the toolbox in one of its many\n *     forms.\n * @return {!ToolboxInfo} Object holding information\n *     for creating a toolbox.\n */\nconst convertToToolboxJson = function(toolboxDef) {\n  const contents = xmlToJsonArray(\n      /** @type {!Node|!Array<Node>} */ (toolboxDef));\n  const toolboxJson = {'contents': contents};\n  if (toolboxDef instanceof Node) {\n    addAttributes(toolboxDef, toolboxJson);\n  }\n  return toolboxJson;\n};\n\n/**\n * Converts the xml for a toolbox to JSON.\n * @param {!Node|!Array<Node>|!NodeList} toolboxDef The\n *     definition of the toolbox in one of its many forms.\n * @return {!FlyoutItemInfoArray|\n *          !Array<ToolboxItemInfo>} A list of objects in\n *          the toolbox.\n */\nconst xmlToJsonArray = function(toolboxDef) {\n  const arr = [];\n  // If it is a node it will have children.\n  let childNodes = toolboxDef.childNodes;\n  if (!childNodes) {\n    // Otherwise the toolboxDef is an array or collection.\n    childNodes = toolboxDef;\n  }\n  for (let i = 0, child; (child = childNodes[i]); i++) {\n    if (!child.tagName) {\n      continue;\n    }\n    const obj = {};\n    const tagName = child.tagName.toUpperCase();\n    obj['kind'] = tagName;\n\n    // Store the XML for a block.\n    if (tagName === 'BLOCK') {\n      obj['blockxml'] = child;\n    } else if (child.childNodes && child.childNodes.length > 0) {\n      // Get the contents of a category\n      obj['contents'] = xmlToJsonArray(child);\n    }\n\n    // Add XML attributes to object\n    addAttributes(child, obj);\n    arr.push(obj);\n  }\n  return arr;\n};\n\n/**\n * Adds the attributes on the node to the given object.\n * @param {!Node} node The node to copy the attributes from.\n * @param {!Object} obj The object to copy the attributes to.\n */\nconst addAttributes = function(node, obj) {\n  for (let j = 0; j < node.attributes.length; j++) {\n    const attr = node.attributes[j];\n    if (attr.nodeName.indexOf('css-') > -1) {\n      obj['cssconfig'] = obj['cssconfig'] || {};\n      obj['cssconfig'][attr.nodeName.replace('css-', '')] = attr.value;\n    } else {\n      obj[attr.nodeName] = attr.value;\n    }\n  }\n};\n\n/**\n * Parse the provided toolbox tree into a consistent DOM format.\n * @param {?Node|?string} toolboxDef DOM tree of blocks, or text representation\n *    of same.\n * @return {?Node} DOM tree of blocks, or null.\n * @alias Blockly.utils.toolbox.parseToolboxTree\n */\nconst parseToolboxTree = function(toolboxDef) {\n  if (toolboxDef) {\n    if (typeof toolboxDef !== 'string') {\n      if (userAgent.IE && toolboxDef.outerHTML) {\n        // In this case the tree will not have been properly built by the\n        // browser. The HTML will be contained in the element, but it will\n        // not have the proper DOM structure since the browser doesn't support\n        // XSLTProcessor (XML -> HTML).\n        toolboxDef = toolboxDef.outerHTML;\n      } else if (!(toolboxDef instanceof Element)) {\n        toolboxDef = null;\n      }\n    }\n    if (typeof toolboxDef === 'string') {\n      toolboxDef = Xml.textToDom(toolboxDef);\n      if (toolboxDef.nodeName.toLowerCase() !== 'xml') {\n        throw TypeError('Toolbox should be an <xml> document.');\n      }\n    }\n  } else {\n    toolboxDef = null;\n  }\n  return toolboxDef;\n};\nexports.parseToolboxTree = parseToolboxTree;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Utility methods for objects.\n */\n'use strict';\n\n/**\n * Utility methods for objects.\n * @namespace Blockly.utils.object\n */\ngoog.module('Blockly.utils.object');\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n * @param {!Function} childCtor Child class.\n * @param {!Function} parentCtor Parent class.\n * @suppress {strictMissingProperties} superClass_ is not defined on Function.\n * @alias Blockly.utils.object.inherits\n */\nconst inherits = function(childCtor, parentCtor) {\n  // Set a .superClass_ property so that methods can call parent methods\n  // without hard-coding the parent class name.\n  // Could be replaced by ES6's super().\n  childCtor.superClass_ = parentCtor.prototype;\n\n  // Link the child class to the parent class so that static methods inherit.\n  Object.setPrototypeOf(childCtor, parentCtor);\n\n  // Replace the child constructor's prototype object with an instance\n  // of the parent class.\n  childCtor.prototype = Object.create(parentCtor.prototype);\n  childCtor.prototype.constructor = childCtor;\n  // Alternatively, one could use this instead:\n  // Object.setPrototypeOf(childCtor.prototype, parentCtor.prototype);\n};\nexports.inherits = inherits;\n\n/**\n * Copies all the members of a source object to a target object.\n * @param {!Object} target Target.\n * @param {!Object} source Source.\n * @alias Blockly.utils.object.mixin\n */\nconst mixin = function(target, source) {\n  for (const x in source) {\n    target[x] = source[x];\n  }\n};\nexports.mixin = mixin;\n\n/**\n * Complete a deep merge of all members of a source object with a target object.\n * @param {!Object} target Target.\n * @param {!Object} source Source.\n * @return {!Object} The resulting object.\n * @alias Blockly.utils.object.deepMerge\n */\nconst deepMerge = function(target, source) {\n  for (const x in source) {\n    if (source[x] !== null && typeof source[x] === 'object') {\n      target[x] = deepMerge(target[x] || Object.create(null), source[x]);\n    } else {\n      target[x] = source[x];\n    }\n  }\n  return target;\n};\nexports.deepMerge = deepMerge;\n\n/**\n * Returns an array of a given object's own enumerable property values.\n * @param {!Object} obj Object containing values.\n * @return {!Array} Array of values.\n * @alias Blockly.utils.object.values\n */\nconst values = function(obj) {\n  if (Object.values) {\n    return Object.values(obj);\n  }\n  // Fallback for IE.\n  return Object.keys(obj).map(function(e) {\n    return obj[e];\n  });\n};\nexports.values = values;\n","/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The class representing a theme.\n */\n'use strict';\n\n/**\n * The class representing a theme.\n * @class\n */\ngoog.module('Blockly.Theme');\n\nconst object = goog.require('Blockly.utils.object');\nconst registry = goog.require('Blockly.registry');\n\n\n/**\n * Class for a theme.\n * @alias Blockly.Theme\n */\nclass Theme {\n  /**\n   * @param {string} name Theme name.\n   * @param {!Object<string, Theme.BlockStyle>=} opt_blockStyles A map\n   *     from style names (strings) to objects with style attributes for blocks.\n   * @param {!Object<string, Theme.CategoryStyle>=} opt_categoryStyles A\n   *     map from style names (strings) to objects with style attributes for\n   *     categories.\n   * @param {!Theme.ComponentStyle=} opt_componentStyles A map of Blockly\n   *     component names to style value.\n   */\n  constructor(name, opt_blockStyles, opt_categoryStyles, opt_componentStyles) {\n    /**\n     * The theme name. This can be used to reference a specific theme in CSS.\n     * @type {string}\n     */\n    this.name = name;\n\n    /**\n     * The block styles map.\n     * @type {!Object<string, !Theme.BlockStyle>}\n     * @package\n     */\n    this.blockStyles = opt_blockStyles || Object.create(null);\n\n    /**\n     * The category styles map.\n     * @type {!Object<string, Theme.CategoryStyle>}\n     * @package\n     */\n    this.categoryStyles = opt_categoryStyles || Object.create(null);\n\n    /**\n     * The UI components styles map.\n     * @type {!Theme.ComponentStyle}\n     * @package\n     */\n    this.componentStyles = opt_componentStyles ||\n        (/** @type {Theme.ComponentStyle} */ (Object.create(null)));\n\n    /**\n     * The font style.\n     * @type {!Theme.FontStyle}\n     * @package\n     */\n    this.fontStyle = /** @type {Theme.FontStyle} */ (Object.create(null));\n\n    /**\n     * Whether or not to add a 'hat' on top of all blocks with no previous or\n     * output connections.\n     * @type {?boolean}\n     * @package\n     */\n    this.startHats = null;\n\n    // Register the theme by name.\n    registry.register(registry.Type.THEME, name, this);\n  }\n  /**\n   * Gets the class name that identifies this theme.\n   * @return {string} The CSS class name.\n   * @package\n   */\n  getClassName() {\n    return this.name + '-theme';\n  }\n  /**\n   * Overrides or adds a style to the blockStyles map.\n   * @param {string} blockStyleName The name of the block style.\n   * @param {Theme.BlockStyle} blockStyle The block style.\n   */\n  setBlockStyle(blockStyleName, blockStyle) {\n    this.blockStyles[blockStyleName] = blockStyle;\n  }\n  /**\n   * Overrides or adds a style to the categoryStyles map.\n   * @param {string} categoryStyleName The name of the category style.\n   * @param {Theme.CategoryStyle} categoryStyle The category style.\n   */\n  setCategoryStyle(categoryStyleName, categoryStyle) {\n    this.categoryStyles[categoryStyleName] = categoryStyle;\n  }\n  /**\n   * Gets the style for a given Blockly UI component.  If the style value is a\n   * string, we attempt to find the value of any named references.\n   * @param {string} componentName The name of the component.\n   * @return {?string} The style value.\n   */\n  getComponentStyle(componentName) {\n    const style = this.componentStyles[componentName];\n    if (style && typeof style === 'string' &&\n        this.getComponentStyle(/** @type {string} */ (style))) {\n      return this.getComponentStyle(/** @type {string} */ (style));\n    }\n    return style ? String(style) : null;\n  }\n  /**\n   * Configure a specific Blockly UI component with a style value.\n   * @param {string} componentName The name of the component.\n   * @param {*} styleValue The style value.\n   */\n  setComponentStyle(componentName, styleValue) {\n    this.componentStyles[componentName] = styleValue;\n  }\n  /**\n   * Configure a theme's font style.\n   * @param {Theme.FontStyle} fontStyle The font style.\n   */\n  setFontStyle(fontStyle) {\n    this.fontStyle = fontStyle;\n  }\n  /**\n   * Configure a theme's start hats.\n   * @param {boolean} startHats True if the theme enables start hats, false\n   *     otherwise.\n   */\n  setStartHats(startHats) {\n    this.startHats = startHats;\n  }\n  /**\n   * Define a new Blockly theme.\n   * @param {string} name The name of the theme.\n   * @param {!Object} themeObj An object containing theme properties.\n   * @return {!Theme} A new Blockly theme.\n   */\n  static defineTheme(name, themeObj) {\n    const theme = new Theme(name);\n    let base = themeObj['base'];\n    if (base) {\n      if (typeof base === 'string') {\n        base = registry.getObject(registry.Type.THEME, base);\n      }\n      if (base instanceof Theme) {\n        object.deepMerge(theme, base);\n        theme.name = name;\n      }\n    }\n\n    object.deepMerge(theme.blockStyles, themeObj['blockStyles']);\n    object.deepMerge(theme.categoryStyles, themeObj['categoryStyles']);\n    object.deepMerge(theme.componentStyles, themeObj['componentStyles']);\n    object.deepMerge(theme.fontStyle, themeObj['fontStyle']);\n    if (themeObj['startHats'] !== null) {\n      theme.startHats = themeObj['startHats'];\n    }\n\n    return theme;\n  }\n}\n\n/**\n * A block style.\n * @typedef {{\n *            colourPrimary:string,\n *            colourSecondary:string,\n *            colourTertiary:string,\n *            hat:string\n *          }}\n */\nTheme.BlockStyle;\n\n/**\n * A category style.\n * @typedef {{\n *            colour:string\n *          }}\n */\nTheme.CategoryStyle;\n\n/**\n * A component style.\n * @typedef {{\n *            workspaceBackgroundColour:?string,\n *            toolboxBackgroundColour:?string,\n *            toolboxForegroundColour:?string,\n *            flyoutBackgroundColour:?string,\n *            flyoutForegroundColour:?string,\n *            flyoutOpacity:?number,\n *            scrollbarColour:?string,\n *            scrollbarOpacity:?number,\n *            insertionMarkerColour:?string,\n *            insertionMarkerOpacity:?number,\n *            markerColour:?string,\n *            cursorColour:?string,\n *            selectedGlowColour:?string,\n *            selectedGlowOpacity:?number,\n *            replacementGlowColour:?string,\n *            replacementGlowOpacity:?number\n *          }}\n */\nTheme.ComponentStyle;\n\n/**\n * A font style.\n * @typedef {{\n *            family:?string,\n *            weight:?string,\n *            size:?number\n *          }}\n */\nTheme.FontStyle;\n\nexports.Theme = Theme;\n","/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Classic theme.\n * Contains multi-coloured border to create shadow effect.\n */\n'use strict';\n\n/**\n * Classic theme.\n * Contains multi-coloured border to create shadow effect.\n * @namespace Blockly.Themes.Classic\n */\ngoog.module('Blockly.Themes.Classic');\n\nconst {Theme} = goog.require('Blockly.Theme');\n\n\nconst defaultBlockStyles = {\n  'colour_blocks': {'colourPrimary': '20'},\n  'list_blocks': {'colourPrimary': '260'},\n  'logic_blocks': {'colourPrimary': '210'},\n  'loop_blocks': {'colourPrimary': '120'},\n  'math_blocks': {'colourPrimary': '230'},\n  'procedure_blocks': {'colourPrimary': '290'},\n  'text_blocks': {'colourPrimary': '160'},\n  'variable_blocks': {'colourPrimary': '330'},\n  'variable_dynamic_blocks': {'colourPrimary': '310'},\n  'hat_blocks': {'colourPrimary': '330', 'hat': 'cap'},\n};\n\nconst categoryStyles = {\n  'colour_category': {'colour': '20'},\n  'list_category': {'colour': '260'},\n  'logic_category': {'colour': '210'},\n  'loop_category': {'colour': '120'},\n  'math_category': {'colour': '230'},\n  'procedure_category': {'colour': '290'},\n  'text_category': {'colour': '160'},\n  'variable_category': {'colour': '330'},\n  'variable_dynamic_category': {'colour': '310'},\n};\n\n/**\n * Classic theme.\n * Contains multi-coloured border to create shadow effect.\n * @type {Theme}\n * @alias Blockly.Themes.Classic\n */\nconst Classic = new Theme('classic', defaultBlockStyles, categoryStyles);\n\nexports.Classic = Classic;\n","/**\n * @license\n * Copyright 2016 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Object that controls settings for the workspace.\n */\n'use strict';\n\n/**\n * Object that controls settings for the workspace.\n * @class\n */\ngoog.module('Blockly.Options');\n\nconst idGenerator = goog.require('Blockly.utils.idGenerator');\nconst registry = goog.require('Blockly.registry');\nconst toolbox = goog.require('Blockly.utils.toolbox');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlocklyOptions} = goog.requireType('Blockly.BlocklyOptions');\nconst {Classic} = goog.require('Blockly.Themes.Classic');\n/* eslint-disable-next-line no-unused-vars */\nconst {Metrics} = goog.requireType('Blockly.utils.Metrics');\nconst {Theme} = goog.require('Blockly.Theme');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceSvg} = goog.requireType('Blockly.WorkspaceSvg');\n\n\n/**\n * Parse the user-specified options, using reasonable defaults where behaviour\n * is unspecified.\n * @alias Blockly.Options\n */\nclass Options {\n  /**\n   * @param {!BlocklyOptions} options Dictionary of options.\n   *     Specification:\n   * https://developers.google.com/blockly/guides/get-started/web#configuration\n   */\n  constructor(options) {\n    let toolboxJsonDef = null;\n    let hasCategories = false;\n    let hasTrashcan = false;\n    let hasCollapse = false;\n    let hasComments = false;\n    let hasDisable = false;\n    let hasSounds = false;\n    const readOnly = !!options['readOnly'];\n    if (!readOnly) {\n      toolboxJsonDef = toolbox.convertToolboxDefToJson(options['toolbox']);\n      hasCategories = toolbox.hasCategories(toolboxJsonDef);\n      hasTrashcan = options['trashcan'];\n      if (hasTrashcan === undefined) {\n        hasTrashcan = hasCategories;\n      }\n      hasCollapse = options['collapse'];\n      if (hasCollapse === undefined) {\n        hasCollapse = hasCategories;\n      }\n      hasComments = options['comments'];\n      if (hasComments === undefined) {\n        hasComments = hasCategories;\n      }\n      hasDisable = options['disable'];\n      if (hasDisable === undefined) {\n        hasDisable = hasCategories;\n      }\n      hasSounds = options['sounds'];\n      if (hasSounds === undefined) {\n        hasSounds = true;\n      }\n    }\n\n    let maxTrashcanContents = options['maxTrashcanContents'];\n    if (hasTrashcan) {\n      if (maxTrashcanContents === undefined) {\n        maxTrashcanContents = 32;\n      }\n    } else {\n      maxTrashcanContents = 0;\n    }\n    const rtl = !!options['rtl'];\n    let horizontalLayout = options['horizontalLayout'];\n    if (horizontalLayout === undefined) {\n      horizontalLayout = false;\n    }\n    let toolboxAtStart = options['toolboxPosition'];\n    toolboxAtStart = toolboxAtStart !== 'end';\n\n    /** @type {!toolbox.Position} */\n    let toolboxPosition;\n    if (horizontalLayout) {\n      toolboxPosition =\n          toolboxAtStart ? toolbox.Position.TOP : toolbox.Position.BOTTOM;\n    } else {\n      toolboxPosition = (toolboxAtStart === rtl) ? toolbox.Position.RIGHT :\n                                                   toolbox.Position.LEFT;\n    }\n\n    let hasCss = options['css'];\n    if (hasCss === undefined) {\n      hasCss = true;\n    }\n    let pathToMedia = 'https://blockly-demo.appspot.com/static/media/';\n    if (options['media']) {\n      pathToMedia = options['media'];\n    } else if (options['path']) {\n      // 'path' is a deprecated option which has been replaced by 'media'.\n      pathToMedia = options['path'] + 'media/';\n    }\n    let oneBasedIndex;\n    if (options['oneBasedIndex'] === undefined) {\n      oneBasedIndex = true;\n    } else {\n      oneBasedIndex = !!options['oneBasedIndex'];\n    }\n    const renderer = options['renderer'] || 'geras';\n\n    const plugins = options['plugins'] || {};\n\n    /** @type {boolean} */\n    this.RTL = rtl;\n    /** @type {boolean} */\n    this.oneBasedIndex = oneBasedIndex;\n    /** @type {boolean} */\n    this.collapse = hasCollapse;\n    /** @type {boolean} */\n    this.comments = hasComments;\n    /** @type {boolean} */\n    this.disable = hasDisable;\n    /** @type {boolean} */\n    this.readOnly = readOnly;\n    /** @type {number} */\n    this.maxBlocks = options['maxBlocks'] || Infinity;\n    /** @type {?Object<string, number>} */\n    this.maxInstances = options['maxInstances'];\n    /** @type {string} */\n    this.pathToMedia = pathToMedia;\n    /** @type {boolean} */\n    this.hasCategories = hasCategories;\n    /** @type {!Options.MoveOptions} */\n    this.moveOptions = Options.parseMoveOptions_(options, hasCategories);\n    /** @deprecated  January 2019 */\n    this.hasScrollbars = !!this.moveOptions.scrollbars;\n    /** @type {boolean} */\n    this.hasTrashcan = hasTrashcan;\n    /** @type {number} */\n    this.maxTrashcanContents = maxTrashcanContents;\n    /** @type {boolean} */\n    this.hasSounds = hasSounds;\n    /** @type {boolean} */\n    this.hasCss = hasCss;\n    /** @type {boolean} */\n    this.horizontalLayout = horizontalLayout;\n    /** @type {?toolbox.ToolboxInfo} */\n    this.languageTree = toolboxJsonDef;\n    /** @type {!Options.GridOptions} */\n    this.gridOptions = Options.parseGridOptions_(options);\n    /** @type {!Options.ZoomOptions} */\n    this.zoomOptions = Options.parseZoomOptions_(options);\n    /** @type {!toolbox.Position} */\n    this.toolboxPosition = toolboxPosition;\n    /** @type {!Theme} */\n    this.theme = Options.parseThemeOptions_(options);\n    /** @type {string} */\n    this.renderer = renderer;\n    /** @type {?Object} */\n    this.rendererOverrides = options['rendererOverrides'];\n\n    /**\n     * The SVG element for the grid pattern.\n     * Created during injection.\n     * @type {?SVGElement}\n     */\n    this.gridPattern = null;\n\n    /**\n     * The parent of the current workspace, or null if there is no parent\n     * workspace.  We can assert that this is of type WorkspaceSvg as opposed to\n     * Workspace as this is only used in a rendered workspace.\n     * @type {?WorkspaceSvg}\n     */\n    this.parentWorkspace = options['parentWorkspace'];\n\n    /**\n     * Map of plugin type to name of registered plugin or plugin class.\n     * @type {!Object<string, (function(new:?, ...?)|string)>}\n     */\n    this.plugins = plugins;\n\n    /**\n     * If set, sets the translation of the workspace to match the scrollbars.\n     * @type {undefined|function(!{x:number,y:number}):void} A function that\n     *     sets the translation of the workspace to match the scrollbars. The\n     *     argument Contains an x and/or y property which is a float between 0\n     *     and 1 specifying the degree of scrolling.\n     */\n    this.setMetrics = undefined;\n\n    /**\n     * @type {undefined|function():!Metrics} A function that returns a metrics\n     *     object that describes the current workspace.\n     */\n    this.getMetrics = undefined;\n  }\n\n  /**\n   * Parse the user-specified move options, using reasonable defaults where\n   *    behaviour is unspecified.\n   * @param {!Object} options Dictionary of options.\n   * @param {boolean} hasCategories Whether the workspace has categories or not.\n   * @return {!Options.MoveOptions} Normalized move options.\n   * @private\n   */\n  static parseMoveOptions_(options, hasCategories) {\n    const move = options['move'] || {};\n    const moveOptions = {};\n    if (move['scrollbars'] === undefined &&\n        options['scrollbars'] === undefined) {\n      moveOptions.scrollbars = hasCategories;\n    } else if (typeof move['scrollbars'] === 'object') {\n      moveOptions.scrollbars = {};\n      moveOptions.scrollbars.horizontal = !!move['scrollbars']['horizontal'];\n      moveOptions.scrollbars.vertical = !!move['scrollbars']['vertical'];\n      // Convert scrollbars object to boolean if they have the same value.\n      // This allows us to easily check for whether any scrollbars exist using\n      // !!moveOptions.scrollbars.\n      if (moveOptions.scrollbars.horizontal &&\n          moveOptions.scrollbars.vertical) {\n        moveOptions.scrollbars = true;\n      } else if (\n          !moveOptions.scrollbars.horizontal &&\n          !moveOptions.scrollbars.vertical) {\n        moveOptions.scrollbars = false;\n      }\n    } else {\n      moveOptions.scrollbars = !!move['scrollbars'] || !!options['scrollbars'];\n    }\n\n    if (!moveOptions.scrollbars || move['wheel'] === undefined) {\n      // Defaults to true if single-direction scroll is enabled.\n      moveOptions.wheel = typeof moveOptions.scrollbars === 'object';\n    } else {\n      moveOptions.wheel = !!move['wheel'];\n    }\n    if (!moveOptions.scrollbars) {\n      moveOptions.drag = false;\n    } else if (move['drag'] === undefined) {\n      // Defaults to true if scrollbars is true.\n      moveOptions.drag = true;\n    } else {\n      moveOptions.drag = !!move['drag'];\n    }\n    return moveOptions;\n  }\n\n  /**\n   * Parse the user-specified zoom options, using reasonable defaults where\n   * behaviour is unspecified.  See zoom documentation:\n   *   https://developers.google.com/blockly/guides/configure/web/zoom\n   * @param {!Object} options Dictionary of options.\n   * @return {!Options.ZoomOptions} Normalized zoom options.\n   * @private\n   */\n  static parseZoomOptions_(options) {\n    const zoom = options['zoom'] || {};\n    const zoomOptions = {};\n    if (zoom['controls'] === undefined) {\n      zoomOptions.controls = false;\n    } else {\n      zoomOptions.controls = !!zoom['controls'];\n    }\n    if (zoom['wheel'] === undefined) {\n      zoomOptions.wheel = false;\n    } else {\n      zoomOptions.wheel = !!zoom['wheel'];\n    }\n    if (zoom['startScale'] === undefined) {\n      zoomOptions.startScale = 1;\n    } else {\n      zoomOptions.startScale = Number(zoom['startScale']);\n    }\n    if (zoom['maxScale'] === undefined) {\n      zoomOptions.maxScale = 3;\n    } else {\n      zoomOptions.maxScale = Number(zoom['maxScale']);\n    }\n    if (zoom['minScale'] === undefined) {\n      zoomOptions.minScale = 0.3;\n    } else {\n      zoomOptions.minScale = Number(zoom['minScale']);\n    }\n    if (zoom['scaleSpeed'] === undefined) {\n      zoomOptions.scaleSpeed = 1.2;\n    } else {\n      zoomOptions.scaleSpeed = Number(zoom['scaleSpeed']);\n    }\n    if (zoom['pinch'] === undefined) {\n      zoomOptions.pinch = zoomOptions.wheel || zoomOptions.controls;\n    } else {\n      zoomOptions.pinch = !!zoom['pinch'];\n    }\n    return zoomOptions;\n  }\n\n  /**\n   * Parse the user-specified grid options, using reasonable defaults where\n   * behaviour is unspecified. See grid documentation:\n   *   https://developers.google.com/blockly/guides/configure/web/grid\n   * @param {!Object} options Dictionary of options.\n   * @return {!Options.GridOptions} Normalized grid options.\n   * @private\n   */\n  static parseGridOptions_(options) {\n    const grid = options['grid'] || {};\n    const gridOptions = {};\n    gridOptions.spacing = Number(grid['spacing']) || 0;\n    gridOptions.colour = grid['colour'] || '#888';\n    gridOptions.length =\n        (grid['length'] === undefined) ? 1 : Number(grid['length']);\n    gridOptions.snap = gridOptions.spacing > 0 && !!grid['snap'];\n    return gridOptions;\n  }\n\n  /**\n   * Parse the user-specified theme options, using the classic theme as a\n   * default. https://developers.google.com/blockly/guides/configure/web/themes\n   * @param {!Object} options Dictionary of options.\n   * @return {!Theme} A Blockly Theme.\n   * @private\n   */\n  static parseThemeOptions_(options) {\n    const theme = options['theme'] || Classic;\n    if (typeof theme === 'string') {\n      return /** @type {!Theme} */ (\n          registry.getObject(registry.Type.THEME, theme));\n    } else if (theme instanceof Theme) {\n      return /** @type {!Theme} */ (theme);\n    }\n    return Theme.defineTheme(\n        theme.name || ('builtin' + idGenerator.getNextUniqueId()), theme);\n  }\n}\n\n/**\n * Grid Options.\n * @typedef {{\n *     colour: string,\n *     length: number,\n *     snap: boolean,\n *     spacing: number\n * }}\n */\nOptions.GridOptions;\n\n/**\n * Move Options.\n * @typedef {{\n *     drag: boolean,\n *     scrollbars: (boolean | !Options.ScrollbarOptions),\n *     wheel: boolean\n * }}\n */\nOptions.MoveOptions;\n\n/**\n * Scrollbar Options.\n * @typedef {{\n *     horizontal: boolean,\n *     vertical: boolean\n * }}\n */\nOptions.ScrollbarOptions;\n\n/**\n * Zoom Options.\n * @typedef {{\n *     controls: boolean,\n *     maxScale: number,\n *     minScale: number,\n *     pinch: boolean,\n *     scaleSpeed: number,\n *     startScale: number,\n *     wheel: boolean\n * }}\n */\nOptions.ZoomOptions;\n\nexports.Options = Options;\n","/**\n * @license\n * Copyright 2011 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Object representing a scrollbar.\n */\n'use strict';\n\n/**\n * Object representing a scrollbar.\n * @class\n */\ngoog.module('Blockly.Scrollbar');\n\nconst Touch = goog.require('Blockly.Touch');\nconst browserEvents = goog.require('Blockly.browserEvents');\nconst dom = goog.require('Blockly.utils.dom');\nconst svgMath = goog.require('Blockly.utils.svgMath');\nconst {Coordinate} = goog.require('Blockly.utils.Coordinate');\n/* eslint-disable-next-line no-unused-vars */\nconst {Metrics} = goog.requireType('Blockly.utils.Metrics');\nconst {Svg} = goog.require('Blockly.utils.Svg');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceSvg} = goog.requireType('Blockly.WorkspaceSvg');\n\n\n/**\n * A note on units: most of the numbers that are in CSS pixels are scaled if the\n * scrollbar is in a mutator.\n */\n\n/**\n * Class for a pure SVG scrollbar.\n * This technique offers a scrollbar that is guaranteed to work, but may not\n * look or behave like the system's scrollbars.\n * @alias Blockly.Scrollbar\n */\nclass Scrollbar {\n  /**\n   * @param {!WorkspaceSvg} workspace Workspace to bind the scrollbar to.\n   * @param {boolean} horizontal True if horizontal, false if vertical.\n   * @param {boolean=} opt_pair True if scrollbar is part of a horiz/vert pair.\n   * @param {string=} opt_class A class to be applied to this scrollbar.\n   * @param {number=} opt_margin The margin to apply to this scrollbar.\n   */\n  constructor(workspace, horizontal, opt_pair, opt_class, opt_margin) {\n    /**\n     * The workspace this scrollbar is bound to.\n     * @type {!WorkspaceSvg}\n     * @private\n     */\n    this.workspace_ = workspace;\n    /**\n     * Whether this scrollbar is part of a pair.\n     * @type {boolean}\n     * @private\n     */\n    this.pair_ = opt_pair || false;\n    /**\n     * Whether this is a horizontal scrollbar.\n     * @type {boolean}\n     * @private\n     */\n    this.horizontal_ = horizontal;\n    /**\n     * Margin around the scrollbar (between the scrollbar and the edge of the\n     * viewport in pixels).\n     * @type {number}\n     * @const\n     * @private\n     */\n    this.margin_ = (opt_margin !== undefined) ?\n        opt_margin :\n        Scrollbar.DEFAULT_SCROLLBAR_MARGIN;\n    /**\n     * Previously recorded metrics from the workspace.\n     * @type {?Metrics}\n     * @private\n     */\n    this.oldHostMetrics_ = null;\n    /**\n     * The ratio of handle position offset to workspace content displacement.\n     * @type {?number}\n     * @package\n     */\n    this.ratio = null;\n\n    /**\n     * The location of the origin of the workspace that the scrollbar is in,\n     * measured in CSS pixels relative to the injection div origin.  This is\n     * usually (0, 0).  When the scrollbar is in a flyout it may have a\n     * different origin.\n     * @type {Coordinate}\n     * @private\n     */\n    this.origin_ = new Coordinate(0, 0);\n\n    /**\n     * The position of the mouse along this scrollbar's major axis at the start\n     * of the most recent drag. Units are CSS pixels, with (0, 0) at the top\n     * left of the browser window. For a horizontal scrollbar this is the x\n     * coordinate of the mouse down event; for a vertical scrollbar it's the y\n     * coordinate of the mouse down event.\n     * @type {number}\n     * @private\n     */\n    this.startDragMouse_ = 0;\n\n    /**\n     * The length of the scrollbars (including the handle and the background),\n     * in CSS pixels. This is equivalent to scrollbar background length and the\n     * area within which the scrollbar handle can move.\n     * @type {number}\n     * @private\n     */\n    this.scrollbarLength_ = 0;\n\n    /**\n     * The length of the scrollbar handle in CSS pixels.\n     * @type {number}\n     * @private\n     */\n    this.handleLength_ = 0;\n\n    /**\n     * The offset of the start of the handle from the scrollbar position, in CSS\n     * pixels.\n     * @type {number}\n     * @private\n     */\n    this.handlePosition_ = 0;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.startDragHandle = 0;\n\n    /**\n     * Whether the scrollbar handle is visible.\n     * @type {boolean}\n     * @private\n     */\n    this.isVisible_ = true;\n\n    /**\n     * Whether the workspace containing this scrollbar is visible.\n     * @type {boolean}\n     * @private\n     */\n    this.containerVisible_ = true;\n\n    /**\n     * @type {?SVGRectElement}\n     * @private\n     */\n    this.svgBackground_ = null;\n\n    /**\n     * @type {?SVGRectElement}\n     * @private\n     */\n    this.svgHandle_ = null;\n\n    /**\n     * @type {?SVGSVGElement}\n     * @private\n     */\n    this.outerSvg_ = null;\n\n    /**\n     * @type {?SVGGElement}\n     * @private\n     */\n    this.svgGroup_ = null;\n\n    this.createDom_(opt_class);\n\n    /**\n     * The upper left corner of the scrollbar's SVG group in CSS pixels relative\n     * to the scrollbar's origin.  This is usually relative to the injection div\n     * origin.\n     * @type {Coordinate}\n     * @package\n     */\n    this.position = new Coordinate(0, 0);\n\n    // Store the thickness in a temp variable for readability.\n    const scrollbarThickness = Scrollbar.scrollbarThickness;\n    if (horizontal) {\n      this.svgBackground_.setAttribute('height', scrollbarThickness);\n      this.outerSvg_.setAttribute('height', scrollbarThickness);\n      this.svgHandle_.setAttribute('height', scrollbarThickness - 5);\n      this.svgHandle_.setAttribute('y', 2.5);\n\n      this.lengthAttribute_ = 'width';\n      this.positionAttribute_ = 'x';\n    } else {\n      this.svgBackground_.setAttribute('width', scrollbarThickness);\n      this.outerSvg_.setAttribute('width', scrollbarThickness);\n      this.svgHandle_.setAttribute('width', scrollbarThickness - 5);\n      this.svgHandle_.setAttribute('x', 2.5);\n\n      this.lengthAttribute_ = 'height';\n      this.positionAttribute_ = 'y';\n    }\n    const scrollbar = this;\n    this.onMouseDownBarWrapper_ = browserEvents.conditionalBind(\n        this.svgBackground_, 'mousedown', scrollbar, scrollbar.onMouseDownBar_);\n    this.onMouseDownHandleWrapper_ = browserEvents.conditionalBind(\n        this.svgHandle_, 'mousedown', scrollbar, scrollbar.onMouseDownHandle_);\n  }\n\n  /**\n   * Dispose of this scrollbar.\n   * Unlink from all DOM elements to prevent memory leaks.\n   * @suppress {checkTypes}\n   */\n  dispose() {\n    this.cleanUp_();\n    browserEvents.unbind(this.onMouseDownBarWrapper_);\n    this.onMouseDownBarWrapper_ = null;\n    browserEvents.unbind(this.onMouseDownHandleWrapper_);\n    this.onMouseDownHandleWrapper_ = null;\n\n    dom.removeNode(this.outerSvg_);\n    this.outerSvg_ = null;\n    this.svgGroup_ = null;\n    this.svgBackground_ = null;\n    if (this.svgHandle_) {\n      this.workspace_.getThemeManager().unsubscribe(this.svgHandle_);\n      this.svgHandle_ = null;\n    }\n    this.workspace_ = null;\n  }\n\n  /**\n   * Constrain the handle's length within the minimum (0) and maximum\n   * (scrollbar background) values allowed for the scrollbar.\n   * @param {number} value Value that is potentially out of bounds, in CSS\n   *     pixels.\n   * @return {number} Constrained value, in CSS pixels.\n   * @private\n   */\n  constrainHandleLength_(value) {\n    if (value <= 0 || isNaN(value)) {\n      value = 0;\n    } else {\n      value = Math.min(value, this.scrollbarLength_);\n    }\n    return value;\n  }\n\n  /**\n   * Set the length of the scrollbar's handle and change the SVG attribute\n   * accordingly.\n   * @param {number} newLength The new scrollbar handle length in CSS pixels.\n   * @private\n   */\n  setHandleLength_(newLength) {\n    this.handleLength_ = newLength;\n    this.svgHandle_.setAttribute(this.lengthAttribute_, this.handleLength_);\n  }\n\n  /**\n   * Constrain the handle's position within the minimum (0) and maximum values\n   * allowed for the scrollbar.\n   * @param {number} value Value that is potentially out of bounds, in CSS\n   *     pixels.\n   * @return {number} Constrained value, in CSS pixels.\n   * @private\n   */\n  constrainHandlePosition_(value) {\n    if (value <= 0 || isNaN(value)) {\n      value = 0;\n    } else {\n      // Handle length should never be greater than this.scrollbarLength_.\n      // If the viewSize is greater than or equal to the scrollSize, the\n      // handleLength will end up equal to this.scrollbarLength_.\n      value = Math.min(value, this.scrollbarLength_ - this.handleLength_);\n    }\n    return value;\n  }\n\n  /**\n   * Set the offset of the scrollbar's handle from the scrollbar's position, and\n   * change the SVG attribute accordingly.\n   * @param {number} newPosition The new scrollbar handle offset in CSS pixels.\n   */\n  setHandlePosition(newPosition) {\n    this.handlePosition_ = newPosition;\n    this.svgHandle_.setAttribute(this.positionAttribute_, this.handlePosition_);\n  }\n\n  /**\n   * Set the size of the scrollbar's background and change the SVG attribute\n   * accordingly.\n   * @param {number} newSize The new scrollbar background length in CSS pixels.\n   * @private\n   */\n  setScrollbarLength_(newSize) {\n    this.scrollbarLength_ = newSize;\n    this.outerSvg_.setAttribute(this.lengthAttribute_, this.scrollbarLength_);\n    this.svgBackground_.setAttribute(\n        this.lengthAttribute_, this.scrollbarLength_);\n  }\n\n  /**\n   * Set the position of the scrollbar's SVG group in CSS pixels relative to the\n   * scrollbar's origin.  This sets the scrollbar's location within the\n   * workspace.\n   * @param {number} x The new x coordinate.\n   * @param {number} y The new y coordinate.\n   * @package\n   */\n  setPosition(x, y) {\n    this.position.x = x;\n    this.position.y = y;\n\n    const tempX = this.position.x + this.origin_.x;\n    const tempY = this.position.y + this.origin_.y;\n    const transform = 'translate(' + tempX + 'px,' + tempY + 'px)';\n    dom.setCssTransform(/** @type {!Element} */ (this.outerSvg_), transform);\n  }\n\n  /**\n   * Recalculate the scrollbar's location and its length.\n   * @param {Metrics=} opt_metrics A data structure of from the\n   *     describing all the required dimensions.  If not provided, it will be\n   *     fetched from the host object.\n   */\n  resize(opt_metrics) {\n    // Determine the location, height and width of the host element.\n    let hostMetrics = opt_metrics;\n    if (!hostMetrics) {\n      hostMetrics = this.workspace_.getMetrics();\n      if (!hostMetrics) {\n        // Host element is likely not visible.\n        return;\n      }\n    }\n\n    if (this.oldHostMetrics_ &&\n        Scrollbar.metricsAreEquivalent_(hostMetrics, this.oldHostMetrics_)) {\n      return;\n    }\n\n    if (this.horizontal_) {\n      this.resizeHorizontal_(hostMetrics);\n    } else {\n      this.resizeVertical_(hostMetrics);\n    }\n\n    this.oldHostMetrics_ = hostMetrics;\n\n    // Resizing may have caused some scrolling.\n    this.updateMetrics_();\n  }\n\n  /**\n   * Returns whether the a resizeView is necessary by comparing the passed\n   * hostMetrics with cached old host metrics.\n   * @param {!Metrics} hostMetrics A data structure describing all\n   *     the required dimensions, possibly fetched from the host object.\n   * @return {boolean} Whether a resizeView is necessary.\n   * @private\n   */\n  requiresViewResize_(hostMetrics) {\n    if (!this.oldHostMetrics_) {\n      return true;\n    }\n    return this.oldHostMetrics_.viewWidth !== hostMetrics.viewWidth ||\n        this.oldHostMetrics_.viewHeight !== hostMetrics.viewHeight ||\n        this.oldHostMetrics_.absoluteLeft !== hostMetrics.absoluteLeft ||\n        this.oldHostMetrics_.absoluteTop !== hostMetrics.absoluteTop;\n  }\n\n  /**\n   * Recalculate a horizontal scrollbar's location and length.\n   * @param {!Metrics} hostMetrics A data structure describing all\n   *     the required dimensions, possibly fetched from the host object.\n   * @private\n   */\n  resizeHorizontal_(hostMetrics) {\n    if (this.requiresViewResize_(hostMetrics)) {\n      this.resizeViewHorizontal(hostMetrics);\n    } else {\n      this.resizeContentHorizontal(hostMetrics);\n    }\n  }\n\n  /**\n   * Recalculate a horizontal scrollbar's location on the screen and path\n   * length. This should be called when the layout or size of the window has\n   * changed.\n   * @param {!Metrics} hostMetrics A data structure describing all\n   *     the required dimensions, possibly fetched from the host object.\n   */\n  resizeViewHorizontal(hostMetrics) {\n    let viewSize = hostMetrics.viewWidth - this.margin_ * 2;\n    if (this.pair_) {\n      // Shorten the scrollbar to make room for the corner square.\n      viewSize -= Scrollbar.scrollbarThickness;\n    }\n    this.setScrollbarLength_(Math.max(0, viewSize));\n\n    let xCoordinate = hostMetrics.absoluteLeft + this.margin_;\n    if (this.pair_ && this.workspace_.RTL) {\n      xCoordinate += Scrollbar.scrollbarThickness;\n    }\n\n    // Horizontal toolbar should always be just above the bottom of the\n    // workspace.\n    const yCoordinate = hostMetrics.absoluteTop + hostMetrics.viewHeight -\n        Scrollbar.scrollbarThickness - this.margin_;\n    this.setPosition(xCoordinate, yCoordinate);\n\n    // If the view has been resized, a content resize will also be necessary.\n    // The reverse is not true.\n    this.resizeContentHorizontal(hostMetrics);\n  }\n\n  /**\n   * Recalculate a horizontal scrollbar's location within its path and length.\n   * This should be called when the contents of the workspace have changed.\n   * @param {!Metrics} hostMetrics A data structure describing all\n   *     the required dimensions, possibly fetched from the host object.\n   */\n  resizeContentHorizontal(hostMetrics) {\n    if (hostMetrics.viewWidth >= hostMetrics.scrollWidth) {\n      // viewWidth is often greater than scrollWidth in flyouts and\n      // non-scrollable workspaces.\n      this.setHandleLength_(this.scrollbarLength_);\n      this.setHandlePosition(0);\n      if (!this.pair_) {\n        // The scrollbar isn't needed.\n        // This doesn't apply to scrollbar pairs because interactions with the\n        // corner square aren't handled.\n        this.setVisible(false);\n      }\n      return;\n    } else if (!this.pair_) {\n      // The scrollbar is needed. Only non-paired scrollbars are hidden/shown.\n      this.setVisible(true);\n    }\n\n    // Resize the handle.\n    let handleLength =\n        this.scrollbarLength_ * hostMetrics.viewWidth / hostMetrics.scrollWidth;\n    handleLength = this.constrainHandleLength_(handleLength);\n    this.setHandleLength_(handleLength);\n\n    // Compute the handle offset.\n    // The position of the handle can be between:\n    //     0 and this.scrollbarLength_ - handleLength\n    // If viewLeft === scrollLeft\n    //     then the offset should be 0\n    // If viewRight === scrollRight\n    //     then viewLeft = scrollLeft + scrollWidth - viewWidth\n    //     then the offset should be max offset\n\n    const maxScrollDistance = hostMetrics.scrollWidth - hostMetrics.viewWidth;\n    const contentDisplacement = hostMetrics.viewLeft - hostMetrics.scrollLeft;\n    // Percent of content to the left of our current position.\n    const offsetRatio = contentDisplacement / maxScrollDistance;\n    // Area available to scroll * percent to the left\n    const maxHandleOffset = this.scrollbarLength_ - this.handleLength_;\n    let handleOffset = maxHandleOffset * offsetRatio;\n    handleOffset = this.constrainHandlePosition_(handleOffset);\n    this.setHandlePosition(handleOffset);\n\n    // Compute ratio (for use with set calls, which pass in content\n    // displacement).\n    this.ratio = maxHandleOffset / maxScrollDistance;\n  }\n\n  /**\n   * Recalculate a vertical scrollbar's location and length.\n   * @param {!Metrics} hostMetrics A data structure describing all\n   *     the required dimensions, possibly fetched from the host object.\n   * @private\n   */\n  resizeVertical_(hostMetrics) {\n    if (this.requiresViewResize_(hostMetrics)) {\n      this.resizeViewVertical(hostMetrics);\n    } else {\n      this.resizeContentVertical(hostMetrics);\n    }\n  }\n\n  /**\n   * Recalculate a vertical scrollbar's location on the screen and path length.\n   * This should be called when the layout or size of the window has changed.\n   * @param {!Metrics} hostMetrics A data structure describing all\n   *     the required dimensions, possibly fetched from the host object.\n   */\n  resizeViewVertical(hostMetrics) {\n    let viewSize = hostMetrics.viewHeight - this.margin_ * 2;\n    if (this.pair_) {\n      // Shorten the scrollbar to make room for the corner square.\n      viewSize -= Scrollbar.scrollbarThickness;\n    }\n    this.setScrollbarLength_(Math.max(0, viewSize));\n\n    const xCoordinate = this.workspace_.RTL ?\n        hostMetrics.absoluteLeft + this.margin_ :\n        hostMetrics.absoluteLeft + hostMetrics.viewWidth -\n            Scrollbar.scrollbarThickness - this.margin_;\n\n    const yCoordinate = hostMetrics.absoluteTop + this.margin_;\n    this.setPosition(xCoordinate, yCoordinate);\n\n    // If the view has been resized, a content resize will also be necessary.\n    // The reverse is not true.\n    this.resizeContentVertical(hostMetrics);\n  }\n\n  /**\n   * Recalculate a vertical scrollbar's location within its path and length.\n   * This should be called when the contents of the workspace have changed.\n   * @param {!Metrics} hostMetrics A data structure describing all\n   *     the required dimensions, possibly fetched from the host object.\n   */\n  resizeContentVertical(hostMetrics) {\n    if (hostMetrics.viewHeight >= hostMetrics.scrollHeight) {\n      // viewHeight is often greater than scrollHeight in flyouts and\n      // non-scrollable workspaces.\n      this.setHandleLength_(this.scrollbarLength_);\n      this.setHandlePosition(0);\n      if (!this.pair_) {\n        // The scrollbar isn't needed.\n        // This doesn't apply to scrollbar pairs because interactions with the\n        // corner square aren't handled.\n        this.setVisible(false);\n      }\n      return;\n    } else if (!this.pair_) {\n      // The scrollbar is needed. Only non-paired scrollbars are hidden/shown.\n      this.setVisible(true);\n    }\n\n    // Resize the handle.\n    let handleLength = this.scrollbarLength_ * hostMetrics.viewHeight /\n        hostMetrics.scrollHeight;\n    handleLength = this.constrainHandleLength_(handleLength);\n    this.setHandleLength_(handleLength);\n\n    // Compute the handle offset.\n    // The position of the handle can be between:\n    //     0 and this.scrollbarLength_ - handleLength\n    // If viewTop === scrollTop\n    //     then the offset should be 0\n    // If viewBottom === scrollBottom\n    //     then viewTop = scrollTop + scrollHeight - viewHeight\n    //     then the offset should be max offset\n\n    const maxScrollDistance = hostMetrics.scrollHeight - hostMetrics.viewHeight;\n    const contentDisplacement = hostMetrics.viewTop - hostMetrics.scrollTop;\n    // Percent of content to the left of our current position.\n    const offsetRatio = contentDisplacement / maxScrollDistance;\n    // Area available to scroll * percent to the left\n    const maxHandleOffset = this.scrollbarLength_ - this.handleLength_;\n    let handleOffset = maxHandleOffset * offsetRatio;\n    handleOffset = this.constrainHandlePosition_(handleOffset);\n    this.setHandlePosition(handleOffset);\n\n    // Compute ratio (for use with set calls, which pass in content\n    // displacement).\n    this.ratio = maxHandleOffset / maxScrollDistance;\n  }\n\n  /**\n   * Create all the DOM elements required for a scrollbar.\n   * The resulting widget is not sized.\n   * @param {string=} opt_class A class to be applied to this scrollbar.\n   * @private\n   */\n  createDom_(opt_class) {\n    /* Create the following DOM:\n    <svg class=\"blocklyScrollbarHorizontal  optionalClass\">\n      <g>\n        <rect class=\"blocklyScrollbarBackground\" />\n        <rect class=\"blocklyScrollbarHandle\" rx=\"8\" ry=\"8\" />\n      </g>\n    </svg>\n    */\n    let className =\n        'blocklyScrollbar' + (this.horizontal_ ? 'Horizontal' : 'Vertical');\n    if (opt_class) {\n      className += ' ' + opt_class;\n    }\n    this.outerSvg_ = dom.createSvgElement(Svg.SVG, {'class': className}, null);\n    this.svgGroup_ = dom.createSvgElement(Svg.G, {}, this.outerSvg_);\n    this.svgBackground_ = dom.createSvgElement(\n        Svg.RECT, {'class': 'blocklyScrollbarBackground'}, this.svgGroup_);\n    const radius = Math.floor((Scrollbar.scrollbarThickness - 5) / 2);\n    this.svgHandle_ = dom.createSvgElement(\n        Svg.RECT,\n        {'class': 'blocklyScrollbarHandle', 'rx': radius, 'ry': radius},\n        this.svgGroup_);\n    this.workspace_.getThemeManager().subscribe(\n        this.svgHandle_, 'scrollbarColour', 'fill');\n    this.workspace_.getThemeManager().subscribe(\n        this.svgHandle_, 'scrollbarOpacity', 'fill-opacity');\n    dom.insertAfter(this.outerSvg_, this.workspace_.getParentSvg());\n  }\n\n  /**\n   * Is the scrollbar visible.  Non-paired scrollbars disappear when they aren't\n   * needed.\n   * @return {boolean} True if visible.\n   */\n  isVisible() {\n    return this.isVisible_;\n  }\n\n  /**\n   * Set whether the scrollbar's container is visible and update\n   * display accordingly if visibility has changed.\n   * @param {boolean} visible Whether the container is visible\n   */\n  setContainerVisible(visible) {\n    const visibilityChanged = (visible !== this.containerVisible_);\n\n    this.containerVisible_ = visible;\n    if (visibilityChanged) {\n      this.updateDisplay_();\n    }\n  }\n\n  /**\n   * Set whether the scrollbar is visible.\n   * Only applies to non-paired scrollbars.\n   * @param {boolean} visible True if visible.\n   */\n  setVisible(visible) {\n    const visibilityChanged = (visible !== this.isVisible());\n\n    // Ideally this would also apply to scrollbar pairs, but that's a bigger\n    // headache (due to interactions with the corner square).\n    if (this.pair_) {\n      throw Error('Unable to toggle visibility of paired scrollbars.');\n    }\n    this.isVisible_ = visible;\n    if (visibilityChanged) {\n      this.updateDisplay_();\n    }\n  }\n\n  /**\n   * Update visibility of scrollbar based on whether it thinks it should\n   * be visible and whether its containing workspace is visible.\n   * We cannot rely on the containing workspace being hidden to hide us\n   * because it is not necessarily our parent in the DOM.\n   */\n  updateDisplay_() {\n    let show = true;\n    // Check whether our parent/container is visible.\n    if (!this.containerVisible_) {\n      show = false;\n    } else {\n      show = this.isVisible();\n    }\n    if (show) {\n      this.outerSvg_.setAttribute('display', 'block');\n    } else {\n      this.outerSvg_.setAttribute('display', 'none');\n    }\n  }\n\n  /**\n   * Scroll by one pageful.\n   * Called when scrollbar background is clicked.\n   * @param {!Event} e Mouse down event.\n   * @private\n   */\n  onMouseDownBar_(e) {\n    this.workspace_.markFocused();\n    Touch.clearTouchIdentifier();  // This is really a click.\n    this.cleanUp_();\n    if (browserEvents.isRightButton(e)) {\n      // Right-click.\n      // Scrollbars have no context menu.\n      e.stopPropagation();\n      return;\n    }\n    const mouseXY = browserEvents.mouseToSvg(\n        e, this.workspace_.getParentSvg(),\n        this.workspace_.getInverseScreenCTM());\n    const mouseLocation = this.horizontal_ ? mouseXY.x : mouseXY.y;\n\n    const handleXY =\n        svgMath.getInjectionDivXY(/** @type {!Element} */ (this.svgHandle_));\n    const handleStart = this.horizontal_ ? handleXY.x : handleXY.y;\n    let handlePosition = this.handlePosition_;\n\n    const pageLength = this.handleLength_ * 0.95;\n    if (mouseLocation <= handleStart) {\n      // Decrease the scrollbar's value by a page.\n      handlePosition -= pageLength;\n    } else if (mouseLocation >= handleStart + this.handleLength_) {\n      // Increase the scrollbar's value by a page.\n      handlePosition += pageLength;\n    }\n\n    this.setHandlePosition(this.constrainHandlePosition_(handlePosition));\n\n    this.updateMetrics_();\n    e.stopPropagation();\n    e.preventDefault();\n  }\n\n  /**\n   * Start a dragging operation.\n   * Called when scrollbar handle is clicked.\n   * @param {!Event} e Mouse down event.\n   * @private\n   */\n  onMouseDownHandle_(e) {\n    this.workspace_.markFocused();\n    this.cleanUp_();\n    if (browserEvents.isRightButton(e)) {\n      // Right-click.\n      // Scrollbars have no context menu.\n      e.stopPropagation();\n      return;\n    }\n    // Look up the current translation and record it.\n    this.startDragHandle = this.handlePosition_;\n\n    // Tell the workspace to setup its drag surface since it is about to move.\n    // onMouseMoveHandle will call onScroll which actually tells the workspace\n    // to move.\n    this.workspace_.setupDragSurface();\n\n    // Record the current mouse position.\n    this.startDragMouse_ = this.horizontal_ ? e.clientX : e.clientY;\n    Scrollbar.onMouseUpWrapper_ = browserEvents.conditionalBind(\n        document, 'mouseup', this, this.onMouseUpHandle_);\n    Scrollbar.onMouseMoveWrapper_ = browserEvents.conditionalBind(\n        document, 'mousemove', this, this.onMouseMoveHandle_);\n    e.stopPropagation();\n    e.preventDefault();\n  }\n\n  /**\n   * Drag the scrollbar's handle.\n   * @param {!Event} e Mouse up event.\n   * @private\n   */\n  onMouseMoveHandle_(e) {\n    const currentMouse = this.horizontal_ ? e.clientX : e.clientY;\n    const mouseDelta = currentMouse - this.startDragMouse_;\n    const handlePosition = this.startDragHandle + mouseDelta;\n    // Position the bar.\n    this.setHandlePosition(this.constrainHandlePosition_(handlePosition));\n    this.updateMetrics_();\n  }\n\n  /**\n   * Release the scrollbar handle and reset state accordingly.\n   * @private\n   */\n  onMouseUpHandle_() {\n    // Tell the workspace to clean up now that the workspace is done moving.\n    this.workspace_.resetDragSurface();\n    Touch.clearTouchIdentifier();\n    this.cleanUp_();\n  }\n\n  /**\n   * Hide chaff and stop binding to mouseup and mousemove events.  Call this to\n   * wrap up loose ends associated with the scrollbar.\n   * @private\n   */\n  cleanUp_() {\n    this.workspace_.hideChaff(true);\n    if (Scrollbar.onMouseUpWrapper_) {\n      browserEvents.unbind(Scrollbar.onMouseUpWrapper_);\n      Scrollbar.onMouseUpWrapper_ = null;\n    }\n    if (Scrollbar.onMouseMoveWrapper_) {\n      browserEvents.unbind(Scrollbar.onMouseMoveWrapper_);\n      Scrollbar.onMouseMoveWrapper_ = null;\n    }\n  }\n\n  /**\n   * Helper to calculate the ratio of handle position to scrollbar view size.\n   * @return {number} Ratio.\n   * @package\n   */\n  getRatio_() {\n    const scrollHandleRange = this.scrollbarLength_ - this.handleLength_;\n    let ratio = this.handlePosition_ / scrollHandleRange;\n    if (isNaN(ratio)) {\n      ratio = 0;\n    }\n    return ratio;\n  }\n\n  /**\n   * Updates workspace metrics based on new scroll ratio. Called when scrollbar\n   * is moved.\n   * @private\n   */\n  updateMetrics_() {\n    const ratio = this.getRatio_();\n    const xyRatio = {};\n    if (this.horizontal_) {\n      xyRatio.x = ratio;\n    } else {\n      xyRatio.y = ratio;\n    }\n    this.workspace_.setMetrics(xyRatio);\n  }\n\n  /**\n   * Set the scrollbar handle's position.\n   * @param {number} value The content displacement, relative to the view in\n   *    pixels.\n   * @param {boolean=} updateMetrics Whether to update metrics on this set call.\n   *    Defaults to true.\n   */\n  set(value, updateMetrics) {\n    this.setHandlePosition(this.constrainHandlePosition_(value * this.ratio));\n    if (updateMetrics || updateMetrics === undefined) {\n      this.updateMetrics_();\n    }\n  }\n\n  /**\n   * Record the origin of the workspace that the scrollbar is in, in pixels\n   * relative to the injection div origin. This is for times when the scrollbar\n   * is used in an object whose origin isn't the same as the main workspace\n   * (e.g. in a flyout.)\n   * @param {number} x The x coordinate of the scrollbar's origin, in CSS\n   *     pixels.\n   * @param {number} y The y coordinate of the scrollbar's origin, in CSS\n   *     pixels.\n   */\n  setOrigin(x, y) {\n    this.origin_ = new Coordinate(x, y);\n  }\n\n  /**\n   * @param {!Metrics} first An object containing computed\n   *     measurements of a workspace.\n   * @param {!Metrics} second Another object containing computed\n   *     measurements of a workspace.\n   * @return {boolean} Whether the two sets of metrics are equivalent.\n   * @private\n   */\n  static metricsAreEquivalent_(first, second) {\n    return (\n        first.viewWidth === second.viewWidth &&\n        first.viewHeight === second.viewHeight &&\n        first.viewLeft === second.viewLeft &&\n        first.viewTop === second.viewTop &&\n        first.absoluteTop === second.absoluteTop &&\n        first.absoluteLeft === second.absoluteLeft &&\n        first.scrollWidth === second.scrollWidth &&\n        first.scrollHeight === second.scrollHeight &&\n        first.scrollLeft === second.scrollLeft &&\n        first.scrollTop === second.scrollTop);\n  }\n}\n\n/**\n * Width of vertical scrollbar or height of horizontal scrollbar in CSS pixels.\n * Scrollbars should be larger on touch devices.\n */\nScrollbar.scrollbarThickness = 15;\n\nif (Touch.TOUCH_ENABLED) {\n  Scrollbar.scrollbarThickness = 25;\n}\n\n/**\n * Default margin around the scrollbar (between the scrollbar and the edge of\n * the viewport in pixels).\n * @type {number}\n * @const\n * @package\n */\nScrollbar.DEFAULT_SCROLLBAR_MARGIN = 0.5;\n\nexports.Scrollbar = Scrollbar;\n","/**\n * @license\n * Copyright 2011 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Object representing a pair of scrollbars.\n */\n'use strict';\n\n/**\n * Object representing a pair of scrollbars.\n * @class\n */\ngoog.module('Blockly.ScrollbarPair');\n\nconst dom = goog.require('Blockly.utils.dom');\nconst eventUtils = goog.require('Blockly.Events.utils');\n/* eslint-disable-next-line no-unused-vars */\nconst {Metrics} = goog.requireType('Blockly.utils.Metrics');\nconst {Scrollbar} = goog.require('Blockly.Scrollbar');\nconst {Svg} = goog.require('Blockly.utils.Svg');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceSvg} = goog.requireType('Blockly.WorkspaceSvg');\n\n\n/**\n * Class for a pair of scrollbars.  Horizontal and vertical.\n * @alias Blockly.ScrollbarPair\n */\nconst ScrollbarPair = class {\n  /**\n   * @param {!WorkspaceSvg} workspace Workspace to bind the scrollbars to.\n   * @param {boolean=} addHorizontal Whether to add a horizontal scrollbar.\n   *    Defaults to true.\n   * @param {boolean=} addVertical Whether to add a vertical scrollbar. Defaults\n   *    to true.\n   * @param {string=} opt_class A class to be applied to these scrollbars.\n   * @param {number=} opt_margin The margin to apply to these scrollbars.\n   */\n  constructor(workspace, addHorizontal, addVertical, opt_class, opt_margin) {\n    /**\n     * The workspace this scrollbar pair is bound to.\n     * @type {!WorkspaceSvg}\n     * @private\n     */\n    this.workspace_ = workspace;\n\n    addHorizontal = addHorizontal === undefined ? true : addHorizontal;\n    addVertical = addVertical === undefined ? true : addVertical;\n    const isPair = addHorizontal && addVertical;\n\n    if (addHorizontal) {\n      this.hScroll =\n          new Scrollbar(workspace, true, isPair, opt_class, opt_margin);\n    }\n    if (addVertical) {\n      this.vScroll =\n          new Scrollbar(workspace, false, isPair, opt_class, opt_margin);\n    }\n\n    if (isPair) {\n      this.corner_ = dom.createSvgElement(\n          Svg.RECT, {\n            'height': Scrollbar.scrollbarThickness,\n            'width': Scrollbar.scrollbarThickness,\n            'class': 'blocklyScrollbarBackground',\n          },\n          null);\n      dom.insertAfter(this.corner_, workspace.getBubbleCanvas());\n    }\n\n    /**\n     * Previously recorded metrics from the workspace.\n     * @type {?Metrics}\n     * @private\n     */\n    this.oldHostMetrics_ = null;\n  }\n\n  /**\n   * Dispose of this pair of scrollbars.\n   * Unlink from all DOM elements to prevent memory leaks.\n   * @suppress {checkTypes}\n   */\n  dispose() {\n    dom.removeNode(this.corner_);\n    this.corner_ = null;\n    this.workspace_ = null;\n    this.oldHostMetrics_ = null;\n    if (this.hScroll) {\n      this.hScroll.dispose();\n      this.hScroll = null;\n    }\n    if (this.vScroll) {\n      this.vScroll.dispose();\n      this.vScroll = null;\n    }\n  }\n\n  /**\n   * Recalculate both of the scrollbars' locations and lengths.\n   * Also reposition the corner rectangle.\n   */\n  resize() {\n    // Look up the host metrics once, and use for both scrollbars.\n    const hostMetrics = this.workspace_.getMetrics();\n    if (!hostMetrics) {\n      // Host element is likely not visible.\n      return;\n    }\n\n    // Only change the scrollbars if there has been a change in metrics.\n    let resizeH = false;\n    let resizeV = false;\n    if (!this.oldHostMetrics_ ||\n        this.oldHostMetrics_.viewWidth !== hostMetrics.viewWidth ||\n        this.oldHostMetrics_.viewHeight !== hostMetrics.viewHeight ||\n        this.oldHostMetrics_.absoluteTop !== hostMetrics.absoluteTop ||\n        this.oldHostMetrics_.absoluteLeft !== hostMetrics.absoluteLeft) {\n      // The window has been resized or repositioned.\n      resizeH = true;\n      resizeV = true;\n    } else {\n      // Has the content been resized or moved?\n      if (!this.oldHostMetrics_ ||\n          this.oldHostMetrics_.scrollWidth !== hostMetrics.scrollWidth ||\n          this.oldHostMetrics_.viewLeft !== hostMetrics.viewLeft ||\n          this.oldHostMetrics_.scrollLeft !== hostMetrics.scrollLeft) {\n        resizeH = true;\n      }\n      if (!this.oldHostMetrics_ ||\n          this.oldHostMetrics_.scrollHeight !== hostMetrics.scrollHeight ||\n          this.oldHostMetrics_.viewTop !== hostMetrics.viewTop ||\n          this.oldHostMetrics_.scrollTop !== hostMetrics.scrollTop) {\n        resizeV = true;\n      }\n    }\n\n    if (resizeH || resizeV) {\n      try {\n        eventUtils.disable();\n        if (this.hScroll && resizeH) {\n          this.hScroll.resize(hostMetrics);\n        }\n        if (this.vScroll && resizeV) {\n          this.vScroll.resize(hostMetrics);\n        }\n      } finally {\n        eventUtils.enable();\n      }\n      this.workspace_.maybeFireViewportChangeEvent();\n    }\n\n    if (this.hScroll && this.vScroll) {\n      // Reposition the corner square.\n      if (!this.oldHostMetrics_ ||\n          this.oldHostMetrics_.viewWidth !== hostMetrics.viewWidth ||\n          this.oldHostMetrics_.absoluteLeft !== hostMetrics.absoluteLeft) {\n        this.corner_.setAttribute('x', this.vScroll.position.x);\n      }\n      if (!this.oldHostMetrics_ ||\n          this.oldHostMetrics_.viewHeight !== hostMetrics.viewHeight ||\n          this.oldHostMetrics_.absoluteTop !== hostMetrics.absoluteTop) {\n        this.corner_.setAttribute('y', this.hScroll.position.y);\n      }\n    }\n\n    // Cache the current metrics to potentially short-cut the next resize event.\n    this.oldHostMetrics_ = hostMetrics;\n  }\n\n  /**\n   * Returns whether scrolling horizontally is enabled.\n   * @return {boolean} True if horizontal scroll is enabled.\n   */\n  canScrollHorizontally() {\n    return !!this.hScroll;\n  }\n\n  /**\n   * Returns whether scrolling vertically is enabled.\n   * @return {boolean} True if vertical scroll is enabled.\n   */\n  canScrollVertically() {\n    return !!this.vScroll;\n  }\n\n  /**\n   * Record the origin of the workspace that the scrollbar is in, in pixels\n   * relative to the injection div origin. This is for times when the scrollbar\n   * is used in an object whose origin isn't the same as the main workspace\n   * (e.g. in a flyout.)\n   * @param {number} x The x coordinate of the scrollbar's origin, in CSS\n   *     pixels.\n   * @param {number} y The y coordinate of the scrollbar's origin, in CSS\n   *     pixels.\n   * @package\n   */\n  setOrigin(x, y) {\n    if (this.hScroll) {\n      this.hScroll.setOrigin(x, y);\n    }\n    if (this.vScroll) {\n      this.vScroll.setOrigin(x, y);\n    }\n  }\n\n  /**\n   * Set the handles of both scrollbars.\n   * @param {number} x The horizontal content displacement, relative to the view\n   *    in pixels.\n   * @param {number} y The vertical content displacement, relative to the view\n   *     in\n   *    pixels.\n   * @param {boolean} updateMetrics Whether to update metrics on this set call.\n   *    Defaults to true.\n   */\n  set(x, y, updateMetrics) {\n    // This function is equivalent to:\n    //   this.hScroll.set(x);\n    //   this.vScroll.set(y);\n    // However, that calls setMetrics twice which causes a chain of\n    // getAttribute->setAttribute->getAttribute resulting in an extra layout\n    // pass. Combining them speeds up rendering.\n    if (this.hScroll) {\n      this.hScroll.set(x, false);\n    }\n    if (this.vScroll) {\n      this.vScroll.set(y, false);\n    }\n\n    if (updateMetrics || updateMetrics === undefined) {\n      // Update metrics.\n      const xyRatio = {};\n      if (this.hScroll) {\n        xyRatio.x = this.hScroll.getRatio_();\n      }\n      if (this.vScroll) {\n        xyRatio.y = this.vScroll.getRatio_();\n      }\n      this.workspace_.setMetrics(xyRatio);\n    }\n  }\n\n  /**\n   * Set the handle of the horizontal scrollbar to be at a certain position in\n   *    CSS pixels relative to its parents.\n   * @param {number} x Horizontal scroll value.\n   */\n  setX(x) {\n    if (this.hScroll) {\n      this.hScroll.set(x, true);\n    }\n  }\n\n  /**\n   * Set the handle of the vertical scrollbar to be at a certain position in\n   *    CSS pixels relative to its parents.\n   * @param {number} y Vertical scroll value.\n   */\n  setY(y) {\n    if (this.vScroll) {\n      this.vScroll.set(y, true);\n    }\n  }\n\n  /**\n   * Set whether this scrollbar's container is visible.\n   * @param {boolean} visible Whether the container is visible.\n   */\n  setContainerVisible(visible) {\n    if (this.hScroll) {\n      this.hScroll.setContainerVisible(visible);\n    }\n    if (this.vScroll) {\n      this.vScroll.setContainerVisible(visible);\n    }\n  }\n\n  /**\n   * If any of the scrollbars are visible. Non-paired scrollbars may disappear\n   * when they aren't needed.\n   * @return {boolean} True if visible.\n   */\n  isVisible() {\n    let isVisible = false;\n    if (this.hScroll) {\n      isVisible = this.hScroll.isVisible();\n    }\n    if (this.vScroll) {\n      isVisible = isVisible || this.vScroll.isVisible();\n    }\n    return isVisible;\n  }\n\n  /**\n   * Recalculates the scrollbars' locations within their path and length.\n   * This should be called when the contents of the workspace have changed.\n   * @param {!Metrics} hostMetrics A data structure describing all\n   *     the required dimensions, possibly fetched from the host object.\n   */\n  resizeContent(hostMetrics) {\n    if (this.hScroll) {\n      this.hScroll.resizeContentHorizontal(hostMetrics);\n    }\n    if (this.vScroll) {\n      this.vScroll.resizeContentVertical(hostMetrics);\n    }\n  }\n\n  /**\n   * Recalculates the scrollbars' locations on the screen and path length.\n   * This should be called when the layout or size of the window has changed.\n   * @param {!Metrics} hostMetrics A data structure describing all\n   *     the required dimensions, possibly fetched from the host object.\n   */\n  resizeView(hostMetrics) {\n    if (this.hScroll) {\n      this.hScroll.resizeViewHorizontal(hostMetrics);\n    }\n    if (this.vScroll) {\n      this.vScroll.resizeViewVertical(hostMetrics);\n    }\n  }\n};\n\nexports.ScrollbarPair = ScrollbarPair;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Constant declarations for common key codes.\n * These methods are not specific to Blockly, and could be factored out into\n * a JavaScript framework such as Closure.\n */\n'use strict';\n\n/**\n * Constant declarations for common key codes.\n * These methods are not specific to Blockly, and could be factored out into\n * a JavaScript framework such as Closure.\n * @namespace Blockly.utils.KeyCodes\n */\ngoog.module('Blockly.utils.KeyCodes');\n\n\n/**\n * Key codes for common characters.\n *\n * Copied from Closure's goog.events.KeyCodes\n *\n * This list is not localized and therefore some of the key codes are not\n * correct for non US keyboard layouts. See comments below.\n *\n * @enum {number}\n * @alias Blockly.utils.KeyCodes\n */\nconst KeyCodes = {\n  WIN_KEY_FF_LINUX: 0,\n  MAC_ENTER: 3,\n  BACKSPACE: 8,\n  TAB: 9,\n  NUM_CENTER: 12,  // NUMLOCK on FF/Safari Mac\n  ENTER: 13,\n  SHIFT: 16,\n  CTRL: 17,\n  ALT: 18,\n  PAUSE: 19,\n  CAPS_LOCK: 20,\n  ESC: 27,\n  SPACE: 32,\n  PAGE_UP: 33,    // also NUM_NORTH_EAST\n  PAGE_DOWN: 34,  // also NUM_SOUTH_EAST\n  END: 35,        // also NUM_SOUTH_WEST\n  HOME: 36,       // also NUM_NORTH_WEST\n  LEFT: 37,       // also NUM_WEST\n  UP: 38,         // also NUM_NORTH\n  RIGHT: 39,      // also NUM_EAST\n  DOWN: 40,       // also NUM_SOUTH\n  PLUS_SIGN: 43,  // NOT numpad plus\n  PRINT_SCREEN: 44,\n  INSERT: 45,  // also NUM_INSERT\n  DELETE: 46,  // also NUM_DELETE\n  ZERO: 48,\n  ONE: 49,\n  TWO: 50,\n  THREE: 51,\n  FOUR: 52,\n  FIVE: 53,\n  SIX: 54,\n  SEVEN: 55,\n  EIGHT: 56,\n  NINE: 57,\n  FF_SEMICOLON: 59,  // Firefox (Gecko) fires this for semicolon instead of 186\n  FF_EQUALS: 61,     // Firefox (Gecko) fires this for equals instead of 187\n  FF_DASH: 173,      // Firefox (Gecko) fires this for dash instead of 189\n  // Firefox (Gecko) fires this for # on UK keyboards, rather than\n  // Shift+SINGLE_QUOTE.\n  FF_HASH: 163,\n  QUESTION_MARK: 63,  // needs localization\n  AT_SIGN: 64,\n  A: 65,\n  B: 66,\n  C: 67,\n  D: 68,\n  E: 69,\n  F: 70,\n  G: 71,\n  H: 72,\n  I: 73,\n  J: 74,\n  K: 75,\n  L: 76,\n  M: 77,\n  N: 78,\n  O: 79,\n  P: 80,\n  Q: 81,\n  R: 82,\n  S: 83,\n  T: 84,\n  U: 85,\n  V: 86,\n  W: 87,\n  X: 88,\n  Y: 89,\n  Z: 90,\n  META: 91,  // WIN_KEY_LEFT\n  WIN_KEY_RIGHT: 92,\n  CONTEXT_MENU: 93,\n  NUM_ZERO: 96,\n  NUM_ONE: 97,\n  NUM_TWO: 98,\n  NUM_THREE: 99,\n  NUM_FOUR: 100,\n  NUM_FIVE: 101,\n  NUM_SIX: 102,\n  NUM_SEVEN: 103,\n  NUM_EIGHT: 104,\n  NUM_NINE: 105,\n  NUM_MULTIPLY: 106,\n  NUM_PLUS: 107,\n  NUM_MINUS: 109,\n  NUM_PERIOD: 110,\n  NUM_DIVISION: 111,\n  F1: 112,\n  F2: 113,\n  F3: 114,\n  F4: 115,\n  F5: 116,\n  F6: 117,\n  F7: 118,\n  F8: 119,\n  F9: 120,\n  F10: 121,\n  F11: 122,\n  F12: 123,\n  NUMLOCK: 144,\n  SCROLL_LOCK: 145,\n\n  // OS-specific media keys like volume controls and browser controls.\n  FIRST_MEDIA_KEY: 166,\n  LAST_MEDIA_KEY: 183,\n\n  SEMICOLON: 186,             // needs localization\n  DASH: 189,                  // needs localization\n  EQUALS: 187,                // needs localization\n  COMMA: 188,                 // needs localization\n  PERIOD: 190,                // needs localization\n  SLASH: 191,                 // needs localization\n  APOSTROPHE: 192,            // needs localization\n  TILDE: 192,                 // needs localization\n  SINGLE_QUOTE: 222,          // needs localization\n  OPEN_SQUARE_BRACKET: 219,   // needs localization\n  BACKSLASH: 220,             // needs localization\n  CLOSE_SQUARE_BRACKET: 221,  // needs localization\n  WIN_KEY: 224,\n  MAC_FF_META:\n      224,  // Firefox (Gecko) fires this for the meta key instead of 91\n  MAC_WK_CMD_LEFT: 91,   // WebKit Left Command key fired, same as META\n  MAC_WK_CMD_RIGHT: 93,  // WebKit Right Command key fired, different from META\n  WIN_IME: 229,\n\n  // \"Reserved for future use\". Some programs (e.g. the SlingPlayer 2.4 ActiveX\n  // control) fire this as a hacky way to disable screensavers.\n  VK_NONAME: 252,\n\n  // We've seen users whose machines fire this keycode at regular one\n  // second intervals. The common thread among these users is that\n  // they're all using Dell Inspiron laptops, so we suspect that this\n  // indicates a hardware/bios problem.\n  // http://en.community.dell.com/support-forums/laptop/f/3518/p/19285957/19523128.aspx\n  PHANTOM: 255,\n};\n\nexports.KeyCodes = KeyCodes;\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The namespace used to keep track of keyboard shortcuts and the\n * key codes used to execute those shortcuts.\n */\n'use strict';\n\n/**\n * The namespace used to keep track of keyboard shortcuts and the\n * key codes used to execute those shortcuts.\n * @class\n */\ngoog.module('Blockly.ShortcutRegistry');\n\nconst object = goog.require('Blockly.utils.object');\nconst {KeyCodes} = goog.require('Blockly.utils.KeyCodes');\n/* eslint-disable-next-line no-unused-vars */\nconst {Workspace} = goog.requireType('Blockly.Workspace');\n\n\n/**\n * Class for the registry of keyboard shortcuts. This is intended to be a\n * singleton. You should not create a new instance, and only access this class\n * from ShortcutRegistry.registry.\n * @alias Blockly.ShortcutRegistry\n */\nclass ShortcutRegistry {\n  /**\n   * Resets the existing ShortcutRegistry singleton.\n   */\n  constructor() {\n    this.reset();\n  }\n\n  /**\n   * Clear and recreate the registry and keyMap.\n   */\n  reset() {\n    /**\n     * Registry of all keyboard shortcuts, keyed by name of shortcut.\n     * @type {!Object<string, !ShortcutRegistry.KeyboardShortcut>}\n     * @private\n     */\n    this.registry_ = Object.create(null);\n\n    /**\n     * Map of key codes to an array of shortcut names.\n     * @type {!Object<string, !Array<string>>}\n     * @private\n     */\n    this.keyMap_ = Object.create(null);\n  }\n\n  /**\n   * Registers a keyboard shortcut.\n   * @param {!ShortcutRegistry.KeyboardShortcut} shortcut The\n   *     shortcut for this key code.\n   * @param {boolean=} opt_allowOverrides True to prevent a warning when\n   *     overriding an already registered item.\n   * @throws {Error} if a shortcut with the same name already exists.\n   * @public\n   */\n  register(shortcut, opt_allowOverrides) {\n    const registeredShortcut = this.registry_[shortcut.name];\n    if (registeredShortcut && !opt_allowOverrides) {\n      throw new Error(\n          'Shortcut with name \"' + shortcut.name + '\" already exists.');\n    }\n    this.registry_[shortcut.name] = shortcut;\n  }\n\n  /**\n   * Unregisters a keyboard shortcut registered with the given key code. This\n   * will also remove any key mappings that reference this shortcut.\n   * @param {string} shortcutName The name of the shortcut to unregister.\n   * @return {boolean} True if an item was unregistered, false otherwise.\n   * @public\n   */\n  unregister(shortcutName) {\n    const shortcut = this.registry_[shortcutName];\n\n    if (!shortcut) {\n      console.warn(\n          'Keyboard shortcut with name \"' + shortcutName + '\" not found.');\n      return false;\n    }\n\n    this.removeAllKeyMappings(shortcutName);\n\n    delete this.registry_[shortcutName];\n    return true;\n  }\n\n  /**\n   * Adds a mapping between a keycode and a keyboard shortcut.\n   * @param {string|KeyCodes} keyCode The key code for the keyboard\n   *     shortcut. If registering a key code with a modifier (ex: ctrl+c) use\n   *     ShortcutRegistry.registry.createSerializedKey;\n   * @param {string} shortcutName The name of the shortcut to execute when the\n   *     given keycode is pressed.\n   * @param {boolean=} opt_allowCollision True to prevent an error when adding a\n   *     shortcut to a key that is already mapped to a shortcut.\n   * @throws {Error} if the given key code is already mapped to a shortcut.\n   * @public\n   */\n  addKeyMapping(keyCode, shortcutName, opt_allowCollision) {\n    keyCode = String(keyCode);\n    const shortcutNames = this.keyMap_[keyCode];\n    if (shortcutNames && !opt_allowCollision) {\n      throw new Error(\n          'Shortcut with name \"' + shortcutName + '\" collides with shortcuts ' +\n          shortcutNames.toString());\n    } else if (shortcutNames && opt_allowCollision) {\n      shortcutNames.unshift(shortcutName);\n    } else {\n      this.keyMap_[keyCode] = [shortcutName];\n    }\n  }\n\n  /**\n   * Removes a mapping between a keycode and a keyboard shortcut.\n   * @param {string} keyCode The key code for the keyboard shortcut. If\n   *     registering a key code with a modifier (ex: ctrl+c) use\n   *     ShortcutRegistry.registry.createSerializedKey;\n   * @param {string} shortcutName The name of the shortcut to execute when the\n   *     given keycode is pressed.\n   * @param {boolean=} opt_quiet True to not console warn when there is no\n   *     shortcut to remove.\n   * @return {boolean} True if a key mapping was removed, false otherwise.\n   * @public\n   */\n  removeKeyMapping(keyCode, shortcutName, opt_quiet) {\n    const shortcutNames = this.keyMap_[keyCode];\n\n    if (!shortcutNames && !opt_quiet) {\n      console.warn(\n          'No keyboard shortcut with name \"' + shortcutName +\n          '\" registered with key code \"' + keyCode + '\"');\n      return false;\n    }\n\n    const shortcutIdx = shortcutNames.indexOf(shortcutName);\n    if (shortcutIdx > -1) {\n      shortcutNames.splice(shortcutIdx, 1);\n      if (shortcutNames.length === 0) {\n        delete this.keyMap_[keyCode];\n      }\n      return true;\n    }\n    if (!opt_quiet) {\n      console.warn(\n          'No keyboard shortcut with name \"' + shortcutName +\n          '\" registered with key code \"' + keyCode + '\"');\n    }\n    return false;\n  }\n\n  /**\n   * Removes all the key mappings for a shortcut with the given name.\n   * Useful when changing the default key mappings and the key codes registered\n   * to the shortcut are unknown.\n   * @param {string} shortcutName The name of the shortcut to remove from the\n   *     key map.\n   * @public\n   */\n  removeAllKeyMappings(shortcutName) {\n    for (const keyCode in this.keyMap_) {\n      this.removeKeyMapping(keyCode, shortcutName, true);\n    }\n  }\n\n  /**\n   * Sets the key map. Setting the key map will override any default key\n   * mappings.\n   * @param {!Object<string, !Array<string>>} keyMap The object with key code to\n   *     shortcut names.\n   * @public\n   */\n  setKeyMap(keyMap) {\n    this.keyMap_ = keyMap;\n  }\n\n  /**\n   * Gets the current key map.\n   * @return {!Object<string,!Array<!ShortcutRegistry.KeyboardShortcut>>}\n   *     The object holding key codes to ShortcutRegistry.KeyboardShortcut.\n   * @public\n   */\n  getKeyMap() {\n    return object.deepMerge(Object.create(null), this.keyMap_);\n  }\n\n  /**\n   * Gets the registry of keyboard shortcuts.\n   * @return {!Object<string, !ShortcutRegistry.KeyboardShortcut>}\n   *     The registry of keyboard shortcuts.\n   * @public\n   */\n  getRegistry() {\n    return object.deepMerge(Object.create(null), this.registry_);\n  }\n\n  /**\n   * Handles key down events.\n   * @param {!Workspace} workspace The main workspace where the event was\n   *     captured.\n   * @param {!Event} e The key down event.\n   * @return {boolean} True if the event was handled, false otherwise.\n   * @public\n   */\n  onKeyDown(workspace, e) {\n    const key = this.serializeKeyEvent_(e);\n    const shortcutNames = this.getShortcutNamesByKeyCode(key);\n    if (!shortcutNames) {\n      return false;\n    }\n    for (let i = 0, shortcutName; (shortcutName = shortcutNames[i]); i++) {\n      const shortcut = this.registry_[shortcutName];\n      if (!shortcut.preconditionFn || shortcut.preconditionFn(workspace)) {\n        // If the key has been handled, stop processing shortcuts.\n        if (shortcut.callback && shortcut.callback(workspace, e, shortcut)) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Gets the shortcuts registered to the given key code.\n   * @param {string} keyCode The serialized key code.\n   * @return {!Array<string>|undefined} The list of shortcuts to call when the\n   *     given keyCode is used. Undefined if no shortcuts exist.\n   * @public\n   */\n  getShortcutNamesByKeyCode(keyCode) {\n    return this.keyMap_[keyCode] || [];\n  }\n\n  /**\n   * Gets the serialized key codes that the shortcut with the given name is\n   * registered under.\n   * @param {string} shortcutName The name of the shortcut.\n   * @return {!Array<string>} An array with all the key codes the shortcut is\n   *     registered under.\n   * @public\n   */\n  getKeyCodesByShortcutName(shortcutName) {\n    const keys = [];\n    for (const keyCode in this.keyMap_) {\n      const shortcuts = this.keyMap_[keyCode];\n      const shortcutIdx = shortcuts.indexOf(shortcutName);\n      if (shortcutIdx > -1) {\n        keys.push(keyCode);\n      }\n    }\n    return keys;\n  }\n\n  /**\n   * Serializes a key event.\n   * @param {!Event} e A key down event.\n   * @return {string} The serialized key code for the given event.\n   * @private\n   */\n  serializeKeyEvent_(e) {\n    let serializedKey = '';\n    for (const modifier in ShortcutRegistry.modifierKeys) {\n      if (e.getModifierState(modifier)) {\n        if (serializedKey !== '') {\n          serializedKey += '+';\n        }\n        serializedKey += modifier;\n      }\n    }\n    if (serializedKey !== '' && e.keyCode) {\n      serializedKey = serializedKey + '+' + e.keyCode;\n    } else if (e.keyCode) {\n      serializedKey = e.keyCode.toString();\n    }\n    return serializedKey;\n  }\n\n  /**\n   * Checks whether any of the given modifiers are not valid.\n   * @param {!Array<string>} modifiers List of modifiers to be used with the\n   *     key.\n   * @throws {Error} if the modifier is not in the valid modifiers list.\n   * @private\n   */\n  checkModifiers_(modifiers) {\n    const validModifiers = object.values(ShortcutRegistry.modifierKeys);\n    for (let i = 0, modifier; (modifier = modifiers[i]); i++) {\n      if (validModifiers.indexOf(modifier) < 0) {\n        throw new Error(modifier + ' is not a valid modifier key.');\n      }\n    }\n  }\n\n  /**\n   * Creates the serialized key code that will be used in the key map.\n   * @param {number} keyCode Number code representing the key.\n   * @param {?Array<string>} modifiers List of modifier key codes to be used\n   *     with the key. All valid modifiers can be found in the\n   *     ShortcutRegistry.modifierKeys.\n   * @return {string} The serialized key code for the given modifiers and key.\n   * @public\n   */\n  createSerializedKey(keyCode, modifiers) {\n    let serializedKey = '';\n\n    if (modifiers) {\n      this.checkModifiers_(modifiers);\n      for (const modifier in ShortcutRegistry.modifierKeys) {\n        const modifierKeyCode = ShortcutRegistry.modifierKeys[modifier];\n        if (modifiers.indexOf(modifierKeyCode) > -1) {\n          if (serializedKey !== '') {\n            serializedKey += '+';\n          }\n          serializedKey += modifier;\n        }\n      }\n    }\n\n    if (serializedKey !== '' && keyCode) {\n      serializedKey = serializedKey + '+' + keyCode;\n    } else if (keyCode) {\n      serializedKey = keyCode.toString();\n    }\n    return serializedKey;\n  }\n}\n\n/**\n * Enum of valid modifiers.\n * @enum {!KeyCodes}\n */\nShortcutRegistry.modifierKeys = {\n  'Shift': KeyCodes.SHIFT,\n  'Control': KeyCodes.CTRL,\n  'Alt': KeyCodes.ALT,\n  'Meta': KeyCodes.META,\n};\n\n/**\n * A keyboard shortcut.\n * @typedef {{\n *    callback: ((function(!Workspace, Event,\n * !ShortcutRegistry.KeyboardShortcut):boolean)|undefined),\n *    name: string,\n *    preconditionFn: ((function(!Workspace):boolean)|undefined),\n *    metadata: (Object|undefined)\n * }}\n */\nShortcutRegistry.KeyboardShortcut;\n\n// Creates and assigns the singleton instance.\nconst registry = new ShortcutRegistry();\nShortcutRegistry.registry = registry;\n\nexports.ShortcutRegistry = ShortcutRegistry;\n","/**\n * @license\n * Copyright 2016 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview An SVG that floats on top of the workspace.\n * Blocks are moved into this SVG during a drag, improving performance.\n * The entire SVG is translated using CSS translation instead of SVG so the\n * blocks are never repainted during drag improving performance.\n */\n\n'use strict';\n\n/**\n * An SVG that floats on top of the workspace.\n * Blocks are moved into this SVG during a drag, improving performance.\n * The entire SVG is translated using CSS translation instead of SVG so the\n * blocks are never repainted during drag improving performance.\n * @class\n */\ngoog.module('Blockly.WorkspaceDragSurfaceSvg');\n\nconst dom = goog.require('Blockly.utils.dom');\nconst svgMath = goog.require('Blockly.utils.svgMath');\n/* eslint-disable-next-line no-unused-vars */\nconst {Coordinate} = goog.requireType('Blockly.utils.Coordinate');\nconst {Svg} = goog.require('Blockly.utils.Svg');\n\n\n/**\n * Blocks are moved into this SVG during a drag, improving performance.\n * The entire SVG is translated using CSS transforms instead of SVG so the\n * blocks are never repainted during drag improving performance.\n * @alias Blockly.WorkspaceDragSurfaceSvg\n */\nclass WorkspaceDragSurfaceSvg {\n  /**\n   * @param {!Element} container Containing element.\n   */\n  constructor(container) {\n    /**\n     * The SVG drag surface. Set once by WorkspaceDragSurfaceSvg.createDom.\n     * @type {SVGElement}\n     * @private\n     */\n    this.SVG_ = null;\n\n    /**\n     * Containing HTML element; parent of the workspace and the drag surface.\n     * @type {Element}\n     * @private\n     */\n    this.container_ = container;\n\n    /**\n     * The element to insert the block canvas and bubble canvas after when it\n     * goes back in the DOM at the end of a drag.\n     * @type {Element}\n     * @private\n     */\n    this.previousSibling_ = null;\n\n    this.createDom();\n  }\n  /**\n   * Create the drag surface and inject it into the container.\n   */\n  createDom() {\n    if (this.SVG_) {\n      return;  // Already created.\n    }\n\n    /**\n     * Dom structure when the workspace is being dragged. If there is no drag in\n     * progress, the SVG is empty and display: none.\n     * <svg class=\"blocklyWsDragSurface\" style=transform:translate3d(...)>\n     *   <g class=\"blocklyBlockCanvas\"></g>\n     *   <g class=\"blocklyBubbleCanvas\">/g>\n     * </svg>\n     */\n    this.SVG_ = dom.createSvgElement(\n        Svg.SVG, {\n          'xmlns': dom.SVG_NS,\n          'xmlns:html': dom.HTML_NS,\n          'xmlns:xlink': dom.XLINK_NS,\n          'version': '1.1',\n          'class': 'blocklyWsDragSurface blocklyOverflowVisible',\n        },\n        null);\n    this.container_.appendChild(this.SVG_);\n  }\n  /**\n   * Translate the entire drag surface during a drag.\n   * We translate the drag surface instead of the blocks inside the surface\n   * so that the browser avoids repainting the SVG.\n   * Because of this, the drag coordinates must be adjusted by scale.\n   * @param {number} x X translation for the entire surface\n   * @param {number} y Y translation for the entire surface\n   * @package\n   */\n  translateSurface(x, y) {\n    // This is a work-around to prevent a the blocks from rendering\n    // fuzzy while they are being moved on the drag surface.\n    const fixedX = x.toFixed(0);\n    const fixedY = y.toFixed(0);\n\n    this.SVG_.style.display = 'block';\n    dom.setCssTransform(\n        this.SVG_, 'translate3d(' + fixedX + 'px, ' + fixedY + 'px, 0)');\n  }\n  /**\n   * Reports the surface translation in scaled workspace coordinates.\n   * Use this when finishing a drag to return blocks to the correct position.\n   * @return {!Coordinate} Current translation of the surface\n   * @package\n   */\n  getSurfaceTranslation() {\n    return svgMath.getRelativeXY(/** @type {!SVGElement} */ (this.SVG_));\n  }\n  /**\n   * Move the blockCanvas and bubbleCanvas out of the surface SVG and on to\n   * newSurface.\n   * @param {SVGElement} newSurface The element to put the drag surface contents\n   *     into.\n   * @package\n   */\n  clearAndHide(newSurface) {\n    if (!newSurface) {\n      throw Error(\n          'Couldn\\'t clear and hide the drag surface: missing new surface.');\n    }\n    const blockCanvas = /** @type {!Element} */ (this.SVG_.childNodes[0]);\n    const bubbleCanvas = /** @type {!Element} */ (this.SVG_.childNodes[1]);\n    if (!blockCanvas || !bubbleCanvas ||\n        !dom.hasClass(blockCanvas, 'blocklyBlockCanvas') ||\n        !dom.hasClass(bubbleCanvas, 'blocklyBubbleCanvas')) {\n      throw Error(\n          'Couldn\\'t clear and hide the drag surface. A node was missing.');\n    }\n\n    // If there is a previous sibling, put the blockCanvas back right\n    // afterwards, otherwise insert it as the first child node in newSurface.\n    if (this.previousSibling_ !== null) {\n      dom.insertAfter(blockCanvas, this.previousSibling_);\n    } else {\n      newSurface.insertBefore(blockCanvas, newSurface.firstChild);\n    }\n\n    // Reattach the bubble canvas after the blockCanvas.\n    dom.insertAfter(bubbleCanvas, blockCanvas);\n    // Hide the drag surface.\n    this.SVG_.style.display = 'none';\n    if (this.SVG_.childNodes.length) {\n      throw Error('Drag surface was not cleared.');\n    }\n    dom.setCssTransform(this.SVG_, '');\n    this.previousSibling_ = null;\n  }\n  /**\n   * Set the SVG to have the block canvas and bubble canvas in it and then\n   * show the surface.\n   * @param {!SVGElement} blockCanvas The block canvas <g> element from the\n   *     workspace.\n   * @param {!SVGElement} bubbleCanvas The <g> element that contains the\n   bubbles.\n   * @param {Element} previousSibling The element to insert the block canvas and\n         bubble canvas after when it goes back in the DOM at the end of a drag.\n   * @param {number} width The width of the workspace SVG element.\n   * @param {number} height The height of the workspace SVG element.\n   * @param {number} scale The scale of the workspace being dragged.\n   * @package\n   */\n  setContentsAndShow(\n      blockCanvas, bubbleCanvas, previousSibling, width, height, scale) {\n    if (this.SVG_.childNodes.length) {\n      throw Error('Already dragging a block.');\n    }\n    this.previousSibling_ = previousSibling;\n    // Make sure the blocks and bubble canvas are scaled appropriately.\n    blockCanvas.setAttribute(\n        'transform', 'translate(0, 0) scale(' + scale + ')');\n    bubbleCanvas.setAttribute(\n        'transform', 'translate(0, 0) scale(' + scale + ')');\n    this.SVG_.setAttribute('width', width);\n    this.SVG_.setAttribute('height', height);\n    this.SVG_.appendChild(blockCanvas);\n    this.SVG_.appendChild(bubbleCanvas);\n    this.SVG_.style.display = 'block';\n  }\n}\n\nexports.WorkspaceDragSurfaceSvg = WorkspaceDragSurfaceSvg;\n","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Blockly's internal clipboard for managing copy-paste.\n */\n'use strict';\n\n/**\n * Blockly's internal clipboard for managing copy-paste.\n * @namespace Blockly.clipboard\n */\ngoog.module('Blockly.clipboard');\n\n/* eslint-disable-next-line no-unused-vars */\nconst {ICopyable} = goog.requireType('Blockly.ICopyable');\n\n\n/**\n * Metadata about the object that is currently on the clipboard.\n * @type {?ICopyable.CopyData}\n */\nlet copyData = null;\n\n/**\n * Copy a block or workspace comment onto the local clipboard.\n * @param {!ICopyable} toCopy Block or Workspace Comment to be copied.\n * @alias Blockly.clipboard.copy\n * @package\n */\nconst copy = function(toCopy) {\n  copyData = toCopy.toCopyData();\n};\nexports.copy = copy;\n\n/**\n * Paste a block or workspace comment on to the main workspace.\n * @return {!ICopyable|null} The pasted thing if the paste\n *     was successful, null otherwise.\n * @alias Blockly.clipboard.paste\n * @package\n */\nconst paste = function() {\n  if (!copyData) {\n    return null;\n  }\n  // Pasting always pastes to the main workspace, even if the copy\n  // started in a flyout workspace.\n  let workspace = copyData.source;\n  if (workspace.isFlyout) {\n    workspace = workspace.targetWorkspace;\n  }\n  if (copyData.typeCounts &&\n      workspace.isCapacityAvailable(copyData.typeCounts)) {\n    return workspace.paste(copyData.saveInfo);\n  }\n  return null;\n};\nexports.paste = paste;\n\n/**\n * Duplicate this block and its children, or a workspace comment.\n * @param {!ICopyable} toDuplicate Block or Workspace Comment to be\n *     duplicated.\n * @return {!ICopyable|null} The block or workspace comment that was duplicated,\n *     or null if the duplication failed.\n * @alias Blockly.clipboard.duplicate\n * @package\n */\nconst duplicate = function(toDuplicate) {\n  const oldCopyData = copyData;\n  copy(toDuplicate);\n  const pastedThing = toDuplicate.workspace.paste(copyData.saveInfo);\n  copyData = oldCopyData;\n  return pastedThing;\n};\nexports.duplicate = duplicate;\n","/**\n * @license\n * Copyright 2022 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview All the values that we expect developers to be able to change\n * before injecting Blockly. Changing these values during run time is not\n * generally recommended.\n */\n'use strict';\n\n/**\n * All the values that we expect developers to be able to change\n * before injecting Blockly. Changing these values during run time is not\n * generally recommended.\n * @namespace Blockly.config\n */\ngoog.module('Blockly.config');\n\n\n/**\n * All the values that we expect developers to be able to change\n * before injecting Blockly.\n * @typedef {{\n *      dragRadius: number,\n *      flyoutDragRadius: number,\n *      snapRadius: number,\n *      currentConnectionPreference: number,\n *      bumpDelay: number,\n *      connectingSnapRadius: number\n *    }}\n */\nlet Config;  // eslint-disable-line no-unused-vars\n\n/**\n * Default snap radius.\n * @type {number}\n */\nconst DEFAULT_SNAP_RADIUS = 28;\n\n/**\n * Object holding all the values on Blockly that we expect developers to be\n * able to change.\n * @type {Config}\n */\nconst config = {\n  /**\n   * Number of pixels the mouse must move before a drag starts.\n   * @alias Blockly.config.dragRadius\n   */\n  dragRadius: 5,\n  /**\n   * Number of pixels the mouse must move before a drag/scroll starts from the\n   * flyout.  Because the drag-intention is determined when this is reached, it\n   * is larger than dragRadius so that the drag-direction is clearer.\n   * @alias Blockly.config.flyoutDragRadius\n   */\n  flyoutDragRadius: 10,\n  /**\n   * Maximum misalignment between connections for them to snap together.\n   * @alias Blockly.config.snapRadius\n   */\n  snapRadius: DEFAULT_SNAP_RADIUS,\n  /**\n   * Maximum misalignment between connections for them to snap together.\n   * This should be the same as the snap radius.\n   * @alias Blockly.config.connectingSnapRadius\n   */\n  connectingSnapRadius: DEFAULT_SNAP_RADIUS,\n  /**\n   * How much to prefer staying connected to the current connection over moving\n   * to a new connection.  The current previewed connection is considered to be\n   * this much closer to the matching connection on the block than it actually\n   * is.\n   * @alias Blockly.config.currentConnectionPreference\n   */\n  currentConnectionPreference: 8,\n  /**\n   * Delay in ms between trigger and bumping unconnected block out of alignment.\n   * @alias Blockly.config.bumpDelay\n   */\n  bumpDelay: 250,\n};\n\nexports.config = config;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Blockly menu item similar to Closure's goog.ui.MenuItem\n */\n'use strict';\n\n/**\n * Blockly menu item similar to Closure's goog.ui.MenuItem\n * @class\n */\ngoog.module('Blockly.MenuItem');\n\nconst aria = goog.require('Blockly.utils.aria');\nconst dom = goog.require('Blockly.utils.dom');\nconst idGenerator = goog.require('Blockly.utils.idGenerator');\n\n\n/**\n * Class representing an item in a menu.\n * @alias Blockly.MenuItem\n */\nconst MenuItem = class {\n  /**\n   * @param {string|!HTMLElement} content Text caption to display as the content\n   *     of the item, or a HTML element to display.\n   * @param {string=} opt_value Data/model associated with the menu item.\n   */\n  constructor(content, opt_value) {\n    /**\n     * Human-readable text of this menu item, or the HTML element to display.\n     * @type {string|!HTMLElement}\n     * @private\n     */\n    this.content_ = content;\n\n    /**\n     * Machine-readable value of this menu item.\n     * @type {string|undefined}\n     * @private\n     */\n    this.value_ = opt_value;\n\n    /**\n     * Is the menu item clickable, as opposed to greyed-out.\n     * @type {boolean}\n     * @private\n     */\n    this.enabled_ = true;\n\n    /**\n     * The DOM element for the menu item.\n     * @type {?HTMLDivElement}\n     * @private\n     */\n    this.element_ = null;\n\n    /**\n     * Whether the menu item is rendered right-to-left.\n     * @type {boolean}\n     * @private\n     */\n    this.rightToLeft_ = false;\n\n    /**\n     * ARIA name for this menu.\n     * @type {?aria.Role}\n     * @private\n     */\n    this.roleName_ = null;\n\n    /**\n     * Is this menu item checkable.\n     * @type {boolean}\n     * @private\n     */\n    this.checkable_ = false;\n\n    /**\n     * Is this menu item currently checked.\n     * @type {boolean}\n     * @private\n     */\n    this.checked_ = false;\n\n    /**\n     * Is this menu item currently highlighted.\n     * @type {boolean}\n     * @private\n     */\n    this.highlight_ = false;\n\n    /**\n     * Bound function to call when this menu item is clicked.\n     * @type {?Function}\n     * @private\n     */\n    this.actionHandler_ = null;\n  }\n\n  /**\n   * Creates the menuitem's DOM.\n   * @return {!Element} Completed DOM.\n   */\n  createDom() {\n    const element =\n        /** @type {!HTMLDivElement} */ (document.createElement('div'));\n    element.id = idGenerator.getNextUniqueId();\n    this.element_ = element;\n\n    // Set class and style\n    // goog-menuitem* is deprecated, use blocklyMenuItem*.  May 2020.\n    element.className = 'blocklyMenuItem goog-menuitem ' +\n        (this.enabled_ ? '' :\n                         'blocklyMenuItemDisabled goog-menuitem-disabled ') +\n        (this.checked_ ? 'blocklyMenuItemSelected goog-option-selected ' : '') +\n        (this.highlight_ ? 'blocklyMenuItemHighlight goog-menuitem-highlight ' :\n                           '') +\n        (this.rightToLeft_ ? 'blocklyMenuItemRtl goog-menuitem-rtl ' : '');\n\n    const content =\n        /** @type {!HTMLDivElement} */ (document.createElement('div'));\n    content.className = 'blocklyMenuItemContent goog-menuitem-content';\n    // Add a checkbox for checkable menu items.\n    if (this.checkable_) {\n      const checkbox =\n          /** @type {!HTMLDivElement} */ (document.createElement('div'));\n      checkbox.className = 'blocklyMenuItemCheckbox goog-menuitem-checkbox';\n      content.appendChild(checkbox);\n    }\n\n    let contentDom = /** @type {!HTMLElement} */ (this.content_);\n    if (typeof this.content_ === 'string') {\n      contentDom = document.createTextNode(this.content_);\n    }\n    content.appendChild(contentDom);\n    element.appendChild(content);\n\n    // Initialize ARIA role and state.\n    if (this.roleName_) {\n      aria.setRole(element, this.roleName_);\n    }\n    aria.setState(\n        element, aria.State.SELECTED,\n        (this.checkable_ && this.checked_) || false);\n    aria.setState(element, aria.State.DISABLED, !this.enabled_);\n\n    return element;\n  }\n\n  /**\n   * Dispose of this menu item.\n   */\n  dispose() {\n    this.element_ = null;\n  }\n\n  /**\n   * Gets the menu item's element.\n   * @return {?Element} The DOM element.\n   * @package\n   */\n  getElement() {\n    return this.element_;\n  }\n\n  /**\n   * Gets the unique ID for this menu item.\n   * @return {string} Unique component ID.\n   * @package\n   */\n  getId() {\n    return this.element_.id;\n  }\n\n  /**\n   * Gets the value associated with the menu item.\n   * @return {*} value Value associated with the menu item.\n   * @package\n   */\n  getValue() {\n    return this.value_;\n  }\n\n  /**\n   * Set menu item's rendering direction.\n   * @param {boolean} rtl True if RTL, false if LTR.\n   * @package\n   */\n  setRightToLeft(rtl) {\n    this.rightToLeft_ = rtl;\n  }\n\n  /**\n   * Set the menu item's accessibility role.\n   * @param {!aria.Role} roleName Role name.\n   * @package\n   */\n  setRole(roleName) {\n    this.roleName_ = roleName;\n  }\n\n  /**\n   * Sets the menu item to be checkable or not. Set to true for menu items\n   * that represent checkable options.\n   * @param {boolean} checkable Whether the menu item is checkable.\n   * @package\n   */\n  setCheckable(checkable) {\n    this.checkable_ = checkable;\n  }\n\n  /**\n   * Checks or unchecks the component.\n   * @param {boolean} checked Whether to check or uncheck the component.\n   * @package\n   */\n  setChecked(checked) {\n    this.checked_ = checked;\n  }\n\n  /**\n   * Highlights or unhighlights the component.\n   * @param {boolean} highlight Whether to highlight or unhighlight the\n   *     component.\n   * @package\n   */\n  setHighlighted(highlight) {\n    this.highlight_ = highlight;\n\n    const el = this.getElement();\n    if (el && this.isEnabled()) {\n      // goog-menuitem-highlight is deprecated, use blocklyMenuItemHighlight.\n      // May 2020.\n      const name = 'blocklyMenuItemHighlight';\n      const nameDep = 'goog-menuitem-highlight';\n      if (highlight) {\n        dom.addClass(el, name);\n        dom.addClass(el, nameDep);\n      } else {\n        dom.removeClass(el, name);\n        dom.removeClass(el, nameDep);\n      }\n    }\n  }\n\n  /**\n   * Returns true if the menu item is enabled, false otherwise.\n   * @return {boolean} Whether the menu item is enabled.\n   * @package\n   */\n  isEnabled() {\n    return this.enabled_;\n  }\n\n  /**\n   * Enables or disables the menu item.\n   * @param {boolean} enabled Whether to enable or disable the menu item.\n   * @package\n   */\n  setEnabled(enabled) {\n    this.enabled_ = enabled;\n  }\n\n  /**\n   * Performs the appropriate action when the menu item is activated\n   * by the user.\n   * @package\n   */\n  performAction() {\n    if (this.isEnabled() && this.actionHandler_) {\n      this.actionHandler_(this);\n    }\n  }\n\n  /**\n   * Set the handler that's called when the menu item is activated by the user.\n   * `obj` will be used as the 'this' object in the function when called.\n   * @param {function(!MenuItem)} fn The handler.\n   * @param {!Object} obj Used as the 'this' object in fn when called.\n   * @package\n   */\n  onAction(fn, obj) {\n    this.actionHandler_ = fn.bind(obj);\n  }\n};\n\nexports.MenuItem = MenuItem;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Blockly menu similar to Closure's goog.ui.Menu\n */\n'use strict';\n\n/**\n * Blockly menu similar to Closure's goog.ui.Menu\n * @class\n */\ngoog.module('Blockly.Menu');\n\nconst aria = goog.require('Blockly.utils.aria');\nconst browserEvents = goog.require('Blockly.browserEvents');\nconst dom = goog.require('Blockly.utils.dom');\nconst style = goog.require('Blockly.utils.style');\nconst {Coordinate} = goog.require('Blockly.utils.Coordinate');\nconst {KeyCodes} = goog.require('Blockly.utils.KeyCodes');\n/* eslint-disable-next-line no-unused-vars */\nconst {MenuItem} = goog.requireType('Blockly.MenuItem');\n/* eslint-disable-next-line no-unused-vars */\nconst {Size} = goog.requireType('Blockly.utils.Size');\n\n\n/**\n * A basic menu class.\n * @alias Blockly.Menu\n */\nconst Menu = class {\n  /**\n   * Constructs a new Menu instance.\n   */\n  constructor() {\n    /**\n     * Array of menu items.\n     * (Nulls are never in the array, but typing the array as nullable prevents\n     * the compiler from objecting to .indexOf(null))\n     * @type {!Array<MenuItem>}\n     * @private\n     */\n    this.menuItems_ = [];\n\n    /**\n     * Coordinates of the mousedown event that caused this menu to open. Used to\n     * prevent the consequent mouseup event due to a simple click from\n     * activating a menu item immediately.\n     * @type {?Coordinate}\n     * @package\n     */\n    this.openingCoords = null;\n\n    /**\n     * This is the element that we will listen to the real focus events on.\n     * A value of null means no menu item is highlighted.\n     * @type {?MenuItem}\n     * @private\n     */\n    this.highlightedItem_ = null;\n\n    /**\n     * Mouse over event data.\n     * @type {?browserEvents.Data}\n     * @private\n     */\n    this.mouseOverHandler_ = null;\n\n    /**\n     * Click event data.\n     * @type {?browserEvents.Data}\n     * @private\n     */\n    this.clickHandler_ = null;\n\n    /**\n     * Mouse enter event data.\n     * @type {?browserEvents.Data}\n     * @private\n     */\n    this.mouseEnterHandler_ = null;\n\n    /**\n     * Mouse leave event data.\n     * @type {?browserEvents.Data}\n     * @private\n     */\n    this.mouseLeaveHandler_ = null;\n\n    /**\n     * Key down event data.\n     * @type {?browserEvents.Data}\n     * @private\n     */\n    this.onKeyDownHandler_ = null;\n\n    /**\n     * The menu's root DOM element.\n     * @type {?HTMLDivElement}\n     * @private\n     */\n    this.element_ = null;\n\n    /**\n     * ARIA name for this menu.\n     * @type {?aria.Role}\n     * @private\n     */\n    this.roleName_ = null;\n  }\n\n  /**\n   * Add a new menu item to the bottom of this menu.\n   * @param {!MenuItem} menuItem Menu item to append.\n   */\n  addChild(menuItem) {\n    this.menuItems_.push(menuItem);\n  }\n\n  /**\n   * Creates the menu DOM.\n   * @param {!Element} container Element upon which to append this menu.\n   */\n  render(container) {\n    const element =\n        /** @type {!HTMLDivElement} */ (document.createElement('div'));\n    // goog-menu is deprecated, use blocklyMenu.  May 2020.\n    element.className = 'blocklyMenu goog-menu blocklyNonSelectable';\n    element.tabIndex = 0;\n    if (this.roleName_) {\n      aria.setRole(element, this.roleName_);\n    }\n    this.element_ = element;\n\n    // Add menu items.\n    for (let i = 0, menuItem; (menuItem = this.menuItems_[i]); i++) {\n      element.appendChild(menuItem.createDom());\n    }\n\n    // Add event handlers.\n    this.mouseOverHandler_ = browserEvents.conditionalBind(\n        element, 'mouseover', this, this.handleMouseOver_, true);\n    this.clickHandler_ = browserEvents.conditionalBind(\n        element, 'click', this, this.handleClick_, true);\n    this.mouseEnterHandler_ = browserEvents.conditionalBind(\n        element, 'mouseenter', this, this.handleMouseEnter_, true);\n    this.mouseLeaveHandler_ = browserEvents.conditionalBind(\n        element, 'mouseleave', this, this.handleMouseLeave_, true);\n    this.onKeyDownHandler_ = browserEvents.conditionalBind(\n        element, 'keydown', this, this.handleKeyEvent_);\n\n    container.appendChild(element);\n  }\n\n  /**\n   * Gets the menu's element.\n   * @return {?Element} The DOM element.\n   * @package\n   */\n  getElement() {\n    return this.element_;\n  }\n\n  /**\n   * Focus the menu element.\n   * @package\n   */\n  focus() {\n    const el = this.getElement();\n    if (el) {\n      el.focus({preventScroll: true});\n      dom.addClass(el, 'blocklyFocused');\n    }\n  }\n\n  /**\n   * Blur the menu element.\n   * @private\n   */\n  blur_() {\n    const el = this.getElement();\n    if (el) {\n      el.blur();\n      dom.removeClass(el, 'blocklyFocused');\n    }\n  }\n\n  /**\n   * Set the menu accessibility role.\n   * @param {!aria.Role} roleName role name.\n   * @package\n   */\n  setRole(roleName) {\n    this.roleName_ = roleName;\n  }\n\n  /**\n   * Dispose of this menu.\n   */\n  dispose() {\n    // Remove event handlers.\n    if (this.mouseOverHandler_) {\n      browserEvents.unbind(this.mouseOverHandler_);\n      this.mouseOverHandler_ = null;\n    }\n    if (this.clickHandler_) {\n      browserEvents.unbind(this.clickHandler_);\n      this.clickHandler_ = null;\n    }\n    if (this.mouseEnterHandler_) {\n      browserEvents.unbind(this.mouseEnterHandler_);\n      this.mouseEnterHandler_ = null;\n    }\n    if (this.mouseLeaveHandler_) {\n      browserEvents.unbind(this.mouseLeaveHandler_);\n      this.mouseLeaveHandler_ = null;\n    }\n    if (this.onKeyDownHandler_) {\n      browserEvents.unbind(this.onKeyDownHandler_);\n      this.onKeyDownHandler_ = null;\n    }\n\n    // Remove menu items.\n    for (let i = 0, menuItem; (menuItem = this.menuItems_[i]); i++) {\n      menuItem.dispose();\n    }\n    this.element_ = null;\n  }\n\n  // Child component management.\n\n  /**\n   * Returns the child menu item that owns the given DOM element,\n   * or null if no such menu item is found.\n   * @param {Element} elem DOM element whose owner is to be returned.\n   * @return {?MenuItem} Menu item for which the DOM element belongs to.\n   * @private\n   */\n  getMenuItem_(elem) {\n    const menuElem = this.getElement();\n    // Node might be the menu border (resulting in no associated menu item), or\n    // a menu item's div, or some element within the menu item.\n    // Walk up parents until one meets either the menu's root element, or\n    // a menu item's div.\n    while (elem && elem !== menuElem) {\n      if (dom.hasClass(elem, 'blocklyMenuItem')) {\n        // Having found a menu item's div, locate that menu item in this menu.\n        for (let i = 0, menuItem; (menuItem = this.menuItems_[i]); i++) {\n          if (menuItem.getElement() === elem) {\n            return menuItem;\n          }\n        }\n      }\n      elem = elem.parentElement;\n    }\n    return null;\n  }\n\n  // Highlight management.\n\n  /**\n   * Highlights the given menu item, or clears highlighting if null.\n   * @param {?MenuItem} item Item to highlight, or null.\n   * @package\n   */\n  setHighlighted(item) {\n    const currentHighlighted = this.highlightedItem_;\n    if (currentHighlighted) {\n      currentHighlighted.setHighlighted(false);\n      this.highlightedItem_ = null;\n    }\n    if (item) {\n      item.setHighlighted(true);\n      this.highlightedItem_ = item;\n      // Bring the highlighted item into view. This has no effect if the menu is\n      // not scrollable.\n      const el = /** @type {!Element} */ (this.getElement());\n      style.scrollIntoContainerView(\n          /** @type {!Element} */ (item.getElement()), el);\n\n      aria.setState(el, aria.State.ACTIVEDESCENDANT, item.getId());\n    }\n  }\n\n  /**\n   * Highlights the next highlightable item (or the first if nothing is\n   * currently highlighted).\n   * @package\n   */\n  highlightNext() {\n    const index = this.menuItems_.indexOf(this.highlightedItem_);\n    this.highlightHelper_(index, 1);\n  }\n\n  /**\n   * Highlights the previous highlightable item (or the last if nothing is\n   * currently highlighted).\n   * @package\n   */\n  highlightPrevious() {\n    const index = this.menuItems_.indexOf(this.highlightedItem_);\n    this.highlightHelper_(index < 0 ? this.menuItems_.length : index, -1);\n  }\n\n  /**\n   * Highlights the first highlightable item.\n   * @private\n   */\n  highlightFirst_() {\n    this.highlightHelper_(-1, 1);\n  }\n\n  /**\n   * Highlights the last highlightable item.\n   * @private\n   */\n  highlightLast_() {\n    this.highlightHelper_(this.menuItems_.length, -1);\n  }\n\n  /**\n   * Helper function that manages the details of moving the highlight among\n   * child menuitems in response to keyboard events.\n   * @param {number} startIndex Start index.\n   * @param {number} delta Step direction: 1 to go down, -1 to go up.\n   * @private\n   */\n  highlightHelper_(startIndex, delta) {\n    let index = startIndex + delta;\n    let menuItem;\n    while ((menuItem = this.menuItems_[index])) {\n      if (menuItem.isEnabled()) {\n        this.setHighlighted(menuItem);\n        break;\n      }\n      index += delta;\n    }\n  }\n\n  // Mouse events.\n\n  /**\n   * Handles mouseover events. Highlight menuitems as the user hovers over them.\n   * @param {!Event} e Mouse event to handle.\n   * @private\n   */\n  handleMouseOver_(e) {\n    const menuItem = this.getMenuItem_(/** @type {Element} */ (e.target));\n\n    if (menuItem) {\n      if (menuItem.isEnabled()) {\n        if (this.highlightedItem_ !== menuItem) {\n          this.setHighlighted(menuItem);\n        }\n      } else {\n        this.setHighlighted(null);\n      }\n    }\n  }\n\n  /**\n   * Handles click events. Pass the event onto the child menuitem to handle.\n   * @param {!Event} e Click event to handle.\n   * @private\n   */\n  handleClick_(e) {\n    const oldCoords = this.openingCoords;\n    // Clear out the saved opening coords immediately so they're not used twice.\n    this.openingCoords = null;\n    if (oldCoords && typeof e.clientX === 'number') {\n      const newCoords = new Coordinate(e.clientX, e.clientY);\n      if (Coordinate.distance(oldCoords, newCoords) < 1) {\n        // This menu was opened by a mousedown and we're handling the consequent\n        // click event. The coords haven't changed, meaning this was the same\n        // opening event. Don't do the usual behavior because the menu just\n        // popped up under the mouse and the user didn't mean to activate this\n        // item.\n        return;\n      }\n    }\n\n    const menuItem = this.getMenuItem_(/** @type {Element} */ (e.target));\n    if (menuItem) {\n      menuItem.performAction();\n    }\n  }\n\n  /**\n   * Handles mouse enter events. Focus the element.\n   * @param {!Event} _e Mouse event to handle.\n   * @private\n   */\n  handleMouseEnter_(_e) {\n    this.focus();\n  }\n\n  /**\n   * Handles mouse leave events. Blur and clear highlight.\n   * @param {!Event} _e Mouse event to handle.\n   * @private\n   */\n  handleMouseLeave_(_e) {\n    if (this.getElement()) {\n      this.blur_();\n      this.setHighlighted(null);\n    }\n  }\n\n  // Keyboard events.\n\n  /**\n   * Attempts to handle a keyboard event, if the menu item is enabled, by\n   * calling\n   * {@link handleKeyEventInternal_}.\n   * @param {!Event} e Key event to handle.\n   * @private\n   */\n  handleKeyEvent_(e) {\n    if (!this.menuItems_.length) {\n      // Empty menu.\n      return;\n    }\n    if (e.shiftKey || e.ctrlKey || e.metaKey || e.altKey) {\n      // Do not handle the key event if any modifier key is pressed.\n      return;\n    }\n\n    const highlighted = this.highlightedItem_;\n    switch (e.keyCode) {\n      case KeyCodes.ENTER:\n      case KeyCodes.SPACE:\n        if (highlighted) {\n          highlighted.performAction();\n        }\n        break;\n\n      case KeyCodes.UP:\n        this.highlightPrevious();\n        break;\n\n      case KeyCodes.DOWN:\n        this.highlightNext();\n        break;\n\n      case KeyCodes.PAGE_UP:\n      case KeyCodes.HOME:\n        this.highlightFirst_();\n        break;\n\n      case KeyCodes.PAGE_DOWN:\n      case KeyCodes.END:\n        this.highlightLast_();\n        break;\n\n      default:\n        // Not a key the menu is interested in.\n        return;\n    }\n    // The menu used this key, don't let it have secondary effects.\n    e.preventDefault();\n    e.stopPropagation();\n  }\n\n  /**\n   * Get the size of a rendered menu.\n   * @return {!Size} Object with width and height properties.\n   * @package\n   */\n  getSize() {\n    const menuDom = this.getElement();\n    const menuSize = style.getSize(/** @type {!Element} */\n                                   (menuDom));\n    // Recalculate height for the total content, not only box height.\n    menuSize.height = menuDom.scrollHeight;\n    return menuSize;\n  }\n};\n\nexports.Menu = Menu;\n","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The top level namespace for priorities of plugin serializers.\n * Includes constants for the priorities of different plugin\n * serializers. Higher priorities are deserialized first.\n */\n\n'use strict';\n\n/**\n * The top level namespace for priorities of plugin serializers.\n * Includes constants for the priorities of different plugin serializers. Higher\n * priorities are deserialized first.\n * @namespace Blockly.serialization.priorities\n */\ngoog.module('Blockly.serialization.priorities');\n\n\n/**\n * The priority for deserializing variables.\n * @type {number}\n * @const\n * @alias Blockly.serialization.priorities.VARIABLES\n */\nexports.VARIABLES = 100;\n\n/**\n * The priority for deserializing blocks.\n * @type {number}\n * @const\n * @alias Blockly.serialization.priorities.BLOCKS\n */\nexports.BLOCKS = 50;\n","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Contains functions registering serializers (eg blocks,\n * variables, plugins, etc).\n */\n'use strict';\n\n/**\n * Contains functions registering serializers (eg blocks, variables, plugins,\n * etc).\n * @namespace Blockly.serialization.registry\n */\ngoog.module('Blockly.serialization.registry');\n\nconst registry = goog.require('Blockly.registry');\n// eslint-disable-next-line no-unused-vars\nconst {ISerializer} = goog.requireType('Blockly.serialization.ISerializer');\n\n\n/**\n * Registers the given serializer so that it can be used for serialization and\n * deserialization.\n * @param {string} name The name of the serializer to register.\n * @param {ISerializer} serializer The serializer to register.\n * @alias Blockly.serialization.registry.register\n */\nconst register = function(name, serializer) {\n  registry.register(registry.Type.SERIALIZER, name, serializer);\n};\nexports.register = register;\n\n/**\n * Unregisters the serializer associated with the given name.\n * @param {string} name The name of the serializer to unregister.\n * @alias Blockly.serialization.registry.unregister\n */\nconst unregister = function(name) {\n  registry.unregister(registry.Type.SERIALIZER, name);\n};\nexports.unregister = unregister;\n","\n/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Contains custom errors thrown by the serialization system.\n */\n'use strict';\n\n/**\n * Contains custom errors thrown by the serialization system.\n * @namespace Blockly.serialization.exceptions\n */\ngoog.module('Blockly.serialization.exceptions');\n\n/* eslint-disable-next-line no-unused-vars */\nconst {Block} = goog.requireType('Blockly.Block');\n// eslint-disable-next-line no-unused-vars\nconst {State} = goog.requireType('Blockly.serialization.blocks');\n\n\n/**\n * @alias Blockly.serialization.exceptions.DeserializationError\n */\nclass DeserializationError extends Error {}\nexports.DeserializationError = DeserializationError;\n\n/**\n * Represents an error where the serialized state is expected to provide a\n * block type, but it is not provided.\n * @alias Blockly.serialization.exceptions.MissingBlockType\n */\nclass MissingBlockType extends DeserializationError {\n  /**\n   * @param {!State} state The state object which is missing the block type.\n   * @package\n   */\n  constructor(state) {\n    super(`Expected to find a 'type' property, defining the block type`);\n\n    /**\n     * The state object containing the bad name.\n     * @type {!State}\n     */\n    this.state = state;\n  }\n}\nexports.MissingBlockType = MissingBlockType;\n\n/**\n * Represents an error where deserialization encountered a block that did\n * not have a connection that was defined in the serialized state.\n * @alias Blockly.serialization.exceptions.MissingConnection\n */\nclass MissingConnection extends DeserializationError {\n  /**\n   * @param {string} connection The name of the connection that is missing. E.g.\n   *     'IF0', or 'next'.\n   * @param {!Block} block The block missing the connection.\n   * @param {!State} state The state object containing the bad connection.\n   * @package\n   */\n  constructor(connection, block, state) {\n    super(`The block ${block.toDevString()} is missing a(n) ${connection}\nconnection`);\n\n    /**\n     * The block missing the connection.\n     * @type {!Block}\n     */\n    this.block = block;\n\n    /**\n     * The state object containing the bad name.\n     * @type {!State}\n     */\n    this.state = state;\n  }\n}\nexports.MissingConnection = MissingConnection;\n\n/**\n * Represents an error where deserialization tried to connect two connections\n * that were not compatible.\n * @alias Blockly.serialization.exceptions.BadConnectionCheck\n */\nclass BadConnectionCheck extends DeserializationError {\n  /**\n   * @param {string} reason The reason the connections were not compatible.\n   * @param {string} childConnection The name of the incompatible child\n   *     connection. E.g. 'output' or 'previous'.\n   * @param {!Block} childBlock The child block that could not connect\n   *     to its parent.\n   * @param {!State} childState The state object representing the child block.\n   * @package\n   */\n  constructor(reason, childConnection, childBlock, childState) {\n    super(`The block ${childBlock.toDevString()} could not connect its\n${childConnection} to its parent, because: ${reason}`);\n\n    /**\n     * The block that could not connect to its parent.\n     * @type {!Block}\n     */\n    this.childBlock = childBlock;\n\n    /**\n     * The state object representing the block that could not connect to its\n     * parent.\n     * @type {!State}\n     */\n    this.childState = childState;\n  }\n}\nexports.BadConnectionCheck = BadConnectionCheck;\n\n/**\n * Represents an error where deserialization encountered a real block as it\n * was deserializing children of a shadow.\n * This is an error because it is an invariant of Blockly that shadow blocks\n * do not have real children.\n * @alias Blockly.serialization.exceptions.RealChildOfShadow\n */\nclass RealChildOfShadow extends DeserializationError {\n  /**\n   * @param {!State} state The state object representing the real block.\n   * @package\n   */\n  constructor(state) {\n    super(`Encountered a real block which is defined as a child of a shadow\nblock. It is an invariant of Blockly that shadow blocks only have shadow\nchildren`);\n\n    /**\n     * The state object representing the real block.\n     * @type {!State}\n     */\n    this.state = state;\n  }\n}\nexports.RealChildOfShadow = RealChildOfShadow;\n","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The record type for an object containing functions for\n * serializing part of the workspace.\n */\n\n'use strict';\n\n/**\n * The record type for an object containing functions for\n *     serializing part of the workspace.\n * @namespace Blockly.serialization.ISerializer\n */\ngoog.module('Blockly.serialization.ISerializer');\n\n// eslint-disable-next-line no-unused-vars\nconst {Workspace} = goog.requireType('Blockly.Workspace');\n\n\n/**\n * Serializes and deserializes a plugin or system.\n * @interface\n * @alias Blockly.serialization.ISerializer.ISerializer\n */\nclass ISerializer {\n  /* eslint-disable-next-line require-jsdoc */\n  constructor() {\n    /**\n     * A priority value used to determine the order of deserializing state.\n     * More positive priorities are deserialized before less positive\n     * priorities. Eg if you have priorities (0, -10, 10, 100) the order of\n     * deserialiation will be (100, 10, 0, -10).\n     * If two serializers have the same priority, they are deserialized in an\n     * arbitrary order relative to each other.\n     * @type {number}\n     */\n    this.priority;\n  }\n\n  /* eslint-disable no-unused-vars, valid-jsdoc */\n\n  /**\n   * Saves the state of the plugin or system.\n   * @param {!Workspace} workspace The workspace the system to serialize is\n   *     associated with.\n   * @return {?} A JS object containing the system's state, or null if\n   *     there is no state to record.\n   */\n  save(workspace) {}\n\n  /* eslint-enable valid-jsdoc */\n\n  /**\n   * Loads the state of the plugin or system.\n   * @param {?} state The state of the system to deserialize. This will always\n   *     be non-null.\n   * @param {!Workspace} workspace The workspace the system to deserialize is\n   *     associated with.\n   */\n  load(state, workspace) {}\n\n  /**\n   * Clears the state of the plugin or system.\n   * @param {!Workspace} workspace The workspace the system to clear the state\n   *     of is associated with.\n   */\n  clear(workspace) {}\n\n  /* eslint-enable no-unused-vars */\n}\n\nexports.ISerializer = ISerializer;\n","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Handles serializing blocks to plain JavaScript objects only\n * containing state.\n */\n'use strict';\n\n/**\n * Handles serializing blocks to plain JavaScript objects only containing state.\n * @namespace Blockly.serialization.blocks\n */\ngoog.module('Blockly.serialization.blocks');\n\nconst Xml = goog.require('Blockly.Xml');\nconst eventUtils = goog.require('Blockly.Events.utils');\nconst priorities = goog.require('Blockly.serialization.priorities');\nconst serializationRegistry = goog.require('Blockly.serialization.registry');\nconst {BadConnectionCheck, MissingBlockType, MissingConnection, RealChildOfShadow} = goog.require('Blockly.serialization.exceptions');\n/* eslint-disable-next-line no-unused-vars */\nconst {Block} = goog.requireType('Blockly.Block');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockSvg} = goog.requireType('Blockly.BlockSvg');\n// eslint-disable-next-line no-unused-vars\nconst {Connection} = goog.requireType('Blockly.Connection');\n// eslint-disable-next-line no-unused-vars\nconst {ISerializer} = goog.require('Blockly.serialization.ISerializer');\nconst {Size} = goog.require('Blockly.utils.Size');\n// eslint-disable-next-line no-unused-vars\nconst {Workspace} = goog.requireType('Blockly.Workspace');\nconst {inputTypes} = goog.require('Blockly.inputTypes');\n\n\n// TODO(#5160): Remove this once lint is fixed.\n/* eslint-disable no-use-before-define */\n\n/**\n * Represents the state of a connection.\n * @typedef {{\n *   shadow: (!State|undefined),\n *   block: (!State|undefined)\n * }}\n * @alias Blockly.serialization.blocks.ConnectionState\n */\nlet ConnectionState;\nexports.ConnectionState = ConnectionState;\n\n/**\n * Represents the state of a given block.\n * @typedef {{\n *     type: string,\n *     id: (string|undefined),\n *     x: (number|undefined),\n *     y: (number|undefined),\n *     collapsed: (boolean|undefined),\n *     enabled: (boolean|undefined),\n *     inline: (boolean|undefined),\n *     data: (string|undefined),\n *     extra-state: (*|undefined),\n *     icons: (!Object<string, *>|undefined),\n *     fields: (!Object<string, *>|undefined),\n *     inputs: (!Object<string, !ConnectionState>|undefined),\n *     next: (!ConnectionState|undefined)\n * }}\n * @alias Blockly.serialization.blocks.State\n */\nlet State;\nexports.State = State;\n\n/**\n * Returns the state of the given block as a plain JavaScript object.\n * @param {!Block} block The block to serialize.\n * @param {{addCoordinates: (boolean|undefined), addInputBlocks:\n *     (boolean|undefined), addNextBlocks: (boolean|undefined),\n *     doFullSerialization: (boolean|undefined)}=} param1\n *     addCoordinates: If true, the coordinates of the block are added to the\n *       serialized state. False by default.\n *     addinputBlocks: If true, children of the block which are connected to\n *       inputs will be serialized. True by default.\n *     addNextBlocks: If true, children of the block which are connected to the\n *       block's next connection (if it exists) will be serialized.\n *       True by default.\n *     doFullSerialization: If true, fields that normally just save a reference\n *       to some external state (eg variables) will instead serialize all of the\n *       info about that state. This supports deserializing the block into a\n *       workspace where that state doesn't yet exist. True by default.\n * @return {?State} The serialized state of the block, or null if the block\n *     could not be serialied (eg it was an insertion marker).\n * @alias Blockly.serialization.blocks.save\n */\nconst save = function(block, {\n  addCoordinates = false,\n  addInputBlocks = true,\n  addNextBlocks = true,\n  doFullSerialization = true,\n} = {}) {\n  if (block.isInsertionMarker()) {\n    return null;\n  }\n\n  const state = {\n    'type': block.type,\n    'id': block.id,\n  };\n\n  if (addCoordinates) {\n    saveCoords(block, state);\n  }\n  saveAttributes(block, state);\n  saveExtraState(block, state);\n  saveIcons(block, state);\n  saveFields(block, state, doFullSerialization);\n  if (addInputBlocks) {\n    saveInputBlocks(block, state, doFullSerialization);\n  }\n  if (addNextBlocks) {\n    saveNextBlocks(block, state, doFullSerialization);\n  }\n\n  return state;\n};\nexports.save = save;\n\n/**\n * Adds attributes to the given state object based on the state of the block.\n * Eg collapsed, disabled, inline, etc.\n * @param {!Block} block The block to base the attributes on.\n * @param {!State} state The state object to append to.\n */\nconst saveAttributes = function(block, state) {\n  if (block.isCollapsed()) {\n    state['collapsed'] = true;\n  }\n  if (!block.isEnabled()) {\n    state['enabled'] = false;\n  }\n  if (block.inputsInline !== undefined &&\n      block.inputsInline !== block.inputsInlineDefault) {\n    state['inline'] = block.inputsInline;\n  }\n  // Data is a nullable string, so we don't need to worry about falsy values.\n  if (block.data) {\n    state['data'] = block.data;\n  }\n};\n\n/**\n * Adds the coordinates of the given block to the given state object.\n * @param {!Block} block The block to base the coordinates on.\n * @param {!State} state The state object to append to.\n */\nconst saveCoords = function(block, state) {\n  const workspace = block.workspace;\n  const xy = block.getRelativeToSurfaceXY();\n  state['x'] = Math.round(workspace.RTL ? workspace.getWidth() - xy.x : xy.x);\n  state['y'] = Math.round(xy.y);\n};\n\n/**\n * Adds any extra state the block may provide to the given state object.\n * @param {!Block} block The block to serialize the extra state of.\n * @param {!State} state The state object to append to.\n */\nconst saveExtraState = function(block, state) {\n  if (block.saveExtraState) {\n    const extraState = block.saveExtraState();\n    if (extraState !== null) {\n      state['extraState'] = extraState;\n    }\n  } else if (block.mutationToDom) {\n    const extraState = block.mutationToDom();\n    if (extraState !== null) {\n      state['extraState'] =\n          Xml.domToText(extraState)\n              .replace(\n                  ' xmlns=\"https://developers.google.com/blockly/xml\"', '');\n    }\n  }\n};\n\n/**\n * Adds the state of all of the icons on the block to the given state object.\n * @param {!Block} block The block to serialize the icon state of.\n * @param {!State} state The state object to append to.\n */\nconst saveIcons = function(block, state) {\n  // TODO(#2105): Remove this logic and put it in the icon.\n  if (block.getCommentText()) {\n    state['icons'] = {\n      'comment': {\n        'text': block.getCommentText(),\n        'pinned': block.commentModel.pinned,\n        'height': Math.round(block.commentModel.size.height),\n        'width': Math.round(block.commentModel.size.width),\n      },\n    };\n  }\n};\n\n/**\n * Adds the state of all of the fields on the block to the given state object.\n * @param {!Block} block The block to serialize the field state of.\n * @param {!State} state The state object to append to.\n * @param {boolean} doFullSerialization Whether or not to serialize the full\n *     state of the field (rather than possibly saving a reference to some\n *     state).\n */\nconst saveFields = function(block, state, doFullSerialization) {\n  const fields = Object.create(null);\n  for (let i = 0; i < block.inputList.length; i++) {\n    const input = block.inputList[i];\n    for (let j = 0; j < input.fieldRow.length; j++) {\n      const field = input.fieldRow[j];\n      if (field.isSerializable()) {\n        fields[field.name] = field.saveState(doFullSerialization);\n      }\n    }\n  }\n  if (Object.keys(fields).length) {\n    state['fields'] = fields;\n  }\n};\n\n/**\n * Adds the state of all of the child blocks of the given block (which are\n * connected to inputs) to the given state object.\n * @param {!Block} block The block to serialize the input blocks of.\n * @param {!State} state The state object to append to.\n * @param {boolean} doFullSerialization Whether or not to do full serialization.\n */\nconst saveInputBlocks = function(block, state, doFullSerialization) {\n  const inputs = Object.create(null);\n  for (let i = 0; i < block.inputList.length; i++) {\n    const input = block.inputList[i];\n    if (input.type === inputTypes.DUMMY) {\n      continue;\n    }\n    const connectionState = saveConnection(\n        /** @type {!Connection} */ (input.connection), doFullSerialization);\n    if (connectionState) {\n      inputs[input.name] = connectionState;\n    }\n  }\n\n  if (Object.keys(inputs).length) {\n    state['inputs'] = inputs;\n  }\n};\n\n/**\n * Adds the state of all of the next blocks of the given block to the given\n * state object.\n * @param {!Block} block The block to serialize the next blocks of.\n * @param {!State} state The state object to append to.\n * @param {boolean} doFullSerialization Whether or not to do full serialization.\n */\nconst saveNextBlocks = function(block, state, doFullSerialization) {\n  if (!block.nextConnection) {\n    return;\n  }\n  const connectionState =\n      saveConnection(block.nextConnection, doFullSerialization);\n  if (connectionState) {\n    state['next'] = connectionState;\n  }\n};\n\n/**\n * Returns the state of the given connection (ie the state of any connected\n * shadow or real blocks).\n * @param {!Connection} connection The connection to serialize the connected\n *     blocks of.\n * @return {?ConnectionState} An object containing the state of any connected\n *     shadow block, or any connected real block.\n * @param {boolean} doFullSerialization Whether or not to do full serialization.\n */\nconst saveConnection = function(connection, doFullSerialization) {\n  const shadow = connection.getShadowState(true);\n  const child = connection.targetBlock();\n  if (!shadow && !child) {\n    return null;\n  }\n  const state = Object.create(null);\n  if (shadow) {\n    state['shadow'] = shadow;\n  }\n  if (child && !child.isShadow()) {\n    state['block'] = save(child, {doFullSerialization});\n  }\n  return state;\n};\n\n/**\n * Loads the block represented by the given state into the given workspace.\n * @param {!State} state The state of a block to deserialize into the workspace.\n * @param {!Workspace} workspace The workspace to add the block to.\n * @param {{recordUndo: (boolean|undefined)}=} param1\n *     recordUndo: If true, events triggered by this function will be undo-able\n *       by the user. False by default.\n * @return {!Block} The block that was just loaded.\n * @alias Blockly.serialization.blocks.append\n */\nconst append = function(state, workspace, {recordUndo = false} = {}) {\n  return appendInternal(state, workspace, {recordUndo});\n};\nexports.append = append;\n\n/**\n * Loads the block represented by the given state into the given workspace.\n * This is defined internally so that the extra parameters don't clutter our\n * external API.\n * But it is exported so that other places within Blockly can call it directly\n * with the extra parameters.\n * @param {!State} state The state of a block to deserialize into the workspace.\n * @param {!Workspace} workspace The workspace to add the block to.\n * @param {{parentConnection: (!Connection|undefined), isShadow:\n *     (boolean|undefined), recordUndo: (boolean|undefined)}=} param1\n *     parentConnection: If provided, the system will attempt to connect the\n *       block to this connection after it is created. Undefined by default.\n *     isShadow: If true, the block will be set to a shadow block after it is\n *       created. False by default.\n *     recordUndo: If true, events triggered by this function will be undo-able\n *       by the user. False by default.\n * @return {!Block} The block that was just appended.\n * @alias Blockly.serialization.blocks.appendInternal\n * @package\n */\nconst appendInternal = function(state, workspace, {\n  parentConnection = undefined,\n  isShadow = false,\n  recordUndo = false,\n} = {}) {\n  const prevRecordUndo = eventUtils.getRecordUndo();\n  eventUtils.setRecordUndo(recordUndo);\n  const existingGroup = eventUtils.getGroup();\n  if (!existingGroup) {\n    eventUtils.setGroup(true);\n  }\n  eventUtils.disable();\n\n  const block = appendPrivate(state, workspace, {parentConnection, isShadow});\n\n  eventUtils.enable();\n  eventUtils.fire(new (eventUtils.get(eventUtils.BLOCK_CREATE))(block));\n  eventUtils.setGroup(existingGroup);\n  eventUtils.setRecordUndo(prevRecordUndo);\n\n  // Adding connections to the connection db is expensive. This defers that\n  // operation to decrease load time.\n  if (workspace.rendered) {\n    const blockSvg = /** @type {!BlockSvg} */ (block);\n    setTimeout(() => {\n      if (!blockSvg.disposed) {\n        blockSvg.setConnectionTracking(true);\n      }\n    }, 1);\n  }\n\n  return block;\n};\nexports.appendInternal = appendInternal;\n\n/**\n * Loads the block represented by the given state into the given workspace.\n * This is defined privately so that it can be called recursively without firing\n * eroneous events. Events (and other things we only want to occur on the top\n * block) are handled by appendInternal.\n * @param {!State} state The state of a block to deserialize into the workspace.\n * @param {!Workspace} workspace The workspace to add the block to.\n * @param {{parentConnection: (!Connection|undefined),\n *     isShadow: (boolean|undefined)}=} param1\n *     parentConnection: If provided, the system will attempt to connect the\n *       block to this connection after it is created. Undefined by default.\n *     isShadow: The block will be set to a shadow block after it is created.\n *       False by default.\n * @return {!Block} The block that was just appended.\n */\nconst appendPrivate = function(state, workspace, {\n  parentConnection = undefined,\n  isShadow = false,\n} = {}) {\n  if (!state['type']) {\n    throw new MissingBlockType(state);\n  }\n\n  const block = workspace.newBlock(state['type'], state['id']);\n  block.setShadow(isShadow);\n  loadCoords(block, state);\n  loadAttributes(block, state);\n  loadExtraState(block, state);\n  tryToConnectParent(parentConnection, block, state);\n  loadIcons(block, state);\n  loadFields(block, state);\n  loadInputBlocks(block, state);\n  loadNextBlocks(block, state);\n  initBlock(block, workspace.rendered);\n\n  return block;\n};\n\n/**\n * Applies any coordinate information available on the state object to the\n * block.\n * @param {!Block} block The block to set the position of.\n * @param {!State} state The state object to reference.\n */\nconst loadCoords = function(block, state) {\n  let x = state['x'] === undefined ? 0 : state['x'];\n  const y = state['y'] === undefined ? 0 : state['y'];\n\n  const workspace = block.workspace;\n  x = workspace.RTL ? workspace.getWidth() - x : x;\n\n  block.moveBy(x, y);\n};\n\n/**\n * Applies any attribute information available on the state object to the block.\n * @param {!Block} block The block to set the attributes of.\n * @param {!State} state The state object to reference.\n */\nconst loadAttributes = function(block, state) {\n  if (state['collapsed']) {\n    block.setCollapsed(true);\n  }\n  if (state['enabled'] === false) {\n    block.setEnabled(false);\n  }\n  if (state['inline'] !== undefined) {\n    block.setInputsInline(state['inline']);\n  }\n  if (state['data'] !== undefined) {\n    block.data = state['data'];\n  }\n};\n\n/**\n * Applies any extra state information available on the state object to the\n * block.\n * @param {!Block} block The block to set the extra state of.\n * @param {!State} state The state object to reference.\n */\nconst loadExtraState = function(block, state) {\n  if (!state['extraState']) {\n    return;\n  }\n  if (block.loadExtraState) {\n    block.loadExtraState(state['extraState']);\n  } else {\n    block.domToMutation(Xml.textToDom(state['extraState']));\n  }\n};\n\n/**\n * Attempts to connect the block to the parent connection, if it exists.\n * @param {(!Connection|undefined)} parentConnection The parent connection to\n *     try to connect the block to.\n * @param {!Block} child The block to try to connect to the parent.\n * @param {!State} state The state which defines the given block\n */\nconst tryToConnectParent = function(parentConnection, child, state) {\n  if (!parentConnection) {\n    return;\n  }\n\n  if (parentConnection.getSourceBlock().isShadow() && !child.isShadow()) {\n    throw new RealChildOfShadow(state);\n  }\n\n  let connected = false;\n  let childConnection;\n  if (parentConnection.type === inputTypes.VALUE) {\n    childConnection = child.outputConnection;\n    if (!childConnection) {\n      throw new MissingConnection('output', child, state);\n    }\n    connected = parentConnection.connect(childConnection);\n  } else {  // Statement type.\n    childConnection = child.previousConnection;\n    if (!childConnection) {\n      throw new MissingConnection('previous', child, state);\n    }\n    connected = parentConnection.connect(childConnection);\n  }\n\n  if (!connected) {\n    const checker = child.workspace.connectionChecker;\n    throw new BadConnectionCheck(\n        checker.getErrorMessage(\n            checker.canConnectWithReason(\n                childConnection, parentConnection, false),\n            childConnection, parentConnection),\n        parentConnection.type === inputTypes.VALUE ? 'output connection' :\n                                                     'previous connection',\n        child, state);\n  }\n};\n\n/**\n * Applies icon state to the icons on the block, based on the given state\n * object.\n * @param {!Block} block The block to set the icon state of.\n * @param {!State} state The state object to reference.\n */\nconst loadIcons = function(block, state) {\n  if (!state['icons']) {\n    return;\n  }\n  // TODO(#2105): Remove this logic and put it in the icon.\n  const comment = state['icons']['comment'];\n  if (comment) {\n    block.setCommentText(comment['text']);\n    // Load if saved. (Cleaned unnecessary attributes when in the trashcan.)\n    if ('pinned' in comment) {\n      block.commentModel.pinned = comment['pinned'];\n    }\n    if ('width' in comment && 'height' in comment) {\n      block.commentModel.size = new Size(comment['width'], comment['height']);\n    }\n    if (comment['pinned'] && block.rendered && !block.isInFlyout) {\n      // Give the block a chance to be positioned and rendered before showing.\n      const blockSvg = /** @type {!BlockSvg} */ (block);\n      setTimeout(() => blockSvg.getCommentIcon().setVisible(true), 1);\n    }\n  }\n};\n\n/**\n * Applies any field information available on the state object to the block.\n * @param {!Block} block The block to set the field state of.\n * @param {!State} state The state object to reference.\n */\nconst loadFields = function(block, state) {\n  if (!state['fields']) {\n    return;\n  }\n  const keys = Object.keys(state['fields']);\n  for (let i = 0; i < keys.length; i++) {\n    const fieldName = keys[i];\n    const fieldState = state['fields'][fieldName];\n    const field = block.getField(fieldName);\n    if (!field) {\n      console.warn(\n          `Ignoring non-existant field ${fieldName} in block ${block.type}`);\n      continue;\n    }\n    field.loadState(fieldState);\n  }\n};\n\n/**\n * Creates any child blocks (attached to inputs) defined by the given state\n * and attaches them to the given block.\n * @param {!Block} block The block to attach input blocks to.\n * @param {!State} state The state object to reference.\n */\nconst loadInputBlocks = function(block, state) {\n  if (!state['inputs']) {\n    return;\n  }\n  const keys = Object.keys(state['inputs']);\n  for (let i = 0; i < keys.length; i++) {\n    const inputName = keys[i];\n    const input = block.getInput(inputName);\n    if (!input || !input.connection) {\n      throw new MissingConnection(inputName, block, state);\n    }\n    loadConnection(input.connection, state['inputs'][inputName]);\n  }\n};\n\n/**\n * Creates any next blocks defined by the given state and attaches them to the\n * given block.\n * @param {!Block} block The block to attach next blocks to.\n * @param {!State} state The state object to reference.\n */\nconst loadNextBlocks = function(block, state) {\n  if (!state['next']) {\n    return;\n  }\n  if (!block.nextConnection) {\n    throw new MissingConnection('next', block, state);\n  }\n  loadConnection(block.nextConnection, state['next']);\n};\n\n/**\n * Applies the state defined by connectionState to the given connection, ie\n * assigns shadows and attaches child blocks.\n * @param {!Connection} connection The connection to deserialize the\n *     connected blocks of.\n * @param {!ConnectionState} connectionState The object containing the state of\n *     any connected shadow block, or any connected real block.\n */\nconst loadConnection = function(connection, connectionState) {\n  if (connectionState['shadow']) {\n    connection.setShadowState(connectionState['shadow']);\n  }\n  if (connectionState['block']) {\n    appendPrivate(\n        connectionState['block'], connection.getSourceBlock().workspace,\n        {parentConnection: connection});\n  }\n};\n\n// TODO(#5146): Remove this from the serialization system.\n/**\n * Initializes the give block, eg init the model, inits the svg, renders, etc.\n * @param {!Block} block The block to initialize.\n * @param {boolean} rendered Whether the block is a rendered or headless block.\n */\nconst initBlock = function(block, rendered) {\n  if (rendered) {\n    const blockSvg = /** @type {!BlockSvg} */ (block);\n    // Adding connections to the connection db is expensive. This defers that\n    // operation to decrease load time.\n    blockSvg.setConnectionTracking(false);\n\n    blockSvg.initSvg();\n    blockSvg.render(false);\n    // fixes #6076 JSO deserialization doesn't\n    // set .iconXY_ property so here it will be set\n    const icons = block.getIcons();\n    for (let i = 0; i < icons.length; i++) {\n      icons[i].computeIconLocation();\n    }\n  } else {\n    block.initModel();\n  }\n};\n\n// Alias to disambiguate saving within the serializer.\nconst saveBlock = save;\n\n/**\n * Serializer for saving and loading block state.\n * @implements {ISerializer}\n * @alias Blockly.serialization.blocks.BlockSerializer\n */\nclass BlockSerializer {\n  /* eslint-disable-next-line require-jsdoc */\n  constructor() {\n    /**\n     * The priority for deserializing blocks.\n     * @type {number}\n     */\n    this.priority = priorities.BLOCKS;\n  }\n\n  /**\n   * Serializes the blocks of the given workspace.\n   * @param {!Workspace} workspace The workspace to save the blocks of.\n   * @return {?{languageVersion: number, blocks:!Array<!State>}} The state of\n   *     the workspace's blocks, or null if there are no blocks.\n   */\n  save(workspace) {\n    const blockStates = [];\n    for (const block of workspace.getTopBlocks(false)) {\n      const state =\n          saveBlock(block, {addCoordinates: true, doFullSerialization: false});\n      if (state) {\n        blockStates.push(state);\n      }\n    }\n    if (blockStates.length) {\n      return {\n        'languageVersion': 0,  // Currently unused.\n        'blocks': blockStates,\n      };\n    }\n    return null;\n  }\n\n  /**\n   * Deserializes the blocks defined by the given state into the given\n   * workspace.\n   * @param {{languageVersion: number, blocks:!Array<!State>}} state The state\n   *     of the blocks to deserialize.\n   * @param {!Workspace} workspace The workspace to deserialize into.\n   */\n  load(state, workspace) {\n    const blockStates = state['blocks'];\n    for (const state of blockStates) {\n      append(state, workspace, {recordUndo: eventUtils.getRecordUndo()});\n    }\n  }\n\n  /**\n   * Disposes of any blocks that exist on the workspace.\n   * @param {!Workspace} workspace The workspace to clear the blocks of.\n   */\n  clear(workspace) {\n    // Cannot use workspace.clear() because that also removes variables.\n    for (const block of workspace.getTopBlocks(false)) {\n      block.dispose(false);\n    }\n  }\n}\n\nserializationRegistry.register('blocks', new BlockSerializer());\n","/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Abstract class for events fired as a result of actions in\n * Blockly's editor.\n */\n'use strict';\n\n/**\n * Abstract class for events fired as a result of actions in\n * Blockly's editor.\n * @class\n */\ngoog.module('Blockly.Events.Abstract');\n\nconst eventUtils = goog.require('Blockly.Events.utils');\n/* eslint-disable-next-line no-unused-vars */\nconst {Workspace} = goog.requireType('Blockly.Workspace');\n\n\n/**\n * Abstract class for an event.\n * @abstract\n * @alias Blockly.Events.Abstract\n */\nclass Abstract {\n  /**\n   * @alias Blockly.Events.Abstract\n   */\n  constructor() {\n    /**\n     * Whether or not the event is blank (to be populated by fromJson).\n     * @type {?boolean}\n     */\n    this.isBlank = null;\n\n    /**\n     * The workspace identifier for this event.\n     * @type {string|undefined}\n     */\n    this.workspaceId = undefined;\n\n    /**\n     * The event group id for the group this event belongs to. Groups define\n     * events that should be treated as an single action from the user's\n     * perspective, and should be undone together.\n     * @type {string}\n     */\n    this.group = eventUtils.getGroup();\n\n    /**\n     * Sets whether the event should be added to the undo stack.\n     * @type {boolean}\n     */\n    this.recordUndo = eventUtils.getRecordUndo();\n\n    /**\n     * Whether or not the event is a UI event.\n     * @type {boolean}\n     */\n    this.isUiEvent = false;\n\n    /**\n     * Type of this event.\n     * @type {string|undefined}\n     */\n    this.type = undefined;\n  }\n\n  /**\n   * Encode the event as JSON.\n   * @return {!Object} JSON representation.\n   */\n  toJson() {\n    const json = {'type': this.type};\n    if (this.group) {\n      json['group'] = this.group;\n    }\n    return json;\n  }\n\n  /**\n   * Decode the JSON event.\n   * @param {!Object} json JSON representation.\n   */\n  fromJson(json) {\n    this.isBlank = false;\n    this.group = json['group'];\n  }\n\n  /**\n   * Does this event record any change of state?\n   * @return {boolean} True if null, false if something changed.\n   */\n  isNull() {\n    return false;\n  }\n\n  /**\n   * Run an event.\n   * @param {boolean} _forward True if run forward, false if run backward\n   *     (undo).\n   */\n  run(_forward) {\n    // Defined by subclasses.\n  }\n\n  /**\n   * Get workspace the event belongs to.\n   * @return {!Workspace} The workspace the event belongs to.\n   * @throws {Error} if workspace is null.\n   * @protected\n   */\n  getEventWorkspace_() {\n    let workspace;\n    if (this.workspaceId) {\n      const {Workspace} = goog.module.get('Blockly.Workspace');\n      workspace = Workspace.getById(this.workspaceId);\n    }\n    if (!workspace) {\n      throw Error(\n          'Workspace is null. Event must have been generated from real' +\n          ' Blockly events.');\n    }\n    return workspace;\n  }\n}\n\nexports.Abstract = Abstract;\n","/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Base class for all types of block events.\n */\n'use strict';\n\n/**\n * Base class for all types of block events.\n * @class\n */\ngoog.module('Blockly.Events.BlockBase');\n\nconst {Abstract: AbstractEvent} = goog.require('Blockly.Events.Abstract');\n/* eslint-disable-next-line no-unused-vars */\nconst {Block} = goog.requireType('Blockly.Block');\n\n\n/**\n * Abstract class for a block event.\n * @extends {AbstractEvent}\n * @alias Blockly.Events.BlockBase\n */\nclass BlockBase extends AbstractEvent {\n  /**\n   * @param {!Block=} opt_block The block this event corresponds to.\n   *     Undefined for a blank event.\n   */\n  constructor(opt_block) {\n    super();\n    this.isBlank = typeof opt_block === 'undefined';\n\n    /**\n     * The block ID for the block this event pertains to\n     * @type {string}\n     */\n    this.blockId = this.isBlank ? '' : opt_block.id;\n\n    /**\n     * The workspace identifier for this event.\n     * @type {string}\n     */\n    this.workspaceId = this.isBlank ? '' : opt_block.workspace.id;\n  }\n\n  /**\n   * Encode the event as JSON.\n   * @return {!Object} JSON representation.\n   */\n  toJson() {\n    const json = super.toJson();\n    json['blockId'] = this.blockId;\n    return json;\n  }\n\n  /**\n   * Decode the JSON event.\n   * @param {!Object} json JSON representation.\n   */\n  fromJson(json) {\n    super.fromJson(json);\n    this.blockId = json['blockId'];\n  }\n}\n\nexports.BlockBase = BlockBase;\n","/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Class for a block creation event.\n */\n'use strict';\n\n/**\n * Class for a block creation event.\n * @class\n */\ngoog.module('Blockly.Events.BlockCreate');\n\nconst Xml = goog.require('Blockly.Xml');\nconst blocks = goog.require('Blockly.serialization.blocks');\nconst eventUtils = goog.require('Blockly.Events.utils');\nconst registry = goog.require('Blockly.registry');\nconst {BlockBase} = goog.require('Blockly.Events.BlockBase');\n/* eslint-disable-next-line no-unused-vars */\nconst {Block} = goog.requireType('Blockly.Block');\n\n\n/**\n * Class for a block creation event.\n * @extends {BlockBase}\n * @alias Blockly.Events.BlockCreate\n */\nclass BlockCreate extends BlockBase {\n  /**\n   * @param {!Block=} opt_block The created block.  Undefined for a blank\n   *     event.\n   */\n  constructor(opt_block) {\n    super(opt_block);\n\n    /**\n     * Type of this event.\n     * @type {string}\n     */\n    this.type = eventUtils.BLOCK_CREATE;\n\n    if (!opt_block) {\n      return;  // Blank event to be populated by fromJson.\n    }\n    if (opt_block.isShadow()) {\n      // Moving shadow blocks is handled via disconnection.\n      this.recordUndo = false;\n    }\n\n    this.xml = Xml.blockToDomWithXY(opt_block);\n    this.ids = eventUtils.getDescendantIds(opt_block);\n\n    /**\n     * JSON representation of the block that was just created.\n     * @type {!blocks.State}\n     */\n    this.json = /** @type {!blocks.State} */ (\n        blocks.save(opt_block, {addCoordinates: true}));\n  }\n\n  /**\n   * Encode the event as JSON.\n   * @return {!Object} JSON representation.\n   */\n  toJson() {\n    const json = super.toJson();\n    json['xml'] = Xml.domToText(this.xml);\n    json['ids'] = this.ids;\n    json['json'] = this.json;\n    if (!this.recordUndo) {\n      json['recordUndo'] = this.recordUndo;\n    }\n    return json;\n  }\n\n  /**\n   * Decode the JSON event.\n   * @param {!Object} json JSON representation.\n   */\n  fromJson(json) {\n    super.fromJson(json);\n    this.xml = Xml.textToDom(json['xml']);\n    this.ids = json['ids'];\n    this.json = /** @type {!blocks.State} */ (json['json']);\n    if (json['recordUndo'] !== undefined) {\n      this.recordUndo = json['recordUndo'];\n    }\n  }\n\n  /**\n   * Run a creation event.\n   * @param {boolean} forward True if run forward, false if run backward (undo).\n   */\n  run(forward) {\n    const workspace = this.getEventWorkspace_();\n    if (forward) {\n      blocks.append(this.json, workspace);\n    } else {\n      for (let i = 0; i < this.ids.length; i++) {\n        const id = this.ids[i];\n        const block = workspace.getBlockById(id);\n        if (block) {\n          block.dispose(false);\n        } else if (id === this.blockId) {\n          // Only complain about root-level block.\n          console.warn('Can\\'t uncreate non-existent block: ' + id);\n        }\n      }\n    }\n  }\n}\n\nregistry.register(registry.Type.EVENT, eventUtils.CREATE, BlockCreate);\n\nexports.BlockCreate = BlockCreate;\n","/**\n * @license\n * Copyright 2011 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Functionality for the right-click context menus.\n */\n'use strict';\n\n/**\n * Functionality for the right-click context menus.\n * @namespace Blockly.ContextMenu\n */\ngoog.module('Blockly.ContextMenu');\n\nconst WidgetDiv = goog.require('Blockly.WidgetDiv');\nconst Xml = goog.require('Blockly.Xml');\nconst aria = goog.require('Blockly.utils.aria');\nconst browserEvents = goog.require('Blockly.browserEvents');\nconst clipboard = goog.require('Blockly.clipboard');\nconst deprecation = goog.require('Blockly.utils.deprecation');\nconst dom = goog.require('Blockly.utils.dom');\nconst eventUtils = goog.require('Blockly.Events.utils');\nconst userAgent = goog.require('Blockly.utils.userAgent');\nconst svgMath = goog.require('Blockly.utils.svgMath');\n/* eslint-disable-next-line no-unused-vars */\nconst {Block} = goog.requireType('Blockly.Block');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockSvg} = goog.requireType('Blockly.BlockSvg');\nconst {config} = goog.require('Blockly.config');\nconst {Coordinate} = goog.require('Blockly.utils.Coordinate');\nconst {MenuItem} = goog.require('Blockly.MenuItem');\nconst {Menu} = goog.require('Blockly.Menu');\nconst {Msg} = goog.require('Blockly.Msg');\nconst {Rect} = goog.require('Blockly.utils.Rect');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceCommentSvg} = goog.requireType('Blockly.WorkspaceCommentSvg');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceSvg} = goog.requireType('Blockly.WorkspaceSvg');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.Events.BlockCreate');\n\n\n/**\n * Which block is the context menu attached to?\n * @type {?Block}\n */\nlet currentBlock = null;\n\n/**\n * Gets the block the context menu is currently attached to.\n * @return {?Block} The block the context menu is attached to.\n * @alias Blockly.ContextMenu.getCurrentBlock\n */\nconst getCurrentBlock = function() {\n  return currentBlock;\n};\nexports.getCurrentBlock = getCurrentBlock;\n\n/**\n * Sets the block the context menu is currently attached to.\n * @param {?Block} block The block the context menu is attached to.\n * @alias Blockly.ContextMenu.setCurrentBlock\n */\nconst setCurrentBlock = function(block) {\n  currentBlock = block;\n};\nexports.setCurrentBlock = setCurrentBlock;\n\n// Add JS accessors for backwards compatibility.\nObject.defineProperties(exports, {\n  /**\n   * Which block is the context menu attached to?\n   * @name Blockly.ContextMenu.currentBlock\n   * @type {Block}\n   * @deprecated Use Blockly.Tooltip.getCurrentBlock() /\n   *     .setCurrentBlock() instead.  (September 2021)\n   * @suppress {checkTypes}\n   */\n  currentBlock: {\n    get: function() {\n      deprecation.warn(\n          'Blockly.ContextMenu.currentBlock', 'September 2021',\n          'September 2022', 'Blockly.Tooltip.getCurrentBlock()');\n      return getCurrentBlock();\n    },\n    set: function(block) {\n      deprecation.warn(\n          'Blockly.ContextMenu.currentBlock', 'September 2021',\n          'September 2022', 'Blockly.Tooltip.setCurrentBlock(block)');\n      setCurrentBlock(block);\n    },\n  },\n});\n\n/**\n * Menu object.\n * @type {Menu}\n */\nlet menu_ = null;\n\n/**\n * Construct the menu based on the list of options and show the menu.\n * @param {!Event} e Mouse event.\n * @param {!Array<!Object>} options Array of menu options.\n * @param {boolean} rtl True if RTL, false if LTR.\n * @alias Blockly.ContextMenu.show\n */\nconst show = function(e, options, rtl) {\n  WidgetDiv.show(exports, rtl, dispose);\n  if (!options.length) {\n    hide();\n    return;\n  }\n  const menu = populate_(options, rtl);\n  menu_ = menu;\n\n  position_(menu, e, rtl);\n  // 1ms delay is required for focusing on context menus because some other\n  // mouse event is still waiting in the queue and clears focus.\n  setTimeout(function() {\n    menu.focus();\n  }, 1);\n  currentBlock = null;  // May be set by Blockly.Block.\n};\nexports.show = show;\n\n/**\n * Create the context menu object and populate it with the given options.\n * @param {!Array<!Object>} options Array of menu options.\n * @param {boolean} rtl True if RTL, false if LTR.\n * @return {!Menu} The menu that will be shown on right click.\n * @private\n */\nconst populate_ = function(options, rtl) {\n  /* Here's what one option object looks like:\n    {text: 'Make It So',\n     enabled: true,\n     callback: Blockly.MakeItSo}\n  */\n  const menu = new Menu();\n  menu.setRole(aria.Role.MENU);\n  for (let i = 0; i < options.length; i++) {\n    const option = options[i];\n    const menuItem = new MenuItem(option.text);\n    menuItem.setRightToLeft(rtl);\n    menuItem.setRole(aria.Role.MENUITEM);\n    menu.addChild(menuItem);\n    menuItem.setEnabled(option.enabled);\n    if (option.enabled) {\n      const actionHandler = function(_menuItem) {\n        // TODO: Create a type for option that can be used in an @this tag.\n        /* eslint-disable-next-line no-invalid-this */\n        const option = this;\n        hide();\n        option.callback(option.scope);\n      };\n      menuItem.onAction(actionHandler, option);\n    }\n  }\n  return menu;\n};\n\n/**\n * Add the menu to the page and position it correctly.\n * @param {!Menu} menu The menu to add and position.\n * @param {!Event} e Mouse event for the right click that is making the context\n *     menu appear.\n * @param {boolean} rtl True if RTL, false if LTR.\n * @private\n */\nconst position_ = function(menu, e, rtl) {\n  // Record windowSize and scrollOffset before adding menu.\n  const viewportBBox = svgMath.getViewportBBox();\n  // This one is just a point, but we'll pretend that it's a rect so we can use\n  // some helper functions.\n  const anchorBBox = new Rect(\n      e.clientY + viewportBBox.top, e.clientY + viewportBBox.top,\n      e.clientX + viewportBBox.left, e.clientX + viewportBBox.left);\n\n  createWidget_(menu);\n  const menuSize = menu.getSize();\n\n  if (rtl) {\n    anchorBBox.left += menuSize.width;\n    anchorBBox.right += menuSize.width;\n    viewportBBox.left += menuSize.width;\n    viewportBBox.right += menuSize.width;\n  }\n\n  WidgetDiv.positionWithAnchor(viewportBBox, anchorBBox, menuSize, rtl);\n  // Calling menuDom.focus() has to wait until after the menu has been placed\n  // correctly.  Otherwise it will cause a page scroll to get the misplaced menu\n  // in view.  See issue #1329.\n  menu.focus();\n};\n\n/**\n * Create and render the menu widget inside Blockly's widget div.\n * @param {!Menu} menu The menu to add to the widget div.\n * @private\n */\nconst createWidget_ = function(menu) {\n  const div = WidgetDiv.getDiv();\n  if (!div) {\n    throw Error('Attempting to create a context menu when widget div is null');\n  }\n  menu.render(div);\n  const menuDom = menu.getElement();\n  dom.addClass(\n      /** @type {!Element} */ (menuDom), 'blocklyContextMenu');\n  // Prevent system context menu when right-clicking a Blockly context menu.\n  browserEvents.conditionalBind(\n      /** @type {!EventTarget} */ (menuDom), 'contextmenu', null,\n      haltPropagation);\n  // Focus only after the initial render to avoid issue #1329.\n  menu.focus();\n};\n\n/**\n * Halts the propagation of the event without doing anything else.\n * @param {!Event} e An event.\n */\nconst haltPropagation = function(e) {\n  // This event has been handled.  No need to bubble up to the document.\n  e.preventDefault();\n  e.stopPropagation();\n};\n\n/**\n * Hide the context menu.\n * @alias Blockly.ContextMenu.hide\n */\nconst hide = function() {\n  WidgetDiv.hideIfOwner(exports);\n  currentBlock = null;\n};\nexports.hide = hide;\n\n/**\n * Dispose of the menu.\n * @alias Blockly.ContextMenu.dispose\n */\nconst dispose = function() {\n  if (menu_) {\n    menu_.dispose();\n    menu_ = null;\n  }\n};\nexports.dispose = dispose;\n\n/**\n * Create a callback function that creates and configures a block,\n *   then places the new block next to the original.\n * @param {!Block} block Original block.\n * @param {!Element} xml XML representation of new block.\n * @return {!Function} Function that creates a block.\n * @alias Blockly.ContextMenu.callbackFactory\n */\nconst callbackFactory = function(block, xml) {\n  return function() {\n    eventUtils.disable();\n    let newBlock;\n    try {\n      newBlock =\n          /** @type {!BlockSvg} */ (Xml.domToBlock(xml, block.workspace));\n      // Move the new block next to the old block.\n      const xy = block.getRelativeToSurfaceXY();\n      if (block.RTL) {\n        xy.x -= config.snapRadius;\n      } else {\n        xy.x += config.snapRadius;\n      }\n      xy.y += config.snapRadius * 2;\n      newBlock.moveBy(xy.x, xy.y);\n    } finally {\n      eventUtils.enable();\n    }\n    if (eventUtils.isEnabled() && !newBlock.isShadow()) {\n      eventUtils.fire(new (eventUtils.get(eventUtils.BLOCK_CREATE))(newBlock));\n    }\n    newBlock.select();\n  };\n};\nexports.callbackFactory = callbackFactory;\n\n// Helper functions for creating context menu options.\n\n/**\n * Make a context menu option for deleting the current workspace comment.\n * @param {!WorkspaceCommentSvg} comment The workspace comment where the\n *     right-click originated.\n * @return {!Object} A menu option, containing text, enabled, and a callback.\n * @alias Blockly.ContextMenu.commentDeleteOption\n * @package\n */\nconst commentDeleteOption = function(comment) {\n  const deleteOption = {\n    text: Msg['REMOVE_COMMENT'],\n    enabled: true,\n    callback: function() {\n      eventUtils.setGroup(true);\n      comment.dispose();\n      eventUtils.setGroup(false);\n    },\n  };\n  return deleteOption;\n};\nexports.commentDeleteOption = commentDeleteOption;\n\n/**\n * Make a context menu option for duplicating the current workspace comment.\n * @param {!WorkspaceCommentSvg} comment The workspace comment where the\n *     right-click originated.\n * @return {!Object} A menu option, containing text, enabled, and a callback.\n * @alias Blockly.ContextMenu.commentDuplicateOption\n * @package\n */\nconst commentDuplicateOption = function(comment) {\n  const duplicateOption = {\n    text: Msg['DUPLICATE_COMMENT'],\n    enabled: true,\n    callback: function() {\n      clipboard.duplicate(comment);\n    },\n  };\n  return duplicateOption;\n};\nexports.commentDuplicateOption = commentDuplicateOption;\n\n/**\n * Make a context menu option for adding a comment on the workspace.\n * @param {!WorkspaceSvg} ws The workspace where the right-click\n *     originated.\n * @param {!Event} e The right-click mouse event.\n * @return {!Object} A menu option, containing text, enabled, and a callback.\n * @package\n * @suppress {strictModuleDepCheck,checkTypes} Suppress checks while workspace\n *     comments are not bundled in.\n * @alias Blockly.ContextMenu.workspaceCommentOption\n */\nconst workspaceCommentOption = function(ws, e) {\n  const {WorkspaceCommentSvg} = goog.module.get('Blockly.WorkspaceCommentSvg');\n  if (!WorkspaceCommentSvg) {\n    throw Error('Missing require for Blockly.WorkspaceCommentSvg');\n  }\n  // Helper function to create and position a comment correctly based on the\n  // location of the mouse event.\n  const addWsComment = function() {\n    const comment = new WorkspaceCommentSvg(\n        ws, Msg['WORKSPACE_COMMENT_DEFAULT_TEXT'],\n        WorkspaceCommentSvg.DEFAULT_SIZE, WorkspaceCommentSvg.DEFAULT_SIZE);\n\n    const injectionDiv = ws.getInjectionDiv();\n    // Bounding rect coordinates are in client coordinates, meaning that they\n    // are in pixels relative to the upper left corner of the visible browser\n    // window.  These coordinates change when you scroll the browser window.\n    const boundingRect = injectionDiv.getBoundingClientRect();\n\n    // The client coordinates offset by the injection div's upper left corner.\n    const clientOffsetPixels = new Coordinate(\n        e.clientX - boundingRect.left, e.clientY - boundingRect.top);\n\n    // The offset in pixels between the main workspace's origin and the upper\n    // left corner of the injection div.\n    const mainOffsetPixels = ws.getOriginOffsetInPixels();\n\n    // The position of the new comment in pixels relative to the origin of the\n    // main workspace.\n    const finalOffset =\n        Coordinate.difference(clientOffsetPixels, mainOffsetPixels);\n    // The position of the new comment in main workspace coordinates.\n    finalOffset.scale(1 / ws.scale);\n\n    const commentX = finalOffset.x;\n    const commentY = finalOffset.y;\n    comment.moveBy(commentX, commentY);\n    if (ws.rendered) {\n      comment.initSvg();\n      comment.render();\n      comment.select();\n    }\n  };\n\n  const wsCommentOption = {\n    // Foreign objects don't work in IE.  Don't let the user create comments\n    // that they won't be able to edit.\n    enabled: !userAgent.IE,\n  };\n  wsCommentOption.text = Msg['ADD_COMMENT'];\n  wsCommentOption.callback = function() {\n    addWsComment();\n  };\n  return wsCommentOption;\n};\nexports.workspaceCommentOption = workspaceCommentOption;\n","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Utility methods related to arrays.\n */\n'use strict';\n\n/**\n * @namespace Blockly.utils.array\n */\ngoog.module('Blockly.utils.array');\n\n\n/**\n * Removes the first occurrence of a particular value from an array.\n * @param {!Array} arr Array from which to remove value.\n * @param {*} value Value to remove.\n * @return {boolean} True if an element was removed.\n * @alias Blockly.array.removeElem\n * @package\n */\nconst removeElem = function(arr, value) {\n  const i = arr.indexOf(value);\n  if (i === -1) {\n    return false;\n  }\n  arr.splice(i, 1);\n  return true;\n};\nexports.removeElem = removeElem;\n","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Block rendering debugging functionality.\n */\n'use strict';\n\n/**\n * Block rendering debugging functionality.\n * @namespace Blockly.blockRendering.debug\n */\ngoog.module('Blockly.blockRendering.debug');\n\nconst deprecation = goog.require('Blockly.utils.deprecation');\n\n\n/**\n * Whether or not the debugger is turned on.\n * @type {boolean}\n */\nlet useDebugger = false;\n/**\n * Returns whether the debugger is turned on.\n * @return {boolean} Whether the debugger is turned on.\n * @alias Blockly.blockRendering.debug.isDebuggerEnabled\n * @package\n */\nconst isDebuggerEnabled = function() {\n  return useDebugger;\n};\nexports.isDebuggerEnabled = isDebuggerEnabled;\n\n/**\n * Turn on the blocks debugger.\n * @package\n * @alias Blockly.blockRendering.debug.startDebugger\n * @deprecated March 2022. Use the rendering debugger in @blockly/dev-tools.\n * See https://www.npmjs.com/package/@blockly/dev-tools for more information.\n */\nconst startDebugger = function() {\n  deprecation.warn(\n      'Blockly.blockRendering.debug.startDebugger()', 'February 2022',\n      'September 2022',\n      'the debug renderer in @blockly/dev-tools (See https://www.npmjs.com/package/@blockly/dev-tools.)');\n  useDebugger = true;\n};\nexports.startDebugger = startDebugger;\n\n/**\n * Turn off the blocks debugger.\n * @package\n * @alias Blockly.blockRendering.debug.stopDebugger\n * @deprecated March 2022. Use the rendering debugger in @blockly/dev-tools.\n * See https://www.npmjs.com/package/@blockly/dev-tools for more information.\n */\nconst stopDebugger = function() {\n  deprecation.warn(\n      'Blockly.blockRendering.debug.stopDebugger()', 'February 2022',\n      'September 2022',\n      'the debug renderer in @blockly/dev-tools (See https://www.npmjs.com/package/@blockly/dev-tools.)');\n  useDebugger = false;\n};\nexports.stopDebugger = stopDebugger;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Measurable types.\n */\n\n'use strict';\n\n/**\n * Measurable types.\n * @namespace Blockly.blockRendering.Types\n */\ngoog.module('Blockly.blockRendering.Types');\n\n/* eslint-disable-next-line no-unused-vars */\nconst {Measurable} = goog.requireType('Blockly.blockRendering.Measurable');\n/* eslint-disable-next-line no-unused-vars */\nconst {Row} = goog.requireType('Blockly.blockRendering.Row');\n\n\n/**\n * Types of rendering elements.\n * @enum {number}\n * @alias Blockly.blockRendering.Types\n */\nconst Types = {\n  NONE: 0,                       // None\n  FIELD: 1 << 0,                 // Field.\n  HAT: 1 << 1,                   // Hat.\n  ICON: 1 << 2,                  // Icon.\n  SPACER: 1 << 3,                // Spacer.\n  BETWEEN_ROW_SPACER: 1 << 4,    // Between Row Spacer.\n  IN_ROW_SPACER: 1 << 5,         // In Row Spacer.\n  EXTERNAL_VALUE_INPUT: 1 << 6,  // External Value Input.\n  INPUT: 1 << 7,                 // Input.\n  INLINE_INPUT: 1 << 8,          // Inline Input.\n  STATEMENT_INPUT: 1 << 9,       // Statement Input.\n  CONNECTION: 1 << 10,           // Connection.\n  PREVIOUS_CONNECTION: 1 << 11,  // Previous Connection.\n  NEXT_CONNECTION: 1 << 12,      // Next Connection.\n  OUTPUT_CONNECTION: 1 << 13,    // Output Connection.\n  CORNER: 1 << 14,               // Corner.\n  LEFT_SQUARE_CORNER: 1 << 15,   // Square Corner.\n  LEFT_ROUND_CORNER: 1 << 16,    // Round Corner.\n  RIGHT_SQUARE_CORNER: 1 << 17,  // Right Square Corner.\n  RIGHT_ROUND_CORNER: 1 << 18,   // Right Round Corner.\n  JAGGED_EDGE: 1 << 19,          // Jagged Edge.\n  ROW: 1 << 20,                  // Row.\n  TOP_ROW: 1 << 21,              // Top Row.\n  BOTTOM_ROW: 1 << 22,           // Bottom Row.\n  INPUT_ROW: 1 << 23,            // Input Row.\n};\n\n/**\n * A Left Corner Union Type.\n * @type {number}\n * @const\n * @package\n */\nTypes.LEFT_CORNER = Types.LEFT_SQUARE_CORNER | Types.LEFT_ROUND_CORNER;\n\n/**\n * A Right Corner Union Type.\n * @type {number}\n * @const\n * @package\n */\nTypes.RIGHT_CORNER = Types.RIGHT_SQUARE_CORNER | Types.RIGHT_ROUND_CORNER;\n\n/**\n * Next flag value to use for custom rendering element types.\n * This must be updated to reflect the next enum flag value\n * to use if additional elements are added to\n * `Types`.\n * @type {number}\n * @private\n */\nTypes.nextTypeValue_ = 1 << 24;\n\n/**\n * Get the enum flag value of an existing type or register a new type.\n * @param {!string} type The name of the type.\n * @return {!number} The enum flag value associated with that type.\n * @package\n */\nTypes.getType = function(type) {\n  if (!Object.prototype.hasOwnProperty.call(Types, type)) {\n    Types[type] = Types.nextTypeValue_;\n    Types.nextTypeValue_ <<= 1;\n  }\n  return Types[type];\n};\n\n/**\n * Whether a measurable stores information about a field.\n * @param {!Measurable} elem The element to check.\n * @return {number} 1 if the object stores information about a field.\n * @package\n */\nTypes.isField = function(elem) {\n  return elem.type & Types.FIELD;\n};\n\n/**\n * Whether a measurable stores information about a hat.\n * @param {!Measurable} elem The element to check.\n * @return {number} 1 if the object stores information about a hat.\n * @package\n */\nTypes.isHat = function(elem) {\n  return elem.type & Types.HAT;\n};\n\n/**\n * Whether a measurable stores information about an icon.\n * @param {!Measurable} elem The element to check.\n * @return {number} 1 if the object stores information about an icon.\n * @package\n */\nTypes.isIcon = function(elem) {\n  return elem.type & Types.ICON;\n};\n\n/**\n * Whether a measurable stores information about a spacer.\n * @param {!Measurable|!Row} elem\n *     The element to check.\n * @return {number} 1 if the object stores information about a spacer.\n * @package\n */\nTypes.isSpacer = function(elem) {\n  return elem.type & Types.SPACER;\n};\n\n/**\n * Whether a measurable stores information about an in-row spacer.\n * @param {!Measurable} elem The element to check.\n * @return {number} 1 if the object stores information about an\n *   in-row spacer.\n * @package\n */\nTypes.isInRowSpacer = function(elem) {\n  return elem.type & Types.IN_ROW_SPACER;\n};\n\n/**\n * Whether a measurable stores information about an input.\n * @param {!Measurable} elem The element to check.\n * @return {number} 1 if the object stores information about an input.\n * @package\n */\nTypes.isInput = function(elem) {\n  return elem.type & Types.INPUT;\n};\n\n/**\n * Whether a measurable stores information about an external input.\n * @param {!Measurable} elem The element to check.\n * @return {number} 1 if the object stores information about an\n *   external input.\n * @package\n */\nTypes.isExternalInput = function(elem) {\n  return elem.type & Types.EXTERNAL_VALUE_INPUT;\n};\n\n/**\n * Whether a measurable stores information about an inline input.\n * @param {!Measurable} elem The element to check.\n * @return {number} 1 if the object stores information about an\n *   inline input.\n * @package\n */\nTypes.isInlineInput = function(elem) {\n  return elem.type & Types.INLINE_INPUT;\n};\n\n/**\n * Whether a measurable stores information about a statement input.\n * @param {!Measurable} elem The element to check.\n * @return {number} 1 if the object stores information about a\n *   statement input.\n * @package\n */\nTypes.isStatementInput = function(elem) {\n  return elem.type & Types.STATEMENT_INPUT;\n};\n\n/**\n * Whether a measurable stores information about a previous connection.\n * @param {!Measurable} elem The element to check.\n * @return {number} 1 if the object stores information about a\n *   previous connection.\n * @package\n */\nTypes.isPreviousConnection = function(elem) {\n  return elem.type & Types.PREVIOUS_CONNECTION;\n};\n\n/**\n * Whether a measurable stores information about a next connection.\n * @param {!Measurable} elem The element to check.\n * @return {number} 1 if the object stores information about a\n *   next connection.\n * @package\n */\nTypes.isNextConnection = function(elem) {\n  return elem.type & Types.NEXT_CONNECTION;\n};\n\n/**\n * Whether a measurable stores information about a previous or next connection.\n * @param {!Measurable} elem The element to check.\n * @return {number} 1 if the object stores information about a previous or\n *   next connection.\n * @package\n */\nTypes.isPreviousOrNextConnection = function(elem) {\n  return elem.type & (Types.PREVIOUS_CONNECTION | Types.NEXT_CONNECTION);\n};\n\n/**\n * Whether a measurable stores information about a left round corner.\n * @param {!Measurable} elem The element to check.\n * @return {number} 1 if the object stores information about a\n *   left round corner.\n * @package\n */\nTypes.isLeftRoundedCorner = function(elem) {\n  return elem.type & Types.LEFT_ROUND_CORNER;\n};\n\n/**\n * Whether a measurable stores information about a right round corner.\n * @param {!Measurable} elem The element to check.\n * @return {number} 1 if the object stores information about a\n *   right round corner.\n * @package\n */\nTypes.isRightRoundedCorner = function(elem) {\n  return elem.type & Types.RIGHT_ROUND_CORNER;\n};\n\n/**\n * Whether a measurable stores information about a left square corner.\n * @param {!Measurable} elem The element to check.\n * @return {number} 1 if the object stores information about a\n *   left square corner.\n * @package\n */\nTypes.isLeftSquareCorner = function(elem) {\n  return elem.type & Types.LEFT_SQUARE_CORNER;\n};\n\n/**\n * Whether a measurable stores information about a right square corner.\n * @param {!Measurable} elem The element to check.\n * @return {number} 1 if the object stores information about a\n *   right square corner.\n * @package\n */\nTypes.isRightSquareCorner = function(elem) {\n  return elem.type & Types.RIGHT_SQUARE_CORNER;\n};\n\n/**\n * Whether a measurable stores information about a corner.\n * @param {!Measurable} elem The element to check.\n * @return {number} 1 if the object stores information about a\n *   corner.\n * @package\n */\nTypes.isCorner = function(elem) {\n  return elem.type & Types.CORNER;\n};\n\n/**\n * Whether a measurable stores information about a jagged edge.\n * @param {!Measurable} elem The element to check.\n * @return {number} 1 if the object stores information about a jagged edge.\n * @package\n */\nTypes.isJaggedEdge = function(elem) {\n  return elem.type & Types.JAGGED_EDGE;\n};\n\n/**\n * Whether a measurable stores information about a row.\n * @param {!Row} row The row to check.\n * @return {number} 1 if the object stores information about a row.\n * @package\n */\nTypes.isRow = function(row) {\n  return row.type & Types.ROW;\n};\n\n/**\n * Whether a measurable stores information about a between-row spacer.\n * @param {!Row} row The row to check.\n * @return {number} 1 if the object stores information about a\n *   between-row spacer.\n * @package\n */\nTypes.isBetweenRowSpacer = function(row) {\n  return row.type & Types.BETWEEN_ROW_SPACER;\n};\n\n/**\n * Whether a measurable stores information about a top row.\n * @param {!Row} row The row to check.\n * @return {number} 1 if the object stores information about a top row.\n * @package\n */\nTypes.isTopRow = function(row) {\n  return row.type & Types.TOP_ROW;\n};\n\n/**\n * Whether a measurable stores information about a bottom row.\n * @param {!Row} row The row to check.\n * @return {number} 1 if the object stores information about a bottom row.\n * @package\n */\nTypes.isBottomRow = function(row) {\n  return row.type & Types.BOTTOM_ROW;\n};\n\n/**\n * Whether a measurable stores information about a top or bottom row.\n * @param {!Row} row The row to check.\n * @return {number} 1 if the object stores information about a top or\n *   bottom row.\n * @package\n */\nTypes.isTopOrBottomRow = function(row) {\n  return row.type & (Types.TOP_ROW | Types.BOTTOM_ROW);\n};\n\n/**\n * Whether a measurable stores information about an input row.\n * @param {!Row} row The row to check.\n * @return {number} 1 if the object stores information about an input row.\n * @package\n */\nTypes.isInputRow = function(row) {\n  return row.type & Types.INPUT_ROW;\n};\n\nexports.Types = Types;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Object representing a single row on a rendered block.\n */\n\n/**\n * Object representing a single row on a rendered block.\n * @class\n */\ngoog.module('Blockly.blockRendering.Row');\n\n/* eslint-disable-next-line no-unused-vars */\nconst {ConstantProvider} = goog.requireType('Blockly.blockRendering.ConstantProvider');\n/* eslint-disable-next-line no-unused-vars */\nconst {InRowSpacer} = goog.requireType('Blockly.blockRendering.InRowSpacer');\n/* eslint-disable-next-line no-unused-vars */\nconst {InputConnection} = goog.requireType('Blockly.blockRendering.InputConnection');\n/* eslint-disable-next-line no-unused-vars */\nconst {Measurable} = goog.requireType('Blockly.blockRendering.Measurable');\nconst {Types} = goog.require('Blockly.blockRendering.Types');\n\n\n/**\n * An object representing a single row on a rendered block and all of its\n * subcomponents.\n * @alias Blockly.blockRendering.Row\n */\nclass Row {\n  /**\n   * @param {!ConstantProvider} constants The rendering\n   *   constants provider.\n   * @package\n   */\n  constructor(constants) {\n    /**\n     * The type of this rendering object.\n     * @package\n     * @type {number}\n     */\n    this.type = Types.ROW;\n\n    /**\n     * An array of elements contained in this row.\n     * @package\n     * @type {!Array<!Measurable>}\n     */\n    this.elements = [];\n\n    /**\n     * The height of the row.\n     * @package\n     * @type {number}\n     */\n    this.height = 0;\n\n    /**\n     * The width of the row, from the left edge of the block to the right.\n     * Does not include child blocks unless they are inline.\n     * @package\n     * @type {number}\n     */\n    this.width = 0;\n\n    /**\n     * The minimum height of the row.\n     * @package\n     * @type {number}\n     */\n    this.minHeight = 0;\n\n    /**\n     * The minimum width of the row, from the left edge of the block to the\n     * right. Does not include child blocks unless they are inline.\n     * @package\n     * @type {number}\n     */\n    this.minWidth = 0;\n\n    /**\n     * The width of the row, from the left edge of the block to the edge of the\n     * block or any connected child blocks.\n     * @package\n     * @type {number}\n     */\n    this.widthWithConnectedBlocks = 0;\n\n    /**\n     * The Y position of the row relative to the origin of the block's svg\n     * group.\n     * @package\n     * @type {number}\n     */\n    this.yPos = 0;\n\n    /**\n     * The X position of the row relative to the origin of the block's svg\n     * group.\n     * @package\n     * @type {number}\n     */\n    this.xPos = 0;\n\n    /**\n     * Whether the row has any external inputs.\n     * @package\n     * @type {boolean}\n     */\n    this.hasExternalInput = false;\n\n    /**\n     * Whether the row has any statement inputs.\n     * @package\n     * @type {boolean}\n     */\n    this.hasStatement = false;\n\n    /**\n     * Where the left edge of all of the statement inputs on the block should\n     * be. This makes sure that statement inputs which are proceded by fields\n     * of varius widths are all aligned.\n     * @type {number}\n     */\n    this.statementEdge = 0;\n\n    /**\n     * Whether the row has any inline inputs.\n     * @package\n     * @type {boolean}\n     */\n    this.hasInlineInput = false;\n\n    /**\n     * Whether the row has any dummy inputs.\n     * @package\n     * @type {boolean}\n     */\n    this.hasDummyInput = false;\n\n    /**\n     * Whether the row has a jagged edge.\n     * @package\n     * @type {boolean}\n     */\n    this.hasJaggedEdge = false;\n\n    /**\n     * The renderer's constant provider.\n     * @type {!ConstantProvider}\n     * @protected\n     */\n    this.constants_ = constants;\n\n    /**\n     * @type {number}\n     */\n    this.notchOffset = this.constants_.NOTCH_OFFSET_LEFT;\n\n    /**\n     * Alignment of the row.\n     * @package\n     * @type {?number}\n     */\n    this.align = null;\n  }\n\n  /**\n   * Get the last input on this row, if it has one.\n   * @return {InputConnection} The last input on the row,\n   *     or null.\n   * @package\n   */\n  getLastInput() {\n    // TODO: Consider moving this to InputRow, if possible.\n    for (let i = this.elements.length - 1; i >= 0; i--) {\n      const elem = this.elements[i];\n      if (Types.isInput(elem)) {\n        return /** @type {InputConnection} */ (elem);\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Inspect all subcomponents and populate all size properties on the row.\n   * @package\n   */\n  measure() {\n    throw Error('Unexpected attempt to measure a base Row.');\n  }\n\n  /**\n   * Determines whether this row should start with an element spacer.\n   * @return {boolean} Whether the row should start with a spacer.\n   * @package\n   */\n  startsWithElemSpacer() {\n    return true;\n  }\n\n  /**\n   * Determines whether this row should end with an element spacer.\n   * @return {boolean} Whether the row should end with a spacer.\n   * @package\n   */\n  endsWithElemSpacer() {\n    return true;\n  }\n\n  /**\n   * Convenience method to get the first spacer element on this row.\n   * @return {InRowSpacer} The first spacer element on\n   *   this row.\n   * @package\n   */\n  getFirstSpacer() {\n    for (let i = 0; i < this.elements.length; i++) {\n      const elem = this.elements[i];\n      if (Types.isSpacer(elem)) {\n        return /** @type {InRowSpacer} */ (elem);\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Convenience method to get the last spacer element on this row.\n   * @return {InRowSpacer} The last spacer element on\n   *   this row.\n   * @package\n   */\n  getLastSpacer() {\n    for (let i = this.elements.length - 1; i >= 0; i--) {\n      const elem = this.elements[i];\n      if (Types.isSpacer(elem)) {\n        return /** @type {InRowSpacer} */ (elem);\n      }\n    }\n    return null;\n  }\n}\n\nexports.Row = Row;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Object representing a bottom row on a rendered block.\n * of its subcomponents.\n */\n\n/**\n * Object representing a bottom row on a rendered block.\n * of its subcomponents.\n * @class\n */\ngoog.module('Blockly.blockRendering.BottomRow');\n\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockSvg} = goog.requireType('Blockly.BlockSvg');\n/* eslint-disable-next-line no-unused-vars */\nconst {ConstantProvider} = goog.requireType('Blockly.blockRendering.ConstantProvider');\n/* eslint-disable-next-line no-unused-vars */\nconst {NextConnection} = goog.requireType('Blockly.blockRendering.NextConnection');\nconst {Row} = goog.require('Blockly.blockRendering.Row');\nconst {Types} = goog.require('Blockly.blockRendering.Types');\n\n\n/**\n * An object containing information about what elements are in the bottom row of\n * a block as well as spacing information for the bottom row.\n * Elements in a bottom row can consist of corners, spacers and next\n * connections.\n * @extends {Row}\n * @struct\n * @alias Blockly.blockRendering.BottomRow\n */\nclass BottomRow extends Row {\n  /**\n   * @param {!ConstantProvider} constants The rendering\n   *   constants provider.\n   * @package\n   */\n  constructor(constants) {\n    super(constants);\n    this.type |= Types.BOTTOM_ROW;\n\n    /**\n     * Whether this row has a next connection.\n     * @package\n     * @type {boolean}\n     */\n    this.hasNextConnection = false;\n\n    /**\n     * The next connection on the row, if any.\n     * @package\n     * @type {NextConnection}\n     */\n    this.connection = null;\n\n    /**\n     * The amount that the bottom of the block extends below the horizontal\n     * edge, e.g. because of a next connection.  Must be non-negative (see\n     * #2820).\n     * @package\n     * @type {number}\n     */\n    this.descenderHeight = 0;\n\n    /**\n     * The Y position of the bottom edge of the block, relative to the origin\n     * of the block rendering.\n     * @type {number}\n     */\n    this.baseline = 0;\n  }\n\n  /**\n   * Returns whether or not the bottom row has a left square corner.\n   * @param {!BlockSvg} block The block whose bottom row this represents.\n   * @return {boolean} Whether or not the bottom row has a left square corner.\n   */\n  hasLeftSquareCorner(block) {\n    return !!block.outputConnection || !!block.getNextBlock();\n  }\n\n  /**\n   * Returns whether or not the bottom row has a right square corner.\n   * @param {!BlockSvg} _block The block whose bottom row this represents.\n   * @return {boolean} Whether or not the bottom row has a right square corner.\n   */\n  hasRightSquareCorner(_block) {\n    return true;\n  }\n\n  /**\n   * @override\n   */\n  measure() {\n    let height = 0;\n    let width = 0;\n    let descenderHeight = 0;\n    for (let i = 0; i < this.elements.length; i++) {\n      const elem = this.elements[i];\n      width += elem.width;\n      if (!(Types.isSpacer(elem))) {\n        // Note: this assumes that next connections have *only* descenderHeight,\n        // with no height above the baseline.\n        if (Types.isNextConnection(elem)) {\n          descenderHeight = Math.max(descenderHeight, elem.height);\n        } else {\n          height = Math.max(height, elem.height);\n        }\n      }\n    }\n    this.width = Math.max(this.minWidth, width);\n    this.height = Math.max(this.minHeight, height) + descenderHeight;\n    this.descenderHeight = descenderHeight;\n    this.widthWithConnectedBlocks = this.width;\n  }\n\n  /**\n   * @override\n   */\n  startsWithElemSpacer() {\n    return false;\n  }\n\n  /**\n   * @override\n   */\n  endsWithElemSpacer() {\n    return false;\n  }\n}\n\nexports.BottomRow = BottomRow;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Methods for graphically rendering a block as SVG.\n */\n\n'use strict';\n\n/**\n * Methods for graphically rendering a block as SVG.\n * @class\n */\ngoog.module('Blockly.blockRendering.Measurable');\n\n/* eslint-disable-next-line no-unused-vars */\nconst {ConstantProvider} = goog.requireType('Blockly.blockRendering.ConstantProvider');\nconst {Types} = goog.require('Blockly.blockRendering.Types');\n\n\n/**\n * The base class to represent a part of a block that takes up space during\n * rendering.  The constructor for each non-spacer Measurable records the size\n * of the block element (e.g. field, statement input).\n * @alias Blockly.blockRendering.Measurable\n */\nclass Measurable {\n  /**\n   * @param {!ConstantProvider} constants The rendering\n   *   constants provider.\n   * @package\n   */\n  constructor(constants) {\n    /** @type {number} */\n    this.width = 0;\n\n    /** @type {number} */\n    this.height = 0;\n\n    /** @type {number} */\n    this.type = Types.NONE;\n\n    /** @type {number} */\n    this.xPos = 0;\n\n    /** @type {number} */\n    this.centerline = 0;\n\n    /**\n     * The renderer's constant provider.\n     * @type {!ConstantProvider}\n     * @protected\n     */\n    this.constants_ = constants;\n\n    /** @type {number} */\n    this.notchOffset = this.constants_.NOTCH_OFFSET_LEFT;\n  }\n}\n\nexports.Measurable = Measurable;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Base class representing the space a connection takes up during\n * rendering.\n */\n\n/**\n * Base class representing the space a connection takes up during\n * rendering.\n * @class\n */\ngoog.module('Blockly.blockRendering.Connection');\n\n/* eslint-disable-next-line no-unused-vars */\nconst {ConstantProvider} = goog.requireType('Blockly.blockRendering.ConstantProvider');\nconst {Measurable} = goog.require('Blockly.blockRendering.Measurable');\n/* eslint-disable-next-line no-unused-vars */\nconst {RenderedConnection} = goog.requireType('Blockly.RenderedConnection');\nconst {Types} = goog.require('Blockly.blockRendering.Types');\n\n\n/**\n * The base class to represent a connection and the space that it takes up on\n * the block.\n * @extends {Measurable}\n * @alias Blockly.blockRendering.Connection\n */\nclass Connection extends Measurable {\n  /**\n   * @param {!ConstantProvider} constants The rendering\n   *   constants provider.\n   * @param {!RenderedConnection} connectionModel The connection object on\n   *     the block that this represents.\n   * @package\n   */\n  constructor(constants, connectionModel) {\n    super(constants);\n\n    /** @type {!RenderedConnection} */\n    this.connectionModel = connectionModel;\n\n    /** @type {!Object} */\n    this.shape = this.constants_.shapeFor(connectionModel);\n\n    /** @type {boolean} */\n    this.isDynamicShape = !!this.shape['isDynamic'];\n    this.type |= Types.CONNECTION;\n  }\n}\n\nexports.Connection = Connection;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Utility methods for colour manipulation.\n */\n'use strict';\n\n/**\n * Utility methods for colour manipulation.\n * @namespace Blockly.utils.colour\n */\ngoog.module('Blockly.utils.colour');\n\n/**\n * The richness of block colours, regardless of the hue.\n * Must be in the range of 0 (inclusive) to 1 (exclusive).\n * @alias Blockly.utils.colour.hsvSaturation\n * @package\n */\nlet hsvSaturation = 0.45;\n\n/**\n * Get the richness of block colours, regardless of the hue.\n * @alias Blockly.utils.colour.getHsvSaturation\n * @return {number} The current richness.\n * @package\n */\nconst getHsvSaturation = function() {\n  return hsvSaturation;\n};\nexports.getHsvSaturation = getHsvSaturation;\n\n/**\n * Set the richness of block colours, regardless of the hue.\n * @param {number} newSaturation The new richness, in the range of  0\n *     (inclusive) to 1 (exclusive)\n * @alias Blockly.utils.colour.setHsvSaturation\n * @package\n */\nconst setHsvSaturation = function(newSaturation) {\n  hsvSaturation = newSaturation;\n};\nexports.setHsvSaturation = setHsvSaturation;\n\n/**\n * The intensity of block colours, regardless of the hue.\n * Must be in the range of 0 (inclusive) to 1 (exclusive).\n * @alias Blockly.utils.colour.hsvValue\n * @package\n */\nlet hsvValue = 0.65;\n\n/**\n * Get the intensity of block colours, regardless of the hue.\n * @alias Blockly.utils.colour.getHsvValue\n * @return {number} The current intensity.\n * @package\n */\nconst getHsvValue = function() {\n  return hsvValue;\n};\nexports.getHsvValue = getHsvValue;\n\n/**\n * Set the intensity of block colours, regardless of the hue.\n * @param {number} newValue The new intensity, in the range of  0\n *     (inclusive) to 1 (exclusive)\n * @alias Blockly.utils.colour.setHsvValue\n * @package\n */\nconst setHsvValue = function(newValue) {\n  hsvValue = newValue;\n};\nexports.setHsvValue = setHsvValue;\n\n/**\n * Parses a colour from a string.\n * .parse('red') -> '#ff0000'\n * .parse('#f00') -> '#ff0000'\n * .parse('#ff0000') -> '#ff0000'\n * .parse('0xff0000') -> '#ff0000'\n * .parse('rgb(255, 0, 0)') -> '#ff0000'\n * @param {string|number} str Colour in some CSS format.\n * @return {?string} A string containing a hex representation of the colour,\n *   or null if can't be parsed.\n * @alias Blockly.utils.colour.parse\n */\nconst parse = function(str) {\n  str = String(str).toLowerCase().trim();\n  let hex = names[str];\n  if (hex) {\n    // e.g. 'red'\n    return hex;\n  }\n  hex = str.substring(0, 2) === '0x' ? '#' + str.substring(2) : str;\n  hex = hex[0] === '#' ? hex : '#' + hex;\n  if (/^#[0-9a-f]{6}$/.test(hex)) {\n    // e.g. '#00ff88'\n    return hex;\n  }\n  if (/^#[0-9a-f]{3}$/.test(hex)) {\n    // e.g. '#0f8'\n    return ['#', hex[1], hex[1], hex[2], hex[2], hex[3], hex[3]].join('');\n  }\n  const rgb = str.match(/^(?:rgb)?\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)$/);\n  if (rgb) {\n    // e.g. 'rgb(0, 128, 255)'\n    const r = Number(rgb[1]);\n    const g = Number(rgb[2]);\n    const b = Number(rgb[3]);\n    if (r >= 0 && r < 256 && g >= 0 && g < 256 && b >= 0 && b < 256) {\n      return rgbToHex(r, g, b);\n    }\n  }\n  return null;\n};\nexports.parse = parse;\n\n/**\n * Converts a colour from RGB to hex representation.\n * @param {number} r Amount of red, int between 0 and 255.\n * @param {number} g Amount of green, int between 0 and 255.\n * @param {number} b Amount of blue, int between 0 and 255.\n * @return {string} Hex representation of the colour.\n * @alias Blockly.utils.colour.rgbToHex\n */\nconst rgbToHex = function(r, g, b) {\n  const rgb = (r << 16) | (g << 8) | b;\n  if (r < 0x10) {\n    return '#' + (0x1000000 | rgb).toString(16).substr(1);\n  }\n  return '#' + rgb.toString(16);\n};\nexports.rgbToHex = rgbToHex;\n\n/**\n * Converts a colour to RGB.\n * @param {string} colour String representing colour in any\n *     colour format ('#ff0000', 'red', '0xff000', etc).\n * @return {!Array<number>} RGB representation of the colour.\n * @alias Blockly.utils.colour.hexToRgb\n */\nconst hexToRgb = function(colour) {\n  const hex = parse(colour);\n  if (!hex) {\n    return [0, 0, 0];\n  }\n\n  const rgb = parseInt(hex.substr(1), 16);\n  const r = rgb >> 16;\n  const g = (rgb >> 8) & 255;\n  const b = rgb & 255;\n\n  return [r, g, b];\n};\nexports.hexToRgb = hexToRgb;\n\n/**\n * Converts an HSV triplet to hex representation.\n * @param {number} h Hue value in [0, 360].\n * @param {number} s Saturation value in [0, 1].\n * @param {number} v Brightness in [0, 255].\n * @return {string} Hex representation of the colour.\n * @alias Blockly.utils.colour.hsvToHex\n */\nconst hsvToHex = function(h, s, v) {\n  let red = 0;\n  let green = 0;\n  let blue = 0;\n  if (s === 0) {\n    red = v;\n    green = v;\n    blue = v;\n  } else {\n    const sextant = Math.floor(h / 60);\n    const remainder = (h / 60) - sextant;\n    const val1 = v * (1 - s);\n    const val2 = v * (1 - (s * remainder));\n    const val3 = v * (1 - (s * (1 - remainder)));\n    switch (sextant) {\n      case 1:\n        red = val2;\n        green = v;\n        blue = val1;\n        break;\n      case 2:\n        red = val1;\n        green = v;\n        blue = val3;\n        break;\n      case 3:\n        red = val1;\n        green = val2;\n        blue = v;\n        break;\n      case 4:\n        red = val3;\n        green = val1;\n        blue = v;\n        break;\n      case 5:\n        red = v;\n        green = val1;\n        blue = val2;\n        break;\n      case 6:\n      case 0:\n        red = v;\n        green = val3;\n        blue = val1;\n        break;\n    }\n  }\n  return rgbToHex(Math.floor(red), Math.floor(green), Math.floor(blue));\n};\nexports.hsvToHex = hsvToHex;\n\n/**\n * Blend two colours together, using the specified factor to indicate the\n * weight given to the first colour.\n * @param {string} colour1 First colour.\n * @param {string} colour2 Second colour.\n * @param {number} factor The weight to be given to colour1 over colour2.\n *     Values should be in the range [0, 1].\n * @return {?string} Combined colour represented in hex.\n * @alias Blockly.utils.colour.blend\n */\nconst blend = function(colour1, colour2, factor) {\n  const hex1 = parse(colour1);\n  if (!hex1) {\n    return null;\n  }\n  const hex2 = parse(colour2);\n  if (!hex2) {\n    return null;\n  }\n  const rgb1 = hexToRgb(hex1);\n  const rgb2 = hexToRgb(hex2);\n  const r = Math.round(rgb2[0] + factor * (rgb1[0] - rgb2[0]));\n  const g = Math.round(rgb2[1] + factor * (rgb1[1] - rgb2[1]));\n  const b = Math.round(rgb2[2] + factor * (rgb1[2] - rgb2[2]));\n  return rgbToHex(r, g, b);\n};\nexports.blend = blend;\n\n/**\n * A map that contains the 16 basic colour keywords as defined by W3C:\n * https://www.w3.org/TR/2018/REC-css-color-3-20180619/#html4\n * The keys of this map are the lowercase \"readable\" names of the colours,\n * while the values are the \"hex\" values.\n *\n * @type {!Object<string, string>}\n * @alias Blockly.utils.colour.names\n */\nconst names = {\n  'aqua': '#00ffff',\n  'black': '#000000',\n  'blue': '#0000ff',\n  'fuchsia': '#ff00ff',\n  'gray': '#808080',\n  'green': '#008000',\n  'lime': '#00ff00',\n  'maroon': '#800000',\n  'navy': '#000080',\n  'olive': '#808000',\n  'purple': '#800080',\n  'red': '#ff0000',\n  'silver': '#c0c0c0',\n  'teal': '#008080',\n  'white': '#ffffff',\n  'yellow': '#ffff00',\n};\nexports.names = names;\n\n/**\n * Convert a hue (HSV model) into an RGB hex triplet.\n * @param {number} hue Hue on a colour wheel (0-360).\n * @return {string} RGB code, e.g. '#5ba65b'.\n * @alias Blockly.utils.colour.hueToHex\n */\nconst hueToHex = function(hue) {\n  return hsvToHex(hue, hsvSaturation, hsvValue * 255);\n};\nexports.hueToHex = hueToHex;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Methods for creating parts of SVG path strings.  See\n * developer.mozilla.org/en-US/docs/Web/SVG/Tutorial/Paths\n */\n'use strict';\n\n/**\n * Methods for creating parts of SVG path strings.  See\n * @namespace Blockly.utils.svgPaths\n */\ngoog.module('Blockly.utils.svgPaths');\n\n\n/**\n * Create a string representing the given x, y pair.  It does not matter whether\n * the coordinate is relative or absolute.  The result has leading\n * and trailing spaces, and separates the x and y coordinates with a comma but\n * no space.\n * @param {number} x The x coordinate.\n * @param {number} y The y coordinate.\n * @return {string} A string of the format ' x,y '\n * @alias Blockly.utils.svgPaths.point\n */\nconst point = function(x, y) {\n  return ' ' + x + ',' + y + ' ';\n};\nexports.point = point;\n\n/**\n * Draw a cubic or quadratic curve.  See\n * developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d#Cubic_B%C3%A9zier_Curve\n * These coordinates are unitless and hence in the user coordinate system.\n * @param {string} command The command to use.\n *     Should be one of: c, C, s, S, q, Q.\n * @param {!Array<string>} points  An array containing all of the points to pass\n *     to the curve command, in order.  The points are represented as strings of\n *     the format ' x, y '.\n * @return {string} A string defining one or more Bezier curves.  See the MDN\n *     documentation for exact format.\n * @alias Blockly.utils.svgPaths.curve\n */\nconst curve = function(command, points) {\n  return ' ' + command + points.join('');\n};\nexports.curve = curve;\n\n/**\n * Move the cursor to the given position without drawing a line.\n * The coordinates are absolute.\n * These coordinates are unitless and hence in the user coordinate system.\n * See developer.mozilla.org/en-US/docs/Web/SVG/Tutorial/Paths#Line_commands\n * @param {number} x The absolute x coordinate.\n * @param {number} y The absolute y coordinate.\n * @return {string} A string of the format ' M x,y '\n * @alias Blockly.utils.svgPaths.moveTo\n */\nconst moveTo = function(x, y) {\n  return ' M ' + x + ',' + y + ' ';\n};\nexports.moveTo = moveTo;\n\n/**\n * Move the cursor to the given position without drawing a line.\n * Coordinates are relative.\n * These coordinates are unitless and hence in the user coordinate system.\n * See developer.mozilla.org/en-US/docs/Web/SVG/Tutorial/Paths#Line_commands\n * @param {number} dx The relative x coordinate.\n * @param {number} dy The relative y coordinate.\n * @return {string} A string of the format ' m dx,dy '\n * @alias Blockly.utils.svgPaths.moveBy\n */\nconst moveBy = function(dx, dy) {\n  return ' m ' + dx + ',' + dy + ' ';\n};\nexports.moveBy = moveBy;\n\n/**\n * Draw a line from the current point to the end point, which is the current\n * point shifted by dx along the x-axis and dy along the y-axis.\n * These coordinates are unitless and hence in the user coordinate system.\n * See developer.mozilla.org/en-US/docs/Web/SVG/Tutorial/Paths#Line_commands\n * @param {number} dx The relative x coordinate.\n * @param {number} dy The relative y coordinate.\n * @return {string} A string of the format ' l dx,dy '\n * @alias Blockly.utils.svgPaths.lineTo\n */\nconst lineTo = function(dx, dy) {\n  return ' l ' + dx + ',' + dy + ' ';\n};\nexports.lineTo = lineTo;\n\n/**\n * Draw multiple lines connecting all of the given points in order.  This is\n * equivalent to a series of 'l' commands.\n * These coordinates are unitless and hence in the user coordinate system.\n * See developer.mozilla.org/en-US/docs/Web/SVG/Tutorial/Paths#Line_commands\n * @param {!Array<string>} points An array containing all of the points to\n *     draw lines to, in order.  The points are represented as strings of the\n *     format ' dx,dy '.\n * @return {string} A string of the format ' l (dx,dy)+ '\n * @alias Blockly.utils.svgPaths.line\n */\nconst line = function(points) {\n  return ' l' + points.join('');\n};\nexports.line = line;\n\n/**\n * Draw a horizontal or vertical line.\n * The first argument specifies the direction and whether the given position is\n * relative or absolute.\n * These coordinates are unitless and hence in the user coordinate system.\n * See developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d#LineTo_path_commands\n * @param {string} command The command to prepend to the coordinate.  This\n *     should be one of: V, v, H, h.\n * @param {number} val The coordinate to pass to the command.  It may be\n *     absolute or relative.\n * @return {string} A string of the format ' command val '\n * @alias Blockly.utils.svgPaths.lineOnAxis\n */\nconst lineOnAxis = function(command, val) {\n  return ' ' + command + ' ' + val + ' ';\n};\nexports.lineOnAxis = lineOnAxis;\n\n/**\n * Draw an elliptical arc curve.\n * These coordinates are unitless and hence in the user coordinate system.\n * See developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d#Elliptical_Arc_Curve\n * @param {string} command The command string.  Either 'a' or 'A'.\n * @param {string} flags The flag string.  See the MDN documentation for a\n *     description and examples.\n * @param {number} radius The radius of the arc to draw.\n * @param {string} point The point to move the cursor to after drawing the arc,\n *     specified either in absolute or relative coordinates depending on the\n *     command.\n * @return {string} A string of the format 'command radius radius flags point'\n * @alias Blockly.utils.svgPaths.arc\n */\nconst arc = function(command, flags, radius, point) {\n  return command + ' ' + radius + ' ' + radius + ' ' + flags + point;\n};\nexports.arc = arc;\n","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Utility methods related to block and message parsing.\n */\n'use strict';\n\n/**\n * @namespace Blockly.utils.parsing\n */\ngoog.module('Blockly.utils.parsing');\n\nconst colourUtils = goog.require('Blockly.utils.colour');\nconst stringUtils = goog.require('Blockly.utils.string');\nconst {Msg} = goog.require('Blockly.Msg');\n\n\n/**\n * Internal implementation of the message reference and interpolation token\n * parsing used by tokenizeInterpolation() and replaceMessageReferences().\n * @param {string} message Text which might contain string table references and\n *     interpolation tokens.\n * @param {boolean} parseInterpolationTokens Option to parse numeric\n *     interpolation tokens (%1, %2, ...) when true.\n * @return {!Array<string|number>} Array of strings and numbers.\n */\nconst tokenizeInterpolationInternal = function(\n    message, parseInterpolationTokens) {\n  const tokens = [];\n  const chars = message.split('');\n  chars.push('');  // End marker.\n  // Parse the message with a finite state machine.\n  // 0 - Base case.\n  // 1 - % found.\n  // 2 - Digit found.\n  // 3 - Message ref found.\n  let state = 0;\n  const buffer = [];\n  let number = null;\n  for (let i = 0; i < chars.length; i++) {\n    const c = chars[i];\n    if (state === 0) {\n      if (c === '%') {\n        const text = buffer.join('');\n        if (text) {\n          tokens.push(text);\n        }\n        buffer.length = 0;\n        state = 1;  // Start escape.\n      } else {\n        buffer.push(c);  // Regular char.\n      }\n    } else if (state === 1) {\n      if (c === '%') {\n        buffer.push(c);  // Escaped %: %%\n        state = 0;\n      } else if (parseInterpolationTokens && '0' <= c && c <= '9') {\n        state = 2;\n        number = c;\n        const text = buffer.join('');\n        if (text) {\n          tokens.push(text);\n        }\n        buffer.length = 0;\n      } else if (c === '{') {\n        state = 3;\n      } else {\n        buffer.push('%', c);  // Not recognized. Return as literal.\n        state = 0;\n      }\n    } else if (state === 2) {\n      if ('0' <= c && c <= '9') {\n        number += c;  // Multi-digit number.\n      } else {\n        tokens.push(parseInt(number, 10));\n        i--;  // Parse this char again.\n        state = 0;\n      }\n    } else if (state === 3) {  // String table reference\n      if (c === '') {\n        // Premature end before closing '}'\n        buffer.splice(0, 0, '%{');  // Re-insert leading delimiter\n        i--;                        // Parse this char again.\n        state = 0;                  // and parse as string literal.\n      } else if (c !== '}') {\n        buffer.push(c);\n      } else {\n        const rawKey = buffer.join('');\n        if (/[A-Z]\\w*/i.test(rawKey)) {  // Strict matching\n          // Found a valid string key. Attempt case insensitive match.\n          const keyUpper = rawKey.toUpperCase();\n\n          // BKY_ is the prefix used to namespace the strings used in Blockly\n          // core files and the predefined blocks in ../blocks/.\n          // These strings are defined in ../msgs/ files.\n          const bklyKey = stringUtils.startsWith(keyUpper, 'BKY_') ?\n              keyUpper.substring(4) :\n              null;\n          if (bklyKey && bklyKey in Msg) {\n            const rawValue = Msg[bklyKey];\n            if (typeof rawValue === 'string') {\n              // Attempt to dereference substrings, too, appending to the end.\n              Array.prototype.push.apply(\n                  tokens,\n                  tokenizeInterpolationInternal(\n                      rawValue, parseInterpolationTokens));\n            } else if (parseInterpolationTokens) {\n              // When parsing interpolation tokens, numbers are special\n              // placeholders (%1, %2, etc). Make sure all other values are\n              // strings.\n              tokens.push(String(rawValue));\n            } else {\n              tokens.push(rawValue);\n            }\n          } else {\n            // No entry found in the string table. Pass reference as string.\n            tokens.push('%{' + rawKey + '}');\n          }\n          buffer.length = 0;  // Clear the array\n          state = 0;\n        } else {\n          tokens.push('%{' + rawKey + '}');\n          buffer.length = 0;\n          state = 0;  // and parse as string literal.\n        }\n      }\n    }\n  }\n  let text = buffer.join('');\n  if (text) {\n    tokens.push(text);\n  }\n\n  // Merge adjacent text tokens into a single string.\n  const mergedTokens = [];\n  buffer.length = 0;\n  for (let i = 0; i < tokens.length; i++) {\n    if (typeof tokens[i] === 'string') {\n      buffer.push(tokens[i]);\n    } else {\n      text = buffer.join('');\n      if (text) {\n        mergedTokens.push(text);\n      }\n      buffer.length = 0;\n      mergedTokens.push(tokens[i]);\n    }\n  }\n  text = buffer.join('');\n  if (text) {\n    mergedTokens.push(text);\n  }\n  buffer.length = 0;\n\n  return mergedTokens;\n};\n\n/**\n * Parse a string with any number of interpolation tokens (%1, %2, ...).\n * It will also replace string table references (e.g., %{bky_my_msg} and\n * %{BKY_MY_MSG} will both be replaced with the value in\n * Msg['MY_MSG']). Percentage sign characters '%' may be self-escaped\n * (e.g., '%%').\n * @param {string} message Text which might contain string table references and\n *     interpolation tokens.\n * @return {!Array<string|number>} Array of strings and numbers.\n * @alias Blockly.utils.parsing.tokenizeInterpolation\n */\nconst tokenizeInterpolation = function(message) {\n  return tokenizeInterpolationInternal(message, true);\n};\nexports.tokenizeInterpolation = tokenizeInterpolation;\n\n/**\n * Replaces string table references in a message, if the message is a string.\n * For example, \"%{bky_my_msg}\" and \"%{BKY_MY_MSG}\" will both be replaced with\n * the value in Msg['MY_MSG'].\n * @param {string|?} message Message, which may be a string that contains\n *     string table references.\n * @return {string} String with message references replaced.\n * @alias Blockly.utils.parsing.replaceMessageReferences\n */\nconst replaceMessageReferences = function(message) {\n  if (typeof message !== 'string') {\n    return message;\n  }\n  const interpolatedResult = tokenizeInterpolationInternal(message, false);\n  // When parseInterpolationTokens === false, interpolatedResult should be at\n  // most length 1.\n  return interpolatedResult.length ? String(interpolatedResult[0]) : '';\n};\nexports.replaceMessageReferences = replaceMessageReferences;\n\n/**\n * Validates that any %{MSG_KEY} references in the message refer to keys of\n * the Msg string table.\n * @param {string} message Text which might contain string table references.\n * @return {boolean} True if all message references have matching values.\n *     Otherwise, false.\n * @alias Blockly.utils.parsing.checkMessageReferences\n */\nconst checkMessageReferences = function(message) {\n  let validSoFar = true;\n\n  const msgTable = Msg;\n\n  // TODO (#1169): Implement support for other string tables,\n  // prefixes other than BKY_.\n  const m = message.match(/%{BKY_[A-Z]\\w*}/ig);\n  for (let i = 0; i < m.length; i++) {\n    const msgKey = m[i].toUpperCase();\n    if (msgTable[msgKey.slice(6, -1)] === undefined) {\n      console.warn('No message string for ' + m[i] + ' in ' + message);\n      validSoFar = false;  // Continue to report other errors.\n    }\n  }\n\n  return validSoFar;\n};\nexports.checkMessageReferences = checkMessageReferences;\n\n/**\n * Parse a block colour from a number or string, as provided in a block\n * definition.\n * @param {number|string} colour HSV hue value (0 to 360), #RRGGBB string,\n *     or a message reference string pointing to one of those two values.\n * @return {{hue: ?number, hex: string}} An object containing the colour as\n *     a #RRGGBB string, and the hue if the input was an HSV hue value.\n * @throws {Error} If the colour cannot be parsed.\n * @alias Blockly.utils.parsing.parseBlockColour\n */\nconst parseBlockColour = function(colour) {\n  const dereferenced =\n      (typeof colour === 'string') ? replaceMessageReferences(colour) : colour;\n\n  const hue = Number(dereferenced);\n  if (!isNaN(hue) && 0 <= hue && hue <= 360) {\n    return {\n      hue: hue,\n      hex: colourUtils.hsvToHex(\n          hue, colourUtils.getHsvSaturation(), colourUtils.getHsvValue() * 255),\n    };\n  } else {\n    const hex = colourUtils.parse(dereferenced);\n    if (hex) {\n      // Only store hue if colour is set as a hue.\n      return {hue: null, hex: hex};\n    } else {\n      let errorMsg = 'Invalid colour: \"' + dereferenced + '\"';\n      if (colour !== dereferenced) {\n        errorMsg += ' (from \"' + colour + '\")';\n      }\n      throw Error(errorMsg);\n    }\n  }\n};\nexports.parseBlockColour = parseBlockColour;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview An object that provides constants for rendering blocks.\n */\n'use strict';\n\n/**\n * An object that provides constants for rendering blocks.\n * @class\n */\ngoog.module('Blockly.blockRendering.ConstantProvider');\n\nconst colour = goog.require('Blockly.utils.colour');\nconst dom = goog.require('Blockly.utils.dom');\nconst object = goog.require('Blockly.utils.object');\nconst svgPaths = goog.require('Blockly.utils.svgPaths');\nconst userAgent = goog.require('Blockly.utils.userAgent');\nconst parsing = goog.require('Blockly.utils.parsing');\nconst {ConnectionType} = goog.require('Blockly.ConnectionType');\n/* eslint-disable-next-line no-unused-vars */\nconst {RenderedConnection} = goog.requireType('Blockly.RenderedConnection');\nconst {Svg} = goog.require('Blockly.utils.Svg');\n/* eslint-disable-next-line no-unused-vars */\nconst {Theme} = goog.requireType('Blockly.Theme');\n\n\n/**\n * An object that provides constants for rendering blocks.\n * @alias Blockly.blockRendering.ConstantProvider\n */\nclass ConstantProvider {\n  /**\n   * @package\n   */\n  constructor() {\n    /**\n     * The size of an empty spacer.\n     * @type {number}\n     */\n    this.NO_PADDING = 0;\n\n    /**\n     * The size of small padding.\n     * @type {number}\n     */\n    this.SMALL_PADDING = 3;\n\n    /**\n     * The size of medium padding.\n     * @type {number}\n     */\n    this.MEDIUM_PADDING = 5;\n\n    /**\n     * The size of medium-large padding.\n     * @type {number}\n     */\n    this.MEDIUM_LARGE_PADDING = 8;\n\n    /**\n     * The size of large padding.\n     * @type {number}\n     */\n    this.LARGE_PADDING = 10;\n\n    /**\n     * Offset from the top of the row for placing fields on inline input rows\n     * and statement input rows.\n     * Matches existing rendering (in 2019).\n     * @type {number}\n     */\n    this.TALL_INPUT_FIELD_OFFSET_Y = this.MEDIUM_PADDING;\n\n    /**\n     * The height of the puzzle tab used for input and output connections.\n     * @type {number}\n     */\n    this.TAB_HEIGHT = 15;\n\n    /**\n     * The offset from the top of the block at which a puzzle tab is positioned.\n     * @type {number}\n     */\n    this.TAB_OFFSET_FROM_TOP = 5;\n\n    /**\n     * Vertical overlap of the puzzle tab, used to make it look more like a\n     * puzzle piece.\n     * @type {number}\n     */\n    this.TAB_VERTICAL_OVERLAP = 2.5;\n\n    /**\n     * The width of the puzzle tab used for input and output connections.\n     * @type {number}\n     */\n    this.TAB_WIDTH = 8;\n\n    /**\n     * The width of the notch used for previous and next connections.\n     * @type {number}\n     */\n    this.NOTCH_WIDTH = 15;\n\n    /**\n     * The height of the notch used for previous and next connections.\n     * @type {number}\n     */\n    this.NOTCH_HEIGHT = 4;\n\n    /**\n     * The minimum width of the block.\n     * @type {number}\n     */\n    this.MIN_BLOCK_WIDTH = 12;\n\n    this.EMPTY_BLOCK_SPACER_HEIGHT = 16;\n\n    /**\n     * The minimum height of a dummy input row.\n     * @type {number}\n     */\n    this.DUMMY_INPUT_MIN_HEIGHT = this.TAB_HEIGHT;\n\n    /**\n     * The minimum height of a dummy input row in a shadow block.\n     * @type {number}\n     */\n    this.DUMMY_INPUT_SHADOW_MIN_HEIGHT = this.TAB_HEIGHT;\n\n    /**\n     * Rounded corner radius.\n     * @type {number}\n     */\n    this.CORNER_RADIUS = 8;\n\n    /**\n     * Offset from the left side of a block or the inside of a statement input\n     * to the left side of the notch.\n     * @type {number}\n     */\n    this.NOTCH_OFFSET_LEFT = 15;\n\n    /**\n     * Additional offset added to the statement input's width to account for the\n     * notch.\n     * @type {number}\n     */\n    this.STATEMENT_INPUT_NOTCH_OFFSET = this.NOTCH_OFFSET_LEFT;\n\n    this.STATEMENT_BOTTOM_SPACER = 0;\n    this.STATEMENT_INPUT_PADDING_LEFT = 20;\n\n    /**\n     * Vertical padding between consecutive statement inputs.\n     * @type {number}\n     */\n    this.BETWEEN_STATEMENT_PADDING_Y = 4;\n\n    /**\n     * The top row's minimum height.\n     * @type {number}\n     */\n    this.TOP_ROW_MIN_HEIGHT = this.MEDIUM_PADDING;\n\n    /**\n     * The top row's minimum height if it precedes a statement.\n     * @type {number}\n     */\n    this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT = this.LARGE_PADDING;\n\n    /**\n     * The bottom row's minimum height.\n     * @type {number}\n     */\n    this.BOTTOM_ROW_MIN_HEIGHT = this.MEDIUM_PADDING;\n\n    /**\n     * The bottom row's minimum height if it follows a statement input.\n     * @type {number}\n     */\n    this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT = this.LARGE_PADDING;\n\n    /**\n     * Whether to add a 'hat' on top of all blocks with no previous or output\n     * connections. Can be overridden by 'hat' property on Theme.BlockStyle.\n     * @type {boolean}\n     */\n    this.ADD_START_HATS = false;\n\n    /**\n     * Height of the top hat.\n     * @type {number}\n     */\n    this.START_HAT_HEIGHT = 15;\n\n    /**\n     * Width of the top hat.\n     * @type {number}\n     */\n    this.START_HAT_WIDTH = 100;\n\n    this.SPACER_DEFAULT_HEIGHT = 15;\n\n    this.MIN_BLOCK_HEIGHT = 24;\n\n    this.EMPTY_INLINE_INPUT_PADDING = 14.5;\n\n    /**\n     * The height of an empty inline input.\n     * @type {number}\n     */\n    this.EMPTY_INLINE_INPUT_HEIGHT = this.TAB_HEIGHT + 11;\n\n    this.EXTERNAL_VALUE_INPUT_PADDING = 2;\n\n    /**\n     * The height of an empty statement input.  Note that in the old rendering\n     * this varies slightly depending on whether the block has external or\n     * inline inputs. In the new rendering this is consistent.  It seems\n     * unlikely that the old behaviour was intentional.\n     * @type {number}\n     */\n    this.EMPTY_STATEMENT_INPUT_HEIGHT = this.MIN_BLOCK_HEIGHT;\n\n    this.START_POINT = svgPaths.moveBy(0, 0);\n\n    /**\n     * Height of SVG path for jagged teeth at the end of collapsed blocks.\n     * @type {number}\n     */\n    this.JAGGED_TEETH_HEIGHT = 12;\n\n    /**\n     * Width of SVG path for jagged teeth at the end of collapsed blocks.\n     * @type {number}\n     */\n    this.JAGGED_TEETH_WIDTH = 6;\n\n    /**\n     * Point size of text.\n     * @type {number}\n     */\n    this.FIELD_TEXT_FONTSIZE = 11;\n\n    /**\n     * Text font weight.\n     * @type {string}\n     */\n    this.FIELD_TEXT_FONTWEIGHT = 'normal';\n\n    /**\n     * Text font family.\n     * @type {string}\n     */\n    this.FIELD_TEXT_FONTFAMILY = 'sans-serif';\n\n    /**\n     * Height of text.  This constant is dynamically set in\n     * ``setFontConstants_`` to be the height of the text based on the font\n     * used.\n     * @type {number}\n     */\n    this.FIELD_TEXT_HEIGHT = -1;  // Dynamically set.\n\n    /**\n     * Text baseline.  This constant is dynamically set in ``setFontConstants_``\n     * to be the baseline of the text based on the font used.\n     * @type {number}\n     */\n    this.FIELD_TEXT_BASELINE = -1;  // Dynamically set.\n\n    /**\n     * A field's border rect corner radius.\n     * @type {number}\n     */\n    this.FIELD_BORDER_RECT_RADIUS = 4;\n\n    /**\n     * A field's border rect default height.\n     * @type {number}\n     */\n    this.FIELD_BORDER_RECT_HEIGHT = 16;\n\n    /**\n     * A field's border rect X padding.\n     * @type {number}\n     */\n    this.FIELD_BORDER_RECT_X_PADDING = 5;\n\n    /**\n     * A field's border rect Y padding.\n     * @type {number}\n     */\n    this.FIELD_BORDER_RECT_Y_PADDING = 3;\n\n    /**\n     * The backing colour of a field's border rect.\n     * @type {string}\n     * @package\n     */\n    this.FIELD_BORDER_RECT_COLOUR = '#fff';\n\n    /**\n     * A field's text element's dominant baseline.\n     * @type {boolean}\n     */\n    this.FIELD_TEXT_BASELINE_CENTER = !userAgent.IE && !userAgent.EDGE;\n\n    /**\n     * A dropdown field's border rect height.\n     * @type {number}\n     */\n    this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT = this.FIELD_BORDER_RECT_HEIGHT;\n\n    /**\n     * Whether or not a dropdown field should add a border rect when in a shadow\n     * block.\n     * @type {boolean}\n     */\n    this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW = false;\n\n    /**\n     * Whether or not a dropdown field's div should be coloured to match the\n     * block colours.\n     * @type {boolean}\n     */\n    this.FIELD_DROPDOWN_COLOURED_DIV = false;\n\n    /**\n     * Whether or not a dropdown field uses a text or SVG arrow.\n     * @type {boolean}\n     */\n    this.FIELD_DROPDOWN_SVG_ARROW = false;\n\n    /**\n     * A dropdown field's SVG arrow padding.\n     * @type {number}\n     */\n    this.FIELD_DROPDOWN_SVG_ARROW_PADDING = this.FIELD_BORDER_RECT_X_PADDING;\n\n    /**\n     * A dropdown field's SVG arrow size.\n     * @type {number}\n     */\n    this.FIELD_DROPDOWN_SVG_ARROW_SIZE = 12;\n\n    /**\n     * A dropdown field's SVG arrow datauri.\n     * @type {string}\n     */\n    this.FIELD_DROPDOWN_SVG_ARROW_DATAURI =\n        'data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllci' +\n        'AxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaG' +\n        'VpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLW' +\n        'Fycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuND' +\n        'EsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTD' +\n        'AuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNz' +\n        'FDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMC' +\n        'wxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNz' +\n        'lhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYz' +\n        'AuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMz' +\n        'dBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=';\n\n    /**\n     * Whether or not to show a box shadow around the widget div. This is only a\n     * feature of full block fields.\n     * @type {boolean}\n     */\n    this.FIELD_TEXTINPUT_BOX_SHADOW = false;\n\n    /**\n     * Whether or not the colour field should display its colour value on the\n     * entire block.\n     * @type {boolean}\n     */\n    this.FIELD_COLOUR_FULL_BLOCK = false;\n\n    /**\n     * A colour field's default width.\n     * @type {number}\n     */\n    this.FIELD_COLOUR_DEFAULT_WIDTH = 26;\n\n    /**\n     * A colour field's default height.\n     * @type {number}\n     */\n    this.FIELD_COLOUR_DEFAULT_HEIGHT = this.FIELD_BORDER_RECT_HEIGHT;\n\n    /**\n     * A checkbox field's X offset.\n     * @type {number}\n     */\n    this.FIELD_CHECKBOX_X_OFFSET = this.FIELD_BORDER_RECT_X_PADDING - 3;\n\n    /**\n     * A random identifier used to ensure a unique ID is used for each\n     * filter/pattern for the case of multiple Blockly instances on a page.\n     * @type {string}\n     * @package\n     */\n    this.randomIdentifier = String(Math.random()).substring(2);\n\n    /**\n     * The defs tag that contains all filters and patterns for this Blockly\n     * instance.\n     * @type {?SVGElement}\n     * @private\n     */\n    this.defs_ = null;\n\n    /**\n     * The ID of the emboss filter, or the empty string if no filter is set.\n     * @type {string}\n     * @package\n     */\n    this.embossFilterId = '';\n\n    /**\n     * The <filter> element to use for highlighting, or null if not set.\n     * @type {SVGElement}\n     * @private\n     */\n    this.embossFilter_ = null;\n\n    /**\n     * The ID of the disabled pattern, or the empty string if no pattern is set.\n     * @type {string}\n     * @package\n     */\n    this.disabledPatternId = '';\n\n    /**\n     * The <pattern> element to use for disabled blocks, or null if not set.\n     * @type {SVGElement}\n     * @private\n     */\n    this.disabledPattern_ = null;\n\n    /**\n     * The ID of the debug filter, or the empty string if no pattern is set.\n     * @type {string}\n     * @package\n     */\n    this.debugFilterId = '';\n\n    /**\n     * The <filter> element to use for a debug highlight, or null if not set.\n     * @type {SVGElement}\n     * @private\n     */\n    this.debugFilter_ = null;\n\n    /**\n     * The <style> element to use for injecting renderer specific CSS.\n     * @type {HTMLStyleElement}\n     * @private\n     */\n    this.cssNode_ = null;\n\n    /**\n     * Cursor colour.\n     * @type {string}\n     * @package\n     */\n    this.CURSOR_COLOUR = '#cc0a0a';\n\n    /**\n     * Immovable marker colour.\n     * @type {string}\n     * @package\n     */\n    this.MARKER_COLOUR = '#4286f4';\n\n    /**\n     * Width of the horizontal cursor.\n     * @type {number}\n     * @package\n     */\n    this.CURSOR_WS_WIDTH = 100;\n\n    /**\n     * Height of the horizontal cursor.\n     * @type {number}\n     * @package\n     */\n    this.WS_CURSOR_HEIGHT = 5;\n\n    /**\n     * Padding around a stack.\n     * @type {number}\n     * @package\n     */\n    this.CURSOR_STACK_PADDING = 10;\n\n    /**\n     * Padding around a block.\n     * @type {number}\n     * @package\n     */\n    this.CURSOR_BLOCK_PADDING = 2;\n\n    /**\n     * Stroke of the cursor.\n     * @type {number}\n     * @package\n     */\n    this.CURSOR_STROKE_WIDTH = 4;\n\n    /**\n     * Whether text input and colour fields fill up the entire source block.\n     * @type {boolean}\n     * @package\n     */\n    this.FULL_BLOCK_FIELDS = false;\n\n    /**\n     * The main colour of insertion markers, in hex.  The block is rendered a\n     * transparent grey by changing the fill opacity in CSS.\n     * @type {string}\n     * @package\n     */\n    this.INSERTION_MARKER_COLOUR = '#000000';\n\n    /**\n     * The insertion marker opacity.\n     * @type {number}\n     * @package\n     */\n    this.INSERTION_MARKER_OPACITY = 0.2;\n\n    /**\n     * Enum for connection shapes.\n     * @enum {number}\n     */\n    this.SHAPES = {PUZZLE: 1, NOTCH: 2};\n  }\n\n  /**\n   * Initialize shape objects based on the constants set in the constructor.\n   * @package\n   */\n  init() {\n    /**\n     * An object containing sizing and path information about collapsed block\n     * indicators.\n     * @type {!Object}\n     */\n    this.JAGGED_TEETH = this.makeJaggedTeeth();\n\n    /**\n     * An object containing sizing and path information about notches.\n     * @type {!Object}\n     */\n    this.NOTCH = this.makeNotch();\n\n    /**\n     * An object containing sizing and path information about start hats\n     * @type {!Object}\n     */\n    this.START_HAT = this.makeStartHat();\n\n    /**\n     * An object containing sizing and path information about puzzle tabs.\n     * @type {!Object}\n     */\n    this.PUZZLE_TAB = this.makePuzzleTab();\n\n    /**\n     * An object containing sizing and path information about inside corners\n     * @type {!Object}\n     */\n    this.INSIDE_CORNERS = this.makeInsideCorners();\n\n    /**\n     * An object containing sizing and path information about outside corners.\n     * @type {!Object}\n     */\n    this.OUTSIDE_CORNERS = this.makeOutsideCorners();\n  }\n\n  /**\n   * Refresh constants properties that depend on the theme.\n   * @param {!Theme} theme The current workspace theme.\n   * @package\n   */\n  setTheme(theme) {\n    /**\n     * The block styles map.\n     * @type {Object<string, !Theme.BlockStyle>}\n     * @package\n     */\n    this.blockStyles = Object.create(null);\n\n    const blockStyles = theme.blockStyles;\n    for (const key in blockStyles) {\n      this.blockStyles[key] = this.validatedBlockStyle_(blockStyles[key]);\n    }\n\n    this.setDynamicProperties_(theme);\n  }\n\n  /**\n   * Sets dynamic properties that depend on other values or theme properties.\n   * @param {!Theme} theme The current workspace theme.\n   * @protected\n   */\n  setDynamicProperties_(theme) {\n    this.setFontConstants_(theme);\n    this.setComponentConstants_(theme);\n\n    this.ADD_START_HATS =\n        theme.startHats !== null ? theme.startHats : this.ADD_START_HATS;\n  }\n\n  /**\n   * Set constants related to fonts.\n   * @param {!Theme} theme The current workspace theme.\n   * @protected\n   */\n  setFontConstants_(theme) {\n    if (theme.fontStyle && theme.fontStyle['family']) {\n      this.FIELD_TEXT_FONTFAMILY = theme.fontStyle['family'];\n    }\n\n    if (theme.fontStyle && theme.fontStyle['weight']) {\n      this.FIELD_TEXT_FONTWEIGHT = theme.fontStyle['weight'];\n    }\n\n    if (theme.fontStyle && theme.fontStyle['size']) {\n      this.FIELD_TEXT_FONTSIZE = theme.fontStyle['size'];\n    }\n\n    const fontMetrics = dom.measureFontMetrics(\n        'Hg', this.FIELD_TEXT_FONTSIZE + 'pt', this.FIELD_TEXT_FONTWEIGHT,\n        this.FIELD_TEXT_FONTFAMILY);\n\n    this.FIELD_TEXT_HEIGHT = fontMetrics.height;\n    this.FIELD_TEXT_BASELINE = fontMetrics.baseline;\n  }\n\n  /**\n   * Set constants from a theme's component styles.\n   * @param {!Theme} theme The current workspace theme.\n   * @protected\n   */\n  setComponentConstants_(theme) {\n    this.CURSOR_COLOUR =\n        theme.getComponentStyle('cursorColour') || this.CURSOR_COLOUR;\n    this.MARKER_COLOUR =\n        theme.getComponentStyle('markerColour') || this.MARKER_COLOUR;\n    this.INSERTION_MARKER_COLOUR =\n        theme.getComponentStyle('insertionMarkerColour') ||\n        this.INSERTION_MARKER_COLOUR;\n    this.INSERTION_MARKER_OPACITY =\n        Number(theme.getComponentStyle('insertionMarkerOpacity')) ||\n        this.INSERTION_MARKER_OPACITY;\n  }\n\n  /**\n   * Get or create a block style based on a single colour value.  Generate a\n   * name for the style based on the colour.\n   * @param {string} colour #RRGGBB colour string.\n   * @return {{style: !Theme.BlockStyle, name: string}} An object\n   *     containing the style and an autogenerated name for that style.\n   * @package\n   */\n  getBlockStyleForColour(colour) {\n    const name = 'auto_' + colour;\n    if (!this.blockStyles[name]) {\n      this.blockStyles[name] = this.createBlockStyle_(colour);\n    }\n    return {style: this.blockStyles[name], name: name};\n  }\n\n  /**\n   * Gets the BlockStyle for the given block style name.\n   * @param {?string} blockStyleName The name of the block style.\n   * @return {!Theme.BlockStyle} The named block style, or a default style\n   *     if no style with the given name was found.\n   */\n  getBlockStyle(blockStyleName) {\n    return this.blockStyles[blockStyleName || ''] ||\n        (blockStyleName && blockStyleName.indexOf('auto_') === 0 ?\n             this.getBlockStyleForColour(blockStyleName.substring(5)).style :\n             this.createBlockStyle_('#000000'));\n  }\n\n  /**\n   * Create a block style object based on the given colour.\n   * @param {string} colour #RRGGBB colour string.\n   * @return {!Theme.BlockStyle} A populated block style based on the\n   *     given colour.\n   * @protected\n   */\n  createBlockStyle_(colour) {\n    return this.validatedBlockStyle_({'colourPrimary': colour});\n  }\n\n  /**\n   * Get a full block style object based on the input style object.  Populate\n   * any missing values.\n   * @param {{\n   *     colourPrimary:string,\n   *     colourSecondary:(string|undefined),\n   *     colourTertiary:(string|undefined),\n   *     hat:(string|undefined)\n   * }} blockStyle A full or partial block style object.\n\n   * @return {!Theme.BlockStyle} A full block style object, with all\n   *     required properties populated.\n   * @protected\n   */\n  validatedBlockStyle_(blockStyle) {\n    // Make a new object with all of the same properties.\n    const valid = /** @type {!Theme.BlockStyle} */ ({});\n    if (blockStyle) {\n      object.mixin(valid, blockStyle);\n    }\n    // Validate required properties.\n    const parsedColour =\n        parsing.parseBlockColour(valid['colourPrimary'] || '#000');\n    valid.colourPrimary = parsedColour.hex;\n    valid.colourSecondary = valid['colourSecondary'] ?\n        parsing.parseBlockColour(valid['colourSecondary']).hex :\n        this.generateSecondaryColour_(valid.colourPrimary);\n    valid.colourTertiary = valid['colourTertiary'] ?\n        parsing.parseBlockColour(valid['colourTertiary']).hex :\n        this.generateTertiaryColour_(valid.colourPrimary);\n\n    valid.hat = valid['hat'] || '';\n    return valid;\n  }\n\n  /**\n   * Generate a secondary colour from the passed in primary colour.\n   * @param {string} inputColour Primary colour.\n   * @return {string} The generated secondary colour.\n   * @protected\n   */\n  generateSecondaryColour_(inputColour) {\n    return colour.blend('#fff', inputColour, 0.6) || inputColour;\n  }\n\n  /**\n   * Generate a tertiary colour from the passed in primary colour.\n   * @param {string} inputColour Primary colour.\n   * @return {string} The generated tertiary colour.\n   * @protected\n   */\n  generateTertiaryColour_(inputColour) {\n    return colour.blend('#fff', inputColour, 0.3) || inputColour;\n  }\n\n  /**\n   * Dispose of this constants provider.\n   * Delete all DOM elements that this provider created.\n   * @package\n   */\n  dispose() {\n    if (this.embossFilter_) {\n      dom.removeNode(this.embossFilter_);\n    }\n    if (this.disabledPattern_) {\n      dom.removeNode(this.disabledPattern_);\n    }\n    if (this.debugFilter_) {\n      dom.removeNode(this.debugFilter_);\n    }\n    this.cssNode_ = null;\n  }\n\n  /**\n   * @return {!Object} An object containing sizing and path information about\n   *     collapsed block indicators.\n   * @package\n   */\n  makeJaggedTeeth() {\n    const height = this.JAGGED_TEETH_HEIGHT;\n    const width = this.JAGGED_TEETH_WIDTH;\n\n    const mainPath = svgPaths.line([\n      svgPaths.point(width, height / 4),\n      svgPaths.point(-width * 2, height / 2),\n      svgPaths.point(width, height / 4),\n    ]);\n    return {height: height, width: width, path: mainPath};\n  }\n\n  /**\n   * @return {!Object} An object containing sizing and path information about\n   *     start hats.\n   * @package\n   */\n  makeStartHat() {\n    const height = this.START_HAT_HEIGHT;\n    const width = this.START_HAT_WIDTH;\n\n    const mainPath = svgPaths.curve('c', [\n      svgPaths.point(30, -height),\n      svgPaths.point(70, -height),\n      svgPaths.point(width, 0),\n    ]);\n    return {height: height, width: width, path: mainPath};\n  }\n\n  /**\n   * @return {!Object} An object containing sizing and path information about\n   *     puzzle tabs.\n   * @package\n   */\n  makePuzzleTab() {\n    const width = this.TAB_WIDTH;\n    const height = this.TAB_HEIGHT;\n\n    /**\n     * Make the main path for the puzzle tab made out of a few curves (c and s).\n     * Those curves are defined with relative positions.  The 'up' and 'down'\n     * versions of the paths are the same, but the Y sign flips.  Forward and\n     * back are the signs to use to move the cursor in the direction that the\n     * path is being drawn.\n     * @param {boolean} up True if the path should be drawn from bottom to top,\n     *     false otherwise.\n     * @return {string} A path fragment describing a puzzle tab.\n     */\n    function makeMainPath(up) {\n      const forward = up ? -1 : 1;\n      const back = -forward;\n\n      const overlap = 2.5;\n      const halfHeight = height / 2;\n      const control1Y = halfHeight + overlap;\n      const control2Y = halfHeight + 0.5;\n      const control3Y = overlap;  // 2.5\n\n      const endPoint1 = svgPaths.point(-width, forward * halfHeight);\n      const endPoint2 = svgPaths.point(width, forward * halfHeight);\n\n      return svgPaths.curve(\n                 'c',\n                 [\n                   svgPaths.point(0, forward * control1Y),\n                   svgPaths.point(-width, back * control2Y),\n                   endPoint1,\n                 ]) +\n          svgPaths.curve(\n              's', [svgPaths.point(width, back * control3Y), endPoint2]);\n    }\n\n    // c 0,-10  -8,8  -8,-7.5  s 8,2.5  8,-7.5\n    const pathUp = makeMainPath(true);\n    // c 0,10  -8,-8  -8,7.5  s 8,-2.5  8,7.5\n    const pathDown = makeMainPath(false);\n\n    return {\n      type: this.SHAPES.PUZZLE,\n      width: width,\n      height: height,\n      pathDown: pathDown,\n      pathUp: pathUp,\n    };\n  }\n\n  /**\n   * @return {!Object} An object containing sizing and path information about\n   *     notches.\n   * @package\n   */\n  makeNotch() {\n    const width = this.NOTCH_WIDTH;\n    const height = this.NOTCH_HEIGHT;\n    const innerWidth = 3;\n    const outerWidth = (width - innerWidth) / 2;\n\n    /**\n     * Make the main path for the notch.\n     * @param {number} dir Direction multiplier to apply to horizontal offsets\n     *     along the path. Either 1 or -1.\n     * @return {string} A path fragment describing a notch.\n     */\n    function makeMainPath(dir) {\n      return svgPaths.line([\n        svgPaths.point(dir * outerWidth, height),\n        svgPaths.point(dir * innerWidth, 0),\n        svgPaths.point(dir * outerWidth, -height),\n      ]);\n    }\n    const pathLeft = makeMainPath(1);\n    const pathRight = makeMainPath(-1);\n\n    return {\n      type: this.SHAPES.NOTCH,\n      width: width,\n      height: height,\n      pathLeft: pathLeft,\n      pathRight: pathRight,\n    };\n  }\n\n  /**\n   * @return {!Object} An object containing sizing and path information about\n   *     inside corners.\n   * @package\n   */\n  makeInsideCorners() {\n    const radius = this.CORNER_RADIUS;\n\n    const innerTopLeftCorner =\n        svgPaths.arc('a', '0 0,0', radius, svgPaths.point(-radius, radius));\n\n    const innerBottomLeftCorner =\n        svgPaths.arc('a', '0 0,0', radius, svgPaths.point(radius, radius));\n\n    return {\n      width: radius,\n      height: radius,\n      pathTop: innerTopLeftCorner,\n      pathBottom: innerBottomLeftCorner,\n    };\n  }\n\n  /**\n   * @return {!Object} An object containing sizing and path information about\n   *     outside corners.\n   * @package\n   */\n  makeOutsideCorners() {\n    const radius = this.CORNER_RADIUS;\n    /**\n     * SVG path for drawing the rounded top-left corner.\n     * @const\n     */\n    const topLeft = svgPaths.moveBy(0, radius) +\n        svgPaths.arc('a', '0 0,1', radius, svgPaths.point(radius, -radius));\n\n    /**\n     * SVG path for drawing the rounded top-right corner.\n     * @const\n     */\n    const topRight =\n        svgPaths.arc('a', '0 0,1', radius, svgPaths.point(radius, radius));\n\n    /**\n     * SVG path for drawing the rounded bottom-left corner.\n     * @const\n     */\n    const bottomLeft =\n        svgPaths.arc('a', '0 0,1', radius, svgPaths.point(-radius, -radius));\n\n    /**\n     * SVG path for drawing the rounded bottom-right corner.\n     * @const\n     */\n    const bottomRight =\n        svgPaths.arc('a', '0 0,1', radius, svgPaths.point(-radius, radius));\n\n    return {\n      topLeft: topLeft,\n      topRight: topRight,\n      bottomRight: bottomRight,\n      bottomLeft: bottomLeft,\n      rightHeight: radius,\n    };\n  }\n\n  /**\n   * Get an object with connection shape and sizing information based on the\n   * type of the connection.\n   * @param {!RenderedConnection} connection The connection to find a\n   *     shape object for\n   * @return {!Object} The shape object for the connection.\n   * @package\n   */\n  shapeFor(connection) {\n    switch (connection.type) {\n      case ConnectionType.INPUT_VALUE:\n      case ConnectionType.OUTPUT_VALUE:\n        return this.PUZZLE_TAB;\n      case ConnectionType.PREVIOUS_STATEMENT:\n      case ConnectionType.NEXT_STATEMENT:\n        return this.NOTCH;\n      default:\n        throw Error('Unknown connection type');\n    }\n  }\n\n  /**\n   * Create any DOM elements that this renderer needs (filters, patterns, etc).\n   * @param {!SVGElement} svg The root of the workspace's SVG.\n   * @param {string} tagName The name to use for the CSS style tag.\n   * @param {string} selector The CSS selector to use.\n   * @suppress {strictModuleDepCheck} Debug renderer only included in\n   * playground.\n   * @package\n   */\n  createDom(svg, tagName, selector) {\n    this.injectCSS_(tagName, selector);\n\n    /*\n    <defs>\n      ... filters go here ...\n    </defs>\n    */\n    this.defs_ = dom.createSvgElement(Svg.DEFS, {}, svg);\n    /*\n      <filter id=\"blocklyEmbossFilter837493\">\n        <feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"1\" result=\"blur\" />\n        <feSpecularLighting in=\"blur\" surfaceScale=\"1\" specularConstant=\"0.5\"\n                            specularExponent=\"10\" lighting-color=\"white\"\n                            result=\"specOut\">\n          <fePointLight x=\"-5000\" y=\"-10000\" z=\"20000\" />\n        </feSpecularLighting>\n        <feComposite in=\"specOut\" in2=\"SourceAlpha\" operator=\"in\"\n                     result=\"specOut\" />\n        <feComposite in=\"SourceGraphic\" in2=\"specOut\" operator=\"arithmetic\"\n                     k1=\"0\" k2=\"1\" k3=\"1\" k4=\"0\" />\n      </filter>\n    */\n    const embossFilter = dom.createSvgElement(\n        Svg.FILTER, {'id': 'blocklyEmbossFilter' + this.randomIdentifier},\n        this.defs_);\n    dom.createSvgElement(\n        Svg.FEGAUSSIANBLUR,\n        {'in': 'SourceAlpha', 'stdDeviation': 1, 'result': 'blur'},\n        embossFilter);\n    const feSpecularLighting = dom.createSvgElement(\n        Svg.FESPECULARLIGHTING, {\n          'in': 'blur',\n          'surfaceScale': 1,\n          'specularConstant': 0.5,\n          'specularExponent': 10,\n          'lighting-color': 'white',\n          'result': 'specOut',\n        },\n        embossFilter);\n    dom.createSvgElement(\n        Svg.FEPOINTLIGHT, {'x': -5000, 'y': -10000, 'z': 20000},\n        feSpecularLighting);\n    dom.createSvgElement(\n        Svg.FECOMPOSITE, {\n          'in': 'specOut',\n          'in2': 'SourceAlpha',\n          'operator': 'in',\n          'result': 'specOut',\n        },\n        embossFilter);\n    dom.createSvgElement(\n        Svg.FECOMPOSITE, {\n          'in': 'SourceGraphic',\n          'in2': 'specOut',\n          'operator': 'arithmetic',\n          'k1': 0,\n          'k2': 1,\n          'k3': 1,\n          'k4': 0,\n        },\n        embossFilter);\n    this.embossFilterId = embossFilter.id;\n    this.embossFilter_ = embossFilter;\n\n    /*\n      <pattern id=\"blocklyDisabledPattern837493\" patternUnits=\"userSpaceOnUse\"\n               width=\"10\" height=\"10\">\n        <rect width=\"10\" height=\"10\" fill=\"#aaa\" />\n        <path d=\"M 0 0 L 10 10 M 10 0 L 0 10\" stroke=\"#cc0\" />\n      </pattern>\n    */\n    const disabledPattern = dom.createSvgElement(\n        Svg.PATTERN, {\n          'id': 'blocklyDisabledPattern' + this.randomIdentifier,\n          'patternUnits': 'userSpaceOnUse',\n          'width': 10,\n          'height': 10,\n        },\n        this.defs_);\n    dom.createSvgElement(\n        Svg.RECT, {'width': 10, 'height': 10, 'fill': '#aaa'}, disabledPattern);\n    dom.createSvgElement(\n        Svg.PATH, {'d': 'M 0 0 L 10 10 M 10 0 L 0 10', 'stroke': '#cc0'},\n        disabledPattern);\n    this.disabledPatternId = disabledPattern.id;\n    this.disabledPattern_ = disabledPattern;\n\n    this.createDebugFilter();\n  }\n\n  /**\n   * Create a filter for highlighting the currently rendering block during\n   * render debugging.\n   * @private\n   */\n  createDebugFilter() {\n    // Only create the debug filter once.\n    if (!this.debugFilter_) {\n      const debugFilter = dom.createSvgElement(\n          Svg.FILTER, {\n            'id': 'blocklyDebugFilter' + this.randomIdentifier,\n            'height': '160%',\n            'width': '180%',\n            'y': '-30%',\n            'x': '-40%',\n          },\n          this.defs_);\n      // Set all gaussian blur pixels to 1 opacity before applying flood\n      const debugComponentTransfer = dom.createSvgElement(\n          Svg.FECOMPONENTTRANSFER, {'result': 'outBlur'}, debugFilter);\n      dom.createSvgElement(\n          Svg.FEFUNCA,\n          {'type': 'table', 'tableValues': '0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1'},\n          debugComponentTransfer);\n      // Color the highlight\n      dom.createSvgElement(\n          Svg.FEFLOOD, {\n            'flood-color': '#ff0000',\n            'flood-opacity': 0.5,\n            'result': 'outColor',\n          },\n          debugFilter);\n      dom.createSvgElement(\n          Svg.FECOMPOSITE, {\n            'in': 'outColor',\n            'in2': 'outBlur',\n            'operator': 'in',\n            'result': 'outGlow',\n          },\n          debugFilter);\n      this.debugFilterId = debugFilter.id;\n      this.debugFilter_ = debugFilter;\n    }\n  }\n\n  /**\n   * Inject renderer specific CSS into the page.\n   * @param {string} tagName The name of the style tag to use.\n   * @param {string} selector The CSS selector to use.\n   * @protected\n   */\n  injectCSS_(tagName, selector) {\n    const cssArray = this.getCSS_(selector);\n    const cssNodeId = 'blockly-renderer-style-' + tagName;\n    this.cssNode_ =\n        /** @type {!HTMLStyleElement} */ (document.getElementById(cssNodeId));\n    const text = cssArray.join('\\n');\n    if (this.cssNode_) {\n      // Already injected, update if the theme changed.\n      this.cssNode_.firstChild.textContent = text;\n      return;\n    }\n    // Inject CSS tag at start of head.\n    const cssNode =\n        /** @type {!HTMLStyleElement} */ (document.createElement('style'));\n    cssNode.id = cssNodeId;\n    const cssTextNode = document.createTextNode(text);\n    cssNode.appendChild(cssTextNode);\n    document.head.insertBefore(cssNode, document.head.firstChild);\n    this.cssNode_ = cssNode;\n  }\n\n  /**\n   * Get any renderer specific CSS to inject when the renderer is initialized.\n   * @param {string} selector CSS selector to use.\n   * @return {!Array<string>} Array of CSS strings.\n   * @protected\n   */\n  getCSS_(selector) {\n    return [\n      /* eslint-disable indent */\n      /* clang-format off */\n      // Text.\n      selector + ' .blocklyText, ',\n      selector + ' .blocklyFlyoutLabelText {',\n        'font: ' + this.FIELD_TEXT_FONTWEIGHT + ' ' +\n            this.FIELD_TEXT_FONTSIZE + 'pt ' + this.FIELD_TEXT_FONTFAMILY + ';',\n      '}',\n\n      // Fields.\n      selector + ' .blocklyText {',\n        'fill: #fff;',\n      '}',\n      selector + ' .blocklyNonEditableText>rect,',\n      selector + ' .blocklyEditableText>rect {',\n        'fill: ' + this.FIELD_BORDER_RECT_COLOUR + ';',\n        'fill-opacity: .6;',\n        'stroke: none;',\n      '}',\n      selector + ' .blocklyNonEditableText>text,',\n      selector + ' .blocklyEditableText>text {',\n        'fill: #000;',\n      '}',\n\n      // Flyout labels.\n      selector + ' .blocklyFlyoutLabelText {',\n        'fill: #000;',\n      '}',\n\n      // Bubbles.\n      selector + ' .blocklyText.blocklyBubbleText {',\n        'fill: #000;',\n      '}',\n\n      // Editable field hover.\n      selector + ' .blocklyEditableText:not(.editing):hover>rect {',\n        'stroke: #fff;',\n        'stroke-width: 2;',\n      '}',\n\n      // Text field input.\n      selector + ' .blocklyHtmlInput {',\n        'font-family: ' + this.FIELD_TEXT_FONTFAMILY + ';',\n        'font-weight: ' + this.FIELD_TEXT_FONTWEIGHT + ';',\n      '}',\n\n      // Selection highlight.\n      selector + ' .blocklySelected>.blocklyPath {',\n        'stroke: #fc3;',\n        'stroke-width: 3px;',\n      '}',\n\n      // Connection highlight.\n      selector + ' .blocklyHighlightedConnectionPath {',\n        'stroke: #fc3;',\n      '}',\n\n      // Replaceable highlight.\n      selector + ' .blocklyReplaceable .blocklyPath {',\n        'fill-opacity: .5;',\n      '}',\n      selector + ' .blocklyReplaceable .blocklyPathLight,',\n      selector + ' .blocklyReplaceable .blocklyPathDark {',\n        'display: none;',\n      '}',\n\n      // Insertion marker.\n      selector + ' .blocklyInsertionMarker>.blocklyPath {',\n        'fill-opacity: ' + this.INSERTION_MARKER_OPACITY + ';',\n        'stroke: none;',\n      '}',\n      /* clang-format on */\n      /* eslint-enable indent */\n    ];\n  }\n}\n\nexports.ConstantProvider = ConstantProvider;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Objects representing a field in a row of a rendered\n * block.\n */\n\n/**\n * Objects representing a field in a row of a rendered\n * block.\n * @class\n */\ngoog.module('Blockly.blockRendering.Field');\n\n/* eslint-disable-next-line no-unused-vars */\nconst {ConstantProvider} = goog.requireType('Blockly.blockRendering.ConstantProvider');\n/* eslint-disable-next-line no-unused-vars */\nconst {Field: BlocklyField} = goog.requireType('Blockly.Field');\n/* eslint-disable-next-line no-unused-vars */\nconst {Input} = goog.requireType('Blockly.Input');\nconst {Measurable} = goog.require('Blockly.blockRendering.Measurable');\nconst {Types} = goog.require('Blockly.blockRendering.Types');\n\n\n/**\n * An object containing information about the space a field takes up during\n * rendering\n * @struct\n * @extends {Measurable}\n * @alias Blockly.blockRendering.Field\n */\nclass Field extends Measurable {\n  /**\n   * @param {!ConstantProvider} constants The rendering\n   *   constants provider.\n   * @param {!BlocklyField} field The field to measure and store information\n   *     for.\n   * @param {!Input} parentInput The parent input for the field.\n   * @package\n   */\n  constructor(constants, field, parentInput) {\n    super(constants);\n\n    /** @type {!BlocklyField} */\n    this.field = field;\n\n    /** @type {boolean} */\n    this.isEditable = field.EDITABLE;\n\n    /** @type {boolean} */\n    this.flipRtl = field.getFlipRtl();\n    this.type |= Types.FIELD;\n\n    const size = this.field.getSize();\n\n    /** @type {number} */\n    this.height = size.height;\n\n    /** @type {number} */\n    this.width = size.width;\n\n    /** @type {!Input} */\n    this.parentInput = parentInput;\n  }\n}\n\nexports.Field = Field;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Fields can be created based on a JSON definition. This file\n *    contains methods for registering those JSON definitions, and building the\n *    fields based on JSON.\n */\n'use strict';\n\n/**\n * Fields can be created based on a JSON definition. This file\n *    contains methods for registering those JSON definitions, and building the\n *    fields based on JSON.\n * @namespace Blockly.fieldRegistry\n */\ngoog.module('Blockly.fieldRegistry');\n\nconst registry = goog.require('Blockly.registry');\n/* eslint-disable-next-line no-unused-vars */\nconst {Field} = goog.requireType('Blockly.Field');\n/* eslint-disable-next-line no-unused-vars */\nconst {IRegistrableField} = goog.requireType('Blockly.IRegistrableField');\n\n\n/**\n * Registers a field type.\n * fieldRegistry.fromJson uses this registry to\n * find the appropriate field type.\n * @param {string} type The field type name as used in the JSON definition.\n * @param {!IRegistrableField} fieldClass The field class containing a\n *     fromJson function that can construct an instance of the field.\n * @throws {Error} if the type name is empty, the field is already\n *     registered, or the fieldClass is not an object containing a fromJson\n *     function.\n * @alias Blockly.fieldRegistry.register\n */\nconst register = function(type, fieldClass) {\n  registry.register(registry.Type.FIELD, type, fieldClass);\n};\nexports.register = register;\n\n/**\n * Unregisters the field registered with the given type.\n * @param {string} type The field type name as used in the JSON definition.\n * @alias Blockly.fieldRegistry.unregister\n */\nconst unregister = function(type) {\n  registry.unregister(registry.Type.FIELD, type);\n};\nexports.unregister = unregister;\n\n/**\n * Construct a Field from a JSON arg object.\n * Finds the appropriate registered field by the type name as registered using\n * fieldRegistry.register.\n * @param {!Object} options A JSON object with a type and options specific\n *     to the field type.\n * @return {?Field} The new field instance or null if a field wasn't\n *     found with the given type name\n * @alias Blockly.fieldRegistry.fromJson\n * @package\n */\nconst fromJson = function(options) {\n  const fieldObject = /** @type {?IRegistrableField} */ (\n      registry.getObject(registry.Type.FIELD, options['type']));\n  if (!fieldObject) {\n    console.warn(\n        'Blockly could not create a field of type ' + options['type'] +\n        '. The field is probably not being registered. This could be because' +\n        ' the file is not loaded, the field does not register itself (Issue' +\n        ' #1584), or the registration is not being reached.');\n    return null;\n  }\n  return fieldObject.fromJson(options);\n};\nexports.fromJson = fromJson;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Object in charge of managing markers and the cursor.\n */\n'use strict';\n\n/**\n * Object in charge of managing markers and the cursor.\n * @class\n */\ngoog.module('Blockly.MarkerManager');\n\n/* eslint-disable-next-line no-unused-vars */\nconst {Cursor} = goog.requireType('Blockly.Cursor');\n/* eslint-disable-next-line no-unused-vars */\nconst {Marker} = goog.requireType('Blockly.Marker');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceSvg} = goog.requireType('Blockly.WorkspaceSvg');\n\n\n/**\n * Class to manage the multiple markers and the cursor on a workspace.\n * @alias Blockly.MarkerManager\n */\nclass MarkerManager {\n  /**\n   * @param {!WorkspaceSvg} workspace The workspace for the marker manager.\n   * @package\n   */\n  constructor(workspace) {\n    /**\n     * The cursor.\n     * @type {?Cursor}\n     * @private\n     */\n    this.cursor_ = null;\n\n    /**\n     * The cursor's SVG element.\n     * @type {?SVGElement}\n     * @private\n     */\n    this.cursorSvg_ = null;\n\n    /**\n     * The map of markers for the workspace.\n     * @type {!Object<string, !Marker>}\n     * @private\n     */\n    this.markers_ = Object.create(null);\n\n    /**\n     * The workspace this marker manager is associated with.\n     * @type {!WorkspaceSvg}\n     * @private\n     */\n    this.workspace_ = workspace;\n\n    /**\n     * The marker's SVG element.\n     * @type {?SVGElement}\n     * @private\n     */\n    this.markerSvg_ = null;\n  }\n\n  /**\n   * Register the marker by adding it to the map of markers.\n   * @param {string} id A unique identifier for the marker.\n   * @param {!Marker} marker The marker to register.\n   */\n  registerMarker(id, marker) {\n    if (this.markers_[id]) {\n      this.unregisterMarker(id);\n    }\n    marker.setDrawer(this.workspace_.getRenderer().makeMarkerDrawer(\n        this.workspace_, marker));\n    this.setMarkerSvg(marker.getDrawer().createDom());\n    this.markers_[id] = marker;\n  }\n\n  /**\n   * Unregister the marker by removing it from the map of markers.\n   * @param {string} id The ID of the marker to unregister.\n   */\n  unregisterMarker(id) {\n    const marker = this.markers_[id];\n    if (marker) {\n      marker.dispose();\n      delete this.markers_[id];\n    } else {\n      throw Error(\n          'Marker with ID ' + id + ' does not exist. ' +\n          'Can only unregister markers that exist.');\n    }\n  }\n\n  /**\n   * Get the cursor for the workspace.\n   * @return {?Cursor} The cursor for this workspace.\n   */\n  getCursor() {\n    return this.cursor_;\n  }\n\n  /**\n   * Get a single marker that corresponds to the given ID.\n   * @param {string} id A unique identifier for the marker.\n   * @return {?Marker} The marker that corresponds to the given ID,\n   *     or null if none exists.\n   */\n  getMarker(id) {\n    return this.markers_[id] || null;\n  }\n\n  /**\n   * Sets the cursor and initializes the drawer for use with keyboard\n   * navigation.\n   * @param {Cursor} cursor The cursor used to move around this workspace.\n   */\n  setCursor(cursor) {\n    if (this.cursor_ && this.cursor_.getDrawer()) {\n      this.cursor_.getDrawer().dispose();\n    }\n    this.cursor_ = cursor;\n    if (this.cursor_) {\n      const drawer = this.workspace_.getRenderer().makeMarkerDrawer(\n          this.workspace_, this.cursor_);\n      this.cursor_.setDrawer(drawer);\n      this.setCursorSvg(this.cursor_.getDrawer().createDom());\n    }\n  }\n\n  /**\n   * Add the cursor SVG to this workspace SVG group.\n   * @param {?SVGElement} cursorSvg The SVG root of the cursor to be added to\n   *     the workspace SVG group.\n   * @package\n   */\n  setCursorSvg(cursorSvg) {\n    if (!cursorSvg) {\n      this.cursorSvg_ = null;\n      return;\n    }\n\n    this.workspace_.getBlockCanvas().appendChild(cursorSvg);\n    this.cursorSvg_ = cursorSvg;\n  }\n\n  /**\n   * Add the marker SVG to this workspaces SVG group.\n   * @param {?SVGElement} markerSvg The SVG root of the marker to be added to\n   *     the workspace SVG group.\n   * @package\n   */\n  setMarkerSvg(markerSvg) {\n    if (!markerSvg) {\n      this.markerSvg_ = null;\n      return;\n    }\n\n    if (this.workspace_.getBlockCanvas()) {\n      if (this.cursorSvg_) {\n        this.workspace_.getBlockCanvas().insertBefore(\n            markerSvg, this.cursorSvg_);\n      } else {\n        this.workspace_.getBlockCanvas().appendChild(markerSvg);\n      }\n    }\n  }\n\n  /**\n   * Redraw the attached cursor SVG if needed.\n   * @package\n   */\n  updateMarkers() {\n    if (this.workspace_.keyboardAccessibilityMode && this.cursorSvg_) {\n      this.workspace_.getCursor().draw();\n    }\n  }\n\n  /**\n   * Dispose of the marker manager.\n   * Go through and delete all markers associated with this marker manager.\n   * @suppress {checkTypes}\n   * @package\n   */\n  dispose() {\n    const markerIds = Object.keys(this.markers_);\n    for (let i = 0, markerId; (markerId = markerIds[i]); i++) {\n      this.unregisterMarker(markerId);\n    }\n    this.markers_ = null;\n    if (this.cursor_) {\n      this.cursor_.dispose();\n      this.cursor_ = null;\n    }\n  }\n}\n\n/**\n * The name of the local marker.\n * @type {string}\n * @const\n */\nMarkerManager.LOCAL_MARKER = 'local_marker_1';\n\nexports.MarkerManager = MarkerManager;\n","/**\n * @license\n * Copyright 2022 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview A type used to create flag values (e.g. SKIP_SETUP).\n */\n'use strict';\n\n/**\n * A type used to create flag values.\n * @class\n */\ngoog.module('Blockly.utils.Sentinel');\n\n\n/**\n * A type used to create flag values.\n * @alias Blockly.utils.Sentinel\n */\nclass Sentinel {}\n\nexports.Sentinel = Sentinel;\n","/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Class for a block change event.\n */\n'use strict';\n\n/**\n * Class for a block change event.\n * @class\n */\ngoog.module('Blockly.Events.BlockChange');\n\nconst Xml = goog.require('Blockly.Xml');\nconst eventUtils = goog.require('Blockly.Events.utils');\nconst registry = goog.require('Blockly.registry');\nconst {BlockBase} = goog.require('Blockly.Events.BlockBase');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockSvg} = goog.requireType('Blockly.BlockSvg');\n/* eslint-disable-next-line no-unused-vars */\nconst {Block} = goog.requireType('Blockly.Block');\n\n\n/**\n * Class for a block change event.\n * @extends {BlockBase}\n * @alias Blockly.Events.BlockChange\n */\nclass BlockChange extends BlockBase {\n  /**\n   * @param {!Block=} opt_block The changed block.  Undefined for a blank\n   *     event.\n   * @param {string=} opt_element One of 'field', 'comment', 'disabled', etc.\n   * @param {?string=} opt_name Name of input or field affected, or null.\n   * @param {*=} opt_oldValue Previous value of element.\n   * @param {*=} opt_newValue New value of element.\n   */\n  constructor(opt_block, opt_element, opt_name, opt_oldValue, opt_newValue) {\n    super(opt_block);\n\n    /**\n     * Type of this event.\n     * @type {string}\n     */\n    this.type = eventUtils.BLOCK_CHANGE;\n\n    if (!opt_block) {\n      return;  // Blank event to be populated by fromJson.\n    }\n    this.element = typeof opt_element === 'undefined' ? '' : opt_element;\n    this.name = typeof opt_name === 'undefined' ? '' : opt_name;\n    this.oldValue = typeof opt_oldValue === 'undefined' ? '' : opt_oldValue;\n    this.newValue = typeof opt_newValue === 'undefined' ? '' : opt_newValue;\n  }\n\n  /**\n   * Encode the event as JSON.\n   * @return {!Object} JSON representation.\n   */\n  toJson() {\n    const json = super.toJson();\n    json['element'] = this.element;\n    if (this.name) {\n      json['name'] = this.name;\n    }\n    json['oldValue'] = this.oldValue;\n    json['newValue'] = this.newValue;\n    return json;\n  }\n\n  /**\n   * Decode the JSON event.\n   * @param {!Object} json JSON representation.\n   */\n  fromJson(json) {\n    super.fromJson(json);\n    this.element = json['element'];\n    this.name = json['name'];\n    this.oldValue = json['oldValue'];\n    this.newValue = json['newValue'];\n  }\n\n  /**\n   * Does this event record any change of state?\n   * @return {boolean} False if something changed.\n   */\n  isNull() {\n    return this.oldValue === this.newValue;\n  }\n\n  /**\n   * Run a change event.\n   * @param {boolean} forward True if run forward, false if run backward (undo).\n   */\n  run(forward) {\n    const workspace = this.getEventWorkspace_();\n    const block = workspace.getBlockById(this.blockId);\n    if (!block) {\n      console.warn('Can\\'t change non-existent block: ' + this.blockId);\n      return;\n    }\n\n    // Assume the block is rendered so that then we can check.\n    const blockSvg = /** @type {!BlockSvg} */ (block);\n    if (blockSvg.mutator) {\n      // Close the mutator (if open) since we don't want to update it.\n      blockSvg.mutator.setVisible(false);\n    }\n    const value = forward ? this.newValue : this.oldValue;\n    switch (this.element) {\n      case 'field': {\n        const field = block.getField(this.name);\n        if (field) {\n          field.setValue(value);\n        } else {\n          console.warn('Can\\'t set non-existent field: ' + this.name);\n        }\n        break;\n      }\n      case 'comment':\n        block.setCommentText(/** @type {string} */ (value) || null);\n        break;\n      case 'collapsed':\n        block.setCollapsed(!!value);\n        break;\n      case 'disabled':\n        block.setEnabled(!value);\n        break;\n      case 'inline':\n        block.setInputsInline(!!value);\n        break;\n      case 'mutation': {\n        const oldState = BlockChange.getExtraBlockState_(\n            /** @type {!BlockSvg} */ (block));\n        if (block.loadExtraState) {\n          block.loadExtraState(\n              JSON.parse(/** @type {string} */ (value) || '{}'));\n        } else if (block.domToMutation) {\n          block.domToMutation(\n              Xml.textToDom(/** @type {string} */ (value) || '<mutation/>'));\n        }\n        eventUtils.fire(\n            new BlockChange(block, 'mutation', null, oldState, value));\n        break;\n      }\n      default:\n        console.warn('Unknown change type: ' + this.element);\n    }\n  }\n\n  // TODO (#5397): Encapsulate this in the BlocklyMutationChange event when\n  //    refactoring change events.\n  /**\n   * Returns the extra state of the given block (either as XML or a JSO,\n   * depending on the block's definition).\n   * @param {!BlockSvg} block The block to get the extra state of.\n   * @return {string} A stringified version of the extra state of the given\n   *     block.\n   * @package\n   */\n  static getExtraBlockState_(block) {\n    if (block.saveExtraState) {\n      const state = block.saveExtraState();\n      return state ? JSON.stringify(state) : '';\n    } else if (block.mutationToDom) {\n      const state = block.mutationToDom();\n      return state ? Xml.domToText(state) : '';\n    }\n    return '';\n  }\n}\n\nregistry.register(registry.Type.EVENT, eventUtils.CHANGE, BlockChange);\n\nexports.BlockChange = BlockChange;\n","/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Methods animating a block on connection and disconnection.\n */\n'use strict';\n\n/**\n * Methods animating a block on connection and disconnection.\n * @namespace Blockly.blockAnimations\n */\ngoog.module('Blockly.blockAnimations');\n\nconst dom = goog.require('Blockly.utils.dom');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockSvg} = goog.requireType('Blockly.BlockSvg');\nconst {Svg} = goog.require('Blockly.utils.Svg');\n\n\n/**\n * PID of disconnect UI animation.  There can only be one at a time.\n * @type {number}\n */\nlet disconnectPid = 0;\n\n/**\n * SVG group of wobbling block.  There can only be one at a time.\n * @type {Element}\n */\nlet disconnectGroup = null;\n\n/**\n * Play some UI effects (sound, animation) when disposing of a block.\n * @param {!BlockSvg} block The block being disposed of.\n * @alias Blockly.blockAnimations.disposeUiEffect\n * @package\n */\nconst disposeUiEffect = function(block) {\n  const workspace = block.workspace;\n  const svgGroup = block.getSvgRoot();\n  workspace.getAudioManager().play('delete');\n\n  const xy = workspace.getSvgXY(svgGroup);\n  // Deeply clone the current block.\n  const clone = svgGroup.cloneNode(true);\n  clone.translateX_ = xy.x;\n  clone.translateY_ = xy.y;\n  clone.setAttribute('transform', 'translate(' + xy.x + ',' + xy.y + ')');\n  workspace.getParentSvg().appendChild(clone);\n  clone.bBox_ = clone.getBBox();\n  // Start the animation.\n  disposeUiStep(clone, workspace.RTL, new Date, workspace.scale);\n};\nexports.disposeUiEffect = disposeUiEffect;\n\n/**\n * Animate a cloned block and eventually dispose of it.\n * This is a class method, not an instance method since the original block has\n * been destroyed and is no longer accessible.\n * @param {!Element} clone SVG element to animate and dispose of.\n * @param {boolean} rtl True if RTL, false if LTR.\n * @param {!Date} start Date of animation's start.\n * @param {number} workspaceScale Scale of workspace.\n */\nconst disposeUiStep = function(clone, rtl, start, workspaceScale) {\n  const ms = new Date - start;\n  const percent = ms / 150;\n  if (percent > 1) {\n    dom.removeNode(clone);\n  } else {\n    const x = clone.translateX_ +\n        (rtl ? -1 : 1) * clone.bBox_.width * workspaceScale / 2 * percent;\n    const y = clone.translateY_ + clone.bBox_.height * workspaceScale * percent;\n    const scale = (1 - percent) * workspaceScale;\n    clone.setAttribute(\n        'transform',\n        'translate(' + x + ',' + y + ')' +\n            ' scale(' + scale + ')');\n    setTimeout(disposeUiStep, 10, clone, rtl, start, workspaceScale);\n  }\n};\n\n/**\n * Play some UI effects (sound, ripple) after a connection has been established.\n * @param {!BlockSvg} block The block being connected.\n * @alias Blockly.blockAnimations.connectionUiEffect\n * @package\n */\nconst connectionUiEffect = function(block) {\n  const workspace = block.workspace;\n  const scale = workspace.scale;\n  workspace.getAudioManager().play('click');\n  if (scale < 1) {\n    return;  // Too small to care about visual effects.\n  }\n  // Determine the absolute coordinates of the inferior block.\n  const xy = workspace.getSvgXY(block.getSvgRoot());\n  // Offset the coordinates based on the two connection types, fix scale.\n  if (block.outputConnection) {\n    xy.x += (block.RTL ? 3 : -3) * scale;\n    xy.y += 13 * scale;\n  } else if (block.previousConnection) {\n    xy.x += (block.RTL ? -23 : 23) * scale;\n    xy.y += 3 * scale;\n  }\n  const ripple = dom.createSvgElement(\n      Svg.CIRCLE, {\n        'cx': xy.x,\n        'cy': xy.y,\n        'r': 0,\n        'fill': 'none',\n        'stroke': '#888',\n        'stroke-width': 10,\n      },\n      workspace.getParentSvg());\n  // Start the animation.\n  connectionUiStep(ripple, new Date, scale);\n};\nexports.connectionUiEffect = connectionUiEffect;\n\n/**\n * Expand a ripple around a connection.\n * @param {!SVGElement} ripple Element to animate.\n * @param {!Date} start Date of animation's start.\n * @param {number} scale Scale of workspace.\n */\nconst connectionUiStep = function(ripple, start, scale) {\n  const ms = new Date - start;\n  const percent = ms / 150;\n  if (percent > 1) {\n    dom.removeNode(ripple);\n  } else {\n    ripple.setAttribute('r', percent * 25 * scale);\n    ripple.style.opacity = 1 - percent;\n    disconnectPid = setTimeout(connectionUiStep, 10, ripple, start, scale);\n  }\n};\n\n/**\n * Play some UI effects (sound, animation) when disconnecting a block.\n * @param {!BlockSvg} block The block being disconnected.\n * @alias Blockly.blockAnimations.disconnectUiEffect\n * @package\n */\nconst disconnectUiEffect = function(block) {\n  block.workspace.getAudioManager().play('disconnect');\n  if (block.workspace.scale < 1) {\n    return;  // Too small to care about visual effects.\n  }\n  // Horizontal distance for bottom of block to wiggle.\n  const DISPLACEMENT = 10;\n  // Scale magnitude of skew to height of block.\n  const height = block.getHeightWidth().height;\n  let magnitude = Math.atan(DISPLACEMENT / height) / Math.PI * 180;\n  if (!block.RTL) {\n    magnitude *= -1;\n  }\n  // Start the animation.\n  disconnectUiStep(block.getSvgRoot(), magnitude, new Date);\n};\nexports.disconnectUiEffect = disconnectUiEffect;\n\n/**\n * Animate a brief wiggle of a disconnected block.\n * @param {!SVGElement} group SVG element to animate.\n * @param {number} magnitude Maximum degrees skew (reversed for RTL).\n * @param {!Date} start Date of animation's start.\n */\nconst disconnectUiStep = function(group, magnitude, start) {\n  const DURATION = 200;  // Milliseconds.\n  const WIGGLES = 3;     // Half oscillations.\n\n  const ms = new Date - start;\n  const percent = ms / DURATION;\n\n  if (percent > 1) {\n    group.skew_ = '';\n  } else {\n    const skew = Math.round(\n        Math.sin(percent * Math.PI * WIGGLES) * (1 - percent) * magnitude);\n    group.skew_ = 'skewX(' + skew + ')';\n    disconnectGroup = group;\n    disconnectPid = setTimeout(disconnectUiStep, 10, group, magnitude, start);\n  }\n  group.setAttribute('transform', group.translate_ + group.skew_);\n};\n\n/**\n * Stop the disconnect UI animation immediately.\n * @alias Blockly.blockAnimations.disconnectUiStop\n * @package\n */\nconst disconnectUiStop = function() {\n  if (disconnectGroup) {\n    clearTimeout(disconnectPid);\n    const group = disconnectGroup;\n    group.skew_ = '';\n    group.setAttribute('transform', group.translate_);\n    disconnectGroup = null;\n  }\n};\nexports.disconnectUiStop = disconnectUiStop;\n","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Module that provides constants for use inside Blockly. Do not\n * use these constants outside of the core library.\n * @package\n */\n'use strict';\n\n/**\n * Module that provides constants for use inside Blockly. Do not\n * use these constants outside of the core library.\n * @namespace Blockly.internalConstants\n */\ngoog.module('Blockly.internalConstants');\n\nconst {ConnectionType} = goog.require('Blockly.ConnectionType');\n\n\n/**\n * Number of characters to truncate a collapsed block to.\n * @alias Blockly.internalConstants.COLLAPSE_CHARS\n */\nconst COLLAPSE_CHARS = 30;\nexports.COLLAPSE_CHARS = COLLAPSE_CHARS;\n\n/**\n * When dragging a block out of a stack, split the stack in two (true), or drag\n * out the block healing the stack (false).\n * @alias Blockly.internalConstants.DRAG_STACK\n */\nconst DRAG_STACK = true;\nexports.DRAG_STACK = DRAG_STACK;\n\n/**\n * Lookup table for determining the opposite type of a connection.\n * @const\n * @alias Blockly.internalConstants.OPPOSITE_TYPE\n */\nconst OPPOSITE_TYPE = [];\nOPPOSITE_TYPE[ConnectionType.INPUT_VALUE] = ConnectionType.OUTPUT_VALUE;\nOPPOSITE_TYPE[ConnectionType.OUTPUT_VALUE] = ConnectionType.INPUT_VALUE;\nOPPOSITE_TYPE[ConnectionType.NEXT_STATEMENT] =\n    ConnectionType.PREVIOUS_STATEMENT;\nOPPOSITE_TYPE[ConnectionType.PREVIOUS_STATEMENT] =\n    ConnectionType.NEXT_STATEMENT;\n\nexports.OPPOSITE_TYPE = OPPOSITE_TYPE;\n\n/**\n * String for use in the dropdown created in field_variable.\n * This string indicates that this option in the dropdown is 'Rename\n * variable...' and if selected, should trigger the prompt to rename a variable.\n * @const {string}\n * @alias Blockly.internalConstants.RENAME_VARIABLE_ID\n */\nconst RENAME_VARIABLE_ID = 'RENAME_VARIABLE_ID';\nexports.RENAME_VARIABLE_ID = RENAME_VARIABLE_ID;\n\n/**\n * String for use in the dropdown created in field_variable.\n * This string indicates that this option in the dropdown is 'Delete the \"%1\"\n * variable' and if selected, should trigger the prompt to delete a variable.\n * @const {string}\n * @alias Blockly.internalConstants.DELETE_VARIABLE_ID\n */\nconst DELETE_VARIABLE_ID = 'DELETE_VARIABLE_ID';\nexports.DELETE_VARIABLE_ID = DELETE_VARIABLE_ID;\n","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Manager for all items registered with the workspace.\n */\n\n'use strict';\n\n/**\n * Manager for all items registered with the workspace.\n * @class\n */\ngoog.module('Blockly.ComponentManager');\n\nconst arrayUtils = goog.require('Blockly.utils.array');\n/* eslint-disable-next-line no-unused-vars */\nconst {IAutoHideable} = goog.requireType('Blockly.IAutoHideable');\n/* eslint-disable-next-line no-unused-vars */\nconst {IComponent} = goog.requireType('Blockly.IComponent');\n/* eslint-disable-next-line no-unused-vars */\nconst {IDeleteArea} = goog.requireType('Blockly.IDeleteArea');\n/* eslint-disable-next-line no-unused-vars */\nconst {IDragTarget} = goog.requireType('Blockly.IDragTarget');\n/* eslint-disable-next-line no-unused-vars */\nconst {IPositionable} = goog.requireType('Blockly.IPositionable');\n\n\n/**\n * Manager for all items registered with the workspace.\n * @alias Blockly.ComponentManager\n */\nclass ComponentManager {\n  /**\n   * Creates a new ComponentManager instance.\n   */\n  constructor() {\n    /**\n     * A map of the components registered with the workspace, mapped to id.\n     * @type {!Object<string, !ComponentManager.ComponentDatum>}\n     * @private\n     */\n    this.componentData_ = Object.create(null);\n\n    /**\n     * A map of capabilities to component IDs.\n     * @type {!Object<string, !Array<string>>}\n     * @private\n     */\n    this.capabilityToComponentIds_ = Object.create(null);\n  }\n\n  /**\n   * Adds a component.\n   * @param {!ComponentManager.ComponentDatum} componentInfo The data for\n   *   the component to register.\n   * @param {boolean=} opt_allowOverrides True to prevent an error when\n   *     overriding an already registered item.\n   */\n  addComponent(componentInfo, opt_allowOverrides) {\n    // Don't throw an error if opt_allowOverrides is true.\n    const id = componentInfo.component.id;\n    if (!opt_allowOverrides && this.componentData_[id]) {\n      throw Error(\n          'Plugin \"' + id + '\" with capabilities \"' +\n          this.componentData_[id].capabilities + '\" already added.');\n    }\n    this.componentData_[id] = componentInfo;\n    const stringCapabilities = [];\n    for (let i = 0; i < componentInfo.capabilities.length; i++) {\n      const capability = String(componentInfo.capabilities[i]).toLowerCase();\n      stringCapabilities.push(capability);\n      if (this.capabilityToComponentIds_[capability] === undefined) {\n        this.capabilityToComponentIds_[capability] = [id];\n      } else {\n        this.capabilityToComponentIds_[capability].push(id);\n      }\n    }\n    this.componentData_[id].capabilities = stringCapabilities;\n  }\n\n  /**\n   * Removes a component.\n   * @param {string} id The ID of the component to remove.\n   */\n  removeComponent(id) {\n    const componentInfo = this.componentData_[id];\n    if (!componentInfo) {\n      return;\n    }\n    for (let i = 0; i < componentInfo.capabilities.length; i++) {\n      const capability = String(componentInfo.capabilities[i]).toLowerCase();\n      arrayUtils.removeElem(this.capabilityToComponentIds_[capability], id);\n    }\n    delete this.componentData_[id];\n  }\n\n  /**\n   * Adds a capability to a existing registered component.\n   * @param {string} id The ID of the component to add the capability to.\n   * @param {string|!ComponentManager.Capability<T>} capability The\n   *     capability to add.\n   * @template T\n   */\n  addCapability(id, capability) {\n    if (!this.getComponent(id)) {\n      throw Error(\n          'Cannot add capability, \"' + capability + '\". Plugin \"' + id +\n          '\" has not been added to the ComponentManager');\n    }\n    if (this.hasCapability(id, capability)) {\n      console.warn(\n          'Plugin \"' + id + 'already has capability \"' + capability + '\"');\n      return;\n    }\n    capability = String(capability).toLowerCase();\n    this.componentData_[id].capabilities.push(capability);\n    this.capabilityToComponentIds_[capability].push(id);\n  }\n\n  /**\n   * Removes a capability from an existing registered component.\n   * @param {string} id The ID of the component to remove the capability from.\n   * @param {string|!ComponentManager.Capability<T>} capability The\n   *     capability to remove.\n   * @template T\n   */\n  removeCapability(id, capability) {\n    if (!this.getComponent(id)) {\n      throw Error(\n          'Cannot remove capability, \"' + capability + '\". Plugin \"' + id +\n          '\" has not been added to the ComponentManager');\n    }\n    if (!this.hasCapability(id, capability)) {\n      console.warn(\n          'Plugin \"' + id + 'doesn\\'t have capability \"' + capability +\n          '\" to remove');\n      return;\n    }\n    capability = String(capability).toLowerCase();\n    arrayUtils.removeElem(this.componentData_[id].capabilities, capability);\n    arrayUtils.removeElem(this.capabilityToComponentIds_[capability], id);\n  }\n\n  /**\n   * Returns whether the component with this id has the specified capability.\n   * @param {string} id The ID of the component to check.\n   * @param {string|!ComponentManager.Capability<T>} capability The\n   *     capability to check for.\n   * @return {boolean} Whether the component has the capability.\n   * @template T\n   */\n  hasCapability(id, capability) {\n    capability = String(capability).toLowerCase();\n    return this.componentData_[id].capabilities.indexOf(capability) !== -1;\n  }\n\n  /**\n   * Gets the component with the given ID.\n   * @param {string} id The ID of the component to get.\n   * @return {!IComponent|undefined} The component with the given name\n   *    or undefined if not found.\n   */\n  getComponent(id) {\n    return this.componentData_[id] && this.componentData_[id].component;\n  }\n\n  /**\n   * Gets all the components with the specified capability.\n   * @param {string|!ComponentManager.Capability<T>\n   *   } capability The capability of the component.\n   * @param {boolean} sorted Whether to return list ordered by weights.\n   * @return {!Array<T>} The components that match the specified capability.\n   * @template T\n   */\n  getComponents(capability, sorted) {\n    capability = String(capability).toLowerCase();\n    const componentIds = this.capabilityToComponentIds_[capability];\n    if (!componentIds) {\n      return [];\n    }\n    const components = [];\n    if (sorted) {\n      const componentDataList = [];\n      const componentData = this.componentData_;\n      componentIds.forEach(function(id) {\n        componentDataList.push(componentData[id]);\n      });\n      componentDataList.sort(function(a, b) {\n        return a.weight - b.weight;\n      });\n      componentDataList.forEach(function(ComponentDatum) {\n        components.push(ComponentDatum.component);\n      });\n    } else {\n      const componentData = this.componentData_;\n      componentIds.forEach(function(id) {\n        components.push(componentData[id].component);\n      });\n    }\n    return components;\n  }\n}\n\n/**\n * An object storing component information.\n * @typedef {{\n *    component: !IComponent,\n *    capabilities: (\n *     !Array<string|!ComponentManager.Capability<!IComponent>>\n *       ),\n *    weight: number\n *  }}\n */\nComponentManager.ComponentDatum;\n\n/**\n * A name with the capability of the element stored in the generic.\n * @template T\n * @alias Blockly.ComponentManager.Capability\n */\nComponentManager.Capability = class {\n  /**\n   * @param {string} name The name of the component capability.\n   */\n  constructor(name) {\n    /**\n     * @type {string}\n     * @private\n     */\n    this.name_ = name;\n  }\n\n  /**\n   * Returns the name of the capability.\n   * @return {string} The name.\n   * @override\n   */\n  toString() {\n    return this.name_;\n  }\n};\n\n/** @type {!ComponentManager.Capability<!IPositionable>} */\nComponentManager.Capability.POSITIONABLE =\n    new ComponentManager.Capability('positionable');\n\n/** @type {!ComponentManager.Capability<!IDragTarget>} */\nComponentManager.Capability.DRAG_TARGET =\n    new ComponentManager.Capability('drag_target');\n\n/** @type {!ComponentManager.Capability<!IDeleteArea>} */\nComponentManager.Capability.DELETE_AREA =\n    new ComponentManager.Capability('delete_area');\n\n/** @type {!ComponentManager.Capability<!IAutoHideable>} */\nComponentManager.Capability.AUTOHIDEABLE =\n    new ComponentManager.Capability('autohideable');\n\nexports.ComponentManager = ComponentManager;\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The interface for an object that supports a right-click.\n */\n\n'use strict';\n\n/**\n * The interface for an object that supports a right-click.\n * @namespace Blockly.IContextMenu\n */\ngoog.module('Blockly.IContextMenu');\n\n\n/**\n * @interface\n * @alias Blockly.IContextMenu\n */\nconst IContextMenu = function() {};\n\n/**\n * Show the context menu for this object.\n * @param {!Event} e Mouse event.\n */\nIContextMenu.prototype.showContextMenu;\n\nexports.IContextMenu = IContextMenu;\n","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Wrapper functions around JS functions for showing\n * alert/confirmation dialogs.\n */\n\n'use strict';\n\n/**\n * Wrapper functions around JS functions for showing alert/confirmation dialogs.\n * @namespace Blockly.dialog\n */\ngoog.module('Blockly.dialog');\n\nlet alertImplementation = function(message, opt_callback) {\n  window.alert(message);\n  if (opt_callback) {\n    opt_callback();\n  }\n};\n\nlet confirmImplementation = function(message, callback) {\n  callback(window.confirm(message));\n};\n\nlet promptImplementation = function(message, defaultValue, callback) {\n  callback(window.prompt(message, defaultValue));\n};\n\n/**\n * Wrapper to window.alert() that app developers may override via setAlert to\n * provide alternatives to the modal browser window.\n * @param {string} message The message to display to the user.\n * @param {function()=} opt_callback The callback when the alert is dismissed.\n * @alias Blockly.dialog.alert\n */\nconst alert = function(message, opt_callback) {\n  alertImplementation(message, opt_callback);\n};\nexports.alert = alert;\n\n/**\n * Sets the function to be run when Blockly.dialog.alert() is called.\n * @param {!function(string, function()=)} alertFunction The function to be run.\n * @see Blockly.dialog.alert\n * @alias Blockly.dialog.setAlert\n */\nconst setAlert = function(alertFunction) {\n  alertImplementation = alertFunction;\n};\nexports.setAlert = setAlert;\n\n/**\n * Wrapper to window.confirm() that app developers may override via setConfirm\n * to provide alternatives to the modal browser window.\n * @param {string} message The message to display to the user.\n * @param {!function(boolean)} callback The callback for handling user response.\n * @alias Blockly.dialog.confirm\n */\nconst confirm = function(message, callback) {\n  confirmImplementation(message, callback);\n};\nexports.confirm = confirm;\n\n/**\n * Sets the function to be run when Blockly.dialog.confirm() is called.\n * @param {!function(string, !function(boolean))} confirmFunction The function\n *    to be run.\n * @see Blockly.dialog.confirm\n * @alias Blockly.dialog.setConfirm\n */\nconst setConfirm = function(confirmFunction) {\n  confirmImplementation = confirmFunction;\n};\nexports.setConfirm = setConfirm;\n\n/**\n * Wrapper to window.prompt() that app developers may override via setPrompt to\n * provide alternatives to the modal browser window. Built-in browser prompts\n * are often used for better text input experience on mobile device. We strongly\n * recommend testing mobile when overriding this.\n * @param {string} message The message to display to the user.\n * @param {string} defaultValue The value to initialize the prompt with.\n * @param {!function(?string)} callback The callback for handling user response.\n * @alias Blockly.dialog.prompt\n */\nconst prompt = function(message, defaultValue, callback) {\n  promptImplementation(message, defaultValue, callback);\n};\nexports.prompt = prompt;\n\n/**\n * Sets the function to be run when Blockly.dialog.prompt() is called.\n * @param {!function(string, string, !function(?string))} promptFunction The\n *    function to be run.\n * @see Blockly.dialog.prompt\n * @alias Blockly.dialog.setPrompt\n */\nconst setPrompt = function(promptFunction) {\n  promptImplementation = promptFunction;\n};\nexports.setPrompt = setPrompt;\n","/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Abstract class for a variable event.\n */\n'use strict';\n\n/**\n * Abstract class for a variable event.\n * @class\n */\ngoog.module('Blockly.Events.VarBase');\n\nconst {Abstract: AbstractEvent} = goog.require('Blockly.Events.Abstract');\n/* eslint-disable-next-line no-unused-vars */\nconst {VariableModel} = goog.requireType('Blockly.VariableModel');\n\n\n/**\n * Abstract class for a variable event.\n * @extends {AbstractEvent}\n * @alias Blockly.Events.VarBase\n */\nclass VarBase extends AbstractEvent {\n  /**\n   * @param {!VariableModel=} opt_variable The variable this event\n   *     corresponds to.  Undefined for a blank event.\n   */\n  constructor(opt_variable) {\n    super();\n    this.isBlank = typeof opt_variable === 'undefined';\n\n    /**\n     * The variable id for the variable this event pertains to.\n     * @type {string}\n     */\n    this.varId = this.isBlank ? '' : opt_variable.getId();\n\n    /**\n     * The workspace identifier for this event.\n     * @type {string}\n     */\n    this.workspaceId = this.isBlank ? '' : opt_variable.workspace.id;\n  }\n\n  /**\n   * Encode the event as JSON.\n   * @return {!Object} JSON representation.\n   */\n  toJson() {\n    const json = super.toJson();\n    json['varId'] = this.varId;\n    return json;\n  }\n\n  /**\n   * Decode the JSON event.\n   * @param {!Object} json JSON representation.\n   */\n  fromJson(json) {\n    super.fromJson(json);\n    this.varId = json['varId'];\n  }\n}\n\nexports.VarBase = VarBase;\n","/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Class for a variable creation event.\n */\n'use strict';\n\n/**\n * Class for a variable creation event.\n * @class\n */\ngoog.module('Blockly.Events.VarCreate');\n\nconst eventUtils = goog.require('Blockly.Events.utils');\nconst registry = goog.require('Blockly.registry');\nconst {VarBase} = goog.require('Blockly.Events.VarBase');\n/* eslint-disable-next-line no-unused-vars */\nconst {VariableModel} = goog.requireType('Blockly.VariableModel');\n\n\n/**\n * Class for a variable creation event.\n * @extends {VarBase}\n * @alias Blockly.Events.VarCreate\n */\nclass VarCreate extends VarBase {\n  /**\n   * @param {!VariableModel=} opt_variable The created variable. Undefined\n   *     for a blank event.\n   */\n  constructor(opt_variable) {\n    super(opt_variable);\n\n    /**\n     * Type of this event.\n     * @type {string}\n     */\n    this.type = eventUtils.VAR_CREATE;\n\n    if (!opt_variable) {\n      return;  // Blank event to be populated by fromJson.\n    }\n\n    this.varType = opt_variable.type;\n    this.varName = opt_variable.name;\n  }\n\n  /**\n   * Encode the event as JSON.\n   * @return {!Object} JSON representation.\n   */\n  toJson() {\n    const json = super.toJson();\n    json['varType'] = this.varType;\n    json['varName'] = this.varName;\n    return json;\n  }\n\n  /**\n   * Decode the JSON event.\n   * @param {!Object} json JSON representation.\n   */\n  fromJson(json) {\n    super.fromJson(json);\n    this.varType = json['varType'];\n    this.varName = json['varName'];\n  }\n\n  /**\n   * Run a variable creation event.\n   * @param {boolean} forward True if run forward, false if run backward (undo).\n   */\n  run(forward) {\n    const workspace = this.getEventWorkspace_();\n    if (forward) {\n      workspace.createVariable(this.varName, this.varType, this.varId);\n    } else {\n      workspace.deleteVariableById(this.varId);\n    }\n  }\n}\n\nregistry.register(registry.Type.EVENT, eventUtils.VAR_CREATE, VarCreate);\n\nexports.VarCreate = VarCreate;\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Components for the variable model.\n */\n'use strict';\n\n/**\n * Components for the variable model.\n * @class\n */\ngoog.module('Blockly.VariableModel');\n\nconst eventUtils = goog.require('Blockly.Events.utils');\nconst idGenerator = goog.require('Blockly.utils.idGenerator');\n/* eslint-disable-next-line no-unused-vars */\nconst {Workspace} = goog.requireType('Blockly.Workspace');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.Events.VarCreate');\n\n\n/**\n * Class for a variable model.\n * Holds information for the variable including name, ID, and type.\n * @see {Blockly.FieldVariable}\n * @alias Blockly.VariableModel\n */\nclass VariableModel {\n  /**\n   * @param {!Workspace} workspace The variable's workspace.\n   * @param {string} name The name of the variable.  This is the user-visible\n   *     name (e.g. 'my var' or '私の変数'), not the generated name.\n   * @param {string=} opt_type The type of the variable like 'int' or 'string'.\n   *     Does not need to be unique. Field_variable can filter variables based\n   * on their type. This will default to '' which is a specific type.\n   * @param {string=} opt_id The unique ID of the variable. This will default to\n   *     a UUID.\n   */\n  constructor(workspace, name, opt_type, opt_id) {\n    /**\n     * The workspace the variable is in.\n     * @type {!Workspace}\n     */\n    this.workspace = workspace;\n\n    /**\n     * The name of the variable, typically defined by the user.  It may be\n     * changed by the user.\n     * @type {string}\n     */\n    this.name = name;\n\n    /**\n     * The type of the variable, such as 'int' or 'sound_effect'. This may be\n     * used to build a list of variables of a specific type. By default this is\n     * the empty string '', which is a specific type.\n     * @see {Blockly.FieldVariable}\n     * @type {string}\n     */\n    this.type = opt_type || '';\n\n    /**\n     * A unique ID for the variable. This should be defined at creation and\n     * not change, even if the name changes. In most cases this should be a\n     * UUID.\n     * @type {string}\n     * @private\n     */\n    this.id_ = opt_id || idGenerator.genUid();\n\n    eventUtils.fire(new (eventUtils.get(eventUtils.VAR_CREATE))(this));\n  }\n  /**\n   * @return {string} The ID for the variable.\n   */\n  getId() {\n    return this.id_;\n  }\n  /**\n   * A custom compare function for the VariableModel objects.\n   * @param {VariableModel} var1 First variable to compare.\n   * @param {VariableModel} var2 Second variable to compare.\n   * @return {number} -1 if name of var1 is less than name of var2, 0 if equal,\n   *     and 1 if greater.\n   * @package\n   */\n  static compareByName(var1, var2) {\n    return var1.name.localeCompare(var2.name, undefined, {sensitivity: 'base'});\n  }\n}\n\nexports.VariableModel = VariableModel;\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Utility functions for handling variables.\n */\n'use strict';\n\n/**\n * Utility functions for handling variables.\n * @namespace Blockly.Variables\n */\ngoog.module('Blockly.Variables');\n\nconst Xml = goog.require('Blockly.Xml');\nconst dialog = goog.require('Blockly.dialog');\nconst utilsXml = goog.require('Blockly.utils.xml');\nconst {Blocks} = goog.require('Blockly.blocks');\nconst {Msg} = goog.require('Blockly.Msg');\nconst {VariableModel} = goog.require('Blockly.VariableModel');\n/* eslint-disable-next-line no-unused-vars */\nconst {Workspace} = goog.requireType('Blockly.Workspace');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceSvg} = goog.requireType('Blockly.WorkspaceSvg');\n\n/**\n * String for use in the \"custom\" attribute of a category in toolbox XML.\n * This string indicates that the category should be dynamically populated with\n * variable blocks.\n * See also Blockly.Procedures.CATEGORY_NAME and\n * Blockly.VariablesDynamic.CATEGORY_NAME.\n * @const {string}\n * @alias Blockly.Variables.CATEGORY_NAME\n */\nconst CATEGORY_NAME = 'VARIABLE';\nexports.CATEGORY_NAME = CATEGORY_NAME;\n\n/**\n * Find all user-created variables that are in use in the workspace.\n * For use by generators.\n * To get a list of all variables on a workspace, including unused variables,\n * call Workspace.getAllVariables.\n * @param {!Workspace} ws The workspace to search for variables.\n * @return {!Array<!VariableModel>} Array of variable models.\n * @alias Blockly.Variables.allUsedVarModels\n */\nconst allUsedVarModels = function(ws) {\n  const blocks = ws.getAllBlocks(false);\n  const variableHash = Object.create(null);\n  // Iterate through every block and add each variable to the hash.\n  for (let i = 0; i < blocks.length; i++) {\n    const blockVariables = blocks[i].getVarModels();\n    if (blockVariables) {\n      for (let j = 0; j < blockVariables.length; j++) {\n        const variable = blockVariables[j];\n        const id = variable.getId();\n        if (id) {\n          variableHash[id] = variable;\n        }\n      }\n    }\n  }\n  // Flatten the hash into a list.\n  const variableList = [];\n  for (const id in variableHash) {\n    variableList.push(variableHash[id]);\n  }\n  return variableList;\n};\nexports.allUsedVarModels = allUsedVarModels;\n\n/**\n * @type {Object<string,boolean>}\n */\nconst ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE = {};\n\n/**\n * Find all developer variables used by blocks in the workspace.\n * Developer variables are never shown to the user, but are declared as global\n * variables in the generated code.\n * To declare developer variables, define the getDeveloperVariables function on\n * your block and return a list of variable names.\n * For use by generators.\n * @param {!Workspace} workspace The workspace to search.\n * @return {!Array<string>} A list of non-duplicated variable names.\n * @alias Blockly.Variables.allDeveloperVariables\n */\nconst allDeveloperVariables = function(workspace) {\n  const blocks = workspace.getAllBlocks(false);\n  const variableHash = Object.create(null);\n  for (let i = 0, block; (block = blocks[i]); i++) {\n    let getDeveloperVariables = block.getDeveloperVariables;\n    if (!getDeveloperVariables && block.getDeveloperVars) {\n      // August 2018: getDeveloperVars() was deprecated and renamed\n      // getDeveloperVariables().\n      getDeveloperVariables = block.getDeveloperVars;\n      if (!ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE[block.type]) {\n        console.warn(\n            'Function getDeveloperVars() deprecated. Use ' +\n            'getDeveloperVariables() (block type \\'' + block.type + '\\')');\n        ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE[block.type] = true;\n      }\n    }\n    if (getDeveloperVariables) {\n      const devVars = getDeveloperVariables();\n      for (let j = 0; j < devVars.length; j++) {\n        variableHash[devVars[j]] = true;\n      }\n    }\n  }\n\n  // Flatten the hash into a list.\n  return Object.keys(variableHash);\n};\nexports.allDeveloperVariables = allDeveloperVariables;\n\n/**\n * Construct the elements (blocks and button) required by the flyout for the\n * variable category.\n * @param {!WorkspaceSvg} workspace The workspace containing variables.\n * @return {!Array<!Element>} Array of XML elements.\n * @alias Blockly.Variables.flyoutCategory\n */\nconst flyoutCategory = function(workspace) {\n  let xmlList = [];\n  const button = document.createElement('button');\n  button.setAttribute('text', '%{BKY_NEW_VARIABLE}');\n  button.setAttribute('callbackKey', 'CREATE_VARIABLE');\n\n  workspace.registerButtonCallback('CREATE_VARIABLE', function(button) {\n    createVariableButtonHandler(button.getTargetWorkspace());\n  });\n\n  xmlList.push(button);\n\n  const blockList = flyoutCategoryBlocks(workspace);\n  xmlList = xmlList.concat(blockList);\n  return xmlList;\n};\nexports.flyoutCategory = flyoutCategory;\n\n/**\n * Construct the blocks required by the flyout for the variable category.\n * @param {!Workspace} workspace The workspace containing variables.\n * @return {!Array<!Element>} Array of XML block elements.\n * @alias Blockly.Variables.flyoutCategoryBlocks\n */\nconst flyoutCategoryBlocks = function(workspace) {\n  const variableModelList = workspace.getVariablesOfType('');\n\n  const xmlList = [];\n  if (variableModelList.length > 0) {\n    // New variables are added to the end of the variableModelList.\n    const mostRecentVariable = variableModelList[variableModelList.length - 1];\n    if (Blocks['variables_set']) {\n      const block = utilsXml.createElement('block');\n      block.setAttribute('type', 'variables_set');\n      block.setAttribute('gap', Blocks['math_change'] ? 8 : 24);\n      block.appendChild(generateVariableFieldDom(mostRecentVariable));\n      xmlList.push(block);\n    }\n    if (Blocks['math_change']) {\n      const block = utilsXml.createElement('block');\n      block.setAttribute('type', 'math_change');\n      block.setAttribute('gap', Blocks['variables_get'] ? 20 : 8);\n      block.appendChild(generateVariableFieldDom(mostRecentVariable));\n      const value = Xml.textToDom(\n          '<value name=\"DELTA\">' +\n          '<shadow type=\"math_number\">' +\n          '<field name=\"NUM\">1</field>' +\n          '</shadow>' +\n          '</value>');\n      block.appendChild(value);\n      xmlList.push(block);\n    }\n\n    if (Blocks['variables_get']) {\n      variableModelList.sort(VariableModel.compareByName);\n      for (let i = 0, variable; (variable = variableModelList[i]); i++) {\n        const block = utilsXml.createElement('block');\n        block.setAttribute('type', 'variables_get');\n        block.setAttribute('gap', 8);\n        block.appendChild(generateVariableFieldDom(variable));\n        xmlList.push(block);\n      }\n    }\n  }\n  return xmlList;\n};\nexports.flyoutCategoryBlocks = flyoutCategoryBlocks;\n\n/**\n * @alias Blockly.Variables.VAR_LETTER_OPTIONS\n */\nconst VAR_LETTER_OPTIONS = 'ijkmnopqrstuvwxyzabcdefgh';  // No 'l'.\nexports.VAR_LETTER_OPTIONS = VAR_LETTER_OPTIONS;\n\n/**\n * Return a new variable name that is not yet being used. This will try to\n * generate single letter variable names in the range 'i' to 'z' to start with.\n * If no unique name is located it will try 'i' to 'z', 'a' to 'h',\n * then 'i2' to 'z2' etc.  Skip 'l'.\n * @param {!Workspace} workspace The workspace to be unique in.\n * @return {string} New variable name.\n * @alias Blockly.Variables.generateUniqueName\n */\nconst generateUniqueName = function(workspace) {\n  return generateUniqueNameFromOptions(\n      VAR_LETTER_OPTIONS.charAt(0), workspace.getAllVariableNames());\n};\nexports.generateUniqueName = generateUniqueName;\n\n/**\n * Returns a unique name that is not present in the usedNames array. This\n * will try to generate single letter names in the range a -> z (skip l). It\n * will start with the character passed to startChar.\n * @param {string} startChar The character to start the search at.\n * @param {!Array<string>} usedNames A list of all of the used names.\n * @return {string} A unique name that is not present in the usedNames array.\n * @alias Blockly.Variables.generateUniqueNameFromOptions\n */\nconst generateUniqueNameFromOptions = function(startChar, usedNames) {\n  if (!usedNames.length) {\n    return startChar;\n  }\n\n  const letters = VAR_LETTER_OPTIONS;\n  let suffix = '';\n  let letterIndex = letters.indexOf(startChar);\n  let potName = startChar;\n\n  // eslint-disable-next-line no-constant-condition\n  while (true) {\n    let inUse = false;\n    for (let i = 0; i < usedNames.length; i++) {\n      if (usedNames[i].toLowerCase() === potName) {\n        inUse = true;\n        break;\n      }\n    }\n    if (!inUse) {\n      return potName;\n    }\n\n    letterIndex++;\n    if (letterIndex === letters.length) {\n      // Reached the end of the character sequence so back to 'i'.\n      letterIndex = 0;\n      suffix = Number(suffix) + 1;\n    }\n    potName = letters.charAt(letterIndex) + suffix;\n  }\n};\nexports.generateUniqueNameFromOptions = generateUniqueNameFromOptions;\n\n/**\n * Handles \"Create Variable\" button in the default variables toolbox category.\n * It will prompt the user for a variable name, including re-prompts if a name\n * is already in use among the workspace's variables.\n *\n * Custom button handlers can delegate to this function, allowing variables\n * types and after-creation processing. More complex customization (e.g.,\n * prompting for variable type) is beyond the scope of this function.\n *\n * @param {!Workspace} workspace The workspace on which to create the\n *     variable.\n * @param {function(?string=)=} opt_callback A callback. It will be passed an\n *     acceptable new variable name, or null if change is to be aborted (cancel\n *     button), or undefined if an existing variable was chosen.\n * @param {string=} opt_type The type of the variable like 'int', 'string', or\n *     ''. This will default to '', which is a specific type.\n * @alias Blockly.Variables.createVariableButtonHandler\n */\nconst createVariableButtonHandler = function(\n    workspace, opt_callback, opt_type) {\n  const type = opt_type || '';\n  // This function needs to be named so it can be called recursively.\n  const promptAndCheckWithAlert = function(defaultName) {\n    promptName(Msg['NEW_VARIABLE_TITLE'], defaultName, function(text) {\n      if (text) {\n        const existing = nameUsedWithAnyType(text, workspace);\n        if (existing) {\n          let msg;\n          if (existing.type === type) {\n            msg = Msg['VARIABLE_ALREADY_EXISTS'].replace('%1', existing.name);\n          } else {\n            msg = Msg['VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE'];\n            msg = msg.replace('%1', existing.name).replace('%2', existing.type);\n          }\n          dialog.alert(msg, function() {\n            promptAndCheckWithAlert(text);  // Recurse\n          });\n        } else {\n          // No conflict\n          workspace.createVariable(text, type);\n          if (opt_callback) {\n            opt_callback(text);\n          }\n        }\n      } else {\n        // User canceled prompt.\n        if (opt_callback) {\n          opt_callback(null);\n        }\n      }\n    });\n  };\n  promptAndCheckWithAlert('');\n};\nexports.createVariableButtonHandler = createVariableButtonHandler;\n\n/**\n * Opens a prompt that allows the user to enter a new name for a variable.\n * Triggers a rename if the new name is valid. Or re-prompts if there is a\n * collision.\n * @param {!Workspace} workspace The workspace on which to rename the\n *     variable.\n * @param {!VariableModel} variable Variable to rename.\n * @param {function(?string=)=} opt_callback A callback. It will\n *     be passed an acceptable new variable name, or null if change is to be\n *     aborted (cancel button), or undefined if an existing variable was chosen.\n * @alias Blockly.Variables.renameVariable\n */\nconst renameVariable = function(workspace, variable, opt_callback) {\n  // This function needs to be named so it can be called recursively.\n  const promptAndCheckWithAlert = function(defaultName) {\n    const promptText =\n        Msg['RENAME_VARIABLE_TITLE'].replace('%1', variable.name);\n    promptName(promptText, defaultName, function(newName) {\n      if (newName) {\n        const existing =\n            nameUsedWithOtherType(newName, variable.type, workspace);\n        if (existing) {\n          const msg = Msg['VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE']\n                          .replace('%1', existing.name)\n                          .replace('%2', existing.type);\n          dialog.alert(msg, function() {\n            promptAndCheckWithAlert(newName);  // Recurse\n          });\n        } else {\n          workspace.renameVariableById(variable.getId(), newName);\n          if (opt_callback) {\n            opt_callback(newName);\n          }\n        }\n      } else {\n        // User canceled prompt.\n        if (opt_callback) {\n          opt_callback(null);\n        }\n      }\n    });\n  };\n  promptAndCheckWithAlert('');\n};\nexports.renameVariable = renameVariable;\n\n/**\n * Prompt the user for a new variable name.\n * @param {string} promptText The string of the prompt.\n * @param {string} defaultText The default value to show in the prompt's field.\n * @param {function(?string)} callback A callback. It will return the new\n *     variable name, or null if the user picked something illegal.\n * @alias Blockly.Variables.promptName\n */\nconst promptName = function(promptText, defaultText, callback) {\n  dialog.prompt(promptText, defaultText, function(newVar) {\n    // Merge runs of whitespace.  Strip leading and trailing whitespace.\n    // Beyond this, all names are legal.\n    if (newVar) {\n      newVar = newVar.replace(/[\\s\\xa0]+/g, ' ').trim();\n      if (newVar === Msg['RENAME_VARIABLE'] || newVar === Msg['NEW_VARIABLE']) {\n        // Ok, not ALL names are legal...\n        newVar = null;\n      }\n    }\n    callback(newVar);\n  });\n};\nexports.promptName = promptName;\n\n/**\n * Check whether there exists a variable with the given name but a different\n * type.\n * @param {string} name The name to search for.\n * @param {string} type The type to exclude from the search.\n * @param {!Workspace} workspace The workspace to search for the\n *     variable.\n * @return {?VariableModel} The variable with the given name and a\n *     different type, or null if none was found.\n */\nconst nameUsedWithOtherType = function(name, type, workspace) {\n  const allVariables = workspace.getVariableMap().getAllVariables();\n\n  name = name.toLowerCase();\n  for (let i = 0, variable; (variable = allVariables[i]); i++) {\n    if (variable.name.toLowerCase() === name && variable.type !== type) {\n      return variable;\n    }\n  }\n  return null;\n};\n\n/**\n * Check whether there exists a variable with the given name of any type.\n * @param {string} name The name to search for.\n * @param {!Workspace} workspace The workspace to search for the\n *     variable.\n * @return {?VariableModel} The variable with the given name,\n *     or null if none was found.\n * @alias Blockly.Variables.nameUsedWithAnyType\n */\nconst nameUsedWithAnyType = function(name, workspace) {\n  const allVariables = workspace.getVariableMap().getAllVariables();\n\n  name = name.toLowerCase();\n  for (let i = 0, variable; (variable = allVariables[i]); i++) {\n    if (variable.name.toLowerCase() === name) {\n      return variable;\n    }\n  }\n  return null;\n};\nexports.nameUsedWithAnyType = nameUsedWithAnyType;\n\n/**\n * Generate DOM objects representing a variable field.\n * @param {!VariableModel} variableModel The variable model to\n *     represent.\n * @return {?Element} The generated DOM.\n * @alias Blockly.Variables.generateVariableFieldDom\n */\nconst generateVariableFieldDom = function(variableModel) {\n  /* Generates the following XML:\n   * <field name=\"VAR\" id=\"goKTKmYJ8DhVHpruv\" variabletype=\"int\">foo</field>\n   */\n  const field = utilsXml.createElement('field');\n  field.setAttribute('name', 'VAR');\n  field.setAttribute('id', variableModel.getId());\n  field.setAttribute('variabletype', variableModel.type);\n  const name = utilsXml.createTextNode(variableModel.name);\n  field.appendChild(name);\n  return field;\n};\nexports.generateVariableFieldDom = generateVariableFieldDom;\n\n/**\n * Helper function to look up or create a variable on the given workspace.\n * If no variable exists, creates and returns it.\n * @param {!Workspace} workspace The workspace to search for the\n *     variable.  It may be a flyout workspace or main workspace.\n * @param {?string} id The ID to use to look up or create the variable, or null.\n * @param {string=} opt_name The string to use to look up or create the\n *     variable.\n * @param {string=} opt_type The type to use to look up or create the variable.\n * @return {!VariableModel} The variable corresponding to the given ID\n *     or name + type combination.\n * @alias Blockly.Variables.getOrCreateVariablePackage\n */\nconst getOrCreateVariablePackage = function(workspace, id, opt_name, opt_type) {\n  let variable = getVariable(workspace, id, opt_name, opt_type);\n  if (!variable) {\n    variable = createVariable(workspace, id, opt_name, opt_type);\n  }\n  return variable;\n};\nexports.getOrCreateVariablePackage = getOrCreateVariablePackage;\n\n/**\n * Look up  a variable on the given workspace.\n * Always looks in the main workspace before looking in the flyout workspace.\n * Always prefers lookup by ID to lookup by name + type.\n * @param {!Workspace} workspace The workspace to search for the\n *     variable.  It may be a flyout workspace or main workspace.\n * @param {?string} id The ID to use to look up the variable, or null.\n * @param {string=} opt_name The string to use to look up the variable.\n *     Only used if lookup by ID fails.\n * @param {string=} opt_type The type to use to look up the variable.\n *     Only used if lookup by ID fails.\n * @return {?VariableModel} The variable corresponding to the given ID\n *     or name + type combination, or null if not found.\n * @alias Blockly.Variables.getVariable\n */\nconst getVariable = function(workspace, id, opt_name, opt_type) {\n  const potentialVariableMap = workspace.getPotentialVariableMap();\n  let variable = null;\n  // Try to just get the variable, by ID if possible.\n  if (id) {\n    // Look in the real variable map before checking the potential variable map.\n    variable = workspace.getVariableById(id);\n    if (!variable && potentialVariableMap) {\n      variable = potentialVariableMap.getVariableById(id);\n    }\n    if (variable) {\n      return variable;\n    }\n  }\n  // If there was no ID, or there was an ID but it didn't match any variables,\n  // look up by name and type.\n  if (opt_name) {\n    if (opt_type === undefined) {\n      throw Error('Tried to look up a variable by name without a type');\n    }\n    // Otherwise look up by name and type.\n    variable = workspace.getVariable(opt_name, opt_type);\n    if (!variable && potentialVariableMap) {\n      variable = potentialVariableMap.getVariable(opt_name, opt_type);\n    }\n  }\n  return variable;\n};\nexports.getVariable = getVariable;\n\n/**\n * Helper function to create a variable on the given workspace.\n * @param {!Workspace} workspace The workspace in which to create the\n * variable.  It may be a flyout workspace or main workspace.\n * @param {?string} id The ID to use to create the variable, or null.\n * @param {string=} opt_name The string to use to create the variable.\n * @param {string=} opt_type The type to use to create the variable.\n * @return {!VariableModel} The variable corresponding to the given ID\n *     or name + type combination.\n */\nconst createVariable = function(workspace, id, opt_name, opt_type) {\n  const potentialVariableMap = workspace.getPotentialVariableMap();\n  // Variables without names get uniquely named for this workspace.\n  if (!opt_name) {\n    const ws =\n        /** @type {!Workspace} */ (\n            workspace.isFlyout ?\n                /** @type {!WorkspaceSvg} */ (workspace).targetWorkspace :\n                workspace);\n    // Must call version on exports to allow for mocking in tests. See #5321\n    opt_name = exports.generateUniqueName(ws);\n  }\n\n  // Create a potential variable if in the flyout.\n  let variable = null;\n  if (potentialVariableMap) {\n    variable = potentialVariableMap.createVariable(opt_name, opt_type, id);\n  } else {  // In the main workspace, create a real variable.\n    variable = workspace.createVariable(opt_name, opt_type, id);\n  }\n  return variable;\n};\n\n/**\n * Helper function to get the list of variables that have been added to the\n * workspace after adding a new block, using the given list of variables that\n * were in the workspace before the new block was added.\n * @param {!Workspace} workspace The workspace to inspect.\n * @param {!Array<!VariableModel>} originalVariables The array of\n *     variables that existed in the workspace before adding the new block.\n * @return {!Array<!VariableModel>} The new array of variables that\n *     were freshly added to the workspace after creating the new block,\n *     or [] if no new variables were added to the workspace.\n * @alias Blockly.Variables.getAddedVariables\n * @package\n */\nconst getAddedVariables = function(workspace, originalVariables) {\n  const allCurrentVariables = workspace.getAllVariables();\n  const addedVariables = [];\n  if (originalVariables.length !== allCurrentVariables.length) {\n    for (let i = 0; i < allCurrentVariables.length; i++) {\n      const variable = allCurrentVariables[i];\n      // For any variable that is present in allCurrentVariables but not\n      // present in originalVariables, add the variable to addedVariables.\n      if (originalVariables.indexOf(variable) === -1) {\n        addedVariables.push(variable);\n      }\n    }\n  }\n  return addedVariables;\n};\nexports.getAddedVariables = getAddedVariables;\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Utility functions for handling variable and procedure names.\n */\n'use strict';\n\n/**\n * Utility functions for handling variable and procedure names.\n * @class\n */\ngoog.module('Blockly.Names');\n\nconst Variables = goog.require('Blockly.Variables');\nconst {Msg} = goog.require('Blockly.Msg');\n/* eslint-disable-next-line no-unused-vars */\nconst {VariableMap} = goog.requireType('Blockly.VariableMap');\n/* eslint-disable-next-line no-unused-vars */\nconst {Workspace} = goog.requireType('Blockly.Workspace');\n/** @suppress {extraRequire} */\ngoog.requireType('Blockly.Procedures');\n\n\n/**\n * Class for a database of entity names (variables, procedures, etc).\n * @alias Blockly.Names\n */\nconst Names = class {\n  /**\n   * @param {string} reservedWords A comma-separated string of words that are\n   *     illegal for use as names in a language (e.g. 'new,if,this,...').\n   * @param {string=} opt_variablePrefix Some languages need a '$' or a\n   *     namespace before all variable names (but not procedure names).\n   */\n  constructor(reservedWords, opt_variablePrefix) {\n    /**\n     * The prefix to attach to variable names in generated code.\n     * @type {string}\n     * @private\n     */\n    this.variablePrefix_ = opt_variablePrefix || '';\n\n    /**\n     * A dictionary of reserved words.\n     * @type {Object}\n     * @private\n     */\n    this.reservedDict_ = Object.create(null);\n\n    /**\n     * A map from type (e.g. name, procedure) to maps from names to generated\n     * names.\n     * @type {Object<string, Object<string, string>>}\n     * @private\n     */\n    this.db_ = Object.create(null);\n\n    /**\n     * A map from used names to booleans to avoid collisions.\n     * @type {Object<string, boolean>}\n     * @private\n     */\n    this.dbReverse_ = Object.create(null);\n\n    /**\n     * The variable map from the workspace, containing Blockly variable models.\n     * @type {?VariableMap}\n     * @private\n     */\n    this.variableMap_ = null;\n\n    if (reservedWords) {\n      const splitWords = reservedWords.split(',');\n      for (let i = 0; i < splitWords.length; i++) {\n        this.reservedDict_[splitWords[i]] = true;\n      }\n    }\n    this.reset();\n  }\n\n  /**\n   * Empty the database and start from scratch.  The reserved words are kept.\n   */\n  reset() {\n    this.db_ = Object.create(null);\n    this.dbReverse_ = Object.create(null);\n    this.variableMap_ = null;\n  }\n\n  /**\n   * Set the variable map that maps from variable name to variable object.\n   * @param {!VariableMap} map The map to track.\n   */\n  setVariableMap(map) {\n    this.variableMap_ = map;\n  }\n\n  /**\n   * Get the name for a user-defined variable, based on its ID.\n   * This should only be used for variables of NameType VARIABLE.\n   * @param {string} id The ID to look up in the variable map.\n   * @return {?string} The name of the referenced variable, or null if there was\n   *     no variable map or the variable was not found in the map.\n   * @private\n   */\n  getNameForUserVariable_(id) {\n    if (!this.variableMap_) {\n      console.warn(\n          'Deprecated call to Names.prototype.getName without ' +\n          'defining a variable map. To fix, add the following code in your ' +\n          'generator\\'s init() function:\\n' +\n          'Blockly.YourGeneratorName.nameDB_.setVariableMap(' +\n          'workspace.getVariableMap());');\n      return null;\n    }\n    const variable = this.variableMap_.getVariableById(id);\n    if (variable) {\n      return variable.name;\n    }\n    return null;\n  }\n\n  /**\n   * Generate names for user variables, but only ones that are being used.\n   * @param {!Workspace} workspace Workspace to generate variables from.\n   */\n  populateVariables(workspace) {\n    const variables = Variables.allUsedVarModels(workspace);\n    for (let i = 0; i < variables.length; i++) {\n      this.getName(variables[i].getId(), NameType.VARIABLE);\n    }\n  }\n\n  /**\n   * Generate names for procedures.\n   * @param {!Workspace} workspace Workspace to generate procedures from.\n   */\n  populateProcedures(workspace) {\n    let procedures =\n        goog.module.get('Blockly.Procedures').allProcedures(workspace);\n    // Flatten the return vs no-return procedure lists.\n    procedures = procedures[0].concat(procedures[1]);\n    for (let i = 0; i < procedures.length; i++) {\n      this.getName(procedures[i][0], NameType.PROCEDURE);\n    }\n  }\n\n  /**\n   * Convert a Blockly entity name to a legal exportable entity name.\n   * @param {string} nameOrId The Blockly entity name (no constraints) or\n   *     variable ID.\n   * @param {NameType|string} type The type of the name in Blockly\n   *     ('VARIABLE', 'PROCEDURE', 'DEVELOPER_VARIABLE', etc...).\n   * @return {string} An entity name that is legal in the exported language.\n   */\n  getName(nameOrId, type) {\n    let name = nameOrId;\n    if (type === NameType.VARIABLE) {\n      const varName = this.getNameForUserVariable_(nameOrId);\n      if (varName) {\n        // Successful ID lookup.\n        name = varName;\n      }\n    }\n    const normalizedName = name.toLowerCase();\n\n    const isVar =\n        type === NameType.VARIABLE || type === NameType.DEVELOPER_VARIABLE;\n\n    const prefix = isVar ? this.variablePrefix_ : '';\n    if (!(type in this.db_)) {\n      this.db_[type] = Object.create(null);\n    }\n    const typeDb = this.db_[type];\n    if (normalizedName in typeDb) {\n      return prefix + typeDb[normalizedName];\n    }\n    const safeName = this.getDistinctName(name, type);\n    typeDb[normalizedName] = safeName.substr(prefix.length);\n    return safeName;\n  }\n\n  /**\n   * Return a list of all known user-created names of a specified name type.\n   * @param {NameType|string} type The type of entity in Blockly\n   *     ('VARIABLE', 'PROCEDURE', 'DEVELOPER_VARIABLE', etc...).\n   * @return {!Array<string>} A list of Blockly entity names (no constraints).\n   */\n  getUserNames(type) {\n    const typeDb = this.db_[type] || {};\n    return Object.keys(typeDb);\n  }\n\n  /**\n   * Convert a Blockly entity name to a legal exportable entity name.\n   * Ensure that this is a new name not overlapping any previously defined name.\n   * Also check against list of reserved words for the current language and\n   * ensure name doesn't collide.\n   * @param {string} name The Blockly entity name (no constraints).\n   * @param {NameType|string} type The type of entity in Blockly\n   *     ('VARIABLE', 'PROCEDURE', 'DEVELOPER_VARIABLE', etc...).\n   * @return {string} An entity name that is legal in the exported language.\n   */\n  getDistinctName(name, type) {\n    let safeName = this.safeName_(name);\n    let i = '';\n    while (this.dbReverse_[safeName + i] ||\n           (safeName + i) in this.reservedDict_) {\n      // Collision with existing name.  Create a unique name.\n      i = i ? i + 1 : 2;\n    }\n    safeName += i;\n    this.dbReverse_[safeName] = true;\n    const isVar =\n        type === NameType.VARIABLE || type === NameType.DEVELOPER_VARIABLE;\n    const prefix = isVar ? this.variablePrefix_ : '';\n    return prefix + safeName;\n  }\n\n  /**\n   * Given a proposed entity name, generate a name that conforms to the\n   * [_A-Za-z][_A-Za-z0-9]* format that most languages consider legal for\n   * variable and function names.\n   * @param {string} name Potentially illegal entity name.\n   * @return {string} Safe entity name.\n   * @private\n   */\n  safeName_(name) {\n    if (!name) {\n      name = Msg['UNNAMED_KEY'] || 'unnamed';\n    } else {\n      // Unfortunately names in non-latin characters will look like\n      // _E9_9F_B3_E4_B9_90 which is pretty meaningless.\n      // https://github.com/google/blockly/issues/1654\n      name = encodeURI(name.replace(/ /g, '_')).replace(/[^\\w]/g, '_');\n      // Most languages don't allow names with leading numbers.\n      if ('0123456789'.indexOf(name[0]) !== -1) {\n        name = 'my_' + name;\n      }\n    }\n    return name;\n  }\n\n  /**\n   * Do the given two entity names refer to the same entity?\n   * Blockly names are case-insensitive.\n   * @param {string} name1 First name.\n   * @param {string} name2 Second name.\n   * @return {boolean} True if names are the same.\n   */\n  static equals(name1, name2) {\n    // name1.localeCompare(name2) is slower.\n    return name1.toLowerCase() === name2.toLowerCase();\n  }\n};\n\n/**\n * Enum for the type of a name. Different name types may have different rules\n * about collisions.\n * When JavaScript (or most other languages) is generated, variable 'foo' and\n * procedure 'foo' would collide.  However, Blockly has no such problems since\n * variable get 'foo' and procedure call 'foo' are unambiguous.\n * Therefore, Blockly keeps a separate name type to disambiguate.\n * getName('foo', 'VARIABLE') -> 'foo'\n * getName('foo', 'PROCEDURE') -> 'foo2'\n * @enum { string }\n * @alias Blockly.Names.NameType\n */\nconst NameType = {\n  DEVELOPER_VARIABLE: 'DEVELOPER_VARIABLE',\n  VARIABLE: 'VARIABLE',\n  PROCEDURE: 'PROCEDURE',\n};\nexports.NameType = NameType;\n\n// We have to export NameType here so that it is accessible under the old name\n// `Blockly.Names.NameType`\nNames.NameType = NameType;\n\n/**\n * Constant to separate developer variable names from user-defined variable\n * names when running generators.\n * A developer variable will be declared as a global in the generated code, but\n * will never be shown to the user in the workspace or stored in the variable\n * map.\n */\nNames.DEVELOPER_VARIABLE_TYPE = NameType.DEVELOPER_VARIABLE;\n\nexports.Names = Names;\n","/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Classes for all types of variable events.\n */\n'use strict';\n\n/**\n * Classes for all types of variable events.\n * @class\n */\ngoog.module('Blockly.Events.VarDelete');\n\nconst eventUtils = goog.require('Blockly.Events.utils');\nconst registry = goog.require('Blockly.registry');\nconst {VarBase} = goog.require('Blockly.Events.VarBase');\n/* eslint-disable-next-line no-unused-vars */\nconst {VariableModel} = goog.requireType('Blockly.VariableModel');\n\n\n/**\n * Class for a variable deletion event.\n * @extends {VarBase}\n * @alias Blockly.Events.VarDelete\n */\nclass VarDelete extends VarBase {\n  /**\n   * @param {!VariableModel=} opt_variable The deleted variable. Undefined\n   *     for a blank event.\n   */\n  constructor(opt_variable) {\n    super(opt_variable);\n\n    /**\n     * Type of this event.\n     * @type {string}\n     */\n    this.type = eventUtils.VAR_DELETE;\n\n    if (!opt_variable) {\n      return;  // Blank event to be populated by fromJson.\n    }\n\n    this.varType = opt_variable.type;\n    this.varName = opt_variable.name;\n  }\n\n  /**\n   * Encode the event as JSON.\n   * @return {!Object} JSON representation.\n   */\n  toJson() {\n    const json = super.toJson();\n    json['varType'] = this.varType;\n    json['varName'] = this.varName;\n    return json;\n  }\n\n  /**\n   * Decode the JSON event.\n   * @param {!Object} json JSON representation.\n   */\n  fromJson(json) {\n    super.fromJson(json);\n    this.varType = json['varType'];\n    this.varName = json['varName'];\n  }\n\n  /**\n   * Run a variable deletion event.\n   * @param {boolean} forward True if run forward, false if run backward (undo).\n   */\n  run(forward) {\n    const workspace = this.getEventWorkspace_();\n    if (forward) {\n      workspace.deleteVariableById(this.varId);\n    } else {\n      workspace.createVariable(this.varName, this.varType, this.varId);\n    }\n  }\n}\n\nregistry.register(registry.Type.EVENT, eventUtils.VAR_DELETE, VarDelete);\n\nexports.VarDelete = VarDelete;\n","/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Class for a variable rename event.\n */\n'use strict';\n\n/**\n * Class for a variable rename event.\n * @class\n */\ngoog.module('Blockly.Events.VarRename');\n\nconst eventUtils = goog.require('Blockly.Events.utils');\nconst registry = goog.require('Blockly.registry');\nconst {VarBase} = goog.require('Blockly.Events.VarBase');\n/* eslint-disable-next-line no-unused-vars */\nconst {VariableModel} = goog.requireType('Blockly.VariableModel');\n\n\n/**\n * Class for a variable rename event.\n * @extends {VarBase}\n * @alias Blockly.Events.VarRename\n */\nclass VarRename extends VarBase {\n  /**\n   * @param {!VariableModel=} opt_variable The renamed variable. Undefined\n   *     for a blank event.\n   * @param {string=} newName The new name the variable will be changed to.\n   */\n  constructor(opt_variable, newName) {\n    super(opt_variable);\n\n    /**\n     * Type of this event.\n     * @type {string}\n     */\n    this.type = eventUtils.VAR_RENAME;\n\n    if (!opt_variable) {\n      return;  // Blank event to be populated by fromJson.\n    }\n\n    this.oldName = opt_variable.name;\n    this.newName = typeof newName === 'undefined' ? '' : newName;\n  }\n\n  /**\n   * Encode the event as JSON.\n   * @return {!Object} JSON representation.\n   */\n  toJson() {\n    const json = super.toJson();\n    json['oldName'] = this.oldName;\n    json['newName'] = this.newName;\n    return json;\n  }\n\n  /**\n   * Decode the JSON event.\n   * @param {!Object} json JSON representation.\n   */\n  fromJson(json) {\n    super.fromJson(json);\n    this.oldName = json['oldName'];\n    this.newName = json['newName'];\n  }\n\n  /**\n   * Run a variable rename event.\n   * @param {boolean} forward True if run forward, false if run backward (undo).\n   */\n  run(forward) {\n    const workspace = this.getEventWorkspace_();\n    if (forward) {\n      workspace.renameVariableById(this.varId, this.newName);\n    } else {\n      workspace.renameVariableById(this.varId, this.oldName);\n    }\n  }\n}\n\nregistry.register(registry.Type.EVENT, eventUtils.VAR_RENAME, VarRename);\n\nexports.VarRename = VarRename;\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Object representing a map of variables and their types.\n */\n'use strict';\n\n/**\n * Object representing a map of variables and their types.\n * @class\n */\ngoog.module('Blockly.VariableMap');\n\nconst arrayUtils = goog.require('Blockly.utils.array');\nconst dialog = goog.require('Blockly.dialog');\nconst eventUtils = goog.require('Blockly.Events.utils');\nconst idGenerator = goog.require('Blockly.utils.idGenerator');\nconst object = goog.require('Blockly.utils.object');\n/* eslint-disable-next-line no-unused-vars */\nconst {Block} = goog.requireType('Blockly.Block');\nconst {Msg} = goog.require('Blockly.Msg');\nconst {Names} = goog.require('Blockly.Names');\nconst {VariableModel} = goog.require('Blockly.VariableModel');\n/* eslint-disable-next-line no-unused-vars */\nconst {Workspace} = goog.requireType('Blockly.Workspace');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.Events.VarDelete');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.Events.VarRename');\n\n\n/**\n * Class for a variable map.  This contains a dictionary data structure with\n * variable types as keys and lists of variables as values.  The list of\n * variables are the type indicated by the key.\n * @alias Blockly.VariableMap\n */\nclass VariableMap {\n  /**\n   * @param {!Workspace} workspace The workspace this map belongs to.\n   */\n  constructor(workspace) {\n    /**\n     * A map from variable type to list of variable names.  The lists contain\n     * all of the named variables in the workspace, including variables that are\n     * not currently in use.\n     * @type {!Object<string, !Array<VariableModel>>}\n     * @private\n     */\n    this.variableMap_ = Object.create(null);\n\n    /**\n     * The workspace this map belongs to.\n     * @type {!Workspace}\n     */\n    this.workspace = workspace;\n  }\n  /**\n   * Clear the variable map.\n   */\n  clear() {\n    this.variableMap_ = Object.create(null);\n  }\n  /* Begin functions for renaming variables. */\n  /**\n   * Rename the given variable by updating its name in the variable map.\n   * @param {!VariableModel} variable Variable to rename.\n   * @param {string} newName New variable name.\n   * @package\n   */\n  renameVariable(variable, newName) {\n    const type = variable.type;\n    const conflictVar = this.getVariable(newName, type);\n    const blocks = this.workspace.getAllBlocks(false);\n    eventUtils.setGroup(true);\n    try {\n      // The IDs may match if the rename is a simple case change (name1 ->\n      // Name1).\n      if (!conflictVar || conflictVar.getId() === variable.getId()) {\n        this.renameVariableAndUses_(variable, newName, blocks);\n      } else {\n        this.renameVariableWithConflict_(\n            variable, newName, conflictVar, blocks);\n      }\n    } finally {\n      eventUtils.setGroup(false);\n    }\n  }\n  /**\n   * Rename a variable by updating its name in the variable map. Identify the\n   * variable to rename with the given ID.\n   * @param {string} id ID of the variable to rename.\n   * @param {string} newName New variable name.\n   */\n  renameVariableById(id, newName) {\n    const variable = this.getVariableById(id);\n    if (!variable) {\n      throw Error('Tried to rename a variable that didn\\'t exist. ID: ' + id);\n    }\n\n    this.renameVariable(variable, newName);\n  }\n  /**\n   * Update the name of the given variable and refresh all references to it.\n   * The new name must not conflict with any existing variable names.\n   * @param {!VariableModel} variable Variable to rename.\n   * @param {string} newName New variable name.\n   * @param {!Array<!Block>} blocks The list of all blocks in the\n   *     workspace.\n   * @private\n   */\n  renameVariableAndUses_(variable, newName, blocks) {\n    eventUtils.fire(\n        new (eventUtils.get(eventUtils.VAR_RENAME))(variable, newName));\n    variable.name = newName;\n    for (let i = 0; i < blocks.length; i++) {\n      blocks[i].updateVarName(variable);\n    }\n  }\n  /**\n   * Update the name of the given variable to the same name as an existing\n   * variable.  The two variables are coalesced into a single variable with the\n   * ID of the existing variable that was already using newName. Refresh all\n   * references to the variable.\n   * @param {!VariableModel} variable Variable to rename.\n   * @param {string} newName New variable name.\n   * @param {!VariableModel} conflictVar The variable that was already\n   *     using newName.\n   * @param {!Array<!Block>} blocks The list of all blocks in the\n   *     workspace.\n   * @private\n   */\n  renameVariableWithConflict_(variable, newName, conflictVar, blocks) {\n    const type = variable.type;\n    const oldCase = conflictVar.name;\n\n    if (newName !== oldCase) {\n      // Simple rename to change the case and update references.\n      this.renameVariableAndUses_(conflictVar, newName, blocks);\n    }\n\n    // These blocks now refer to a different variable.\n    // These will fire change events.\n    for (let i = 0; i < blocks.length; i++) {\n      blocks[i].renameVarById(variable.getId(), conflictVar.getId());\n    }\n\n    // Finally delete the original variable, which is now unreferenced.\n    eventUtils.fire(new (eventUtils.get(eventUtils.VAR_DELETE))(variable));\n    // And remove it from the list.\n    arrayUtils.removeElem(this.variableMap_[type], variable);\n  }\n  /* End functions for renaming variables. */\n  /**\n   * Create a variable with a given name, optional type, and optional ID.\n   * @param {string} name The name of the variable. This must be unique across\n   *     variables and procedures.\n   * @param {?string=} opt_type The type of the variable like 'int' or 'string'.\n   *     Does not need to be unique. Field_variable can filter variables based\n   * on their type. This will default to '' which is a specific type.\n   * @param {?string=} opt_id The unique ID of the variable. This will default\n   *     to a UUID.\n   * @return {!VariableModel} The newly created variable.\n   */\n  createVariable(name, opt_type, opt_id) {\n    let variable = this.getVariable(name, opt_type);\n    if (variable) {\n      if (opt_id && variable.getId() !== opt_id) {\n        throw Error(\n            'Variable \"' + name + '\" is already in use and its id is \"' +\n            variable.getId() + '\" which conflicts with the passed in ' +\n            'id, \"' + opt_id + '\".');\n      }\n      // The variable already exists and has the same ID.\n      return variable;\n    }\n    if (opt_id && this.getVariableById(opt_id)) {\n      throw Error('Variable id, \"' + opt_id + '\", is already in use.');\n    }\n    const id = opt_id || idGenerator.genUid();\n    const type = opt_type || '';\n    variable = new VariableModel(this.workspace, name, type, id);\n\n    const variables = this.variableMap_[type] || [];\n    variables.push(variable);\n    // Delete the list of variables of this type, and re-add it so that\n    // the most recent addition is at the end.\n    // This is used so the toolbox's set block is set to the most recent\n    // variable.\n    delete this.variableMap_[type];\n    this.variableMap_[type] = variables;\n\n    return variable;\n  }\n  /* Begin functions for variable deletion. */\n  /**\n   * Delete a variable.\n   * @param {!VariableModel} variable Variable to delete.\n   */\n  deleteVariable(variable) {\n    const variableId = variable.getId();\n    const variableList = this.variableMap_[variable.type];\n    for (let i = 0; i < variableList.length; i++) {\n      const tempVar = variableList[i];\n      if (tempVar.getId() === variableId) {\n        variableList.splice(i, 1);\n        eventUtils.fire(new (eventUtils.get(eventUtils.VAR_DELETE))(variable));\n        return;\n      }\n    }\n  }\n  /**\n   * Delete a variables by the passed in ID and all of its uses from this\n   * workspace. May prompt the user for confirmation.\n   * @param {string} id ID of variable to delete.\n   */\n  deleteVariableById(id) {\n    const variable = this.getVariableById(id);\n    if (variable) {\n      // Check whether this variable is a function parameter before deleting.\n      const variableName = variable.name;\n      const uses = this.getVariableUsesById(id);\n      for (let i = 0, block; (block = uses[i]); i++) {\n        if (block.type === 'procedures_defnoreturn' ||\n            block.type === 'procedures_defreturn') {\n          const procedureName = String(block.getFieldValue('NAME'));\n          const deleteText = Msg['CANNOT_DELETE_VARIABLE_PROCEDURE']\n                                 .replace('%1', variableName)\n                                 .replace('%2', procedureName);\n          dialog.alert(deleteText);\n          return;\n        }\n      }\n\n      const map = this;\n      if (uses.length > 1) {\n        // Confirm before deleting multiple blocks.\n        const confirmText = Msg['DELETE_VARIABLE_CONFIRMATION']\n                                .replace('%1', String(uses.length))\n                                .replace('%2', variableName);\n        dialog.confirm(confirmText, function(ok) {\n          if (ok && variable) {\n            map.deleteVariableInternal(variable, uses);\n          }\n        });\n      } else {\n        // No confirmation necessary for a single block.\n        map.deleteVariableInternal(variable, uses);\n      }\n    } else {\n      console.warn('Can\\'t delete non-existent variable: ' + id);\n    }\n  }\n  /**\n   * Deletes a variable and all of its uses from this workspace without asking\n   * the user for confirmation.\n   * @param {!VariableModel} variable Variable to delete.\n   * @param {!Array<!Block>} uses An array of uses of the variable.\n   * @package\n   */\n  deleteVariableInternal(variable, uses) {\n    const existingGroup = eventUtils.getGroup();\n    if (!existingGroup) {\n      eventUtils.setGroup(true);\n    }\n    try {\n      for (let i = 0; i < uses.length; i++) {\n        uses[i].dispose(true);\n      }\n      this.deleteVariable(variable);\n    } finally {\n      if (!existingGroup) {\n        eventUtils.setGroup(false);\n      }\n    }\n  }\n  /* End functions for variable deletion. */\n  /**\n   * Find the variable by the given name and type and return it.  Return null if\n   *     it is not found.\n   * @param {string} name The name to check for.\n   * @param {?string=} opt_type The type of the variable.  If not provided it\n   *     defaults to the empty string, which is a specific type.\n   * @return {?VariableModel} The variable with the given name, or null if\n   *     it was not found.\n   */\n  getVariable(name, opt_type) {\n    const type = opt_type || '';\n    const list = this.variableMap_[type];\n    if (list) {\n      for (let j = 0, variable; (variable = list[j]); j++) {\n        if (Names.equals(variable.name, name)) {\n          return variable;\n        }\n      }\n    }\n    return null;\n  }\n  /**\n   * Find the variable by the given ID and return it.  Return null if not found.\n   * @param {string} id The ID to check for.\n   * @return {?VariableModel} The variable with the given ID.\n   */\n  getVariableById(id) {\n    const keys = Object.keys(this.variableMap_);\n    for (let i = 0; i < keys.length; i++) {\n      const key = keys[i];\n      for (let j = 0, variable; (variable = this.variableMap_[key][j]); j++) {\n        if (variable.getId() === id) {\n          return variable;\n        }\n      }\n    }\n    return null;\n  }\n  /**\n   * Get a list containing all of the variables of a specified type. If type is\n   *     null, return list of variables with empty string type.\n   * @param {?string} type Type of the variables to find.\n   * @return {!Array<!VariableModel>} The sought after variables of the\n   *     passed in type. An empty array if none are found.\n   */\n  getVariablesOfType(type) {\n    type = type || '';\n    const variableList = this.variableMap_[type];\n    if (variableList) {\n      return variableList.slice();\n    }\n    return [];\n  }\n  /**\n   * Return all variable and potential variable types.  This list always\n   * contains the empty string.\n   * @param {?Workspace} ws The workspace used to look for potential\n   * variables. This can be different than the workspace stored on this object\n   * if the passed in ws is a flyout workspace.\n   * @return {!Array<string>} List of variable types.\n   * @package\n   */\n  getVariableTypes(ws) {\n    const variableMap = {};\n    object.mixin(variableMap, this.variableMap_);\n    if (ws && ws.getPotentialVariableMap()) {\n      object.mixin(variableMap, ws.getPotentialVariableMap().variableMap_);\n    }\n    const types = Object.keys(variableMap);\n    let hasEmpty = false;\n    for (let i = 0; i < types.length; i++) {\n      if (types[i] === '') {\n        hasEmpty = true;\n      }\n    }\n    if (!hasEmpty) {\n      types.push('');\n    }\n    return types;\n  }\n  /**\n   * Return all variables of all types.\n   * @return {!Array<!VariableModel>} List of variable models.\n   */\n  getAllVariables() {\n    let allVariables = [];\n    for (const key in this.variableMap_) {\n      allVariables = allVariables.concat(this.variableMap_[key]);\n    }\n    return allVariables;\n  }\n  /**\n   * Returns all of the variable names of all types.\n   * @return {!Array<string>} All of the variable names of all types.\n   */\n  getAllVariableNames() {\n    const allNames = [];\n    for (const key in this.variableMap_) {\n      const variables = this.variableMap_[key];\n      for (let i = 0, variable; (variable = variables[i]); i++) {\n        allNames.push(variable.name);\n      }\n    }\n    return allNames;\n  }\n  /**\n   * Find all the uses of a named variable.\n   * @param {string} id ID of the variable to find.\n   * @return {!Array<!Block>} Array of block usages.\n   */\n  getVariableUsesById(id) {\n    const uses = [];\n    const blocks = this.workspace.getAllBlocks(false);\n    // Iterate through every block and check the name.\n    for (let i = 0; i < blocks.length; i++) {\n      const blockVariables = blocks[i].getVarModels();\n      if (blockVariables) {\n        for (let j = 0; j < blockVariables.length; j++) {\n          if (blockVariables[j].getId() === id) {\n            uses.push(blocks[i]);\n          }\n        }\n      }\n    }\n    return uses;\n  }\n}\n\nexports.VariableMap = VariableMap;\n","/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Class for a block move event.\n */\n'use strict';\n\n/**\n * Class for a block move event.\n * @class\n */\ngoog.module('Blockly.Events.BlockMove');\n\nconst eventUtils = goog.require('Blockly.Events.utils');\nconst registry = goog.require('Blockly.registry');\nconst {BlockBase} = goog.require('Blockly.Events.BlockBase');\n/* eslint-disable-next-line no-unused-vars */\nconst {Block} = goog.requireType('Blockly.Block');\nconst {ConnectionType} = goog.require('Blockly.ConnectionType');\nconst {Coordinate} = goog.require('Blockly.utils.Coordinate');\n\n\n/**\n * Class for a block move event.  Created before the move.\n * @extends {BlockBase}\n * @alias Blockly.Events.BlockMove\n */\nclass BlockMove extends BlockBase {\n  /**\n   * @param {!Block=} opt_block The moved block.  Undefined for a blank\n   *     event.\n   */\n  constructor(opt_block) {\n    super(opt_block);\n\n    /**\n     * Type of this event.\n     * @type {string}\n     */\n    this.type = eventUtils.BLOCK_MOVE;\n\n    if (!opt_block) {\n      return;  // Blank event to be populated by fromJson.\n    }\n    if (opt_block.isShadow()) {\n      // Moving shadow blocks is handled via disconnection.\n      this.recordUndo = false;\n    }\n\n    const location = this.currentLocation_();\n    this.oldParentId = location.parentId;\n    this.oldInputName = location.inputName;\n    this.oldCoordinate = location.coordinate;\n\n    this.newParentId = null;\n    this.newInputName = null;\n    this.newCoordinate = null;\n  }\n\n  /**\n   * Encode the event as JSON.\n   * @return {!Object} JSON representation.\n   */\n  toJson() {\n    const json = super.toJson();\n    if (this.newParentId) {\n      json['newParentId'] = this.newParentId;\n    }\n    if (this.newInputName) {\n      json['newInputName'] = this.newInputName;\n    }\n    if (this.newCoordinate) {\n      json['newCoordinate'] = Math.round(this.newCoordinate.x) + ',' +\n          Math.round(this.newCoordinate.y);\n    }\n    if (!this.recordUndo) {\n      json['recordUndo'] = this.recordUndo;\n    }\n    return json;\n  }\n\n  /**\n   * Decode the JSON event.\n   * @param {!Object} json JSON representation.\n   */\n  fromJson(json) {\n    super.fromJson(json);\n    this.newParentId = json['newParentId'];\n    this.newInputName = json['newInputName'];\n    if (json['newCoordinate']) {\n      const xy = json['newCoordinate'].split(',');\n      this.newCoordinate = new Coordinate(Number(xy[0]), Number(xy[1]));\n    }\n    if (json['recordUndo'] !== undefined) {\n      this.recordUndo = json['recordUndo'];\n    }\n  }\n\n  /**\n   * Record the block's new location.  Called after the move.\n   */\n  recordNew() {\n    const location = this.currentLocation_();\n    this.newParentId = location.parentId;\n    this.newInputName = location.inputName;\n    this.newCoordinate = location.coordinate;\n  }\n\n  /**\n   * Returns the parentId and input if the block is connected,\n   *   or the XY location if disconnected.\n   * @return {!Object} Collection of location info.\n   * @private\n   */\n  currentLocation_() {\n    const workspace = this.getEventWorkspace_();\n    const block = workspace.getBlockById(this.blockId);\n    const location = {};\n    const parent = block.getParent();\n    if (parent) {\n      location.parentId = parent.id;\n      const input = parent.getInputWithBlock(block);\n      if (input) {\n        location.inputName = input.name;\n      }\n    } else {\n      location.coordinate = block.getRelativeToSurfaceXY();\n    }\n    return location;\n  }\n\n  /**\n   * Does this event record any change of state?\n   * @return {boolean} False if something changed.\n   */\n  isNull() {\n    return this.oldParentId === this.newParentId &&\n        this.oldInputName === this.newInputName &&\n        Coordinate.equals(this.oldCoordinate, this.newCoordinate);\n  }\n\n  /**\n   * Run a move event.\n   * @param {boolean} forward True if run forward, false if run backward (undo).\n   */\n  run(forward) {\n    const workspace = this.getEventWorkspace_();\n    const block = workspace.getBlockById(this.blockId);\n    if (!block) {\n      console.warn('Can\\'t move non-existent block: ' + this.blockId);\n      return;\n    }\n    const parentId = forward ? this.newParentId : this.oldParentId;\n    const inputName = forward ? this.newInputName : this.oldInputName;\n    const coordinate = forward ? this.newCoordinate : this.oldCoordinate;\n    let parentBlock;\n    if (parentId) {\n      parentBlock = workspace.getBlockById(parentId);\n      if (!parentBlock) {\n        console.warn('Can\\'t connect to non-existent block: ' + parentId);\n        return;\n      }\n    }\n    if (block.getParent()) {\n      block.unplug();\n    }\n    if (coordinate) {\n      const xy = block.getRelativeToSurfaceXY();\n      block.moveBy(coordinate.x - xy.x, coordinate.y - xy.y);\n    } else {\n      let blockConnection = block.outputConnection;\n      if (!blockConnection ||\n          (block.previousConnection &&\n           block.previousConnection.isConnected())) {\n        blockConnection = block.previousConnection;\n      }\n      let parentConnection;\n      const connectionType = blockConnection.type;\n      if (inputName) {\n        const input = parentBlock.getInput(inputName);\n        if (input) {\n          parentConnection = input.connection;\n        }\n      } else if (connectionType === ConnectionType.PREVIOUS_STATEMENT) {\n        parentConnection = parentBlock.nextConnection;\n      }\n      if (parentConnection) {\n        blockConnection.connect(parentConnection);\n      } else {\n        console.warn('Can\\'t connect to non-existent input: ' + inputName);\n      }\n    }\n  }\n}\n\nregistry.register(registry.Type.EVENT, eventUtils.MOVE, BlockMove);\n\nexports.BlockMove = BlockMove;\n","/**\n * @license\n * Copyright 2016 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Blockly constants.\n */\n'use strict';\n\n/**\n * Blockly constants.\n * @namespace Blockly.constants\n */\ngoog.module('Blockly.constants');\n\n\n/**\n * The language-neutral ID given to the collapsed input.\n * @const {string}\n * @alias Blockly.constants.COLLAPSED_INPUT_NAME\n */\nconst COLLAPSED_INPUT_NAME = '_TEMP_COLLAPSED_INPUT';\nexports.COLLAPSED_INPUT_NAME = COLLAPSED_INPUT_NAME;\n\n/**\n * The language-neutral ID given to the collapsed field.\n * @const {string}\n * @alias Blockly.constants.COLLAPSED_FIELD_NAME\n */\nconst COLLAPSED_FIELD_NAME = '_TEMP_COLLAPSED_FIELD';\nexports.COLLAPSED_FIELD_NAME = COLLAPSED_FIELD_NAME;\n","/**\n * @license\n * Copyright 2011 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Components for creating connections between blocks.\n */\n'use strict';\n\n/**\n * Components for creating connections between blocks.\n * @class\n */\ngoog.module('Blockly.Connection');\n\nconst Xml = goog.require('Blockly.Xml');\nconst blocks = goog.require('Blockly.serialization.blocks');\nconst eventUtils = goog.require('Blockly.Events.utils');\n/* eslint-disable-next-line no-unused-vars */\nconst {Block} = goog.requireType('Blockly.Block');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockMove} = goog.requireType('Blockly.Events.BlockMove');\nconst {ConnectionType} = goog.require('Blockly.ConnectionType');\n/* eslint-disable-next-line no-unused-vars */\nconst {IASTNodeLocationWithBlock} = goog.require('Blockly.IASTNodeLocationWithBlock');\n/* eslint-disable-next-line no-unused-vars */\nconst {IConnectionChecker} = goog.requireType('Blockly.IConnectionChecker');\n/* eslint-disable-next-line no-unused-vars */\nconst {Input} = goog.requireType('Blockly.Input');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.Events.BlockMove');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.constants');\n\n\n/**\n * Class for a connection between blocks.\n * @implements {IASTNodeLocationWithBlock}\n * @alias Blockly.Connection\n */\nclass Connection {\n  /**\n   * @param {!Block} source The block establishing this connection.\n   * @param {number} type The type of the connection.\n   */\n  constructor(source, type) {\n    /**\n     * @type {!Block}\n     * @protected\n     */\n    this.sourceBlock_ = source;\n    /** @type {number} */\n    this.type = type;\n\n    /**\n     * Connection this connection connects to.  Null if not connected.\n     * @type {Connection}\n     */\n    this.targetConnection = null;\n\n    /**\n     * Has this connection been disposed of?\n     * @type {boolean}\n     * @package\n     */\n    this.disposed = false;\n\n    /**\n     * List of compatible value types.  Null if all types are compatible.\n     * @type {Array}\n     * @private\n     */\n    this.check_ = null;\n\n    /**\n     * DOM representation of a shadow block, or null if none.\n     * @type {Element}\n     * @private\n     */\n    this.shadowDom_ = null;\n\n    /**\n     * Horizontal location of this connection.\n     * @type {number}\n     * @package\n     */\n    this.x = 0;\n\n    /**\n     * Vertical location of this connection.\n     * @type {number}\n     * @package\n     */\n    this.y = 0;\n\n    /**\n     * @type {?blocks.State}\n     * @private\n     */\n    this.shadowState_ = null;\n  }\n\n  /**\n   * Connect two connections together.  This is the connection on the superior\n   * block.\n   * @param {!Connection} childConnection Connection on inferior block.\n   * @protected\n   */\n  connect_(childConnection) {\n    const INPUT = ConnectionType.INPUT_VALUE;\n    const parentConnection = this;\n    const parentBlock = parentConnection.getSourceBlock();\n    const childBlock = childConnection.getSourceBlock();\n\n    // Make sure the childConnection is available.\n    if (childConnection.isConnected()) {\n      childConnection.disconnect();\n    }\n\n    // Make sure the parentConnection is available.\n    let orphan;\n    if (parentConnection.isConnected()) {\n      const shadowState = parentConnection.stashShadowState_();\n      const target = parentConnection.targetBlock();\n      if (target.isShadow()) {\n        target.dispose(false);\n      } else {\n        parentConnection.disconnect();\n        orphan = target;\n      }\n      parentConnection.applyShadowState_(shadowState);\n    }\n\n    // Connect the new connection to the parent.\n    let event;\n    if (eventUtils.isEnabled()) {\n      event = /** @type {!BlockMove} */\n          (new (eventUtils.get(eventUtils.BLOCK_MOVE))(childBlock));\n    }\n    connectReciprocally(parentConnection, childConnection);\n    childBlock.setParent(parentBlock);\n    if (event) {\n      event.recordNew();\n      eventUtils.fire(event);\n    }\n\n    // Deal with the orphan if it exists.\n    if (orphan) {\n      const orphanConnection = parentConnection.type === INPUT ?\n          orphan.outputConnection :\n          orphan.previousConnection;\n      const connection = Connection.getConnectionForOrphanedConnection(\n          childBlock, /** @type {!Connection} */ (orphanConnection));\n      if (connection) {\n        orphanConnection.connect(connection);\n      } else {\n        orphanConnection.onFailedConnect(parentConnection);\n      }\n    }\n  }\n\n  /**\n   * Dispose of this connection and deal with connected blocks.\n   * @package\n   */\n  dispose() {\n    // isConnected returns true for shadows and non-shadows.\n    if (this.isConnected()) {\n      // Destroy the attached shadow block & its children (if it exists).\n      this.setShadowStateInternal_();\n\n      const targetBlock = this.targetBlock();\n      if (targetBlock) {\n        // Disconnect the attached normal block.\n        targetBlock.unplug();\n      }\n    }\n\n    this.disposed = true;\n  }\n\n  /**\n   * Get the source block for this connection.\n   * @return {!Block} The source block.\n   */\n  getSourceBlock() {\n    return this.sourceBlock_;\n  }\n\n  /**\n   * Does the connection belong to a superior block (higher in the source\n   * stack)?\n   * @return {boolean} True if connection faces down or right.\n   */\n  isSuperior() {\n    return this.type === ConnectionType.INPUT_VALUE ||\n        this.type === ConnectionType.NEXT_STATEMENT;\n  }\n\n  /**\n   * Is the connection connected?\n   * @return {boolean} True if connection is connected to another connection.\n   */\n  isConnected() {\n    return !!this.targetConnection;\n  }\n\n  /**\n   * Get the workspace's connection type checker object.\n   * @return {!IConnectionChecker} The connection type checker for the\n   *     source block's workspace.\n   * @package\n   */\n  getConnectionChecker() {\n    return this.sourceBlock_.workspace.connectionChecker;\n  }\n\n  /**\n   * Called when an attempted connection fails. NOP by default (i.e. for\n   * headless workspaces).\n   * @param {!Connection} _otherConnection Connection that this connection\n   *     failed to connect to.\n   * @package\n   */\n  onFailedConnect(_otherConnection) {\n    // NOP\n  }\n\n  /**\n   * Connect this connection to another connection.\n   * @param {!Connection} otherConnection Connection to connect to.\n   * @return {boolean} Whether the the blocks are now connected or not.\n   */\n  connect(otherConnection) {\n    if (this.targetConnection === otherConnection) {\n      // Already connected together.  NOP.\n      return true;\n    }\n\n    const checker = this.getConnectionChecker();\n    if (checker.canConnect(this, otherConnection, false)) {\n      const eventGroup = eventUtils.getGroup();\n      if (!eventGroup) {\n        eventUtils.setGroup(true);\n      }\n      // Determine which block is superior (higher in the source stack).\n      if (this.isSuperior()) {\n        // Superior block.\n        this.connect_(otherConnection);\n      } else {\n        // Inferior block.\n        otherConnection.connect_(this);\n      }\n      if (!eventGroup) {\n        eventUtils.setGroup(false);\n      }\n    }\n\n    return this.isConnected();\n  }\n\n  /**\n   * Disconnect this connection.\n   */\n  disconnect() {\n    const otherConnection = this.targetConnection;\n    if (!otherConnection) {\n      throw Error('Source connection not connected.');\n    }\n    if (otherConnection.targetConnection !== this) {\n      throw Error('Target connection not connected to source connection.');\n    }\n    let parentBlock;\n    let childBlock;\n    let parentConnection;\n    if (this.isSuperior()) {\n      // Superior block.\n      parentBlock = this.sourceBlock_;\n      childBlock = otherConnection.getSourceBlock();\n      parentConnection = this;\n    } else {\n      // Inferior block.\n      parentBlock = otherConnection.getSourceBlock();\n      childBlock = this.sourceBlock_;\n      parentConnection = otherConnection;\n    }\n\n    const eventGroup = eventUtils.getGroup();\n    if (!eventGroup) {\n      eventUtils.setGroup(true);\n    }\n    this.disconnectInternal_(parentBlock, childBlock);\n    if (!childBlock.isShadow()) {\n      // If we were disconnecting a shadow, no need to spawn a new one.\n      parentConnection.respawnShadow_();\n    }\n    if (!eventGroup) {\n      eventUtils.setGroup(false);\n    }\n  }\n\n  /**\n   * Disconnect two blocks that are connected by this connection.\n   * @param {!Block} parentBlock The superior block.\n   * @param {!Block} childBlock The inferior block.\n   * @protected\n   */\n  disconnectInternal_(parentBlock, childBlock) {\n    let event;\n    if (eventUtils.isEnabled()) {\n      event = /** @type {!BlockMove} */\n          (new (eventUtils.get(eventUtils.BLOCK_MOVE))(childBlock));\n    }\n    const otherConnection = this.targetConnection;\n    otherConnection.targetConnection = null;\n    this.targetConnection = null;\n    childBlock.setParent(null);\n    if (event) {\n      event.recordNew();\n      eventUtils.fire(event);\n    }\n  }\n\n  /**\n   * Respawn the shadow block if there was one connected to the this connection.\n   * @protected\n   */\n  respawnShadow_() {\n    // Have to keep respawnShadow_ for backwards compatibility.\n    this.createShadowBlock_(true);\n  }\n\n  /**\n   * Returns the block that this connection connects to.\n   * @return {?Block} The connected block or null if none is connected.\n   */\n  targetBlock() {\n    if (this.isConnected()) {\n      return this.targetConnection.getSourceBlock();\n    }\n    return null;\n  }\n\n  /**\n   * Function to be called when this connection's compatible types have changed.\n   * @protected\n   */\n  onCheckChanged_() {\n    // The new value type may not be compatible with the existing connection.\n    if (this.isConnected() &&\n        (!this.targetConnection ||\n         !this.getConnectionChecker().canConnect(\n             this, this.targetConnection, false))) {\n      const child = this.isSuperior() ? this.targetBlock() : this.sourceBlock_;\n      child.unplug();\n    }\n  }\n\n  /**\n   * Change a connection's compatibility.\n   * @param {?(string|!Array<string>)} check Compatible value type or list of\n   *     value types. Null if all types are compatible.\n   * @return {!Connection} The connection being modified\n   *     (to allow chaining).\n   */\n  setCheck(check) {\n    if (check) {\n      // Ensure that check is in an array.\n      if (!Array.isArray(check)) {\n        check = [check];\n      }\n      this.check_ = check;\n      this.onCheckChanged_();\n    } else {\n      this.check_ = null;\n    }\n    return this;\n  }\n\n  /**\n   * Get a connection's compatibility.\n   * @return {?Array} List of compatible value types.\n   *     Null if all types are compatible.\n   * @public\n   */\n  getCheck() {\n    return this.check_;\n  }\n\n  /**\n   * Changes the connection's shadow block.\n   * @param {?Element} shadowDom DOM representation of a block or null.\n   */\n  setShadowDom(shadowDom) {\n    this.setShadowStateInternal_({shadowDom: shadowDom});\n  }\n\n  /**\n   * Returns the xml representation of the connection's shadow block.\n   * @param {boolean=} returnCurrent If true, and the shadow block is currently\n   *     attached to this connection, this serializes the state of that block\n   *     and returns it (so that field values are correct). Otherwise the saved\n   *     shadowDom is just returned.\n   * @return {?Element} Shadow DOM representation of a block or null.\n   */\n  getShadowDom(returnCurrent) {\n    return (returnCurrent && this.targetBlock().isShadow()) ?\n        /** @type {!Element} */ (Xml.blockToDom(\n            /** @type {!Block} */ (this.targetBlock()))) :\n        this.shadowDom_;\n  }\n\n  /**\n   * Changes the connection's shadow block.\n   * @param {?blocks.State} shadowState An state represetation of the block or\n   *     null.\n   */\n  setShadowState(shadowState) {\n    this.setShadowStateInternal_({shadowState: shadowState});\n  }\n\n  /**\n   * Returns the serialized object representation of the connection's shadow\n   * block.\n   * @param {boolean=} returnCurrent If true, and the shadow block is currently\n   *     attached to this connection, this serializes the state of that block\n   *     and returns it (so that field values are correct). Otherwise the saved\n   *     state is just returned.\n   * @return {?blocks.State} Serialized object representation of the block, or\n   *     null.\n   */\n  getShadowState(returnCurrent) {\n    if (returnCurrent && this.targetBlock() && this.targetBlock().isShadow()) {\n      return blocks.save(/** @type {!Block} */ (this.targetBlock()));\n    }\n    return this.shadowState_;\n  }\n\n  /**\n   * Find all nearby compatible connections to this connection.\n   * Type checking does not apply, since this function is used for bumping.\n   *\n   * Headless configurations (the default) do not have neighboring connection,\n   * and always return an empty list (the default).\n   * {@link Blockly.RenderedConnection} overrides this behavior with a list\n   * computed from the rendered positioning.\n   * @param {number} _maxLimit The maximum radius to another connection.\n   * @return {!Array<!Connection>} List of connections.\n   * @package\n   */\n  neighbours(_maxLimit) {\n    return [];\n  }\n\n  /**\n   * Get the parent input of a connection.\n   * @return {?Input} The input that the connection belongs to or null if\n   *     no parent exists.\n   * @package\n   */\n  getParentInput() {\n    let parentInput = null;\n    const inputs = this.sourceBlock_.inputList;\n    for (let i = 0; i < inputs.length; i++) {\n      if (inputs[i].connection === this) {\n        parentInput = inputs[i];\n        break;\n      }\n    }\n    return parentInput;\n  }\n\n  /**\n   * This method returns a string describing this Connection in developer terms\n   * (English only). Intended to on be used in console logs and errors.\n   * @return {string} The description.\n   */\n  toString() {\n    const block = this.sourceBlock_;\n    if (!block) {\n      return 'Orphan Connection';\n    }\n    let msg;\n    if (block.outputConnection === this) {\n      msg = 'Output Connection of ';\n    } else if (block.previousConnection === this) {\n      msg = 'Previous Connection of ';\n    } else if (block.nextConnection === this) {\n      msg = 'Next Connection of ';\n    } else {\n      let parentInput = null;\n      for (let i = 0, input; (input = block.inputList[i]); i++) {\n        if (input.connection === this) {\n          parentInput = input;\n          break;\n        }\n      }\n      if (parentInput) {\n        msg = 'Input \"' + parentInput.name + '\" connection on ';\n      } else {\n        console.warn('Connection not actually connected to sourceBlock_');\n        return 'Orphan Connection';\n      }\n    }\n    return msg + block.toDevString();\n  }\n\n  /**\n   * Returns the state of the shadowDom_ and shadowState_ properties, then\n   * temporarily sets those properties to null so no shadow respawns.\n   * @return {{shadowDom: ?Element, shadowState: ?blocks.State}} The state of\n   *     both the shadowDom_ and shadowState_ properties.\n   * @private\n   */\n  stashShadowState_() {\n    const shadowDom = this.getShadowDom(true);\n    const shadowState = this.getShadowState(true);\n    // Set to null so it doesn't respawn.\n    this.shadowDom_ = null;\n    this.shadowState_ = null;\n    return {shadowDom, shadowState};\n  }\n\n  /**\n   * Reapplies the stashed state of the shadowDom_ and shadowState_ properties.\n   * @param {{shadowDom: ?Element, shadowState: ?blocks.State}} param0 The state\n   *     to reapply to the shadowDom_ and shadowState_ properties.\n   * @private\n   */\n  applyShadowState_({shadowDom, shadowState}) {\n    this.shadowDom_ = shadowDom;\n    this.shadowState_ = shadowState;\n  }\n\n  /**\n   * Sets the state of the shadow of this connection.\n   * @param {{shadowDom: (?Element|undefined), shadowState:\n   *     (?blocks.State|undefined)}=} param0 The state to set the shadow of this\n   *     connection to.\n   * @private\n   */\n  setShadowStateInternal_({shadowDom = null, shadowState = null} = {}) {\n    // One or both of these should always be null.\n    // If neither is null, the shadowState will get priority.\n    this.shadowDom_ = shadowDom;\n    this.shadowState_ = shadowState;\n\n    const target = this.targetBlock();\n    if (!target) {\n      this.respawnShadow_();\n      if (this.targetBlock() && this.targetBlock().isShadow()) {\n        this.serializeShadow_(this.targetBlock());\n      }\n    } else if (target.isShadow()) {\n      target.dispose(false);\n      this.respawnShadow_();\n      if (this.targetBlock() && this.targetBlock().isShadow()) {\n        this.serializeShadow_(this.targetBlock());\n      }\n    } else {\n      const shadow = this.createShadowBlock_(false);\n      this.serializeShadow_(shadow);\n      if (shadow) {\n        shadow.dispose(false);\n      }\n    }\n  }\n\n  /**\n   * Creates a shadow block based on the current shadowState_ or shadowDom_.\n   * shadowState_ gets priority.\n   * @param {boolean} attemptToConnect Whether to try to connect the shadow\n   *     block to this connection or not.\n   * @return {?Block} The shadow block that was created, or null if both the\n   *     shadowState_ and shadowDom_ are null.\n   * @private\n   */\n  createShadowBlock_(attemptToConnect) {\n    const parentBlock = this.getSourceBlock();\n    const shadowState = this.getShadowState();\n    const shadowDom = this.getShadowDom();\n    if (!parentBlock.workspace || (!shadowState && !shadowDom)) {\n      return null;\n    }\n\n    let blockShadow;\n    if (shadowState) {\n      blockShadow = blocks.appendInternal(shadowState, parentBlock.workspace, {\n        parentConnection: attemptToConnect ? this : undefined,\n        isShadow: true,\n        recordUndo: false,\n      });\n      return blockShadow;\n    }\n\n    if (shadowDom) {\n      blockShadow = Xml.domToBlock(shadowDom, parentBlock.workspace);\n      if (attemptToConnect) {\n        if (this.type === ConnectionType.INPUT_VALUE) {\n          if (!blockShadow.outputConnection) {\n            throw new Error('Shadow block is missing an output connection');\n          }\n          if (!this.connect(blockShadow.outputConnection)) {\n            throw new Error('Could not connect shadow block to connection');\n          }\n        } else if (this.type === ConnectionType.NEXT_STATEMENT) {\n          if (!blockShadow.previousConnection) {\n            throw new Error('Shadow block is missing previous connection');\n          }\n          if (!this.connect(blockShadow.previousConnection)) {\n            throw new Error('Could not connect shadow block to connection');\n          }\n        } else {\n          throw new Error(\n              'Cannot connect a shadow block to a previous/output connection');\n        }\n      }\n      return blockShadow;\n    }\n    return null;\n  }\n\n  /**\n   * Saves the given shadow block to both the shadowDom_ and shadowState_\n   * properties, in their respective serialized forms.\n   * @param {?Block} shadow The shadow to serialize, or null.\n   * @private\n   */\n  serializeShadow_(shadow) {\n    if (!shadow) {\n      return;\n    }\n    this.shadowDom_ = /** @type {!Element} */ (Xml.blockToDom(shadow));\n    this.shadowState_ = blocks.save(shadow);\n  }\n\n  /**\n   * Returns the connection (starting at the startBlock) which will accept\n   * the given connection. This includes compatible connection types and\n   * connection checks.\n   * @param {!Block} startBlock The block on which to start the search.\n   * @param {!Connection} orphanConnection The connection that is looking\n   *     for a home.\n   * @return {?Connection} The suitable connection point on the chain of\n   *     blocks, or null.\n   */\n  static getConnectionForOrphanedConnection(startBlock, orphanConnection) {\n    if (orphanConnection.type === ConnectionType.OUTPUT_VALUE) {\n      return getConnectionForOrphanedOutput(\n          startBlock, orphanConnection.getSourceBlock());\n    }\n    // Otherwise we're dealing with a stack.\n    const connection = startBlock.lastConnectionInStack(true);\n    const checker = orphanConnection.getConnectionChecker();\n    if (connection && checker.canConnect(orphanConnection, connection, false)) {\n      return connection;\n    }\n    return null;\n  }\n}\n\n/**\n * Constants for checking whether two connections are compatible.\n */\nConnection.CAN_CONNECT = 0;\nConnection.REASON_SELF_CONNECTION = 1;\nConnection.REASON_WRONG_TYPE = 2;\nConnection.REASON_TARGET_NULL = 3;\nConnection.REASON_CHECKS_FAILED = 4;\nConnection.REASON_DIFFERENT_WORKSPACES = 5;\nConnection.REASON_SHADOW_PARENT = 6;\nConnection.REASON_DRAG_CHECKS_FAILED = 7;\nConnection.REASON_PREVIOUS_AND_OUTPUT = 8;\n\n/**\n * Update two connections to target each other.\n * @param {Connection} first The first connection to update.\n * @param {Connection} second The second connection to update.\n */\nconst connectReciprocally = function(first, second) {\n  if (!first || !second) {\n    throw Error('Cannot connect null connections.');\n  }\n  first.targetConnection = second;\n  second.targetConnection = first;\n};\n\n/**\n * Returns the single connection on the block that will accept the orphaned\n * block, if one can be found. If the block has multiple compatible connections\n * (even if they are filled) this returns null. If the block has no compatible\n * connections, this returns null.\n * @param {!Block} block The superior block.\n * @param {!Block} orphanBlock The inferior block.\n * @return {?Connection} The suitable connection point on 'block',\n *     or null.\n */\nconst getSingleConnection = function(block, orphanBlock) {\n  let foundConnection = null;\n  const output = orphanBlock.outputConnection;\n  const typeChecker = output.getConnectionChecker();\n\n  for (let i = 0, input; (input = block.inputList[i]); i++) {\n    const connection = input.connection;\n    if (connection && typeChecker.canConnect(output, connection, false)) {\n      if (foundConnection) {\n        return null;  // More than one connection.\n      }\n      foundConnection = connection;\n    }\n  }\n  return foundConnection;\n};\n\n/**\n * Walks down a row a blocks, at each stage checking if there are any\n * connections that will accept the orphaned block.  If at any point there\n * are zero or multiple eligible connections, returns null.  Otherwise\n * returns the only input on the last block in the chain.\n * Terminates early for shadow blocks.\n * @param {!Block} startBlock The block on which to start the search.\n * @param {!Block} orphanBlock The block that is looking for a home.\n * @return {?Connection} The suitable connection point on the chain\n *     of blocks, or null.\n */\nconst getConnectionForOrphanedOutput = function(startBlock, orphanBlock) {\n  let newBlock = startBlock;\n  let connection;\n  while (\n      (connection = getSingleConnection(\n           /** @type {!Block} */ (newBlock), orphanBlock))) {\n    newBlock = connection.targetBlock();\n    if (!newBlock || newBlock.isShadow()) {\n      return connection;\n    }\n  }\n  return null;\n};\n\nexports.Connection = Connection;\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview An object that encapsulates logic for checking whether a\n * potential connection is safe and valid.\n */\n'use strict';\n\n/**\n * An object that encapsulates logic for checking whether a\n * potential connection is safe and valid.\n * @class\n */\ngoog.module('Blockly.ConnectionChecker');\n\nconst common = goog.require('Blockly.common');\nconst internalConstants = goog.require('Blockly.internalConstants');\nconst registry = goog.require('Blockly.registry');\nconst {ConnectionType} = goog.require('Blockly.ConnectionType');\nconst {Connection} = goog.require('Blockly.Connection');\n/* eslint-disable-next-line no-unused-vars */\nconst {IConnectionChecker} = goog.require('Blockly.IConnectionChecker');\n/* eslint-disable-next-line no-unused-vars */\nconst {RenderedConnection} = goog.requireType('Blockly.RenderedConnection');\n\n\n/**\n * Class for connection type checking logic.\n * @implements {IConnectionChecker}\n * @alias Blockly.ConnectionChecker\n */\nclass ConnectionChecker {\n  /**\n   * Check whether the current connection can connect with the target\n   * connection.\n   * @param {Connection} a Connection to check compatibility with.\n   * @param {Connection} b Connection to check compatibility with.\n   * @param {boolean} isDragging True if the connection is being made by\n   *     dragging a block.\n   * @param {number=} opt_distance The max allowable distance between the\n   *     connections for drag checks.\n   * @return {boolean} Whether the connection is legal.\n   * @public\n   */\n  canConnect(a, b, isDragging, opt_distance) {\n    return this.canConnectWithReason(a, b, isDragging, opt_distance) ===\n        Connection.CAN_CONNECT;\n  }\n\n  /**\n   * Checks whether the current connection can connect with the target\n   * connection, and return an error code if there are problems.\n   * @param {Connection} a Connection to check compatibility with.\n   * @param {Connection} b Connection to check compatibility with.\n   * @param {boolean} isDragging True if the connection is being made by\n   *     dragging a block.\n   * @param {number=} opt_distance The max allowable distance between the\n   *     connections for drag checks.\n   * @return {number} Connection.CAN_CONNECT if the connection is legal,\n   *    an error code otherwise.\n   * @public\n   */\n  canConnectWithReason(a, b, isDragging, opt_distance) {\n    const safety = this.doSafetyChecks(a, b);\n    if (safety !== Connection.CAN_CONNECT) {\n      return safety;\n    }\n\n    // If the safety checks passed, both connections are non-null.\n    const connOne = /** @type {!Connection} **/ (a);\n    const connTwo = /** @type {!Connection} **/ (b);\n    if (!this.doTypeChecks(connOne, connTwo)) {\n      return Connection.REASON_CHECKS_FAILED;\n    }\n\n    if (isDragging &&\n        !this.doDragChecks(\n            /** @type {!RenderedConnection} **/ (a),\n            /** @type {!RenderedConnection} **/ (b), opt_distance || 0)) {\n      return Connection.REASON_DRAG_CHECKS_FAILED;\n    }\n\n    return Connection.CAN_CONNECT;\n  }\n\n  /**\n   * Helper method that translates a connection error code into a string.\n   * @param {number} errorCode The error code.\n   * @param {Connection} a One of the two connections being checked.\n   * @param {Connection} b The second of the two connections being\n   *     checked.\n   * @return {string} A developer-readable error string.\n   * @public\n   */\n  getErrorMessage(errorCode, a, b) {\n    switch (errorCode) {\n      case Connection.REASON_SELF_CONNECTION:\n        return 'Attempted to connect a block to itself.';\n      case Connection.REASON_DIFFERENT_WORKSPACES:\n        // Usually this means one block has been deleted.\n        return 'Blocks not on same workspace.';\n      case Connection.REASON_WRONG_TYPE:\n        return 'Attempt to connect incompatible types.';\n      case Connection.REASON_TARGET_NULL:\n        return 'Target connection is null.';\n      case Connection.REASON_CHECKS_FAILED: {\n        const connOne = /** @type {!Connection} **/ (a);\n        const connTwo = /** @type {!Connection} **/ (b);\n        let msg = 'Connection checks failed. ';\n        msg += connOne + ' expected ' + connOne.getCheck() + ', found ' +\n            connTwo.getCheck();\n        return msg;\n      }\n      case Connection.REASON_SHADOW_PARENT:\n        return 'Connecting non-shadow to shadow block.';\n      case Connection.REASON_DRAG_CHECKS_FAILED:\n        return 'Drag checks failed.';\n      case Connection.REASON_PREVIOUS_AND_OUTPUT:\n        return 'Block would have an output and a previous connection.';\n      default:\n        return 'Unknown connection failure: this should never happen!';\n    }\n  }\n\n  /**\n   * Check that connecting the given connections is safe, meaning that it would\n   * not break any of Blockly's basic assumptions (e.g. no self connections).\n   * @param {Connection} a The first of the connections to check.\n   * @param {Connection} b The second of the connections to check.\n   * @return {number} An enum with the reason this connection is safe or unsafe.\n   * @public\n   */\n  doSafetyChecks(a, b) {\n    if (!a || !b) {\n      return Connection.REASON_TARGET_NULL;\n    }\n    let superiorBlock;\n    let inferiorBlock;\n    let superiorConnection;\n    let inferiorConnection;\n    if (a.isSuperior()) {\n      superiorBlock = a.getSourceBlock();\n      inferiorBlock = b.getSourceBlock();\n      superiorConnection = a;\n      inferiorConnection = b;\n    } else {\n      inferiorBlock = a.getSourceBlock();\n      superiorBlock = b.getSourceBlock();\n      inferiorConnection = a;\n      superiorConnection = b;\n    }\n    if (superiorBlock === inferiorBlock) {\n      return Connection.REASON_SELF_CONNECTION;\n    } else if (\n        inferiorConnection.type !==\n        internalConstants.OPPOSITE_TYPE[superiorConnection.type]) {\n      return Connection.REASON_WRONG_TYPE;\n    } else if (superiorBlock.workspace !== inferiorBlock.workspace) {\n      return Connection.REASON_DIFFERENT_WORKSPACES;\n    } else if (superiorBlock.isShadow() && !inferiorBlock.isShadow()) {\n      return Connection.REASON_SHADOW_PARENT;\n    } else if (\n        inferiorConnection.type === ConnectionType.OUTPUT_VALUE &&\n        inferiorBlock.previousConnection &&\n        inferiorBlock.previousConnection.isConnected()) {\n      return Connection.REASON_PREVIOUS_AND_OUTPUT;\n    } else if (\n        inferiorConnection.type === ConnectionType.PREVIOUS_STATEMENT &&\n        inferiorBlock.outputConnection &&\n        inferiorBlock.outputConnection.isConnected()) {\n      return Connection.REASON_PREVIOUS_AND_OUTPUT;\n    }\n    return Connection.CAN_CONNECT;\n  }\n\n  /**\n   * Check whether this connection is compatible with another connection with\n   * respect to the value type system.  E.g. square_root(\"Hello\") is not\n   * compatible.\n   * @param {!Connection} a Connection to compare.\n   * @param {!Connection} b Connection to compare against.\n   * @return {boolean} True if the connections share a type.\n   * @public\n   */\n  doTypeChecks(a, b) {\n    const checkArrayOne = a.getCheck();\n    const checkArrayTwo = b.getCheck();\n\n    if (!checkArrayOne || !checkArrayTwo) {\n      // One or both sides are promiscuous enough that anything will fit.\n      return true;\n    }\n    // Find any intersection in the check lists.\n    for (let i = 0; i < checkArrayOne.length; i++) {\n      if (checkArrayTwo.indexOf(checkArrayOne[i]) !== -1) {\n        return true;\n      }\n    }\n    // No intersection.\n    return false;\n  }\n\n  /**\n   * Check whether this connection can be made by dragging.\n   * @param {!RenderedConnection} a Connection to compare.\n   * @param {!RenderedConnection} b Connection to compare against.\n   * @param {number} distance The maximum allowable distance between\n   *     connections.\n   * @return {boolean} True if the connection is allowed during a drag.\n   * @public\n   */\n  doDragChecks(a, b, distance) {\n    if (a.distanceFrom(b) > distance) {\n      return false;\n    }\n\n    // Don't consider insertion markers.\n    if (b.getSourceBlock().isInsertionMarker()) {\n      return false;\n    }\n\n    switch (b.type) {\n      case ConnectionType.PREVIOUS_STATEMENT:\n        return this.canConnectToPrevious_(a, b);\n      case ConnectionType.OUTPUT_VALUE: {\n        // Don't offer to connect an already connected left (male) value plug to\n        // an available right (female) value plug.\n        if ((b.isConnected() && !b.targetBlock().isInsertionMarker()) ||\n            a.isConnected()) {\n          return false;\n        }\n        break;\n      }\n      case ConnectionType.INPUT_VALUE: {\n        // Offering to connect the left (male) of a value block to an already\n        // connected value pair is ok, we'll splice it in.\n        // However, don't offer to splice into an immovable block.\n        if (b.isConnected() && !b.targetBlock().isMovable() &&\n            !b.targetBlock().isShadow()) {\n          return false;\n        }\n        break;\n      }\n      case ConnectionType.NEXT_STATEMENT: {\n        // Don't let a block with no next connection bump other blocks out of\n        // the stack.  But covering up a shadow block or stack of shadow blocks\n        // is fine.  Similarly, replacing a terminal statement with another\n        // terminal statement is allowed.\n        if (b.isConnected() && !a.getSourceBlock().nextConnection &&\n            !b.targetBlock().isShadow() && b.targetBlock().nextConnection) {\n          return false;\n        }\n        break;\n      }\n      default:\n        // Unexpected connection type.\n        return false;\n    }\n\n    // Don't let blocks try to connect to themselves or ones they nest.\n    if (common.draggingConnections.indexOf(b) !== -1) {\n      return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Helper function for drag checking.\n   * @param {!Connection} a The connection to check, which must be a\n   *     statement input or next connection.\n   * @param {!Connection} b A nearby connection to check, which\n   *     must be a previous connection.\n   * @return {boolean} True if the connection is allowed, false otherwise.\n   * @protected\n   */\n  canConnectToPrevious_(a, b) {\n    if (a.targetConnection) {\n      // This connection is already occupied.\n      // A next connection will never disconnect itself mid-drag.\n      return false;\n    }\n\n    // Don't let blocks try to connect to themselves or ones they nest.\n    if (common.draggingConnections.indexOf(b) !== -1) {\n      return false;\n    }\n\n    if (!b.targetConnection) {\n      return true;\n    }\n\n    const targetBlock = b.targetBlock();\n    // If it is connected to a real block, game over.\n    if (!targetBlock.isInsertionMarker()) {\n      return false;\n    }\n    // If it's connected to an insertion marker but that insertion marker\n    // is the first block in a stack, it's still fine.  If that insertion\n    // marker is in the middle of a stack, it won't work.\n    return !targetBlock.getPreviousBlock();\n  }\n}\n\nregistry.register(\n    registry.Type.CONNECTION_CHECKER, registry.DEFAULT, ConnectionChecker);\n\nexports.ConnectionChecker = ConnectionChecker;\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Object representing a workspace.\n */\n'use strict';\n\n/**\n * Object representing a workspace.\n * @class\n */\ngoog.module('Blockly.Workspace');\n\nconst arrayUtils = goog.require('Blockly.utils.array');\nconst eventUtils = goog.require('Blockly.Events.utils');\nconst idGenerator = goog.require('Blockly.utils.idGenerator');\nconst math = goog.require('Blockly.utils.math');\nconst registry = goog.require('Blockly.registry');\n/* eslint-disable-next-line no-unused-vars */\nconst toolbox = goog.requireType('Blockly.utils.toolbox');\n/* eslint-disable-next-line no-unused-vars */\nconst {Abstract} = goog.requireType('Blockly.Events.Abstract');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlocklyOptions} = goog.requireType('Blockly.BlocklyOptions');\n/* eslint-disable-next-line no-unused-vars */\nconst {Block} = goog.requireType('Blockly.Block');\n/* eslint-disable-next-line no-unused-vars */\nconst {ConnectionDB} = goog.requireType('Blockly.ConnectionDB');\n/* eslint-disable-next-line no-unused-vars */\nconst {IASTNodeLocation} = goog.require('Blockly.IASTNodeLocation');\n/* eslint-disable-next-line no-unused-vars */\nconst {IConnectionChecker} = goog.requireType('Blockly.IConnectionChecker');\nconst {Options} = goog.require('Blockly.Options');\nconst {VariableMap} = goog.require('Blockly.VariableMap');\n/* eslint-disable-next-line no-unused-vars */\nconst {VariableModel} = goog.requireType('Blockly.VariableModel');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceComment} = goog.requireType('Blockly.WorkspaceComment');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.ConnectionChecker');\n\n\n/**\n * Database of all workspaces.\n * @private\n */\nconst WorkspaceDB_ = Object.create(null);\n\n/**\n * Class for a workspace.  This is a data structure that contains blocks.\n * There is no UI, and can be created headlessly.\n * @implements {IASTNodeLocation}\n * @alias Blockly.Workspace\n */\nclass Workspace {\n  /**\n   * @param {!Options=} opt_options Dictionary of options.\n   */\n  constructor(opt_options) {\n    /** @type {string} */\n    this.id = idGenerator.genUid();\n    WorkspaceDB_[this.id] = this;\n    /** @type {!Options} */\n    this.options =\n        opt_options || new Options(/** @type {!BlocklyOptions} */ ({}));\n    /** @type {boolean} */\n    this.RTL = !!this.options.RTL;\n    /** @type {boolean} */\n    this.horizontalLayout = !!this.options.horizontalLayout;\n    /** @type {toolbox.Position} */\n    this.toolboxPosition = this.options.toolboxPosition;\n\n    /**\n     * Returns `true` if the workspace is visible and `false` if it's headless.\n     * @type {boolean}\n     */\n    this.rendered = false;\n\n    /**\n     * Is this workspace the surface for a flyout?\n     * @type {boolean}\n     */\n    this.isFlyout = false;\n\n    /**\n     * Is this workspace the surface for a mutator?\n     * @type {boolean}\n     * @package\n     */\n    this.isMutator = false;\n\n    /**\n     * Returns `true` if the workspace is currently in the process of a bulk\n     * clear.\n     * @type {boolean}\n     * @package\n     */\n    this.isClearing = false;\n\n    /**\n     * Maximum number of undo events in stack. `0` turns off undo, `Infinity`\n     * sets it to unlimited.\n     * @type {number}\n     */\n    this.MAX_UNDO = 1024;\n\n    /**\n     * Set of databases for rapid lookup of connection locations.\n     * @type {Array<!ConnectionDB>}\n     */\n    this.connectionDBList = null;\n\n    const connectionCheckerClass = registry.getClassFromOptions(\n        registry.Type.CONNECTION_CHECKER, this.options, true);\n    /**\n     * An object that encapsulates logic for safety, type, and dragging checks.\n     * @type {!IConnectionChecker}\n     */\n    this.connectionChecker = new connectionCheckerClass(this);\n\n    /**\n     * @type {!Array<!Block>}\n     * @private\n     */\n    this.topBlocks_ = [];\n    /**\n     * @type {!Array<!WorkspaceComment>}\n     * @private\n     */\n    this.topComments_ = [];\n    /**\n     * @type {!Object}\n     * @private\n     */\n    this.commentDB_ = Object.create(null);\n    /**\n     * @type {!Array<!Function>}\n     * @private\n     */\n    this.listeners_ = [];\n    /**\n     * @type {!Array<!Abstract>}\n     * @protected\n     */\n    this.undoStack_ = [];\n    /**\n     * @type {!Array<!Abstract>}\n     * @protected\n     */\n    this.redoStack_ = [];\n    /**\n     * @type {!Object}\n     * @private\n     */\n    this.blockDB_ = Object.create(null);\n    /**\n     * @type {!Object}\n     * @private\n     */\n    this.typedBlocksDB_ = Object.create(null);\n\n    /**\n     * A map from variable type to list of variable names.  The lists contain\n     * all of the named variables in the workspace, including variables that are\n     * not currently in use.\n     * @type {!VariableMap}\n     * @private\n     */\n    this.variableMap_ = new VariableMap(this);\n\n    /**\n     * Blocks in the flyout can refer to variables that don't exist in the main\n     * workspace.  For instance, the \"get item in list\" block refers to an\n     * \"item\" variable regardless of whether the variable has been created yet.\n     * A FieldVariable must always refer to a VariableModel.  We reconcile\n     * these by tracking \"potential\" variables in the flyout.  These variables\n     * become real when references to them are dragged into the main workspace.\n     * @type {?VariableMap}\n     * @private\n     */\n    this.potentialVariableMap_ = null;\n  }\n\n  /**\n   * Dispose of this workspace.\n   * Unlink from all DOM elements to prevent memory leaks.\n   * @suppress {checkTypes}\n   */\n  dispose() {\n    this.listeners_.length = 0;\n    this.clear();\n    // Remove from workspace database.\n    delete WorkspaceDB_[this.id];\n  }\n\n  /**\n   * Compare function for sorting objects (blocks, comments, etc) by position;\n   *    top to bottom (with slight LTR or RTL bias).\n   * @param {!Block | !WorkspaceComment} a The first object to\n   *    compare.\n   * @param {!Block | !WorkspaceComment} b The second object to\n   *    compare.\n   * @return {number} The comparison value. This tells Array.sort() how to\n   *    change object a's index.\n   * @private\n   */\n  sortObjects_(a, b) {\n    const aXY = a.getRelativeToSurfaceXY();\n    const bXY = b.getRelativeToSurfaceXY();\n    return (aXY.y + Workspace.prototype.sortObjects_.offset * aXY.x) -\n        (bXY.y + Workspace.prototype.sortObjects_.offset * bXY.x);\n  }\n\n  /**\n   * Adds a block to the list of top blocks.\n   * @param {!Block} block Block to add.\n   */\n  addTopBlock(block) {\n    this.topBlocks_.push(block);\n  }\n\n  /**\n   * Removes a block from the list of top blocks.\n   * @param {!Block} block Block to remove.\n   */\n  removeTopBlock(block) {\n    if (!arrayUtils.removeElem(this.topBlocks_, block)) {\n      throw Error('Block not present in workspace\\'s list of top-most blocks.');\n    }\n  }\n\n  /**\n   * Finds the top-level blocks and returns them.  Blocks are optionally sorted\n   * by position; top to bottom (with slight LTR or RTL bias).\n   * @param {boolean} ordered Sort the list if true.\n   * @return {!Array<!Block>} The top-level block objects.\n   */\n  getTopBlocks(ordered) {\n    // Copy the topBlocks_ list.\n    const blocks = [].concat(this.topBlocks_);\n    if (ordered && blocks.length > 1) {\n      this.sortObjects_.offset = Math.sin(math.toRadians(Workspace.SCAN_ANGLE));\n      if (this.RTL) {\n        this.sortObjects_.offset *= -1;\n      }\n      blocks.sort(this.sortObjects_);\n    }\n    return blocks;\n  }\n\n  /**\n   * Add a block to the list of blocks keyed by type.\n   * @param {!Block} block Block to add.\n   */\n  addTypedBlock(block) {\n    if (!this.typedBlocksDB_[block.type]) {\n      this.typedBlocksDB_[block.type] = [];\n    }\n    this.typedBlocksDB_[block.type].push(block);\n  }\n\n  /**\n   * Remove a block from the list of blocks keyed by type.\n   * @param {!Block} block Block to remove.\n   */\n  removeTypedBlock(block) {\n    arrayUtils.removeElem(this.typedBlocksDB_[block.type], block);\n    if (!this.typedBlocksDB_[block.type].length) {\n      delete this.typedBlocksDB_[block.type];\n    }\n  }\n\n  /**\n   * Finds the blocks with the associated type and returns them. Blocks are\n   * optionally sorted by position; top to bottom (with slight LTR or RTL bias).\n   * @param {string} type The type of block to search for.\n   * @param {boolean} ordered Sort the list if true.\n   * @return {!Array<!Block>} The blocks of the given type.\n   */\n  getBlocksByType(type, ordered) {\n    if (!this.typedBlocksDB_[type]) {\n      return [];\n    }\n    const blocks = this.typedBlocksDB_[type].slice(0);\n    if (ordered && blocks.length > 1) {\n      this.sortObjects_.offset = Math.sin(math.toRadians(Workspace.SCAN_ANGLE));\n      if (this.RTL) {\n        this.sortObjects_.offset *= -1;\n      }\n      blocks.sort(this.sortObjects_);\n    }\n\n    return blocks.filter(function(block) {\n      return !block.isInsertionMarker();\n    });\n  }\n\n  /**\n   * Adds a comment to the list of top comments.\n   * @param {!WorkspaceComment} comment comment to add.\n   * @package\n   */\n  addTopComment(comment) {\n    this.topComments_.push(comment);\n\n    // Note: If the comment database starts to hold block comments, this may\n    // need to move to a separate function.\n    if (this.commentDB_[comment.id]) {\n      console.warn(\n          'Overriding an existing comment on this workspace, with id \"' +\n          comment.id + '\"');\n    }\n    this.commentDB_[comment.id] = comment;\n  }\n\n  /**\n   * Removes a comment from the list of top comments.\n   * @param {!WorkspaceComment} comment comment to remove.\n   * @package\n   */\n  removeTopComment(comment) {\n    if (!arrayUtils.removeElem(this.topComments_, comment)) {\n      throw Error(\n          'Comment not present in workspace\\'s list of top-most ' +\n          'comments.');\n    }\n    // Note: If the comment database starts to hold block comments, this may\n    // need to move to a separate function.\n    delete this.commentDB_[comment.id];\n  }\n\n  /**\n   * Finds the top-level comments and returns them.  Comments are optionally\n   * sorted by position; top to bottom (with slight LTR or RTL bias).\n   * @param {boolean} ordered Sort the list if true.\n   * @return {!Array<!WorkspaceComment>} The top-level comment objects.\n   * @package\n   */\n  getTopComments(ordered) {\n    // Copy the topComments_ list.\n    const comments = [].concat(this.topComments_);\n    if (ordered && comments.length > 1) {\n      this.sortObjects_.offset = Math.sin(math.toRadians(Workspace.SCAN_ANGLE));\n      if (this.RTL) {\n        this.sortObjects_.offset *= -1;\n      }\n      comments.sort(this.sortObjects_);\n    }\n    return comments;\n  }\n\n  /**\n   * Find all blocks in workspace.  Blocks are optionally sorted\n   * by position; top to bottom (with slight LTR or RTL bias).\n   * @param {boolean} ordered Sort the list if true.\n   * @return {!Array<!Block>} Array of blocks.\n   */\n  getAllBlocks(ordered) {\n    let blocks;\n    if (ordered) {\n      // Slow, but ordered.\n      const topBlocks = this.getTopBlocks(true);\n      blocks = [];\n      for (let i = 0; i < topBlocks.length; i++) {\n        blocks.push.apply(blocks, topBlocks[i].getDescendants(true));\n      }\n    } else {\n      // Fast, but in no particular order.\n      blocks = this.getTopBlocks(false);\n      for (let i = 0; i < blocks.length; i++) {\n        blocks.push.apply(blocks, blocks[i].getChildren(false));\n      }\n    }\n\n    // Insertion markers exist on the workspace for rendering reasons, but\n    // aren't \"real\" blocks from a developer perspective.\n    const filtered = blocks.filter(function(block) {\n      return !block.isInsertionMarker();\n    });\n\n    return filtered;\n  }\n\n  /**\n   * Dispose of all blocks and comments in workspace.\n   */\n  clear() {\n    this.isClearing = true;\n    try {\n      const existingGroup = eventUtils.getGroup();\n      if (!existingGroup) {\n        eventUtils.setGroup(true);\n      }\n      while (this.topBlocks_.length) {\n        this.topBlocks_[0].dispose(false);\n      }\n      while (this.topComments_.length) {\n        this.topComments_[this.topComments_.length - 1].dispose();\n      }\n      if (!existingGroup) {\n        eventUtils.setGroup(false);\n      }\n      this.variableMap_.clear();\n      if (this.potentialVariableMap_) {\n        this.potentialVariableMap_.clear();\n      }\n    } finally {\n      this.isClearing = false;\n    }\n  }\n\n  /* Begin functions that are just pass-throughs to the variable map. */\n\n  /**\n   * Rename a variable by updating its name in the variable map. Identify the\n   * variable to rename with the given ID.\n   * @param {string} id ID of the variable to rename.\n   * @param {string} newName New variable name.\n   */\n  renameVariableById(id, newName) {\n    this.variableMap_.renameVariableById(id, newName);\n  }\n\n  /**\n   * Create a variable with a given name, optional type, and optional ID.\n   * @param {string} name The name of the variable. This must be unique across\n   *     variables and procedures.\n   * @param {?string=} opt_type The type of the variable like 'int' or 'string'.\n   *     Does not need to be unique. Field_variable can filter variables based\n   * on their type. This will default to '' which is a specific type.\n   * @param {?string=} opt_id The unique ID of the variable. This will default\n   *     to a UUID.\n   * @return {!VariableModel} The newly created variable.\n   */\n  createVariable(name, opt_type, opt_id) {\n    return this.variableMap_.createVariable(name, opt_type, opt_id);\n  }\n\n  /**\n   * Find all the uses of the given variable, which is identified by ID.\n   * @param {string} id ID of the variable to find.\n   * @return {!Array<!Block>} Array of block usages.\n   */\n  getVariableUsesById(id) {\n    return this.variableMap_.getVariableUsesById(id);\n  }\n\n  /**\n   * Delete a variables by the passed in ID and all of its uses from this\n   * workspace. May prompt the user for confirmation.\n   * @param {string} id ID of variable to delete.\n   */\n  deleteVariableById(id) {\n    this.variableMap_.deleteVariableById(id);\n  }\n\n  /**\n   * Find the variable by the given name and return it. Return null if not\n   * found.\n   * @param {string} name The name to check for.\n   * @param {string=} opt_type The type of the variable.  If not provided it\n   *     defaults to the empty string, which is a specific type.\n   * @return {?VariableModel} The variable with the given name.\n   */\n  getVariable(name, opt_type) {\n    // TODO (#1559): Possibly delete this function after resolving #1559.\n    return this.variableMap_.getVariable(name, opt_type);\n  }\n\n  /**\n   * Find the variable by the given ID and return it. Return null if not found.\n   * @param {string} id The ID to check for.\n   * @return {?VariableModel} The variable with the given ID.\n   */\n  getVariableById(id) {\n    return this.variableMap_.getVariableById(id);\n  }\n\n  /**\n   * Find the variable with the specified type. If type is null, return list of\n   *     variables with empty string type.\n   * @param {?string} type Type of the variables to find.\n   * @return {!Array<!VariableModel>} The sought after variables of the\n   *     passed in type. An empty array if none are found.\n   */\n  getVariablesOfType(type) {\n    return this.variableMap_.getVariablesOfType(type);\n  }\n\n  /**\n   * Return all variable types.\n   * @return {!Array<string>} List of variable types.\n   * @package\n   */\n  getVariableTypes() {\n    return this.variableMap_.getVariableTypes(this);\n  }\n\n  /**\n   * Return all variables of all types.\n   * @return {!Array<!VariableModel>} List of variable models.\n   */\n  getAllVariables() {\n    return this.variableMap_.getAllVariables();\n  }\n\n  /**\n   * Returns all variable names of all types.\n   * @return {!Array<string>} List of all variable names of all types.\n   */\n  getAllVariableNames() {\n    return this.variableMap_.getAllVariableNames();\n  }\n\n  /* End functions that are just pass-throughs to the variable map. */\n\n  /**\n   * Returns the horizontal offset of the workspace.\n   * Intended for LTR/RTL compatibility in XML.\n   * Not relevant for a headless workspace.\n   * @return {number} Width.\n   */\n  getWidth() {\n    return 0;\n  }\n\n  /**\n   * Obtain a newly created block.\n   * @param {!string} prototypeName Name of the language object containing\n   *     type-specific functions for this block.\n   * @param {string=} opt_id Optional ID.  Use this ID if provided, otherwise\n   *     create a new ID.\n   * @return {!Block} The created block.\n   */\n  newBlock(prototypeName, opt_id) {\n    const {Block} = goog.module.get('Blockly.Block');\n    return new Block(this, prototypeName, opt_id);\n  }\n\n  /**\n   * The number of blocks that may be added to the workspace before reaching\n   *     the maxBlocks.\n   * @return {number} Number of blocks left.\n   */\n  remainingCapacity() {\n    if (isNaN(this.options.maxBlocks)) {\n      return Infinity;\n    }\n\n    return this.options.maxBlocks - this.getAllBlocks(false).length;\n  }\n\n  /**\n   * The number of blocks of the given type that may be added to the workspace\n   *    before reaching the maxInstances allowed for that type.\n   * @param {string} type Type of block to return capacity for.\n   * @return {number} Number of blocks of type left.\n   */\n  remainingCapacityOfType(type) {\n    if (!this.options.maxInstances) {\n      return Infinity;\n    }\n\n    const maxInstanceOfType = (this.options.maxInstances[type] !== undefined) ?\n        this.options.maxInstances[type] :\n        Infinity;\n\n    return maxInstanceOfType - this.getBlocksByType(type, false).length;\n  }\n\n  /**\n   * Check if there is remaining capacity for blocks of the given counts to be\n   *    created. If the total number of blocks represented by the map is more\n   * than the total remaining capacity, it returns false. If a type count is\n   * more than the remaining capacity for that type, it returns false.\n   * @param {!Object} typeCountsMap A map of types to counts (usually\n   *     representing\n   *    blocks to be created).\n   * @return {boolean} True if there is capacity for the given map,\n   *    false otherwise.\n   */\n  isCapacityAvailable(typeCountsMap) {\n    if (!this.hasBlockLimits()) {\n      return true;\n    }\n    let copyableBlocksCount = 0;\n    for (const type in typeCountsMap) {\n      if (typeCountsMap[type] > this.remainingCapacityOfType(type)) {\n        return false;\n      }\n      copyableBlocksCount += typeCountsMap[type];\n    }\n    if (copyableBlocksCount > this.remainingCapacity()) {\n      return false;\n    }\n    return true;\n  }\n\n  /**\n   * Checks if the workspace has any limits on the maximum number of blocks,\n   *    or the maximum number of blocks of specific types.\n   * @return {boolean} True if it has block limits, false otherwise.\n   */\n  hasBlockLimits() {\n    return this.options.maxBlocks !== Infinity || !!this.options.maxInstances;\n  }\n\n  /**\n   * Gets the undo stack for workplace.\n   * @return {!Array<!Abstract>} undo stack\n   * @package\n   */\n  getUndoStack() {\n    return this.undoStack_;\n  }\n\n  /**\n   * Gets the redo stack for workplace.\n   * @return {!Array<!Abstract>} redo stack\n   * @package\n   */\n  getRedoStack() {\n    return this.redoStack_;\n  }\n\n  /**\n   * Undo or redo the previous action.\n   * @param {boolean} redo False if undo, true if redo.\n   */\n  undo(redo) {\n    const inputStack = redo ? this.redoStack_ : this.undoStack_;\n    const outputStack = redo ? this.undoStack_ : this.redoStack_;\n    const inputEvent = inputStack.pop();\n    if (!inputEvent) {\n      return;\n    }\n    let events = [inputEvent];\n    // Do another undo/redo if the next one is of the same group.\n    while (inputStack.length && inputEvent.group &&\n           inputEvent.group === inputStack[inputStack.length - 1].group) {\n      events.push(inputStack.pop());\n    }\n    // Push these popped events on the opposite stack.\n    for (let i = 0; i < events.length; i++) {\n      const event = events[i];\n      outputStack.push(event);\n    }\n    events = eventUtils.filter(events, redo);\n    eventUtils.setRecordUndo(false);\n    try {\n      for (let i = 0; i < events.length; i++) {\n        const event = events[i];\n        event.run(redo);\n      }\n    } finally {\n      eventUtils.setRecordUndo(true);\n    }\n  }\n\n  /**\n   * Clear the undo/redo stacks.\n   */\n  clearUndo() {\n    this.undoStack_.length = 0;\n    this.redoStack_.length = 0;\n    // Stop any events already in the firing queue from being undoable.\n    eventUtils.clearPendingUndo();\n  }\n\n  /**\n   * When something in this workspace changes, call a function.\n   * Note that there may be a few recent events already on the stack.  Thus the\n   * new change listener might be called with events that occurred a few\n   * milliseconds before the change listener was added.\n   * @param {!Function} func Function to call.\n   * @return {!Function} Obsolete return value, ignore.\n   */\n  addChangeListener(func) {\n    this.listeners_.push(func);\n    return func;\n  }\n\n  /**\n   * Stop listening for this workspace's changes.\n   * @param {!Function} func Function to stop calling.\n   */\n  removeChangeListener(func) {\n    arrayUtils.removeElem(this.listeners_, func);\n  }\n\n  /**\n   * Fire a change event.\n   * @param {!Abstract} event Event to fire.\n   */\n  fireChangeListener(event) {\n    if (event.recordUndo) {\n      this.undoStack_.push(event);\n      this.redoStack_.length = 0;\n      while (this.undoStack_.length > this.MAX_UNDO && this.MAX_UNDO >= 0) {\n        this.undoStack_.shift();\n      }\n    }\n    for (let i = 0; i < this.listeners_.length; i++) {\n      const func = this.listeners_[i];\n      func(event);\n    }\n  }\n\n  /**\n   * Find the block on this workspace with the specified ID.\n   * @param {string} id ID of block to find.\n   * @return {?Block} The sought after block, or null if not found.\n   */\n  getBlockById(id) {\n    return this.blockDB_[id] || null;\n  }\n\n  /**\n   * Set a block on this workspace with the specified ID.\n   * @param {string} id ID of block to set.\n   * @param {Block} block The block to set.\n   * @package\n   */\n  setBlockById(id, block) {\n    this.blockDB_[id] = block;\n  }\n\n  /**\n   * Delete a block off this workspace with the specified ID.\n   * @param {string} id ID of block to delete.\n   * @package\n   */\n  removeBlockById(id) {\n    delete this.blockDB_[id];\n  }\n\n  /**\n   * Find the comment on this workspace with the specified ID.\n   * @param {string} id ID of comment to find.\n   * @return {?WorkspaceComment} The sought after comment, or null if not\n   *     found.\n   * @package\n   */\n  getCommentById(id) {\n    return this.commentDB_[id] || null;\n  }\n\n  /**\n   * Checks whether all value and statement inputs in the workspace are filled\n   * with blocks.\n   * @param {boolean=} opt_shadowBlocksAreFilled An optional argument\n   *     controlling whether shadow blocks are counted as filled. Defaults to\n   *     true.\n   * @return {boolean} True if all inputs are filled, false otherwise.\n   */\n  allInputsFilled(opt_shadowBlocksAreFilled) {\n    const blocks = this.getTopBlocks(false);\n    for (let i = 0; i < blocks.length; i++) {\n      const block = blocks[i];\n      if (!block.allInputsFilled(opt_shadowBlocksAreFilled)) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  /**\n   * Return the variable map that contains \"potential\" variables.\n   * These exist in the flyout but not in the workspace.\n   * @return {?VariableMap} The potential variable map.\n   * @package\n   */\n  getPotentialVariableMap() {\n    return this.potentialVariableMap_;\n  }\n\n  /**\n   * Create and store the potential variable map for this workspace.\n   * @package\n   */\n  createPotentialVariableMap() {\n    this.potentialVariableMap_ = new VariableMap(this);\n  }\n\n  /**\n   * Return the map of all variables on the workspace.\n   * @return {!VariableMap} The variable map.\n   */\n  getVariableMap() {\n    return this.variableMap_;\n  }\n\n  /**\n   * Set the map of all variables on the workspace.\n   * @param {!VariableMap} variableMap The variable map.\n   * @package\n   */\n  setVariableMap(variableMap) {\n    this.variableMap_ = variableMap;\n  }\n\n  /**\n   * Find the workspace with the specified ID.\n   * @param {string} id ID of workspace to find.\n   * @return {?Workspace} The sought after workspace or null if not found.\n   */\n  static getById(id) {\n    return WorkspaceDB_[id] || null;\n  }\n\n  /**\n   * Find all workspaces.\n   * @return {!Array<!Workspace>} Array of workspaces.\n   */\n  static getAll() {\n    const workspaces = [];\n    for (const workspaceId in WorkspaceDB_) {\n      workspaces.push(WorkspaceDB_[workspaceId]);\n    }\n    return workspaces;\n  }\n}\n\n/**\n * Angle away from the horizontal to sweep for blocks.  Order of execution is\n * generally top to bottom, but a small angle changes the scan to give a bit of\n * a left to right bias (reversed in RTL).  Units are in degrees.\n * See: https://tvtropes.org/pmwiki/pmwiki.php/Main/DiagonalBilling\n */\nWorkspace.SCAN_ANGLE = 3;\n\nexports.Workspace = Workspace;\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Object representing a UI bubble.\n */\n'use strict';\n\n/**\n * Object representing a UI bubble.\n * @class\n */\ngoog.module('Blockly.Bubble');\n\nconst Touch = goog.require('Blockly.Touch');\nconst browserEvents = goog.require('Blockly.browserEvents');\nconst dom = goog.require('Blockly.utils.dom');\nconst math = goog.require('Blockly.utils.math');\nconst userAgent = goog.require('Blockly.utils.userAgent');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockDragSurfaceSvg} = goog.requireType('Blockly.BlockDragSurfaceSvg');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockSvg} = goog.requireType('Blockly.BlockSvg');\nconst {Coordinate} = goog.require('Blockly.utils.Coordinate');\n/* eslint-disable-next-line no-unused-vars */\nconst {IBubble} = goog.require('Blockly.IBubble');\n/* eslint-disable-next-line no-unused-vars */\nconst {MetricsManager} = goog.requireType('Blockly.MetricsManager');\nconst {Scrollbar} = goog.require('Blockly.Scrollbar');\nconst {Size} = goog.require('Blockly.utils.Size');\nconst {Svg} = goog.require('Blockly.utils.Svg');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceSvg} = goog.requireType('Blockly.WorkspaceSvg');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.Workspace');\n\n\n/**\n * Class for UI bubble.\n * @implements {IBubble}\n * @alias Blockly.Bubble\n */\nconst Bubble = class {\n  /**\n   * @param {!WorkspaceSvg} workspace The workspace on which to draw the\n   *     bubble.\n   * @param {!Element} content SVG content for the bubble.\n   * @param {!Element} shape SVG element to avoid eclipsing.\n   * @param {!Coordinate} anchorXY Absolute position of bubble's\n   *     anchor point.\n   * @param {?number} bubbleWidth Width of bubble, or null if not resizable.\n   * @param {?number} bubbleHeight Height of bubble, or null if not resizable.\n   * @struct\n   */\n  constructor(workspace, content, shape, anchorXY, bubbleWidth, bubbleHeight) {\n    this.workspace_ = workspace;\n    this.content_ = content;\n    this.shape_ = shape;\n\n    /**\n     * Flag to stop incremental rendering during construction.\n     * @type {boolean}\n     * @private\n     */\n    this.rendered_ = false;\n\n    /**\n     * The SVG group containing all parts of the bubble.\n     * @type {SVGGElement}\n     * @private\n     */\n    this.bubbleGroup_ = null;\n\n    /**\n     * The SVG path for the arrow from the bubble to the icon on the block.\n     * @type {SVGPathElement}\n     * @private\n     */\n    this.bubbleArrow_ = null;\n\n    /**\n     * The SVG rect for the main body of the bubble.\n     * @type {SVGRectElement}\n     * @private\n     */\n    this.bubbleBack_ = null;\n\n    /**\n     * The SVG group for the resize hash marks on some bubbles.\n     * @type {SVGGElement}\n     * @private\n     */\n    this.resizeGroup_ = null;\n\n    /**\n     * Absolute coordinate of anchor point, in workspace coordinates.\n     * @type {Coordinate}\n     * @private\n     */\n    this.anchorXY_ = null;\n\n    /**\n     * Relative X coordinate of bubble with respect to the anchor's centre,\n     * in workspace units.\n     * In RTL mode the initial value is negated.\n     * @type {number}\n     * @private\n     */\n    this.relativeLeft_ = 0;\n\n    /**\n     * Relative Y coordinate of bubble with respect to the anchor's centre, in\n     * workspace units.\n     * @type {number}\n     * @private\n     */\n    this.relativeTop_ = 0;\n\n    /**\n     * Width of bubble, in workspace units.\n     * @type {number}\n     * @private\n     */\n    this.width_ = 0;\n\n    /**\n     * Height of bubble, in workspace units.\n     * @type {number}\n     * @private\n     */\n    this.height_ = 0;\n\n    /**\n     * Automatically position and reposition the bubble.\n     * @type {boolean}\n     * @private\n     */\n    this.autoLayout_ = true;\n\n    /**\n     * Method to call on resize of bubble.\n     * @type {?function()}\n     * @private\n     */\n    this.resizeCallback_ = null;\n\n    /**\n     * Method to call on move of bubble.\n     * @type {?function()}\n     * @private\n     */\n    this.moveCallback_ = null;\n\n    /**\n     * Mouse down on bubbleBack_ event data.\n     * @type {?browserEvents.Data}\n     * @private\n     */\n    this.onMouseDownBubbleWrapper_ = null;\n\n    /**\n     * Mouse down on resizeGroup_ event data.\n     * @type {?browserEvents.Data}\n     * @private\n     */\n    this.onMouseDownResizeWrapper_ = null;\n\n    /**\n     * Describes whether this bubble has been disposed of (nodes and event\n     * listeners removed from the page) or not.\n     * @type {boolean}\n     * @package\n     */\n    this.disposed = false;\n\n    let angle = Bubble.ARROW_ANGLE;\n    if (this.workspace_.RTL) {\n      angle = -angle;\n    }\n    this.arrow_radians_ = math.toRadians(angle);\n\n    const canvas = workspace.getBubbleCanvas();\n    canvas.appendChild(\n        this.createDom_(content, !!(bubbleWidth && bubbleHeight)));\n\n    this.setAnchorLocation(anchorXY);\n    if (!bubbleWidth || !bubbleHeight) {\n      const bBox = /** @type {SVGLocatable} */ (this.content_).getBBox();\n      bubbleWidth = bBox.width + 2 * Bubble.BORDER_WIDTH;\n      bubbleHeight = bBox.height + 2 * Bubble.BORDER_WIDTH;\n    }\n    this.setBubbleSize(bubbleWidth, bubbleHeight);\n\n    // Render the bubble.\n    this.positionBubble_();\n    this.renderArrow_();\n    this.rendered_ = true;\n  }\n\n  /**\n   * Create the bubble's DOM.\n   * @param {!Element} content SVG content for the bubble.\n   * @param {boolean} hasResize Add diagonal resize gripper if true.\n   * @return {!SVGElement} The bubble's SVG group.\n   * @private\n   */\n  createDom_(content, hasResize) {\n    /* Create the bubble.  Here's the markup that will be generated:\n    <g>\n      <g filter=\"url(#blocklyEmbossFilter837493)\">\n        <path d=\"... Z\" />\n        <rect class=\"blocklyDraggable\" rx=\"8\" ry=\"8\" width=\"180\" height=\"180\"/>\n      </g>\n      <g transform=\"translate(165, 165)\" class=\"blocklyResizeSE\">\n        <polygon points=\"0,15 15,15 15,0\"/>\n        <line class=\"blocklyResizeLine\" x1=\"5\" y1=\"14\" x2=\"14\" y2=\"5\"/>\n        <line class=\"blocklyResizeLine\" x1=\"10\" y1=\"14\" x2=\"14\" y2=\"10\"/>\n      </g>\n      [...content goes here...]\n    </g>\n    */\n    this.bubbleGroup_ = dom.createSvgElement(Svg.G, {}, null);\n    let filter = {\n      'filter': 'url(#' +\n          this.workspace_.getRenderer().getConstants().embossFilterId + ')',\n    };\n    if (userAgent.JAVA_FX) {\n      // Multiple reports that JavaFX can't handle filters.\n      // https://github.com/google/blockly/issues/99\n      filter = {};\n    }\n    const bubbleEmboss = dom.createSvgElement(Svg.G, filter, this.bubbleGroup_);\n    this.bubbleArrow_ = dom.createSvgElement(Svg.PATH, {}, bubbleEmboss);\n    this.bubbleBack_ = dom.createSvgElement(\n        Svg.RECT, {\n          'class': 'blocklyDraggable',\n          'x': 0,\n          'y': 0,\n          'rx': Bubble.BORDER_WIDTH,\n          'ry': Bubble.BORDER_WIDTH,\n        },\n        bubbleEmboss);\n    if (hasResize) {\n      this.resizeGroup_ = dom.createSvgElement(\n          Svg.G, {\n            'class': this.workspace_.RTL ? 'blocklyResizeSW' :\n                                           'blocklyResizeSE',\n          },\n          this.bubbleGroup_);\n      const resizeSize = 2 * Bubble.BORDER_WIDTH;\n      dom.createSvgElement(\n          Svg.POLYGON,\n          {'points': '0,x x,x x,0'.replace(/x/g, resizeSize.toString())},\n          this.resizeGroup_);\n      dom.createSvgElement(\n          Svg.LINE, {\n            'class': 'blocklyResizeLine',\n            'x1': resizeSize / 3,\n            'y1': resizeSize - 1,\n            'x2': resizeSize - 1,\n            'y2': resizeSize / 3,\n          },\n          this.resizeGroup_);\n      dom.createSvgElement(\n          Svg.LINE, {\n            'class': 'blocklyResizeLine',\n            'x1': resizeSize * 2 / 3,\n            'y1': resizeSize - 1,\n            'x2': resizeSize - 1,\n            'y2': resizeSize * 2 / 3,\n          },\n          this.resizeGroup_);\n    } else {\n      this.resizeGroup_ = null;\n    }\n\n    if (!this.workspace_.options.readOnly) {\n      this.onMouseDownBubbleWrapper_ = browserEvents.conditionalBind(\n          this.bubbleBack_, 'mousedown', this, this.bubbleMouseDown_);\n      if (this.resizeGroup_) {\n        this.onMouseDownResizeWrapper_ = browserEvents.conditionalBind(\n            this.resizeGroup_, 'mousedown', this, this.resizeMouseDown_);\n      }\n    }\n    this.bubbleGroup_.appendChild(content);\n    return this.bubbleGroup_;\n  }\n\n  /**\n   * Return the root node of the bubble's SVG group.\n   * @return {!SVGElement} The root SVG node of the bubble's group.\n   */\n  getSvgRoot() {\n    return /** @type {!SVGElement} */ (this.bubbleGroup_);\n  }\n\n  /**\n   * Expose the block's ID on the bubble's top-level SVG group.\n   * @param {string} id ID of block.\n   */\n  setSvgId(id) {\n    if (this.bubbleGroup_.dataset) {\n      this.bubbleGroup_.dataset['blockId'] = id;\n    }\n  }\n\n  /**\n   * Handle a mouse-down on bubble's border.\n   * @param {!Event} e Mouse down event.\n   * @private\n   */\n  bubbleMouseDown_(e) {\n    const gesture = this.workspace_.getGesture(e);\n    if (gesture) {\n      gesture.handleBubbleStart(e, this);\n    }\n  }\n\n  /**\n   * Show the context menu for this bubble.\n   * @param {!Event} _e Mouse event.\n   * @package\n   */\n  showContextMenu(_e) {\n    // NOP on bubbles, but used by the bubble dragger to pass events to\n    // workspace comments.\n  }\n\n  /**\n   * Get whether this bubble is deletable or not.\n   * @return {boolean} True if deletable.\n   * @package\n   */\n  isDeletable() {\n    return false;\n  }\n\n  /**\n   * Update the style of this bubble when it is dragged over a delete area.\n   * @param {boolean} _enable True if the bubble is about to be deleted, false\n   *     otherwise.\n   */\n  setDeleteStyle(_enable) {\n    // NOP if bubble is not deletable.\n  }\n\n  /**\n   * Handle a mouse-down on bubble's resize corner.\n   * @param {!Event} e Mouse down event.\n   * @private\n   */\n  resizeMouseDown_(e) {\n    this.promote();\n    Bubble.unbindDragEvents_();\n    if (browserEvents.isRightButton(e)) {\n      // No right-click.\n      e.stopPropagation();\n      return;\n    }\n    // Left-click (or middle click)\n    this.workspace_.startDrag(\n        e,\n        new Coordinate(\n            this.workspace_.RTL ? -this.width_ : this.width_, this.height_));\n\n    Bubble.onMouseUpWrapper_ = browserEvents.conditionalBind(\n        document, 'mouseup', this, Bubble.bubbleMouseUp_);\n    Bubble.onMouseMoveWrapper_ = browserEvents.conditionalBind(\n        document, 'mousemove', this, this.resizeMouseMove_);\n    this.workspace_.hideChaff();\n    // This event has been handled.  No need to bubble up to the document.\n    e.stopPropagation();\n  }\n\n  /**\n   * Resize this bubble to follow the mouse.\n   * @param {!Event} e Mouse move event.\n   * @private\n   */\n  resizeMouseMove_(e) {\n    this.autoLayout_ = false;\n    const newXY = this.workspace_.moveDrag(e);\n    this.setBubbleSize(this.workspace_.RTL ? -newXY.x : newXY.x, newXY.y);\n    if (this.workspace_.RTL) {\n      // RTL requires the bubble to move its left edge.\n      this.positionBubble_();\n    }\n  }\n\n  /**\n   * Register a function as a callback event for when the bubble is resized.\n   * @param {!Function} callback The function to call on resize.\n   */\n  registerResizeEvent(callback) {\n    this.resizeCallback_ = callback;\n  }\n\n  /**\n   * Register a function as a callback event for when the bubble is moved.\n   * @param {!Function} callback The function to call on move.\n   */\n  registerMoveEvent(callback) {\n    this.moveCallback_ = callback;\n  }\n\n  /**\n   * Move this bubble to the top of the stack.\n   * @return {boolean} Whether or not the bubble has been moved.\n   * @package\n   */\n  promote() {\n    const svgGroup = this.bubbleGroup_.parentNode;\n    if (svgGroup.lastChild !== this.bubbleGroup_) {\n      svgGroup.appendChild(this.bubbleGroup_);\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Notification that the anchor has moved.\n   * Update the arrow and bubble accordingly.\n   * @param {!Coordinate} xy Absolute location.\n   */\n  setAnchorLocation(xy) {\n    this.anchorXY_ = xy;\n    if (this.rendered_) {\n      this.positionBubble_();\n    }\n  }\n\n  /**\n   * Position the bubble so that it does not fall off-screen.\n   * @private\n   */\n  layoutBubble_() {\n    // Get the metrics in workspace units.\n    const viewMetrics =\n        this.workspace_.getMetricsManager().getViewMetrics(true);\n\n    const optimalLeft = this.getOptimalRelativeLeft_(viewMetrics);\n    const optimalTop = this.getOptimalRelativeTop_(viewMetrics);\n    const bbox = this.shape_.getBBox();\n\n    const topPosition = {\n      x: optimalLeft,\n      y: -this.height_ -\n          this.workspace_.getRenderer().getConstants().MIN_BLOCK_HEIGHT,\n    };\n    const startPosition = {x: -this.width_ - 30, y: optimalTop};\n    const endPosition = {x: bbox.width, y: optimalTop};\n    const bottomPosition = {x: optimalLeft, y: bbox.height};\n\n    const closerPosition =\n        bbox.width < bbox.height ? endPosition : bottomPosition;\n    const fartherPosition =\n        bbox.width < bbox.height ? bottomPosition : endPosition;\n\n    const topPositionOverlap = this.getOverlap_(topPosition, viewMetrics);\n    const startPositionOverlap = this.getOverlap_(startPosition, viewMetrics);\n    const closerPositionOverlap = this.getOverlap_(closerPosition, viewMetrics);\n    const fartherPositionOverlap =\n        this.getOverlap_(fartherPosition, viewMetrics);\n\n    // Set the position to whichever position shows the most of the bubble,\n    // with tiebreaks going in the order: top > start > close > far.\n    const mostOverlap = Math.max(\n        topPositionOverlap, startPositionOverlap, closerPositionOverlap,\n        fartherPositionOverlap);\n    if (topPositionOverlap === mostOverlap) {\n      this.relativeLeft_ = topPosition.x;\n      this.relativeTop_ = topPosition.y;\n      return;\n    }\n    if (startPositionOverlap === mostOverlap) {\n      this.relativeLeft_ = startPosition.x;\n      this.relativeTop_ = startPosition.y;\n      return;\n    }\n    if (closerPositionOverlap === mostOverlap) {\n      this.relativeLeft_ = closerPosition.x;\n      this.relativeTop_ = closerPosition.y;\n      return;\n    }\n    // TODO: I believe relativeLeft_ should actually be called relativeStart_\n    //  and then the math should be fixed to reflect this. (hopefully it'll\n    //  make it look simpler)\n    this.relativeLeft_ = fartherPosition.x;\n    this.relativeTop_ = fartherPosition.y;\n  }\n\n  /**\n   * Calculate the what percentage of the bubble overlaps with the visible\n   * workspace (what percentage of the bubble is visible).\n   * @param {!{x: number, y: number}} relativeMin The position of the top-left\n   *     corner of the bubble relative to the anchor point.\n   * @param {!MetricsManager.ContainerRegion} viewMetrics The view metrics\n   *     of the workspace the bubble will appear in.\n   * @return {number} The percentage of the bubble that is visible.\n   * @private\n   */\n  getOverlap_(relativeMin, viewMetrics) {\n    // The position of the top-left corner of the bubble in workspace units.\n    const bubbleMin = {\n      x: this.workspace_.RTL ?\n          (this.anchorXY_.x - relativeMin.x - this.width_) :\n          (relativeMin.x + this.anchorXY_.x),\n      y: relativeMin.y + this.anchorXY_.y,\n    };\n    // The position of the bottom-right corner of the bubble in workspace units.\n    const bubbleMax = {\n      x: bubbleMin.x + this.width_,\n      y: bubbleMin.y + this.height_,\n    };\n\n    // We could adjust these values to account for the scrollbars, but the\n    // bubbles should have been adjusted to not collide with them anyway, so\n    // giving the workspace a slightly larger \"bounding box\" shouldn't affect\n    // the calculation.\n\n    // The position of the top-left corner of the workspace.\n    const workspaceMin = {x: viewMetrics.left, y: viewMetrics.top};\n    // The position of the bottom-right corner of the workspace.\n    const workspaceMax = {\n      x: viewMetrics.left + viewMetrics.width,\n      y: viewMetrics.top + viewMetrics.height,\n    };\n\n    const overlapWidth = Math.min(bubbleMax.x, workspaceMax.x) -\n        Math.max(bubbleMin.x, workspaceMin.x);\n    const overlapHeight = Math.min(bubbleMax.y, workspaceMax.y) -\n        Math.max(bubbleMin.y, workspaceMin.y);\n    return Math.max(\n        0,\n        Math.min(\n            1, (overlapWidth * overlapHeight) / (this.width_ * this.height_)));\n  }\n\n  /**\n   * Calculate what the optimal horizontal position of the top-left corner of\n   * the bubble is (relative to the anchor point) so that the most area of the\n   * bubble is shown.\n   * @param {!MetricsManager.ContainerRegion} viewMetrics The view metrics\n   *     of the workspace the bubble will appear in.\n   * @return {number} The optimal horizontal position of the top-left corner\n   *     of the bubble.\n   * @private\n   */\n  getOptimalRelativeLeft_(viewMetrics) {\n    let relativeLeft = -this.width_ / 4;\n\n    // No amount of sliding left or right will give us a better overlap.\n    if (this.width_ > viewMetrics.width) {\n      return relativeLeft;\n    }\n\n    if (this.workspace_.RTL) {\n      // Bubble coordinates are flipped in RTL.\n      const bubbleRight = this.anchorXY_.x - relativeLeft;\n      const bubbleLeft = bubbleRight - this.width_;\n\n      const workspaceRight = viewMetrics.left + viewMetrics.width;\n      const workspaceLeft = viewMetrics.left +\n          // Thickness in workspace units.\n          (Scrollbar.scrollbarThickness / this.workspace_.scale);\n\n      if (bubbleLeft < workspaceLeft) {\n        // Slide the bubble right until it is onscreen.\n        relativeLeft = -(workspaceLeft - this.anchorXY_.x + this.width_);\n      } else if (bubbleRight > workspaceRight) {\n        // Slide the bubble left until it is onscreen.\n        relativeLeft = -(workspaceRight - this.anchorXY_.x);\n      }\n    } else {\n      const bubbleLeft = relativeLeft + this.anchorXY_.x;\n      const bubbleRight = bubbleLeft + this.width_;\n\n      const workspaceLeft = viewMetrics.left;\n      const workspaceRight = viewMetrics.left + viewMetrics.width -\n          // Thickness in workspace units.\n          (Scrollbar.scrollbarThickness / this.workspace_.scale);\n\n      if (bubbleLeft < workspaceLeft) {\n        // Slide the bubble right until it is onscreen.\n        relativeLeft = workspaceLeft - this.anchorXY_.x;\n      } else if (bubbleRight > workspaceRight) {\n        // Slide the bubble left until it is onscreen.\n        relativeLeft = workspaceRight - this.anchorXY_.x - this.width_;\n      }\n    }\n\n    return relativeLeft;\n  }\n\n  /**\n   * Calculate what the optimal vertical position of the top-left corner of\n   * the bubble is (relative to the anchor point) so that the most area of the\n   * bubble is shown.\n   * @param {!MetricsManager.ContainerRegion} viewMetrics The view metrics\n   *     of the workspace the bubble will appear in.\n   * @return {number} The optimal vertical position of the top-left corner\n   *     of the bubble.\n   * @private\n   */\n  getOptimalRelativeTop_(viewMetrics) {\n    let relativeTop = -this.height_ / 4;\n\n    // No amount of sliding up or down will give us a better overlap.\n    if (this.height_ > viewMetrics.height) {\n      return relativeTop;\n    }\n\n    const bubbleTop = this.anchorXY_.y + relativeTop;\n    const bubbleBottom = bubbleTop + this.height_;\n    const workspaceTop = viewMetrics.top;\n    const workspaceBottom = viewMetrics.top + viewMetrics.height -\n        // Thickness in workspace units.\n        (Scrollbar.scrollbarThickness / this.workspace_.scale);\n\n    const anchorY = this.anchorXY_.y;\n    if (bubbleTop < workspaceTop) {\n      // Slide the bubble down until it is onscreen.\n      relativeTop = workspaceTop - anchorY;\n    } else if (bubbleBottom > workspaceBottom) {\n      // Slide the bubble up until it is onscreen.\n      relativeTop = workspaceBottom - anchorY - this.height_;\n    }\n\n    return relativeTop;\n  }\n\n  /**\n   * Move the bubble to a location relative to the anchor's centre.\n   * @private\n   */\n  positionBubble_() {\n    let left = this.anchorXY_.x;\n    if (this.workspace_.RTL) {\n      left -= this.relativeLeft_ + this.width_;\n    } else {\n      left += this.relativeLeft_;\n    }\n    const top = this.relativeTop_ + this.anchorXY_.y;\n    this.moveTo(left, top);\n  }\n\n  /**\n   * Move the bubble group to the specified location in workspace coordinates.\n   * @param {number} x The x position to move to.\n   * @param {number} y The y position to move to.\n   * @package\n   */\n  moveTo(x, y) {\n    this.bubbleGroup_.setAttribute(\n        'transform', 'translate(' + x + ',' + y + ')');\n  }\n\n  /**\n   * Triggers a move callback if one exists at the end of a drag.\n   * @param {boolean} adding True if adding, false if removing.\n   * @package\n   */\n  setDragging(adding) {\n    if (!adding && this.moveCallback_) {\n      this.moveCallback_();\n    }\n  }\n\n  /**\n   * Get the dimensions of this bubble.\n   * @return {!Size} The height and width of the bubble.\n   */\n  getBubbleSize() {\n    return new Size(this.width_, this.height_);\n  }\n\n  /**\n   * Size this bubble.\n   * @param {number} width Width of the bubble.\n   * @param {number} height Height of the bubble.\n   */\n  setBubbleSize(width, height) {\n    const doubleBorderWidth = 2 * Bubble.BORDER_WIDTH;\n    // Minimum size of a bubble.\n    width = Math.max(width, doubleBorderWidth + 45);\n    height = Math.max(height, doubleBorderWidth + 20);\n    this.width_ = width;\n    this.height_ = height;\n    this.bubbleBack_.setAttribute('width', width);\n    this.bubbleBack_.setAttribute('height', height);\n    if (this.resizeGroup_) {\n      if (this.workspace_.RTL) {\n        // Mirror the resize group.\n        const resizeSize = 2 * Bubble.BORDER_WIDTH;\n        this.resizeGroup_.setAttribute(\n            'transform',\n            'translate(' + resizeSize + ',' + (height - doubleBorderWidth) +\n                ') scale(-1 1)');\n      } else {\n        this.resizeGroup_.setAttribute(\n            'transform',\n            'translate(' + (width - doubleBorderWidth) + ',' +\n                (height - doubleBorderWidth) + ')');\n      }\n    }\n    if (this.autoLayout_) {\n      this.layoutBubble_();\n    }\n    this.positionBubble_();\n    this.renderArrow_();\n\n    // Allow the contents to resize.\n    if (this.resizeCallback_) {\n      this.resizeCallback_();\n    }\n  }\n\n  /**\n   * Draw the arrow between the bubble and the origin.\n   * @private\n   */\n  renderArrow_() {\n    const steps = [];\n    // Find the relative coordinates of the center of the bubble.\n    const relBubbleX = this.width_ / 2;\n    const relBubbleY = this.height_ / 2;\n    // Find the relative coordinates of the center of the anchor.\n    let relAnchorX = -this.relativeLeft_;\n    let relAnchorY = -this.relativeTop_;\n    if (relBubbleX === relAnchorX && relBubbleY === relAnchorY) {\n      // Null case.  Bubble is directly on top of the anchor.\n      // Short circuit this rather than wade through divide by zeros.\n      steps.push('M ' + relBubbleX + ',' + relBubbleY);\n    } else {\n      // Compute the angle of the arrow's line.\n      const rise = relAnchorY - relBubbleY;\n      let run = relAnchorX - relBubbleX;\n      if (this.workspace_.RTL) {\n        run *= -1;\n      }\n      const hypotenuse = Math.sqrt(rise * rise + run * run);\n      let angle = Math.acos(run / hypotenuse);\n      if (rise < 0) {\n        angle = 2 * Math.PI - angle;\n      }\n      // Compute a line perpendicular to the arrow.\n      let rightAngle = angle + Math.PI / 2;\n      if (rightAngle > Math.PI * 2) {\n        rightAngle -= Math.PI * 2;\n      }\n      const rightRise = Math.sin(rightAngle);\n      const rightRun = Math.cos(rightAngle);\n\n      // Calculate the thickness of the base of the arrow.\n      const bubbleSize = this.getBubbleSize();\n      let thickness =\n          (bubbleSize.width + bubbleSize.height) / Bubble.ARROW_THICKNESS;\n      thickness = Math.min(thickness, bubbleSize.width, bubbleSize.height) / 4;\n\n      // Back the tip of the arrow off of the anchor.\n      const backoffRatio = 1 - Bubble.ANCHOR_RADIUS / hypotenuse;\n      relAnchorX = relBubbleX + backoffRatio * run;\n      relAnchorY = relBubbleY + backoffRatio * rise;\n\n      // Coordinates for the base of the arrow.\n      const baseX1 = relBubbleX + thickness * rightRun;\n      const baseY1 = relBubbleY + thickness * rightRise;\n      const baseX2 = relBubbleX - thickness * rightRun;\n      const baseY2 = relBubbleY - thickness * rightRise;\n\n      // Distortion to curve the arrow.\n      let swirlAngle = angle + this.arrow_radians_;\n      if (swirlAngle > Math.PI * 2) {\n        swirlAngle -= Math.PI * 2;\n      }\n      const swirlRise = Math.sin(swirlAngle) * hypotenuse / Bubble.ARROW_BEND;\n      const swirlRun = Math.cos(swirlAngle) * hypotenuse / Bubble.ARROW_BEND;\n\n      steps.push('M' + baseX1 + ',' + baseY1);\n      steps.push(\n          'C' + (baseX1 + swirlRun) + ',' + (baseY1 + swirlRise) + ' ' +\n          relAnchorX + ',' + relAnchorY + ' ' + relAnchorX + ',' + relAnchorY);\n      steps.push(\n          'C' + relAnchorX + ',' + relAnchorY + ' ' + (baseX2 + swirlRun) +\n          ',' + (baseY2 + swirlRise) + ' ' + baseX2 + ',' + baseY2);\n    }\n    steps.push('z');\n    this.bubbleArrow_.setAttribute('d', steps.join(' '));\n  }\n\n  /**\n   * Change the colour of a bubble.\n   * @param {string} hexColour Hex code of colour.\n   */\n  setColour(hexColour) {\n    this.bubbleBack_.setAttribute('fill', hexColour);\n    this.bubbleArrow_.setAttribute('fill', hexColour);\n  }\n\n  /**\n   * Dispose of this bubble.\n   */\n  dispose() {\n    if (this.onMouseDownBubbleWrapper_) {\n      browserEvents.unbind(this.onMouseDownBubbleWrapper_);\n    }\n    if (this.onMouseDownResizeWrapper_) {\n      browserEvents.unbind(this.onMouseDownResizeWrapper_);\n    }\n    Bubble.unbindDragEvents_();\n    dom.removeNode(this.bubbleGroup_);\n    this.disposed = true;\n  }\n\n  /**\n   * Move this bubble during a drag, taking into account whether or not there is\n   * a drag surface.\n   * @param {BlockDragSurfaceSvg} dragSurface The surface that carries\n   *     rendered items during a drag, or null if no drag surface is in use.\n   * @param {!Coordinate} newLoc The location to translate to, in\n   *     workspace coordinates.\n   * @package\n   */\n  moveDuringDrag(dragSurface, newLoc) {\n    if (dragSurface) {\n      dragSurface.translateSurface(newLoc.x, newLoc.y);\n    } else {\n      this.moveTo(newLoc.x, newLoc.y);\n    }\n    if (this.workspace_.RTL) {\n      this.relativeLeft_ = this.anchorXY_.x - newLoc.x - this.width_;\n    } else {\n      this.relativeLeft_ = newLoc.x - this.anchorXY_.x;\n    }\n    this.relativeTop_ = newLoc.y - this.anchorXY_.y;\n    this.renderArrow_();\n  }\n\n  /**\n   * Return the coordinates of the top-left corner of this bubble's body\n   * relative to the drawing surface's origin (0,0), in workspace units.\n   * @return {!Coordinate} Object with .x and .y properties.\n   */\n  getRelativeToSurfaceXY() {\n    return new Coordinate(\n        this.workspace_.RTL ?\n            -this.relativeLeft_ + this.anchorXY_.x - this.width_ :\n            this.anchorXY_.x + this.relativeLeft_,\n        this.anchorXY_.y + this.relativeTop_);\n  }\n\n  /**\n   * Set whether auto-layout of this bubble is enabled.  The first time a bubble\n   * is shown it positions itself to not cover any blocks.  Once a user has\n   * dragged it to reposition, it renders where the user put it.\n   * @param {boolean} enable True if auto-layout should be enabled, false\n   *     otherwise.\n   * @package\n   */\n  setAutoLayout(enable) {\n    this.autoLayout_ = enable;\n  }\n\n  /**\n   * Stop binding to the global mouseup and mousemove events.\n   * @private\n   */\n  static unbindDragEvents_() {\n    if (Bubble.onMouseUpWrapper_) {\n      browserEvents.unbind(Bubble.onMouseUpWrapper_);\n      Bubble.onMouseUpWrapper_ = null;\n    }\n    if (Bubble.onMouseMoveWrapper_) {\n      browserEvents.unbind(Bubble.onMouseMoveWrapper_);\n      Bubble.onMouseMoveWrapper_ = null;\n    }\n  }\n\n  /**\n   * Handle a mouse-up event while dragging a bubble's border or resize handle.\n   * @param {!Event} _e Mouse up event.\n   * @private\n   */\n  static bubbleMouseUp_(_e) {\n    Touch.clearTouchIdentifier();\n    Bubble.unbindDragEvents_();\n  }\n\n  /**\n   * Create the text for a non editable bubble.\n   * @param {string} text The text to display.\n   * @return {!SVGTextElement} The top-level node of the text.\n   * @package\n   */\n  static textToDom(text) {\n    const paragraph = dom.createSvgElement(\n        Svg.TEXT, {\n          'class': 'blocklyText blocklyBubbleText blocklyNoPointerEvents',\n          'y': Bubble.BORDER_WIDTH,\n        },\n        null);\n    const lines = text.split('\\n');\n    for (let i = 0; i < lines.length; i++) {\n      const tspanElement = dom.createSvgElement(\n          Svg.TSPAN, {'dy': '1em', 'x': Bubble.BORDER_WIDTH}, paragraph);\n      const textNode = document.createTextNode(lines[i]);\n      tspanElement.appendChild(textNode);\n    }\n    return paragraph;\n  }\n\n  /**\n   * Creates a bubble that can not be edited.\n   * @param {!SVGTextElement} paragraphElement The text element for the non\n   *     editable bubble.\n   * @param {!BlockSvg} block The block that the bubble is attached to.\n   * @param {!Coordinate} iconXY The coordinate of the icon.\n   * @return {!Bubble} The non editable bubble.\n   * @package\n   */\n  static createNonEditableBubble(paragraphElement, block, iconXY) {\n    const bubble = new Bubble(\n        /** @type {!WorkspaceSvg} */ (block.workspace), paragraphElement,\n        block.pathObject.svgPath,\n        /** @type {!Coordinate} */ (iconXY), null, null);\n    // Expose this bubble's block's ID on its top-level SVG group.\n    bubble.setSvgId(block.id);\n    if (block.RTL) {\n      // Right-align the paragraph.\n      // This cannot be done until the bubble is rendered on screen.\n      const maxWidth = paragraphElement.getBBox().width;\n      for (let i = 0, textElement;\n           (textElement = paragraphElement.childNodes[i]); i++) {\n        textElement.setAttribute('text-anchor', 'end');\n        textElement.setAttribute('x', maxWidth + Bubble.BORDER_WIDTH);\n      }\n    }\n    return bubble;\n  }\n};\n\n/**\n * Width of the border around the bubble.\n */\nBubble.BORDER_WIDTH = 6;\n\n/**\n * Determines the thickness of the base of the arrow in relation to the size\n * of the bubble.  Higher numbers result in thinner arrows.\n */\nBubble.ARROW_THICKNESS = 5;\n\n/**\n * The number of degrees that the arrow bends counter-clockwise.\n */\nBubble.ARROW_ANGLE = 20;\n\n/**\n * The sharpness of the arrow's bend.  Higher numbers result in smoother arrows.\n */\nBubble.ARROW_BEND = 4;\n\n/**\n * Distance between arrow point and anchor point.\n */\nBubble.ANCHOR_RADIUS = 8;\n\n/**\n * Mouse up event data.\n * @type {?browserEvents.Data}\n * @private\n */\nBubble.onMouseUpWrapper_ = null;\n\n/**\n * Mouse move event data.\n * @type {?browserEvents.Data}\n * @private\n */\nBubble.onMouseMoveWrapper_ = null;\n\nexports.Bubble = Bubble;\n","/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Base class for comment events.\n */\n'use strict';\n\n/**\n * Base class for comment events.\n * @class\n */\ngoog.module('Blockly.Events.CommentBase');\n\nconst Xml = goog.require('Blockly.Xml');\nconst eventUtils = goog.require('Blockly.Events.utils');\nconst utilsXml = goog.require('Blockly.utils.xml');\nconst {Abstract: AbstractEvent} = goog.require('Blockly.Events.Abstract');\n/* eslint-disable-next-line no-unused-vars */\nconst {CommentCreate} = goog.requireType('Blockly.Events.CommentCreate');\n/* eslint-disable-next-line no-unused-vars */\nconst {CommentDelete} = goog.requireType('Blockly.Events.CommentDelete');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceComment} = goog.requireType('Blockly.WorkspaceComment');\n\n\n/**\n * Abstract class for a comment event.\n * @extends {AbstractEvent}\n * @alias Blockly.Events.CommentBase\n */\nclass CommentBase extends AbstractEvent {\n  /**\n   * @param {!WorkspaceComment=} opt_comment The comment this event\n   *     corresponds to.  Undefined for a blank event.\n   */\n  constructor(opt_comment) {\n    super();\n    /**\n     * Whether or not an event is blank.\n     * @type {boolean}\n     */\n    this.isBlank = typeof opt_comment === 'undefined';\n\n    /**\n     * The ID of the comment this event pertains to.\n     * @type {string}\n     */\n    this.commentId = this.isBlank ? '' : opt_comment.id;\n\n    /**\n     * The workspace identifier for this event.\n     * @type {string}\n     */\n    this.workspaceId = this.isBlank ? '' : opt_comment.workspace.id;\n\n    /**\n     * The event group id for the group this event belongs to. Groups define\n     * events that should be treated as an single action from the user's\n     * perspective, and should be undone together.\n     * @type {string}\n     */\n    this.group = eventUtils.getGroup();\n\n    /**\n     * Sets whether the event should be added to the undo stack.\n     * @type {boolean}\n     */\n    this.recordUndo = eventUtils.getRecordUndo();\n  }\n\n  /**\n   * Encode the event as JSON.\n   * @return {!Object} JSON representation.\n   */\n  toJson() {\n    const json = super.toJson();\n    if (this.commentId) {\n      json['commentId'] = this.commentId;\n    }\n    return json;\n  }\n\n  /**\n   * Decode the JSON event.\n   * @param {!Object} json JSON representation.\n   */\n  fromJson(json) {\n    super.fromJson(json);\n    this.commentId = json['commentId'];\n  }\n\n  /**\n   * Helper function for Comment[Create|Delete]\n   * @param {!CommentCreate|!CommentDelete} event\n   *     The event to run.\n   * @param {boolean} create if True then Create, if False then Delete\n   */\n  static CommentCreateDeleteHelper(event, create) {\n    const workspace = event.getEventWorkspace_();\n    if (create) {\n      const xmlElement = utilsXml.createElement('xml');\n      xmlElement.appendChild(event.xml);\n      Xml.domToWorkspace(xmlElement, workspace);\n    } else {\n      const comment = workspace.getCommentById(event.commentId);\n      if (comment) {\n        comment.dispose();\n      } else {\n        // Only complain about root-level block.\n        console.warn(\n            'Can\\'t uncreate non-existent comment: ' + event.commentId);\n      }\n    }\n  }\n}\n\nexports.CommentBase = CommentBase;\n","/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Class for comment move event.\n */\n'use strict';\n\n/**\n * Class for comment move event.\n * @class\n */\ngoog.module('Blockly.Events.CommentMove');\n\nconst eventUtils = goog.require('Blockly.Events.utils');\nconst registry = goog.require('Blockly.registry');\nconst {CommentBase} = goog.require('Blockly.Events.CommentBase');\nconst {Coordinate} = goog.require('Blockly.utils.Coordinate');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceComment} = goog.requireType('Blockly.WorkspaceComment');\n\n\n/**\n * Class for a comment move event.  Created before the move.\n * @extends {CommentBase}\n * @alias Blockly.Events.CommentMove\n */\nclass CommentMove extends CommentBase {\n  /**\n   * @param {!WorkspaceComment=} opt_comment The comment that is being\n   *     moved.  Undefined for a blank event.\n   */\n  constructor(opt_comment) {\n    super(opt_comment);\n\n    /**\n     * Type of this event.\n     * @type {string}\n     */\n    this.type = eventUtils.COMMENT_MOVE;\n\n    if (!opt_comment) {\n      return;  // Blank event to be populated by fromJson.\n    }\n\n    /**\n     * The comment that is being moved.  Will be cleared after recording the new\n     * location.\n     * @type {WorkspaceComment}\n     */\n    this.comment_ = opt_comment;\n\n    /**\n     * The location before the move, in workspace coordinates.\n     * @type {!Coordinate}\n     */\n    this.oldCoordinate_ = opt_comment.getXY();\n\n    /**\n     * The location after the move, in workspace coordinates.\n     * @type {Coordinate}\n     */\n    this.newCoordinate_ = null;\n  }\n\n  /**\n   * Record the comment's new location.  Called after the move.  Can only be\n   * called once.\n   */\n  recordNew() {\n    if (!this.comment_) {\n      throw Error(\n          'Tried to record the new position of a comment on the ' +\n          'same event twice.');\n    }\n    this.newCoordinate_ = this.comment_.getXY();\n    this.comment_ = null;\n  }\n\n  /**\n   * Override the location before the move.  Use this if you don't create the\n   * event until the end of the move, but you know the original location.\n   * @param {!Coordinate} xy The location before the move,\n   *     in workspace coordinates.\n   */\n  setOldCoordinate(xy) {\n    this.oldCoordinate_ = xy;\n  }\n\n  // TODO (#1266): \"Full\" and \"minimal\" serialization.\n  /**\n   * Encode the event as JSON.\n   * @return {!Object} JSON representation.\n   */\n  toJson() {\n    const json = super.toJson();\n    if (this.oldCoordinate_) {\n      json['oldCoordinate'] = Math.round(this.oldCoordinate_.x) + ',' +\n          Math.round(this.oldCoordinate_.y);\n    }\n    if (this.newCoordinate_) {\n      json['newCoordinate'] = Math.round(this.newCoordinate_.x) + ',' +\n          Math.round(this.newCoordinate_.y);\n    }\n    return json;\n  }\n\n  /**\n   * Decode the JSON event.\n   * @param {!Object} json JSON representation.\n   */\n  fromJson(json) {\n    super.fromJson(json);\n\n    if (json['oldCoordinate']) {\n      const xy = json['oldCoordinate'].split(',');\n      this.oldCoordinate_ = new Coordinate(Number(xy[0]), Number(xy[1]));\n    }\n    if (json['newCoordinate']) {\n      const xy = json['newCoordinate'].split(',');\n      this.newCoordinate_ = new Coordinate(Number(xy[0]), Number(xy[1]));\n    }\n  }\n\n  /**\n   * Does this event record any change of state?\n   * @return {boolean} False if something changed.\n   */\n  isNull() {\n    return Coordinate.equals(this.oldCoordinate_, this.newCoordinate_);\n  }\n\n  /**\n   * Run a move event.\n   * @param {boolean} forward True if run forward, false if run backward (undo).\n   */\n  run(forward) {\n    const workspace = this.getEventWorkspace_();\n    const comment = workspace.getCommentById(this.commentId);\n    if (!comment) {\n      console.warn('Can\\'t move non-existent comment: ' + this.commentId);\n      return;\n    }\n\n    const target = forward ? this.newCoordinate_ : this.oldCoordinate_;\n    // TODO: Check if the comment is being dragged, and give up if so.\n    const current = comment.getXY();\n    comment.moveBy(target.x - current.x, target.y - current.y);\n  }\n}\n\nregistry.register(registry.Type.EVENT, eventUtils.COMMENT_MOVE, CommentMove);\n\nexports.CommentMove = CommentMove;\n","/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Methods for dragging a bubble visually.\n */\n'use strict';\n\n/**\n * Methods for dragging a bubble visually.\n * @class\n */\ngoog.module('Blockly.BubbleDragger');\n\nconst eventUtils = goog.require('Blockly.Events.utils');\nconst svgMath = goog.require('Blockly.utils.svgMath');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockDragSurfaceSvg} = goog.requireType('Blockly.BlockDragSurfaceSvg');\n/* eslint-disable-next-line no-unused-vars */\nconst {CommentMove} = goog.requireType('Blockly.Events.CommentMove');\nconst {ComponentManager} = goog.require('Blockly.ComponentManager');\nconst {Coordinate} = goog.require('Blockly.utils.Coordinate');\n/* eslint-disable-next-line no-unused-vars */\nconst {IBubble} = goog.requireType('Blockly.IBubble');\n/* eslint-disable-next-line no-unused-vars */\nconst {IDeleteArea} = goog.requireType('Blockly.IDeleteArea');\n/* eslint-disable-next-line no-unused-vars */\nconst {IDragTarget} = goog.requireType('Blockly.IDragTarget');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceCommentSvg} = goog.requireType('Blockly.WorkspaceCommentSvg');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceSvg} = goog.requireType('Blockly.WorkspaceSvg');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.Bubble');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.Events.CommentMove');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.constants');\n\n\n/**\n * Class for a bubble dragger.  It moves things on the bubble canvas around the\n * workspace when they are being dragged by a mouse or touch.  These can be\n * block comments, mutators, warnings, or workspace comments.\n * @alias Blockly.BubbleDragger\n */\nconst BubbleDragger = class {\n  /**\n   * @param {!IBubble} bubble The item on the bubble canvas to drag.\n   * @param {!WorkspaceSvg} workspace The workspace to drag on.\n   */\n  constructor(bubble, workspace) {\n    /**\n     * The item on the bubble canvas that is being dragged.\n     * @type {!IBubble}\n     * @private\n     */\n    this.draggingBubble_ = bubble;\n\n    /**\n     * The workspace on which the bubble is being dragged.\n     * @type {!WorkspaceSvg}\n     * @private\n     */\n    this.workspace_ = workspace;\n\n    /**\n     * Which drag target the mouse pointer is over, if any.\n     * @type {?IDragTarget}\n     * @private\n     */\n    this.dragTarget_ = null;\n\n    /**\n     * Whether the bubble would be deleted if dropped immediately.\n     * @type {boolean}\n     * @private\n     */\n    this.wouldDeleteBubble_ = false;\n\n    /**\n     * The location of the top left corner of the dragging bubble's body at the\n     * beginning of the drag, in workspace coordinates.\n     * @type {!Coordinate}\n     * @private\n     */\n    this.startXY_ = this.draggingBubble_.getRelativeToSurfaceXY();\n\n    /**\n     * The drag surface to move bubbles to during a drag, or null if none should\n     * be used.  Block dragging and bubble dragging use the same surface.\n     * @type {BlockDragSurfaceSvg}\n     * @private\n     */\n    this.dragSurface_ =\n        svgMath.is3dSupported() && !!workspace.getBlockDragSurface() ?\n        workspace.getBlockDragSurface() :\n        null;\n  }\n\n  /**\n   * Sever all links from this object.\n   * @package\n   * @suppress {checkTypes}\n   */\n  dispose() {\n    this.draggingBubble_ = null;\n    this.workspace_ = null;\n    this.dragSurface_ = null;\n  }\n\n  /**\n   * Start dragging a bubble.  This includes moving it to the drag surface.\n   * @package\n   */\n  startBubbleDrag() {\n    if (!eventUtils.getGroup()) {\n      eventUtils.setGroup(true);\n    }\n\n    this.workspace_.setResizesEnabled(false);\n    this.draggingBubble_.setAutoLayout(false);\n    if (this.dragSurface_) {\n      this.moveToDragSurface_();\n    }\n\n    this.draggingBubble_.setDragging && this.draggingBubble_.setDragging(true);\n  }\n\n  /**\n   * Execute a step of bubble dragging, based on the given event.  Update the\n   * display accordingly.\n   * @param {!Event} e The most recent move event.\n   * @param {!Coordinate} currentDragDeltaXY How far the pointer has\n   *     moved from the position at the start of the drag, in pixel units.\n   * @package\n   */\n  dragBubble(e, currentDragDeltaXY) {\n    const delta = this.pixelsToWorkspaceUnits_(currentDragDeltaXY);\n    const newLoc = Coordinate.sum(this.startXY_, delta);\n    this.draggingBubble_.moveDuringDrag(this.dragSurface_, newLoc);\n\n    const oldDragTarget = this.dragTarget_;\n    this.dragTarget_ = this.workspace_.getDragTarget(e);\n\n    const oldWouldDeleteBubble = this.wouldDeleteBubble_;\n    this.wouldDeleteBubble_ = this.shouldDelete_(this.dragTarget_);\n    if (oldWouldDeleteBubble !== this.wouldDeleteBubble_) {\n      // Prevent unnecessary add/remove class calls.\n      this.updateCursorDuringBubbleDrag_();\n    }\n\n    // Call drag enter/exit/over after wouldDeleteBlock is called in\n    // shouldDelete_\n    if (this.dragTarget_ !== oldDragTarget) {\n      oldDragTarget && oldDragTarget.onDragExit(this.draggingBubble_);\n      this.dragTarget_ && this.dragTarget_.onDragEnter(this.draggingBubble_);\n    }\n    this.dragTarget_ && this.dragTarget_.onDragOver(this.draggingBubble_);\n  }\n\n  /**\n   * Whether ending the drag would delete the bubble.\n   * @param {?IDragTarget} dragTarget The drag target that the bubblee is\n   *     currently over.\n   * @return {boolean} Whether dropping the bubble immediately would delete the\n   *    block.\n   * @private\n   */\n  shouldDelete_(dragTarget) {\n    if (dragTarget) {\n      const componentManager = this.workspace_.getComponentManager();\n      const isDeleteArea = componentManager.hasCapability(\n          dragTarget.id, ComponentManager.Capability.DELETE_AREA);\n      if (isDeleteArea) {\n        return (/** @type {!IDeleteArea} */ (dragTarget))\n            .wouldDelete(this.draggingBubble_, false);\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Update the cursor (and possibly the trash can lid) to reflect whether the\n   * dragging bubble would be deleted if released immediately.\n   * @private\n   */\n  updateCursorDuringBubbleDrag_() {\n    this.draggingBubble_.setDeleteStyle(this.wouldDeleteBubble_);\n  }\n\n  /**\n   * Finish a bubble drag and put the bubble back on the workspace.\n   * @param {!Event} e The mouseup/touchend event.\n   * @param {!Coordinate} currentDragDeltaXY How far the pointer has\n   *     moved from the position at the start of the drag, in pixel units.\n   * @package\n   */\n  endBubbleDrag(e, currentDragDeltaXY) {\n    // Make sure internal state is fresh.\n    this.dragBubble(e, currentDragDeltaXY);\n\n    const preventMove = this.dragTarget_ &&\n        this.dragTarget_.shouldPreventMove(this.draggingBubble_);\n    let newLoc;\n    if (preventMove) {\n      newLoc = this.startXY_;\n    } else {\n      const delta = this.pixelsToWorkspaceUnits_(currentDragDeltaXY);\n      newLoc = Coordinate.sum(this.startXY_, delta);\n    }\n    // Move the bubble to its final location.\n    this.draggingBubble_.moveTo(newLoc.x, newLoc.y);\n\n    if (this.dragTarget_) {\n      this.dragTarget_.onDrop(this.draggingBubble_);\n    }\n\n    if (this.wouldDeleteBubble_) {\n      // Fire a move event, so we know where to go back to for an undo.\n      this.fireMoveEvent_();\n      this.draggingBubble_.dispose(false, true);\n    } else {\n      // Put everything back onto the bubble canvas.\n      if (this.dragSurface_) {\n        this.dragSurface_.clearAndHide(this.workspace_.getBubbleCanvas());\n      }\n      if (this.draggingBubble_.setDragging) {\n        this.draggingBubble_.setDragging(false);\n      }\n      this.fireMoveEvent_();\n    }\n    this.workspace_.setResizesEnabled(true);\n\n    eventUtils.setGroup(false);\n  }\n\n  /**\n   * Fire a move event at the end of a bubble drag.\n   * @private\n   */\n  fireMoveEvent_() {\n    if (this.draggingBubble_.isComment) {\n      // TODO (adodson): Resolve build errors when requiring\n      // WorkspaceCommentSvg.\n      const event = /** @type {!CommentMove} */\n          (new (eventUtils.get(eventUtils.COMMENT_MOVE))(\n              /** @type {!WorkspaceCommentSvg} */ (this.draggingBubble_)));\n      event.setOldCoordinate(this.startXY_);\n      event.recordNew();\n      eventUtils.fire(event);\n    }\n    // TODO (fenichel): move events for comments.\n    return;\n  }\n\n  /**\n   * Convert a coordinate object from pixels to workspace units, including a\n   * correction for mutator workspaces.\n   * This function does not consider differing origins.  It simply scales the\n   * input's x and y values.\n   * @param {!Coordinate} pixelCoord A coordinate with x and y\n   *     values in CSS pixel units.\n   * @return {!Coordinate} The input coordinate divided by the\n   *     workspace scale.\n   * @private\n   */\n  pixelsToWorkspaceUnits_(pixelCoord) {\n    const result = new Coordinate(\n        pixelCoord.x / this.workspace_.scale,\n        pixelCoord.y / this.workspace_.scale);\n    if (this.workspace_.isMutator) {\n      // If we're in a mutator, its scale is always 1, purely because of some\n      // oddities in our rendering optimizations.  The actual scale is the same\n      // as the scale on the parent workspace. Fix that for dragging.\n      const mainScale = this.workspace_.options.parentWorkspace.scale;\n      result.scale(1 / mainScale);\n    }\n    return result;\n  }\n\n  /**\n   * Move the bubble onto the drag surface at the beginning of a drag.  Move the\n   * drag surface to preserve the apparent location of the bubble.\n   * @private\n   */\n  moveToDragSurface_() {\n    this.draggingBubble_.moveTo(0, 0);\n    this.dragSurface_.translateSurface(this.startXY_.x, this.startXY_.y);\n    // Execute the move on the top-level SVG component.\n    this.dragSurface_.setBlocksAndShow(this.draggingBubble_.getSvgRoot());\n  }\n};\n\nexports.BubbleDragger = BubbleDragger;\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Methods for dragging a workspace visually.\n */\n'use strict';\n\n/**\n * Methods for dragging a workspace visually.\n * @class\n */\ngoog.module('Blockly.WorkspaceDragger');\n\nconst common = goog.require('Blockly.common');\nconst {Coordinate} = goog.require('Blockly.utils.Coordinate');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceSvg} = goog.requireType('Blockly.WorkspaceSvg');\n\n\n/**\n * Class for a workspace dragger.  It moves the workspace around when it is\n * being dragged by a mouse or touch.\n * Note that the workspace itself manages whether or not it has a drag surface\n * and how to do translations based on that.  This simply passes the right\n * commands based on events.\n * @alias Blockly.WorkspaceDragger\n */\nclass WorkspaceDragger {\n  /**\n   * @param {!WorkspaceSvg} workspace The workspace to drag.\n   */\n  constructor(workspace) {\n    /**\n     * @type {!WorkspaceSvg}\n     * @private\n     */\n    this.workspace_ = workspace;\n\n    /**\n     * Whether horizontal scroll is enabled.\n     * @type {boolean}\n     * @private\n     */\n    this.horizontalScrollEnabled_ = this.workspace_.isMovableHorizontally();\n\n    /**\n     * Whether vertical scroll is enabled.\n     * @type {boolean}\n     * @private\n     */\n    this.verticalScrollEnabled_ = this.workspace_.isMovableVertically();\n\n    /**\n     * The scroll position of the workspace at the beginning of the drag.\n     * Coordinate system: pixel coordinates.\n     * @type {!Coordinate}\n     * @protected\n     */\n    this.startScrollXY_ = new Coordinate(workspace.scrollX, workspace.scrollY);\n  }\n  /**\n   * Sever all links from this object.\n   * @package\n   * @suppress {checkTypes}\n   */\n  dispose() {\n    this.workspace_ = null;\n  }\n  /**\n   * Start dragging the workspace.\n   * @package\n   */\n  startDrag() {\n    if (common.getSelected()) {\n      common.getSelected().unselect();\n    }\n    this.workspace_.setupDragSurface();\n  }\n  /**\n   * Finish dragging the workspace and put everything back where it belongs.\n   * @param {!Coordinate} currentDragDeltaXY How far the pointer has\n   *     moved from the position at the start of the drag, in pixel coordinates.\n   * @package\n   */\n  endDrag(currentDragDeltaXY) {\n    // Make sure everything is up to date.\n    this.drag(currentDragDeltaXY);\n    this.workspace_.resetDragSurface();\n  }\n  /**\n   * Move the workspace based on the most recent mouse movements.\n   * @param {!Coordinate} currentDragDeltaXY How far the pointer has\n   *     moved from the position at the start of the drag, in pixel coordinates.\n   * @package\n   */\n  drag(currentDragDeltaXY) {\n    const newXY = Coordinate.sum(this.startScrollXY_, currentDragDeltaXY);\n\n    if (this.horizontalScrollEnabled_ && this.verticalScrollEnabled_) {\n      this.workspace_.scroll(newXY.x, newXY.y);\n    } else if (this.horizontalScrollEnabled_) {\n      this.workspace_.scroll(newXY.x, this.workspace_.scrollY);\n    } else if (this.verticalScrollEnabled_) {\n      this.workspace_.scroll(this.workspace_.scrollX, newXY.y);\n    } else {\n      throw new TypeError('Invalid state.');\n    }\n  }\n}\n\nexports.WorkspaceDragger = WorkspaceDragger;\n","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The interface for a block dragger.\n */\n\n'use strict';\n\n/**\n * The interface for a block dragger.\n * @namespace Blockly.IBlockDragger\n */\ngoog.module('Blockly.IBlockDragger');\n\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockSvg} = goog.requireType('Blockly.BlockSvg');\n/* eslint-disable-next-line no-unused-vars */\nconst {Coordinate} = goog.requireType('Blockly.utils.Coordinate');\n\n\n/**\n * A block dragger interface.\n * @interface\n * @alias Blockly.IBlockDragger\n */\nconst IBlockDragger = function() {};\n\n/**\n * Start dragging a block.  This includes moving it to the drag surface.\n * @param {!Coordinate} currentDragDeltaXY How far the pointer has\n *     moved from the position at mouse down, in pixel units.\n * @param {boolean} healStack Whether or not to heal the stack after\n *     disconnecting.\n */\nIBlockDragger.prototype.startDrag;\n\n/**\n * Execute a step of block dragging, based on the given event.  Update the\n * display accordingly.\n * @param {!Event} e The most recent move event.\n * @param {!Coordinate} currentDragDeltaXY How far the pointer has\n *     moved from the position at the start of the drag, in pixel units.\n */\nIBlockDragger.prototype.drag;\n\n/**\n * Finish a block drag and put the block back on the workspace.\n * @param {!Event} e The mouseup/touchend event.\n * @param {!Coordinate} currentDragDeltaXY How far the pointer has\n *     moved from the position at the start of the drag, in pixel units.\n */\nIBlockDragger.prototype.endDrag;\n\n/**\n * Get a list of the insertion markers that currently exist.  Drags have 0, 1,\n * or 2 insertion markers.\n * @return {!Array.<!BlockSvg>} A possibly empty list of insertion\n *     marker blocks.\n */\nIBlockDragger.prototype.getInsertionMarkers;\n\nexports.IBlockDragger = IBlockDragger;\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Class that controls updates to connections during drags.\n */\n'use strict';\n\n/**\n * Class that controls updates to connections during drags.\n * @class\n */\ngoog.module('Blockly.InsertionMarkerManager');\n\nconst blockAnimations = goog.require('Blockly.blockAnimations');\nconst common = goog.require('Blockly.common');\nconst constants = goog.require('Blockly.constants');\nconst eventUtils = goog.require('Blockly.Events.utils');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockSvg} = goog.requireType('Blockly.BlockSvg');\nconst {ComponentManager} = goog.require('Blockly.ComponentManager');\nconst {config} = goog.require('Blockly.config');\nconst {ConnectionType} = goog.require('Blockly.ConnectionType');\n/* eslint-disable-next-line no-unused-vars */\nconst {Coordinate} = goog.requireType('Blockly.utils.Coordinate');\n/* eslint-disable-next-line no-unused-vars */\nconst {IDeleteArea} = goog.requireType('Blockly.IDeleteArea');\n/* eslint-disable-next-line no-unused-vars */\nconst {IDragTarget} = goog.requireType('Blockly.IDragTarget');\n/* eslint-disable-next-line no-unused-vars */\nconst {RenderedConnection} = goog.requireType('Blockly.RenderedConnection');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceSvg} = goog.requireType('Blockly.WorkspaceSvg');\n\n\n/**\n * An error message to throw if the block created by createMarkerBlock_ is\n * missing any components.\n * @type {string}\n * @const\n */\nconst DUPLICATE_BLOCK_ERROR = 'The insertion marker ' +\n    'manager tried to create a marker but the result is missing %1. If ' +\n    'you are using a mutator, make sure your domToMutation method is ' +\n    'properly defined.';\n\n\n/**\n * Class that controls updates to connections during drags.  It is primarily\n * responsible for finding the closest eligible connection and highlighting or\n * unhighlighting it as needed during a drag.\n * @alias Blockly.InsertionMarkerManager\n */\nclass InsertionMarkerManager {\n  /**\n   * @param {!BlockSvg} block The top block in the stack being dragged.\n   */\n  constructor(block) {\n    common.setSelected(block);\n\n    /**\n     * The top block in the stack being dragged.\n     * Does not change during a drag.\n     * @type {!BlockSvg}\n     * @private\n     */\n    this.topBlock_ = block;\n\n    /**\n     * The workspace on which these connections are being dragged.\n     * Does not change during a drag.\n     * @type {!WorkspaceSvg}\n     * @private\n     */\n    this.workspace_ = block.workspace;\n\n    /**\n     * The last connection on the stack, if it's not the last connection on the\n     * first block.\n     * Set in initAvailableConnections, if at all.\n     * @type {RenderedConnection}\n     * @private\n     */\n    this.lastOnStack_ = null;\n\n    /**\n     * The insertion marker corresponding to the last block in the stack, if\n     * that's not the same as the first block in the stack.\n     * Set in initAvailableConnections, if at all\n     * @type {BlockSvg}\n     * @private\n     */\n    this.lastMarker_ = null;\n\n    /**\n     * The insertion marker that shows up between blocks to show where a block\n     * would go if dropped immediately.\n     * @type {BlockSvg}\n     * @private\n     */\n    this.firstMarker_ = this.createMarkerBlock_(this.topBlock_);\n\n    /**\n     * The connection that this block would connect to if released immediately.\n     * Updated on every mouse move.\n     * This is not on any of the blocks that are being dragged.\n     * @type {RenderedConnection}\n     * @private\n     */\n    this.closestConnection_ = null;\n\n    /**\n     * The connection that would connect to this.closestConnection_ if this\n     * block were released immediately. Updated on every mouse move. This is on\n     * the top block that is being dragged or the last block in the dragging\n     * stack.\n     * @type {RenderedConnection}\n     * @private\n     */\n    this.localConnection_ = null;\n\n    /**\n     * Whether the block would be deleted if it were dropped immediately.\n     * Updated on every mouse move.\n     * @type {boolean}\n     * @private\n     */\n    this.wouldDeleteBlock_ = false;\n\n    /**\n     * Connection on the insertion marker block that corresponds to\n     * this.localConnection_ on the currently dragged block.\n     * @type {RenderedConnection}\n     * @private\n     */\n    this.markerConnection_ = null;\n\n    /**\n     * The block that currently has an input being highlighted, or null.\n     * @type {BlockSvg}\n     * @private\n     */\n    this.highlightedBlock_ = null;\n\n    /**\n     * The block being faded to indicate replacement, or null.\n     * @type {BlockSvg}\n     * @private\n     */\n    this.fadedBlock_ = null;\n\n    /**\n     * The connections on the dragging blocks that are available to connect to\n     * other blocks.  This includes all open connections on the top block, as\n     * well as the last connection on the block stack. Does not change during a\n     * drag.\n     * @type {!Array<!RenderedConnection>}\n     * @private\n     */\n    this.availableConnections_ = this.initAvailableConnections_();\n  }\n\n  /**\n   * Sever all links from this object.\n   * @package\n   */\n  dispose() {\n    this.availableConnections_.length = 0;\n\n    eventUtils.disable();\n    try {\n      if (this.firstMarker_) {\n        this.firstMarker_.dispose();\n      }\n      if (this.lastMarker_) {\n        this.lastMarker_.dispose();\n      }\n    } finally {\n      eventUtils.enable();\n    }\n  }\n\n  /**\n   * Update the available connections for the top block. These connections can\n   * change if a block is unplugged and the stack is healed.\n   * @package\n   */\n  updateAvailableConnections() {\n    this.availableConnections_ = this.initAvailableConnections_();\n  }\n\n  /**\n   * Return whether the block would be deleted if dropped immediately, based on\n   * information from the most recent move event.\n   * @return {boolean} True if the block would be deleted if dropped\n   *     immediately.\n   * @package\n   */\n  wouldDeleteBlock() {\n    return this.wouldDeleteBlock_;\n  }\n\n  /**\n   * Return whether the block would be connected if dropped immediately, based\n   * on information from the most recent move event.\n   * @return {boolean} True if the block would be connected if dropped\n   *   immediately.\n   * @package\n   */\n  wouldConnectBlock() {\n    return !!this.closestConnection_;\n  }\n\n  /**\n   * Connect to the closest connection and render the results.\n   * This should be called at the end of a drag.\n   * @package\n   */\n  applyConnections() {\n    if (this.closestConnection_) {\n      // Don't fire events for insertion markers.\n      eventUtils.disable();\n      this.hidePreview_();\n      eventUtils.enable();\n      // Connect two blocks together.\n      this.localConnection_.connect(this.closestConnection_);\n      if (this.topBlock_.rendered) {\n        // Trigger a connection animation.\n        // Determine which connection is inferior (lower in the source stack).\n        const inferiorConnection = this.localConnection_.isSuperior() ?\n            this.closestConnection_ :\n            this.localConnection_;\n        blockAnimations.connectionUiEffect(inferiorConnection.getSourceBlock());\n        // Bring the just-edited stack to the front.\n        const rootBlock = this.topBlock_.getRootBlock();\n        rootBlock.bringToFront();\n      }\n    }\n  }\n\n  /**\n   * Update connections based on the most recent move location.\n   * @param {!Coordinate} dxy Position relative to drag start,\n   *     in workspace units.\n   * @param {?IDragTarget} dragTarget The drag target that the block is\n   *     currently over.\n   * @package\n   */\n  update(dxy, dragTarget) {\n    const candidate = this.getCandidate_(dxy);\n\n    this.wouldDeleteBlock_ = this.shouldDelete_(candidate, dragTarget);\n\n    const shouldUpdate =\n        this.wouldDeleteBlock_ || this.shouldUpdatePreviews_(candidate, dxy);\n\n    if (shouldUpdate) {\n      // Don't fire events for insertion marker creation or movement.\n      eventUtils.disable();\n      this.maybeHidePreview_(candidate);\n      this.maybeShowPreview_(candidate);\n      eventUtils.enable();\n    }\n  }\n\n  /**\n   * Create an insertion marker that represents the given block.\n   * @param {!BlockSvg} sourceBlock The block that the insertion marker\n   *     will represent.\n   * @return {!BlockSvg} The insertion marker that represents the given\n   *     block.\n   * @private\n   */\n  createMarkerBlock_(sourceBlock) {\n    const imType = sourceBlock.type;\n\n    eventUtils.disable();\n    let result;\n    try {\n      result = this.workspace_.newBlock(imType);\n      result.setInsertionMarker(true);\n      if (sourceBlock.saveExtraState) {\n        const state = sourceBlock.saveExtraState();\n        if (state) {\n          result.loadExtraState(state);\n        }\n      } else if (sourceBlock.mutationToDom) {\n        const oldMutationDom = sourceBlock.mutationToDom();\n        if (oldMutationDom) {\n          result.domToMutation(oldMutationDom);\n        }\n      }\n      // Copy field values from the other block.  These values may impact the\n      // rendered size of the insertion marker.  Note that we do not care about\n      // child blocks here.\n      for (let i = 0; i < sourceBlock.inputList.length; i++) {\n        const sourceInput = sourceBlock.inputList[i];\n        if (sourceInput.name === constants.COLLAPSED_INPUT_NAME) {\n          continue;  // Ignore the collapsed input.\n        }\n        const resultInput = result.inputList[i];\n        if (!resultInput) {\n          throw new Error(DUPLICATE_BLOCK_ERROR.replace('%1', 'an input'));\n        }\n        for (let j = 0; j < sourceInput.fieldRow.length; j++) {\n          const sourceField = sourceInput.fieldRow[j];\n          const resultField = resultInput.fieldRow[j];\n          if (!resultField) {\n            throw new Error(DUPLICATE_BLOCK_ERROR.replace('%1', 'a field'));\n          }\n          resultField.setValue(sourceField.getValue());\n        }\n      }\n\n      result.setCollapsed(sourceBlock.isCollapsed());\n      result.setInputsInline(sourceBlock.getInputsInline());\n\n      result.initSvg();\n      result.getSvgRoot().setAttribute('visibility', 'hidden');\n    } finally {\n      eventUtils.enable();\n    }\n\n    return result;\n  }\n\n  /**\n   * Populate the list of available connections on this block stack.  This\n   * should only be called once, at the beginning of a drag. If the stack has\n   * more than one block, this function will populate lastOnStack_ and create\n   * the corresponding insertion marker.\n   * @return {!Array<!RenderedConnection>} A list of available\n   *     connections.\n   * @private\n   */\n  initAvailableConnections_() {\n    const available = this.topBlock_.getConnections_(false);\n    // Also check the last connection on this stack\n    const lastOnStack = this.topBlock_.lastConnectionInStack(true);\n    if (lastOnStack && lastOnStack !== this.topBlock_.nextConnection) {\n      available.push(lastOnStack);\n      this.lastOnStack_ = lastOnStack;\n      if (this.lastMarker_) {\n        eventUtils.disable();\n        try {\n          this.lastMarker_.dispose();\n        } finally {\n          eventUtils.enable();\n        }\n      }\n      this.lastMarker_ = this.createMarkerBlock_(lastOnStack.getSourceBlock());\n    }\n    return available;\n  }\n\n  /**\n   * Whether the previews (insertion marker and replacement marker) should be\n   * updated based on the closest candidate and the current drag distance.\n   * @param {!Object} candidate An object containing a local connection, a\n   *     closest connection, and a radius.  Returned by getCandidate_.\n   * @param {!Coordinate} dxy Position relative to drag start,\n   *     in workspace units.\n   * @return {boolean} Whether the preview should be updated.\n   * @private\n   */\n  shouldUpdatePreviews_(candidate, dxy) {\n    const candidateLocal = candidate.local;\n    const candidateClosest = candidate.closest;\n    const radius = candidate.radius;\n\n    // Found a connection!\n    if (candidateLocal && candidateClosest) {\n      // We're already showing an insertion marker.\n      // Decide whether the new connection has higher priority.\n      if (this.localConnection_ && this.closestConnection_) {\n        // The connection was the same as the current connection.\n        if (this.closestConnection_ === candidateClosest &&\n            this.localConnection_ === candidateLocal) {\n          return false;\n        }\n        const xDiff =\n            this.localConnection_.x + dxy.x - this.closestConnection_.x;\n        const yDiff =\n            this.localConnection_.y + dxy.y - this.closestConnection_.y;\n        const curDistance = Math.sqrt(xDiff * xDiff + yDiff * yDiff);\n        // Slightly prefer the existing preview over a new preview.\n        return !(\n            candidateClosest &&\n            radius > curDistance - config.currentConnectionPreference);\n      } else if (!this.localConnection_ && !this.closestConnection_) {\n        // We weren't showing a preview before, but we should now.\n        return true;\n      } else {\n        console.error(\n            'Only one of localConnection_ and closestConnection_ was set.');\n      }\n    } else {  // No connection found.\n      // Only need to update if we were showing a preview before.\n      return !!(this.localConnection_ && this.closestConnection_);\n    }\n\n    console.error(\n        'Returning true from shouldUpdatePreviews, but it\\'s not clear why.');\n    return true;\n  }\n\n  /**\n   * Find the nearest valid connection, which may be the same as the current\n   * closest connection.\n   * @param {!Coordinate} dxy Position relative to drag start,\n   *     in workspace units.\n   * @return {!Object} An object containing a local connection, a closest\n   *     connection, and a radius.\n   * @private\n   */\n  getCandidate_(dxy) {\n    let radius = this.getStartRadius_();\n    let candidateClosest = null;\n    let candidateLocal = null;\n\n    // It's possible that a block has added or removed connections during a\n    // drag, (e.g. in a drag/move event handler), so let's update the available\n    // connections. Note that this will be called on every move while dragging,\n    // so it might cause slowness, especially if the block stack is large.  If\n    // so, maybe it could be made more efficient. Also note that we won't update\n    // the connections if we've already connected the insertion marker to a\n    // block.\n    if (!this.markerConnection_ || !this.markerConnection_.isConnected()) {\n      this.updateAvailableConnections();\n    }\n\n    for (let i = 0; i < this.availableConnections_.length; i++) {\n      const myConnection = this.availableConnections_[i];\n      const neighbour = myConnection.closest(radius, dxy);\n      if (neighbour.connection) {\n        candidateClosest = neighbour.connection;\n        candidateLocal = myConnection;\n        radius = neighbour.radius;\n      }\n    }\n    return {closest: candidateClosest, local: candidateLocal, radius: radius};\n  }\n\n  /**\n   * Decide the radius at which to start searching for the closest connection.\n   * @return {number} The radius at which to start the search for the closest\n   *     connection.\n   * @private\n   */\n  getStartRadius_() {\n    // If there is already a connection highlighted,\n    // increase the radius we check for making new connections.\n    // Why? When a connection is highlighted, blocks move around when the\n    // insertion marker is created, which could cause the connection became out\n    // of range. By increasing radiusConnection when a connection already\n    // exists, we never \"lose\" the connection from the offset.\n    if (this.closestConnection_ && this.localConnection_) {\n      return config.connectingSnapRadius;\n    }\n    return config.snapRadius;\n  }\n\n  /**\n   * Whether ending the drag would delete the block.\n   * @param {!Object} candidate An object containing a local connection, a\n   *     closest\n   *    connection, and a radius.\n   * @param {?IDragTarget} dragTarget The drag target that the block is\n   *     currently over.\n   * @return {boolean} Whether dropping the block immediately would delete the\n   *    block.\n   * @private\n   */\n  shouldDelete_(candidate, dragTarget) {\n    if (dragTarget) {\n      const componentManager = this.workspace_.getComponentManager();\n      const isDeleteArea = componentManager.hasCapability(\n          dragTarget.id, ComponentManager.Capability.DELETE_AREA);\n      if (isDeleteArea) {\n        return (\n                   /** @type {!IDeleteArea} */ (dragTarget))\n            .wouldDelete(this.topBlock_, candidate && !!candidate.closest);\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Show an insertion marker or replacement highlighting during a drag, if\n   * needed.\n   * At the beginning of this function, this.localConnection_ and\n   * this.closestConnection_ should both be null.\n   * @param {!Object} candidate An object containing a local connection, a\n   *     closest connection, and a radius.\n   * @private\n   */\n  maybeShowPreview_(candidate) {\n    // Nope, don't add a marker.\n    if (this.wouldDeleteBlock_) {\n      return;\n    }\n    const closest = candidate.closest;\n    const local = candidate.local;\n\n    // Nothing to connect to.\n    if (!closest) {\n      return;\n    }\n\n    // Something went wrong and we're trying to connect to an invalid\n    // connection.\n    if (closest === this.closestConnection_ ||\n        closest.getSourceBlock().isInsertionMarker()) {\n      console.log('Trying to connect to an insertion marker');\n      return;\n    }\n    // Add an insertion marker or replacement marker.\n    this.closestConnection_ = closest;\n    this.localConnection_ = local;\n    this.showPreview_();\n  }\n\n  /**\n   * A preview should be shown.  This function figures out if it should be a\n   * block highlight or an insertion marker, and shows the appropriate one.\n   * @private\n   */\n  showPreview_() {\n    const closest = this.closestConnection_;\n    const renderer = this.workspace_.getRenderer();\n    const method = renderer.getConnectionPreviewMethod(\n        /** @type {!RenderedConnection} */ (closest),\n        /** @type {!RenderedConnection} */ (this.localConnection_),\n        this.topBlock_);\n\n    switch (method) {\n      case InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:\n        this.showInsertionInputOutline_();\n        break;\n      case InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:\n        this.showInsertionMarker_();\n        break;\n      case InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:\n        this.showReplacementFade_();\n        break;\n    }\n\n    // Optionally highlight the actual connection, as a nod to previous\n    // behaviour.\n    if (closest && renderer.shouldHighlightConnection(closest)) {\n      closest.highlight();\n    }\n  }\n\n  /**\n   * Show an insertion marker or replacement highlighting during a drag, if\n   * needed.\n   * At the end of this function, this.localConnection_ and\n   * this.closestConnection_ should both be null.\n   * @param {!Object} candidate An object containing a local connection, a\n   *     closest connection, and a radius.\n   * @private\n   */\n  maybeHidePreview_(candidate) {\n    // If there's no new preview, remove the old one but don't bother deleting\n    // it. We might need it later, and this saves disposing of it and recreating\n    // it.\n    if (!candidate.closest) {\n      this.hidePreview_();\n    } else {\n      // If there's a new preview and there was an preview before, and either\n      // connection has changed, remove the old preview.\n      const hadPreview = this.closestConnection_ && this.localConnection_;\n      const closestChanged = this.closestConnection_ !== candidate.closest;\n      const localChanged = this.localConnection_ !== candidate.local;\n\n      // Also hide if we had a preview before but now we're going to delete\n      // instead.\n      if (hadPreview &&\n          (closestChanged || localChanged || this.wouldDeleteBlock_)) {\n        this.hidePreview_();\n      }\n    }\n\n    // Either way, clear out old state.\n    this.markerConnection_ = null;\n    this.closestConnection_ = null;\n    this.localConnection_ = null;\n  }\n\n  /**\n   * A preview should be hidden.  This function figures out if it is a block\n   *  highlight or an insertion marker, and hides the appropriate one.\n   * @private\n   */\n  hidePreview_() {\n    if (this.closestConnection_ && this.closestConnection_.targetBlock() &&\n        this.workspace_.getRenderer().shouldHighlightConnection(\n            this.closestConnection_)) {\n      this.closestConnection_.unhighlight();\n    }\n    if (this.fadedBlock_) {\n      this.hideReplacementFade_();\n    } else if (this.highlightedBlock_) {\n      this.hideInsertionInputOutline_();\n    } else if (this.markerConnection_) {\n      this.hideInsertionMarker_();\n    }\n  }\n\n  /**\n   * Shows an insertion marker connected to the appropriate blocks (based on\n   * manager state).\n   * @private\n   */\n  showInsertionMarker_() {\n    const local = this.localConnection_;\n    const closest = this.closestConnection_;\n\n    const isLastInStack = this.lastOnStack_ && local === this.lastOnStack_;\n    let imBlock = isLastInStack ? this.lastMarker_ : this.firstMarker_;\n    let imConn;\n    try {\n      imConn = imBlock.getMatchingConnection(local.getSourceBlock(), local);\n    } catch (e) {\n      // It's possible that the number of connections on the local block has\n      // changed since the insertion marker was originally created.  Let's\n      // recreate the insertion marker and try again. In theory we could\n      // probably recreate the marker block (e.g. in getCandidate_), which is\n      // called more often during the drag, but creating a block that often\n      // might be too slow, so we only do it if necessary.\n      this.firstMarker_ = this.createMarkerBlock_(this.topBlock_);\n      imBlock = isLastInStack ? this.lastMarker_ : this.firstMarker_;\n      imConn = imBlock.getMatchingConnection(local.getSourceBlock(), local);\n    }\n\n    if (imConn === this.markerConnection_) {\n      throw Error(\n          'Made it to showInsertionMarker_ even though the marker isn\\'t ' +\n          'changing');\n    }\n\n    // Render disconnected from everything else so that we have a valid\n    // connection location.\n    imBlock.render();\n    imBlock.rendered = true;\n    imBlock.getSvgRoot().setAttribute('visibility', 'visible');\n\n    if (imConn && closest) {\n      // Position so that the existing block doesn't move.\n      imBlock.positionNearConnection(imConn, closest);\n    }\n    if (closest) {\n      // Connect() also renders the insertion marker.\n      imConn.connect(closest);\n    }\n\n    this.markerConnection_ = imConn;\n  }\n\n  /**\n   * Disconnects and hides the current insertion marker. Should return the\n   * blocks to their original state.\n   * @private\n   */\n  hideInsertionMarker_() {\n    if (!this.markerConnection_) {\n      console.log('No insertion marker connection to disconnect');\n      return;\n    }\n\n    const imConn = this.markerConnection_;\n    const imBlock = imConn.getSourceBlock();\n    const markerNext = imBlock.nextConnection;\n    const markerPrev = imBlock.previousConnection;\n    const markerOutput = imBlock.outputConnection;\n\n    const isFirstInStatementStack =\n        (imConn === markerNext && !(markerPrev && markerPrev.targetConnection));\n\n    const isFirstInOutputStack = imConn.type === ConnectionType.INPUT_VALUE &&\n        !(markerOutput && markerOutput.targetConnection);\n    // The insertion marker is the first block in a stack.  Unplug won't do\n    // anything in that case.  Instead, unplug the following block.\n    if (isFirstInStatementStack || isFirstInOutputStack) {\n      imConn.targetBlock().unplug(false);\n    } else if (\n        imConn.type === ConnectionType.NEXT_STATEMENT &&\n        imConn !== markerNext) {\n      // Inside of a C-block, first statement connection.\n      const innerConnection = imConn.targetConnection;\n      innerConnection.getSourceBlock().unplug(false);\n\n      const previousBlockNextConnection =\n          markerPrev ? markerPrev.targetConnection : null;\n\n      imBlock.unplug(true);\n      if (previousBlockNextConnection) {\n        previousBlockNextConnection.connect(innerConnection);\n      }\n    } else {\n      imBlock.unplug(true /* healStack */);\n    }\n\n    if (imConn.targetConnection) {\n      throw Error(\n          'markerConnection_ still connected at the end of ' +\n          'disconnectInsertionMarker');\n    }\n\n    this.markerConnection_ = null;\n    const svg = imBlock.getSvgRoot();\n    if (svg) {\n      svg.setAttribute('visibility', 'hidden');\n    }\n  }\n\n  /**\n   * Shows an outline around the input the closest connection belongs to.\n   * @private\n   */\n  showInsertionInputOutline_() {\n    const closest = this.closestConnection_;\n    this.highlightedBlock_ = closest.getSourceBlock();\n    this.highlightedBlock_.highlightShapeForInput(closest, true);\n  }\n\n  /**\n   * Hides any visible input outlines.\n   * @private\n   */\n  hideInsertionInputOutline_() {\n    this.highlightedBlock_.highlightShapeForInput(\n        this.closestConnection_, false);\n    this.highlightedBlock_ = null;\n  }\n\n  /**\n   * Shows a replacement fade affect on the closest connection's target block\n   * (the block that is currently connected to it).\n   * @private\n   */\n  showReplacementFade_() {\n    this.fadedBlock_ = this.closestConnection_.targetBlock();\n    this.fadedBlock_.fadeForReplacement(true);\n  }\n\n  /**\n   * Hides/Removes any visible fade affects.\n   * @private\n   */\n  hideReplacementFade_() {\n    this.fadedBlock_.fadeForReplacement(false);\n    this.fadedBlock_ = null;\n  }\n\n  /**\n   * Get a list of the insertion markers that currently exist.  Drags have 0, 1,\n   * or 2 insertion markers.\n   * @return {!Array<!BlockSvg>} A possibly empty list of insertion\n   *     marker blocks.\n   * @package\n   */\n  getInsertionMarkers() {\n    const result = [];\n    if (this.firstMarker_) {\n      result.push(this.firstMarker_);\n    }\n    if (this.lastMarker_) {\n      result.push(this.lastMarker_);\n    }\n    return result;\n  }\n}\n\n/**\n * An enum describing different kinds of previews the InsertionMarkerManager\n * could display.\n * @enum {number}\n */\nInsertionMarkerManager.PREVIEW_TYPE = {\n  INSERTION_MARKER: 0,\n  INPUT_OUTLINE: 1,\n  REPLACEMENT_FADE: 2,\n};\n\nexports.InsertionMarkerManager = InsertionMarkerManager;\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Base class for events fired as a result of UI actions in\n * Blockly's editor.\n */\n'use strict';\n\n/**\n * Base class for events fired as a result of UI actions in\n * Blockly's editor.\n * @class\n */\ngoog.module('Blockly.Events.UiBase');\n\nconst {Abstract: AbstractEvent} = goog.require('Blockly.Events.Abstract');\n\n\n/**\n * Base class for a UI event.\n * UI events are events that don't need to be sent over the wire for multi-user\n * editing to work (e.g. scrolling the workspace, zooming, opening toolbox\n * categories).\n * UI events do not undo or redo.\n * @extends {AbstractEvent}\n * @alias Blockly.Events.UiBase\n */\nclass UiBase extends AbstractEvent {\n  /**\n   * @param {string=} opt_workspaceId The workspace identifier for this event.\n   *    Undefined for a blank event.\n   */\n  constructor(opt_workspaceId) {\n    super();\n\n    /**\n     * Whether or not the event is blank (to be populated by fromJson).\n     * @type {boolean}\n     */\n    this.isBlank = typeof opt_workspaceId === 'undefined';\n\n    /**\n     * The workspace identifier for this event.\n     * @type {string}\n     */\n    this.workspaceId = opt_workspaceId ? opt_workspaceId : '';\n\n    // UI events do not undo or redo.\n    this.recordUndo = false;\n\n    /**\n     * Whether or not the event is a UI event.\n     * @type {boolean}\n     */\n    this.isUiEvent = true;\n  }\n}\n\nexports.UiBase = UiBase;\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Events fired as a block drag.\n */\n'use strict';\n\n/**\n * Events fired as a block drag.\n * @class\n */\ngoog.module('Blockly.Events.BlockDrag');\n\nconst eventUtils = goog.require('Blockly.Events.utils');\nconst registry = goog.require('Blockly.registry');\n/* eslint-disable-next-line no-unused-vars */\nconst {Block} = goog.requireType('Blockly.Block');\nconst {UiBase} = goog.require('Blockly.Events.UiBase');\n\n\n/**\n * Class for a block drag event.\n * @extends {UiBase}\n * @alias Blockly.Events.BlockDrag\n */\nclass BlockDrag extends UiBase {\n  /**\n   * @param {!Block=} opt_block The top block in the stack that is being\n   *    dragged. Undefined for a blank event.\n   * @param {boolean=} opt_isStart Whether this is the start of a block drag.\n   *    Undefined for a blank event.\n   * @param {!Array<!Block>=} opt_blocks The blocks affected by this\n   *    drag. Undefined for a blank event.\n   */\n  constructor(opt_block, opt_isStart, opt_blocks) {\n    const workspaceId = opt_block ? opt_block.workspace.id : undefined;\n    super(workspaceId);\n    this.blockId = opt_block ? opt_block.id : null;\n\n    /**\n     * Whether this is the start of a block drag.\n     * @type {boolean|undefined}\n     */\n    this.isStart = opt_isStart;\n\n    /**\n     * The blocks affected by this drag event.\n     * @type {!Array<!Block>|undefined}\n     */\n    this.blocks = opt_blocks;\n\n    /**\n     * Type of this event.\n     * @type {string}\n     */\n    this.type = eventUtils.BLOCK_DRAG;\n  }\n\n  /**\n   * Encode the event as JSON.\n   * @return {!Object} JSON representation.\n   */\n  toJson() {\n    const json = super.toJson();\n    json['isStart'] = this.isStart;\n    json['blockId'] = this.blockId;\n    json['blocks'] = this.blocks;\n    return json;\n  }\n\n  /**\n   * Decode the JSON event.\n   * @param {!Object} json JSON representation.\n   */\n  fromJson(json) {\n    super.fromJson(json);\n    this.isStart = json['isStart'];\n    this.blockId = json['blockId'];\n    this.blocks = json['blocks'];\n  }\n}\n\nregistry.register(registry.Type.EVENT, eventUtils.BLOCK_DRAG, BlockDrag);\n\nexports.BlockDrag = BlockDrag;\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Methods for dragging a block visually.\n */\n'use strict';\n\n/**\n * Methods for dragging a block visually.\n * @class\n */\ngoog.module('Blockly.BlockDragger');\n\nconst blockAnimation = goog.require('Blockly.blockAnimations');\nconst bumpObjects = goog.require('Blockly.bumpObjects');\nconst common = goog.require('Blockly.common');\nconst dom = goog.require('Blockly.utils.dom');\nconst eventUtils = goog.require('Blockly.Events.utils');\nconst registry = goog.require('Blockly.registry');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockMove} = goog.requireType('Blockly.Events.BlockMove');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockSvg} = goog.requireType('Blockly.BlockSvg');\nconst {Coordinate} = goog.require('Blockly.utils.Coordinate');\n/* eslint-disable-next-line no-unused-vars */\nconst {IBlockDragger} = goog.require('Blockly.IBlockDragger');\n/* eslint-disable-next-line no-unused-vars */\nconst {IDragTarget} = goog.requireType('Blockly.IDragTarget');\nconst {InsertionMarkerManager} = goog.require('Blockly.InsertionMarkerManager');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceSvg} = goog.requireType('Blockly.WorkspaceSvg');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.Events.BlockDrag');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.Events.BlockMove');\n\n\n/**\n * Class for a block dragger.  It moves blocks around the workspace when they\n * are being dragged by a mouse or touch.\n * @implements {IBlockDragger}\n * @alias Blockly.BlockDragger\n */\nconst BlockDragger = class {\n  /**\n   * @param {!BlockSvg} block The block to drag.\n   * @param {!WorkspaceSvg} workspace The workspace to drag on.\n   */\n  constructor(block, workspace) {\n    /**\n     * The top block in the stack that is being dragged.\n     * @type {!BlockSvg}\n     * @protected\n     */\n    this.draggingBlock_ = block;\n\n    /**\n     * The workspace on which the block is being dragged.\n     * @type {!WorkspaceSvg}\n     * @protected\n     */\n    this.workspace_ = workspace;\n\n    /**\n     * Object that keeps track of connections on dragged blocks.\n     * @type {!InsertionMarkerManager}\n     * @protected\n     */\n    this.draggedConnectionManager_ =\n        new InsertionMarkerManager(this.draggingBlock_);\n\n    /**\n     * Which drag area the mouse pointer is over, if any.\n     * @type {?IDragTarget}\n     * @private\n     */\n    this.dragTarget_ = null;\n\n    /**\n     * Whether the block would be deleted if dropped immediately.\n     * @type {boolean}\n     * @protected\n     */\n    this.wouldDeleteBlock_ = false;\n\n    /**\n     * The location of the top left corner of the dragging block at the\n     * beginning of the drag in workspace coordinates.\n     * @type {!Coordinate}\n     * @protected\n     */\n    this.startXY_ = this.draggingBlock_.getRelativeToSurfaceXY();\n\n    /**\n     * A list of all of the icons (comment, warning, and mutator) that are\n     * on this block and its descendants.  Moving an icon moves the bubble that\n     * extends from it if that bubble is open.\n     * @type {Array<!Object>}\n     * @protected\n     */\n    this.dragIconData_ = initIconData(block);\n  }\n\n  /**\n   * Sever all links from this object.\n   * @package\n   */\n  dispose() {\n    this.dragIconData_.length = 0;\n\n    if (this.draggedConnectionManager_) {\n      this.draggedConnectionManager_.dispose();\n    }\n  }\n\n  /**\n   * Start dragging a block.  This includes moving it to the drag surface.\n   * @param {!Coordinate} currentDragDeltaXY How far the pointer has\n   *     moved from the position at mouse down, in pixel units.\n   * @param {boolean} healStack Whether or not to heal the stack after\n   *     disconnecting.\n   * @public\n   */\n  startDrag(currentDragDeltaXY, healStack) {\n    if (!eventUtils.getGroup()) {\n      eventUtils.setGroup(true);\n    }\n    this.fireDragStartEvent_();\n\n    // Mutators don't have the same type of z-ordering as the normal workspace\n    // during a drag.  They have to rely on the order of the blocks in the SVG.\n    // For performance reasons that usually happens at the end of a drag,\n    // but do it at the beginning for mutators.\n    if (this.workspace_.isMutator) {\n      this.draggingBlock_.bringToFront();\n    }\n\n    // During a drag there may be a lot of rerenders, but not field changes.\n    // Turn the cache on so we don't do spurious remeasures during the drag.\n    dom.startTextWidthCache();\n    this.workspace_.setResizesEnabled(false);\n    blockAnimation.disconnectUiStop();\n\n    if (this.shouldDisconnect_(healStack)) {\n      this.disconnectBlock_(healStack, currentDragDeltaXY);\n    }\n    this.draggingBlock_.setDragging(true);\n    // For future consideration: we may be able to put moveToDragSurface inside\n    // the block dragger, which would also let the block not track the block\n    // drag surface.\n    this.draggingBlock_.moveToDragSurface();\n  }\n\n  /**\n   * Whether or not we should disconnect the block when a drag is started.\n   * @param {boolean} healStack Whether or not to heal the stack after\n   *     disconnecting.\n   * @return {boolean} True to disconnect the block, false otherwise.\n   * @protected\n   */\n  shouldDisconnect_(healStack) {\n    return !!(\n        this.draggingBlock_.getParent() ||\n        (healStack && this.draggingBlock_.nextConnection &&\n         this.draggingBlock_.nextConnection.targetBlock()));\n  }\n\n  /**\n   * Disconnects the block and moves it to a new location.\n   * @param {boolean} healStack Whether or not to heal the stack after\n   *     disconnecting.\n   * @param {!Coordinate} currentDragDeltaXY How far the pointer has\n   *     moved from the position at mouse down, in pixel units.\n   * @protected\n   */\n  disconnectBlock_(healStack, currentDragDeltaXY) {\n    this.draggingBlock_.unplug(healStack);\n    const delta = this.pixelsToWorkspaceUnits_(currentDragDeltaXY);\n    const newLoc = Coordinate.sum(this.startXY_, delta);\n\n    this.draggingBlock_.translate(newLoc.x, newLoc.y);\n    blockAnimation.disconnectUiEffect(this.draggingBlock_);\n    this.draggedConnectionManager_.updateAvailableConnections();\n  }\n\n  /**\n   * Fire a UI event at the start of a block drag.\n   * @protected\n   */\n  fireDragStartEvent_() {\n    const event = new (eventUtils.get(eventUtils.BLOCK_DRAG))(\n        this.draggingBlock_, true, this.draggingBlock_.getDescendants(false));\n    eventUtils.fire(event);\n  }\n\n  /**\n   * Execute a step of block dragging, based on the given event.  Update the\n   * display accordingly.\n   * @param {!Event} e The most recent move event.\n   * @param {!Coordinate} currentDragDeltaXY How far the pointer has\n   *     moved from the position at the start of the drag, in pixel units.\n   * @public\n   */\n  drag(e, currentDragDeltaXY) {\n    const delta = this.pixelsToWorkspaceUnits_(currentDragDeltaXY);\n    const newLoc = Coordinate.sum(this.startXY_, delta);\n    this.draggingBlock_.moveDuringDrag(newLoc);\n    this.dragIcons_(delta);\n\n    const oldDragTarget = this.dragTarget_;\n    this.dragTarget_ = this.workspace_.getDragTarget(e);\n\n    this.draggedConnectionManager_.update(delta, this.dragTarget_);\n    const oldWouldDeleteBlock = this.wouldDeleteBlock_;\n    this.wouldDeleteBlock_ = this.draggedConnectionManager_.wouldDeleteBlock();\n    if (oldWouldDeleteBlock !== this.wouldDeleteBlock_) {\n      // Prevent unnecessary add/remove class calls.\n      this.updateCursorDuringBlockDrag_();\n    }\n\n    // Call drag enter/exit/over after wouldDeleteBlock is called in\n    // InsertionMarkerManager.update.\n    if (this.dragTarget_ !== oldDragTarget) {\n      oldDragTarget && oldDragTarget.onDragExit(this.draggingBlock_);\n      this.dragTarget_ && this.dragTarget_.onDragEnter(this.draggingBlock_);\n    }\n    this.dragTarget_ && this.dragTarget_.onDragOver(this.draggingBlock_);\n  }\n\n  /**\n   * Finish a block drag and put the block back on the workspace.\n   * @param {!Event} e The mouseup/touchend event.\n   * @param {!Coordinate} currentDragDeltaXY How far the pointer has\n   *     moved from the position at the start of the drag, in pixel units.\n   * @public\n   */\n  endDrag(e, currentDragDeltaXY) {\n    // Make sure internal state is fresh.\n    this.drag(e, currentDragDeltaXY);\n    this.dragIconData_ = [];\n    this.fireDragEndEvent_();\n\n    dom.stopTextWidthCache();\n\n    blockAnimation.disconnectUiStop();\n\n    const preventMove = !!this.dragTarget_ &&\n        this.dragTarget_.shouldPreventMove(this.draggingBlock_);\n    /** @type {Coordinate} */\n    let newLoc;\n    /** @type {Coordinate} */\n    let delta;\n    if (preventMove) {\n      newLoc = this.startXY_;\n    } else {\n      const newValues = this.getNewLocationAfterDrag_(currentDragDeltaXY);\n      delta = newValues.delta;\n      newLoc = newValues.newLocation;\n    }\n    this.draggingBlock_.moveOffDragSurface(newLoc);\n\n    if (this.dragTarget_) {\n      this.dragTarget_.onDrop(this.draggingBlock_);\n    }\n\n    const deleted = this.maybeDeleteBlock_();\n    if (!deleted) {\n      // These are expensive and don't need to be done if we're deleting.\n      this.draggingBlock_.setDragging(false);\n      if (delta) {  // !preventMove\n        this.updateBlockAfterMove_(delta);\n      } else {\n        // Blocks dragged directly from a flyout may need to be bumped into\n        // bounds.\n        bumpObjects.bumpIntoBounds(\n            this.draggingBlock_.workspace,\n            this.workspace_.getMetricsManager().getScrollMetrics(true),\n            this.draggingBlock_);\n      }\n    }\n    this.workspace_.setResizesEnabled(true);\n\n    eventUtils.setGroup(false);\n  }\n\n  /**\n   * Calculates the drag delta and new location values after a block is dragged.\n   * @param {!Coordinate} currentDragDeltaXY How far the pointer has\n   *     moved from the start of the drag, in pixel units.\n   * @return {{delta: !Coordinate, newLocation:\n   *     !Coordinate}} New location after drag. delta is in\n   *     workspace units. newLocation is the new coordinate where the block\n   * should end up.\n   * @protected\n   */\n  getNewLocationAfterDrag_(currentDragDeltaXY) {\n    const newValues = {};\n    newValues.delta = this.pixelsToWorkspaceUnits_(currentDragDeltaXY);\n    newValues.newLocation = Coordinate.sum(this.startXY_, newValues.delta);\n    return newValues;\n  }\n\n  /**\n   * May delete the dragging block, if allowed. If `this.wouldDeleteBlock_` is\n   * not true, the block will not be deleted. This should be called at the end\n   * of a block drag.\n   * @return {boolean} True if the block was deleted.\n   * @protected\n   */\n  maybeDeleteBlock_() {\n    if (this.wouldDeleteBlock_) {\n      // Fire a move event, so we know where to go back to for an undo.\n      this.fireMoveEvent_();\n      this.draggingBlock_.dispose(false, true);\n      common.draggingConnections.length = 0;\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Updates the necessary information to place a block at a certain location.\n   * @param {!Coordinate} delta The change in location from where\n   *     the block started the drag to where it ended the drag.\n   * @protected\n   */\n  updateBlockAfterMove_(delta) {\n    this.draggingBlock_.moveConnections(delta.x, delta.y);\n    this.fireMoveEvent_();\n    if (this.draggedConnectionManager_.wouldConnectBlock()) {\n      // Applying connections also rerenders the relevant blocks.\n      this.draggedConnectionManager_.applyConnections();\n    } else {\n      this.draggingBlock_.render();\n    }\n    this.draggingBlock_.scheduleSnapAndBump();\n  }\n\n  /**\n   * Fire a UI event at the end of a block drag.\n   * @protected\n   */\n  fireDragEndEvent_() {\n    const event = new (eventUtils.get(eventUtils.BLOCK_DRAG))(\n        this.draggingBlock_, false, this.draggingBlock_.getDescendants(false));\n    eventUtils.fire(event);\n  }\n\n  /**\n   * Adds or removes the style of the cursor for the toolbox.\n   * This is what changes the cursor to display an x when a deletable block is\n   * held over the toolbox.\n   * @param {boolean} isEnd True if we are at the end of a drag, false\n   *     otherwise.\n   * @protected\n   */\n  updateToolboxStyle_(isEnd) {\n    const toolbox = this.workspace_.getToolbox();\n\n    if (toolbox) {\n      const style = this.draggingBlock_.isDeletable() ? 'blocklyToolboxDelete' :\n                                                        'blocklyToolboxGrab';\n\n      if (isEnd && typeof toolbox.removeStyle === 'function') {\n        toolbox.removeStyle(style);\n      } else if (!isEnd && typeof toolbox.addStyle === 'function') {\n        toolbox.addStyle(style);\n      }\n    }\n  }\n\n  /**\n   * Fire a move event at the end of a block drag.\n   * @protected\n   */\n  fireMoveEvent_() {\n    const event = /** @type {!BlockMove} */\n        (new (eventUtils.get(eventUtils.BLOCK_MOVE))(this.draggingBlock_));\n    event.oldCoordinate = this.startXY_;\n    event.recordNew();\n    eventUtils.fire(event);\n  }\n\n  /**\n   * Update the cursor (and possibly the trash can lid) to reflect whether the\n   * dragging block would be deleted if released immediately.\n   * @protected\n   */\n  updateCursorDuringBlockDrag_() {\n    this.draggingBlock_.setDeleteStyle(this.wouldDeleteBlock_);\n  }\n\n  /**\n   * Convert a coordinate object from pixels to workspace units, including a\n   * correction for mutator workspaces.\n   * This function does not consider differing origins.  It simply scales the\n   * input's x and y values.\n   * @param {!Coordinate} pixelCoord A coordinate with x and y\n   *     values in CSS pixel units.\n   * @return {!Coordinate} The input coordinate divided by the\n   *     workspace scale.\n   * @protected\n   */\n  pixelsToWorkspaceUnits_(pixelCoord) {\n    const result = new Coordinate(\n        pixelCoord.x / this.workspace_.scale,\n        pixelCoord.y / this.workspace_.scale);\n    if (this.workspace_.isMutator) {\n      // If we're in a mutator, its scale is always 1, purely because of some\n      // oddities in our rendering optimizations.  The actual scale is the same\n      // as the scale on the parent workspace. Fix that for dragging.\n      const mainScale = this.workspace_.options.parentWorkspace.scale;\n      result.scale(1 / mainScale);\n    }\n    return result;\n  }\n\n  /**\n   * Move all of the icons connected to this drag.\n   * @param {!Coordinate} dxy How far to move the icons from their\n   *     original positions, in workspace units.\n   * @protected\n   */\n  dragIcons_(dxy) {\n    // Moving icons moves their associated bubbles.\n    for (let i = 0; i < this.dragIconData_.length; i++) {\n      const data = this.dragIconData_[i];\n      data.icon.setIconLocation(Coordinate.sum(data.location, dxy));\n    }\n  }\n\n  /**\n   * Get a list of the insertion markers that currently exist.  Drags have 0, 1,\n   * or 2 insertion markers.\n   * @return {!Array<!BlockSvg>} A possibly empty list of insertion\n   *     marker blocks.\n   * @public\n   */\n  getInsertionMarkers() {\n    // No insertion markers with the old style of dragged connection managers.\n    if (this.draggedConnectionManager_ &&\n        this.draggedConnectionManager_.getInsertionMarkers) {\n      return this.draggedConnectionManager_.getInsertionMarkers();\n    }\n    return [];\n  }\n};\n\n/**\n * Make a list of all of the icons (comment, warning, and mutator) that are\n * on this block and its descendants.  Moving an icon moves the bubble that\n * extends from it if that bubble is open.\n * @param {!BlockSvg} block The root block that is being dragged.\n * @return {!Array<!Object>} The list of all icons and their locations.\n */\nconst initIconData = function(block) {\n  // Build a list of icons that need to be moved and where they started.\n  const dragIconData = [];\n  const descendants =\n      /** @type {!Array<!BlockSvg>} */ (block.getDescendants(false));\n\n  for (let i = 0, descendant; (descendant = descendants[i]); i++) {\n    const icons = descendant.getIcons();\n    for (let j = 0; j < icons.length; j++) {\n      const data = {\n        // Coordinate with x and y properties (workspace\n        // coordinates).\n        location: icons[j].getIconLocation(),\n        // Blockly.Icon\n        icon: icons[j],\n      };\n      dragIconData.push(data);\n    }\n  }\n  return dragIconData;\n};\n\nregistry.register(registry.Type.BLOCK_DRAGGER, registry.DEFAULT, BlockDragger);\n\nexports.BlockDragger = BlockDragger;\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Events fired as a result of UI click in Blockly's editor.\n */\n'use strict';\n\n/**\n * Events fired as a result of UI click in Blockly's editor.\n * @class\n */\ngoog.module('Blockly.Events.Click');\n\nconst eventUtils = goog.require('Blockly.Events.utils');\nconst registry = goog.require('Blockly.registry');\n/* eslint-disable-next-line no-unused-vars */\nconst {Block} = goog.requireType('Blockly.Block');\nconst {UiBase} = goog.require('Blockly.Events.UiBase');\n\n\n/**\n * Class for a click event.\n * @extends {UiBase}\n * @alias Blockly.Events.Click\n */\nclass Click extends UiBase {\n  /**\n   * @param {?Block=} opt_block The affected block. Null for click events\n   *    that do not have an associated block (i.e. workspace click). Undefined\n   *    for a blank event.\n   * @param {?string=} opt_workspaceId The workspace identifier for this event.\n   *    Not used if block is passed. Undefined for a blank event.\n   * @param {string=} opt_targetType The type of element targeted by this click\n   *    event. Undefined for a blank event.\n   */\n  constructor(opt_block, opt_workspaceId, opt_targetType) {\n    let workspaceId = opt_block ? opt_block.workspace.id : opt_workspaceId;\n    if (workspaceId === null) {\n      workspaceId = undefined;\n    }\n    super(workspaceId);\n    this.blockId = opt_block ? opt_block.id : null;\n\n    /**\n     * The type of element targeted by this click event.\n     * @type {string|undefined}\n     */\n    this.targetType = opt_targetType;\n\n    /**\n     * Type of this event.\n     * @type {string}\n     */\n    this.type = eventUtils.CLICK;\n  }\n\n  /**\n   * Encode the event as JSON.\n   * @return {!Object} JSON representation.\n   */\n  toJson() {\n    const json = super.toJson();\n    json['targetType'] = this.targetType;\n    if (this.blockId) {\n      json['blockId'] = this.blockId;\n    }\n    return json;\n  }\n\n  /**\n   * Decode the JSON event.\n   * @param {!Object} json JSON representation.\n   */\n  fromJson(json) {\n    super.fromJson(json);\n    this.targetType = json['targetType'];\n    this.blockId = json['blockId'];\n  }\n}\n\nregistry.register(registry.Type.EVENT, eventUtils.CLICK, Click);\n\nexports.Click = Click;\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The class representing an in-progress gesture, usually a drag\n * or a tap.\n */\n'use strict';\n\n/**\n * The class representing an in-progress gesture, usually a drag\n * or a tap.\n * @class\n */\ngoog.module('Blockly.Gesture');\n\nconst Tooltip = goog.require('Blockly.Tooltip');\nconst Touch = goog.require('Blockly.Touch');\nconst blockAnimations = goog.require('Blockly.blockAnimations');\nconst browserEvents = goog.require('Blockly.browserEvents');\nconst common = goog.require('Blockly.common');\nconst eventUtils = goog.require('Blockly.Events.utils');\nconst internalConstants = goog.require('Blockly.internalConstants');\nconst registry = goog.require('Blockly.registry');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockSvg} = goog.requireType('Blockly.BlockSvg');\nconst {BubbleDragger} = goog.require('Blockly.BubbleDragger');\nconst {config} = goog.require('Blockly.config');\nconst {Coordinate} = goog.require('Blockly.utils.Coordinate');\n/* eslint-disable-next-line no-unused-vars */\nconst {Field} = goog.requireType('Blockly.Field');\n/* eslint-disable-next-line no-unused-vars */\nconst {IBlockDragger} = goog.requireType('Blockly.IBlockDragger');\n/* eslint-disable-next-line no-unused-vars */\nconst {IBubble} = goog.requireType('Blockly.IBubble');\n/* eslint-disable-next-line no-unused-vars */\nconst {IFlyout} = goog.requireType('Blockly.IFlyout');\nconst {WorkspaceDragger} = goog.require('Blockly.WorkspaceDragger');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceSvg} = goog.requireType('Blockly.WorkspaceSvg');\nconst {Workspace} = goog.require('Blockly.Workspace');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.BlockDragger');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.Events.Click');\n\n\n/**\n * Note: In this file \"start\" refers to touchstart, mousedown, and pointerstart\n * events.  \"End\" refers to touchend, mouseup, and pointerend events.\n */\n// TODO: Consider touchcancel/pointercancel.\n\n/**\n * Class for one gesture.\n * @alias Blockly.Gesture\n */\nclass Gesture {\n  /**\n   * @param {!Event} e The event that kicked off this gesture.\n   * @param {!WorkspaceSvg} creatorWorkspace The workspace that created\n   *     this gesture and has a reference to it.\n   */\n  constructor(e, creatorWorkspace) {\n    /**\n     * The position of the mouse when the gesture started.  Units are CSS\n     * pixels, with (0, 0) at the top left of the browser window (mouseEvent\n     * clientX/Y).\n     * @type {Coordinate}\n     * @private\n     */\n    this.mouseDownXY_ = null;\n\n    /**\n     * How far the mouse has moved during this drag, in pixel units.\n     * (0, 0) is at this.mouseDownXY_.\n     * @type {!Coordinate}\n     * @private\n     */\n    this.currentDragDeltaXY_ = new Coordinate(0, 0);\n\n    /**\n     * The bubble that the gesture started on, or null if it did not start on a\n     * bubble.\n     * @type {IBubble}\n     * @private\n     */\n    this.startBubble_ = null;\n\n    /**\n     * The field that the gesture started on, or null if it did not start on a\n     * field.\n     * @type {Field}\n     * @private\n     */\n    this.startField_ = null;\n\n    /**\n     * The block that the gesture started on, or null if it did not start on a\n     * block.\n     * @type {BlockSvg}\n     * @private\n     */\n    this.startBlock_ = null;\n\n    /**\n     * The block that this gesture targets.  If the gesture started on a\n     * shadow block, this is the first non-shadow parent of the block.  If the\n     * gesture started in the flyout, this is the root block of the block group\n     * that was clicked or dragged.\n     * @type {BlockSvg}\n     * @private\n     */\n    this.targetBlock_ = null;\n\n    /**\n     * The workspace that the gesture started on.  There may be multiple\n     * workspaces on a page; this is more accurate than using\n     * Blockly.common.getMainWorkspace().\n     * @type {WorkspaceSvg}\n     * @protected\n     */\n    this.startWorkspace_ = null;\n\n    /**\n     * The workspace that created this gesture.  This workspace keeps a\n     * reference to the gesture, which will need to be cleared at deletion. This\n     * may be different from the start workspace.  For instance, a flyout is a\n     * workspace, but its parent workspace manages gestures for it.\n     * @type {!WorkspaceSvg}\n     * @private\n     */\n    this.creatorWorkspace_ = creatorWorkspace;\n\n    /**\n     * Whether the pointer has at any point moved out of the drag radius.\n     * A gesture that exceeds the drag radius is a drag even if it ends exactly\n     * at its start point.\n     * @type {boolean}\n     * @private\n     */\n    this.hasExceededDragRadius_ = false;\n\n    /**\n     * Whether the workspace is currently being dragged.\n     * @type {boolean}\n     * @private\n     */\n    this.isDraggingWorkspace_ = false;\n\n    /**\n     * Whether the block is currently being dragged.\n     * @type {boolean}\n     * @private\n     */\n    this.isDraggingBlock_ = false;\n\n    /**\n     * Whether the bubble is currently being dragged.\n     * @type {boolean}\n     * @private\n     */\n    this.isDraggingBubble_ = false;\n\n    /**\n     * The event that most recently updated this gesture.\n     * @type {!Event}\n     * @private\n     */\n    this.mostRecentEvent_ = e;\n\n    /**\n     * A handle to use to unbind a mouse move listener at the end of a drag.\n     * Opaque data returned from Blockly.bindEventWithChecks_.\n     * @type {?browserEvents.Data}\n     * @protected\n     */\n    this.onMoveWrapper_ = null;\n\n    /**\n     * A handle to use to unbind a mouse up listener at the end of a drag.\n     * Opaque data returned from Blockly.bindEventWithChecks_.\n     * @type {?browserEvents.Data}\n     * @protected\n     */\n    this.onUpWrapper_ = null;\n\n    /**\n     * The object tracking a bubble drag, or null if none is in progress.\n     * @type {BubbleDragger}\n     * @private\n     */\n    this.bubbleDragger_ = null;\n\n    /**\n     * The object tracking a block drag, or null if none is in progress.\n     * @type {?IBlockDragger}\n     * @private\n     */\n    this.blockDragger_ = null;\n\n    /**\n     * The object tracking a workspace or flyout workspace drag, or null if none\n     * is in progress.\n     * @type {WorkspaceDragger}\n     * @private\n     */\n    this.workspaceDragger_ = null;\n\n    /**\n     * The flyout a gesture started in, if any.\n     * @type {IFlyout}\n     * @private\n     */\n    this.flyout_ = null;\n\n    /**\n     * Boolean for sanity-checking that some code is only called once.\n     * @type {boolean}\n     * @private\n     */\n    this.calledUpdateIsDragging_ = false;\n\n    /**\n     * Boolean for sanity-checking that some code is only called once.\n     * @type {boolean}\n     * @private\n     */\n    this.hasStarted_ = false;\n\n    /**\n     * Boolean used internally to break a cycle in disposal.\n     * @type {boolean}\n     * @protected\n     */\n    this.isEnding_ = false;\n\n    /**\n     * Boolean used to indicate whether or not to heal the stack after\n     * disconnecting a block.\n     * @type {boolean}\n     * @private\n     */\n    this.healStack_ = !internalConstants.DRAG_STACK;\n  }\n\n  /**\n   * Sever all links from this object.\n   * @package\n   */\n  dispose() {\n    Touch.clearTouchIdentifier();\n    Tooltip.unblock();\n    // Clear the owner's reference to this gesture.\n    this.creatorWorkspace_.clearGesture();\n\n    if (this.onMoveWrapper_) {\n      browserEvents.unbind(this.onMoveWrapper_);\n    }\n    if (this.onUpWrapper_) {\n      browserEvents.unbind(this.onUpWrapper_);\n    }\n\n    if (this.blockDragger_) {\n      this.blockDragger_.dispose();\n    }\n    if (this.workspaceDragger_) {\n      this.workspaceDragger_.dispose();\n    }\n    if (this.bubbleDragger_) {\n      this.bubbleDragger_.dispose();\n    }\n  }\n\n  /**\n   * Update internal state based on an event.\n   * @param {!Event} e The most recent mouse or touch event.\n   * @private\n   */\n  updateFromEvent_(e) {\n    const currentXY = new Coordinate(e.clientX, e.clientY);\n    const changed = this.updateDragDelta_(currentXY);\n    // Exceeded the drag radius for the first time.\n    if (changed) {\n      this.updateIsDragging_();\n      Touch.longStop();\n    }\n    this.mostRecentEvent_ = e;\n  }\n\n  /**\n   * DO MATH to set currentDragDeltaXY_ based on the most recent mouse position.\n   * @param {!Coordinate} currentXY The most recent mouse/pointer\n   *     position, in pixel units, with (0, 0) at the window's top left corner.\n   * @return {boolean} True if the drag just exceeded the drag radius for the\n   *     first time.\n   * @private\n   */\n  updateDragDelta_(currentXY) {\n    this.currentDragDeltaXY_ = Coordinate.difference(\n        currentXY,\n        /** @type {!Coordinate} */ (this.mouseDownXY_));\n\n    if (!this.hasExceededDragRadius_) {\n      const currentDragDelta = Coordinate.magnitude(this.currentDragDeltaXY_);\n\n      // The flyout has a different drag radius from the rest of Blockly.\n      const limitRadius =\n          this.flyout_ ? config.flyoutDragRadius : config.dragRadius;\n\n      this.hasExceededDragRadius_ = currentDragDelta > limitRadius;\n      return this.hasExceededDragRadius_;\n    }\n    return false;\n  }\n\n  /**\n   * Update this gesture to record whether a block is being dragged from the\n   * flyout.\n   * This function should be called on a mouse/touch move event the first time\n   * the drag radius is exceeded.  It should be called no more than once per\n   * gesture. If a block should be dragged from the flyout this function creates\n   * the new block on the main workspace and updates targetBlock_ and\n   * startWorkspace_.\n   * @return {boolean} True if a block is being dragged from the flyout.\n   * @private\n   */\n  updateIsDraggingFromFlyout_() {\n    if (!this.targetBlock_) {\n      return false;\n    }\n    if (!this.flyout_.isBlockCreatable_(this.targetBlock_)) {\n      return false;\n    }\n    if (!this.flyout_.isScrollable() ||\n        this.flyout_.isDragTowardWorkspace(this.currentDragDeltaXY_)) {\n      this.startWorkspace_ = this.flyout_.targetWorkspace;\n      this.startWorkspace_.updateScreenCalculationsIfScrolled();\n      // Start the event group now, so that the same event group is used for\n      // block creation and block dragging.\n      if (!eventUtils.getGroup()) {\n        eventUtils.setGroup(true);\n      }\n      // The start block is no longer relevant, because this is a drag.\n      this.startBlock_ = null;\n      this.targetBlock_ = this.flyout_.createBlock(this.targetBlock_);\n      this.targetBlock_.select();\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Update this gesture to record whether a bubble is being dragged.\n   * This function should be called on a mouse/touch move event the first time\n   * the drag radius is exceeded.  It should be called no more than once per\n   * gesture. If a bubble should be dragged this function creates the necessary\n   * BubbleDragger and starts the drag.\n   * @return {boolean} True if a bubble is being dragged.\n   * @private\n   */\n  updateIsDraggingBubble_() {\n    if (!this.startBubble_) {\n      return false;\n    }\n\n    this.isDraggingBubble_ = true;\n    this.startDraggingBubble_();\n    return true;\n  }\n\n  /**\n   * Update this gesture to record whether a block is being dragged.\n   * This function should be called on a mouse/touch move event the first time\n   * the drag radius is exceeded.  It should be called no more than once per\n   * gesture. If a block should be dragged, either from the flyout or in the\n   * workspace, this function creates the necessary BlockDragger and starts the\n   * drag.\n   * @return {boolean} True if a block is being dragged.\n   * @private\n   */\n  updateIsDraggingBlock_() {\n    if (!this.targetBlock_) {\n      return false;\n    }\n\n    if (this.flyout_) {\n      this.isDraggingBlock_ = this.updateIsDraggingFromFlyout_();\n    } else if (this.targetBlock_.isMovable()) {\n      this.isDraggingBlock_ = true;\n    }\n\n    if (this.isDraggingBlock_) {\n      this.startDraggingBlock_();\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Update this gesture to record whether a workspace is being dragged.\n   * This function should be called on a mouse/touch move event the first time\n   * the drag radius is exceeded.  It should be called no more than once per\n   * gesture. If a workspace is being dragged this function creates the\n   * necessary WorkspaceDragger and starts the drag.\n   * @private\n   */\n  updateIsDraggingWorkspace_() {\n    const wsMovable = this.flyout_ ?\n        this.flyout_.isScrollable() :\n        this.startWorkspace_ && this.startWorkspace_.isDraggable();\n\n    if (!wsMovable) {\n      return;\n    }\n\n    this.workspaceDragger_ = new WorkspaceDragger(\n        /** @type {!WorkspaceSvg} */ (this.startWorkspace_));\n\n    this.isDraggingWorkspace_ = true;\n    this.workspaceDragger_.startDrag();\n  }\n\n  /**\n   * Update this gesture to record whether anything is being dragged.\n   * This function should be called on a mouse/touch move event the first time\n   * the drag radius is exceeded.  It should be called no more than once per\n   * gesture.\n   * @private\n   */\n  updateIsDragging_() {\n    // Sanity check.\n    if (this.calledUpdateIsDragging_) {\n      throw Error('updateIsDragging_ should only be called once per gesture.');\n    }\n    this.calledUpdateIsDragging_ = true;\n\n    // First check if it was a bubble drag.  Bubbles always sit on top of\n    // blocks.\n    if (this.updateIsDraggingBubble_()) {\n      return;\n    }\n    // Then check if it was a block drag.\n    if (this.updateIsDraggingBlock_()) {\n      return;\n    }\n    // Then check if it's a workspace drag.\n    this.updateIsDraggingWorkspace_();\n  }\n\n  /**\n   * Create a block dragger and start dragging the selected block.\n   * @private\n   */\n  startDraggingBlock_() {\n    const BlockDraggerClass = registry.getClassFromOptions(\n        registry.Type.BLOCK_DRAGGER, this.creatorWorkspace_.options, true);\n\n    this.blockDragger_ = new BlockDraggerClass(\n        /** @type {!BlockSvg} */ (this.targetBlock_),\n        /** @type {!WorkspaceSvg} */ (this.startWorkspace_));\n    this.blockDragger_.startDrag(this.currentDragDeltaXY_, this.healStack_);\n    this.blockDragger_.drag(this.mostRecentEvent_, this.currentDragDeltaXY_);\n  }\n\n  // TODO (fenichel): Possibly combine this and startDraggingBlock_.\n  /**\n   * Create a bubble dragger and start dragging the selected bubble.\n   * @private\n   */\n  startDraggingBubble_() {\n    this.bubbleDragger_ = new BubbleDragger(\n        /** @type {!IBubble} */ (this.startBubble_),\n        /** @type {!WorkspaceSvg} */ (this.startWorkspace_));\n    this.bubbleDragger_.startBubbleDrag();\n    this.bubbleDragger_.dragBubble(\n        this.mostRecentEvent_, this.currentDragDeltaXY_);\n  }\n\n  /**\n   * Start a gesture: update the workspace to indicate that a gesture is in\n   * progress and bind mousemove and mouseup handlers.\n   * @param {!Event} e A mouse down or touch start event.\n   * @package\n   */\n  doStart(e) {\n    if (browserEvents.isTargetInput(e)) {\n      this.cancel();\n      return;\n    }\n    this.hasStarted_ = true;\n\n    blockAnimations.disconnectUiStop();\n    this.startWorkspace_.updateScreenCalculationsIfScrolled();\n    if (this.startWorkspace_.isMutator) {\n      // Mutator's coordinate system could be out of date because the bubble was\n      // dragged, the block was moved, the parent workspace zoomed, etc.\n      this.startWorkspace_.resize();\n    }\n\n    // Hide chaff also hides the flyout, so don't do it if the click is in a\n    // flyout.\n    this.startWorkspace_.hideChaff(!!this.flyout_);\n\n    this.startWorkspace_.markFocused();\n    this.mostRecentEvent_ = e;\n\n    Tooltip.block();\n\n    if (this.targetBlock_) {\n      this.targetBlock_.select();\n    }\n\n    if (browserEvents.isRightButton(e)) {\n      this.handleRightClick(e);\n      return;\n    }\n\n    if ((e.type.toLowerCase() === 'touchstart' ||\n         e.type.toLowerCase() === 'pointerdown') &&\n        e.pointerType !== 'mouse') {\n      Touch.longStart(e, this);\n    }\n\n    this.mouseDownXY_ = new Coordinate(e.clientX, e.clientY);\n    this.healStack_ = e.altKey || e.ctrlKey || e.metaKey;\n\n    this.bindMouseEvents(e);\n  }\n\n  /**\n   * Bind gesture events.\n   * @param {!Event} e A mouse down or touch start event.\n   * @package\n   */\n  bindMouseEvents(e) {\n    this.onMoveWrapper_ = browserEvents.conditionalBind(\n        document, 'mousemove', null, this.handleMove.bind(this));\n    this.onUpWrapper_ = browserEvents.conditionalBind(\n        document, 'mouseup', null, this.handleUp.bind(this));\n\n    e.preventDefault();\n    e.stopPropagation();\n  }\n\n  /**\n   * Handle a mouse move or touch move event.\n   * @param {!Event} e A mouse move or touch move event.\n   * @package\n   */\n  handleMove(e) {\n    this.updateFromEvent_(e);\n    if (this.isDraggingWorkspace_) {\n      this.workspaceDragger_.drag(this.currentDragDeltaXY_);\n    } else if (this.isDraggingBlock_) {\n      this.blockDragger_.drag(this.mostRecentEvent_, this.currentDragDeltaXY_);\n    } else if (this.isDraggingBubble_) {\n      this.bubbleDragger_.dragBubble(\n          this.mostRecentEvent_, this.currentDragDeltaXY_);\n    }\n    e.preventDefault();\n    e.stopPropagation();\n  }\n\n  /**\n   * Handle a mouse up or touch end event.\n   * @param {!Event} e A mouse up or touch end event.\n   * @package\n   */\n  handleUp(e) {\n    this.updateFromEvent_(e);\n    Touch.longStop();\n\n    if (this.isEnding_) {\n      console.log('Trying to end a gesture recursively.');\n      return;\n    }\n    this.isEnding_ = true;\n    // The ordering of these checks is important: drags have higher priority\n    // than clicks.  Fields have higher priority than blocks; blocks have higher\n    // priority than workspaces.\n    // The ordering within drags does not matter, because the three types of\n    // dragging are exclusive.\n    if (this.isDraggingBubble_) {\n      this.bubbleDragger_.endBubbleDrag(e, this.currentDragDeltaXY_);\n    } else if (this.isDraggingBlock_) {\n      this.blockDragger_.endDrag(e, this.currentDragDeltaXY_);\n    } else if (this.isDraggingWorkspace_) {\n      this.workspaceDragger_.endDrag(this.currentDragDeltaXY_);\n    } else if (this.isBubbleClick_()) {\n      // Bubbles are in front of all fields and blocks.\n      this.doBubbleClick_();\n    } else if (this.isFieldClick_()) {\n      this.doFieldClick_();\n    } else if (this.isBlockClick_()) {\n      this.doBlockClick_();\n    } else if (this.isWorkspaceClick_()) {\n      this.doWorkspaceClick_(e);\n    }\n\n    e.preventDefault();\n    e.stopPropagation();\n\n    this.dispose();\n  }\n\n  /**\n   * Cancel an in-progress gesture.  If a workspace or block drag is in\n   * progress, end the drag at the most recent location.\n   * @package\n   */\n  cancel() {\n    // Disposing of a block cancels in-progress drags, but dragging to a delete\n    // area disposes of a block and leads to recursive disposal. Break that\n    // cycle.\n    if (this.isEnding_) {\n      return;\n    }\n    Touch.longStop();\n    if (this.isDraggingBubble_) {\n      this.bubbleDragger_.endBubbleDrag(\n          this.mostRecentEvent_, this.currentDragDeltaXY_);\n    } else if (this.isDraggingBlock_) {\n      this.blockDragger_.endDrag(\n          this.mostRecentEvent_, this.currentDragDeltaXY_);\n    } else if (this.isDraggingWorkspace_) {\n      this.workspaceDragger_.endDrag(this.currentDragDeltaXY_);\n    }\n    this.dispose();\n  }\n\n  /**\n   * Handle a real or faked right-click event by showing a context menu.\n   * @param {!Event} e A mouse move or touch move event.\n   * @package\n   */\n  handleRightClick(e) {\n    if (this.targetBlock_) {\n      this.bringBlockToFront_();\n      this.targetBlock_.workspace.hideChaff(!!this.flyout_);\n      this.targetBlock_.showContextMenu(e);\n    } else if (this.startBubble_) {\n      this.startBubble_.showContextMenu(e);\n    } else if (this.startWorkspace_ && !this.flyout_) {\n      this.startWorkspace_.hideChaff();\n      this.startWorkspace_.showContextMenu(e);\n    }\n\n    // TODO: Handle right-click on a bubble.\n    e.preventDefault();\n    e.stopPropagation();\n\n    this.dispose();\n  }\n\n  /**\n   * Handle a mousedown/touchstart event on a workspace.\n   * @param {!Event} e A mouse down or touch start event.\n   * @param {!WorkspaceSvg} ws The workspace the event hit.\n   * @package\n   */\n  handleWsStart(e, ws) {\n    if (this.hasStarted_) {\n      throw Error(\n          'Tried to call gesture.handleWsStart, ' +\n          'but the gesture had already been started.');\n    }\n    this.setStartWorkspace_(ws);\n    this.mostRecentEvent_ = e;\n    this.doStart(e);\n  }\n\n  /**\n   * Fires a workspace click event.\n   * @param {!WorkspaceSvg} ws The workspace that a user clicks on.\n   * @private\n   */\n  fireWorkspaceClick_(ws) {\n    eventUtils.fire(\n        new (eventUtils.get(eventUtils.CLICK))(null, ws.id, 'workspace'));\n  }\n\n  /**\n   * Handle a mousedown/touchstart event on a flyout.\n   * @param {!Event} e A mouse down or touch start event.\n   * @param {!IFlyout} flyout The flyout the event hit.\n   * @package\n   */\n  handleFlyoutStart(e, flyout) {\n    if (this.hasStarted_) {\n      throw Error(\n          'Tried to call gesture.handleFlyoutStart, ' +\n          'but the gesture had already been started.');\n    }\n    this.setStartFlyout_(flyout);\n    this.handleWsStart(e, flyout.getWorkspace());\n  }\n\n  /**\n   * Handle a mousedown/touchstart event on a block.\n   * @param {!Event} e A mouse down or touch start event.\n   * @param {!BlockSvg} block The block the event hit.\n   * @package\n   */\n  handleBlockStart(e, block) {\n    if (this.hasStarted_) {\n      throw Error(\n          'Tried to call gesture.handleBlockStart, ' +\n          'but the gesture had already been started.');\n    }\n    this.setStartBlock(block);\n    this.mostRecentEvent_ = e;\n  }\n\n  /**\n   * Handle a mousedown/touchstart event on a bubble.\n   * @param {!Event} e A mouse down or touch start event.\n   * @param {!IBubble} bubble The bubble the event hit.\n   * @package\n   */\n  handleBubbleStart(e, bubble) {\n    if (this.hasStarted_) {\n      throw Error(\n          'Tried to call gesture.handleBubbleStart, ' +\n          'but the gesture had already been started.');\n    }\n    this.setStartBubble(bubble);\n    this.mostRecentEvent_ = e;\n  }\n\n  /* Begin functions defining what actions to take to execute clicks on each\n   * type of target.  Any developer wanting to add behaviour on clicks should\n   * modify only this code. */\n\n  /**\n   * Execute a bubble click.\n   * @private\n   */\n  doBubbleClick_() {\n    // TODO (#1673): Consistent handling of single clicks.\n    this.startBubble_.setFocus && this.startBubble_.setFocus();\n    this.startBubble_.select && this.startBubble_.select();\n  }\n\n  /**\n   * Execute a field click.\n   * @private\n   */\n  doFieldClick_() {\n    this.startField_.showEditor(this.mostRecentEvent_);\n    this.bringBlockToFront_();\n  }\n\n  /**\n   * Execute a block click.\n   * @private\n   */\n  doBlockClick_() {\n    // Block click in an autoclosing flyout.\n    if (this.flyout_ && this.flyout_.autoClose) {\n      if (this.targetBlock_.isEnabled()) {\n        if (!eventUtils.getGroup()) {\n          eventUtils.setGroup(true);\n        }\n        const newBlock = this.flyout_.createBlock(this.targetBlock_);\n        newBlock.scheduleSnapAndBump();\n      }\n    } else {\n      // Clicks events are on the start block, even if it was a shadow.\n      const event = new (eventUtils.get(eventUtils.CLICK))(\n          this.startBlock_, this.startWorkspace_.id, 'block');\n      eventUtils.fire(event);\n    }\n    this.bringBlockToFront_();\n    eventUtils.setGroup(false);\n  }\n\n  /**\n   * Execute a workspace click. When in accessibility mode shift clicking will\n   * move the cursor.\n   * @param {!Event} _e A mouse up or touch end event.\n   * @private\n   */\n  doWorkspaceClick_(_e) {\n    const ws = this.creatorWorkspace_;\n    if (common.getSelected()) {\n      common.getSelected().unselect();\n    }\n    this.fireWorkspaceClick_(this.startWorkspace_ || ws);\n  }\n\n  /* End functions defining what actions to take to execute clicks on each type\n   * of target. */\n\n  // TODO (fenichel): Move bubbles to the front.\n\n  /**\n   * Move the dragged/clicked block to the front of the workspace so that it is\n   * not occluded by other blocks.\n   * @private\n   */\n  bringBlockToFront_() {\n    // Blocks in the flyout don't overlap, so skip the work.\n    if (this.targetBlock_ && !this.flyout_) {\n      this.targetBlock_.bringToFront();\n    }\n  }\n\n  /* Begin functions for populating a gesture at mouse down. */\n\n  /**\n   * Record the field that a gesture started on.\n   * @param {Field} field The field the gesture started on.\n   * @package\n   */\n  setStartField(field) {\n    if (this.hasStarted_) {\n      throw Error(\n          'Tried to call gesture.setStartField, ' +\n          'but the gesture had already been started.');\n    }\n    if (!this.startField_) {\n      this.startField_ = field;\n    }\n  }\n\n  /**\n   * Record the bubble that a gesture started on\n   * @param {IBubble} bubble The bubble the gesture started on.\n   * @package\n   */\n  setStartBubble(bubble) {\n    if (!this.startBubble_) {\n      this.startBubble_ = bubble;\n    }\n  }\n\n  /**\n   * Record the block that a gesture started on, and set the target block\n   * appropriately.\n   * @param {BlockSvg} block The block the gesture started on.\n   * @package\n   */\n  setStartBlock(block) {\n    // If the gesture already went through a bubble, don't set the start block.\n    if (!this.startBlock_ && !this.startBubble_) {\n      this.startBlock_ = block;\n      if (block.isInFlyout && block !== block.getRootBlock()) {\n        this.setTargetBlock_(block.getRootBlock());\n      } else {\n        this.setTargetBlock_(block);\n      }\n    }\n  }\n\n  /**\n   * Record the block that a gesture targets, meaning the block that will be\n   * dragged if this turns into a drag.  If this block is a shadow, that will be\n   * its first non-shadow parent.\n   * @param {BlockSvg} block The block the gesture targets.\n   * @private\n   */\n  setTargetBlock_(block) {\n    if (block.isShadow()) {\n      this.setTargetBlock_(block.getParent());\n    } else {\n      this.targetBlock_ = block;\n    }\n  }\n\n  /**\n   * Record the workspace that a gesture started on.\n   * @param {WorkspaceSvg} ws The workspace the gesture started on.\n   * @private\n   */\n  setStartWorkspace_(ws) {\n    if (!this.startWorkspace_) {\n      this.startWorkspace_ = ws;\n    }\n  }\n\n  /**\n   * Record the flyout that a gesture started on.\n   * @param {IFlyout} flyout The flyout the gesture started on.\n   * @private\n   */\n  setStartFlyout_(flyout) {\n    if (!this.flyout_) {\n      this.flyout_ = flyout;\n    }\n  }\n\n  /* End functions for populating a gesture at mouse down. */\n\n  /* Begin helper functions defining types of clicks.  Any developer wanting\n   * to change the definition of a click should modify only this code. */\n\n  /**\n   * Whether this gesture is a click on a bubble.  This should only be called\n   * when ending a gesture (mouse up, touch end).\n   * @return {boolean} Whether this gesture was a click on a bubble.\n   * @private\n   */\n  isBubbleClick_() {\n    // A bubble click starts on a bubble and never escapes the drag radius.\n    const hasStartBubble = !!this.startBubble_;\n    return hasStartBubble && !this.hasExceededDragRadius_;\n  }\n\n  /**\n   * Whether this gesture is a click on a block.  This should only be called\n   * when ending a gesture (mouse up, touch end).\n   * @return {boolean} Whether this gesture was a click on a block.\n   * @private\n   */\n  isBlockClick_() {\n    // A block click starts on a block, never escapes the drag radius, and is\n    // not a field click.\n    const hasStartBlock = !!this.startBlock_;\n    return hasStartBlock && !this.hasExceededDragRadius_ &&\n        !this.isFieldClick_();\n  }\n\n  /**\n   * Whether this gesture is a click on a field.  This should only be called\n   * when ending a gesture (mouse up, touch end).\n   * @return {boolean} Whether this gesture was a click on a field.\n   * @private\n   */\n  isFieldClick_() {\n    const fieldClickable =\n        this.startField_ ? this.startField_.isClickable() : false;\n    return fieldClickable && !this.hasExceededDragRadius_ &&\n        (!this.flyout_ || !this.flyout_.autoClose);\n  }\n\n  /**\n   * Whether this gesture is a click on a workspace.  This should only be called\n   * when ending a gesture (mouse up, touch end).\n   * @return {boolean} Whether this gesture was a click on a workspace.\n   * @private\n   */\n  isWorkspaceClick_() {\n    const onlyTouchedWorkspace =\n        !this.startBlock_ && !this.startBubble_ && !this.startField_;\n    return onlyTouchedWorkspace && !this.hasExceededDragRadius_;\n  }\n\n  /* End helper functions defining types of clicks. */\n\n  /**\n   * Whether this gesture is a drag of either a workspace or block.\n   * This function is called externally to block actions that cannot be taken\n   * mid-drag (e.g. using the keyboard to delete the selected blocks).\n   * @return {boolean} True if this gesture is a drag of a workspace or block.\n   * @package\n   */\n  isDragging() {\n    return this.isDraggingWorkspace_ || this.isDraggingBlock_ ||\n        this.isDraggingBubble_;\n  }\n\n  /**\n   * Whether this gesture has already been started.  In theory every mouse down\n   * has a corresponding mouse up, but in reality it is possible to lose a\n   * mouse up, leaving an in-process gesture hanging.\n   * @return {boolean} Whether this gesture was a click on a workspace.\n   * @package\n   */\n  hasStarted() {\n    return this.hasStarted_;\n  }\n\n  /**\n   * Get a list of the insertion markers that currently exist.  Block drags have\n   * 0, 1, or 2 insertion markers.\n   * @return {!Array<!BlockSvg>} A possibly empty list of insertion\n   *     marker blocks.\n   * @package\n   */\n  getInsertionMarkers() {\n    if (this.blockDragger_) {\n      return this.blockDragger_.getInsertionMarkers();\n    }\n    return [];\n  }\n\n  /**\n   * Gets the current dragger if an item is being dragged. Null if nothing is\n   * being dragged.\n   * @return {!WorkspaceDragger|!BubbleDragger|!IBlockDragger|null}\n   *    The dragger that is currently in use or null if no drag is in progress.\n   */\n  getCurrentDragger() {\n    if (this.isDraggingBlock_) {\n      return this.blockDragger_;\n    } else if (this.isDraggingWorkspace_) {\n      return this.workspaceDragger_;\n    } else if (this.isDraggingBubble_) {\n      return this.bubbleDragger_;\n    }\n    return null;\n  }\n\n  /**\n   * Is a drag or other gesture currently in progress on any workspace?\n   * @return {boolean} True if gesture is occurring.\n   */\n  static inProgress() {\n    const workspaces = Workspace.getAll();\n    for (let i = 0, workspace; (workspace = workspaces[i]); i++) {\n      // Not actually necessarily a WorkspaceSvg, but it doesn't matter b/c\n      // we're just checking if the property exists. Theoretically we would\n      // want to use instanceof, but that causes a circular dependency.\n      if (/** @type {!WorkspaceSvg} */ (workspace).currentGesture_) {\n        return true;\n      }\n    }\n    return false;\n  }\n}\n\nexports.Gesture = Gesture;\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Field.  Used for editable titles, variables, etc.\n * This is an abstract class that defines the UI on the block.  Actual\n * instances would be FieldTextInput, FieldDropdown, etc.\n */\n'use strict';\n\n/**\n * Field.  Used for editable titles, variables, etc.\n * This is an abstract class that defines the UI on the block.  Actual\n * instances would be FieldTextInput, FieldDropdown, etc.\n * @class\n */\ngoog.module('Blockly.Field');\n\nconst Tooltip = goog.require('Blockly.Tooltip');\nconst WidgetDiv = goog.require('Blockly.WidgetDiv');\nconst Xml = goog.require('Blockly.Xml');\nconst browserEvents = goog.require('Blockly.browserEvents');\nconst dom = goog.require('Blockly.utils.dom');\nconst dropDownDiv = goog.require('Blockly.dropDownDiv');\nconst eventUtils = goog.require('Blockly.Events.utils');\nconst parsing = goog.require('Blockly.utils.parsing');\nconst style = goog.require('Blockly.utils.style');\nconst userAgent = goog.require('Blockly.utils.userAgent');\nconst utilsXml = goog.require('Blockly.utils.xml');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockSvg} = goog.requireType('Blockly.BlockSvg');\n/* eslint-disable-next-line no-unused-vars */\nconst {Block} = goog.requireType('Blockly.Block');\n/* eslint-disable-next-line no-unused-vars */\nconst {ConstantProvider} = goog.requireType('Blockly.blockRendering.ConstantProvider');\n/* eslint-disable-next-line no-unused-vars */\nconst {Coordinate} = goog.requireType('Blockly.utils.Coordinate');\n/* eslint-disable-next-line no-unused-vars */\nconst {IASTNodeLocationSvg} = goog.require('Blockly.IASTNodeLocationSvg');\n/* eslint-disable-next-line no-unused-vars */\nconst {IASTNodeLocationWithBlock} = goog.require('Blockly.IASTNodeLocationWithBlock');\n/* eslint-disable-next-line no-unused-vars */\nconst {IKeyboardAccessible} = goog.require('Blockly.IKeyboardAccessible');\n/* eslint-disable-next-line no-unused-vars */\nconst {IRegistrable} = goog.require('Blockly.IRegistrable');\n/* eslint-disable-next-line no-unused-vars */\nconst {Input} = goog.requireType('Blockly.Input');\nconst {MarkerManager} = goog.require('Blockly.MarkerManager');\nconst {Rect} = goog.require('Blockly.utils.Rect');\nconst {Sentinel} = goog.require('Blockly.utils.Sentinel');\n/* eslint-disable-next-line no-unused-vars */\nconst {ShortcutRegistry} = goog.requireType('Blockly.ShortcutRegistry');\nconst {Size} = goog.require('Blockly.utils.Size');\nconst {Svg} = goog.require('Blockly.utils.Svg');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceSvg} = goog.requireType('Blockly.WorkspaceSvg');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.Events.BlockChange');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.Gesture');\n\n\n/**\n * Abstract class for an editable field.\n * @implements {IASTNodeLocationSvg}\n * @implements {IASTNodeLocationWithBlock}\n * @implements {IKeyboardAccessible}\n * @implements {IRegistrable}\n * @abstract\n * @alias Blockly.Field\n */\nclass Field {\n  /**\n   * @param {*} value The initial value of the field.\n   *     Also accepts Field.SKIP_SETUP if you wish to skip setup (only used by\n   *     subclasses that want to handle configuration and setting the field\n   *     value after their own constructors have run).\n   * @param {?Function=} opt_validator  A function that is called to validate\n   *    changes to the field's value. Takes in a value & returns a validated\n   *    value, or null to abort the change.\n   * @param {Object=} opt_config A map of options used to configure the field.\n   *    Refer to the individual field's documentation for a list of properties\n   *    this parameter supports.\n   */\n  constructor(value, opt_validator, opt_config) {\n    /**\n     * Name of field.  Unique within each block.\n     * Static labels are usually unnamed.\n     * @type {string|undefined}\n     */\n    this.name = undefined;\n\n    /**\n     * A generic value possessed by the field.\n     * Should generally be non-null, only null when the field is created.\n     * @type {*}\n     * @protected\n     */\n    this.value_ =\n        /** @type {typeof Field} */ (new.target).prototype.DEFAULT_VALUE;\n\n    /**\n     * Validation function called when user edits an editable field.\n     * @type {Function}\n     * @protected\n     */\n    this.validator_ = null;\n\n    /**\n     * Used to cache the field's tooltip value if setTooltip is called when the\n     * field is not yet initialized. Is *not* guaranteed to be accurate.\n     * @type {?Tooltip.TipInfo}\n     * @private\n     */\n    this.tooltip_ = null;\n\n    /**\n     * The size of the area rendered by the field.\n     * @type {!Size}\n     * @protected\n     */\n    this.size_ = new Size(0, 0);\n\n    /**\n     * Holds the cursors svg element when the cursor is attached to the field.\n     * This is null if there is no cursor on the field.\n     * @type {SVGElement}\n     * @private\n     */\n    this.cursorSvg_ = null;\n\n    /**\n     * Holds the markers svg element when the marker is attached to the field.\n     * This is null if there is no marker on the field.\n     * @type {SVGElement}\n     * @private\n     */\n    this.markerSvg_ = null;\n\n    /**\n     * The rendered field's SVG group element.\n     * @type {SVGGElement}\n     * @protected\n     */\n    this.fieldGroup_ = null;\n\n    /**\n     * The rendered field's SVG border element.\n     * @type {SVGRectElement}\n     * @protected\n     */\n    this.borderRect_ = null;\n\n    /**\n     * The rendered field's SVG text element.\n     * @type {SVGTextElement}\n     * @protected\n     */\n    this.textElement_ = null;\n\n    /**\n     * The rendered field's text content element.\n     * @type {Text}\n     * @protected\n     */\n    this.textContent_ = null;\n\n    /**\n     * Mouse down event listener data.\n     * @type {?browserEvents.Data}\n     * @private\n     */\n    this.mouseDownWrapper_ = null;\n\n    /**\n     * Constants associated with the source block's renderer.\n     * @type {ConstantProvider}\n     * @protected\n     */\n    this.constants_ = null;\n\n    /**\n     * Has this field been disposed of?\n     * @type {boolean}\n     * @package\n     */\n    this.disposed = false;\n\n    /**\n     * Maximum characters of text to display before adding an ellipsis.\n     * @type {number}\n     */\n    this.maxDisplayLength = 50;\n\n    /**\n     * Block this field is attached to.  Starts as null, then set in init.\n     * @type {Block}\n     * @protected\n     */\n    this.sourceBlock_ = null;\n\n    /**\n     * Does this block need to be re-rendered?\n     * @type {boolean}\n     * @protected\n     */\n    this.isDirty_ = true;\n\n    /**\n     * Is the field visible, or hidden due to the block being collapsed?\n     * @type {boolean}\n     * @protected\n     */\n    this.visible_ = true;\n\n    /**\n     * Can the field value be changed using the editor on an editable block?\n     * @type {boolean}\n     * @protected\n     */\n    this.enabled_ = true;\n\n    /**\n     * The element the click handler is bound to.\n     * @type {Element}\n     * @protected\n     */\n    this.clickTarget_ = null;\n\n    /**\n     * The prefix field.\n     * @type {?string}\n     * @package\n     */\n    this.prefixField = null;\n\n    /**\n     * The suffix field.\n     * @type {?string}\n     * @package\n     */\n    this.suffixField = null;\n\n    /**\n     * Editable fields usually show some sort of UI indicating they are\n     * editable. They will also be saved by the serializer.\n     * @type {boolean}\n     */\n    this.EDITABLE = true;\n\n    /**\n     * Serializable fields are saved by the serializer, non-serializable fields\n     * are not. Editable fields should also be serializable. This is not the\n     * case by default so that SERIALIZABLE is backwards compatible.\n     * @type {boolean}\n     */\n    this.SERIALIZABLE = false;\n\n    /**\n     * Mouse cursor style when over the hotspot that initiates the editor.\n     * @type {string}\n     */\n    this.CURSOR = '';\n\n    if (value === Field.SKIP_SETUP) return;\n    if (opt_config) this.configure_(opt_config);\n    this.setValue(value);\n    if (opt_validator) this.setValidator(opt_validator);\n  }\n\n  /**\n   * Process the configuration map passed to the field.\n   * @param {!Object} config A map of options used to configure the field. See\n   *    the individual field's documentation for a list of properties this\n   *    parameter supports.\n   * @protected\n   */\n  configure_(config) {\n    let tooltip = config['tooltip'];\n    if (typeof tooltip === 'string') {\n      tooltip = parsing.replaceMessageReferences(config['tooltip']);\n    }\n    tooltip && this.setTooltip(tooltip);\n\n    // TODO (#2884): Possibly add CSS class config option.\n    // TODO (#2885): Possibly add cursor config option.\n  }\n\n  /**\n   * Attach this field to a block.\n   * @param {!Block} block The block containing this field.\n   */\n  setSourceBlock(block) {\n    if (this.sourceBlock_) {\n      throw Error('Field already bound to a block');\n    }\n    this.sourceBlock_ = block;\n  }\n\n  /**\n   * Get the renderer constant provider.\n   * @return {?ConstantProvider} The renderer constant\n   *     provider.\n   */\n  getConstants() {\n    if (!this.constants_ && this.sourceBlock_ && this.sourceBlock_.workspace &&\n        this.sourceBlock_.workspace.rendered) {\n      this.constants_ =\n          /** @type {!WorkspaceSvg} */ (this.sourceBlock_.workspace)\n              .getRenderer()\n              .getConstants();\n    }\n    return this.constants_;\n  }\n\n  /**\n   * Get the block this field is attached to.\n   * @return {Block} The block containing this field.\n   */\n  getSourceBlock() {\n    return this.sourceBlock_;\n  }\n\n  /**\n   * Initialize everything to render this field. Override\n   * methods initModel and initView rather than this method.\n   * @package\n   * @final\n   */\n  init() {\n    if (this.fieldGroup_) {\n      // Field has already been initialized once.\n      return;\n    }\n    this.fieldGroup_ = dom.createSvgElement(Svg.G, {}, null);\n    if (!this.isVisible()) {\n      this.fieldGroup_.style.display = 'none';\n    }\n    const sourceBlockSvg = /** @type {!BlockSvg} **/ (this.sourceBlock_);\n    sourceBlockSvg.getSvgRoot().appendChild(this.fieldGroup_);\n    this.initView();\n    this.updateEditable();\n    this.setTooltip(this.tooltip_);\n    this.bindEvents_();\n    this.initModel();\n  }\n\n  /**\n   * Create the block UI for this field.\n   * @package\n   */\n  initView() {\n    this.createBorderRect_();\n    this.createTextElement_();\n  }\n\n  /**\n   * Initializes the model of the field after it has been installed on a block.\n   * No-op by default.\n   * @package\n   */\n  initModel() {}\n\n  /**\n   * Create a field border rect element. Not to be overridden by subclasses.\n   * Instead modify the result of the function inside initView, or create a\n   * separate function to call.\n   * @protected\n   */\n  createBorderRect_() {\n    this.borderRect_ = dom.createSvgElement(\n        Svg.RECT, {\n          'rx': this.getConstants().FIELD_BORDER_RECT_RADIUS,\n          'ry': this.getConstants().FIELD_BORDER_RECT_RADIUS,\n          'x': 0,\n          'y': 0,\n          'height': this.size_.height,\n          'width': this.size_.width,\n          'class': 'blocklyFieldRect',\n        },\n        this.fieldGroup_);\n  }\n\n  /**\n   * Create a field text element. Not to be overridden by subclasses. Instead\n   * modify the result of the function inside initView, or create a separate\n   * function to call.\n   * @protected\n   */\n  createTextElement_() {\n    this.textElement_ = dom.createSvgElement(\n        Svg.TEXT, {\n          'class': 'blocklyText',\n        },\n        this.fieldGroup_);\n    if (this.getConstants().FIELD_TEXT_BASELINE_CENTER) {\n      this.textElement_.setAttribute('dominant-baseline', 'central');\n    }\n    this.textContent_ = document.createTextNode('');\n    this.textElement_.appendChild(this.textContent_);\n  }\n\n  /**\n   * Bind events to the field. Can be overridden by subclasses if they need to\n   * do custom input handling.\n   * @protected\n   */\n  bindEvents_() {\n    Tooltip.bindMouseEvents(this.getClickTarget_());\n    this.mouseDownWrapper_ = browserEvents.conditionalBind(\n        this.getClickTarget_(), 'mousedown', this, this.onMouseDown_);\n  }\n\n  /**\n   * Sets the field's value based on the given XML element. Should only be\n   * called by Blockly.Xml.\n   * @param {!Element} fieldElement The element containing info about the\n   *    field's state.\n   * @package\n   */\n  fromXml(fieldElement) {\n    this.setValue(fieldElement.textContent);\n  }\n\n  /**\n   * Serializes this field's value to XML. Should only be called by Blockly.Xml.\n   * @param {!Element} fieldElement The element to populate with info about the\n   *    field's state.\n   * @return {!Element} The element containing info about the field's state.\n   * @package\n   */\n  toXml(fieldElement) {\n    fieldElement.textContent = this.getValue();\n    return fieldElement;\n  }\n\n  /**\n   * Saves this fields value as something which can be serialized to JSON.\n   * Should only be called by the serialization system.\n   * @param {boolean=} _doFullSerialization If true, this signals to the field\n   *     that if it normally just saves a reference to some state (eg variable\n   *     fields) it should instead serialize the full state of the thing being\n   *     referenced.\n   * @return {*} JSON serializable state.\n   * @package\n   */\n  saveState(_doFullSerialization) {\n    const legacyState = this.saveLegacyState(Field);\n    if (legacyState !== null) {\n      return legacyState;\n    }\n    return this.getValue();\n  }\n\n  /**\n   * Sets the field's state based on the given state value. Should only be\n   * called by the serialization system.\n   * @param {*} state The state we want to apply to the field.\n   * @package\n   */\n  loadState(state) {\n    if (this.loadLegacyState(Field, state)) {\n      return;\n    }\n    this.setValue(state);\n  }\n\n  /**\n   * Returns a stringified version of the XML state, if it should be used.\n   * Otherwise this returns null, to signal the field should use its own\n   * serialization.\n   * @param {*} callingClass The class calling this method.\n   *     Used to see if `this` has overridden any relevant hooks.\n   * @return {?string} The stringified version of the XML state, or null.\n   * @protected\n   */\n  saveLegacyState(callingClass) {\n    if (callingClass.prototype.saveState === this.saveState &&\n        callingClass.prototype.toXml !== this.toXml) {\n      const elem = utilsXml.createElement('field');\n      elem.setAttribute('name', this.name || '');\n      const text = Xml.domToText(this.toXml(elem));\n      return text.replace(\n          ' xmlns=\"https://developers.google.com/blockly/xml\"', '');\n    }\n    // Either they called this on purpose from their saveState, or they have\n    // no implementations of either hook. Just do our thing.\n    return null;\n  }\n\n  /**\n   * Loads the given state using either the old XML hoooks, if they should be\n   * used. Returns true to indicate loading has been handled, false otherwise.\n   * @param {*} callingClass The class calling this method.\n   *     Used to see if `this` has overridden any relevant hooks.\n   * @param {*} state The state to apply to the field.\n   * @return {boolean} Whether the state was applied or not.\n   */\n  loadLegacyState(callingClass, state) {\n    if (callingClass.prototype.loadState === this.loadState &&\n        callingClass.prototype.fromXml !== this.fromXml) {\n      this.fromXml(Xml.textToDom(/** @type {string} */ (state)));\n      return true;\n    }\n    // Either they called this on purpose from their loadState, or they have\n    // no implementations of either hook. Just do our thing.\n    return false;\n  }\n\n  /**\n   * Dispose of all DOM objects and events belonging to this editable field.\n   * @package\n   */\n  dispose() {\n    dropDownDiv.hideIfOwner(this);\n    WidgetDiv.hideIfOwner(this);\n    Tooltip.unbindMouseEvents(this.getClickTarget_());\n\n    if (this.mouseDownWrapper_) {\n      browserEvents.unbind(this.mouseDownWrapper_);\n    }\n\n    dom.removeNode(this.fieldGroup_);\n\n    this.disposed = true;\n  }\n\n  /**\n   * Add or remove the UI indicating if this field is editable or not.\n   */\n  updateEditable() {\n    const group = this.fieldGroup_;\n    if (!this.EDITABLE || !group) {\n      return;\n    }\n    if (this.enabled_ && this.sourceBlock_.isEditable()) {\n      dom.addClass(group, 'blocklyEditableText');\n      dom.removeClass(group, 'blocklyNonEditableText');\n      group.style.cursor = this.CURSOR;\n    } else {\n      dom.addClass(group, 'blocklyNonEditableText');\n      dom.removeClass(group, 'blocklyEditableText');\n      group.style.cursor = '';\n    }\n  }\n\n  /**\n   * Set whether this field's value can be changed using the editor when the\n   *     source block is editable.\n   * @param {boolean} enabled True if enabled.\n   */\n  setEnabled(enabled) {\n    this.enabled_ = enabled;\n    this.updateEditable();\n  }\n\n  /**\n   * Check whether this field's value can be changed using the editor when the\n   *     source block is editable.\n   * @return {boolean} Whether this field is enabled.\n   */\n  isEnabled() {\n    return this.enabled_;\n  }\n\n  /**\n   * Check whether this field defines the showEditor_ function.\n   * @return {boolean} Whether this field is clickable.\n   */\n  isClickable() {\n    return this.enabled_ && !!this.sourceBlock_ &&\n        this.sourceBlock_.isEditable() &&\n        this.showEditor_ !== Field.prototype.showEditor_;\n  }\n\n  /**\n   * Check whether this field is currently editable.  Some fields are never\n   * EDITABLE (e.g. text labels). Other fields may be EDITABLE but may exist on\n   * non-editable blocks or be currently disabled.\n   * @return {boolean} Whether this field is currently enabled, editable and on\n   * an editable block.\n   */\n  isCurrentlyEditable() {\n    return this.enabled_ && this.EDITABLE && !!this.sourceBlock_ &&\n        this.sourceBlock_.isEditable();\n  }\n\n  /**\n   * Check whether this field should be serialized by the XML renderer.\n   * Handles the logic for backwards compatibility and incongruous states.\n   * @return {boolean} Whether this field should be serialized or not.\n   */\n  isSerializable() {\n    let isSerializable = false;\n    if (this.name) {\n      if (this.SERIALIZABLE) {\n        isSerializable = true;\n      } else if (this.EDITABLE) {\n        console.warn(\n            'Detected an editable field that was not serializable.' +\n            ' Please define SERIALIZABLE property as true on all editable custom' +\n            ' fields. Proceeding with serialization.');\n        isSerializable = true;\n      }\n    }\n    return isSerializable;\n  }\n\n  /**\n   * Gets whether this editable field is visible or not.\n   * @return {boolean} True if visible.\n   */\n  isVisible() {\n    return this.visible_;\n  }\n\n  /**\n   * Sets whether this editable field is visible or not. Should only be called\n   * by input.setVisible.\n   * @param {boolean} visible True if visible.\n   * @package\n   */\n  setVisible(visible) {\n    if (this.visible_ === visible) {\n      return;\n    }\n    this.visible_ = visible;\n    const root = this.getSvgRoot();\n    if (root) {\n      root.style.display = visible ? 'block' : 'none';\n    }\n  }\n\n  /**\n   * Sets a new validation function for editable fields, or clears a previously\n   * set validator.\n   *\n   * The validator function takes in the new field value, and returns\n   * validated value. The validated value could be the input value, a modified\n   * version of the input value, or null to abort the change.\n   *\n   * If the function does not return anything (or returns undefined) the new\n   * value is accepted as valid. This is to allow for fields using the\n   * validated function as a field-level change event notification.\n   *\n   * @param {Function} handler The validator function\n   *     or null to clear a previous validator.\n   */\n  setValidator(handler) {\n    this.validator_ = handler;\n  }\n\n  /**\n   * Gets the validation function for editable fields, or null if not set.\n   * @return {?Function} Validation function, or null.\n   */\n  getValidator() {\n    return this.validator_;\n  }\n\n  /**\n   * Gets the group element for this editable field.\n   * Used for measuring the size and for positioning.\n   * @return {!SVGGElement} The group element.\n   */\n  getSvgRoot() {\n    return /** @type {!SVGGElement} */ (this.fieldGroup_);\n  }\n\n  /**\n   * Updates the field to match the colour/style of the block. Should only be\n   * called by BlockSvg.applyColour().\n   * @package\n   */\n  applyColour() {\n    // Non-abstract sub-classes may wish to implement this. See FieldDropdown.\n  }\n\n  /**\n   * Used by getSize() to move/resize any DOM elements, and get the new size.\n   *\n   * All rendering that has an effect on the size/shape of the block should be\n   * done here, and should be triggered by getSize().\n   * @protected\n   */\n  render_() {\n    if (this.textContent_) {\n      this.textContent_.nodeValue = this.getDisplayText_();\n    }\n    this.updateSize_();\n  }\n\n  /**\n   * Calls showEditor_ when the field is clicked if the field is clickable.\n   * Do not override.\n   * @param {Event=} opt_e Optional mouse event that triggered the field to\n   *     open, or undefined if triggered programmatically.\n   * @package\n   * @final\n   */\n  showEditor(opt_e) {\n    if (this.isClickable()) {\n      this.showEditor_(opt_e);\n    }\n  }\n\n  /**\n   * A developer hook to create an editor for the field. This is no-op by\n   * default, and must be overriden to create an editor.\n   * @param {Event=} _e Optional mouse event that triggered the field to\n   *     open, or undefined if triggered programmatically.\n   * @return {void}\n   * @protected\n   */\n  showEditor_(_e) {\n    // NOP\n  }\n\n  /**\n   * Updates the size of the field based on the text.\n   * @param {number=} opt_margin margin to use when positioning the text\n   *     element.\n   * @protected\n   */\n  updateSize_(opt_margin) {\n    const constants = this.getConstants();\n    const xOffset = opt_margin !== undefined ?\n        opt_margin :\n        (this.borderRect_ ? this.getConstants().FIELD_BORDER_RECT_X_PADDING :\n                            0);\n    let totalWidth = xOffset * 2;\n    let totalHeight = constants.FIELD_TEXT_HEIGHT;\n\n    let contentWidth = 0;\n    if (this.textElement_) {\n      contentWidth = dom.getFastTextWidth(\n          this.textElement_, constants.FIELD_TEXT_FONTSIZE,\n          constants.FIELD_TEXT_FONTWEIGHT, constants.FIELD_TEXT_FONTFAMILY);\n      totalWidth += contentWidth;\n    }\n    if (this.borderRect_) {\n      totalHeight = Math.max(totalHeight, constants.FIELD_BORDER_RECT_HEIGHT);\n    }\n\n    this.size_.height = totalHeight;\n    this.size_.width = totalWidth;\n\n    this.positionTextElement_(xOffset, contentWidth);\n    this.positionBorderRect_();\n  }\n\n  /**\n   * Position a field's text element after a size change.  This handles both LTR\n   * and RTL positioning.\n   * @param {number} xOffset x offset to use when positioning the text element.\n   * @param {number} contentWidth The content width.\n   * @protected\n   */\n  positionTextElement_(xOffset, contentWidth) {\n    if (!this.textElement_) {\n      return;\n    }\n    const constants = this.getConstants();\n    const halfHeight = this.size_.height / 2;\n\n    this.textElement_.setAttribute(\n        'x',\n        this.sourceBlock_.RTL ? this.size_.width - contentWidth - xOffset :\n                                xOffset);\n    this.textElement_.setAttribute(\n        'y',\n        constants.FIELD_TEXT_BASELINE_CENTER ?\n            halfHeight :\n            halfHeight - constants.FIELD_TEXT_HEIGHT / 2 +\n                constants.FIELD_TEXT_BASELINE);\n  }\n\n  /**\n   * Position a field's border rect after a size change.\n   * @protected\n   */\n  positionBorderRect_() {\n    if (!this.borderRect_) {\n      return;\n    }\n    this.borderRect_.setAttribute('width', this.size_.width);\n    this.borderRect_.setAttribute('height', this.size_.height);\n    this.borderRect_.setAttribute(\n        'rx', this.getConstants().FIELD_BORDER_RECT_RADIUS);\n    this.borderRect_.setAttribute(\n        'ry', this.getConstants().FIELD_BORDER_RECT_RADIUS);\n  }\n\n  /**\n   * Returns the height and width of the field.\n   *\n   * This should *in general* be the only place render_ gets called from.\n   * @return {!Size} Height and width.\n   */\n  getSize() {\n    if (!this.isVisible()) {\n      return new Size(0, 0);\n    }\n\n    if (this.isDirty_) {\n      this.render_();\n      this.isDirty_ = false;\n    } else if (this.visible_ && this.size_.width === 0) {\n      // If the field is not visible the width will be 0 as well, one of the\n      // problems with the old system.\n      console.warn(\n          'Deprecated use of setting size_.width to 0 to rerender a' +\n          ' field. Set field.isDirty_ to true instead.');\n      this.render_();\n    }\n    return this.size_;\n  }\n\n  /**\n   * Returns the bounding box of the rendered field, accounting for workspace\n   * scaling.\n   * @return {!Rect} An object with top, bottom, left, and right in\n   *     pixels relative to the top left corner of the page (window\n   * coordinates).\n   * @package\n   */\n  getScaledBBox() {\n    let scaledWidth;\n    let scaledHeight;\n    let xy;\n    if (!this.borderRect_) {\n      // Browsers are inconsistent in what they return for a bounding box.\n      // - Webkit / Blink: fill-box / object bounding box\n      // - Gecko / Triden / EdgeHTML: stroke-box\n      const bBox = this.sourceBlock_.getHeightWidth();\n      const scale =\n          /** @type {!WorkspaceSvg} */ (this.sourceBlock_.workspace).scale;\n      xy = this.getAbsoluteXY_();\n      scaledWidth = bBox.width * scale;\n      scaledHeight = bBox.height * scale;\n\n      if (userAgent.GECKO) {\n        xy.x += 1.5 * scale;\n        xy.y += 1.5 * scale;\n        scaledWidth += 1 * scale;\n        scaledHeight += 1 * scale;\n      } else {\n        if (!userAgent.EDGE && !userAgent.IE) {\n          xy.x -= 0.5 * scale;\n          xy.y -= 0.5 * scale;\n        }\n        scaledWidth += 1 * scale;\n        scaledHeight += 1 * scale;\n      }\n    } else {\n      const bBox = this.borderRect_.getBoundingClientRect();\n      xy = style.getPageOffset(this.borderRect_);\n      scaledWidth = bBox.width;\n      scaledHeight = bBox.height;\n    }\n    return new Rect(xy.y, xy.y + scaledHeight, xy.x, xy.x + scaledWidth);\n  }\n\n  /**\n   * Get the text from this field to display on the block. May differ from\n   * ``getText`` due to ellipsis, and other formatting.\n   * @return {string} Text to display.\n   * @protected\n   */\n  getDisplayText_() {\n    let text = this.getText();\n    if (!text) {\n      // Prevent the field from disappearing if empty.\n      return Field.NBSP;\n    }\n    if (text.length > this.maxDisplayLength) {\n      // Truncate displayed string and add an ellipsis ('...').\n      text = text.substring(0, this.maxDisplayLength - 2) + '\\u2026';\n    }\n    // Replace whitespace with non-breaking spaces so the text doesn't collapse.\n    text = text.replace(/\\s/g, Field.NBSP);\n    if (this.sourceBlock_ && this.sourceBlock_.RTL) {\n      // The SVG is LTR, force text to be RTL.\n      text += '\\u200F';\n    }\n    return text;\n  }\n\n  /**\n   * Get the text from this field.\n   * Override getText_ to provide a different behavior than simply casting the\n   * value to a string.\n   * @return {string} Current text.\n   * @final\n   */\n  getText() {\n    // this.getText_ was intended so that devs don't have to remember to call\n    // super when overriding how the text of the field is generated. (#2910)\n    const text = this.getText_();\n    if (text !== null) return String(text);\n    return String(this.getValue());\n  }\n\n  /**\n   * A developer hook to override the returned text of this field.\n   * Override if the text representation of the value of this field\n   * is not just a string cast of its value.\n   * Return null to resort to a string cast.\n   * @return {?string} Current text or null.\n   * @protected\n   */\n  getText_() {\n    return null;\n  }\n\n  /**\n   * Force a rerender of the block that this field is installed on, which will\n   * rerender this field and adjust for any sizing changes.\n   * Other fields on the same block will not rerender, because their sizes have\n   * already been recorded.\n   * @package\n   */\n  markDirty() {\n    this.isDirty_ = true;\n    this.constants_ = null;\n  }\n\n  /**\n   * Force a rerender of the block that this field is installed on, which will\n   * rerender this field and adjust for any sizing changes.\n   * Other fields on the same block will not rerender, because their sizes have\n   * already been recorded.\n   * @package\n   */\n  forceRerender() {\n    this.isDirty_ = true;\n    if (this.sourceBlock_ && this.sourceBlock_.rendered) {\n      this.sourceBlock_.render();\n      this.sourceBlock_.bumpNeighbours();\n      this.updateMarkers_();\n    }\n  }\n\n  /**\n   * Used to change the value of the field. Handles validation and events.\n   * Subclasses should override doClassValidation_ and doValueUpdate_ rather\n   * than this method.\n   * @param {*} newValue New value.\n   * @final\n   */\n  setValue(newValue) {\n    const doLogging = false;\n    if (newValue === null) {\n      doLogging && console.log('null, return');\n      // Not a valid value to check.\n      return;\n    }\n\n    let validatedValue = this.doClassValidation_(newValue);\n    // Class validators might accidentally forget to return, we'll ignore that.\n    newValue = this.processValidation_(newValue, validatedValue);\n    if (newValue instanceof Error) {\n      doLogging && console.log('invalid class validation, return');\n      return;\n    }\n\n    const localValidator = this.getValidator();\n    if (localValidator) {\n      validatedValue = localValidator.call(this, newValue);\n      // Local validators might accidentally forget to return, we'll ignore\n      // that.\n      newValue = this.processValidation_(newValue, validatedValue);\n      if (newValue instanceof Error) {\n        doLogging && console.log('invalid local validation, return');\n        return;\n      }\n    }\n    const source = this.sourceBlock_;\n    if (source && source.disposed) {\n      doLogging && console.log('source disposed, return');\n      return;\n    }\n    const oldValue = this.getValue();\n    if (oldValue === newValue) {\n      doLogging && console.log('same, doValueUpdate_, return');\n      this.doValueUpdate_(newValue);\n      return;\n    }\n\n    this.doValueUpdate_(newValue);\n    if (source && eventUtils.isEnabled()) {\n      eventUtils.fire(new (eventUtils.get(eventUtils.BLOCK_CHANGE))(\n          source, 'field', this.name || null, oldValue, newValue));\n    }\n    if (this.isDirty_) {\n      this.forceRerender();\n    }\n    doLogging && console.log(this.value_);\n  }\n\n  /**\n   * Process the result of validation.\n   * @param {*} newValue New value.\n   * @param {*} validatedValue Validated value.\n   * @return {*} New value, or an Error object.\n   * @private\n   */\n  processValidation_(newValue, validatedValue) {\n    if (validatedValue === null) {\n      this.doValueInvalid_(newValue);\n      if (this.isDirty_) {\n        this.forceRerender();\n      }\n      return Error();\n    }\n    if (validatedValue !== undefined) {\n      newValue = validatedValue;\n    }\n    return newValue;\n  }\n\n  /**\n   * Get the current value of the field.\n   * @return {*} Current value.\n   */\n  getValue() {\n    return this.value_;\n  }\n\n  /**\n   * Used to validate a value. Returns input by default. Can be overridden by\n   * subclasses, see FieldDropdown.\n   * @param {*=} opt_newValue The value to be validated.\n   * @return {*} The validated value, same as input by default.\n   * @protected\n   */\n  doClassValidation_(opt_newValue) {\n    if (opt_newValue === null || opt_newValue === undefined) {\n      return null;\n    }\n    return opt_newValue;\n  }\n\n  /**\n   * Used to update the value of a field. Can be overridden by subclasses to do\n   * custom storage of values/updating of external things.\n   * @param {*} newValue The value to be saved.\n   * @protected\n   */\n  doValueUpdate_(newValue) {\n    this.value_ = newValue;\n    this.isDirty_ = true;\n  }\n\n  /**\n   * Used to notify the field an invalid value was input. Can be overridden by\n   * subclasses, see FieldTextInput.\n   * No-op by default.\n   * @param {*} _invalidValue The input value that was determined to be invalid.\n   * @protected\n   */\n  doValueInvalid_(_invalidValue) {\n    // NOP\n  }\n\n  /**\n   * Handle a mouse down event on a field.\n   * @param {!Event} e Mouse down event.\n   * @protected\n   */\n  onMouseDown_(e) {\n    if (!this.sourceBlock_ || !this.sourceBlock_.workspace) {\n      return;\n    }\n    const gesture =\n        /** @type {!WorkspaceSvg} */ (this.sourceBlock_.workspace)\n            .getGesture(e);\n    if (gesture) {\n      gesture.setStartField(this);\n    }\n  }\n\n  /**\n   * Sets the tooltip for this field.\n   * @param {?Tooltip.TipInfo} newTip The\n   *     text for the tooltip, a function that returns the text for the tooltip,\n   * a parent object whose tooltip will be used, or null to display the tooltip\n   *     of the parent block. To not display a tooltip pass the empty string.\n   */\n  setTooltip(newTip) {\n    if (!newTip && newTip !== '') {  // If null or undefined.\n      newTip = this.sourceBlock_;\n    }\n    const clickTarget = this.getClickTarget_();\n    if (clickTarget) {\n      clickTarget.tooltip = newTip;\n    } else {\n      // Field has not been initialized yet.\n      this.tooltip_ = newTip;\n    }\n  }\n\n  /**\n   * Returns the tooltip text for this field.\n   * @return {string} The tooltip text for this field.\n   */\n  getTooltip() {\n    const clickTarget = this.getClickTarget_();\n    if (clickTarget) {\n      return Tooltip.getTooltipOfObject(clickTarget);\n    }\n    // Field has not been initialized yet. Return stashed this.tooltip_ value.\n    return Tooltip.getTooltipOfObject({tooltip: this.tooltip_});\n  }\n\n  /**\n   * The element to bind the click handler to. If not set explicitly, defaults\n   * to the SVG root of the field. When this element is\n   * clicked on an editable field, the editor will open.\n   * @return {!Element} Element to bind click handler to.\n   * @protected\n   */\n  getClickTarget_() {\n    return this.clickTarget_ || this.getSvgRoot();\n  }\n\n  /**\n   * Return the absolute coordinates of the top-left corner of this field.\n   * The origin (0,0) is the top-left corner of the page body.\n   * @return {!Coordinate} Object with .x and .y properties.\n   * @protected\n   */\n  getAbsoluteXY_() {\n    return style.getPageOffset(\n        /** @type {!SVGRectElement} */ (this.getClickTarget_()));\n  }\n\n  /**\n   * Whether this field references any Blockly variables.  If true it may need\n   * to be handled differently during serialization and deserialization.\n   * Subclasses may override this.\n   * @return {boolean} True if this field has any variable references.\n   * @package\n   */\n  referencesVariables() {\n    return false;\n  }\n\n  /**\n   * Refresh the variable name referenced by this field if this field references\n   * variables.\n   * @package\n   */\n  refreshVariableName() {\n    // NOP\n  }\n\n  /**\n   * Search through the list of inputs and their fields in order to find the\n   * parent input of a field.\n   * @return {Input} The input that the field belongs to.\n   * @package\n   */\n  getParentInput() {\n    let parentInput = null;\n    const block = this.sourceBlock_;\n    const inputs = block.inputList;\n\n    for (let idx = 0; idx < block.inputList.length; idx++) {\n      const input = inputs[idx];\n      const fieldRows = input.fieldRow;\n      for (let j = 0; j < fieldRows.length; j++) {\n        if (fieldRows[j] === this) {\n          parentInput = input;\n          break;\n        }\n      }\n    }\n    return parentInput;\n  }\n\n  /**\n   * Returns whether or not we should flip the field in RTL.\n   * @return {boolean} True if we should flip in RTL.\n   */\n  getFlipRtl() {\n    return false;\n  }\n\n  /**\n   * Returns whether or not the field is tab navigable.\n   * @return {boolean} True if the field is tab navigable.\n   */\n  isTabNavigable() {\n    return false;\n  }\n\n  /**\n   * Handles the given keyboard shortcut.\n   * @param {!ShortcutRegistry.KeyboardShortcut} _shortcut The shortcut to be\n   *     handled.\n   * @return {boolean} True if the shortcut has been handled, false otherwise.\n   * @public\n   */\n  onShortcut(_shortcut) {\n    return false;\n  }\n\n  /**\n   * Add the cursor SVG to this fields SVG group.\n   * @param {SVGElement} cursorSvg The SVG root of the cursor to be added to the\n   *     field group.\n   * @package\n   */\n  setCursorSvg(cursorSvg) {\n    if (!cursorSvg) {\n      this.cursorSvg_ = null;\n      return;\n    }\n\n    this.fieldGroup_.appendChild(cursorSvg);\n    this.cursorSvg_ = cursorSvg;\n  }\n\n  /**\n   * Add the marker SVG to this fields SVG group.\n   * @param {SVGElement} markerSvg The SVG root of the marker to be added to the\n   *     field group.\n   * @package\n   */\n  setMarkerSvg(markerSvg) {\n    if (!markerSvg) {\n      this.markerSvg_ = null;\n      return;\n    }\n\n    this.fieldGroup_.appendChild(markerSvg);\n    this.markerSvg_ = markerSvg;\n  }\n\n  /**\n   * Redraw any attached marker or cursor svgs if needed.\n   * @protected\n   */\n  updateMarkers_() {\n    const workspace =\n        /** @type {!WorkspaceSvg} */ (this.sourceBlock_.workspace);\n    if (workspace.keyboardAccessibilityMode && this.cursorSvg_) {\n      workspace.getCursor().draw();\n    }\n    if (workspace.keyboardAccessibilityMode && this.markerSvg_) {\n      // TODO(#4592): Update all markers on the field.\n      workspace.getMarker(MarkerManager.LOCAL_MARKER).draw();\n    }\n  }\n}\n\n/**\n * The default value for this field.\n * @type {*}\n * @protected\n */\nField.prototype.DEFAULT_VALUE = null;\n\n/**\n * Non-breaking space.\n * @const\n */\nField.NBSP = '\\u00A0';\n\n/**\n * A value used to signal when a field's constructor should *not* set the\n * field's value or run configure_, and should allow a subclass to do that\n * instead.\n * @const\n */\nField.SKIP_SETUP = new Sentinel();\n\nexports.Field = Field;\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Non-editable, non-serializable text field.  Used for titles,\n *    labels, etc.\n */\n'use strict';\n\n/**\n * Non-editable, non-serializable text field.  Used for titles,\n *    labels, etc.\n * @class\n */\ngoog.module('Blockly.FieldLabel');\n\nconst dom = goog.require('Blockly.utils.dom');\nconst fieldRegistry = goog.require('Blockly.fieldRegistry');\nconst parsing = goog.require('Blockly.utils.parsing');\nconst {Field} = goog.require('Blockly.Field');\n/* eslint-disable-next-line no-unused-vars */\nconst {Sentinel} = goog.requireType('Blockly.utils.Sentinel');\n\n\n/**\n * Class for a non-editable, non-serializable text field.\n * @extends {Field}\n * @alias Blockly.FieldLabel\n */\nclass FieldLabel extends Field {\n  /**\n   * @param {(string|!Sentinel)=} opt_value The initial value of the\n   *     field. Should cast to a string. Defaults to an empty string if null or\n   *     undefined.\n   *     Also accepts Field.SKIP_SETUP if you wish to skip setup (only used by\n   *     subclasses that want to handle configuration and setting the field\n   *     value after their own constructors have run).\n   * @param {string=} opt_class Optional CSS class for the field's text.\n   * @param {Object=} opt_config A map of options used to configure the field.\n   *    See the [field creation documentation]{@link\n   * https://developers.google.com/blockly/guides/create-custom-blocks/fields/built-in-fields/label#creation}\n   *    for a list of properties this parameter supports.\n   */\n  constructor(opt_value, opt_class, opt_config) {\n    super(Field.SKIP_SETUP);\n\n    /**\n     * The html class name to use for this field.\n     * @type {?string}\n     * @private\n     */\n    this.class_ = null;\n\n    /**\n     * Editable fields usually show some sort of UI indicating they are\n     * editable. This field should not.\n     * @type {boolean}\n     */\n    this.EDITABLE = false;\n\n    if (opt_value === Field.SKIP_SETUP) return;\n    if (opt_config) {\n      this.configure_(opt_config);\n    } else {\n      this.class_ = opt_class || null;\n    }\n    this.setValue(opt_value);\n  }\n\n  /**\n   * @override\n   */\n  configure_(config) {\n    super.configure_(config);\n    this.class_ = config['class'];\n  }\n\n  /**\n   * Create block UI for this label.\n   * @package\n   */\n  initView() {\n    this.createTextElement_();\n    if (this.class_) {\n      dom.addClass(\n          /** @type {!SVGTextElement} */ (this.textElement_), this.class_);\n    }\n  }\n\n  /**\n   * Ensure that the input value casts to a valid string.\n   * @param {*=} opt_newValue The input value.\n   * @return {?string} A valid string, or null if invalid.\n   * @protected\n   */\n  doClassValidation_(opt_newValue) {\n    if (opt_newValue === null || opt_newValue === undefined) {\n      return null;\n    }\n    return String(opt_newValue);\n  }\n\n  /**\n   * Set the CSS class applied to the field's textElement_.\n   * @param {?string} cssClass The new CSS class name, or null to remove.\n   */\n  setClass(cssClass) {\n    if (this.textElement_) {\n      // This check isn't necessary, but it's faster than letting removeClass\n      // figure it out.\n      if (this.class_) {\n        dom.removeClass(this.textElement_, this.class_);\n      }\n      if (cssClass) {\n        dom.addClass(this.textElement_, cssClass);\n      }\n    }\n    this.class_ = cssClass;\n  }\n\n  /**\n   * Construct a FieldLabel from a JSON arg object,\n   * dereferencing any string table references.\n   * @param {!Object} options A JSON object with options (text, and class).\n   * @return {!FieldLabel} The new field instance.\n   * @package\n   * @nocollapse\n   */\n  static fromJson(options) {\n    const text = parsing.replaceMessageReferences(options['text']);\n    // `this` might be a subclass of FieldLabel if that class doesn't override\n    // the static fromJson method.\n    return new this(text, undefined, options);\n  }\n}\n\n/**\n * The default value for this field.\n * @type {*}\n * @protected\n */\nFieldLabel.prototype.DEFAULT_VALUE = '';\n\nfieldRegistry.register('field_label', FieldLabel);\n\nexports.FieldLabel = FieldLabel;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Class representing inputs with connections on a rendered block.\n */\n\n/**\n * Class representing inputs with connections on a rendered block.\n * @class\n */\ngoog.module('Blockly.blockRendering.InputConnection');\n\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockSvg} = goog.requireType('Blockly.BlockSvg');\nconst {Connection} = goog.require('Blockly.blockRendering.Connection');\n/* eslint-disable-next-line no-unused-vars */\nconst {ConstantProvider} = goog.requireType('Blockly.blockRendering.ConstantProvider');\n/* eslint-disable-next-line no-unused-vars */\nconst {Input} = goog.requireType('Blockly.Input');\n/* eslint-disable-next-line no-unused-vars */\nconst {RenderedConnection} = goog.requireType('Blockly.RenderedConnection');\nconst {Types} = goog.require('Blockly.blockRendering.Types');\n\n\n/**\n * The base class to represent an input that takes up space on a block\n * during rendering\n * @package\n * @extends {Connection}\n * @alias Blockly.blockRendering.InputConnection\n */\nclass InputConnection extends Connection {\n  /**\n   * @param {!ConstantProvider} constants The rendering\n   *   constants provider.\n   * @param {!Input} input The input to measure and store information for.\n   */\n  constructor(constants, input) {\n    super(constants, /** @type {!RenderedConnection} */ (input.connection));\n\n    this.type |= Types.INPUT;\n\n    /** @type {!Input} */\n    this.input = input;\n\n    /** @type {number} */\n    this.align = input.align;\n\n    /** @type {BlockSvg} */\n    this.connectedBlock = input.connection && input.connection.targetBlock() ?\n        /** @type {BlockSvg} */ (input.connection.targetBlock()) :\n        null;\n\n    if (this.connectedBlock) {\n      const bBox = this.connectedBlock.getHeightWidth();\n      this.connectedBlockWidth = bBox.width;\n      this.connectedBlockHeight = bBox.height;\n    } else {\n      this.connectedBlockWidth = 0;\n      this.connectedBlockHeight = 0;\n    }\n\n    /** @type {number} */\n    this.connectionOffsetX = 0;\n\n    /** @type {number} */\n    this.connectionOffsetY = 0;\n  }\n}\n\nexports.InputConnection = InputConnection;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Methods for rendering debug graphics.\n */\n'use strict';\n\n\n/**\n * Methods for rendering debug graphics.\n * @class\n */\ngoog.module('Blockly.blockRendering.Debug');\n\nconst dom = goog.require('Blockly.utils.dom');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockSvg} = goog.requireType('Blockly.BlockSvg');\nconst {ConnectionType} = goog.require('Blockly.ConnectionType');\n/* eslint-disable-next-line no-unused-vars */\nconst {ConstantProvider} = goog.requireType('Blockly.blockRendering.ConstantProvider');\nconst {Field} = goog.require('Blockly.blockRendering.Field');\nconst {FieldLabel} = goog.require('Blockly.FieldLabel');\nconst {InputConnection} = goog.require('Blockly.blockRendering.InputConnection');\n/* eslint-disable-next-line no-unused-vars */\nconst {InRowSpacer} = goog.requireType('Blockly.blockRendering.InRowSpacer');\n/* eslint-disable-next-line no-unused-vars */\nconst {Measurable} = goog.requireType('Blockly.blockRendering.Measurable');\n/* eslint-disable-next-line no-unused-vars */\nconst {RenderInfo} = goog.requireType('Blockly.blockRendering.RenderInfo');\n/* eslint-disable-next-line no-unused-vars */\nconst {RenderInfo: ZelosInfo} = goog.requireType('Blockly.zelos.RenderInfo');\n/* eslint-disable-next-line no-unused-vars */\nconst {RenderedConnection} = goog.requireType('Blockly.RenderedConnection');\n/* eslint-disable-next-line no-unused-vars */\nconst {Row} = goog.requireType('Blockly.blockRendering.Row');\nconst {Svg} = goog.require('Blockly.utils.Svg');\nconst {Types} = goog.require('Blockly.blockRendering.Types');\n\n\n/**\n * An object that renders rectangles and dots for debugging rendering code.\n * @alias Blockly.blockRendering.Debug\n */\nclass Debug {\n  /**\n   * @param {!ConstantProvider} constants The renderer's\n   *     constants.\n   * @package\n   */\n  constructor(constants) {\n    /**\n     * An array of SVG elements that have been created by this object.\n     * @type {Array<!SVGElement>}\n     * @private\n     */\n    this.debugElements_ = [];\n\n    /**\n     * The SVG root of the block that is being rendered.  Debug elements will\n     * be attached to this root.\n     * @type {SVGElement}\n     * @private\n     */\n    this.svgRoot_ = null;\n\n    /**\n     * The renderer's constant provider.\n     * @type {!ConstantProvider}\n     * @private\n     */\n    this.constants_ = constants;\n\n    /**\n     * @type {string}\n     * @private\n     */\n    this.randomColour_ = '';\n  }\n\n  /**\n   * Remove all elements the this object created on the last pass.\n   * @package\n   */\n  clearElems() {\n    for (let i = 0; i < this.debugElements_.length; i++) {\n      const elem = this.debugElements_[i];\n      dom.removeNode(elem);\n    }\n\n    this.debugElements_ = [];\n  }\n\n  /**\n   * Draw a debug rectangle for a spacer (empty) row.\n   * @param {!Row} row The row to render.\n   * @param {number} cursorY The y position of the top of the row.\n   * @param {boolean} isRtl Whether the block is rendered RTL.\n   * @package\n   */\n  drawSpacerRow(row, cursorY, isRtl) {\n    if (!Debug.config.rowSpacers) {\n      return;\n    }\n\n    const height = Math.abs(row.height);\n    const isNegativeSpacing = row.height < 0;\n    if (isNegativeSpacing) {\n      cursorY -= height;\n    }\n\n    this.debugElements_.push(dom.createSvgElement(\n        Svg.RECT, {\n          'class': 'rowSpacerRect blockRenderDebug',\n          'x': isRtl ? -(row.xPos + row.width) : row.xPos,\n          'y': cursorY,\n          'width': row.width,\n          'height': height,\n          'stroke': isNegativeSpacing ? 'black' : 'blue',\n          'fill': 'blue',\n          'fill-opacity': '0.5',\n          'stroke-width': '1px',\n        },\n        this.svgRoot_));\n  }\n\n  /**\n   * Draw a debug rectangle for a horizontal spacer.\n   * @param {!InRowSpacer} elem The spacer to render.\n   * @param {number} rowHeight The height of the container row.\n   * @param {boolean} isRtl Whether the block is rendered RTL.\n   * @package\n   */\n  drawSpacerElem(elem, rowHeight, isRtl) {\n    if (!Debug.config.elemSpacers) {\n      return;\n    }\n\n    const width = Math.abs(elem.width);\n    const isNegativeSpacing = elem.width < 0;\n    let xPos = isNegativeSpacing ? elem.xPos - width : elem.xPos;\n    if (isRtl) {\n      xPos = -(xPos + width);\n    }\n    const yPos = elem.centerline - elem.height / 2;\n    this.debugElements_.push(dom.createSvgElement(\n        Svg.RECT, {\n          'class': 'elemSpacerRect blockRenderDebug',\n          'x': xPos,\n          'y': yPos,\n          'width': width,\n          'height': elem.height,\n          'stroke': 'pink',\n          'fill': isNegativeSpacing ? 'black' : 'pink',\n          'fill-opacity': '0.5',\n          'stroke-width': '1px',\n        },\n        this.svgRoot_));\n  }\n\n  /**\n   * Draw a debug rectangle for an in-row element.\n   * @param {!Measurable} elem The element to render.\n   * @param {boolean} isRtl Whether the block is rendered RTL.\n   * @package\n   */\n  drawRenderedElem(elem, isRtl) {\n    if (Debug.config.elems) {\n      let xPos = elem.xPos;\n      if (isRtl) {\n        xPos = -(xPos + elem.width);\n      }\n      const yPos = elem.centerline - elem.height / 2;\n      this.debugElements_.push(dom.createSvgElement(\n          Svg.RECT, {\n            'class': 'rowRenderingRect blockRenderDebug',\n            'x': xPos,\n            'y': yPos,\n            'width': elem.width,\n            'height': elem.height,\n            'stroke': 'black',\n            'fill': 'none',\n            'stroke-width': '1px',\n          },\n          this.svgRoot_));\n\n      if (Types.isField(elem) && elem instanceof Field &&\n          elem.field instanceof FieldLabel) {\n        const baseline = this.constants_.FIELD_TEXT_BASELINE;\n        this.debugElements_.push(dom.createSvgElement(\n            Svg.RECT, {\n              'class': 'rowRenderingRect blockRenderDebug',\n              'x': xPos,\n              'y': yPos + baseline,\n              'width': elem.width,\n              'height': '0.1px',\n              'stroke': 'red',\n              'fill': 'none',\n              'stroke-width': '0.5px',\n            },\n            this.svgRoot_));\n      }\n    }\n\n\n    if (Types.isInput(elem) && elem instanceof InputConnection &&\n        Debug.config.connections) {\n      this.drawConnection(elem.connectionModel);\n    }\n  }\n\n  /**\n   * Draw a circle at the location of the given connection.  Inputs and outputs\n   * share the same colours, as do previous and next.  When positioned correctly\n   * a connected pair will look like a bullseye.\n   * @param {RenderedConnection} conn The connection to circle.\n   * @suppress {visibility} Suppress visibility of conn.offsetInBlock_ since\n   * this is a debug module.\n   * @package\n   */\n  drawConnection(conn) {\n    if (!Debug.config.connections) {\n      return;\n    }\n\n    let colour;\n    let size;\n    let fill;\n    if (conn.type === ConnectionType.INPUT_VALUE) {\n      size = 4;\n      colour = 'magenta';\n      fill = 'none';\n    } else if (conn.type === ConnectionType.OUTPUT_VALUE) {\n      size = 2;\n      colour = 'magenta';\n      fill = colour;\n    } else if (conn.type === ConnectionType.NEXT_STATEMENT) {\n      size = 4;\n      colour = 'goldenrod';\n      fill = 'none';\n    } else if (conn.type === ConnectionType.PREVIOUS_STATEMENT) {\n      size = 2;\n      colour = 'goldenrod';\n      fill = colour;\n    }\n    this.debugElements_.push(dom.createSvgElement(\n        Svg.CIRCLE, {\n          'class': 'blockRenderDebug',\n          'cx': conn.offsetInBlock_.x,\n          'cy': conn.offsetInBlock_.y,\n          'r': size,\n          'fill': fill,\n          'stroke': colour,\n        },\n        this.svgRoot_));\n  }\n\n  /**\n   * Draw a debug rectangle for a non-empty row.\n   * @param {!Row} row The non-empty row to render.\n   * @param {number} cursorY The y position of the top of the row.\n   * @param {boolean} isRtl Whether the block is rendered RTL.\n   * @package\n   */\n  drawRenderedRow(row, cursorY, isRtl) {\n    if (!Debug.config.rows) {\n      return;\n    }\n    this.debugElements_.push(dom.createSvgElement(\n        Svg.RECT, {\n          'class': 'elemRenderingRect blockRenderDebug',\n          'x': isRtl ? -(row.xPos + row.width) : row.xPos,\n          'y': row.yPos,\n          'width': row.width,\n          'height': row.height,\n          'stroke': 'red',\n          'fill': 'none',\n          'stroke-width': '1px',\n        },\n        this.svgRoot_));\n\n    if (Types.isTopOrBottomRow(row)) {\n      return;\n    }\n\n    if (Debug.config.connectedBlockBounds) {\n      this.debugElements_.push(dom.createSvgElement(\n          Svg.RECT, {\n            'class': 'connectedBlockWidth blockRenderDebug',\n            'x': isRtl ? -(row.xPos + row.widthWithConnectedBlocks) : row.xPos,\n            'y': row.yPos,\n            'width': row.widthWithConnectedBlocks,\n            'height': row.height,\n            'stroke': this.randomColour_,\n            'fill': 'none',\n            'stroke-width': '1px',\n            'stroke-dasharray': '3,3',\n          },\n          this.svgRoot_));\n    }\n  }\n\n  /**\n   * Draw debug rectangles for a non-empty row and all of its subcomponents.\n   * @param {!Row} row The non-empty row to render.\n   * @param {number} cursorY The y position of the top of the row.\n   * @param {boolean} isRtl Whether the block is rendered RTL.\n   * @package\n   */\n  drawRowWithElements(row, cursorY, isRtl) {\n    for (let i = 0; i < row.elements.length; i++) {\n      const elem = row.elements[i];\n      if (!elem) {\n        console.warn('A row has an undefined or null element.', row, elem);\n        continue;\n      }\n      if (Types.isSpacer(elem)) {\n        this.drawSpacerElem(\n            /** @type {!InRowSpacer} */ (elem), row.height, isRtl);\n      } else {\n        this.drawRenderedElem(elem, isRtl);\n      }\n    }\n    this.drawRenderedRow(row, cursorY, isRtl);\n  }\n\n  /**\n   * Draw a debug rectangle around the entire block.\n   * @param {!RenderInfo} info Rendering information about\n   *     the block to debug.\n   * @package\n   */\n  drawBoundingBox(info) {\n    if (!Debug.config.blockBounds) {\n      return;\n    }\n    // Bounding box without children.\n    let xPos = info.RTL ? -info.width : 0;\n    const yPos = 0;\n    this.debugElements_.push(dom.createSvgElement(\n        Svg.RECT, {\n          'class': 'blockBoundingBox blockRenderDebug',\n          'x': xPos,\n          'y': yPos,\n          'width': info.width,\n          'height': info.height,\n          'stroke': 'black',\n          'fill': 'none',\n          'stroke-width': '1px',\n          'stroke-dasharray': '5,5',\n        },\n        this.svgRoot_));\n\n    if (Debug.config.connectedBlockBounds) {\n      // Bounding box with children.\n      xPos = info.RTL ? -info.widthWithChildren : 0;\n      this.debugElements_.push(dom.createSvgElement(\n          Svg.RECT, {\n            'class': 'blockRenderDebug',\n            'x': xPos,\n            'y': yPos,\n            'width': info.widthWithChildren,\n            'height': info.height,\n            'stroke': '#DF57BC',\n            'fill': 'none',\n            'stroke-width': '1px',\n            'stroke-dasharray': '3,3',\n          },\n          this.svgRoot_));\n    }\n  }\n\n  /**\n   * Do all of the work to draw debug information for the whole block.\n   * @param {!BlockSvg} block The block to draw debug information for.\n   * @param {!RenderInfo} info Rendering information about\n   *     the block to debug.\n   * @package\n   */\n  drawDebug(block, info) {\n    this.clearElems();\n    this.svgRoot_ = block.getSvgRoot();\n\n    this.randomColour_ =\n        '#' + Math.floor(Math.random() * 16777215).toString(16);\n\n    let cursorY = 0;\n    for (let i = 0; i < info.rows.length; i++) {\n      const row = info.rows[i];\n      if (Types.isBetweenRowSpacer(row)) {\n        this.drawSpacerRow(row, cursorY, info.RTL);\n      } else {\n        this.drawRowWithElements(row, cursorY, info.RTL);\n      }\n      cursorY += row.height;\n    }\n\n    if (block.previousConnection) {\n      this.drawConnection(block.previousConnection);\n    }\n    if (block.nextConnection) {\n      this.drawConnection(block.nextConnection);\n    }\n    if (block.outputConnection) {\n      this.drawConnection(block.outputConnection);\n    }\n    /**\n     * TODO: Find a better way to do this check without pulling in all of\n     * zelos, or just delete this line or the whole debug renderer.\n     */\n    const maybeZelosInfo = /** @type {!ZelosInfo} */ (info);\n    if (maybeZelosInfo.rightSide) {\n      this.drawRenderedElem(maybeZelosInfo.rightSide, info.RTL);\n    }\n\n    this.drawBoundingBox(info);\n\n    this.drawRender(block.pathObject.svgPath);\n  }\n\n  /**\n   * Show a debug filter to highlight that a block has been rendered.\n   * @param {!SVGElement} svgPath The block's SVG path.\n   * @package\n   */\n  drawRender(svgPath) {\n    if (!Debug.config.render) {\n      return;\n    }\n    svgPath.setAttribute(\n        'filter', 'url(#' + this.constants_.debugFilterId + ')');\n    setTimeout(function() {\n      svgPath.setAttribute('filter', '');\n    }, 100);\n  }\n}\n\n/**\n * Configuration object containing booleans to enable and disable debug\n * rendering of specific rendering components.\n * @type {!Object<string, boolean>}\n */\nDebug.config = {\n  rowSpacers: true,\n  elemSpacers: true,\n  rows: true,\n  elems: true,\n  connections: true,\n  blockBounds: true,\n  connectedBlockBounds: true,\n  render: true,\n};\n\nexports.Debug = Debug;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Methods for graphically rendering a block as SVG.\n */\n'use strict';\n\n/**\n * Methods for graphically rendering a block as SVG.\n * @class\n */\ngoog.module('Blockly.blockRendering.Drawer');\n\nconst debug = goog.require('Blockly.blockRendering.debug');\nconst svgPaths = goog.require('Blockly.utils.svgPaths');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockSvg} = goog.requireType('Blockly.BlockSvg');\nconst {Connection} = goog.require('Blockly.blockRendering.Connection');\n/* eslint-disable-next-line no-unused-vars */\nconst {ConstantProvider} = goog.requireType('Blockly.blockRendering.ConstantProvider');\n/* eslint-disable-next-line no-unused-vars */\nconst {ExternalValueInput} = goog.requireType('Blockly.blockRendering.ExternalValueInput');\n/* eslint-disable-next-line no-unused-vars */\nconst {Field} = goog.requireType('Blockly.blockRendering.Field');\n/* eslint-disable-next-line no-unused-vars */\nconst {Icon} = goog.requireType('Blockly.blockRendering.Icon');\n/* eslint-disable-next-line no-unused-vars */\nconst {InlineInput} = goog.requireType('Blockly.blockRendering.InlineInput');\n/* eslint-disable-next-line no-unused-vars */\nconst {RenderInfo} = goog.requireType('Blockly.blockRendering.RenderInfo');\n/* eslint-disable-next-line no-unused-vars */\nconst {Row} = goog.requireType('Blockly.blockRendering.Row');\nconst {Types} = goog.require('Blockly.blockRendering.Types');\n\n\n/**\n * An object that draws a block based on the given rendering information.\n * @alias Blockly.blockRendering.Drawer\n */\nclass Drawer {\n  /**\n   * @param {!BlockSvg} block The block to render.\n   * @param {!RenderInfo} info An object containing all\n   *   information needed to render this block.\n   * @package\n   */\n  constructor(block, info) {\n    this.block_ = block;\n    this.info_ = info;\n    this.topLeft_ = block.getRelativeToSurfaceXY();\n    this.outlinePath_ = '';\n    this.inlinePath_ = '';\n\n    /**\n     * The renderer's constant provider.\n     * @type {!ConstantProvider}\n     * @protected\n     */\n    this.constants_ = info.getRenderer().getConstants();\n  }\n\n  /**\n   * Draw the block to the workspace. Here \"drawing\" means setting SVG path\n   * elements and moving fields, icons, and connections on the screen.\n   *\n   * The pieces of the paths are pushed into arrays of \"steps\", which are then\n   * joined with spaces and set directly on the block.  This guarantees that\n   * the steps are separated by spaces for improved readability, but isn't\n   * required.\n   * @package\n   */\n  draw() {\n    this.hideHiddenIcons_();\n    this.drawOutline_();\n    this.drawInternals_();\n\n    this.block_.pathObject.setPath(this.outlinePath_ + '\\n' + this.inlinePath_);\n    if (this.info_.RTL) {\n      this.block_.pathObject.flipRTL();\n    }\n    if (debug.isDebuggerEnabled()) {\n      this.block_.renderingDebugger.drawDebug(this.block_, this.info_);\n    }\n    this.recordSizeOnBlock_();\n  }\n\n  /**\n   * Save sizing information back to the block\n   * Most of the rendering information can be thrown away at the end of the\n   * render. Anything that needs to be kept around should be set in this\n   * function.\n   * @protected\n   */\n  recordSizeOnBlock_() {\n    // This is used when the block is reporting its size to anyone else.\n    // The dark path adds to the size of the block in both X and Y.\n    this.block_.height = this.info_.height;\n    this.block_.width = this.info_.widthWithChildren;\n  }\n\n  /**\n   * Hide icons that were marked as hidden.\n   * @protected\n   */\n  hideHiddenIcons_() {\n    for (let i = 0, iconInfo; (iconInfo = this.info_.hiddenIcons[i]); i++) {\n      iconInfo.icon.iconGroup_.setAttribute('display', 'none');\n    }\n  }\n\n  /**\n   * Create the outline of the block.  This is a single continuous path.\n   * @protected\n   */\n  drawOutline_() {\n    this.drawTop_();\n    for (let r = 1; r < this.info_.rows.length - 1; r++) {\n      const row = this.info_.rows[r];\n      if (row.hasJaggedEdge) {\n        this.drawJaggedEdge_(row);\n      } else if (row.hasStatement) {\n        this.drawStatementInput_(row);\n      } else if (row.hasExternalInput) {\n        this.drawValueInput_(row);\n      } else {\n        this.drawRightSideRow_(row);\n      }\n    }\n    this.drawBottom_();\n    this.drawLeft_();\n  }\n\n  /**\n   * Add steps for the top corner of the block, taking into account\n   * details such as hats and rounded corners.\n   * @protected\n   */\n  drawTop_() {\n    const topRow = this.info_.topRow;\n    const elements = topRow.elements;\n\n    this.positionPreviousConnection_();\n    this.outlinePath_ += svgPaths.moveBy(topRow.xPos, this.info_.startY);\n    for (let i = 0, elem; (elem = elements[i]); i++) {\n      if (Types.isLeftRoundedCorner(elem)) {\n        this.outlinePath_ += this.constants_.OUTSIDE_CORNERS.topLeft;\n      } else if (Types.isRightRoundedCorner(elem)) {\n        this.outlinePath_ += this.constants_.OUTSIDE_CORNERS.topRight;\n      } else if (\n          Types.isPreviousConnection(elem) && elem instanceof Connection) {\n        this.outlinePath_ += elem.shape.pathLeft;\n      } else if (Types.isHat(elem)) {\n        this.outlinePath_ += this.constants_.START_HAT.path;\n      } else if (Types.isSpacer(elem)) {\n        this.outlinePath_ += svgPaths.lineOnAxis('h', elem.width);\n      }\n      // No branch for a square corner, because it's a no-op.\n    }\n    this.outlinePath_ += svgPaths.lineOnAxis('v', topRow.height);\n  }\n\n  /**\n   * Add steps for the jagged edge of a row on a collapsed block.\n   * @param {!Row} row The row to draw the side of.\n   * @protected\n   */\n  drawJaggedEdge_(row) {\n    const remainder = row.height - this.constants_.JAGGED_TEETH.height;\n    this.outlinePath_ +=\n        this.constants_.JAGGED_TEETH.path + svgPaths.lineOnAxis('v', remainder);\n  }\n\n  /**\n   * Add steps for an external value input, rendered as a notch in the side\n   * of the block.\n   * @param {!Row} row The row that this input belongs to.\n   * @protected\n   */\n  drawValueInput_(row) {\n    const input =\n        /** @type {ExternalValueInput|InlineInput} */ (row.getLastInput());\n    this.positionExternalValueConnection_(row);\n\n    const pathDown = (typeof input.shape.pathDown === 'function') ?\n        input.shape.pathDown(input.height) :\n        input.shape.pathDown;\n\n    this.outlinePath_ += svgPaths.lineOnAxis('H', input.xPos + input.width) +\n        pathDown +\n        svgPaths.lineOnAxis('v', row.height - input.connectionHeight);\n  }\n\n  /**\n   * Add steps for a statement input.\n   * @param {!Row} row The row that this input belongs to.\n   * @protected\n   */\n  drawStatementInput_(row) {\n    const input = row.getLastInput();\n    // Where to start drawing the notch, which is on the right side in LTR.\n    const x = input.xPos + input.notchOffset + input.shape.width;\n\n    const innerTopLeftCorner = input.shape.pathRight +\n        svgPaths.lineOnAxis(\n            'h', -(input.notchOffset - this.constants_.INSIDE_CORNERS.width)) +\n        this.constants_.INSIDE_CORNERS.pathTop;\n\n    const innerHeight =\n        row.height - (2 * this.constants_.INSIDE_CORNERS.height);\n\n    this.outlinePath_ += svgPaths.lineOnAxis('H', x) + innerTopLeftCorner +\n        svgPaths.lineOnAxis('v', innerHeight) +\n        this.constants_.INSIDE_CORNERS.pathBottom +\n        svgPaths.lineOnAxis('H', row.xPos + row.width);\n\n    this.positionStatementInputConnection_(row);\n  }\n\n  /**\n   * Add steps for the right side of a row that does not have value or\n   * statement input connections.\n   * @param {!Row} row The row to draw the side of.\n   * @protected\n   */\n  drawRightSideRow_(row) {\n    this.outlinePath_ += svgPaths.lineOnAxis('V', row.yPos + row.height);\n  }\n\n  /**\n   * Add steps for the bottom edge of a block, possibly including a notch\n   * for the next connection.\n   * @protected\n   */\n  drawBottom_() {\n    const bottomRow = this.info_.bottomRow;\n    const elems = bottomRow.elements;\n    this.positionNextConnection_();\n\n    let rightCornerYOffset = 0;\n    let outlinePath = '';\n    for (let i = elems.length - 1, elem; (elem = elems[i]); i--) {\n      if (Types.isNextConnection(elem) && elem instanceof Connection) {\n        outlinePath += elem.shape.pathRight;\n      } else if (Types.isLeftSquareCorner(elem)) {\n        outlinePath += svgPaths.lineOnAxis('H', bottomRow.xPos);\n      } else if (Types.isLeftRoundedCorner(elem)) {\n        outlinePath += this.constants_.OUTSIDE_CORNERS.bottomLeft;\n      } else if (Types.isRightRoundedCorner(elem)) {\n        outlinePath += this.constants_.OUTSIDE_CORNERS.bottomRight;\n        rightCornerYOffset = this.constants_.OUTSIDE_CORNERS.rightHeight;\n      } else if (Types.isSpacer(elem)) {\n        outlinePath += svgPaths.lineOnAxis('h', elem.width * -1);\n      }\n    }\n\n    this.outlinePath_ +=\n        svgPaths.lineOnAxis('V', bottomRow.baseline - rightCornerYOffset);\n    this.outlinePath_ += outlinePath;\n  }\n\n  /**\n   * Add steps for the left side of the block, which may include an output\n   * connection\n   * @protected\n   */\n  drawLeft_() {\n    const outputConnection = this.info_.outputConnection;\n    this.positionOutputConnection_();\n\n    if (outputConnection) {\n      const tabBottom =\n          outputConnection.connectionOffsetY + outputConnection.height;\n      const pathUp = (typeof outputConnection.shape.pathUp === 'function') ?\n          outputConnection.shape.pathUp(outputConnection.height) :\n          outputConnection.shape.pathUp;\n\n      // Draw a line up to the bottom of the tab.\n      this.outlinePath_ += svgPaths.lineOnAxis('V', tabBottom) + pathUp;\n    }\n    // Close off the path.  This draws a vertical line up to the start of the\n    // block's path, which may be either a rounded or a sharp corner.\n    this.outlinePath_ += 'z';\n  }\n\n  /**\n   * Draw the internals of the block: inline inputs, fields, and icons.  These\n   * do not depend on the outer path for placement.\n   * @protected\n   */\n  drawInternals_() {\n    for (let i = 0, row; (row = this.info_.rows[i]); i++) {\n      for (let j = 0, elem; (elem = row.elements[j]); j++) {\n        if (Types.isInlineInput(elem)) {\n          this.drawInlineInput_(\n              /** @type {!InlineInput} */ (elem));\n        } else if (Types.isIcon(elem) || Types.isField(elem)) {\n          this.layoutField_(\n              /** @type {!Field|!Icon} */\n              (elem));\n        }\n      }\n    }\n  }\n\n  /**\n   * Push a field or icon's new position to its SVG root.\n   * @param {!Icon|!Field} fieldInfo\n   *     The rendering information for the field or icon.\n   * @protected\n   */\n  layoutField_(fieldInfo) {\n    let svgGroup;\n    if (Types.isField(fieldInfo)) {\n      svgGroup = fieldInfo.field.getSvgRoot();\n    } else if (Types.isIcon(fieldInfo)) {\n      svgGroup = fieldInfo.icon.iconGroup_;\n    }\n\n    const yPos = fieldInfo.centerline - fieldInfo.height / 2;\n    let xPos = fieldInfo.xPos;\n    let scale = '';\n    if (this.info_.RTL) {\n      xPos = -(xPos + fieldInfo.width);\n      if (fieldInfo.flipRtl) {\n        xPos += fieldInfo.width;\n        scale = 'scale(-1 1)';\n      }\n    }\n    if (Types.isIcon(fieldInfo)) {\n      svgGroup.setAttribute('display', 'block');\n      svgGroup.setAttribute(\n          'transform', 'translate(' + xPos + ',' + yPos + ')');\n      fieldInfo.icon.computeIconLocation();\n    } else {\n      svgGroup.setAttribute(\n          'transform', 'translate(' + xPos + ',' + yPos + ')' + scale);\n    }\n\n    if (this.info_.isInsertionMarker) {\n      // Fields and icons are invisible on insertion marker.  They still have to\n      // be rendered so that the block can be sized correctly.\n      svgGroup.setAttribute('display', 'none');\n    }\n  }\n\n  /**\n   * Add steps for an inline input.\n   * @param {!InlineInput} input The information about the\n   * input to render.\n   * @protected\n   */\n  drawInlineInput_(input) {\n    const width = input.width;\n    const height = input.height;\n    const yPos = input.centerline - height / 2;\n\n    const connectionTop = input.connectionOffsetY;\n    const connectionBottom = input.connectionHeight + connectionTop;\n    const connectionRight = input.xPos + input.connectionWidth;\n\n    this.inlinePath_ += svgPaths.moveTo(connectionRight, yPos) +\n        svgPaths.lineOnAxis('v', connectionTop) + input.shape.pathDown +\n        svgPaths.lineOnAxis('v', height - connectionBottom) +\n        svgPaths.lineOnAxis('h', width - input.connectionWidth) +\n        svgPaths.lineOnAxis('v', -height) + 'z';\n\n    this.positionInlineInputConnection_(input);\n  }\n\n  /**\n   * Position the connection on an inline value input, taking into account\n   * RTL and the small gap between the parent block and child block which lets\n   * the parent block's dark path show through.\n   * @param {InlineInput} input The information about\n   * the input that the connection is on.\n   * @protected\n   */\n  positionInlineInputConnection_(input) {\n    const yPos = input.centerline - input.height / 2;\n    // Move the connection.\n    if (input.connectionModel) {\n      // xPos already contains info about startX\n      let connX = input.xPos + input.connectionWidth + input.connectionOffsetX;\n      if (this.info_.RTL) {\n        connX *= -1;\n      }\n      input.connectionModel.setOffsetInBlock(\n          connX, yPos + input.connectionOffsetY);\n    }\n  }\n\n  /**\n   * Position the connection on a statement input, taking into account\n   * RTL and the small gap between the parent block and child block which lets\n   * the parent block's dark path show through.\n   * @param {!Row} row The row that the connection is on.\n   * @protected\n   */\n  positionStatementInputConnection_(row) {\n    const input = row.getLastInput();\n    if (input.connectionModel) {\n      let connX = row.xPos + row.statementEdge + input.notchOffset;\n      if (this.info_.RTL) {\n        connX *= -1;\n      }\n      input.connectionModel.setOffsetInBlock(connX, row.yPos);\n    }\n  }\n\n  /**\n   * Position the connection on an external value input, taking into account\n   * RTL and the small gap between the parent block and child block which lets\n   * the parent block's dark path show through.\n   * @param {!Row} row The row that the connection is on.\n   * @protected\n   */\n  positionExternalValueConnection_(row) {\n    const input = row.getLastInput();\n    if (input.connectionModel) {\n      let connX = row.xPos + row.width;\n      if (this.info_.RTL) {\n        connX *= -1;\n      }\n      input.connectionModel.setOffsetInBlock(connX, row.yPos);\n    }\n  }\n\n  /**\n   * Position the previous connection on a block.\n   * @protected\n   */\n  positionPreviousConnection_() {\n    const topRow = this.info_.topRow;\n    if (topRow.connection) {\n      const x = topRow.xPos + topRow.notchOffset;\n      const connX = (this.info_.RTL ? -x : x);\n      topRow.connection.connectionModel.setOffsetInBlock(connX, 0);\n    }\n  }\n\n  /**\n   * Position the next connection on a block.\n   * @protected\n   */\n  positionNextConnection_() {\n    const bottomRow = this.info_.bottomRow;\n\n    if (bottomRow.connection) {\n      const connInfo = bottomRow.connection;\n      const x = connInfo.xPos;  // Already contains info about startX.\n      const connX = (this.info_.RTL ? -x : x);\n      connInfo.connectionModel.setOffsetInBlock(connX, bottomRow.baseline);\n    }\n  }\n\n  /**\n   * Position the output connection on a block.\n   * @protected\n   */\n  positionOutputConnection_() {\n    if (this.info_.outputConnection) {\n      const x =\n          this.info_.startX + this.info_.outputConnection.connectionOffsetX;\n      const connX = this.info_.RTL ? -x : x;\n      this.block_.outputConnection.setOffsetInBlock(\n          connX, this.info_.outputConnection.connectionOffsetY);\n    }\n  }\n}\n\nexports.Drawer = Drawer;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Class representing external value inputs with connections on a\n * rendered block.\n */\n\n/**\n * Class representing external value inputs with connections on a\n * rendered block.\n * @class\n */\ngoog.module('Blockly.blockRendering.ExternalValueInput');\n\n/* eslint-disable-next-line no-unused-vars */\nconst {ConstantProvider} = goog.requireType('Blockly.blockRendering.ConstantProvider');\nconst {InputConnection} = goog.require('Blockly.blockRendering.InputConnection');\n/* eslint-disable-next-line no-unused-vars */\nconst {Input} = goog.requireType('Blockly.Input');\nconst {Types} = goog.require('Blockly.blockRendering.Types');\n\n\n/**\n * An object containing information about the space an external value input\n * takes up during rendering\n * @struct\n * @extends {InputConnection}\n * @alias Blockly.blockRendering.ExternalValueInput\n */\nclass ExternalValueInput extends InputConnection {\n  /**\n   * @param {!ConstantProvider} constants The rendering\n   *   constants provider.\n   * @param {!Input} input The external value input to measure and store\n   *     information for.\n   * @package\n   */\n  constructor(constants, input) {\n    super(constants, input);\n    this.type |= Types.EXTERNAL_VALUE_INPUT;\n\n    /** @type {number} */\n    this.height = 0;\n    if (!this.connectedBlock) {\n      this.height = this.shape.height;\n    } else {\n      this.height = this.connectedBlockHeight -\n          this.constants_.TAB_OFFSET_FROM_TOP - this.constants_.MEDIUM_PADDING;\n    }\n\n    /** @type {number} */\n    this.width =\n        this.shape.width + this.constants_.EXTERNAL_VALUE_INPUT_PADDING;\n\n    /** @type {number} */\n    this.connectionOffsetY = this.constants_.TAB_OFFSET_FROM_TOP;\n\n    /** @type {number} */\n    this.connectionHeight = this.shape.height;\n\n    /** @type {number} */\n    this.connectionWidth = this.shape.width;\n  }\n}\n\nexports.ExternalValueInput = ExternalValueInput;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Objects representing a hat in a row of a rendered\n * block.\n */\n\n/**\n * Objects representing a hat in a row of a rendered\n * block.\n * @class\n */\ngoog.module('Blockly.blockRendering.Hat');\n\n/* eslint-disable-next-line no-unused-vars */\nconst {ConstantProvider} = goog.requireType('Blockly.blockRendering.ConstantProvider');\nconst {Measurable} = goog.require('Blockly.blockRendering.Measurable');\nconst {Types} = goog.require('Blockly.blockRendering.Types');\n\n\n/**\n * An object containing information about the space a hat takes up during\n * rendering.\n * @struct\n * @extends {Measurable}\n * @alias Blockly.blockRendering.Hat\n */\nclass Hat extends Measurable {\n  /**\n   * @param {!ConstantProvider} constants The rendering\n   *   constants provider.\n   * @package\n   */\n  constructor(constants) {\n    super(constants);\n    this.type |= Types.HAT;\n\n    this.height = this.constants_.START_HAT.height;\n    this.width = this.constants_.START_HAT.width;\n\n    /** @type {number} */\n    this.ascenderHeight = this.height;\n  }\n}\n\nexports.Hat = Hat;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The interface for an object that owns a block's rendering SVG\n * elements.\n */\n\n'use strict';\n\n/**\n * The interface for an object that owns a block's rendering SVG\n * elements.\n * @namespace Blockly.blockRendering.IPathObject\n */\ngoog.module('Blockly.blockRendering.IPathObject');\n\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockSvg} = goog.requireType('Blockly.BlockSvg');\n/* eslint-disable-next-line no-unused-vars */\nconst {ConstantProvider} = goog.requireType('Blockly.blockRendering.ConstantProvider');\n/* eslint-disable-next-line no-unused-vars */\nconst {Theme} = goog.requireType('Blockly.Theme');\n\n\n/**\n * An interface for a block's path object.\n * @param {!SVGElement} _root The root SVG element.\n * @param {!ConstantProvider} _constants The renderer's\n *     constants.\n * @interface\n * @alias Blockly.blockRendering.IPathObject\n */\nconst IPathObject = function(_root, _constants) {};\n\n/**\n * The primary path of the block.\n * @type {!SVGElement}\n */\nIPathObject.prototype.svgPath;\n\n/**\n * The renderer's constant provider.\n * @type {!ConstantProvider}\n */\nIPathObject.prototype.constants;\n\n/**\n * The primary path of the block.\n * @type {!Theme.BlockStyle}\n */\nIPathObject.prototype.style;\n\n/**\n * Holds the cursors SVG element when the cursor is attached to the block.\n * This is null if there is no cursor on the block.\n * @type {SVGElement}\n */\nIPathObject.prototype.cursorSvg;\n\n/**\n * Holds the markers SVG element when the marker is attached to the block.\n * This is null if there is no marker on the block.\n * @type {SVGElement}\n */\nIPathObject.prototype.markerSvg;\n\n/**\n * Set the path generated by the renderer onto the respective SVG element.\n * @param {string} pathString The path.\n * @package\n */\nIPathObject.prototype.setPath;\n\n/**\n * Apply the stored colours to the block's path, taking into account whether\n * the paths belong to a shadow block.\n * @param {!BlockSvg} block The source block.\n * @package\n */\nIPathObject.prototype.applyColour;\n\n/**\n * Update the style.\n * @param {!Theme.BlockStyle} blockStyle The block style to use.\n * @package\n */\nIPathObject.prototype.setStyle;\n\n/**\n * Flip the SVG paths in RTL.\n * @package\n */\nIPathObject.prototype.flipRTL;\n\n/**\n * Add the cursor SVG to this block's SVG group.\n * @param {SVGElement} cursorSvg The SVG root of the cursor to be added to the\n *     block SVG group.\n * @package\n */\nIPathObject.prototype.setCursorSvg;\n\n/**\n * Add the marker SVG to this block's SVG group.\n * @param {SVGElement} markerSvg The SVG root of the marker to be added to the\n *     block SVG group.\n * @package\n */\nIPathObject.prototype.setMarkerSvg;\n\n/**\n * Set whether the block shows a highlight or not.  Block highlighting is\n * often used to visually mark blocks currently being executed.\n * @param {boolean} highlighted True if highlighted.\n * @package\n */\nIPathObject.prototype.updateHighlighted;\n\n/**\n * Add or remove styling showing that a block is selected.\n * @param {boolean} enable True if selection is enabled, false otherwise.\n * @package\n */\nIPathObject.prototype.updateSelected;\n\n/**\n * Add or remove styling showing that a block is dragged over a delete area.\n * @param {boolean} enable True if the block is being dragged over a delete\n *     area, false otherwise.\n * @package\n */\nIPathObject.prototype.updateDraggingDelete;\n\n/**\n * Add or remove styling showing that a block is an insertion marker.\n * @param {boolean} enable True if the block is an insertion marker, false\n *     otherwise.\n * @package\n */\nIPathObject.prototype.updateInsertionMarker;\n\n/**\n * Add or remove styling showing that a block is movable.\n * @param {boolean} enable True if the block is movable, false otherwise.\n * @package\n */\nIPathObject.prototype.updateMovable;\n\n/**\n * Add or remove styling that shows that if the dragging block is dropped, this\n * block will be replaced.  If a shadow block, it will disappear.  Otherwise it\n * will bump.\n * @param {boolean} enable True if styling should be added.\n * @package\n */\nIPathObject.prototype.updateReplacementFade;\n\nexports.IPathObject = IPathObject;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Objects representing an icon in a row of a rendered\n * block.\n */\n\n/**\n * Objects representing an icon in a row of a rendered\n * block.\n * @class\n */\ngoog.module('Blockly.blockRendering.Icon');\n\n/* eslint-disable-next-line no-unused-vars */\nconst {ConstantProvider} = goog.requireType('Blockly.blockRendering.ConstantProvider');\n/* eslint-disable-next-line no-unused-vars */\nconst {Icon: BlocklyIcon} = goog.requireType('Blockly.Icon');\nconst {Measurable} = goog.require('Blockly.blockRendering.Measurable');\nconst {Types} = goog.require('Blockly.blockRendering.Types');\n\n\n/**\n * An object containing information about the space an icon takes up during\n * rendering\n * @extends {Measurable}\n * @struct\n * @alias Blockly.blockRendering.Icon\n */\nclass Icon extends Measurable {\n  /**\n   * An object containing information about the space an icon takes up during\n   * rendering\n   * @param {!ConstantProvider} constants The rendering\n   *   constants provider.\n   * @param {!BlocklyIcon} icon The icon to measure and store information for.\n   * @package\n   */\n  constructor(constants, icon) {\n    super(constants);\n\n    /** @type {!BlocklyIcon} */\n    this.icon = icon;\n\n    /** @type {boolean} */\n    this.isVisible = icon.isVisible();\n    this.type |= Types.ICON;\n\n    const size = icon.getCorrectedSize();\n    this.height = size.height;\n    this.width = size.width;\n  }\n}\nexports.Icon = Icon;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Objects representing a spacer in a row of a rendered\n * block.\n */\n\n/**\n * Objects representing a spacer in a row of a rendered\n * block.\n * @class\n */\ngoog.module('Blockly.blockRendering.InRowSpacer');\n\n/* eslint-disable-next-line no-unused-vars */\nconst {ConstantProvider} = goog.requireType('Blockly.blockRendering.ConstantProvider');\nconst {Measurable} = goog.require('Blockly.blockRendering.Measurable');\nconst {Types} = goog.require('Blockly.blockRendering.Types');\n\n\n/**\n * An object containing information about a spacer between two elements on a\n * row.\n * @extends {Measurable}\n * @struct\n * @alias Blockly.blockRendering.InRowSpacer\n */\nclass InRowSpacer extends Measurable {\n  /**\n   * @param {!ConstantProvider} constants The rendering\n   *   constants provider.\n   * @param {number} width The width of the spacer.\n   * @package\n   */\n  constructor(constants, width) {\n    super(constants);\n    this.type |= Types.SPACER | Types.IN_ROW_SPACER;\n    this.width = width;\n    this.height = this.constants_.SPACER_DEFAULT_HEIGHT;\n  }\n}\n\nexports.InRowSpacer = InRowSpacer;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Class representing inline inputs with connections on a rendered\n * block.\n */\n\n/**\n * Class representing inline inputs with connections on a rendered\n * block.\n * @class\n */\ngoog.module('Blockly.blockRendering.InlineInput');\n\n/* eslint-disable-next-line no-unused-vars */\nconst {ConstantProvider} = goog.requireType('Blockly.blockRendering.ConstantProvider');\nconst {InputConnection} = goog.require('Blockly.blockRendering.InputConnection');\n/* eslint-disable-next-line no-unused-vars */\nconst {Input} = goog.requireType('Blockly.Input');\nconst {Types} = goog.require('Blockly.blockRendering.Types');\n\n\n/**\n * An object containing information about the space an inline input takes up\n * during rendering\n * @extends {InputConnection}\n * @struct\n * @alias Blockly.blockRendering.InlineInput\n */\nclass InlineInput extends InputConnection {\n  /**\n   * @param {!ConstantProvider} constants The rendering\n   *   constants provider.\n   * @param {!Input} input The inline input to measure and store\n   *     information for.\n   * @package\n   */\n  constructor(constants, input) {\n    super(constants, input);\n    this.type |= Types.INLINE_INPUT;\n\n    if (!this.connectedBlock) {\n      this.height = this.constants_.EMPTY_INLINE_INPUT_HEIGHT;\n      this.width = this.constants_.EMPTY_INLINE_INPUT_PADDING;\n    } else {\n      // We allow the dark path to show on the parent block so that the child\n      // block looks embossed.  This takes up an extra pixel in both x and y.\n      this.width = this.connectedBlockWidth;\n      this.height = this.connectedBlockHeight;\n    }\n\n    /** @type {number} */\n    this.connectionHeight = !this.isDynamicShape ?\n        this.shape.height :\n        this.shape.height(this.height);\n\n    /** @type {number} */\n    this.connectionWidth =\n        !this.isDynamicShape ? this.shape.width : this.shape.width(this.height);\n    if (!this.connectedBlock) {\n      this.width += this.connectionWidth * (this.isDynamicShape ? 2 : 1);\n    }\n\n    /** @type {number} */\n    this.connectionOffsetY = this.isDynamicShape ?\n        this.shape.connectionOffsetY(this.connectionHeight) :\n        this.constants_.TAB_OFFSET_FROM_TOP;\n\n    /** @type {number} */\n    this.connectionOffsetX = this.isDynamicShape ?\n        this.shape.connectionOffsetX(this.connectionWidth) :\n        0;\n  }\n}\n\nexports.InlineInput = InlineInput;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Class representing statement inputs with connections on a\n * rendered block.\n */\n\n/**\n * Class representing statement inputs with connections on a\n * rendered block.\n * @class\n */\ngoog.module('Blockly.blockRendering.StatementInput');\n\n/* eslint-disable-next-line no-unused-vars */\nconst {ConstantProvider} = goog.requireType('Blockly.blockRendering.ConstantProvider');\nconst {InputConnection} = goog.require('Blockly.blockRendering.InputConnection');\n/* eslint-disable-next-line no-unused-vars */\nconst {Input} = goog.requireType('Blockly.Input');\nconst {Types} = goog.require('Blockly.blockRendering.Types');\n\n\n/**\n * An object containing information about the space a statement input takes up\n * during rendering\n * @struct\n * @extends {InputConnection}\n * @alias Blockly.blockRendering.StatementInput\n */\nclass StatementInput extends InputConnection {\n  /**\n   * @param {!ConstantProvider} constants The rendering\n   *   constants provider.\n   * @param {!Input} input The statement input to measure and store\n   *     information for.\n   * @package\n   */\n  constructor(constants, input) {\n    super(constants, input);\n    this.type |= Types.STATEMENT_INPUT;\n\n    if (!this.connectedBlock) {\n      this.height = this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT;\n    } else {\n      // We allow the dark path to show on the parent block so that the child\n      // block looks embossed.  This takes up an extra pixel in both x and y.\n      this.height =\n          this.connectedBlockHeight + this.constants_.STATEMENT_BOTTOM_SPACER;\n    }\n    this.width =\n        this.constants_.STATEMENT_INPUT_NOTCH_OFFSET + this.shape.width;\n  }\n}\n\nexports.StatementInput = StatementInput;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Object representing a row that holds one or more inputs on a\n * rendered block.\n */\n\n/**\n * Object representing a row that holds one or more inputs on a\n * rendered block.\n * @class\n */\ngoog.module('Blockly.blockRendering.InputRow');\n\n/* eslint-disable-next-line no-unused-vars */\nconst {ConstantProvider} = goog.requireType('Blockly.blockRendering.ConstantProvider');\nconst {InputConnection} = goog.require('Blockly.blockRendering.InputConnection');\nconst {ExternalValueInput} = goog.require('Blockly.blockRendering.ExternalValueInput');\nconst {Row} = goog.require('Blockly.blockRendering.Row');\nconst {StatementInput} = goog.require('Blockly.blockRendering.StatementInput');\nconst {Types} = goog.require('Blockly.blockRendering.Types');\n\n\n/**\n * An object containing information about a row that holds one or more inputs.\n * @extends {Row}\n * @struct\n * @alias Blockly.blockRendering.InputRow\n */\nclass InputRow extends Row {\n  /**\n   * @param {!ConstantProvider} constants The rendering\n   *   constants provider.\n   * @package\n   */\n  constructor(constants) {\n    super(constants);\n    this.type |= Types.INPUT_ROW;\n\n    /**\n     * The total width of all blocks connected to this row.\n     * @type {number}\n     * @package\n     */\n    this.connectedBlockWidths = 0;\n  }\n\n  /**\n   * Inspect all subcomponents and populate all size properties on the row.\n   * @package\n   */\n  measure() {\n    this.width = this.minWidth;\n    this.height = this.minHeight;\n    let connectedBlockWidths = 0;\n    for (let i = 0; i < this.elements.length; i++) {\n      const elem = this.elements[i];\n      this.width += elem.width;\n      if (Types.isInput(elem) && elem instanceof InputConnection) {\n        if (Types.isStatementInput(elem) && elem instanceof StatementInput) {\n          connectedBlockWidths += elem.connectedBlockWidth;\n        } else if (\n            Types.isExternalInput(elem) && elem instanceof ExternalValueInput &&\n            elem.connectedBlockWidth !== 0) {\n          connectedBlockWidths +=\n              (elem.connectedBlockWidth - elem.connectionWidth);\n        }\n      }\n      if (!(Types.isSpacer(elem))) {\n        this.height = Math.max(this.height, elem.height);\n      }\n    }\n    this.connectedBlockWidths = connectedBlockWidths;\n    this.widthWithConnectedBlocks = this.width + connectedBlockWidths;\n  }\n\n  /**\n   * @override\n   */\n  endsWithElemSpacer() {\n    return !this.hasExternalInput && !this.hasStatement;\n  }\n}\n\nexports.InputRow = InputRow;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Objects representing a jagged edge in a row of a rendered\n * block.\n */\n\n/**\n * Objects representing a jagged edge in a row of a rendered\n * block.\n * @class\n */\ngoog.module('Blockly.blockRendering.JaggedEdge');\n\n/* eslint-disable-next-line no-unused-vars */\nconst {ConstantProvider} = goog.requireType('Blockly.blockRendering.ConstantProvider');\nconst {Measurable} = goog.require('Blockly.blockRendering.Measurable');\nconst {Types} = goog.require('Blockly.blockRendering.Types');\n\n\n/**\n * An object containing information about the jagged edge of a collapsed block\n * takes up during rendering\n * @extends {Measurable}\n * @struct\n * @alias Blockly.blockRendering.JaggedEdge\n */\nclass JaggedEdge extends Measurable {\n  /**\n   * @param {!ConstantProvider} constants The rendering\n   *   constants provider.\n   * @package\n   */\n  constructor(constants) {\n    super(constants);\n    this.type |= Types.JAGGED_EDGE;\n    this.height = this.constants_.JAGGED_TEETH.height;\n    this.width = this.constants_.JAGGED_TEETH.width;\n  }\n}\n\nexports.JaggedEdge = JaggedEdge;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The class representing an AST node.\n * Used to traverse the Blockly AST.\n */\n'use strict';\n\n/**\n * The class representing an AST node.\n * Used to traverse the Blockly AST.\n * @class\n */\ngoog.module('Blockly.ASTNode');\n\n/* eslint-disable-next-line no-unused-vars */\nconst {Block} = goog.requireType('Blockly.Block');\nconst {ConnectionType} = goog.require('Blockly.ConnectionType');\n/* eslint-disable-next-line no-unused-vars */\nconst {Connection} = goog.requireType('Blockly.Connection');\nconst {Coordinate} = goog.require('Blockly.utils.Coordinate');\n/* eslint-disable-next-line no-unused-vars */\nconst {Field} = goog.requireType('Blockly.Field');\n/* eslint-disable-next-line no-unused-vars */\nconst {IASTNodeLocationWithBlock} = goog.requireType('Blockly.IASTNodeLocationWithBlock');\n/* eslint-disable-next-line no-unused-vars */\nconst {IASTNodeLocation} = goog.requireType('Blockly.IASTNodeLocation');\n/* eslint-disable-next-line no-unused-vars */\nconst {Input} = goog.requireType('Blockly.Input');\n/* eslint-disable-next-line no-unused-vars */\nconst {Workspace} = goog.requireType('Blockly.Workspace');\n\n\n/**\n * Class for an AST node.\n * It is recommended that you use one of the createNode methods instead of\n * creating a node directly.\n * @alias Blockly.ASTNode\n */\nclass ASTNode {\n  /**\n   * @param {string} type The type of the location.\n   *     Must be in ASTNode.types.\n   * @param {!IASTNodeLocation} location The position in the AST.\n   * @param {!ASTNode.Params=} opt_params Optional dictionary of options.\n   * @alias Blockly.ASTNode\n   */\n  constructor(type, location, opt_params) {\n    if (!location) {\n      throw Error('Cannot create a node without a location.');\n    }\n\n    /**\n     * The type of the location.\n     * One of ASTNode.types\n     * @type {string}\n     * @private\n     */\n    this.type_ = type;\n\n    /**\n     * Whether the location points to a connection.\n     * @type {boolean}\n     * @private\n     */\n    this.isConnection_ = ASTNode.isConnectionType_(type);\n\n    /**\n     * The location of the AST node.\n     * @type {!IASTNodeLocation}\n     * @private\n     */\n    this.location_ = location;\n\n    /**\n     * The coordinate on the workspace.\n     * @type {Coordinate}\n     * @private\n     */\n    this.wsCoordinate_ = null;\n\n    this.processParams_(opt_params || null);\n  }\n\n  /**\n   * Parse the optional parameters.\n   * @param {?ASTNode.Params} params The user specified parameters.\n   * @private\n   */\n  processParams_(params) {\n    if (!params) {\n      return;\n    }\n    if (params.wsCoordinate) {\n      this.wsCoordinate_ = params.wsCoordinate;\n    }\n  }\n\n  /**\n   * Gets the value pointed to by this node.\n   * It is the callers responsibility to check the node type to figure out what\n   * type of object they get back from this.\n   * @return {!IASTNodeLocation} The current field, connection, workspace, or\n   *     block the cursor is on.\n   */\n  getLocation() {\n    return this.location_;\n  }\n\n  /**\n   * The type of the current location.\n   * One of ASTNode.types\n   * @return {string} The type of the location.\n   */\n  getType() {\n    return this.type_;\n  }\n\n  /**\n   * The coordinate on the workspace.\n   * @return {Coordinate} The workspace coordinate or null if the\n   *     location is not a workspace.\n   */\n  getWsCoordinate() {\n    return this.wsCoordinate_;\n  }\n\n  /**\n   * Whether the node points to a connection.\n   * @return {boolean} [description]\n   * @package\n   */\n  isConnection() {\n    return this.isConnection_;\n  }\n\n  /**\n   * Given an input find the next editable field or an input with a non null\n   * connection in the same block. The current location must be an input\n   * connection.\n   * @return {ASTNode} The AST node holding the next field or connection\n   *     or null if there is no editable field or input connection after the\n   * given input.\n   * @private\n   */\n  findNextForInput_() {\n    const location = /** @type {!Connection} */ (this.location_);\n    const parentInput = location.getParentInput();\n    const block = parentInput.getSourceBlock();\n    const curIdx = block.inputList.indexOf(parentInput);\n    for (let i = curIdx + 1; i < block.inputList.length; i++) {\n      const input = block.inputList[i];\n      const fieldRow = input.fieldRow;\n      for (let j = 0; j < fieldRow.length; j++) {\n        const field = fieldRow[j];\n        if (field.isClickable() || ASTNode.NAVIGATE_ALL_FIELDS) {\n          return ASTNode.createFieldNode(field);\n        }\n      }\n      if (input.connection) {\n        return ASTNode.createInputNode(input);\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Given a field find the next editable field or an input with a non null\n   * connection in the same block. The current location must be a field.\n   * @return {ASTNode} The AST node pointing to the next field or\n   *     connection or null if there is no editable field or input connection\n   *     after the given input.\n   * @private\n   */\n  findNextForField_() {\n    const location = /** @type {!Field} */ (this.location_);\n    const input = location.getParentInput();\n    const block = location.getSourceBlock();\n    const curIdx = block.inputList.indexOf(/** @type {!Input} */ (input));\n    let fieldIdx = input.fieldRow.indexOf(location) + 1;\n    for (let i = curIdx; i < block.inputList.length; i++) {\n      const newInput = block.inputList[i];\n      const fieldRow = newInput.fieldRow;\n      while (fieldIdx < fieldRow.length) {\n        if (fieldRow[fieldIdx].isClickable() || ASTNode.NAVIGATE_ALL_FIELDS) {\n          return ASTNode.createFieldNode(fieldRow[fieldIdx]);\n        }\n        fieldIdx++;\n      }\n      fieldIdx = 0;\n      if (newInput.connection) {\n        return ASTNode.createInputNode(newInput);\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Given an input find the previous editable field or an input with a non null\n   * connection in the same block. The current location must be an input\n   * connection.\n   * @return {ASTNode} The AST node holding the previous field or\n   *     connection.\n   * @private\n   */\n  findPrevForInput_() {\n    const location = /** @type {!Connection} */ (this.location_);\n    const parentInput = location.getParentInput();\n    const block = parentInput.getSourceBlock();\n    const curIdx = block.inputList.indexOf(parentInput);\n    for (let i = curIdx; i >= 0; i--) {\n      const input = block.inputList[i];\n      if (input.connection && input !== parentInput) {\n        return ASTNode.createInputNode(input);\n      }\n      const fieldRow = input.fieldRow;\n      for (let j = fieldRow.length - 1; j >= 0; j--) {\n        const field = fieldRow[j];\n        if (field.isClickable() || ASTNode.NAVIGATE_ALL_FIELDS) {\n          return ASTNode.createFieldNode(field);\n        }\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Given a field find the previous editable field or an input with a non null\n   * connection in the same block. The current location must be a field.\n   * @return {ASTNode} The AST node holding the previous input or field.\n   * @private\n   */\n  findPrevForField_() {\n    const location = /** @type {!Field} */ (this.location_);\n    const parentInput = location.getParentInput();\n    const block = location.getSourceBlock();\n    const curIdx = block.inputList.indexOf(\n        /** @type {!Input} */ (parentInput));\n    let fieldIdx = parentInput.fieldRow.indexOf(location) - 1;\n    for (let i = curIdx; i >= 0; i--) {\n      const input = block.inputList[i];\n      if (input.connection && input !== parentInput) {\n        return ASTNode.createInputNode(input);\n      }\n      const fieldRow = input.fieldRow;\n      while (fieldIdx > -1) {\n        if (fieldRow[fieldIdx].isClickable() || ASTNode.NAVIGATE_ALL_FIELDS) {\n          return ASTNode.createFieldNode(fieldRow[fieldIdx]);\n        }\n        fieldIdx--;\n      }\n      // Reset the fieldIdx to the length of the field row of the previous\n      // input.\n      if (i - 1 >= 0) {\n        fieldIdx = block.inputList[i - 1].fieldRow.length - 1;\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Navigate between stacks of blocks on the workspace.\n   * @param {boolean} forward True to go forward. False to go backwards.\n   * @return {ASTNode} The first block of the next stack or null if there\n   * are no blocks on the workspace.\n   * @private\n   */\n  navigateBetweenStacks_(forward) {\n    let curLocation = this.getLocation();\n    if (curLocation.getSourceBlock) {\n      curLocation = /** @type {!IASTNodeLocationWithBlock} */ (curLocation)\n                        .getSourceBlock();\n    }\n    if (!curLocation || !curLocation.workspace) {\n      return null;\n    }\n    const curRoot = curLocation.getRootBlock();\n    const topBlocks = curRoot.workspace.getTopBlocks(true);\n    for (let i = 0; i < topBlocks.length; i++) {\n      const topBlock = topBlocks[i];\n      if (curRoot.id === topBlock.id) {\n        const offset = forward ? 1 : -1;\n        const resultIndex = i + offset;\n        if (resultIndex === -1 || resultIndex === topBlocks.length) {\n          return null;\n        }\n        return ASTNode.createStackNode(topBlocks[resultIndex]);\n      }\n    }\n    throw Error(\n        'Couldn\\'t find ' + (forward ? 'next' : 'previous') + ' stack?!');\n  }\n\n  /**\n   * Finds the top most AST node for a given block.\n   * This is either the previous connection, output connection or block\n   * depending on what kind of connections the block has.\n   * @param {!Block} block The block that we want to find the top\n   *     connection on.\n   * @return {!ASTNode} The AST node containing the top connection.\n   * @private\n   */\n  findTopASTNodeForBlock_(block) {\n    const topConnection = getParentConnection(block);\n    if (topConnection) {\n      return /** @type {!ASTNode} */ (\n          ASTNode.createConnectionNode(topConnection));\n    } else {\n      return /** @type {!ASTNode} */ (ASTNode.createBlockNode(block));\n    }\n  }\n\n  /**\n   * Get the AST node pointing to the input that the block is nested under or if\n   * the block is not nested then get the stack AST node.\n   * @param {Block} block The source block of the current location.\n   * @return {ASTNode} The AST node pointing to the input connection or\n   *     the top block of the stack this block is in.\n   * @private\n   */\n  getOutAstNodeForBlock_(block) {\n    if (!block) {\n      return null;\n    }\n    // If the block doesn't have a previous connection then it is the top of the\n    // substack.\n    const topBlock = block.getTopStackBlock();\n    const topConnection = getParentConnection(topBlock);\n    // If the top connection has a parentInput, create an AST node pointing to\n    // that input.\n    if (topConnection && topConnection.targetConnection &&\n        topConnection.targetConnection.getParentInput()) {\n      return ASTNode.createInputNode(\n          topConnection.targetConnection.getParentInput());\n    } else {\n      // Go to stack level if you are not underneath an input.\n      return ASTNode.createStackNode(topBlock);\n    }\n  }\n\n  /**\n   * Find the first editable field or input with a connection on a given block.\n   * @param {!Block} block The source block of the current location.\n   * @return {ASTNode} An AST node pointing to the first field or input.\n   * Null if there are no editable fields or inputs with connections on the\n   * block.\n   * @private\n   */\n  findFirstFieldOrInput_(block) {\n    const inputs = block.inputList;\n    for (let i = 0; i < inputs.length; i++) {\n      const input = inputs[i];\n      const fieldRow = input.fieldRow;\n      for (let j = 0; j < fieldRow.length; j++) {\n        const field = fieldRow[j];\n        if (field.isClickable() || ASTNode.NAVIGATE_ALL_FIELDS) {\n          return ASTNode.createFieldNode(field);\n        }\n      }\n      if (input.connection) {\n        return ASTNode.createInputNode(input);\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Finds the source block of the location of this node.\n   * @return {Block} The source block of the location, or null if the node\n   * is of type workspace.\n   */\n  getSourceBlock() {\n    if (this.getType() === ASTNode.types.BLOCK) {\n      return /** @type {Block} */ (this.getLocation());\n    } else if (this.getType() === ASTNode.types.STACK) {\n      return /** @type {Block} */ (this.getLocation());\n    } else if (this.getType() === ASTNode.types.WORKSPACE) {\n      return null;\n    } else {\n      return /** @type {IASTNodeLocationWithBlock} */ (this.getLocation())\n          .getSourceBlock();\n    }\n  }\n\n  /**\n   * Find the element to the right of the current element in the AST.\n   * @return {ASTNode} An AST node that wraps the next field, connection,\n   *     block, or workspace. Or null if there is no node to the right.\n   */\n  next() {\n    switch (this.type_) {\n      case ASTNode.types.STACK:\n        return this.navigateBetweenStacks_(true);\n\n      case ASTNode.types.OUTPUT: {\n        const connection = /** @type {!Connection} */ (this.location_);\n        return ASTNode.createBlockNode(connection.getSourceBlock());\n      }\n      case ASTNode.types.FIELD:\n        return this.findNextForField_();\n\n      case ASTNode.types.INPUT:\n        return this.findNextForInput_();\n\n      case ASTNode.types.BLOCK: {\n        const block = /** @type {!Block} */ (this.location_);\n        const nextConnection = block.nextConnection;\n        return ASTNode.createConnectionNode(nextConnection);\n      }\n      case ASTNode.types.PREVIOUS: {\n        const connection = /** @type {!Connection} */ (this.location_);\n        return ASTNode.createBlockNode(connection.getSourceBlock());\n      }\n      case ASTNode.types.NEXT: {\n        const connection = /** @type {!Connection} */ (this.location_);\n        const targetConnection = connection.targetConnection;\n        return ASTNode.createConnectionNode(targetConnection);\n      }\n    }\n\n    return null;\n  }\n\n  /**\n   * Find the element one level below and all the way to the left of the current\n   * location.\n   * @return {ASTNode} An AST node that wraps the next field, connection,\n   * workspace, or block. Or null if there is nothing below this node.\n   */\n  in() {\n    switch (this.type_) {\n      case ASTNode.types.WORKSPACE: {\n        const workspace = /** @type {!Workspace} */ (this.location_);\n        const topBlocks = workspace.getTopBlocks(true);\n        if (topBlocks.length > 0) {\n          return ASTNode.createStackNode(topBlocks[0]);\n        }\n        break;\n      }\n      case ASTNode.types.STACK: {\n        const block = /** @type {!Block} */ (this.location_);\n        return this.findTopASTNodeForBlock_(block);\n      }\n      case ASTNode.types.BLOCK: {\n        const block = /** @type {!Block} */ (this.location_);\n        return this.findFirstFieldOrInput_(block);\n      }\n      case ASTNode.types.INPUT: {\n        const connection = /** @type {!Connection} */ (this.location_);\n        const targetConnection = connection.targetConnection;\n        return ASTNode.createConnectionNode(targetConnection);\n      }\n    }\n\n    return null;\n  }\n\n  /**\n   * Find the element to the left of the current element in the AST.\n   * @return {ASTNode} An AST node that wraps the previous field,\n   * connection, workspace or block. Or null if no node exists to the left.\n   * null.\n   */\n  prev() {\n    switch (this.type_) {\n      case ASTNode.types.STACK:\n        return this.navigateBetweenStacks_(false);\n\n      case ASTNode.types.OUTPUT:\n        return null;\n\n      case ASTNode.types.FIELD:\n        return this.findPrevForField_();\n\n      case ASTNode.types.INPUT:\n        return this.findPrevForInput_();\n\n      case ASTNode.types.BLOCK: {\n        const block = /** @type {!Block} */ (this.location_);\n        const topConnection = getParentConnection(block);\n        return ASTNode.createConnectionNode(topConnection);\n      }\n      case ASTNode.types.PREVIOUS: {\n        const connection = /** @type {!Connection} */ (this.location_);\n        const targetConnection = connection.targetConnection;\n        if (targetConnection && !targetConnection.getParentInput()) {\n          return ASTNode.createConnectionNode(targetConnection);\n        }\n        break;\n      }\n      case ASTNode.types.NEXT: {\n        const connection = /** @type {!Connection} */ (this.location_);\n        return ASTNode.createBlockNode(connection.getSourceBlock());\n      }\n    }\n\n    return null;\n  }\n\n  /**\n   * Find the next element that is one position above and all the way to the\n   * left of the current location.\n   * @return {ASTNode} An AST node that wraps the next field, connection,\n   *     workspace or block. Or null if we are at the workspace level.\n   */\n  out() {\n    switch (this.type_) {\n      case ASTNode.types.STACK: {\n        const block = /** @type {!Block} */ (this.location_);\n        const blockPos = block.getRelativeToSurfaceXY();\n        // TODO: Make sure this is in the bounds of the workspace.\n        const wsCoordinate =\n            new Coordinate(blockPos.x, blockPos.y + ASTNode.DEFAULT_OFFSET_Y);\n        return ASTNode.createWorkspaceNode(block.workspace, wsCoordinate);\n      }\n      case ASTNode.types.OUTPUT: {\n        const connection = /** @type {!Connection} */ (this.location_);\n        const target = connection.targetConnection;\n        if (target) {\n          return ASTNode.createConnectionNode(target);\n        }\n        return ASTNode.createStackNode(connection.getSourceBlock());\n      }\n      case ASTNode.types.FIELD: {\n        const field = /** @type {!Field} */ (this.location_);\n        return ASTNode.createBlockNode(field.getSourceBlock());\n      }\n      case ASTNode.types.INPUT: {\n        const connection = /** @type {!Connection} */ (this.location_);\n        return ASTNode.createBlockNode(connection.getSourceBlock());\n      }\n      case ASTNode.types.BLOCK: {\n        const block = /** @type {!Block} */ (this.location_);\n        return this.getOutAstNodeForBlock_(block);\n      }\n      case ASTNode.types.PREVIOUS: {\n        const connection = /** @type {!Connection} */ (this.location_);\n        return this.getOutAstNodeForBlock_(connection.getSourceBlock());\n      }\n      case ASTNode.types.NEXT: {\n        const connection = /** @type {!Connection} */ (this.location_);\n        return this.getOutAstNodeForBlock_(connection.getSourceBlock());\n      }\n    }\n\n    return null;\n  }\n\n  /**\n   * Whether an AST node of the given type points to a connection.\n   * @param {string} type The type to check.  One of ASTNode.types.\n   * @return {boolean} True if a node of the given type points to a connection.\n   * @private\n   */\n  static isConnectionType_(type) {\n    switch (type) {\n      case ASTNode.types.PREVIOUS:\n      case ASTNode.types.NEXT:\n      case ASTNode.types.INPUT:\n      case ASTNode.types.OUTPUT:\n        return true;\n    }\n    return false;\n  }\n\n  /**\n   * Create an AST node pointing to a field.\n   * @param {Field} field The location of the AST node.\n   * @return {ASTNode} An AST node pointing to a field.\n   */\n  static createFieldNode(field) {\n    if (!field) {\n      return null;\n    }\n    return new ASTNode(ASTNode.types.FIELD, field);\n  }\n\n  /**\n   * Creates an AST node pointing to a connection. If the connection has a\n   * parent input then create an AST node of type input that will hold the\n   * connection.\n   * @param {Connection} connection This is the connection the node will\n   *     point to.\n   * @return {ASTNode} An AST node pointing to a connection.\n   */\n  static createConnectionNode(connection) {\n    if (!connection) {\n      return null;\n    }\n    const type = connection.type;\n    if (type === ConnectionType.INPUT_VALUE) {\n      return ASTNode.createInputNode(connection.getParentInput());\n    } else if (\n        type === ConnectionType.NEXT_STATEMENT && connection.getParentInput()) {\n      return ASTNode.createInputNode(connection.getParentInput());\n    } else if (type === ConnectionType.NEXT_STATEMENT) {\n      return new ASTNode(ASTNode.types.NEXT, connection);\n    } else if (type === ConnectionType.OUTPUT_VALUE) {\n      return new ASTNode(ASTNode.types.OUTPUT, connection);\n    } else if (type === ConnectionType.PREVIOUS_STATEMENT) {\n      return new ASTNode(ASTNode.types.PREVIOUS, connection);\n    }\n    return null;\n  }\n\n  /**\n   * Creates an AST node pointing to an input. Stores the input connection as\n   * the location.\n   * @param {Input} input The input used to create an AST node.\n   * @return {ASTNode} An AST node pointing to a input.\n   */\n  static createInputNode(input) {\n    if (!input || !input.connection) {\n      return null;\n    }\n    return new ASTNode(ASTNode.types.INPUT, input.connection);\n  }\n\n  /**\n   * Creates an AST node pointing to a block.\n   * @param {Block} block The block used to create an AST node.\n   * @return {ASTNode} An AST node pointing to a block.\n   */\n  static createBlockNode(block) {\n    if (!block) {\n      return null;\n    }\n    return new ASTNode(ASTNode.types.BLOCK, block);\n  }\n\n  /**\n   * Create an AST node of type stack. A stack, represented by its top block, is\n   *     the set of all blocks connected to a top block, including the top\n   * block.\n   * @param {Block} topBlock A top block has no parent and can be found\n   *     in the list returned by workspace.getTopBlocks().\n   * @return {ASTNode} An AST node of type stack that points to the top\n   *     block on the stack.\n   */\n  static createStackNode(topBlock) {\n    if (!topBlock) {\n      return null;\n    }\n    return new ASTNode(ASTNode.types.STACK, topBlock);\n  }\n\n  /**\n   * Creates an AST node pointing to a workspace.\n   * @param {!Workspace} workspace The workspace that we are on.\n   * @param {Coordinate} wsCoordinate The position on the workspace\n   *     for this node.\n   * @return {ASTNode} An AST node pointing to a workspace and a position\n   *     on the workspace.\n   */\n  static createWorkspaceNode(workspace, wsCoordinate) {\n    if (!wsCoordinate || !workspace) {\n      return null;\n    }\n    const params = {wsCoordinate: wsCoordinate};\n    return new ASTNode(ASTNode.types.WORKSPACE, workspace, params);\n  }\n\n  /**\n   * Creates an AST node for the top position on a block.\n   * This is either an output connection, previous connection, or block.\n   * @param {!Block} block The block to find the top most AST node on.\n   * @return {ASTNode} The AST node holding the top most position on the\n   *     block.\n   */\n  static createTopNode(block) {\n    let astNode;\n    const topConnection = getParentConnection(block);\n    if (topConnection) {\n      astNode = ASTNode.createConnectionNode(topConnection);\n    } else {\n      astNode = ASTNode.createBlockNode(block);\n    }\n    return astNode;\n  }\n}\n\n/**\n * @typedef {{\n *     wsCoordinate: Coordinate\n * }}\n */\nASTNode.Params;\n\n/**\n * Object holding different types for an AST node.\n * @enum {string}\n */\nASTNode.types = {\n  FIELD: 'field',\n  BLOCK: 'block',\n  INPUT: 'input',\n  OUTPUT: 'output',\n  NEXT: 'next',\n  PREVIOUS: 'previous',\n  STACK: 'stack',\n  WORKSPACE: 'workspace',\n};\n\n/**\n * True to navigate to all fields. False to only navigate to clickable fields.\n * @type {boolean}\n */\nASTNode.NAVIGATE_ALL_FIELDS = false;\n\n/**\n * The default y offset to use when moving the cursor from a stack to the\n * workspace.\n * @type {number}\n * @private\n */\nASTNode.DEFAULT_OFFSET_Y = -20;\n\n/**\n * Gets the parent connection on a block.\n * This is either an output connection, previous connection or undefined.\n * If both connections exist return the one that is actually connected\n * to another block.\n * @param {!Block} block The block to find the parent connection on.\n * @return {Connection} The connection connecting to the parent of the\n *     block.\n * @private\n */\nconst getParentConnection = function(block) {\n  let topConnection = block.outputConnection;\n  if (!topConnection ||\n      (block.previousConnection && block.previousConnection.isConnected())) {\n    topConnection = block.previousConnection;\n  }\n  return topConnection;\n};\n\nexports.ASTNode = ASTNode;\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Events fired as a result of a marker move.\n */\n'use strict';\n\n/**\n * Events fired as a result of a marker move.\n * @class\n */\ngoog.module('Blockly.Events.MarkerMove');\n\nconst eventUtils = goog.require('Blockly.Events.utils');\nconst registry = goog.require('Blockly.registry');\nconst {ASTNode} = goog.require('Blockly.ASTNode');\n/* eslint-disable-next-line no-unused-vars */\nconst {Block} = goog.requireType('Blockly.Block');\nconst {UiBase} = goog.require('Blockly.Events.UiBase');\n/* eslint-disable-next-line no-unused-vars */\nconst {Workspace} = goog.requireType('Blockly.Workspace');\n\n\n/**\n * Class for a marker move event.\n * @extends {UiBase}\n * @alias Blockly.Events.MarkerMove\n */\nclass MarkerMove extends UiBase {\n  /**\n   * @param {?Block=} opt_block The affected block. Null if current node\n   *    is of type workspace. Undefined for a blank event.\n   * @param {boolean=} isCursor Whether this is a cursor event. Undefined for a\n   *    blank event.\n   * @param {?ASTNode=} opt_oldNode The old node the marker used to be on.\n   *    Undefined for a blank event.\n   * @param {!ASTNode=} opt_newNode The new node the marker is now on.\n   *    Undefined for a blank event.\n   */\n  constructor(opt_block, isCursor, opt_oldNode, opt_newNode) {\n    let workspaceId = opt_block ? opt_block.workspace.id : undefined;\n    if (opt_newNode && opt_newNode.getType() === ASTNode.types.WORKSPACE) {\n      workspaceId = (/** @type {!Workspace} */ (opt_newNode.getLocation())).id;\n    }\n    super(workspaceId);\n\n    /**\n     * The workspace identifier for this event.\n     * @type {?string}\n     */\n    this.blockId = opt_block ? opt_block.id : null;\n\n    /**\n     * The old node the marker used to be on.\n     * @type {?ASTNode|undefined}\n     */\n    this.oldNode = opt_oldNode;\n\n    /**\n     * The new node the  marker is now on.\n     * @type {ASTNode|undefined}\n     */\n    this.newNode = opt_newNode;\n\n    /**\n     * Whether this is a cursor event.\n     * @type {boolean|undefined}\n     */\n    this.isCursor = isCursor;\n\n    /**\n     * Type of this event.\n     * @type {string}\n     */\n    this.type = eventUtils.MARKER_MOVE;\n  }\n\n  /**\n   * Encode the event as JSON.\n   * @return {!Object} JSON representation.\n   */\n  toJson() {\n    const json = super.toJson();\n    json['isCursor'] = this.isCursor;\n    json['blockId'] = this.blockId;\n    json['oldNode'] = this.oldNode;\n    json['newNode'] = this.newNode;\n    return json;\n  }\n\n  /**\n   * Decode the JSON event.\n   * @param {!Object} json JSON representation.\n   */\n  fromJson(json) {\n    super.fromJson(json);\n    this.isCursor = json['isCursor'];\n    this.blockId = json['blockId'];\n    this.oldNode = json['oldNode'];\n    this.newNode = json['newNode'];\n  }\n}\n\nregistry.register(registry.Type.EVENT, eventUtils.MARKER_MOVE, MarkerMove);\n\nexports.MarkerMove = MarkerMove;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Methods for graphically rendering a marker as SVG.\n */\n'use strict';\n\n\n/**\n * Methods for graphically rendering a marker as SVG.\n * @class\n */\ngoog.module('Blockly.blockRendering.MarkerSvg');\n\nconst dom = goog.require('Blockly.utils.dom');\nconst eventUtils = goog.require('Blockly.Events.utils');\nconst svgPaths = goog.require('Blockly.utils.svgPaths');\nconst {ASTNode} = goog.require('Blockly.ASTNode');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockSvg} = goog.requireType('Blockly.BlockSvg');\nconst {ConnectionType} = goog.require('Blockly.ConnectionType');\n/* eslint-disable-next-line no-unused-vars */\nconst {Connection} = goog.requireType('Blockly.Connection');\n/* eslint-disable-next-line no-unused-vars */\nconst {ConstantProvider} = goog.requireType('Blockly.blockRendering.ConstantProvider');\n/* eslint-disable-next-line no-unused-vars */\nconst {Field} = goog.requireType('Blockly.Field');\n/* eslint-disable-next-line no-unused-vars */\nconst {IASTNodeLocationSvg} = goog.requireType('Blockly.IASTNodeLocationSvg');\n/* eslint-disable-next-line no-unused-vars */\nconst {Marker} = goog.requireType('Blockly.Marker');\n/* eslint-disable-next-line no-unused-vars */\nconst {RenderedConnection} = goog.requireType('Blockly.RenderedConnection');\nconst {Svg} = goog.require('Blockly.utils.Svg');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceSvg} = goog.requireType('Blockly.WorkspaceSvg');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.Events.MarkerMove');\n\n\n/**\n * The name of the CSS class for a cursor.\n * @const {string}\n */\nconst CURSOR_CLASS = 'blocklyCursor';\n\n/**\n * The name of the CSS class for a marker.\n * @const {string}\n */\nconst MARKER_CLASS = 'blocklyMarker';\n\n/**\n * What we multiply the height by to get the height of the marker.\n * Only used for the block and block connections.\n * @const {number}\n */\nconst HEIGHT_MULTIPLIER = 3 / 4;\n\n/**\n * Class for a marker.\n * @alias Blockly.blockRendering.MarkerSvg\n */\nclass MarkerSvg {\n  /**\n   * @param {!WorkspaceSvg} workspace The workspace the marker belongs to.\n   * @param {!ConstantProvider} constants The constants for\n   *     the renderer.\n   * @param {!Marker} marker The marker to draw.\n   */\n  constructor(workspace, constants, marker) {\n    /**\n     * The workspace the marker belongs to.\n     * @type {!WorkspaceSvg}\n     * @private\n     */\n    this.workspace_ = workspace;\n\n    /**\n     * The marker to draw.\n     * @type {!Marker}\n     * @private\n     */\n    this.marker_ = marker;\n\n    /**\n     * The workspace, field, or block that the marker SVG element should be\n     * attached to.\n     * @type {IASTNodeLocationSvg}\n     * @private\n     */\n    this.parent_ = null;\n\n    /**\n     * The constants necessary to draw the marker.\n     * @type {ConstantProvider}\n     * @protected\n     */\n    this.constants_ = constants;\n\n    /**\n     * The current SVG element for the marker.\n     * @type {Element}\n     */\n    this.currentMarkerSvg = null;\n\n    const defaultColour = this.isCursor() ? this.constants_.CURSOR_COLOUR :\n                                            this.constants_.MARKER_COLOUR;\n\n    /**\n     * The colour of the marker.\n     * @type {string}\n     */\n    this.colour_ = marker.colour || defaultColour;\n\n    /**\n     * The root SVG group containing the marker.\n     * @type {SVGGElement}\n     * @protected\n     */\n    this.markerSvg_ = null;\n\n    /**\n     * @type {?SVGGElement}\n     * @protected\n     */\n    this.svgGroup_ = null;\n\n    /**\n     * @type {?SVGPathElement}\n     * @protected\n     */\n    this.markerBlock_ = null;\n\n    /**\n     * @type {?SVGPathElement}\n     * @protected\n     */\n    this.markerInput_ = null;\n\n    /**\n     * @type {?SVGRectElement}\n     * @protected\n     */\n    this.markerSvgLine_ = null;\n\n    /**\n     * @type {?SVGRectElement}\n     * @protected\n     */\n    this.markerSvgRect_ = null;\n  }\n\n  /**\n   * Return the root node of the SVG or null if none exists.\n   * @return {SVGElement} The root SVG node.\n   */\n  getSvgRoot() {\n    return this.svgGroup_;\n  }\n\n  /**\n   * Get the marker.\n   * @return {!Marker} The marker to draw for.\n   */\n  getMarker() {\n    return this.marker_;\n  }\n\n  /**\n   * True if the marker should be drawn as a cursor, false otherwise.\n   * A cursor is drawn as a flashing line. A marker is drawn as a solid line.\n   * @return {boolean} True if the marker is a cursor, false otherwise.\n   */\n  isCursor() {\n    return this.marker_.type === 'cursor';\n  }\n\n  /**\n   * Create the DOM element for the marker.\n   * @return {!SVGElement} The marker controls SVG group.\n   * @package\n   */\n  createDom() {\n    const className = this.isCursor() ? CURSOR_CLASS : MARKER_CLASS;\n\n    this.svgGroup_ = dom.createSvgElement(Svg.G, {'class': className}, null);\n\n    this.createDomInternal_();\n    return this.svgGroup_;\n  }\n\n  /**\n   * Attaches the SVG root of the marker to the SVG group of the parent.\n   * @param {!IASTNodeLocationSvg} newParent The workspace, field, or\n   *     block that the marker SVG element should be attached to.\n   * @protected\n   */\n  setParent_(newParent) {\n    if (!this.isCursor()) {\n      if (this.parent_) {\n        this.parent_.setMarkerSvg(null);\n      }\n      newParent.setMarkerSvg(this.getSvgRoot());\n    } else {\n      if (this.parent_) {\n        this.parent_.setCursorSvg(null);\n      }\n      newParent.setCursorSvg(this.getSvgRoot());\n    }\n    this.parent_ = newParent;\n  }\n\n  /**\n   * Update the marker.\n   * @param {ASTNode} oldNode The previous node the marker was on or null.\n   * @param {ASTNode} curNode The node that we want to draw the marker for.\n   */\n  draw(oldNode, curNode) {\n    if (!curNode) {\n      this.hide();\n      return;\n    }\n\n    this.constants_ = this.workspace_.getRenderer().getConstants();\n\n    const defaultColour = this.isCursor() ? this.constants_.CURSOR_COLOUR :\n                                            this.constants_.MARKER_COLOUR;\n    this.colour_ = this.marker_.colour || defaultColour;\n    this.applyColour_(curNode);\n\n    this.showAtLocation_(curNode);\n\n    this.fireMarkerEvent_(oldNode, curNode);\n\n    // Ensures the marker will be visible immediately after the move.\n    const animate = this.currentMarkerSvg.childNodes[0];\n    if (animate !== undefined) {\n      animate.beginElement && animate.beginElement();\n    }\n  }\n\n  /**\n   * Update the marker's visible state based on the type of curNode..\n   * @param {!ASTNode} curNode The node that we want to draw the marker for.\n   * @protected\n   */\n  showAtLocation_(curNode) {\n    const curNodeAsConnection =\n        /** @type {!Connection} */ (curNode.getLocation());\n    const connectionType = curNodeAsConnection.type;\n    if (curNode.getType() === ASTNode.types.BLOCK) {\n      this.showWithBlock_(curNode);\n    } else if (curNode.getType() === ASTNode.types.OUTPUT) {\n      this.showWithOutput_(curNode);\n    } else if (connectionType === ConnectionType.INPUT_VALUE) {\n      this.showWithInput_(curNode);\n    } else if (connectionType === ConnectionType.NEXT_STATEMENT) {\n      this.showWithNext_(curNode);\n    } else if (curNode.getType() === ASTNode.types.PREVIOUS) {\n      this.showWithPrevious_(curNode);\n    } else if (curNode.getType() === ASTNode.types.FIELD) {\n      this.showWithField_(curNode);\n    } else if (curNode.getType() === ASTNode.types.WORKSPACE) {\n      this.showWithCoordinates_(curNode);\n    } else if (curNode.getType() === ASTNode.types.STACK) {\n      this.showWithStack_(curNode);\n    }\n  }\n\n  /**************************\n   * Display\n   **************************/\n\n  /**\n   * Show the marker as a combination of the previous connection and block,\n   * the output connection and block, or just the block.\n   * @param {!ASTNode} curNode The node to draw the marker for.\n   * @private\n   */\n  showWithBlockPrevOutput_(curNode) {\n    const block = /** @type {!BlockSvg} */ (curNode.getSourceBlock());\n    const width = block.width;\n    const height = block.height;\n    const markerHeight = height * HEIGHT_MULTIPLIER;\n    const markerOffset = this.constants_.CURSOR_BLOCK_PADDING;\n\n    if (block.previousConnection) {\n      const connectionShape =\n          this.constants_.shapeFor(block.previousConnection);\n      this.positionPrevious_(\n          width, markerOffset, markerHeight, connectionShape);\n    } else if (block.outputConnection) {\n      const connectionShape = this.constants_.shapeFor(block.outputConnection);\n      this.positionOutput_(width, height, connectionShape);\n    } else {\n      this.positionBlock_(width, markerOffset, markerHeight);\n    }\n    this.setParent_(block);\n    this.showCurrent_();\n  }\n\n  /**\n   * Position and display the marker for a block.\n   * @param {!ASTNode} curNode The node to draw the marker for.\n   * @protected\n   */\n  showWithBlock_(curNode) {\n    this.showWithBlockPrevOutput_(curNode);\n  }\n\n  /**\n   * Position and display the marker for a previous connection.\n   * @param {!ASTNode} curNode The node to draw the marker for.\n   * @protected\n   */\n  showWithPrevious_(curNode) {\n    this.showWithBlockPrevOutput_(curNode);\n  }\n\n  /**\n   * Position and display the marker for an output connection.\n   * @param {!ASTNode} curNode The node to draw the marker for.\n   * @protected\n   */\n  showWithOutput_(curNode) {\n    this.showWithBlockPrevOutput_(curNode);\n  }\n\n  /**\n   * Position and display the marker for a workspace coordinate.\n   * This is a horizontal line.\n   * @param {!ASTNode} curNode The node to draw the marker for.\n   * @protected\n   */\n  showWithCoordinates_(curNode) {\n    const wsCoordinate = curNode.getWsCoordinate();\n    let x = wsCoordinate.x;\n    const y = wsCoordinate.y;\n\n    if (this.workspace_.RTL) {\n      x -= this.constants_.CURSOR_WS_WIDTH;\n    }\n\n    this.positionLine_(x, y, this.constants_.CURSOR_WS_WIDTH);\n    this.setParent_(this.workspace_);\n    this.showCurrent_();\n  }\n\n  /**\n   * Position and display the marker for a field.\n   * This is a box around the field.\n   * @param {!ASTNode} curNode The node to draw the marker for.\n   * @protected\n   */\n  showWithField_(curNode) {\n    const field = /** @type {Field} */ (curNode.getLocation());\n    const width = field.getSize().width;\n    const height = field.getSize().height;\n\n    this.positionRect_(0, 0, width, height);\n    this.setParent_(field);\n    this.showCurrent_();\n  }\n\n  /**\n   * Position and display the marker for an input.\n   * This is a puzzle piece.\n   * @param {!ASTNode} curNode The node to draw the marker for.\n   * @protected\n   */\n  showWithInput_(curNode) {\n    const connection = /** @type {RenderedConnection} */\n        (curNode.getLocation());\n    const sourceBlock = /** @type {!BlockSvg} */ (connection.getSourceBlock());\n\n    this.positionInput_(connection);\n    this.setParent_(sourceBlock);\n    this.showCurrent_();\n  }\n\n  /**\n   * Position and display the marker for a next connection.\n   * This is a horizontal line.\n   * @param {!ASTNode} curNode The node to draw the marker for.\n   * @protected\n   */\n  showWithNext_(curNode) {\n    const connection =\n        /** @type {!RenderedConnection} */ (curNode.getLocation());\n    const targetBlock =\n        /** @type {BlockSvg} */ (connection.getSourceBlock());\n    let x = 0;\n    const y = connection.getOffsetInBlock().y;\n    const width = targetBlock.getHeightWidth().width;\n    if (this.workspace_.RTL) {\n      x = -width;\n    }\n    this.positionLine_(x, y, width);\n    this.setParent_(targetBlock);\n    this.showCurrent_();\n  }\n\n  /**\n   * Position and display the marker for a stack.\n   * This is a box with extra padding around the entire stack of blocks.\n   * @param {!ASTNode} curNode The node to draw the marker for.\n   * @protected\n   */\n  showWithStack_(curNode) {\n    const block = /** @type {BlockSvg} */ (curNode.getLocation());\n\n    // Gets the height and width of entire stack.\n    const heightWidth = block.getHeightWidth();\n\n    // Add padding so that being on a stack looks different than being on a\n    // block.\n    const width = heightWidth.width + this.constants_.CURSOR_STACK_PADDING;\n    const height = heightWidth.height + this.constants_.CURSOR_STACK_PADDING;\n\n    // Shift the rectangle slightly to upper left so padding is equal on all\n    // sides.\n    const xPadding = -this.constants_.CURSOR_STACK_PADDING / 2;\n    const yPadding = -this.constants_.CURSOR_STACK_PADDING / 2;\n\n    let x = xPadding;\n    const y = yPadding;\n\n    if (this.workspace_.RTL) {\n      x = -(width + xPadding);\n    }\n    this.positionRect_(x, y, width, height);\n    this.setParent_(block);\n    this.showCurrent_();\n  }\n\n  /**\n   * Show the current marker.\n   * @protected\n   */\n  showCurrent_() {\n    this.hide();\n    this.currentMarkerSvg.style.display = '';\n  }\n\n  /**************************\n   * Position\n   **************************/\n\n  /**\n   * Position the marker for a block.\n   * Displays an outline of the top half of a rectangle around a block.\n   * @param {number} width The width of the block.\n   * @param {number} markerOffset The extra padding for around the block.\n   * @param {number} markerHeight The height of the marker.\n   * @protected\n   */\n  positionBlock_(width, markerOffset, markerHeight) {\n    const markerPath = svgPaths.moveBy(-markerOffset, markerHeight) +\n        svgPaths.lineOnAxis('V', -markerOffset) +\n        svgPaths.lineOnAxis('H', width + markerOffset * 2) +\n        svgPaths.lineOnAxis('V', markerHeight);\n    this.markerBlock_.setAttribute('d', markerPath);\n    if (this.workspace_.RTL) {\n      this.flipRtl_(this.markerBlock_);\n    }\n    this.currentMarkerSvg = this.markerBlock_;\n  }\n\n  /**\n   * Position the marker for an input connection.\n   * Displays a filled in puzzle piece.\n   * @param {!RenderedConnection} connection The connection to position\n   *     marker around.\n   * @protected\n   */\n  positionInput_(connection) {\n    const x = connection.getOffsetInBlock().x;\n    const y = connection.getOffsetInBlock().y;\n\n    const path =\n        svgPaths.moveTo(0, 0) + this.constants_.shapeFor(connection).pathDown;\n\n    this.markerInput_.setAttribute('d', path);\n    this.markerInput_.setAttribute(\n        'transform',\n        'translate(' + x + ',' + y + ')' +\n            (this.workspace_.RTL ? ' scale(-1 1)' : ''));\n    this.currentMarkerSvg = this.markerInput_;\n  }\n\n  /**\n   * Move and show the marker at the specified coordinate in workspace units.\n   * Displays a horizontal line.\n   * @param {number} x The new x, in workspace units.\n   * @param {number} y The new y, in workspace units.\n   * @param {number} width The new width, in workspace units.\n   * @protected\n   */\n  positionLine_(x, y, width) {\n    this.markerSvgLine_.setAttribute('x', x);\n    this.markerSvgLine_.setAttribute('y', y);\n    this.markerSvgLine_.setAttribute('width', width);\n    this.currentMarkerSvg = this.markerSvgLine_;\n  }\n\n  /**\n   * Position the marker for an output connection.\n   * Displays a puzzle outline and the top and bottom path.\n   * @param {number} width The width of the block.\n   * @param {number} height The height of the block.\n   * @param {!Object} connectionShape The shape object for the connection.\n   * @protected\n   */\n  positionOutput_(width, height, connectionShape) {\n    const markerPath = svgPaths.moveBy(width, 0) +\n        svgPaths.lineOnAxis('h', -(width - connectionShape.width)) +\n        svgPaths.lineOnAxis('v', this.constants_.TAB_OFFSET_FROM_TOP) +\n        connectionShape.pathDown + svgPaths.lineOnAxis('V', height) +\n        svgPaths.lineOnAxis('H', width);\n    this.markerBlock_.setAttribute('d', markerPath);\n    if (this.workspace_.RTL) {\n      this.flipRtl_(this.markerBlock_);\n    }\n    this.currentMarkerSvg = this.markerBlock_;\n  }\n\n  /**\n   * Position the marker for a previous connection.\n   * Displays a half rectangle with a notch in the top to represent the previous\n   * connection.\n   * @param {number} width The width of the block.\n   * @param {number} markerOffset The offset of the marker from around the\n   *     block.\n   * @param {number} markerHeight The height of the marker.\n   * @param {!Object} connectionShape The shape object for the connection.\n   * @protected\n   */\n  positionPrevious_(width, markerOffset, markerHeight, connectionShape) {\n    const markerPath = svgPaths.moveBy(-markerOffset, markerHeight) +\n        svgPaths.lineOnAxis('V', -markerOffset) +\n        svgPaths.lineOnAxis('H', this.constants_.NOTCH_OFFSET_LEFT) +\n        connectionShape.pathLeft +\n        svgPaths.lineOnAxis('H', width + markerOffset * 2) +\n        svgPaths.lineOnAxis('V', markerHeight);\n    this.markerBlock_.setAttribute('d', markerPath);\n    if (this.workspace_.RTL) {\n      this.flipRtl_(this.markerBlock_);\n    }\n    this.currentMarkerSvg = this.markerBlock_;\n  }\n\n  /**\n   * Move and show the marker at the specified coordinate in workspace units.\n   * Displays a filled in rectangle.\n   * @param {number} x The new x, in workspace units.\n   * @param {number} y The new y, in workspace units.\n   * @param {number} width The new width, in workspace units.\n   * @param {number} height The new height, in workspace units.\n   * @protected\n   */\n  positionRect_(x, y, width, height) {\n    this.markerSvgRect_.setAttribute('x', x);\n    this.markerSvgRect_.setAttribute('y', y);\n    this.markerSvgRect_.setAttribute('width', width);\n    this.markerSvgRect_.setAttribute('height', height);\n    this.currentMarkerSvg = this.markerSvgRect_;\n  }\n\n  /**\n   * Flip the SVG paths in RTL.\n   * @param {!SVGElement} markerSvg The marker that we want to flip.\n   * @private\n   */\n  flipRtl_(markerSvg) {\n    markerSvg.setAttribute('transform', 'scale(-1 1)');\n  }\n\n  /**\n   * Hide the marker.\n   */\n  hide() {\n    this.markerSvgLine_.style.display = 'none';\n    this.markerSvgRect_.style.display = 'none';\n    this.markerInput_.style.display = 'none';\n    this.markerBlock_.style.display = 'none';\n  }\n\n  /**\n   * Fire event for the marker or marker.\n   * @param {ASTNode} oldNode The old node the marker used to be on.\n   * @param {!ASTNode} curNode The new node the marker is currently on.\n   * @private\n   */\n  fireMarkerEvent_(oldNode, curNode) {\n    const curBlock = curNode.getSourceBlock();\n    const event = new (eventUtils.get(eventUtils.MARKER_MOVE))(\n        curBlock, this.isCursor(), oldNode, curNode);\n    eventUtils.fire(event);\n  }\n\n  /**\n   * Get the properties to make a marker blink.\n   * @return {!Object} The object holding attributes to make the marker blink.\n   * @protected\n   */\n  getBlinkProperties_() {\n    return {\n      'attributeType': 'XML',\n      'attributeName': 'fill',\n      'dur': '1s',\n      'values': this.colour_ + ';transparent;transparent;',\n      'repeatCount': 'indefinite',\n    };\n  }\n\n  /**\n   * Create the marker SVG.\n   * @return {Element} The SVG node created.\n   * @protected\n   */\n  createDomInternal_() {\n    /* This markup will be generated and added to the .svgGroup_:\n    <g>\n      <rect width=\"100\" height=\"5\">\n        <animate attributeType=\"XML\" attributeName=\"fill\" dur=\"1s\"\n          values=\"transparent;transparent;#fff;transparent\"\n    repeatCount=\"indefinite\" />\n      </rect>\n    </g>\n    */\n\n    this.markerSvg_ = dom.createSvgElement(\n        Svg.G, {\n          'width': this.constants_.CURSOR_WS_WIDTH,\n          'height': this.constants_.WS_CURSOR_HEIGHT,\n        },\n        this.svgGroup_);\n\n    // A horizontal line used to represent a workspace coordinate or next\n    // connection.\n    this.markerSvgLine_ = dom.createSvgElement(\n        Svg.RECT, {\n          'width': this.constants_.CURSOR_WS_WIDTH,\n          'height': this.constants_.WS_CURSOR_HEIGHT,\n          'style': 'display: none',\n        },\n        this.markerSvg_);\n\n    // A filled in rectangle used to represent a stack.\n    this.markerSvgRect_ = dom.createSvgElement(\n        Svg.RECT, {\n          'class': 'blocklyVerticalMarker',\n          'rx': 10,\n          'ry': 10,\n          'style': 'display: none',\n        },\n        this.markerSvg_);\n\n    // A filled in puzzle piece used to represent an input value.\n    this.markerInput_ = dom.createSvgElement(\n        Svg.PATH, {'transform': '', 'style': 'display: none'}, this.markerSvg_);\n\n    // A path used to represent a previous connection and a block, an output\n    // connection and a block, or a block.\n    this.markerBlock_ = dom.createSvgElement(\n        Svg.PATH, {\n          'transform': '',\n          'style': 'display: none',\n          'fill': 'none',\n          'stroke-width': this.constants_.CURSOR_STROKE_WIDTH,\n        },\n        this.markerSvg_);\n\n    // Markers and stack markers don't blink.\n    if (this.isCursor()) {\n      const blinkProperties = this.getBlinkProperties_();\n      dom.createSvgElement(Svg.ANIMATE, blinkProperties, this.markerSvgLine_);\n      dom.createSvgElement(Svg.ANIMATE, blinkProperties, this.markerInput_);\n      blinkProperties['attributeName'] = 'stroke';\n      dom.createSvgElement(Svg.ANIMATE, blinkProperties, this.markerBlock_);\n    }\n\n    return this.markerSvg_;\n  }\n\n  /**\n   * Apply the marker's colour.\n   * @param {!ASTNode} _curNode The node that we want to draw the marker\n   *    for.\n   * @protected\n   */\n  applyColour_(_curNode) {\n    this.markerSvgLine_.setAttribute('fill', this.colour_);\n    this.markerSvgRect_.setAttribute('stroke', this.colour_);\n    this.markerInput_.setAttribute('fill', this.colour_);\n    this.markerBlock_.setAttribute('stroke', this.colour_);\n\n    if (this.isCursor()) {\n      const values = this.colour_ + ';transparent;transparent;';\n      this.markerSvgLine_.firstChild.setAttribute('values', values);\n      this.markerInput_.firstChild.setAttribute('values', values);\n      this.markerBlock_.firstChild.setAttribute('values', values);\n    }\n  }\n\n  /**\n   * Dispose of this marker.\n   */\n  dispose() {\n    if (this.svgGroup_) {\n      dom.removeNode(this.svgGroup_);\n    }\n  }\n}\n\nexports.MarkerSvg = MarkerSvg;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Class representing the space a next connection takes up during\n * rendering.\n */\n\n/**\n * Class representing the space a next connection takes up during\n * rendering.\n * @class\n */\ngoog.module('Blockly.blockRendering.NextConnection');\n\nconst {Connection} = goog.require('Blockly.blockRendering.Connection');\n/* eslint-disable-next-line no-unused-vars */\nconst {ConstantProvider} = goog.requireType('Blockly.blockRendering.ConstantProvider');\n/* eslint-disable-next-line no-unused-vars */\nconst {RenderedConnection} = goog.requireType('Blockly.RenderedConnection');\nconst {Types} = goog.require('Blockly.blockRendering.Types');\n\n\n/**\n * An object containing information about the space a next connection takes\n * up during rendering.\n * @extends {Connection}\n * @struct\n * @alias Blockly.blockRendering.NextConnection\n */\nclass NextConnection extends Connection {\n  /**\n   * @param {!ConstantProvider} constants The rendering\n   *   constants provider.\n   * @param {!RenderedConnection} connectionModel The connection object on\n   *     the block that this represents.\n   * @package\n   */\n  constructor(constants, connectionModel) {\n    super(constants, connectionModel);\n    this.type |= Types.NEXT_CONNECTION;\n    this.height = this.shape.height;\n    this.width = this.shape.width;\n  }\n}\n\nexports.NextConnection = NextConnection;\n","\n/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Class representing the space a output connection takes up\n * during rendering.\n */\n\n/**\n * Class representing the space a output connection takes up\n * during rendering.\n * @class\n */\ngoog.module('Blockly.blockRendering.OutputConnection');\n\nconst {Connection} = goog.require('Blockly.blockRendering.Connection');\n/* eslint-disable-next-line no-unused-vars */\nconst {ConstantProvider} = goog.requireType('Blockly.blockRendering.ConstantProvider');\n/* eslint-disable-next-line no-unused-vars */\nconst {RenderedConnection} = goog.requireType('Blockly.RenderedConnection');\nconst {Types} = goog.require('Blockly.blockRendering.Types');\n\n\n/**\n * An object containing information about the space an output connection takes\n * up during rendering.\n * @extends {Connection}\n * @struct\n * @alias Blockly.blockRendering.OutputConnection\n */\nclass OutputConnection extends Connection {\n  /**\n   * @param {!ConstantProvider} constants The rendering\n   *   constants provider.\n   * @param {!RenderedConnection} connectionModel The connection object on\n   *     the block that this represents.\n   * @package\n   */\n  constructor(constants, connectionModel) {\n    super(constants, connectionModel);\n    this.type |= Types.OUTPUT_CONNECTION;\n\n    this.height = !this.isDynamicShape ? this.shape.height : 0;\n    this.width = !this.isDynamicShape ? this.shape.width : 0;\n\n    /** @type {number} */\n    this.startX = this.width;\n\n    /** @type {number} */\n    this.connectionOffsetY = this.constants_.TAB_OFFSET_FROM_TOP;\n\n    /** @type {number} */\n    this.connectionOffsetX = 0;\n  }\n}\n\nexports.OutputConnection = OutputConnection;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview An object that owns a block's rendering SVG elements.\n */\n\n'use strict';\n\n/**\n * An object that owns a block's rendering SVG elements.\n * @class\n */\ngoog.module('Blockly.blockRendering.PathObject');\n\nconst dom = goog.require('Blockly.utils.dom');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockSvg} = goog.requireType('Blockly.BlockSvg');\n/* eslint-disable-next-line no-unused-vars */\nconst {Connection} = goog.requireType('Blockly.Connection');\n/* eslint-disable-next-line no-unused-vars */\nconst {ConstantProvider} = goog.requireType('Blockly.blockRendering.ConstantProvider');\n/* eslint-disable-next-line no-unused-vars */\nconst {IPathObject} = goog.require('Blockly.blockRendering.IPathObject');\nconst {Svg} = goog.require('Blockly.utils.Svg');\n/* eslint-disable-next-line no-unused-vars */\nconst {Theme} = goog.requireType('Blockly.Theme');\n\n\n/**\n * An object that handles creating and setting each of the SVG elements\n * used by the renderer.\n * @implements {IPathObject}\n * @alias Blockly.blockRendering.PathObject\n */\nclass PathObject {\n  /**\n   * @param {!SVGElement} root The root SVG element.\n   * @param {!Theme.BlockStyle} style The style object to use for\n   *     colouring.\n   * @param {!ConstantProvider} constants The renderer's\n   *     constants.\n   * @package\n   */\n  constructor(root, style, constants) {\n    /**\n     * The renderer's constant provider.\n     * @type {!ConstantProvider}\n     * @package\n     */\n    this.constants = constants;\n\n    this.svgRoot = root;\n\n    /**\n     * The primary path of the block.\n     * @type {!SVGElement}\n     * @package\n     */\n    this.svgPath =\n        dom.createSvgElement(Svg.PATH, {'class': 'blocklyPath'}, this.svgRoot);\n\n    /**\n     * The style object to use when colouring block paths.\n     * @type {!Theme.BlockStyle}\n     * @package\n     */\n    this.style = style;\n\n    /**\n     * Holds the cursors svg element when the cursor is attached to the block.\n     * This is null if there is no cursor on the block.\n     * @type {SVGElement}\n     * @package\n     */\n    this.cursorSvg = null;\n\n    /**\n     * Holds the markers svg element when the marker is attached to the block.\n     * This is null if there is no marker on the block.\n     * @type {SVGElement}\n     * @package\n     */\n    this.markerSvg = null;\n  }\n\n  /**\n   * Set the path generated by the renderer onto the respective SVG element.\n   * @param {string} pathString The path.\n   * @package\n   */\n  setPath(pathString) {\n    this.svgPath.setAttribute('d', pathString);\n  }\n\n  /**\n   * Flip the SVG paths in RTL.\n   * @package\n   */\n  flipRTL() {\n    // Mirror the block's path.\n    this.svgPath.setAttribute('transform', 'scale(-1 1)');\n  }\n\n  /**\n   * Add the cursor SVG to this block's SVG group.\n   * @param {SVGElement} cursorSvg The SVG root of the cursor to be added to the\n   *     block SVG group.\n   * @package\n   */\n  setCursorSvg(cursorSvg) {\n    if (!cursorSvg) {\n      this.cursorSvg = null;\n      return;\n    }\n\n    this.svgRoot.appendChild(cursorSvg);\n    this.cursorSvg = cursorSvg;\n  }\n\n  /**\n   * Add the marker SVG to this block's SVG group.\n   * @param {SVGElement} markerSvg The SVG root of the marker to be added to the\n   *     block SVG group.\n   * @package\n   */\n  setMarkerSvg(markerSvg) {\n    if (!markerSvg) {\n      this.markerSvg = null;\n      return;\n    }\n\n    if (this.cursorSvg) {\n      this.svgRoot.insertBefore(markerSvg, this.cursorSvg);\n    } else {\n      this.svgRoot.appendChild(markerSvg);\n    }\n    this.markerSvg = markerSvg;\n  }\n\n  /**\n   * Apply the stored colours to the block's path, taking into account whether\n   * the paths belong to a shadow block.\n   * @param {!BlockSvg} block The source block.\n   * @package\n   */\n  applyColour(block) {\n    this.svgPath.setAttribute('stroke', this.style.colourTertiary);\n    this.svgPath.setAttribute('fill', this.style.colourPrimary);\n\n    this.updateShadow_(block.isShadow());\n    this.updateDisabled_(!block.isEnabled() || block.getInheritedDisabled());\n  }\n\n  /**\n   * Set the style.\n   * @param {!Theme.BlockStyle} blockStyle The block style to use.\n   * @package\n   */\n  setStyle(blockStyle) {\n    this.style = blockStyle;\n  }\n\n  /**\n   * Add or remove the given CSS class on the path object's root SVG element.\n   * @param {string} className The name of the class to add or remove\n   * @param {boolean} add True if the class should be added.  False if it should\n   *     be removed.\n   * @protected\n   */\n  setClass_(className, add) {\n    if (add) {\n      dom.addClass(/** @type {!Element} */ (this.svgRoot), className);\n    } else {\n      dom.removeClass(/** @type {!Element} */ (this.svgRoot), className);\n    }\n  }\n\n  /**\n   * Set whether the block shows a highlight or not.  Block highlighting is\n   * often used to visually mark blocks currently being executed.\n   * @param {boolean} enable True if highlighted.\n   * @package\n   */\n  updateHighlighted(enable) {\n    if (enable) {\n      this.svgPath.setAttribute(\n          'filter', 'url(#' + this.constants.embossFilterId + ')');\n    } else {\n      this.svgPath.setAttribute('filter', 'none');\n    }\n  }\n\n  /**\n   * Updates the look of the block to reflect a shadow state.\n   * @param {boolean} shadow True if the block is a shadow block.\n   * @protected\n   */\n  updateShadow_(shadow) {\n    if (shadow) {\n      this.svgPath.setAttribute('stroke', 'none');\n      this.svgPath.setAttribute('fill', this.style.colourSecondary);\n    }\n  }\n\n  /**\n   * Updates the look of the block to reflect a disabled state.\n   * @param {boolean} disabled True if disabled.\n   * @protected\n   */\n  updateDisabled_(disabled) {\n    this.setClass_('blocklyDisabled', disabled);\n    if (disabled) {\n      this.svgPath.setAttribute(\n          'fill', 'url(#' + this.constants.disabledPatternId + ')');\n    }\n  }\n\n  /**\n   * Add or remove styling showing that a block is selected.\n   * @param {boolean} enable True if selection is enabled, false otherwise.\n   * @package\n   */\n  updateSelected(enable) {\n    this.setClass_('blocklySelected', enable);\n  }\n\n  /**\n   * Add or remove styling showing that a block is dragged over a delete area.\n   * @param {boolean} enable True if the block is being dragged over a delete\n   *     area, false otherwise.\n   * @package\n   */\n  updateDraggingDelete(enable) {\n    this.setClass_('blocklyDraggingDelete', enable);\n  }\n\n  /**\n   * Add or remove styling showing that a block is an insertion marker.\n   * @param {boolean} enable True if the block is an insertion marker, false\n   *     otherwise.\n   * @package\n   */\n  updateInsertionMarker(enable) {\n    this.setClass_('blocklyInsertionMarker', enable);\n  }\n\n  /**\n   * Add or remove styling showing that a block is movable.\n   * @param {boolean} enable True if the block is movable, false otherwise.\n   * @package\n   */\n  updateMovable(enable) {\n    this.setClass_('blocklyDraggable', enable);\n  }\n\n  /**\n   * Add or remove styling that shows that if the dragging block is dropped,\n   * this block will be replaced.  If a shadow block, it will disappear.\n   * Otherwise it will bump.\n   * @param {boolean} enable True if styling should be added.\n   * @package\n   */\n  updateReplacementFade(enable) {\n    this.setClass_('blocklyReplaceable', enable);\n  }\n\n  /**\n   * Add or remove styling that shows that if the dragging block is dropped,\n   * this block will be connected to the input.\n   * @param {Connection} _conn The connection on the input to highlight.\n   * @param {boolean} _enable True if styling should be added.\n   * @package\n   */\n  updateShapeForInputHighlight(_conn, _enable) {\n    // NOP\n  }\n}\n\nexports.PathObject = PathObject;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Class representing the space a previous connection takes up\n * during rendering.\n */\n\n/**\n * Class representing the space a previous connection takes up\n * during rendering.\n * @class\n */\ngoog.module('Blockly.blockRendering.PreviousConnection');\n\nconst {Connection} = goog.require('Blockly.blockRendering.Connection');\n/* eslint-disable-next-line no-unused-vars */\nconst {ConstantProvider} = goog.requireType('Blockly.blockRendering.ConstantProvider');\n/* eslint-disable-next-line no-unused-vars */\nconst {RenderedConnection} = goog.requireType('Blockly.RenderedConnection');\nconst {Types} = goog.require('Blockly.blockRendering.Types');\n\n\n/**\n * An object containing information about the space a previous connection takes\n * up during rendering.\n * @extends {Connection}\n * @struct\n * @alias Blockly.blockRendering.PreviousConnection\n */\nclass PreviousConnection extends Connection {\n  /**\n   * @param {!ConstantProvider} constants The rendering\n   *   constants provider.\n   * @param {!RenderedConnection} connectionModel The connection object on\n   *     the block that this represents.\n   * @package\n   */\n  constructor(constants, connectionModel) {\n    super(constants, connectionModel);\n    this.type |= Types.PREVIOUS_CONNECTION;\n    this.height = this.shape.height;\n    this.width = this.shape.width;\n  }\n}\n\nexports.PreviousConnection = PreviousConnection;\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Object representing an input (value, statement, or dummy).\n */\n'use strict';\n\n/**\n * Object representing an input (value, statement, or dummy).\n * @class\n */\ngoog.module('Blockly.Input');\n\nconst fieldRegistry = goog.require('Blockly.fieldRegistry');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockSvg} = goog.requireType('Blockly.BlockSvg');\n/* eslint-disable-next-line no-unused-vars */\nconst {Block} = goog.requireType('Blockly.Block');\n/* eslint-disable-next-line no-unused-vars */\nconst {Connection} = goog.requireType('Blockly.Connection');\n/* eslint-disable-next-line no-unused-vars */\nconst {Field} = goog.requireType('Blockly.Field');\n/* eslint-disable-next-line no-unused-vars */\nconst {RenderedConnection} = goog.requireType('Blockly.RenderedConnection');\nconst {inputTypes} = goog.require('Blockly.inputTypes');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.FieldLabel');\n\n\n/**\n * Class for an input with an optional field.\n * @alias Blockly.Input\n */\nclass Input {\n  /**\n   * @param {number} type The type of the input.\n   * @param {string} name Language-neutral identifier which may used to find\n   *     this input again.\n   * @param {!Block} block The block containing this input.\n   * @param {Connection} connection Optional connection for this input.\n   */\n  constructor(type, name, block, connection) {\n    if (type !== inputTypes.DUMMY && !name) {\n      throw Error(\n          'Value inputs and statement inputs must have non-empty name.');\n    }\n    /** @type {number} */\n    this.type = type;\n    /** @type {string} */\n    this.name = name;\n    /**\n     * @type {!Block}\n     * @private\n     */\n    this.sourceBlock_ = block;\n    /** @type {Connection} */\n    this.connection = connection;\n    /** @type {!Array<!Field>} */\n    this.fieldRow = [];\n\n    /**\n     * Alignment of input's fields (left, right or centre).\n     * @type {number}\n     */\n    this.align = Align.LEFT;\n\n    /**\n     * Is the input visible?\n     * @type {boolean}\n     * @private\n     */\n    this.visible_ = true;\n  }\n\n  /**\n   * Get the source block for this input.\n   * @return {?Block} The source block, or null if there is none.\n   */\n  getSourceBlock() {\n    return this.sourceBlock_;\n  }\n\n  /**\n   * Add a field (or label from string), and all prefix and suffix fields, to\n   * the end of the input's field row.\n   * @param {string|!Field} field Something to add as a field.\n   * @param {string=} opt_name Language-neutral identifier which may used to\n   *     find this field again.  Should be unique to the host block.\n   * @return {!Input} The input being append to (to allow chaining).\n   */\n  appendField(field, opt_name) {\n    this.insertFieldAt(this.fieldRow.length, field, opt_name);\n    return this;\n  }\n\n  /**\n   * Inserts a field (or label from string), and all prefix and suffix fields,\n   * at the location of the input's field row.\n   * @param {number} index The index at which to insert field.\n   * @param {string|!Field} field Something to add as a field.\n   * @param {string=} opt_name Language-neutral identifier which may used to\n   *     find this field again.  Should be unique to the host block.\n   * @return {number} The index following the last inserted field.\n   */\n  insertFieldAt(index, field, opt_name) {\n    if (index < 0 || index > this.fieldRow.length) {\n      throw Error('index ' + index + ' out of bounds.');\n    }\n    // Falsy field values don't generate a field, unless the field is an empty\n    // string and named.\n    if (!field && !(field === '' && opt_name)) {\n      return index;\n    }\n\n    // Generate a FieldLabel when given a plain text field.\n    if (typeof field === 'string') {\n      field = /** @type {!Field} **/ (fieldRegistry.fromJson({\n        'type': 'field_label',\n        'text': field,\n      }));\n    }\n\n    field.setSourceBlock(this.sourceBlock_);\n    if (this.sourceBlock_.rendered) {\n      field.init();\n      field.applyColour();\n    }\n    field.name = opt_name;\n    field.setVisible(this.isVisible());\n\n    if (field.prefixField) {\n      // Add any prefix.\n      index = this.insertFieldAt(index, field.prefixField);\n    }\n    // Add the field to the field row.\n    this.fieldRow.splice(index, 0, field);\n    index++;\n    if (field.suffixField) {\n      // Add any suffix.\n      index = this.insertFieldAt(index, field.suffixField);\n    }\n\n    if (this.sourceBlock_.rendered) {\n      this.sourceBlock_ = /** @type {!BlockSvg} */ (this.sourceBlock_);\n      this.sourceBlock_.render();\n      // Adding a field will cause the block to change shape.\n      this.sourceBlock_.bumpNeighbours();\n    }\n    return index;\n  }\n\n  /**\n   * Remove a field from this input.\n   * @param {string} name The name of the field.\n   * @param {boolean=} opt_quiet True to prevent an error if field is not\n   *     present.\n   * @return {boolean} True if operation succeeds, false if field is not present\n   *     and opt_quiet is true.\n   * @throws {Error} if the field is not present and opt_quiet is false.\n   */\n  removeField(name, opt_quiet) {\n    for (let i = 0, field; (field = this.fieldRow[i]); i++) {\n      if (field.name === name) {\n        field.dispose();\n        this.fieldRow.splice(i, 1);\n        if (this.sourceBlock_.rendered) {\n          this.sourceBlock_ = /** @type {!BlockSvg} */ (this.sourceBlock_);\n          this.sourceBlock_.render();\n          // Removing a field will cause the block to change shape.\n          this.sourceBlock_.bumpNeighbours();\n        }\n        return true;\n      }\n    }\n    if (opt_quiet) {\n      return false;\n    }\n    throw Error('Field \"' + name + '\" not found.');\n  }\n\n  /**\n   * Gets whether this input is visible or not.\n   * @return {boolean} True if visible.\n   */\n  isVisible() {\n    return this.visible_;\n  }\n\n  /**\n   * Sets whether this input is visible or not.\n   * Should only be used to collapse/uncollapse a block.\n   * @param {boolean} visible True if visible.\n   * @return {!Array<!BlockSvg>} List of blocks to render.\n   * @package\n   */\n  setVisible(visible) {\n    // Note: Currently there are only unit tests for block.setCollapsed()\n    // because this function is package. If this function goes back to being a\n    // public API tests (lots of tests) should be added.\n    let renderList = [];\n    if (this.visible_ === visible) {\n      return renderList;\n    }\n    this.visible_ = visible;\n\n    for (let y = 0, field; (field = this.fieldRow[y]); y++) {\n      field.setVisible(visible);\n    }\n    if (this.connection) {\n      this.connection =\n          /** @type {!RenderedConnection} */ (this.connection);\n      // Has a connection.\n      if (visible) {\n        renderList = this.connection.startTrackingAll();\n      } else {\n        this.connection.stopTrackingAll();\n      }\n      const child = this.connection.targetBlock();\n      if (child) {\n        child.getSvgRoot().style.display = visible ? 'block' : 'none';\n      }\n    }\n    return renderList;\n  }\n\n  /**\n   * Mark all fields on this input as dirty.\n   * @package\n   */\n  markDirty() {\n    for (let y = 0, field; (field = this.fieldRow[y]); y++) {\n      field.markDirty();\n    }\n  }\n\n  /**\n   * Change a connection's compatibility.\n   * @param {string|Array<string>|null} check Compatible value type or\n   *     list of value types.  Null if all types are compatible.\n   * @return {!Input} The input being modified (to allow chaining).\n   */\n  setCheck(check) {\n    if (!this.connection) {\n      throw Error('This input does not have a connection.');\n    }\n    this.connection.setCheck(check);\n    return this;\n  }\n\n  /**\n   * Change the alignment of the connection's field(s).\n   * @param {number} align One of the values of Align\n   *   In RTL mode directions are reversed, and Align.RIGHT aligns to the left.\n   * @return {!Input} The input being modified (to allow chaining).\n   */\n  setAlign(align) {\n    this.align = align;\n    if (this.sourceBlock_.rendered) {\n      this.sourceBlock_ = /** @type {!BlockSvg} */ (this.sourceBlock_);\n      this.sourceBlock_.render();\n    }\n    return this;\n  }\n\n  /**\n   * Changes the connection's shadow block.\n   * @param {?Element} shadow DOM representation of a block or null.\n   * @return {!Input} The input being modified (to allow chaining).\n   */\n  setShadowDom(shadow) {\n    if (!this.connection) {\n      throw Error('This input does not have a connection.');\n    }\n    this.connection.setShadowDom(shadow);\n    return this;\n  }\n\n  /**\n   * Returns the XML representation of the connection's shadow block.\n   * @return {?Element} Shadow DOM representation of a block or null.\n   */\n  getShadowDom() {\n    if (!this.connection) {\n      throw Error('This input does not have a connection.');\n    }\n    return this.connection.getShadowDom();\n  }\n\n  /**\n   * Initialize the fields on this input.\n   */\n  init() {\n    if (!this.sourceBlock_.workspace.rendered) {\n      return;  // Headless blocks don't need fields initialized.\n    }\n    for (let i = 0; i < this.fieldRow.length; i++) {\n      this.fieldRow[i].init();\n    }\n  }\n\n  /**\n   * Sever all links to this input.\n   * @suppress {checkTypes}\n   */\n  dispose() {\n    for (let i = 0, field; (field = this.fieldRow[i]); i++) {\n      field.dispose();\n    }\n    if (this.connection) {\n      this.connection.dispose();\n    }\n    this.sourceBlock_ = null;\n  }\n}\n\n/**\n * Enum for alignment of inputs.\n * @enum {number}\n * @alias Blockly.Input.Align\n */\nconst Align = {\n  LEFT: -1,\n  CENTRE: 0,\n  RIGHT: 1,\n};\nexports.Align = Align;\n\n// Add Align to Input so that `Blockly.Input.Align` is publicly accessible.\nInput.Align = Align;\n\nexports.Input = Input;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Objects representing a round corner in a row of a rendered\n * block.\n */\n\n/**\n * Objects representing a round corner in a row of a rendered\n * block.\n * @class\n */\ngoog.module('Blockly.blockRendering.RoundCorner');\n\n/* eslint-disable-next-line no-unused-vars */\nconst {ConstantProvider} = goog.requireType('Blockly.blockRendering.ConstantProvider');\nconst {Measurable} = goog.require('Blockly.blockRendering.Measurable');\nconst {Types} = goog.require('Blockly.blockRendering.Types');\n\n\n/**\n * An object containing information about the space a rounded corner takes up\n * during rendering.\n * @extends {Measurable}\n * @struct\n * @alias Blockly.blockRendering.RoundCorner\n */\nclass RoundCorner extends Measurable {\n  /**\n   * @param {!ConstantProvider} constants The rendering\n   *   constants provider.\n   * @param {string=} opt_position The position of this corner.\n   * @package\n   */\n  constructor(constants, opt_position) {\n    super(constants);\n    this.type = ((!opt_position || opt_position === 'left') ?\n                     Types.LEFT_ROUND_CORNER :\n                     Types.RIGHT_ROUND_CORNER) |\n        Types.CORNER;\n    this.width = this.constants_.CORNER_RADIUS;\n    // The rounded corner extends into the next row by 4 so we only take the\n    // height that is aligned with this row.\n    this.height = this.constants_.CORNER_RADIUS / 2;\n  }\n}\n\nexports.RoundCorner = RoundCorner;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Object representing a spacer between two rows.\n */\n\n/**\n * Object representing a spacer between two rows.\n * @class\n */\ngoog.module('Blockly.blockRendering.SpacerRow');\n\n/* eslint-disable-next-line no-unused-vars */\nconst {ConstantProvider} = goog.requireType('Blockly.blockRendering.ConstantProvider');\nconst {InRowSpacer} = goog.require('Blockly.blockRendering.InRowSpacer');\nconst {Row} = goog.require('Blockly.blockRendering.Row');\nconst {Types} = goog.require('Blockly.blockRendering.Types');\n\n\n/**\n * An object containing information about a spacer between two rows.\n * @extends {Row}\n * @struct\n * @alias Blockly.blockRendering.SpacerRow\n */\nclass SpacerRow extends Row {\n  /**\n   * @param {!ConstantProvider} constants The rendering\n   *   constants provider.\n   * @param {number} height The height of the spacer.\n   * @param {number} width The width of the spacer.\n   * @package\n   */\n  constructor(constants, height, width) {\n    super(constants);\n    this.type |= Types.SPACER | Types.BETWEEN_ROW_SPACER;\n\n    /** @type {number} */\n    this.width = width;\n\n    /** @type {number} */\n    this.height = height;\n\n    /** @type {boolean} */\n    this.followsStatement = false;\n\n    /** @type {boolean} */\n    this.precedesStatement = false;\n\n    /** @type {number} */\n    this.widthWithConnectedBlocks = 0;\n\n    /** @type {!Array.<!InRowSpacer>} */\n    this.elements = [new InRowSpacer(this.constants_, width)];\n  }\n\n  /**\n   * @override\n   */\n  measure() {\n    // NOP.  Width and height were set at creation.\n  }\n}\n\nexports.SpacerRow = SpacerRow;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Objects representing a square corner in a row of a rendered\n * block.\n */\n\n/**\n * Objects representing a square corner in a row of a rendered\n * block.\n * @class\n */\ngoog.module('Blockly.blockRendering.SquareCorner');\n\n/* eslint-disable-next-line no-unused-vars */\nconst {ConstantProvider} = goog.requireType('Blockly.blockRendering.ConstantProvider');\nconst {Measurable} = goog.require('Blockly.blockRendering.Measurable');\nconst {Types} = goog.require('Blockly.blockRendering.Types');\n\n\n/**\n * An object containing information about the space a square corner takes up\n * during rendering.\n * @extends {Measurable}\n * @struct\n * @alias Blockly.blockRendering.SquareCorner\n */\nclass SquareCorner extends Measurable {\n  /**\n   * @param {!ConstantProvider} constants The rendering\n   *   constants provider.\n   * @param {string=} opt_position The position of this corner.\n   * @package\n   */\n  constructor(constants, opt_position) {\n    super(constants);\n    this.type = ((!opt_position || opt_position === 'left') ?\n                     Types.LEFT_SQUARE_CORNER :\n                     Types.RIGHT_SQUARE_CORNER) |\n        Types.CORNER;\n    this.height = this.constants_.NO_PADDING;\n    this.width = this.constants_.NO_PADDING;\n  }\n}\n\nexports.SquareCorner = SquareCorner;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Object representing a top row on a rendered block.\n */\n\n/**\n * Object representing a top row on a rendered block.\n * @class\n */\ngoog.module('Blockly.blockRendering.TopRow');\n\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockSvg} = goog.requireType('Blockly.BlockSvg');\n/* eslint-disable-next-line no-unused-vars */\nconst {ConstantProvider} = goog.requireType('Blockly.blockRendering.ConstantProvider');\nconst {Hat} = goog.require('Blockly.blockRendering.Hat');\n/* eslint-disable-next-line no-unused-vars */\nconst {PreviousConnection} = goog.requireType('Blockly.blockRendering.PreviousConnection');\nconst {Row} = goog.require('Blockly.blockRendering.Row');\nconst {Types} = goog.require('Blockly.blockRendering.Types');\n\n\n/**\n * An object containing information about what elements are in the top row of a\n * block as well as sizing information for the top row.\n * Elements in a top row can consist of corners, hats, spacers, and previous\n * connections.\n * After this constructor is called, the row will contain all non-spacer\n * elements it needs.\n * @extends {Row}\n * @struct\n * @alias Blockly.blockRendering.TopRow\n */\nclass TopRow extends Row {\n  /**\n   * @param {!ConstantProvider} constants The rendering\n   *   constants provider.\n   * @package\n   */\n  constructor(constants) {\n    super(constants);\n\n    this.type |= Types.TOP_ROW;\n\n    /**\n     * The starting point for drawing the row, in the y direction.\n     * This allows us to draw hats and similar shapes that don't start at the\n     * origin. Must be non-negative (see #2820).\n     * @package\n     * @type {number}\n     */\n    this.capline = 0;\n\n    /**\n     * How much the row extends up above its capline.\n     * @type {number}\n     */\n    this.ascenderHeight = 0;\n\n    /**\n     * Whether the block has a previous connection.\n     * @package\n     * @type {boolean}\n     */\n    this.hasPreviousConnection = false;\n\n    /**\n     * The previous connection on the block, if any.\n     * @type {PreviousConnection}\n     */\n    this.connection = null;\n  }\n\n  /**\n   * Returns whether or not the top row has a left square corner.\n   * @param {!BlockSvg} block The block whose top row this represents.\n   * @return {boolean} Whether or not the top row has a left square corner.\n   */\n  hasLeftSquareCorner(block) {\n    const hasHat =\n        (block.hat ? block.hat === 'cap' : this.constants_.ADD_START_HATS) &&\n        !block.outputConnection && !block.previousConnection;\n    const prevBlock = block.getPreviousBlock();\n\n    return !!block.outputConnection || hasHat ||\n        (prevBlock ? prevBlock.getNextBlock() === block : false);\n  }\n\n  /**\n   * Returns whether or not the top row has a right square corner.\n   * @param {!BlockSvg} _block The block whose top row this represents.\n   * @return {boolean} Whether or not the top row has a right square corner.\n   */\n  hasRightSquareCorner(_block) {\n    return true;\n  }\n\n  /**\n   * @override\n   */\n  measure() {\n    let height = 0;\n    let width = 0;\n    let ascenderHeight = 0;\n    for (let i = 0; i < this.elements.length; i++) {\n      const elem = this.elements[i];\n      width += elem.width;\n      if (!(Types.isSpacer(elem))) {\n        if (Types.isHat(elem) && elem instanceof Hat) {\n          ascenderHeight = Math.max(ascenderHeight, elem.ascenderHeight);\n        } else {\n          height = Math.max(height, elem.height);\n        }\n      }\n    }\n    this.width = Math.max(this.minWidth, width);\n    this.height = Math.max(this.minHeight, height) + ascenderHeight;\n    this.ascenderHeight = ascenderHeight;\n    this.capline = this.ascenderHeight;\n    this.widthWithConnectedBlocks = this.width;\n  }\n\n  /**\n   * @override\n   */\n  startsWithElemSpacer() {\n    return false;\n  }\n\n  /**\n   * @override\n   */\n  endsWithElemSpacer() {\n    return false;\n  }\n}\n\nexports.TopRow = TopRow;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Methods for graphically rendering a block as SVG.\n */\n'use strict';\n\n/**\n * Methods for graphically rendering a block as SVG.\n * @class\n */\ngoog.module('Blockly.blockRendering.RenderInfo');\n\nconst {Align} = goog.require('Blockly.Input');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockSvg} = goog.requireType('Blockly.BlockSvg');\nconst {BottomRow} = goog.require('Blockly.blockRendering.BottomRow');\n/* eslint-disable-next-line no-unused-vars */\nconst {ConstantProvider} = goog.requireType('Blockly.blockRendering.ConstantProvider');\nconst {ExternalValueInput} = goog.require('Blockly.blockRendering.ExternalValueInput');\nconst {Field} = goog.require('Blockly.blockRendering.Field');\nconst {Hat} = goog.require('Blockly.blockRendering.Hat');\nconst {Icon} = goog.require('Blockly.blockRendering.Icon');\nconst {InRowSpacer} = goog.require('Blockly.blockRendering.InRowSpacer');\nconst {InlineInput} = goog.require('Blockly.blockRendering.InlineInput');\nconst {InputRow} = goog.require('Blockly.blockRendering.InputRow');\n/* eslint-disable-next-line no-unused-vars */\nconst {Input} = goog.requireType('Blockly.Input');\nconst {JaggedEdge} = goog.require('Blockly.blockRendering.JaggedEdge');\n/* eslint-disable-next-line no-unused-vars */\nconst {Measurable} = goog.requireType('Blockly.blockRendering.Measurable');\nconst {NextConnection} = goog.require('Blockly.blockRendering.NextConnection');\nconst {OutputConnection} = goog.require('Blockly.blockRendering.OutputConnection');\nconst {PreviousConnection} = goog.require('Blockly.blockRendering.PreviousConnection');\n/* eslint-disable-next-line no-unused-vars */\nconst {RenderedConnection} = goog.requireType('Blockly.RenderedConnection');\n/* eslint-disable-next-line no-unused-vars */\nconst {Renderer} = goog.requireType('Blockly.blockRendering.Renderer');\nconst {RoundCorner} = goog.require('Blockly.blockRendering.RoundCorner');\n/* eslint-disable-next-line no-unused-vars */\nconst {Row} = goog.requireType('Blockly.blockRendering.Row');\nconst {SpacerRow} = goog.require('Blockly.blockRendering.SpacerRow');\nconst {SquareCorner} = goog.require('Blockly.blockRendering.SquareCorner');\nconst {StatementInput} = goog.require('Blockly.blockRendering.StatementInput');\nconst {TopRow} = goog.require('Blockly.blockRendering.TopRow');\nconst {Types} = goog.require('Blockly.blockRendering.Types');\nconst {inputTypes} = goog.require('Blockly.inputTypes');\n\n\n/**\n * An object containing all sizing information needed to draw this block.\n *\n * This measure pass does not propagate changes to the block (although fields\n * may choose to rerender when getSize() is called).  However, calling it\n * repeatedly may be expensive.\n * @alias Blockly.blockRendering.RenderInfo\n */\nclass RenderInfo {\n  /**\n   * @param {!Renderer} renderer The renderer in use.\n   * @param {!BlockSvg} block The block to measure.\n   * @package\n   */\n  constructor(renderer, block) {\n    this.block_ = block;\n\n    /**\n     * The block renderer in use.\n     * @type {!Renderer}\n     * @protected\n     */\n    this.renderer_ = renderer;\n\n    /**\n     * The renderer's constant provider.\n     * @type {!ConstantProvider}\n     * @protected\n     */\n    this.constants_ = this.renderer_.getConstants();\n\n    /**\n     * A measurable representing the output connection if the block has one.\n     * Otherwise null.\n     * @type {OutputConnection}\n     */\n    this.outputConnection = !block.outputConnection ?\n        null :\n        new OutputConnection(\n            this.constants_,\n            /** @type {!RenderedConnection} */ (block.outputConnection));\n\n    /**\n     * Whether the block should be rendered as a single line, either because\n     * it's inline or because it has been collapsed.\n     * @type {boolean}\n     */\n    this.isInline = block.getInputsInline() && !block.isCollapsed();\n\n    /**\n     * Whether the block is collapsed.\n     * @type {boolean}\n     */\n    this.isCollapsed = block.isCollapsed();\n\n    /**\n     * Whether the block is an insertion marker.  Insertion markers are the same\n     * shape as normal blocks, but don't show fields.\n     * @type {boolean}\n     */\n    this.isInsertionMarker = block.isInsertionMarker();\n\n    /**\n     * True if the block should be rendered right-to-left.\n     * @type {boolean}\n     */\n    this.RTL = block.RTL;\n\n    /**\n     * The height of the rendered block, including child blocks.\n     * @type {number}\n     */\n    this.height = 0;\n\n    /**\n     * The width of the rendered block, including child blocks.\n     * @type {number}\n     */\n    this.widthWithChildren = 0;\n\n    /**\n     * The width of the rendered block, excluding child blocks.  This is the\n     * right edge of the block when rendered LTR.\n     * @type {number}\n     */\n    this.width = 0;\n\n    /**\n     *\n     * @type {number}\n     */\n    this.statementEdge = 0;\n\n    /**\n     * An array of Row objects containing sizing information.\n     * @type {!Array<!Row>}\n     */\n    this.rows = [];\n\n    /**\n     * An array of input rows on the block.\n     * @type {!Array<!InputRow>}\n     */\n    this.inputRows = [];\n\n    /**\n     * An array of measurable objects containing hidden icons.\n     * @type {!Array<!Icon>}\n     */\n    this.hiddenIcons = [];\n\n    /**\n     * An object with rendering information about the top row of the block.\n     * @type {!TopRow}\n     */\n    this.topRow = new TopRow(this.constants_);\n\n    /**\n     * An object with rendering information about the bottom row of the block.\n     * @type {!BottomRow}\n     */\n    this.bottomRow = new BottomRow(this.constants_);\n\n    // The position of the start point for drawing, relative to the block's\n    // location.\n    this.startX = 0;\n    this.startY = 0;\n  }\n\n  /**\n   * Get the block renderer in use.\n   * @return {!Renderer} The block renderer in use.\n   * @package\n   */\n  getRenderer() {\n    return this.renderer_;\n  }\n\n  /**\n   * Populate and return an object containing all sizing information needed to\n   * draw this block.\n   *\n   * This measure pass does not propagate changes to the block (although fields\n   * may choose to rerender when getSize() is called).  However, calling it\n   * repeatedly may be expensive.\n   *\n   * @package\n   */\n  measure() {\n    this.createRows_();\n    this.addElemSpacing_();\n    this.addRowSpacing_();\n    this.computeBounds_();\n    this.alignRowElements_();\n    this.finalize_();\n  }\n\n  /**\n   * Create rows of Measurable objects representing all renderable parts of the\n   * block.\n   * @protected\n   */\n  createRows_() {\n    this.populateTopRow_();\n    this.rows.push(this.topRow);\n    let activeRow = new InputRow(this.constants_);\n    this.inputRows.push(activeRow);\n\n    // Icons always go on the first row, before anything else.\n    const icons = this.block_.getIcons();\n    for (let i = 0, icon; (icon = icons[i]); i++) {\n      const iconInfo = new Icon(this.constants_, icon);\n      if (this.isCollapsed && icon.collapseHidden) {\n        this.hiddenIcons.push(iconInfo);\n      } else {\n        activeRow.elements.push(iconInfo);\n      }\n    }\n\n    let lastInput = null;\n    // Loop across all of the inputs on the block, creating objects for anything\n    // that needs to be rendered and breaking the block up into visual rows.\n    for (let i = 0, input; (input = this.block_.inputList[i]); i++) {\n      if (!input.isVisible()) {\n        continue;\n      }\n      if (this.shouldStartNewRow_(input, lastInput)) {\n        // Finish this row and create a new one.\n        this.rows.push(activeRow);\n        activeRow = new InputRow(this.constants_);\n        this.inputRows.push(activeRow);\n      }\n\n      // All of the fields in an input go on the same row.\n      for (let j = 0, field; (field = input.fieldRow[j]); j++) {\n        activeRow.elements.push(new Field(this.constants_, field, input));\n      }\n      this.addInput_(input, activeRow);\n      lastInput = input;\n    }\n\n    if (this.isCollapsed) {\n      activeRow.hasJaggedEdge = true;\n      activeRow.elements.push(new JaggedEdge(this.constants_));\n    }\n\n    if (activeRow.elements.length || activeRow.hasDummyInput) {\n      this.rows.push(activeRow);\n    }\n    this.populateBottomRow_();\n    this.rows.push(this.bottomRow);\n  }\n\n  /**\n   * Create all non-spacer elements that belong on the top row.\n   * @package\n   */\n  populateTopRow_() {\n    const hasPrevious = !!this.block_.previousConnection;\n    const hasHat = (this.block_.hat ? this.block_.hat === 'cap' :\n                                      this.constants_.ADD_START_HATS) &&\n        !this.outputConnection && !hasPrevious;\n\n    let cornerClass = this.topRow.hasLeftSquareCorner(this.block_) ?\n        SquareCorner :\n        RoundCorner;\n    this.topRow.elements.push(new cornerClass(this.constants_));\n\n    if (hasHat) {\n      const hat = new Hat(this.constants_);\n      this.topRow.elements.push(hat);\n      this.topRow.capline = hat.ascenderHeight;\n    } else if (hasPrevious) {\n      this.topRow.hasPreviousConnection = true;\n      this.topRow.connection = new PreviousConnection(\n          this.constants_,\n          /** @type {!RenderedConnection} */\n          (this.block_.previousConnection));\n      this.topRow.elements.push(this.topRow.connection);\n    }\n\n    const precedesStatement = this.block_.inputList.length &&\n        this.block_.inputList[0].type === inputTypes.STATEMENT;\n\n    // This is the minimum height for the row. If one of its elements has a\n    // greater height it will be overwritten in the compute pass.\n    if (precedesStatement && !this.block_.isCollapsed()) {\n      this.topRow.minHeight =\n          this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT;\n    } else {\n      this.topRow.minHeight = this.constants_.TOP_ROW_MIN_HEIGHT;\n    }\n\n    cornerClass = this.topRow.hasRightSquareCorner(this.block_) ? SquareCorner :\n                                                                  RoundCorner;\n    this.topRow.elements.push(new cornerClass(this.constants_, 'right'));\n  }\n\n  /**\n   * Create all non-spacer elements that belong on the bottom row.\n   * @package\n   */\n  populateBottomRow_() {\n    this.bottomRow.hasNextConnection = !!this.block_.nextConnection;\n\n    const followsStatement = this.block_.inputList.length &&\n        this.block_.inputList[this.block_.inputList.length - 1].type ===\n            inputTypes.STATEMENT;\n\n    // This is the minimum height for the row. If one of its elements has a\n    // greater height it will be overwritten in the compute pass.\n    if (followsStatement) {\n      this.bottomRow.minHeight =\n          this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT;\n    } else {\n      this.bottomRow.minHeight = this.constants_.BOTTOM_ROW_MIN_HEIGHT;\n    }\n\n    const leftSquareCorner = this.bottomRow.hasLeftSquareCorner(this.block_);\n\n    if (leftSquareCorner) {\n      this.bottomRow.elements.push(new SquareCorner(this.constants_));\n    } else {\n      this.bottomRow.elements.push(new RoundCorner(this.constants_));\n    }\n\n    if (this.bottomRow.hasNextConnection) {\n      this.bottomRow.connection = new NextConnection(\n          this.constants_,\n          /** @type {!RenderedConnection} */ (this.block_.nextConnection));\n      this.bottomRow.elements.push(this.bottomRow.connection);\n    }\n\n    const rightSquareCorner = this.bottomRow.hasRightSquareCorner(this.block_);\n\n    if (rightSquareCorner) {\n      this.bottomRow.elements.push(new SquareCorner(this.constants_, 'right'));\n    } else {\n      this.bottomRow.elements.push(new RoundCorner(this.constants_, 'right'));\n    }\n  }\n\n  /**\n   * Add an input element to the active row, if needed, and record the type of\n   * the input on the row.\n   * @param {!Input} input The input to record information about.\n   * @param {!Row} activeRow The row that is currently being\n   *     populated.\n   * @protected\n   */\n  addInput_(input, activeRow) {\n    // Non-dummy inputs have visual representations onscreen.\n    if (this.isInline && input.type === inputTypes.VALUE) {\n      activeRow.elements.push(new InlineInput(this.constants_, input));\n      activeRow.hasInlineInput = true;\n    } else if (input.type === inputTypes.STATEMENT) {\n      activeRow.elements.push(new StatementInput(this.constants_, input));\n      activeRow.hasStatement = true;\n    } else if (input.type === inputTypes.VALUE) {\n      activeRow.elements.push(new ExternalValueInput(this.constants_, input));\n      activeRow.hasExternalInput = true;\n    } else if (input.type === inputTypes.DUMMY) {\n      // Dummy inputs have no visual representation, but the information is\n      // still important.\n      activeRow.minHeight = Math.max(\n          activeRow.minHeight,\n          input.getSourceBlock() && input.getSourceBlock().isShadow() ?\n              this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT :\n              this.constants_.DUMMY_INPUT_MIN_HEIGHT);\n      activeRow.hasDummyInput = true;\n    }\n    if (activeRow.align === null) {\n      activeRow.align = input.align;\n    }\n  }\n\n  /**\n   * Decide whether to start a new row between the two Blockly.Inputs.\n   * @param {!Input} input The first input to consider\n   * @param {Input} lastInput The input that follows.\n   * @return {boolean} True if the next input should be rendered on a new row.\n   * @protected\n   */\n  shouldStartNewRow_(input, lastInput) {\n    // If this is the first input, just add to the existing row.\n    // That row is either empty or has some icons in it.\n    if (!lastInput) {\n      return false;\n    }\n    // A statement input or an input following one always gets a new row.\n    if (input.type === inputTypes.STATEMENT ||\n        lastInput.type === inputTypes.STATEMENT) {\n      return true;\n    }\n    // Value and dummy inputs get new row if inputs are not inlined.\n    if (input.type === inputTypes.VALUE || input.type === inputTypes.DUMMY) {\n      return !this.isInline;\n    }\n    return false;\n  }\n\n  /**\n   * Add horizontal spacing between and around elements within each row.\n   * @protected\n   */\n  addElemSpacing_() {\n    for (let i = 0, row; (row = this.rows[i]); i++) {\n      const oldElems = row.elements;\n      row.elements = [];\n      // No spacing needed before the corner on the top row or the bottom row.\n      if (row.startsWithElemSpacer()) {\n        // There's a spacer before the first element in the row.\n        row.elements.push(new InRowSpacer(\n            this.constants_, this.getInRowSpacing_(null, oldElems[0])));\n      }\n      if (!oldElems.length) {\n        continue;\n      }\n      for (let e = 0; e < oldElems.length - 1; e++) {\n        row.elements.push(oldElems[e]);\n        const spacing = this.getInRowSpacing_(oldElems[e], oldElems[e + 1]);\n        row.elements.push(new InRowSpacer(this.constants_, spacing));\n      }\n      row.elements.push(oldElems[oldElems.length - 1]);\n      if (row.endsWithElemSpacer()) {\n        // There's a spacer after the last element in the row.\n        row.elements.push(new InRowSpacer(\n            this.constants_,\n            this.getInRowSpacing_(oldElems[oldElems.length - 1], null)));\n      }\n    }\n  }\n\n  /**\n   * Calculate the width of a spacer element in a row based on the previous and\n   * next elements in that row.  For instance, extra padding is added between\n   * two editable fields.\n   * @param {Measurable} prev The element before the\n   *     spacer.\n   * @param {Measurable} next The element after the spacer.\n   * @return {number} The size of the spacing between the two elements.\n   * @protected\n   */\n  getInRowSpacing_(prev, next) {\n    if (!prev) {\n      // Statement input padding.\n      if (next && Types.isStatementInput(next)) {\n        return this.constants_.STATEMENT_INPUT_PADDING_LEFT;\n      }\n    }\n    // Between inputs and the end of the row.\n    if (prev && Types.isInput(prev) && !next) {\n      if (Types.isExternalInput(prev)) {\n        return this.constants_.NO_PADDING;\n      } else if (Types.isInlineInput(prev)) {\n        return this.constants_.LARGE_PADDING;\n      } else if (Types.isStatementInput(prev)) {\n        return this.constants_.NO_PADDING;\n      }\n    }\n\n    // Spacing between a square corner and a previous or next connection\n    if (prev && Types.isLeftSquareCorner(prev) && next) {\n      if (Types.isPreviousConnection(next) || Types.isNextConnection(next)) {\n        return next.notchOffset;\n      }\n    }\n\n    // Spacing between a rounded corner and a previous or next connection.\n    if (prev && Types.isLeftRoundedCorner(prev) && next) {\n      if (Types.isPreviousConnection(next) || Types.isNextConnection(next)) {\n        return next.notchOffset - this.constants_.CORNER_RADIUS;\n      }\n    }\n\n    return this.constants_.MEDIUM_PADDING;\n  }\n\n  /**\n   * Figure out where the right edge of the block and right edge of statement\n   * inputs should be placed.\n   * @protected\n   */\n  computeBounds_() {\n    let widestStatementRowFields = 0;\n    let blockWidth = 0;\n    let widestRowWithConnectedBlocks = 0;\n    for (let i = 0, row; (row = this.rows[i]); i++) {\n      row.measure();\n      blockWidth = Math.max(blockWidth, row.width);\n      if (row.hasStatement) {\n        const statementInput = row.getLastInput();\n        const innerWidth = row.width - statementInput.width;\n        widestStatementRowFields =\n            Math.max(widestStatementRowFields, innerWidth);\n      }\n      widestRowWithConnectedBlocks =\n          Math.max(widestRowWithConnectedBlocks, row.widthWithConnectedBlocks);\n    }\n\n    this.statementEdge = widestStatementRowFields;\n    this.width = blockWidth;\n\n    for (let i = 0, row; (row = this.rows[i]); i++) {\n      if (row.hasStatement) {\n        row.statementEdge = this.statementEdge;\n      }\n    }\n\n    this.widthWithChildren = Math.max(blockWidth, widestRowWithConnectedBlocks);\n\n    if (this.outputConnection) {\n      this.startX = this.outputConnection.width;\n      this.width += this.outputConnection.width;\n      this.widthWithChildren += this.outputConnection.width;\n    }\n  }\n\n  /**\n   * Extra spacing may be necessary to make sure that the right sides of all\n   * rows line up.  This can only be calculated after a first pass to calculate\n   * the sizes of all rows.\n   * @protected\n   */\n  alignRowElements_() {\n    for (let i = 0, row; (row = this.rows[i]); i++) {\n      if (row.hasStatement) {\n        this.alignStatementRow_(\n            /** @type {!InputRow} */ (row));\n      } else {\n        const currentWidth = row.width;\n        const desiredWidth = this.getDesiredRowWidth_(row);\n        const missingSpace = desiredWidth - currentWidth;\n        if (missingSpace > 0) {\n          this.addAlignmentPadding_(row, missingSpace);\n        }\n        if (Types.isTopOrBottomRow(row)) {\n          row.widthWithConnectedBlocks = row.width;\n        }\n      }\n    }\n  }\n\n  /**\n   * Calculate the desired width of an input row.\n   * @param {!Row} _row The input row.\n   * @return {number} The desired width of the input row.\n   * @protected\n   */\n  getDesiredRowWidth_(_row) {\n    return this.width - this.startX;\n  }\n\n  /**\n   * Modify the given row to add the given amount of padding around its fields.\n   * The exact location of the padding is based on the alignment property of the\n   * last input in the field.\n   * @param {!Row} row The row to add padding to.\n   * @param {number} missingSpace How much padding to add.\n   * @protected\n   */\n  addAlignmentPadding_(row, missingSpace) {\n    const firstSpacer = row.getFirstSpacer();\n    const lastSpacer = row.getLastSpacer();\n    if (row.hasExternalInput || row.hasStatement) {\n      row.widthWithConnectedBlocks += missingSpace;\n    }\n\n    // Decide where the extra padding goes.\n    if (row.align === Align.LEFT) {\n      // Add padding to the end of the row.\n      lastSpacer.width += missingSpace;\n    } else if (row.align === Align.CENTRE) {\n      // Split the padding between the beginning and end of the row.\n      firstSpacer.width += missingSpace / 2;\n      lastSpacer.width += missingSpace / 2;\n    } else if (row.align === Align.RIGHT) {\n      // Add padding at the beginning of the row.\n      firstSpacer.width += missingSpace;\n    } else {\n      // Default to left-aligning.\n      lastSpacer.width += missingSpace;\n    }\n    row.width += missingSpace;\n  }\n\n  /**\n   * Align the elements of a statement row based on computed bounds.\n   * Unlike other types of rows, statement rows add space in multiple places.\n   * @param {!InputRow} row The statement row to resize.\n   * @protected\n   */\n  alignStatementRow_(row) {\n    const statementInput = row.getLastInput();\n    let currentWidth = row.width - statementInput.width;\n    let desiredWidth = this.statementEdge;\n    // Add padding before the statement input.\n    const missingSpace = desiredWidth - currentWidth;\n    if (missingSpace > 0) {\n      this.addAlignmentPadding_(row, missingSpace);\n    }\n    // Also widen the statement input to reach to the right side of the\n    // block. Note that this does not add padding.\n    currentWidth = row.width;\n    desiredWidth = this.getDesiredRowWidth_(row);\n    statementInput.width += (desiredWidth - currentWidth);\n    statementInput.height = Math.max(statementInput.height, row.height);\n    row.width += (desiredWidth - currentWidth);\n    row.widthWithConnectedBlocks =\n        Math.max(row.width, this.statementEdge + row.connectedBlockWidths);\n  }\n\n  /**\n   * Add spacers between rows and set their sizes.\n   * @protected\n   */\n  addRowSpacing_() {\n    const oldRows = this.rows;\n    this.rows = [];\n\n    for (let r = 0; r < oldRows.length; r++) {\n      this.rows.push(oldRows[r]);\n      if (r !== oldRows.length - 1) {\n        this.rows.push(this.makeSpacerRow_(oldRows[r], oldRows[r + 1]));\n      }\n    }\n  }\n\n  /**\n   * Create a spacer row to go between prev and next, and set its size.\n   * @param {!Row} prev The previous row.\n   * @param {!Row} next The next row.\n   * @return {!SpacerRow} The newly created spacer row.\n   * @protected\n   */\n  makeSpacerRow_(prev, next) {\n    const height = this.getSpacerRowHeight_(prev, next);\n    const width = this.getSpacerRowWidth_(prev, next);\n    const spacer = new SpacerRow(this.constants_, height, width);\n    if (prev.hasStatement) {\n      spacer.followsStatement = true;\n    }\n    if (next.hasStatement) {\n      spacer.precedesStatement = true;\n    }\n    return spacer;\n  }\n\n  /**\n   * Calculate the width of a spacer row.\n   * @param {!Row} _prev The row before the spacer.\n   * @param {!Row} _next The row after the spacer.\n   * @return {number} The desired width of the spacer row between these two\n   *     rows.\n   * @protected\n   */\n  getSpacerRowWidth_(_prev, _next) {\n    return this.width - this.startX;\n  }\n\n  /**\n   * Calculate the height of a spacer row.\n   * @param {!Row} _prev The row before the spacer.\n   * @param {!Row} _next The row after the spacer.\n   * @return {number} The desired height of the spacer row between these two\n   *     rows.\n   * @protected\n   */\n  getSpacerRowHeight_(_prev, _next) {\n    return this.constants_.MEDIUM_PADDING;\n  }\n\n  /**\n   * Calculate the centerline of an element in a rendered row.\n   * This base implementation puts the centerline at the middle of the row\n   * vertically, with no special cases.  You will likely need extra logic to\n   * handle (at minimum) top and bottom rows.\n   * @param {!Row} row The row containing the element.\n   * @param {!Measurable} elem The element to place.\n   * @return {number} The desired centerline of the given element, as an offset\n   *     from the top left of the block.\n   * @protected\n   */\n  getElemCenterline_(row, elem) {\n    if (Types.isSpacer(elem)) {\n      return row.yPos + elem.height / 2;\n    }\n    if (Types.isBottomRow(row)) {\n      const bottomRow = /** @type {!BottomRow} */ (row);\n      const baseline =\n          bottomRow.yPos + bottomRow.height - bottomRow.descenderHeight;\n      if (Types.isNextConnection(elem)) {\n        return baseline + elem.height / 2;\n      }\n      return baseline - elem.height / 2;\n    }\n    if (Types.isTopRow(row)) {\n      const topRow = /** @type {!TopRow} */ (row);\n      if (Types.isHat(elem)) {\n        return topRow.capline - elem.height / 2;\n      }\n      return topRow.capline + elem.height / 2;\n    }\n    return row.yPos + row.height / 2;\n  }\n\n  /**\n   * Record final position information on elements on the given row, for use in\n   * drawing.  At minimum this records xPos and centerline on each element.\n   * @param {!Row} row The row containing the elements.\n   * @protected\n   */\n  recordElemPositions_(row) {\n    let xCursor = row.xPos;\n    for (let j = 0, elem; (elem = row.elements[j]); j++) {\n      // Now that row heights are finalized, make spacers use the row height.\n      if (Types.isSpacer(elem)) {\n        elem.height = row.height;\n      }\n      elem.xPos = xCursor;\n      elem.centerline = this.getElemCenterline_(row, elem);\n      xCursor += elem.width;\n    }\n  }\n\n  /**\n   * Make any final changes to the rendering information object.  In particular,\n   * store the y position of each row, and record the height of the full block.\n   * @protected\n   */\n  finalize_() {\n    // Performance note: this could be combined with the draw pass, if the time\n    // that this takes is excessive.  But it shouldn't be, because it only\n    // accesses and sets properties that already exist on the objects.\n    let widestRowWithConnectedBlocks = 0;\n    let yCursor = 0;\n    for (let i = 0, row; (row = this.rows[i]); i++) {\n      row.yPos = yCursor;\n      row.xPos = this.startX;\n      yCursor += row.height;\n\n      widestRowWithConnectedBlocks =\n          Math.max(widestRowWithConnectedBlocks, row.widthWithConnectedBlocks);\n      this.recordElemPositions_(row);\n    }\n    if (this.outputConnection && this.block_.nextConnection &&\n        this.block_.nextConnection.isConnected()) {\n      // Include width of connected block in value to stack width measurement.\n      widestRowWithConnectedBlocks = Math.max(\n          widestRowWithConnectedBlocks,\n          this.block_.nextConnection.targetBlock().getHeightWidth().width);\n    }\n\n    this.widthWithChildren = widestRowWithConnectedBlocks + this.startX;\n\n    this.height = yCursor;\n    this.startY = this.topRow.capline;\n    this.bottomRow.baseline = yCursor - this.bottomRow.descenderHeight;\n  }\n}\n\nexports.RenderInfo = RenderInfo;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Base renderer.\n */\n'use strict';\n\n/**\n * Base renderer.\n * @class\n */\ngoog.module('Blockly.blockRendering.Renderer');\n\nconst debug = goog.require('Blockly.blockRendering.debug');\nconst object = goog.require('Blockly.utils.object');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockSvg} = goog.requireType('Blockly.BlockSvg');\n/* eslint-disable-next-line no-unused-vars */\nconst {Block} = goog.requireType('Blockly.Block');\nconst {ConnectionType} = goog.require('Blockly.ConnectionType');\nconst {Connection} = goog.require('Blockly.Connection');\nconst {ConstantProvider} = goog.require('Blockly.blockRendering.ConstantProvider');\n/* eslint-disable-next-line no-unused-vars */\nconst {Debug} = goog.requireType('Blockly.blockRendering.Debug');\nconst {Drawer} = goog.require('Blockly.blockRendering.Drawer');\n/* eslint-disable-next-line no-unused-vars */\nconst {IPathObject} = goog.requireType('Blockly.blockRendering.IPathObject');\n/* eslint-disable-next-line no-unused-vars */\nconst {IRegistrable} = goog.require('Blockly.IRegistrable');\nconst {InsertionMarkerManager} = goog.require('Blockly.InsertionMarkerManager');\nconst {MarkerSvg} = goog.require('Blockly.blockRendering.MarkerSvg');\n/* eslint-disable-next-line no-unused-vars */\nconst {Marker} = goog.requireType('Blockly.Marker');\nconst {PathObject} = goog.require('Blockly.blockRendering.PathObject');\nconst {RenderInfo} = goog.require('Blockly.blockRendering.RenderInfo');\n/* eslint-disable-next-line no-unused-vars */\nconst {RenderedConnection} = goog.requireType('Blockly.RenderedConnection');\n/* eslint-disable-next-line no-unused-vars */\nconst {Theme} = goog.requireType('Blockly.Theme');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceSvg} = goog.requireType('Blockly.WorkspaceSvg');\n\n\n/**\n * The base class for a block renderer.\n * @implements {IRegistrable}\n * @alias Blockly.blockRendering.Renderer\n */\nclass Renderer {\n  /**\n   * @param {string} name The renderer name.\n   * @package\n   */\n  constructor(name) {\n    /**\n     * The renderer name.\n     * @type {string}\n     * @package\n     */\n    this.name = name;\n\n    /**\n     * The renderer's constant provider.\n     * @type {ConstantProvider}\n     * @private\n     */\n    this.constants_ = null;\n\n    /**\n     * Rendering constant overrides, passed in through options.\n     * @type {?Object}\n     * @package\n     */\n    this.overrides = null;\n  }\n\n  /**\n   * Gets the class name that identifies this renderer.\n   * @return {string} The CSS class name.\n   * @package\n   */\n  getClassName() {\n    return this.name + '-renderer';\n  }\n\n  /**\n   * Initialize the renderer.\n   * @param {!Theme} theme The workspace theme object.\n   * @param {Object=} opt_rendererOverrides Rendering constant overrides.\n   * @package\n   */\n  init(theme, opt_rendererOverrides) {\n    this.constants_ = this.makeConstants_();\n    if (opt_rendererOverrides) {\n      this.overrides = opt_rendererOverrides;\n      object.mixin(this.constants_, opt_rendererOverrides);\n    }\n    this.constants_.setTheme(theme);\n    this.constants_.init();\n  }\n\n  /**\n   * Create any DOM elements that this renderer needs.\n   * @param {!SVGElement} svg The root of the workspace's SVG.\n   * @param {!Theme} theme The workspace theme object.\n   * @package\n   */\n  createDom(svg, theme) {\n    this.constants_.createDom(\n        svg, this.name + '-' + theme.name,\n        '.' + this.getClassName() + '.' + theme.getClassName());\n  }\n\n  /**\n   * Refresh the renderer after a theme change.\n   * @param {!SVGElement} svg The root of the workspace's SVG.\n   * @param {!Theme} theme The workspace theme object.\n   * @package\n   */\n  refreshDom(svg, theme) {\n    const previousConstants = this.getConstants();\n    previousConstants.dispose();\n    this.constants_ = this.makeConstants_();\n    if (this.overrides) {\n      object.mixin(this.constants_, this.overrides);\n    }\n    // Ensure the constant provider's random identifier does not change.\n    this.constants_.randomIdentifier = previousConstants.randomIdentifier;\n    this.constants_.setTheme(theme);\n    this.constants_.init();\n    this.createDom(svg, theme);\n  }\n\n  /**\n   * Dispose of this renderer.\n   * Delete all DOM elements that this renderer and its constants created.\n   * @package\n   */\n  dispose() {\n    if (this.constants_) {\n      this.constants_.dispose();\n    }\n  }\n\n  /**\n   * Create a new instance of the renderer's constant provider.\n   * @return {!ConstantProvider} The constant provider.\n   * @protected\n   */\n  makeConstants_() {\n    return new ConstantProvider();\n  }\n\n  /**\n   * Create a new instance of the renderer's render info object.\n   * @param {!BlockSvg} block The block to measure.\n   * @return {!RenderInfo} The render info object.\n   * @protected\n   */\n  makeRenderInfo_(block) {\n    return new RenderInfo(this, block);\n  }\n\n  /**\n   * Create a new instance of the renderer's drawer.\n   * @param {!BlockSvg} block The block to render.\n   * @param {!RenderInfo} info An object containing all\n   *   information needed to render this block.\n   * @return {!Drawer} The drawer.\n   * @protected\n   */\n  makeDrawer_(block, info) {\n    return new Drawer(block, info);\n  }\n\n  /**\n   * Create a new instance of the renderer's debugger.\n   * @return {!Debug} The renderer debugger.\n   * @suppress {strictModuleDepCheck} Debug renderer only included in\n   * playground.\n   * @protected\n   */\n  makeDebugger_() {\n    const {Debug} = goog.module.get('Blockly.blockRendering.Debug');\n    if (!Debug) {\n      throw Error('Missing require for Blockly.blockRendering.Debug');\n    }\n    return new Debug(this.getConstants());\n  }\n\n  /**\n   * Create a new instance of the renderer's marker drawer.\n   * @param {!WorkspaceSvg} workspace The workspace the marker belongs to.\n   * @param {!Marker} marker The marker.\n   * @return {!MarkerSvg} The object in charge of drawing\n   *     the marker.\n   * @package\n   */\n  makeMarkerDrawer(workspace, marker) {\n    return new MarkerSvg(workspace, this.getConstants(), marker);\n  }\n\n  /**\n   * Create a new instance of a renderer path object.\n   * @param {!SVGElement} root The root SVG element.\n   * @param {!Theme.BlockStyle} style The style object to use for\n   *     colouring.\n   * @return {!IPathObject} The renderer path object.\n   * @package\n   */\n  makePathObject(root, style) {\n    return new PathObject(\n        root, style, /** @type {!ConstantProvider} */ (this.constants_));\n  }\n\n  /**\n   * Get the current renderer's constant provider.  We assume that when this is\n   * called, the renderer has already been initialized.\n   * @return {!ConstantProvider} The constant provider.\n   * @package\n   */\n  getConstants() {\n    return /** @type {!ConstantProvider} */ (this.constants_);\n  }\n\n  /**\n   * Determine whether or not to highlight a connection.\n   * @param {Connection} _conn The connection to determine whether or not\n   *     to highlight.\n   * @return {boolean} True if we should highlight the connection.\n   * @package\n   */\n  shouldHighlightConnection(_conn) {\n    return true;\n  }\n\n  /**\n   * Checks if an orphaned block can connect to the \"end\" of the topBlock's\n   * block-clump. If the clump is a row the end is the last input. If the clump\n   * is a stack, the end is the last next connection. If the clump is neither,\n   * then this returns false.\n   * @param {!BlockSvg} topBlock The top block of the block clump we want to try\n   *     and connect to.\n   * @param {!BlockSvg} orphanBlock The orphan block that wants to find\n   *     a home.\n   * @param {number} localType The type of the connection being dragged.\n   * @return {boolean} Whether there is a home for the orphan or not.\n   * @package\n   */\n  orphanCanConnectAtEnd(topBlock, orphanBlock, localType) {\n    const orphanConnection =\n        (localType === ConnectionType.OUTPUT_VALUE ?\n             orphanBlock.outputConnection :\n             orphanBlock.previousConnection);\n    return !!Connection.getConnectionForOrphanedConnection(\n        /** @type {!Block} **/ (topBlock),\n        /** @type {!Connection} **/ (orphanConnection));\n  }\n\n  /**\n   * Chooses a connection preview method based on the available connection, the\n   * current dragged connection, and the block being dragged.\n   * @param {!RenderedConnection} closest The available connection.\n   * @param {!RenderedConnection} local The connection currently being\n   *     dragged.\n   * @param {!BlockSvg} topBlock The block currently being dragged.\n   * @return {!InsertionMarkerManager.PREVIEW_TYPE} The preview type\n   *     to display.\n   * @package\n   */\n  getConnectionPreviewMethod(closest, local, topBlock) {\n    if (local.type === ConnectionType.OUTPUT_VALUE ||\n        local.type === ConnectionType.PREVIOUS_STATEMENT) {\n      if (!closest.isConnected() ||\n          this.orphanCanConnectAtEnd(\n              topBlock,\n              /** @type {!BlockSvg} */ (closest.targetBlock()), local.type)) {\n        return InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER;\n      }\n      return InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE;\n    }\n\n    return InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER;\n  }\n\n  /**\n   * Render the block.\n   * @param {!BlockSvg} block The block to render.\n   * @package\n   */\n  render(block) {\n    if (debug.isDebuggerEnabled() && !block.renderingDebugger) {\n      block.renderingDebugger = this.makeDebugger_();\n    }\n    const info = this.makeRenderInfo_(block);\n    info.measure();\n    this.makeDrawer_(block, info).draw();\n  }\n}\n\nexports.Renderer = Renderer;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Namespace for block rendering functionality.\n */\n'use strict';\n\n/**\n * Namespace for block rendering functionality.\n * @namespace Blockly.blockRendering\n */\ngoog.module('Blockly.blockRendering');\n\nconst debug = goog.require('Blockly.blockRendering.debug');\nconst deprecation = goog.require('Blockly.utils.deprecation');\nconst registry = goog.require('Blockly.registry');\nconst {BottomRow} = goog.require('Blockly.blockRendering.BottomRow');\nconst {Connection} = goog.require('Blockly.blockRendering.Connection');\nconst {ConstantProvider} = goog.require('Blockly.blockRendering.ConstantProvider');\nconst {Debug} = goog.require('Blockly.blockRendering.Debug');\nconst {Drawer} = goog.require('Blockly.blockRendering.Drawer');\nconst {ExternalValueInput} = goog.require('Blockly.blockRendering.ExternalValueInput');\nconst {Field} = goog.require('Blockly.blockRendering.Field');\nconst {Hat} = goog.require('Blockly.blockRendering.Hat');\nconst {IPathObject} = goog.require('Blockly.blockRendering.IPathObject');\nconst {Icon} = goog.require('Blockly.blockRendering.Icon');\nconst {InRowSpacer} = goog.require('Blockly.blockRendering.InRowSpacer');\nconst {InlineInput} = goog.require('Blockly.blockRendering.InlineInput');\nconst {InputConnection} = goog.require('Blockly.blockRendering.InputConnection');\nconst {InputRow} = goog.require('Blockly.blockRendering.InputRow');\nconst {JaggedEdge} = goog.require('Blockly.blockRendering.JaggedEdge');\nconst {MarkerSvg} = goog.require('Blockly.blockRendering.MarkerSvg');\nconst {Measurable} = goog.require('Blockly.blockRendering.Measurable');\nconst {NextConnection} = goog.require('Blockly.blockRendering.NextConnection');\nconst {OutputConnection} = goog.require('Blockly.blockRendering.OutputConnection');\nconst {PathObject} = goog.require('Blockly.blockRendering.PathObject');\nconst {PreviousConnection} = goog.require('Blockly.blockRendering.PreviousConnection');\nconst {RenderInfo} = goog.require('Blockly.blockRendering.RenderInfo');\nconst {Renderer} = goog.require('Blockly.blockRendering.Renderer');\nconst {RoundCorner} = goog.require('Blockly.blockRendering.RoundCorner');\nconst {Row} = goog.require('Blockly.blockRendering.Row');\nconst {SpacerRow} = goog.require('Blockly.blockRendering.SpacerRow');\nconst {SquareCorner} = goog.require('Blockly.blockRendering.SquareCorner');\nconst {StatementInput} = goog.require('Blockly.blockRendering.StatementInput');\n/* eslint-disable-next-line no-unused-vars */\nconst {Theme} = goog.requireType('Blockly.Theme');\nconst {TopRow} = goog.require('Blockly.blockRendering.TopRow');\nconst {Types} = goog.require('Blockly.blockRendering.Types');\n\n/**\n * Returns whether the debugger is turned on.\n * @return {boolean} Whether the debugger is turned on.\n * @alias Blockly.blockRendering.isDebuggerEnabled\n * @package\n * @deprecated\n */\nconst isDebuggerEnabled = function() {\n  deprecation.warn(\n      'Blockly.blockRendering.isDebuggerEnabled()', 'September 2021',\n      'September 2022',\n      'the debug renderer in @blockly/dev-tools (See https://www.npmjs.com/package/@blockly/dev-tools.)');\n  return debug.isDebuggerEnabled();\n};\nexports.isDebuggerEnabled = isDebuggerEnabled;\n\n/**\n * Registers a new renderer.\n * @param {string} name The name of the renderer.\n * @param {!Function} rendererClass The new renderer class\n *     to register.\n * @throws {Error} if a renderer with the same name has already been registered.\n */\nconst register = function(name, rendererClass) {\n  registry.register(registry.Type.RENDERER, name, rendererClass);\n};\nexports.register = register;\n\n/**\n * Unregisters the renderer registered with the given name.\n * @param {string} name The name of the renderer.\n * @alias Blockly.blockRendering.unregister\n */\nconst unregister = function(name) {\n  registry.unregister(registry.Type.RENDERER, name);\n};\nexports.unregister = unregister;\n\n/**\n * Turn on the blocks debugger.\n * @package\n * @alias Blockly.blockRendering.startDebugger\n * @deprecated\n */\nconst startDebugger = function() {\n  deprecation.warn(\n      'Blockly.blockRendering.startDebugger()', 'September 2021',\n      'September 2022',\n      'the debug renderer in @blockly/dev-tools (See https://www.npmjs.com/package/@blockly/dev-tools.)');\n  debug.startDebugger();\n};\nexports.startDebugger = startDebugger;\n\n/**\n * Turn off the blocks debugger.\n * @package\n * @alias Blockly.blockRendering.stopDebugger\n * @deprecated\n */\nconst stopDebugger = function() {\n  deprecation.warn(\n      'Blockly.blockRendering.stopDebugger()', 'September 2021',\n      'September 2022',\n      'the debug renderer in @blockly/dev-tools (See https://www.npmjs.com/package/@blockly/dev-tools.)');\n  debug.stopDebugger();\n};\nexports.stopDebugger = stopDebugger;\n\n/**\n * Initialize anything needed for rendering (constants, etc).\n * @param {!string} name Name of the renderer to initialize.\n * @param {!Theme} theme The workspace theme object.\n * @param {Object=} opt_rendererOverrides Rendering constant overrides.\n * @return {!Renderer} The new instance of a renderer.\n *     Already initialized.\n * @package\n * @alias Blockly.blockRendering.init\n */\nconst init = function(name, theme, opt_rendererOverrides) {\n  const rendererClass = registry.getClass(registry.Type.RENDERER, name);\n  const renderer = new rendererClass(name);\n  renderer.init(theme, opt_rendererOverrides);\n  return renderer;\n};\nexports.init = init;\n\nexports.BottomRow = BottomRow;\nexports.Connection = Connection;\nexports.ConstantProvider = ConstantProvider;\nexports.Debug = Debug;\nexports.Drawer = Drawer;\nexports.ExternalValueInput = ExternalValueInput;\nexports.Field = Field;\nexports.Hat = Hat;\nexports.Icon = Icon;\nexports.InRowSpacer = InRowSpacer;\nexports.InlineInput = InlineInput;\nexports.InputConnection = InputConnection;\nexports.InputRow = InputRow;\nexports.IPathObject = IPathObject;\nexports.JaggedEdge = JaggedEdge;\nexports.MarkerSvg = MarkerSvg;\nexports.Measurable = Measurable;\nexports.NextConnection = NextConnection;\nexports.OutputConnection = OutputConnection;\nexports.PathObject = PathObject;\nexports.PreviousConnection = PreviousConnection;\nexports.Renderer = Renderer;\nexports.RenderInfo = RenderInfo;\nexports.RoundCorner = RoundCorner;\nexports.Row = Row;\nexports.SpacerRow = SpacerRow;\nexports.SquareCorner = SquareCorner;\nexports.StatementInput = StatementInput;\nexports.TopRow = TopRow;\nexports.Types = Types;\nexports.debug = debug;\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Dropdown input field.  Used for editable titles and variables.\n * In the interests of a consistent UI, the toolbox shares some functions and\n * properties with the context menu.\n */\n'use strict';\n\n/**\n * Dropdown input field.  Used for editable titles and variables.\n * In the interests of a consistent UI, the toolbox shares some functions and\n * properties with the context menu.\n * @class\n */\ngoog.module('Blockly.FieldDropdown');\n\nconst aria = goog.require('Blockly.utils.aria');\nconst dom = goog.require('Blockly.utils.dom');\nconst dropDownDiv = goog.require('Blockly.dropDownDiv');\nconst fieldRegistry = goog.require('Blockly.fieldRegistry');\nconst parsing = goog.require('Blockly.utils.parsing');\nconst userAgent = goog.require('Blockly.utils.userAgent');\nconst utilsString = goog.require('Blockly.utils.string');\nconst {Coordinate} = goog.require('Blockly.utils.Coordinate');\nconst {Field} = goog.require('Blockly.Field');\nconst {MenuItem} = goog.require('Blockly.MenuItem');\nconst {Menu} = goog.require('Blockly.Menu');\n/* eslint-disable-next-line no-unused-vars */\nconst {Sentinel} = goog.requireType('Blockly.utils.Sentinel');\nconst {Svg} = goog.require('Blockly.utils.Svg');\n\n\n/**\n * Class for an editable dropdown field.\n * @extends {Field}\n * @alias Blockly.FieldDropdown\n */\nclass FieldDropdown extends Field {\n  /**\n   * @param {(!Array<!Array>|!Function|!Sentinel)} menuGenerator\n   *     A non-empty array of options for a dropdown list, or a function which\n   *     generates these options.\n   *     Also accepts Field.SKIP_SETUP if you wish to skip setup (only used by\n   *     subclasses that want to handle configuration and setting the field\n   *     value after their own constructors have run).\n   * @param {Function=} opt_validator A function that is called to validate\n   *     changes to the field's value. Takes in a language-neutral dropdown\n   *     option & returns a validated language-neutral dropdown option, or null\n   *     to abort the change.\n   * @param {Object=} opt_config A map of options used to configure the field.\n   *     See the [field creation documentation]{@link\n   *     https://developers.google.com/blockly/guides/create-custom-blocks/fields/built-in-fields/dropdown#creation}\n   *     for a list of properties this parameter supports.\n   * @throws {TypeError} If `menuGenerator` options are incorrectly structured.\n   */\n  constructor(menuGenerator, opt_validator, opt_config) {\n    super(Field.SKIP_SETUP);\n\n    /**\n     * A reference to the currently selected menu item.\n     * @type {?MenuItem}\n     * @private\n     */\n    this.selectedMenuItem_ = null;\n\n    /**\n     * The dropdown menu.\n     * @type {?Menu}\n     * @protected\n     */\n    this.menu_ = null;\n\n    /**\n     * SVG image element if currently selected option is an image, or null.\n     * @type {?SVGImageElement}\n     * @private\n     */\n    this.imageElement_ = null;\n\n    /**\n     * Tspan based arrow element.\n     * @type {?SVGTSpanElement}\n     * @private\n     */\n    this.arrow_ = null;\n\n    /**\n     * SVG based arrow element.\n     * @type {?SVGElement}\n     * @private\n     */\n    this.svgArrow_ = null;\n\n    /**\n     * Serializable fields are saved by the serializer, non-serializable fields\n     * are not. Editable fields should also be serializable.\n     * @type {boolean}\n     */\n    this.SERIALIZABLE = true;\n\n    /**\n     * Mouse cursor style when over the hotspot that initiates the editor.\n     * @type {string}\n     */\n    this.CURSOR = 'default';\n\n\n    // If we pass SKIP_SETUP, don't do *anything* with the menu generator.\n    if (menuGenerator === Field.SKIP_SETUP) return;\n\n    if (Array.isArray(menuGenerator)) {\n      validateOptions(menuGenerator);\n    }\n\n    /**\n     * An array of options for a dropdown list,\n     * or a function which generates these options.\n     * @type {(!Array<!Array>|!function(this:FieldDropdown): !Array<!Array>)}\n     * @protected\n     */\n    this.menuGenerator_ =\n        /**\n         * @type {(!Array<!Array>|\n         *    !function(this:FieldDropdown):!Array<!Array>)}\n         */\n        (menuGenerator);\n\n    /**\n     * A cache of the most recently generated options.\n     * @type {Array<!Array<string>>}\n     * @private\n     */\n    this.generatedOptions_ = null;\n\n    /**\n     * The prefix field label, of common words set after options are trimmed.\n     * @type {?string}\n     * @package\n     */\n    this.prefixField = null;\n\n    /**\n     * The suffix field label, of common words set after options are trimmed.\n     * @type {?string}\n     * @package\n     */\n    this.suffixField = null;\n\n    this.trimOptions_();\n\n    /**\n     * The currently selected option. The field is initialized with the\n     * first option selected.\n     * @type {!Array<string|!ImageProperties>}\n     * @private\n     */\n    this.selectedOption_ = this.getOptions(false)[0];\n\n    if (opt_config) this.configure_(opt_config);\n    this.setValue(this.selectedOption_[1]);\n    if (opt_validator) this.setValidator(opt_validator);\n  }\n\n  /**\n   * Sets the field's value based on the given XML element. Should only be\n   * called by Blockly.Xml.\n   * @param {!Element} fieldElement The element containing info about the\n   *    field's state.\n   * @package\n   */\n  fromXml(fieldElement) {\n    if (this.isOptionListDynamic()) {\n      this.getOptions(false);\n    }\n    this.setValue(fieldElement.textContent);\n  }\n\n  /**\n   * Sets the field's value based on the given state.\n   * @param {*} state The state to apply to the dropdown field.\n   * @override\n   * @package\n   */\n  loadState(state) {\n    if (this.loadLegacyState(FieldDropdown, state)) {\n      return;\n    }\n    if (this.isOptionListDynamic()) {\n      this.getOptions(false);\n    }\n    this.setValue(state);\n  }\n\n  /**\n   * Create the block UI for this dropdown.\n   * @package\n   */\n  initView() {\n    if (this.shouldAddBorderRect_()) {\n      this.createBorderRect_();\n    } else {\n      this.clickTarget_ = this.sourceBlock_.getSvgRoot();\n    }\n    this.createTextElement_();\n\n    this.imageElement_ = dom.createSvgElement(Svg.IMAGE, {}, this.fieldGroup_);\n\n    if (this.getConstants().FIELD_DROPDOWN_SVG_ARROW) {\n      this.createSVGArrow_();\n    } else {\n      this.createTextArrow_();\n    }\n\n    if (this.borderRect_) {\n      dom.addClass(this.borderRect_, 'blocklyDropdownRect');\n    }\n  }\n\n  /**\n   * Whether or not the dropdown should add a border rect.\n   * @return {boolean} True if the dropdown field should add a border rect.\n   * @protected\n   */\n  shouldAddBorderRect_() {\n    return !this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW ||\n        (this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW &&\n         !this.sourceBlock_.isShadow());\n  }\n\n  /**\n   * Create a tspan based arrow.\n   * @protected\n   */\n  createTextArrow_() {\n    this.arrow_ = dom.createSvgElement(Svg.TSPAN, {}, this.textElement_);\n    this.arrow_.appendChild(document.createTextNode(\n        this.sourceBlock_.RTL ? FieldDropdown.ARROW_CHAR + ' ' :\n                                ' ' + FieldDropdown.ARROW_CHAR));\n    if (this.sourceBlock_.RTL) {\n      this.textElement_.insertBefore(this.arrow_, this.textContent_);\n    } else {\n      this.textElement_.appendChild(this.arrow_);\n    }\n  }\n\n  /**\n   * Create an SVG based arrow.\n   * @protected\n   */\n  createSVGArrow_() {\n    this.svgArrow_ = dom.createSvgElement(\n        Svg.IMAGE, {\n          'height': this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE + 'px',\n          'width': this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE + 'px',\n        },\n        this.fieldGroup_);\n    this.svgArrow_.setAttributeNS(\n        dom.XLINK_NS, 'xlink:href',\n        this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI);\n  }\n\n  /**\n   * Create a dropdown menu under the text.\n   * @param {Event=} opt_e Optional mouse event that triggered the field to\n   *     open, or undefined if triggered programmatically.\n   * @protected\n   */\n  showEditor_(opt_e) {\n    this.dropdownCreate_();\n    if (opt_e && typeof opt_e.clientX === 'number') {\n      this.menu_.openingCoords = new Coordinate(opt_e.clientX, opt_e.clientY);\n    } else {\n      this.menu_.openingCoords = null;\n    }\n\n    // Remove any pre-existing elements in the dropdown.\n    dropDownDiv.clearContent();\n    // Element gets created in render.\n    this.menu_.render(dropDownDiv.getContentDiv());\n    const menuElement = /** @type {!Element} */ (this.menu_.getElement());\n    dom.addClass(menuElement, 'blocklyDropdownMenu');\n\n    if (this.getConstants().FIELD_DROPDOWN_COLOURED_DIV) {\n      const primaryColour = (this.sourceBlock_.isShadow()) ?\n          this.sourceBlock_.getParent().getColour() :\n          this.sourceBlock_.getColour();\n      const borderColour = (this.sourceBlock_.isShadow()) ?\n          this.sourceBlock_.getParent().style.colourTertiary :\n          this.sourceBlock_.style.colourTertiary;\n      dropDownDiv.setColour(primaryColour, borderColour);\n    }\n\n    dropDownDiv.showPositionedByField(this, this.dropdownDispose_.bind(this));\n\n    // Focusing needs to be handled after the menu is rendered and positioned.\n    // Otherwise it will cause a page scroll to get the misplaced menu in\n    // view. See issue #1329.\n    this.menu_.focus();\n\n    if (this.selectedMenuItem_) {\n      this.menu_.setHighlighted(this.selectedMenuItem_);\n    }\n\n    this.applyColour();\n  }\n\n  /**\n   * Create the dropdown editor.\n   * @private\n   */\n  dropdownCreate_() {\n    const menu = new Menu();\n    menu.setRole(aria.Role.LISTBOX);\n    this.menu_ = menu;\n\n    const options = this.getOptions(false);\n    this.selectedMenuItem_ = null;\n    for (let i = 0; i < options.length; i++) {\n      let content = options[i][0];  // Human-readable text or image.\n      const value = options[i][1];  // Language-neutral value.\n      if (typeof content === 'object') {\n        // An image, not text.\n        const image = new Image(content['width'], content['height']);\n        image.src = content['src'];\n        image.alt = content['alt'] || '';\n        content = image;\n      }\n      const menuItem = new MenuItem(content, value);\n      menuItem.setRole(aria.Role.OPTION);\n      menuItem.setRightToLeft(this.sourceBlock_.RTL);\n      menuItem.setCheckable(true);\n      menu.addChild(menuItem);\n      menuItem.setChecked(value === this.value_);\n      if (value === this.value_) {\n        this.selectedMenuItem_ = menuItem;\n      }\n      menuItem.onAction(this.handleMenuActionEvent_, this);\n    }\n  }\n\n  /**\n   * Disposes of events and DOM-references belonging to the dropdown editor.\n   * @private\n   */\n  dropdownDispose_() {\n    if (this.menu_) {\n      this.menu_.dispose();\n    }\n    this.menu_ = null;\n    this.selectedMenuItem_ = null;\n    this.applyColour();\n  }\n\n  /**\n   * Handle an action in the dropdown menu.\n   * @param {!MenuItem} menuItem The MenuItem selected within menu.\n   * @private\n   */\n  handleMenuActionEvent_(menuItem) {\n    dropDownDiv.hideIfOwner(this, true);\n    this.onItemSelected_(/** @type {!Menu} */ (this.menu_), menuItem);\n  }\n\n  /**\n   * Handle the selection of an item in the dropdown menu.\n   * @param {!Menu} menu The Menu component clicked.\n   * @param {!MenuItem} menuItem The MenuItem selected within menu.\n   * @protected\n   */\n  onItemSelected_(menu, menuItem) {\n    this.setValue(menuItem.getValue());\n  }\n\n  /**\n   * Factor out common words in statically defined options.\n   * Create prefix and/or suffix labels.\n   * @private\n   */\n  trimOptions_() {\n    const options = this.menuGenerator_;\n    if (!Array.isArray(options)) {\n      return;\n    }\n    let hasImages = false;\n\n    // Localize label text and image alt text.\n    for (let i = 0; i < options.length; i++) {\n      const label = options[i][0];\n      if (typeof label === 'string') {\n        options[i][0] = parsing.replaceMessageReferences(label);\n      } else {\n        if (label.alt !== null) {\n          options[i][0].alt = parsing.replaceMessageReferences(label.alt);\n        }\n        hasImages = true;\n      }\n    }\n    if (hasImages || options.length < 2) {\n      return;  // Do nothing if too few items or at least one label is an image.\n    }\n    const strings = [];\n    for (let i = 0; i < options.length; i++) {\n      strings.push(options[i][0]);\n    }\n    const shortest = utilsString.shortestStringLength(strings);\n    const prefixLength = utilsString.commonWordPrefix(strings, shortest);\n    const suffixLength = utilsString.commonWordSuffix(strings, shortest);\n    if (!prefixLength && !suffixLength) {\n      return;\n    }\n    if (shortest <= prefixLength + suffixLength) {\n      // One or more strings will entirely vanish if we proceed.  Abort.\n      return;\n    }\n    if (prefixLength) {\n      this.prefixField = strings[0].substring(0, prefixLength - 1);\n    }\n    if (suffixLength) {\n      this.suffixField = strings[0].substr(1 - suffixLength);\n    }\n\n    this.menuGenerator_ =\n        FieldDropdown.applyTrim_(options, prefixLength, suffixLength);\n  }\n\n  /**\n   * @return {boolean} True if the option list is generated by a function.\n   *     Otherwise false.\n   */\n  isOptionListDynamic() {\n    return typeof this.menuGenerator_ === 'function';\n  }\n\n  /**\n   * Return a list of the options for this dropdown.\n   * @param {boolean=} opt_useCache For dynamic options, whether or not to use\n   *     the cached options or to re-generate them.\n   * @return {!Array<!Array>} A non-empty array of option tuples:\n   *     (human-readable text or image, language-neutral name).\n   * @throws {TypeError} If generated options are incorrectly structured.\n   */\n  getOptions(opt_useCache) {\n    if (this.isOptionListDynamic()) {\n      if (!this.generatedOptions_ || !opt_useCache) {\n        this.generatedOptions_ = this.menuGenerator_.call(this);\n        validateOptions(this.generatedOptions_);\n      }\n      return this.generatedOptions_;\n    }\n    return /** @type {!Array<!Array<string>>} */ (this.menuGenerator_);\n  }\n\n  /**\n   * Ensure that the input value is a valid language-neutral option.\n   * @param {*=} opt_newValue The input value.\n   * @return {?string} A valid language-neutral option, or null if invalid.\n   * @protected\n   */\n  doClassValidation_(opt_newValue) {\n    let isValueValid = false;\n    const options = this.getOptions(true);\n    for (let i = 0, option; (option = options[i]); i++) {\n      // Options are tuples of human-readable text and language-neutral values.\n      if (option[1] === opt_newValue) {\n        isValueValid = true;\n        break;\n      }\n    }\n    if (!isValueValid) {\n      if (this.sourceBlock_) {\n        console.warn(\n            'Cannot set the dropdown\\'s value to an unavailable option.' +\n            ' Block type: ' + this.sourceBlock_.type +\n            ', Field name: ' + this.name + ', Value: ' + opt_newValue);\n      }\n      return null;\n    }\n    return /** @type {string} */ (opt_newValue);\n  }\n\n  /**\n   * Update the value of this dropdown field.\n   * @param {*} newValue The value to be saved. The default validator guarantees\n   * that this is one of the valid dropdown options.\n   * @protected\n   */\n  doValueUpdate_(newValue) {\n    super.doValueUpdate_(newValue);\n    const options = this.getOptions(true);\n    for (let i = 0, option; (option = options[i]); i++) {\n      if (option[1] === this.value_) {\n        this.selectedOption_ = option;\n      }\n    }\n  }\n\n  /**\n   * Updates the dropdown arrow to match the colour/style of the block.\n   * @package\n   */\n  applyColour() {\n    if (this.borderRect_) {\n      this.borderRect_.setAttribute(\n          'stroke', this.sourceBlock_.style.colourTertiary);\n      if (this.menu_) {\n        this.borderRect_.setAttribute(\n            'fill', this.sourceBlock_.style.colourTertiary);\n      } else {\n        this.borderRect_.setAttribute('fill', 'transparent');\n      }\n    }\n    // Update arrow's colour.\n    if (this.sourceBlock_ && this.arrow_) {\n      if (this.sourceBlock_.isShadow()) {\n        this.arrow_.style.fill = this.sourceBlock_.style.colourSecondary;\n      } else {\n        this.arrow_.style.fill = this.sourceBlock_.style.colourPrimary;\n      }\n    }\n  }\n\n  /**\n   * Draws the border with the correct width.\n   * @protected\n   */\n  render_() {\n    // Hide both elements.\n    this.textContent_.nodeValue = '';\n    this.imageElement_.style.display = 'none';\n\n    // Show correct element.\n    const option = this.selectedOption_ && this.selectedOption_[0];\n    if (option && typeof option === 'object') {\n      this.renderSelectedImage_(\n          /** @type {!ImageProperties} */ (option));\n    } else {\n      this.renderSelectedText_();\n    }\n\n    this.positionBorderRect_();\n  }\n\n  /**\n   * Renders the selected option, which must be an image.\n   * @param {!ImageProperties} imageJson Selected\n   *   option that must be an image.\n   * @private\n   */\n  renderSelectedImage_(imageJson) {\n    this.imageElement_.style.display = '';\n    this.imageElement_.setAttributeNS(\n        dom.XLINK_NS, 'xlink:href', imageJson.src);\n    this.imageElement_.setAttribute('height', imageJson.height);\n    this.imageElement_.setAttribute('width', imageJson.width);\n\n    const imageHeight = Number(imageJson.height);\n    const imageWidth = Number(imageJson.width);\n\n    // Height and width include the border rect.\n    const hasBorder = !!this.borderRect_;\n    const height = Math.max(\n        hasBorder ? this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT : 0,\n        imageHeight + IMAGE_Y_PADDING);\n    const xPadding =\n        hasBorder ? this.getConstants().FIELD_BORDER_RECT_X_PADDING : 0;\n    let arrowWidth = 0;\n    if (this.svgArrow_) {\n      arrowWidth = this.positionSVGArrow_(\n          imageWidth + xPadding,\n          height / 2 - this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE / 2);\n    } else {\n      arrowWidth = dom.getFastTextWidth(\n          /** @type {!SVGTSpanElement} */ (this.arrow_),\n          this.getConstants().FIELD_TEXT_FONTSIZE,\n          this.getConstants().FIELD_TEXT_FONTWEIGHT,\n          this.getConstants().FIELD_TEXT_FONTFAMILY);\n    }\n    this.size_.width = imageWidth + arrowWidth + xPadding * 2;\n    this.size_.height = height;\n\n    let arrowX = 0;\n    if (this.sourceBlock_.RTL) {\n      const imageX = xPadding + arrowWidth;\n      this.imageElement_.setAttribute('x', imageX);\n    } else {\n      arrowX = imageWidth + arrowWidth;\n      this.textElement_.setAttribute('text-anchor', 'end');\n      this.imageElement_.setAttribute('x', xPadding);\n    }\n    this.imageElement_.setAttribute('y', height / 2 - imageHeight / 2);\n\n    this.positionTextElement_(arrowX + xPadding, imageWidth + arrowWidth);\n  }\n\n  /**\n   * Renders the selected option, which must be text.\n   * @private\n   */\n  renderSelectedText_() {\n    // Retrieves the selected option to display through getText_.\n    this.textContent_.nodeValue = this.getDisplayText_();\n    dom.addClass(\n        /** @type {!Element} */ (this.textElement_), 'blocklyDropdownText');\n    this.textElement_.setAttribute('text-anchor', 'start');\n\n    // Height and width include the border rect.\n    const hasBorder = !!this.borderRect_;\n    const height = Math.max(\n        hasBorder ? this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT : 0,\n        this.getConstants().FIELD_TEXT_HEIGHT);\n    const textWidth = dom.getFastTextWidth(\n        this.textElement_, this.getConstants().FIELD_TEXT_FONTSIZE,\n        this.getConstants().FIELD_TEXT_FONTWEIGHT,\n        this.getConstants().FIELD_TEXT_FONTFAMILY);\n    const xPadding =\n        hasBorder ? this.getConstants().FIELD_BORDER_RECT_X_PADDING : 0;\n    let arrowWidth = 0;\n    if (this.svgArrow_) {\n      arrowWidth = this.positionSVGArrow_(\n          textWidth + xPadding,\n          height / 2 - this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE / 2);\n    }\n    this.size_.width = textWidth + arrowWidth + xPadding * 2;\n    this.size_.height = height;\n\n    this.positionTextElement_(xPadding, textWidth);\n  }\n\n  /**\n   * Position a drop-down arrow at the appropriate location at render-time.\n   * @param {number} x X position the arrow is being rendered at, in px.\n   * @param {number} y Y position the arrow is being rendered at, in px.\n   * @return {number} Amount of space the arrow is taking up, in px.\n   * @private\n   */\n  positionSVGArrow_(x, y) {\n    if (!this.svgArrow_) {\n      return 0;\n    }\n    const hasBorder = !!this.borderRect_;\n    const xPadding =\n        hasBorder ? this.getConstants().FIELD_BORDER_RECT_X_PADDING : 0;\n    const textPadding = this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING;\n    const svgArrowSize = this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;\n    const arrowX = this.sourceBlock_.RTL ? xPadding : x + textPadding;\n    this.svgArrow_.setAttribute(\n        'transform', 'translate(' + arrowX + ',' + y + ')');\n    return svgArrowSize + textPadding;\n  }\n\n  /**\n   * Use the `getText_` developer hook to override the field's text\n   * representation.  Get the selected option text. If the selected option is an\n   * image we return the image alt text.\n   * @return {?string} Selected option text.\n   * @protected\n   * @override\n   */\n  getText_() {\n    if (!this.selectedOption_) {\n      return null;\n    }\n    const option = this.selectedOption_[0];\n    if (typeof option === 'object') {\n      return option['alt'];\n    }\n    return option;\n  }\n\n  /**\n   * Construct a FieldDropdown from a JSON arg object.\n   * @param {!Object} options A JSON object with options (options).\n   * @return {!FieldDropdown} The new field instance.\n   * @package\n   * @nocollapse\n   */\n  static fromJson(options) {\n    // `this` might be a subclass of FieldDropdown if that class doesn't\n    // override the static fromJson method.\n    return new this(options['options'], undefined, options);\n  }\n\n  /**\n   * Use the calculated prefix and suffix lengths to trim all of the options in\n   * the given array.\n   * @param {!Array<!Array>} options Array of option tuples:\n   *     (human-readable text or image, language-neutral name).\n   * @param {number} prefixLength The length of the common prefix.\n   * @param {number} suffixLength The length of the common suffix\n   * @return {!Array<!Array>} A new array with all of the option text trimmed.\n   */\n  static applyTrim_(options, prefixLength, suffixLength) {\n    const newOptions = [];\n    // Remove the prefix and suffix from the options.\n    for (let i = 0; i < options.length; i++) {\n      let text = options[i][0];\n      const value = options[i][1];\n      text = text.substring(prefixLength, text.length - suffixLength);\n      newOptions[i] = [text, value];\n    }\n    return newOptions;\n  }\n}\n\n/**\n * Dropdown image properties.\n * @typedef {{\n *            src:string,\n *            alt:string,\n *            width:number,\n *            height:number\n *          }}\n */\nlet ImageProperties;  // eslint-disable-line no-unused-vars\n\n/**\n * Horizontal distance that a checkmark overhangs the dropdown.\n */\nFieldDropdown.CHECKMARK_OVERHANG = 25;\n\n/**\n * Maximum height of the dropdown menu, as a percentage of the viewport height.\n */\nFieldDropdown.MAX_MENU_HEIGHT_VH = 0.45;\n\n/**\n * The y offset from the top of the field to the top of the image, if an image\n * is selected.\n * @type {number}\n * @const\n */\nconst IMAGE_Y_OFFSET = 5;\n\n/**\n * The total vertical padding above and below an image.\n * @type {number}\n * @const\n */\nconst IMAGE_Y_PADDING = IMAGE_Y_OFFSET * 2;\n\n/**\n * Android can't (in 2014) display \"▾\", so use \"▼\" instead.\n */\nFieldDropdown.ARROW_CHAR = userAgent.ANDROID ? '\\u25BC' : '\\u25BE';\n\n/**\n * Validates the data structure to be processed as an options list.\n * @param {?} options The proposed dropdown options.\n * @throws {TypeError} If proposed options are incorrectly structured.\n */\nconst validateOptions = function(options) {\n  if (!Array.isArray(options)) {\n    throw TypeError('FieldDropdown options must be an array.');\n  }\n  if (!options.length) {\n    throw TypeError('FieldDropdown options must not be an empty array.');\n  }\n  let foundError = false;\n  for (let i = 0; i < options.length; i++) {\n    const tuple = options[i];\n    if (!Array.isArray(tuple)) {\n      foundError = true;\n      console.error(\n          'Invalid option[' + i + ']: Each FieldDropdown option must be an ' +\n              'array. Found: ',\n          tuple);\n    } else if (typeof tuple[1] !== 'string') {\n      foundError = true;\n      console.error(\n          'Invalid option[' + i + ']: Each FieldDropdown option id must be ' +\n              'a string. Found ' + tuple[1] + ' in: ',\n          tuple);\n    } else if (\n        tuple[0] && (typeof tuple[0] !== 'string') &&\n        (typeof tuple[0].src !== 'string')) {\n      foundError = true;\n      console.error(\n          'Invalid option[' + i + ']: Each FieldDropdown option must have a ' +\n              'string label or image description. Found' + tuple[0] + ' in: ',\n          tuple);\n    }\n  }\n  if (foundError) {\n    throw TypeError('Found invalid FieldDropdown options.');\n  }\n};\n\nfieldRegistry.register('field_dropdown', FieldDropdown);\n\nexports.FieldDropdown = FieldDropdown;\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Extensions are functions that help initialize blocks, usually\n *      adding dynamic behavior such as onchange handlers and mutators. These\n *      are applied using Block.applyExtension(), or the JSON \"extensions\"\n *      array attribute.\n */\n'use strict';\n\n/**\n * Extensions are functions that help initialize blocks, usually\n *      adding dynamic behavior such as onchange handlers and mutators. These\n *      are applied using Block.applyExtension(), or the JSON \"extensions\"\n *      array attribute.\n * @namespace Blockly.Extensions\n */\ngoog.module('Blockly.Extensions');\n\nconst parsing = goog.require('Blockly.utils.parsing');\n/* eslint-disable-next-line no-unused-vars */\nconst {Block} = goog.requireType('Blockly.Block');\nconst {FieldDropdown} = goog.require('Blockly.FieldDropdown');\ngoog.requireType('Blockly.Mutator');\n\n\n/**\n * The set of all registered extensions, keyed by extension name/id.\n * @private\n */\nconst allExtensions = Object.create(null);\nexports.TEST_ONLY = {allExtensions};\n\n/**\n * Registers a new extension function. Extensions are functions that help\n * initialize blocks, usually adding dynamic behavior such as onchange\n * handlers and mutators. These are applied using Block.applyExtension(), or\n * the JSON \"extensions\" array attribute.\n * @param {string} name The name of this extension.\n * @param {Function} initFn The function to initialize an extended block.\n * @throws {Error} if the extension name is empty, the extension is already\n *     registered, or extensionFn is not a function.\n * @alias Blockly.Extensions.register\n */\nconst register = function(name, initFn) {\n  if ((typeof name !== 'string') || (name.trim() === '')) {\n    throw Error('Error: Invalid extension name \"' + name + '\"');\n  }\n  if (allExtensions[name]) {\n    throw Error('Error: Extension \"' + name + '\" is already registered.');\n  }\n  if (typeof initFn !== 'function') {\n    throw Error('Error: Extension \"' + name + '\" must be a function');\n  }\n  allExtensions[name] = initFn;\n};\nexports.register = register;\n\n/**\n * Registers a new extension function that adds all key/value of mixinObj.\n * @param {string} name The name of this extension.\n * @param {!Object} mixinObj The values to mix in.\n * @throws {Error} if the extension name is empty or the extension is already\n *     registered.\n * @alias Blockly.Extensions.registerMixin\n */\nconst registerMixin = function(name, mixinObj) {\n  if (!mixinObj || typeof mixinObj !== 'object') {\n    throw Error('Error: Mixin \"' + name + '\" must be a object');\n  }\n  register(\n      name,\n      /** @this {Block} */\n      function() {\n        this.mixin(mixinObj);\n      });\n};\nexports.registerMixin = registerMixin;\n\n/**\n * Registers a new extension function that adds a mutator to the block.\n * At register time this performs some basic sanity checks on the mutator.\n * The wrapper may also add a mutator dialog to the block, if both compose and\n * decompose are defined on the mixin.\n * @param {string} name The name of this mutator extension.\n * @param {!Object} mixinObj The values to mix in.\n * @param {(function())=} opt_helperFn An optional function to apply after\n *     mixing in the object.\n * @param {!Array<string>=} opt_blockList A list of blocks to appear in the\n *     flyout of the mutator dialog.\n * @throws {Error} if the mutation is invalid or can't be applied to the block.\n * @alias Blockly.Extensions.registerMutator\n */\nconst registerMutator = function(name, mixinObj, opt_helperFn, opt_blockList) {\n  const errorPrefix = 'Error when registering mutator \"' + name + '\": ';\n\n  checkHasMutatorProperties(errorPrefix, mixinObj);\n  const hasMutatorDialog = checkMutatorDialog(mixinObj, errorPrefix);\n\n  if (opt_helperFn && (typeof opt_helperFn !== 'function')) {\n    throw Error(errorPrefix + 'Extension \"' + name + '\" is not a function');\n  }\n\n  // Sanity checks passed.\n  register(\n      name,\n      /** @this {Block} */\n      function() {\n        if (hasMutatorDialog) {\n          const {Mutator} = goog.module.get('Blockly.Mutator');\n          if (!Mutator) {\n            throw Error(errorPrefix + 'Missing require for Blockly.Mutator');\n          }\n          this.setMutator(new Mutator(opt_blockList || []));\n        }\n        // Mixin the object.\n        this.mixin(mixinObj);\n\n        if (opt_helperFn) {\n          opt_helperFn.apply(this);\n        }\n      });\n};\nexports.registerMutator = registerMutator;\n\n/**\n * Unregisters the extension registered with the given name.\n * @param {string} name The name of the extension to unregister.\n * @alias Blockly.Extensions.unregister\n */\nconst unregister = function(name) {\n  if (isRegistered(name)) {\n    delete allExtensions[name];\n  } else {\n    console.warn(\n        'No extension mapping for name \"' + name + '\" found to unregister');\n  }\n};\nexports.unregister = unregister;\n\n/**\n * Returns whether an extension is registered with the given name.\n * @param {string} name The name of the extension to check for.\n * @return {boolean} True if the extension is registered.  False if it is\n *     not registered.\n * @alias Blockly.Extensions.isRegistered\n */\nconst isRegistered = function(name) {\n  return !!allExtensions[name];\n};\nexports.isRegistered = isRegistered;\n\n/**\n * Applies an extension method to a block. This should only be called during\n * block construction.\n * @param {string} name The name of the extension.\n * @param {!Block} block The block to apply the named extension to.\n * @param {boolean} isMutator True if this extension defines a mutator.\n * @throws {Error} if the extension is not found.\n * @alias Blockly.Extensions.apply\n */\nconst apply = function(name, block, isMutator) {\n  const extensionFn = allExtensions[name];\n  if (typeof extensionFn !== 'function') {\n    throw Error('Error: Extension \"' + name + '\" not found.');\n  }\n  let mutatorProperties;\n  if (isMutator) {\n    // Fail early if the block already has mutation properties.\n    checkNoMutatorProperties(name, block);\n  } else {\n    // Record the old properties so we can make sure they don't change after\n    // applying the extension.\n    mutatorProperties = getMutatorProperties(block);\n  }\n  extensionFn.apply(block);\n\n  if (isMutator) {\n    const errorPrefix = 'Error after applying mutator \"' + name + '\": ';\n    checkHasMutatorProperties(errorPrefix, block);\n  } else {\n    if (!mutatorPropertiesMatch(\n            /** @type {!Array<Object>} */ (mutatorProperties), block)) {\n      throw Error(\n          'Error when applying extension \"' + name + '\": ' +\n          'mutation properties changed when applying a non-mutator extension.');\n    }\n  }\n};\nexports.apply = apply;\n\n/**\n * Check that the given block does not have any of the four mutator properties\n * defined on it.  This function should be called before applying a mutator\n * extension to a block, to make sure we are not overwriting properties.\n * @param {string} mutationName The name of the mutation to reference in error\n *     messages.\n * @param {!Block} block The block to check.\n * @throws {Error} if any of the properties already exist on the block.\n */\nconst checkNoMutatorProperties = function(mutationName, block) {\n  const properties = getMutatorProperties(block);\n  if (properties.length) {\n    throw Error(\n        'Error: tried to apply mutation \"' + mutationName +\n        '\" to a block that already has mutator functions.' +\n        '  Block id: ' + block.id);\n  }\n};\n\n/**\n * Checks if the given object has both the 'mutationToDom' and 'domToMutation'\n * functions.\n * @param {!Object} object The object to check.\n * @param {string} errorPrefix The string to prepend to any error message.\n * @return {boolean} True if the object has both functions.  False if it has\n *     neither function.\n * @throws {Error} if the object has only one of the functions, or either is\n *     not actually a function.\n */\nconst checkXmlHooks = function(object, errorPrefix) {\n  return checkHasFunctionPair(\n      object.mutationToDom, object.domToMutation,\n      errorPrefix + ' mutationToDom/domToMutation');\n};\n\n/**\n * Checks if the given object has both the 'saveExtraState' and 'loadExtraState'\n * functions.\n * @param {!Object} object The object to check.\n * @param {string} errorPrefix The string to prepend to any error message.\n * @return {boolean} True if the object has both functions.  False if it has\n *     neither function.\n * @throws {Error} if the object has only one of the functions, or either is\n *     not actually a function.\n */\nconst checkJsonHooks = function(object, errorPrefix) {\n  return checkHasFunctionPair(\n      object.saveExtraState, object.loadExtraState,\n      errorPrefix + ' saveExtraState/loadExtraState');\n};\n\n/**\n * Checks if the given object has both the 'compose' and 'decompose' functions.\n * @param {!Object} object The object to check.\n * @param {string} errorPrefix The string to prepend to any error message.\n * @return {boolean} True if the object has both functions.  False if it has\n *     neither function.\n * @throws {Error} if the object has only one of the functions, or either is\n *     not actually a function.\n */\nconst checkMutatorDialog = function(object, errorPrefix) {\n  return checkHasFunctionPair(\n      object.compose, object.decompose, errorPrefix + ' compose/decompose');\n};\n\n/**\n * Checks that both or neither of the given functions exist and that they are\n * indeed functions.\n * @param {*} func1 The first function in the pair.\n * @param {*} func2 The second function in the pair.\n * @param {string} errorPrefix The string to prepend to any error message.\n * @return {boolean} True if the object has both functions.  False if it has\n *     neither function.\n * @throws {Error} If the object has only one of the functions, or either is\n *     not actually a function.\n */\nconst checkHasFunctionPair = function(func1, func2, errorPrefix) {\n  if (func1 && func2) {\n    if (typeof func1 !== 'function' || typeof func2 !== 'function') {\n      throw Error(errorPrefix + ' must be a function');\n    }\n    return true;\n  } else if (!func1 && !func2) {\n    return false;\n  }\n  throw Error(errorPrefix + 'Must have both or neither functions');\n};\n\n/**\n * Checks that the given object required mutator properties.\n * @param {string} errorPrefix The string to prepend to any error message.\n * @param {!Object} object The object to inspect.\n */\nconst checkHasMutatorProperties = function(errorPrefix, object) {\n  const hasXmlHooks = checkXmlHooks(object, errorPrefix);\n  const hasJsonHooks = checkJsonHooks(object, errorPrefix);\n  if (!hasXmlHooks && !hasJsonHooks) {\n    throw Error(\n        errorPrefix +\n        'Mutations must contain either XML hooks, or JSON hooks, or both');\n  }\n  // A block with a mutator isn't required to have a mutation dialog, but\n  // it should still have both or neither of compose and decompose.\n  checkMutatorDialog(object, errorPrefix);\n};\n\n/**\n * Get a list of values of mutator properties on the given block.\n * @param {!Block} block The block to inspect.\n * @return {!Array<Object>} A list with all of the defined properties, which\n *     should be functions, but may be anything other than undefined.\n */\nconst getMutatorProperties = function(block) {\n  const result = [];\n  // List each function explicitly by reference to allow for renaming\n  // during compilation.\n  if (block.domToMutation !== undefined) {\n    result.push(block.domToMutation);\n  }\n  if (block.mutationToDom !== undefined) {\n    result.push(block.mutationToDom);\n  }\n  if (block.saveExtraState !== undefined) {\n    result.push(block.saveExtraState);\n  }\n  if (block.loadExtraState !== undefined) {\n    result.push(block.loadExtraState);\n  }\n  if (block.compose !== undefined) {\n    result.push(block.compose);\n  }\n  if (block.decompose !== undefined) {\n    result.push(block.decompose);\n  }\n  return result;\n};\n\n/**\n * Check that the current mutator properties match a list of old mutator\n * properties.  This should be called after applying a non-mutator extension,\n * to verify that the extension didn't change properties it shouldn't.\n * @param {!Array<Object>} oldProperties The old values to compare to.\n * @param {!Block} block The block to inspect for new values.\n * @return {boolean} True if the property lists match.\n */\nconst mutatorPropertiesMatch = function(oldProperties, block) {\n  const newProperties = getMutatorProperties(block);\n  if (newProperties.length !== oldProperties.length) {\n    return false;\n  }\n  for (let i = 0; i < newProperties.length; i++) {\n    if (oldProperties[i] !== newProperties[i]) {\n      return false;\n    }\n  }\n  return true;\n};\n\n/**\n * Calls a function after the page has loaded, possibly immediately.\n * @param {function()} fn Function to run.\n * @throws Error Will throw if no global document can be found (e.g., Node.js).\n * @package\n */\nconst runAfterPageLoad = function(fn) {\n  if (typeof document !== 'object') {\n    throw Error('runAfterPageLoad() requires browser document.');\n  }\n  if (document.readyState === 'complete') {\n    fn();  // Page has already loaded. Call immediately.\n  } else {\n    // Poll readyState.\n    const readyStateCheckInterval = setInterval(function() {\n      if (document.readyState === 'complete') {\n        clearInterval(readyStateCheckInterval);\n        fn();\n      }\n    }, 10);\n  }\n};\nexports.runAfterPageLoad = runAfterPageLoad;\n\n/**\n * Builds an extension function that will map a dropdown value to a tooltip\n * string.\n *\n * This method includes multiple checks to ensure tooltips, dropdown options,\n * and message references are aligned. This aims to catch errors as early as\n * possible, without requiring developers to manually test tooltips under each\n * option. After the page is loaded, each tooltip text string will be checked\n * for matching message keys in the internationalized string table. Deferring\n * this until the page is loaded decouples loading dependencies. Later, upon\n * loading the first block of any given type, the extension will validate every\n * dropdown option has a matching tooltip in the lookupTable.  Errors are\n * reported as warnings in the console, and are never fatal.\n * @param {string} dropdownName The name of the field whose value is the key\n *     to the lookup table.\n * @param {!Object<string, string>} lookupTable The table of field values to\n *     tooltip text.\n * @return {!Function} The extension function.\n * @alias Blockly.Extensions.buildTooltipForDropdown\n */\nconst buildTooltipForDropdown = function(dropdownName, lookupTable) {\n  // List of block types already validated, to minimize duplicate warnings.\n  const blockTypesChecked = [];\n\n  // Check the tooltip string messages for invalid references.\n  // Wait for load, in case Blockly.Msg is not yet populated.\n  // runAfterPageLoad() does not run in a Node.js environment due to lack\n  // of document object, in which case skip the validation.\n  if (typeof document === 'object') {  // Relies on document.readyState\n    runAfterPageLoad(function() {\n      for (const key in lookupTable) {\n        // Will print warnings if reference is missing.\n        parsing.checkMessageReferences(lookupTable[key]);\n      }\n    });\n  }\n\n  /**\n   * The actual extension.\n   * @this {Block}\n   */\n  const extensionFn = function() {\n    if (this.type && blockTypesChecked.indexOf(this.type) === -1) {\n      checkDropdownOptionsInTable(this, dropdownName, lookupTable);\n      blockTypesChecked.push(this.type);\n    }\n\n    this.setTooltip(function() {\n      const value = String(this.getFieldValue(dropdownName));\n      let tooltip = lookupTable[value];\n      if (tooltip === null) {\n        if (blockTypesChecked.indexOf(this.type) === -1) {\n          // Warn for missing values on generated tooltips.\n          let warning = 'No tooltip mapping for value ' + value + ' of field ' +\n              dropdownName;\n          if (this.type !== null) {\n            warning += (' of block type ' + this.type);\n          }\n          console.warn(warning + '.');\n        }\n      } else {\n        tooltip = parsing.replaceMessageReferences(tooltip);\n      }\n      return tooltip;\n    }.bind(this));\n  };\n  return extensionFn;\n};\nexports.buildTooltipForDropdown = buildTooltipForDropdown;\n\n/**\n * Checks all options keys are present in the provided string lookup table.\n * Emits console warnings when they are not.\n * @param {!Block} block The block containing the dropdown\n * @param {string} dropdownName The name of the dropdown\n * @param {!Object<string, string>} lookupTable The string lookup table\n */\nconst checkDropdownOptionsInTable = function(block, dropdownName, lookupTable) {\n  // Validate all dropdown options have values.\n  const dropdown = block.getField(dropdownName);\n  if (dropdown instanceof FieldDropdown && !dropdown.isOptionListDynamic()) {\n    const options = dropdown.getOptions();\n    for (let i = 0; i < options.length; i++) {\n      const optionKey = options[i][1];  // label, then value\n      if (lookupTable[optionKey] === null) {\n        console.warn(\n            'No tooltip mapping for value ' + optionKey + ' of field ' +\n            dropdownName + ' of block type ' + block.type);\n      }\n    }\n  }\n};\n\n/**\n * Builds an extension function that will install a dynamic tooltip. The\n * tooltip message should include the string '%1' and that string will be\n * replaced with the text of the named field.\n * @param {string} msgTemplate The template form to of the message text, with\n *     %1 placeholder.\n * @param {string} fieldName The field with the replacement text.\n * @return {!Function} The extension function.\n * @alias Blockly.Extensions.buildTooltipWithFieldText\n */\nconst buildTooltipWithFieldText = function(msgTemplate, fieldName) {\n  // Check the tooltip string messages for invalid references.\n  // Wait for load, in case Blockly.Msg is not yet populated.\n  // runAfterPageLoad() does not run in a Node.js environment due to lack\n  // of document object, in which case skip the validation.\n  if (typeof document === 'object') {  // Relies on document.readyState\n    runAfterPageLoad(function() {\n      // Will print warnings if reference is missing.\n      parsing.checkMessageReferences(msgTemplate);\n    });\n  }\n\n  /**\n   * The actual extension.\n   * @this {Block}\n   */\n  const extensionFn = function() {\n    this.setTooltip(function() {\n      const field = this.getField(fieldName);\n      return parsing.replaceMessageReferences(msgTemplate)\n          .replace('%1', field ? field.getText() : '');\n    }.bind(this));\n  };\n  return extensionFn;\n};\nexports.buildTooltipWithFieldText = buildTooltipWithFieldText;\n\n/**\n * Configures the tooltip to mimic the parent block when connected. Otherwise,\n * uses the tooltip text at the time this extension is initialized. This takes\n * advantage of the fact that all other values from JSON are initialized before\n * extensions.\n * @this {Block}\n */\nconst extensionParentTooltip = function() {\n  const tooltipWhenNotConnected = this.tooltip;\n  this.setTooltip(function() {\n    const parent = this.getParent();\n    return (parent && parent.getInputsInline() && parent.tooltip) ||\n        tooltipWhenNotConnected;\n  }.bind(this));\n};\nregister('parent_tooltip_when_inline', extensionParentTooltip);\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Workspace metrics definitions.\n */\n'use strict';\n\n/**\n * Workspace metrics definitions.\n * @namespace Blockly.utils.Metrics\n */\ngoog.module('Blockly.utils.Metrics');\n\n\n/**\n * @record\n * @alias Blockly.utils.Metrics\n */\nconst Metrics = function() {};\n\n/**\n * Height of the visible portion of the workspace.\n * @type {number}\n */\nMetrics.prototype.viewHeight;\n\n/**\n * Width of the visible portion of the workspace.\n * @type {number}\n */\nMetrics.prototype.viewWidth;\n\n/**\n * Height of the content.\n * @type {number}\n */\nMetrics.prototype.contentHeight;\n\n/**\n * Width of the content.\n * @type {number}\n */\nMetrics.prototype.contentWidth;\n\n/**\n * Height of the scroll area.\n * @type {number}\n */\nMetrics.prototype.scrollHeight;\n\n/**\n * Width of the scroll area.\n * @type {number}\n */\nMetrics.prototype.scrollWidth;\n\n/**\n * Top-edge of the visible portion of the workspace, relative to the workspace\n * origin.\n * @type {number}\n */\nMetrics.prototype.viewTop;\n\n/**\n * Left-edge of the visible portion of the workspace, relative to the workspace\n * origin.\n * @type {number}\n */\nMetrics.prototype.viewLeft;\n\n/**\n * Top-edge of the content, relative to the workspace origin.\n * @type {number}\n */\nMetrics.prototype.contentTop;\n\n/**\n * Left-edge of the content relative to the workspace origin.\n * @type {number}\n */\nMetrics.prototype.contentLeft;\n\n/**\n * Top-edge of the scroll area, relative to the workspace origin.\n * @type {number}\n */\nMetrics.prototype.scrollTop;\n\n/**\n * Left-edge of the scroll area relative to the workspace origin.\n * @type {number}\n */\nMetrics.prototype.scrollLeft;\n\n/**\n * Top-edge of the visible portion of the workspace, relative to the blocklyDiv.\n * @type {number}\n */\nMetrics.prototype.absoluteTop;\n\n/**\n * Left-edge of the visible portion of the workspace, relative to the\n * blocklyDiv.\n * @type {number}\n */\nMetrics.prototype.absoluteLeft;\n\n/**\n * Height of the Blockly div (the view + the toolbox, simple of otherwise).\n * @type {number}\n */\nMetrics.prototype.svgHeight;\n\n/**\n * Width of the Blockly div (the view + the toolbox, simple or otherwise).\n * @type {number}\n */\nMetrics.prototype.svgWidth;\n\n/**\n * Width of the toolbox, if it exists.  Otherwise zero.\n * @type {number}\n */\nMetrics.prototype.toolboxWidth;\n\n/**\n * Height of the toolbox, if it exists.  Otherwise zero.\n * @type {number}\n */\nMetrics.prototype.toolboxHeight;\n\n/**\n * Top, bottom, left or right. Use TOOLBOX_AT constants to compare.\n * @type {number}\n */\nMetrics.prototype.toolboxPosition;\n\n/**\n * Width of the flyout if it is always open.  Otherwise zero.\n * @type {number}\n */\nMetrics.prototype.flyoutWidth;\n\n/**\n * Height of the flyout if it is always open.  Otherwise zero.\n * @type {number}\n */\nMetrics.prototype.flyoutHeight;\n\nexports.Metrics = Metrics;\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Utility methods.\n */\n'use strict';\n\n/**\n * Utility methods.\n * @namespace Blockly.utils\n */\ngoog.module('Blockly.utils');\n\nconst aria = goog.require('Blockly.utils.aria');\nconst arrayUtils = goog.require('Blockly.utils.array');\nconst browserEvents = goog.require('Blockly.browserEvents');\nconst colourUtils = goog.require('Blockly.utils.colour');\nconst common = goog.require('Blockly.common');\nconst deprecation = goog.require('Blockly.utils.deprecation');\nconst dom = goog.require('Blockly.utils.dom');\nconst extensions = goog.require('Blockly.Extensions');\nconst global = goog.require('Blockly.utils.global');\nconst idGenerator = goog.require('Blockly.utils.idGenerator');\nconst math = goog.require('Blockly.utils.math');\nconst object = goog.require('Blockly.utils.object');\nconst parsing = goog.require('Blockly.utils.parsing');\nconst stringUtils = goog.require('Blockly.utils.string');\nconst style = goog.require('Blockly.utils.style');\nconst svgMath = goog.require('Blockly.utils.svgMath');\nconst svgPaths = goog.require('Blockly.utils.svgPaths');\nconst toolbox = goog.require('Blockly.utils.toolbox');\nconst userAgent = goog.require('Blockly.utils.userAgent');\nconst xmlUtils = goog.require('Blockly.utils.xml');\n/* eslint-disable-next-line no-unused-vars */\nconst {Block} = goog.requireType('Blockly.Block');\nconst {Coordinate} = goog.require('Blockly.utils.Coordinate');\nconst {KeyCodes} = goog.require('Blockly.utils.KeyCodes');\nconst {Metrics} = goog.require('Blockly.utils.Metrics');\nconst {Rect} = goog.require('Blockly.utils.Rect');\nconst {Size} = goog.require('Blockly.utils.Size');\nconst {Svg} = goog.require('Blockly.utils.Svg');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceSvg} = goog.requireType('Blockly.WorkspaceSvg');\n\n\nexports.aria = aria;\nexports.colour = colourUtils;\nexports.Coordinate = Coordinate;\nexports.deprecation = deprecation;\nexports.dom = dom;\nexports.global = global.globalThis;\nexports.idGenerator = idGenerator;\nexports.KeyCodes = KeyCodes;\nexports.math = math;\nexports.Metrics = Metrics;\nexports.object = object;\nexports.parsing = parsing;\nexports.Rect = Rect;\nexports.Size = Size;\nexports.string = stringUtils;\nexports.style = style;\nexports.Svg = Svg;\nexports.svgPaths = svgPaths;\nexports.svgMath = svgMath;\nexports.toolbox = toolbox;\nexports.userAgent = userAgent;\nexports.xml = xmlUtils;\n\n/**\n * Halts the propagation of the event without doing anything else.\n * @param {!Event} e An event.\n * @deprecated\n * @alias Blockly.utils.noEvent\n */\nconst noEvent = function(e) {\n  deprecation.warn('Blockly.utils.noEvent', 'September 2021', 'September 2022');\n  // This event has been handled.  No need to bubble up to the document.\n  e.preventDefault();\n  e.stopPropagation();\n};\nexports.noEvent = noEvent;\n\n/**\n * Returns true if this event is targeting a text input widget?\n * @param {!Event} e An event.\n * @return {boolean} True if text input.\n * @deprecated Use Blockly.browserEvents.isTargetInput instead.\n * @alias Blockly.utils.isTargetInput\n */\nconst isTargetInput = function(e) {\n  deprecation.warn(\n      'Blockly.utils.isTargetInput', 'September 2021', 'September 2022',\n      'Blockly.browserEvents.isTargetInput');\n  return browserEvents.isTargetInput(e);\n};\nexports.isTargetInput = isTargetInput;\n\n/**\n * Return the coordinates of the top-left corner of this element relative to\n * its parent.  Only for SVG elements and children (e.g. rect, g, path).\n * @param {!Element} element SVG element to find the coordinates of.\n * @return {!Coordinate} Object with .x and .y properties.\n * @deprecated\n * @alias Blockly.utils.getRelativeXY\n */\nconst getRelativeXY = function(element) {\n  deprecation.warn(\n      'Blockly.utils.getRelativeXY', 'December 2021', 'December 2022',\n      'Blockly.utils.svgMath.getRelativeXY');\n  return svgMath.getRelativeXY(element);\n};\nexports.getRelativeXY = getRelativeXY;\n\n/**\n * Return the coordinates of the top-left corner of this element relative to\n * the div Blockly was injected into.\n * @param {!Element} element SVG element to find the coordinates of. If this is\n *     not a child of the div Blockly was injected into, the behaviour is\n *     undefined.\n * @return {!Coordinate} Object with .x and .y properties.\n * @deprecated\n * @alias Blockly.utils.getInjectionDivXY_\n */\nconst getInjectionDivXY = function(element) {\n  deprecation.warn(\n      'Blockly.utils.getInjectionDivXY_', 'December 2021', 'December 2022',\n      'Blockly.utils.svgMath.getInjectionDivXY');\n  return svgMath.getInjectionDivXY(element);\n};\nexports.getInjectionDivXY_ = getInjectionDivXY;\n\n/**\n * Returns true this event is a right-click.\n * @param {!Event} e Mouse event.\n * @return {boolean} True if right-click.\n * @deprecated Use Blockly.browserEvents.isRightButton instead.\n * @alias Blockly.utils.isRightButton\n */\nconst isRightButton = function(e) {\n  deprecation.warn(\n      'Blockly.utils.isRightButton', 'September 2021', 'September 2022',\n      'Blockly.browserEvents.isRightButton');\n  return browserEvents.isRightButton(e);\n};\nexports.isRightButton = isRightButton;\n\n/**\n * Returns the converted coordinates of the given mouse event.\n * The origin (0,0) is the top-left corner of the Blockly SVG.\n * @param {!Event} e Mouse event.\n * @param {!Element} svg SVG element.\n * @param {?SVGMatrix} matrix Inverted screen CTM to use.\n * @return {!SVGPoint} Object with .x and .y properties.\n * @deprecated Use Blockly.browserEvents.mouseToSvg instead;\n * @alias Blockly.utils.mouseToSvg\n */\nconst mouseToSvg = function(e, svg, matrix) {\n  deprecation.warn(\n      'Blockly.utils.mouseToSvg', 'September 2021', 'September 2022',\n      'Blockly.browserEvents.mouseToSvg');\n  return browserEvents.mouseToSvg(e, svg, matrix);\n};\nexports.mouseToSvg = mouseToSvg;\n\n/**\n * Returns the scroll delta of a mouse event in pixel units.\n * @param {!Event} e Mouse event.\n * @return {{x: number, y: number}} Scroll delta object with .x and .y\n *    properties.\n * @deprecated Use Blockly.browserEvents.getScrollDeltaPixels instead.\n * @alias Blockly.utils.getScrollDeltaPixels\n */\nconst getScrollDeltaPixels = function(e) {\n  deprecation.warn(\n      'Blockly.utils.getScrollDeltaPixels', 'September 2021', 'September 2022',\n      'Blockly.browserEvents.getScrollDeltaPixels');\n  return browserEvents.getScrollDeltaPixels(e);\n};\nexports.getScrollDeltaPixels = getScrollDeltaPixels;\n\n/**\n * Parse a string with any number of interpolation tokens (%1, %2, ...).\n * It will also replace string table references (e.g., %{bky_my_msg} and\n * %{BKY_MY_MSG} will both be replaced with the value in\n * Msg['MY_MSG']). Percentage sign characters '%' may be self-escaped\n * (e.g., '%%').\n * @param {string} message Text which might contain string table references and\n *     interpolation tokens.\n * @return {!Array<string|number>} Array of strings and numbers.\n * @deprecated\n * @alias Blockly.utils.tokenizeInterpolation\n */\nconst tokenizeInterpolation = function(message) {\n  deprecation.warn(\n      'Blockly.utils.tokenizeInterpolation', 'December 2021', 'December 2022',\n      'Blockly.utils.parsing.tokenizeInterpolation');\n  return parsing.tokenizeInterpolation(message);\n};\nexports.tokenizeInterpolation = tokenizeInterpolation;\n\n/**\n * Replaces string table references in a message, if the message is a string.\n * For example, \"%{bky_my_msg}\" and \"%{BKY_MY_MSG}\" will both be replaced with\n * the value in Msg['MY_MSG'].\n * @param {string|?} message Message, which may be a string that contains\n *     string table references.\n * @return {string} String with message references replaced.\n * @deprecated\n * @alias Blockly.utils.replaceMessageReferences\n */\nconst replaceMessageReferences = function(message) {\n  deprecation.warn(\n      'Blockly.utils.replaceMessageReferences', 'December 2021',\n      'December 2022', 'Blockly.utils.parsing.replaceMessageReferences');\n  return parsing.replaceMessageReferences(message);\n};\nexports.replaceMessageReferences = replaceMessageReferences;\n\n/**\n * Validates that any %{MSG_KEY} references in the message refer to keys of\n * the Msg string table.\n * @param {string} message Text which might contain string table references.\n * @return {boolean} True if all message references have matching values.\n *     Otherwise, false.\n * @deprecated\n * @alias Blockly.utils.checkMessageReferences\n */\nconst checkMessageReferences = function(message) {\n  deprecation.warn(\n      'Blockly.utils.checkMessageReferences', 'December 2021', 'December 2022',\n      'Blockly.utils.parsing.checkMessageReferences');\n  return parsing.checkMessageReferences(message);\n};\nexports.checkMessageReferences = checkMessageReferences;\n\n/**\n * Generate a unique ID.\n * @return {string} A globally unique ID string.\n * @deprecated Use Blockly.utils.idGenerator.genUid instead.\n * @alias Blockly.utils.genUid\n */\nconst genUid = function() {\n  deprecation.warn(\n      'Blockly.utils.genUid', 'September 2021', 'September 2022',\n      'Blockly.utils.idGenerator.genUid');\n  return idGenerator.genUid();\n};\nexports.genUid = genUid;\n\n/**\n * Check if 3D transforms are supported by adding an element\n * and attempting to set the property.\n * @return {boolean} True if 3D transforms are supported.\n * @deprecated\n * @alias Blockly.utils.is3dSupported\n */\nconst is3dSupported = function() {\n  deprecation.warn(\n      'Blockly.utils.is3dSupported', 'December 2021', 'December 2022',\n      'Blockly.utils.svgMath.is3dSupported');\n  return svgMath.is3dSupported();\n};\nexports.is3dSupported = is3dSupported;\n\n/**\n * Get the position of the current viewport in window coordinates.  This takes\n * scroll into account.\n * @return {!Rect} An object containing window width, height, and\n *     scroll position in window coordinates.\n * @alias Blockly.utils.getViewportBBox\n * @deprecated\n * @package\n */\nconst getViewportBBox = function() {\n  deprecation.warn(\n      'Blockly.utils.getViewportBBox', 'December 2021', 'December 2022',\n      'Blockly.utils.svgMath.getViewportBBox');\n  return svgMath.getViewportBBox();\n};\nexports.getViewportBBox = getViewportBBox;\n\n/**\n * Removes the first occurrence of a particular value from an array.\n * @param {!Array} arr Array from which to remove value.\n * @param {*} value Value to remove.\n * @return {boolean} True if an element was removed.\n * @alias Blockly.utils.arrayRemove\n * @deprecated\n * @package\n */\nconst arrayRemove = function(arr, value) {\n  deprecation.warn(\n      'Blockly.utils.arrayRemove', 'December 2021', 'December 2022');\n  return arrayUtils.removeElem(arr, value);\n};\nexports.arrayRemove = arrayRemove;\n\n/**\n * Gets the document scroll distance as a coordinate object.\n * Copied from Closure's goog.dom.getDocumentScroll.\n * @return {!Coordinate} Object with values 'x' and 'y'.\n * @deprecated\n * @alias Blockly.utils.getDocumentScroll\n */\nconst getDocumentScroll = function() {\n  deprecation.warn(\n      'Blockly.utils.getDocumentScroll', 'December 2021', 'December 2022',\n      'Blockly.utils.svgMath.getDocumentScroll');\n  return svgMath.getDocumentScroll();\n};\nexports.getDocumentScroll = getDocumentScroll;\n\n/**\n * Get a map of all the block's descendants mapping their type to the number of\n *    children with that type.\n * @param {!Block} block The block to map.\n * @param {boolean=} opt_stripFollowing Optionally ignore all following\n *    statements (blocks that are not inside a value or statement input\n *    of the block).\n * @return {!Object} Map of types to type counts for descendants of the bock.\n * @deprecated\n * @alias Blockly.utils.getBlockTypeCounts\n */\nconst getBlockTypeCounts = function(block, opt_stripFollowing) {\n  deprecation.warn(\n      'Blockly.utils.getBlockTypeCounts', 'December 2021', 'December 2022',\n      'Blockly.common.getBlockTypeCounts');\n  return common.getBlockTypeCounts(block, opt_stripFollowing);\n};\nexports.getBlockTypeCounts = getBlockTypeCounts;\n\n/**\n * Converts screen coordinates to workspace coordinates.\n * @param {!WorkspaceSvg} ws The workspace to find the coordinates on.\n * @param {!Coordinate} screenCoordinates The screen coordinates to\n * be converted to workspace coordinates\n * @deprecated\n * @return {!Coordinate} The workspace coordinates.\n */\nconst screenToWsCoordinates = function(ws, screenCoordinates) {\n  deprecation.warn(\n      'Blockly.utils.screenToWsCoordinates', 'December 2021', 'December 2022',\n      'Blockly.utils.svgMath.screenToWsCoordinates');\n  return svgMath.screenToWsCoordinates(ws, screenCoordinates);\n};\nexports.screenToWsCoordinates = screenToWsCoordinates;\n\n/**\n * Parse a block colour from a number or string, as provided in a block\n * definition.\n * @param {number|string} colour HSV hue value (0 to 360), #RRGGBB string,\n *     or a message reference string pointing to one of those two values.\n * @return {{hue: ?number, hex: string}} An object containing the colour as\n *     a #RRGGBB string, and the hue if the input was an HSV hue value.\n * @throws {Error} If the colour cannot be parsed.\n * @deprecated\n * @alias Blockly.utils.parseBlockColour\n */\nconst parseBlockColour = function(colour) {\n  deprecation.warn(\n      'Blockly.utils.parseBlockColour', 'December 2021', 'December 2022',\n      'Blockly.utils.parsing.parseBlockColour');\n  return parsing.parseBlockColour(colour);\n};\nexports.parseBlockColour = parseBlockColour;\n\n/**\n * Calls a function after the page has loaded, possibly immediately.\n * @param {function()} fn Function to run.\n * @throws Error Will throw if no global document can be found (e.g., Node.js).\n * @deprecated\n * @alias Blockly.utils.runAfterPageLoad\n */\nconst runAfterPageLoad = function(fn) {\n  deprecation.warn(\n      'Blockly.utils.runAfterPageLoad', 'December 2021', 'December 2022');\n  extensions.runAfterPageLoad(fn);\n};\nexports.runAfterPageLoad = runAfterPageLoad;\n","/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Class for a block delete event.\n */\n'use strict';\n\n/**\n * Class for a block delete event.\n * @class\n */\ngoog.module('Blockly.Events.BlockDelete');\n\nconst Xml = goog.require('Blockly.Xml');\nconst blocks = goog.require('Blockly.serialization.blocks');\nconst eventUtils = goog.require('Blockly.Events.utils');\nconst registry = goog.require('Blockly.registry');\nconst {BlockBase} = goog.require('Blockly.Events.BlockBase');\n/* eslint-disable-next-line no-unused-vars */\nconst {Block} = goog.requireType('Blockly.Block');\n\n\n/**\n * Class for a block deletion event.\n * @extends {BlockBase}\n * @alias Blockly.Events.BlockDelete\n */\nclass BlockDelete extends BlockBase {\n  /**\n   * @param {!Block=} opt_block The deleted block.  Undefined for a blank\n   *     event.\n   */\n  constructor(opt_block) {\n    super(opt_block);\n\n    /**\n     * Type of this event.\n     * @type {string}\n     */\n    this.type = eventUtils.BLOCK_DELETE;\n\n    if (!opt_block) {\n      return;  // Blank event to be populated by fromJson.\n    }\n    if (opt_block.getParent()) {\n      throw Error('Connected blocks cannot be deleted.');\n    }\n    if (opt_block.isShadow()) {\n      // Respawning shadow blocks is handled via disconnection.\n      this.recordUndo = false;\n    }\n\n    this.oldXml = Xml.blockToDomWithXY(opt_block);\n    this.ids = eventUtils.getDescendantIds(opt_block);\n\n    /**\n     * Was the block that was just deleted a shadow?\n     * @type {boolean}\n     */\n    this.wasShadow = opt_block.isShadow();\n\n    /**\n     * JSON representation of the block that was just deleted.\n     * @type {!blocks.State}\n     */\n    this.oldJson = /** @type {!blocks.State} */ (\n        blocks.save(opt_block, {addCoordinates: true}));\n  }\n\n  /**\n   * Encode the event as JSON.\n   * @return {!Object} JSON representation.\n   */\n  toJson() {\n    const json = super.toJson();\n    json['oldXml'] = Xml.domToText(this.oldXml);\n    json['ids'] = this.ids;\n    json['wasShadow'] = this.wasShadow;\n    json['oldJson'] = this.oldJson;\n    if (!this.recordUndo) {\n      json['recordUndo'] = this.recordUndo;\n    }\n    return json;\n  }\n\n  /**\n   * Decode the JSON event.\n   * @param {!Object} json JSON representation.\n   */\n  fromJson(json) {\n    super.fromJson(json);\n    this.oldXml = Xml.textToDom(json['oldXml']);\n    this.ids = json['ids'];\n    this.wasShadow =\n        json['wasShadow'] || this.oldXml.tagName.toLowerCase() === 'shadow';\n    this.oldJson = /** @type {!blocks.State} */ (json['oldJson']);\n    if (json['recordUndo'] !== undefined) {\n      this.recordUndo = json['recordUndo'];\n    }\n  }\n\n  /**\n   * Run a deletion event.\n   * @param {boolean} forward True if run forward, false if run backward (undo).\n   */\n  run(forward) {\n    const workspace = this.getEventWorkspace_();\n    if (forward) {\n      for (let i = 0; i < this.ids.length; i++) {\n        const id = this.ids[i];\n        const block = workspace.getBlockById(id);\n        if (block) {\n          block.dispose(false);\n        } else if (id === this.blockId) {\n          // Only complain about root-level block.\n          console.warn('Can\\'t delete non-existent block: ' + id);\n        }\n      }\n    } else {\n      blocks.append(this.oldJson, workspace);\n    }\n  }\n}\n\nregistry.register(registry.Type.EVENT, eventUtils.DELETE, BlockDelete);\n\nexports.BlockDelete = BlockDelete;\n","/**\n * @license\n * Copyright 2011 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The class representing one block.\n */\n'use strict';\n\n/**\n * The class representing one block.\n * @class\n */\ngoog.module('Blockly.Block');\n\nconst Extensions = goog.require('Blockly.Extensions');\nconst Tooltip = goog.require('Blockly.Tooltip');\nconst arrayUtils = goog.require('Blockly.utils.array');\nconst common = goog.require('Blockly.common');\nconst constants = goog.require('Blockly.constants');\nconst eventUtils = goog.require('Blockly.Events.utils');\nconst fieldRegistry = goog.require('Blockly.fieldRegistry');\nconst idGenerator = goog.require('Blockly.utils.idGenerator');\nconst object = goog.require('Blockly.utils.object');\nconst parsing = goog.require('Blockly.utils.parsing');\n/* eslint-disable-next-line no-unused-vars */\nconst {Abstract} = goog.requireType('Blockly.Events.Abstract');\nconst {Align, Input} = goog.require('Blockly.Input');\nconst {ASTNode} = goog.require('Blockly.ASTNode');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockMove} = goog.requireType('Blockly.Events.BlockMove');\nconst {Blocks} = goog.require('Blockly.blocks');\n/* eslint-disable-next-line no-unused-vars */\nconst {Comment} = goog.requireType('Blockly.Comment');\nconst {ConnectionType} = goog.require('Blockly.ConnectionType');\nconst {Connection} = goog.require('Blockly.Connection');\nconst {Coordinate} = goog.require('Blockly.utils.Coordinate');\n/* eslint-disable-next-line no-unused-vars */\nconst {Field} = goog.requireType('Blockly.Field');\n/* eslint-disable-next-line no-unused-vars */\nconst {IASTNodeLocation} = goog.require('Blockly.IASTNodeLocation');\n/* eslint-disable-next-line no-unused-vars */\nconst {IDeletable} = goog.require('Blockly.IDeletable');\n/* eslint-disable-next-line no-unused-vars */\nconst {Mutator} = goog.requireType('Blockly.Mutator');\nconst {Size} = goog.require('Blockly.utils.Size');\n/* eslint-disable-next-line no-unused-vars */\nconst {VariableModel} = goog.requireType('Blockly.VariableModel');\n/* eslint-disable-next-line no-unused-vars */\nconst {Workspace} = goog.requireType('Blockly.Workspace');\nconst {inputTypes} = goog.require('Blockly.inputTypes');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.Events.BlockChange');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.Events.BlockCreate');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.Events.BlockDelete');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.Events.BlockMove');\n\n\n/**\n * Class for one block.\n * Not normally called directly, workspace.newBlock() is preferred.\n * @implements {IASTNodeLocation}\n * @implements {IDeletable}\n * @unrestricted\n * @alias Blockly.Block\n */\nclass Block {\n  /**\n   * @param {!Workspace} workspace The block's workspace.\n   * @param {!string} prototypeName Name of the language object containing\n   *     type-specific functions for this block.\n   * @param {string=} opt_id Optional ID.  Use this ID if provided, otherwise\n   *     create a new ID.\n   * @throws When the prototypeName is not valid or not allowed.\n   */\n  constructor(workspace, prototypeName, opt_id) {\n    const {Generator} = goog.module.get('Blockly.Generator');\n    if (Generator &&\n        typeof Generator.prototype[prototypeName] !== 'undefined') {\n      // Occluding Generator class members is not allowed.\n      throw Error(\n          'Block prototypeName \"' + prototypeName +\n          '\" conflicts with Blockly.Generator members.');\n    }\n\n    /**\n     * Optional text data that round-trips between blocks and XML.\n     * Has no effect. May be used by 3rd parties for meta information.\n     * @type {?string}\n     */\n    this.data = null;\n\n    /**\n     * Has this block been disposed of?\n     * @type {boolean}\n     * @package\n     */\n    this.disposed = false;\n\n    /**\n     * Colour of the block as HSV hue value (0-360)\n     * This may be null if the block colour was not set via a hue number.\n     * @type {?number}\n     * @private\n     */\n    this.hue_ = null;\n\n    /**\n     * Colour of the block in '#RRGGBB' format.\n     * @type {string}\n     * @protected\n     */\n    this.colour_ = '#000000';\n\n    /**\n     * Name of the block style.\n     * @type {string}\n     * @protected\n     */\n    this.styleName_ = '';\n\n    /**\n     * An optional method called during initialization.\n     * @type {undefined|?function()}\n     */\n    this.init = undefined;\n\n    /**\n     * An optional serialization method for defining how to serialize the\n     * mutation state to XML. This must be coupled with defining\n     * `domToMutation`.\n     * @type {undefined|?function(...):!Element}\n     */\n    this.mutationToDom = undefined;\n\n    /**\n     * An optional deserialization method for defining how to deserialize the\n     * mutation state from XML. This must be coupled with defining\n     * `mutationToDom`.\n     * @type {undefined|?function(!Element)}\n     */\n    this.domToMutation = undefined;\n\n    /**\n     * An optional serialization method for defining how to serialize the\n     * block's extra state (eg mutation state) to something JSON compatible.\n     * This must be coupled with defining `loadExtraState`.\n     * @type {undefined|?function(): *}\n     */\n    this.saveExtraState = undefined;\n\n    /**\n     * An optional serialization method for defining how to deserialize the\n     * block's extra state (eg mutation state) from something JSON compatible.\n     * This must be coupled with defining `saveExtraState`.\n     * @type {undefined|?function(*)}\n     */\n    this.loadExtraState = undefined;\n\n\n    /**\n     * An optional property for suppressing adding STATEMENT_PREFIX and\n     * STATEMENT_SUFFIX to generated code.\n     * @type {?boolean}\n     */\n    this.suppressPrefixSuffix = false;\n\n    /**\n     * An optional property for declaring developer variables.  Return a list of\n     * variable names for use by generators.  Developer variables are never\n     * shown to the user, but are declared as global variables in the generated\n     * code.\n     * @type {undefined|?function():!Array<string>}\n     */\n    this.getDeveloperVariables = undefined;\n\n    /** @type {string} */\n    this.id = (opt_id && !workspace.getBlockById(opt_id)) ?\n        opt_id :\n        idGenerator.genUid();\n    workspace.setBlockById(this.id, this);\n    /** @type {Connection} */\n    this.outputConnection = null;\n    /** @type {Connection} */\n    this.nextConnection = null;\n    /** @type {Connection} */\n    this.previousConnection = null;\n    /** @type {!Array<!Input>} */\n    this.inputList = [];\n    /** @type {boolean|undefined} */\n    this.inputsInline = undefined;\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.disabled = false;\n    /** @type {!Tooltip.TipInfo} */\n    this.tooltip = '';\n    /** @type {boolean} */\n    this.contextMenu = true;\n\n    /**\n     * @type {Block}\n     * @protected\n     */\n    this.parentBlock_ = null;\n\n    /**\n     * @type {!Array<!Block>}\n     * @protected\n     */\n    this.childBlocks_ = [];\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.deletable_ = true;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.movable_ = true;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.editable_ = true;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.isShadow_ = false;\n\n    /**\n     * @type {boolean}\n     * @protected\n     */\n    this.collapsed_ = false;\n\n    /**\n     * @type {?number}\n     * @protected\n     */\n    this.outputShape_ = null;\n\n    /**\n     * A string representing the comment attached to this block.\n     * @type {string|Comment}\n     * @deprecated August 2019. Use getCommentText instead.\n     */\n    this.comment = null;\n\n    /**\n     * A model of the comment attached to this block.\n     * @type {!Block.CommentModel}\n     * @package\n     */\n    this.commentModel = {text: null, pinned: false, size: new Size(160, 80)};\n\n    /**\n     * The block's position in workspace units.  (0, 0) is at the workspace's\n     * origin; scale does not change this value.\n     * @type {!Coordinate}\n     * @private\n     */\n    this.xy_ = new Coordinate(0, 0);\n\n    /** @type {!Workspace} */\n    this.workspace = workspace;\n    /** @type {boolean} */\n    this.isInFlyout = workspace.isFlyout;\n    /** @type {boolean} */\n    this.isInMutator = workspace.isMutator;\n\n    /** @type {boolean} */\n    this.RTL = workspace.RTL;\n\n    /**\n     * True if this block is an insertion marker.\n     * @type {boolean}\n     * @protected\n     */\n    this.isInsertionMarker_ = false;\n\n    /**\n     * Name of the type of hat.\n     * @type {string|undefined}\n     */\n    this.hat = undefined;\n\n    /** @type {?boolean} */\n    this.rendered = null;\n\n    /**\n     * String for block help, or function that returns a URL. Null for no help.\n     * @type {string|Function}\n     */\n    this.helpUrl = null;\n\n    /**\n     * A bound callback function to use when the parent workspace changes.\n     * @type {?function(Abstract)}\n     * @private\n     */\n    this.onchangeWrapper_ = null;\n\n    /**\n     * A count of statement inputs on the block.\n     * @type {number}\n     * @package\n     */\n    this.statementInputCount = 0;\n\n    // Copy the type-specific functions and data from the prototype.\n    if (prototypeName) {\n      /** @type {string} */\n      this.type = prototypeName;\n      const prototype = Blocks[prototypeName];\n      if (!prototype || typeof prototype !== 'object') {\n        throw TypeError('Invalid block definition for type: ' + prototypeName);\n      }\n      object.mixin(this, prototype);\n    }\n\n    workspace.addTopBlock(this);\n    workspace.addTypedBlock(this);\n\n    if (new.target === Block) this.doInit_();\n  }\n\n  /**\n   * Calls the init() function and handles associated event firing, etc.\n   * @protected\n   */\n  doInit_() {\n    // All events fired should be part of the same group.\n    // Any events fired during init should not be undoable,\n    // so that block creation is atomic.\n    const existingGroup = eventUtils.getGroup();\n    if (!existingGroup) {\n      eventUtils.setGroup(true);\n    }\n    const initialUndoFlag = eventUtils.getRecordUndo();\n\n    try {\n      // Call an initialization function, if it exists.\n      if (typeof this.init === 'function') {\n        eventUtils.setRecordUndo(false);\n        this.init();\n        eventUtils.setRecordUndo(initialUndoFlag);\n      }\n\n      // Fire a create event.\n      if (eventUtils.isEnabled()) {\n        eventUtils.fire(new (eventUtils.get(eventUtils.BLOCK_CREATE))(this));\n      }\n    } finally {\n      if (!existingGroup) {\n        eventUtils.setGroup(false);\n      }\n      // In case init threw, recordUndo flag should still be reset.\n      eventUtils.setRecordUndo(initialUndoFlag);\n    }\n\n    // Record initial inline state.\n    /** @type {boolean|undefined} */\n    this.inputsInlineDefault = this.inputsInline;\n\n    // Bind an onchange function, if it exists.\n    if (typeof this.onchange === 'function') {\n      this.setOnChange(this.onchange);\n    }\n  }\n\n  /**\n   * Dispose of this block.\n   * @param {boolean} healStack If true, then try to heal any gap by connecting\n   *     the next statement with the previous statement.  Otherwise, dispose of\n   *     all children of this block.\n   * @suppress {checkTypes}\n   */\n  dispose(healStack) {\n    if (!this.workspace) {\n      // Already deleted.\n      return;\n    }\n    // Terminate onchange event calls.\n    if (this.onchangeWrapper_) {\n      this.workspace.removeChangeListener(this.onchangeWrapper_);\n    }\n\n    this.unplug(healStack);\n    if (eventUtils.isEnabled()) {\n      eventUtils.fire(new (eventUtils.get(eventUtils.BLOCK_DELETE))(this));\n    }\n    eventUtils.disable();\n\n    try {\n      // This block is now at the top of the workspace.\n      // Remove this block from the workspace's list of top-most blocks.\n      if (this.workspace) {\n        this.workspace.removeTopBlock(this);\n        this.workspace.removeTypedBlock(this);\n        // Remove from block database.\n        this.workspace.removeBlockById(this.id);\n        this.workspace = null;\n      }\n\n      // Just deleting this block from the DOM would result in a memory leak as\n      // well as corruption of the connection database.  Therefore we must\n      // methodically step through the blocks and carefully disassemble them.\n\n      if (common.getSelected() === this) {\n        common.setSelected(null);\n      }\n\n      // First, dispose of all my children.\n      for (let i = this.childBlocks_.length - 1; i >= 0; i--) {\n        this.childBlocks_[i].dispose(false);\n      }\n      // Then dispose of myself.\n      // Dispose of all inputs and their fields.\n      for (let i = 0, input; (input = this.inputList[i]); i++) {\n        input.dispose();\n      }\n      this.inputList.length = 0;\n      // Dispose of any remaining connections (next/previous/output).\n      const connections = this.getConnections_(true);\n      for (let i = 0, connection; (connection = connections[i]); i++) {\n        connection.dispose();\n      }\n    } finally {\n      eventUtils.enable();\n      this.disposed = true;\n    }\n  }\n\n  /**\n   * Call initModel on all fields on the block.\n   * May be called more than once.\n   * Either initModel or initSvg must be called after creating a block and\n   * before the first interaction with it.  Interactions include UI actions\n   * (e.g. clicking and dragging) and firing events (e.g. create, delete, and\n   * change).\n   * @public\n   */\n  initModel() {\n    for (let i = 0, input; (input = this.inputList[i]); i++) {\n      for (let j = 0, field; (field = input.fieldRow[j]); j++) {\n        if (field.initModel) {\n          field.initModel();\n        }\n      }\n    }\n  }\n\n  /**\n   * Unplug this block from its superior block.  If this block is a statement,\n   * optionally reconnect the block underneath with the block on top.\n   * @param {boolean=} opt_healStack Disconnect child statement and reconnect\n   *   stack.  Defaults to false.\n   */\n  unplug(opt_healStack) {\n    if (this.outputConnection) {\n      this.unplugFromRow_(opt_healStack);\n    }\n    if (this.previousConnection) {\n      this.unplugFromStack_(opt_healStack);\n    }\n  }\n\n  /**\n   * Unplug this block's output from an input on another block.  Optionally\n   * reconnect the block's parent to the only child block, if possible.\n   * @param {boolean=} opt_healStack Disconnect right-side block and connect to\n   *     left-side block.  Defaults to false.\n   * @private\n   */\n  unplugFromRow_(opt_healStack) {\n    let parentConnection = null;\n    if (this.outputConnection.isConnected()) {\n      parentConnection = this.outputConnection.targetConnection;\n      // Disconnect from any superior block.\n      this.outputConnection.disconnect();\n    }\n\n    // Return early in obvious cases.\n    if (!parentConnection || !opt_healStack) {\n      return;\n    }\n\n    const thisConnection = this.getOnlyValueConnection_();\n    if (!thisConnection || !thisConnection.isConnected() ||\n        thisConnection.targetBlock().isShadow()) {\n      // Too many or too few possible connections on this block, or there's\n      // nothing on the other side of this connection.\n      return;\n    }\n\n    const childConnection = thisConnection.targetConnection;\n    // Disconnect the child block.\n    childConnection.disconnect();\n    // Connect child to the parent if possible, otherwise bump away.\n    if (this.workspace.connectionChecker.canConnect(\n            childConnection, parentConnection, false)) {\n      parentConnection.connect(childConnection);\n    } else {\n      childConnection.onFailedConnect(parentConnection);\n    }\n  }\n\n  /**\n   * Returns the connection on the value input that is connected to another\n   * block. When an insertion marker is connected to a connection with a block\n   * already attached, the connected block is attached to the insertion marker.\n   * Since only one block can be displaced and attached to the insertion marker\n   * this should only ever return one connection.\n   *\n   * @return {?Connection} The connection on the value input, or null.\n   * @private\n   */\n  getOnlyValueConnection_() {\n    let connection = null;\n    for (let i = 0; i < this.inputList.length; i++) {\n      const thisConnection = this.inputList[i].connection;\n      if (thisConnection &&\n          thisConnection.type === ConnectionType.INPUT_VALUE &&\n          thisConnection.targetConnection) {\n        if (connection) {\n          return null;  // More than one value input found.\n        }\n        connection = thisConnection;\n      }\n    }\n    return connection;\n  }\n\n  /**\n   * Unplug this statement block from its superior block.  Optionally reconnect\n   * the block underneath with the block on top.\n   * @param {boolean=} opt_healStack Disconnect child statement and reconnect\n   *   stack.  Defaults to false.\n   * @private\n   */\n  unplugFromStack_(opt_healStack) {\n    let previousTarget = null;\n    if (this.previousConnection.isConnected()) {\n      // Remember the connection that any next statements need to connect to.\n      previousTarget = this.previousConnection.targetConnection;\n      // Detach this block from the parent's tree.\n      this.previousConnection.disconnect();\n    }\n    const nextBlock = this.getNextBlock();\n    if (opt_healStack && nextBlock && !nextBlock.isShadow()) {\n      // Disconnect the next statement.\n      const nextTarget = this.nextConnection.targetConnection;\n      nextTarget.disconnect();\n      if (previousTarget &&\n          this.workspace.connectionChecker.canConnect(\n              previousTarget, nextTarget, false)) {\n        // Attach the next statement to the previous statement.\n        previousTarget.connect(nextTarget);\n      }\n    }\n  }\n\n  /**\n   * Returns all connections originating from this block.\n   * @param {boolean} _all If true, return all connections even hidden ones.\n   * @return {!Array<!Connection>} Array of connections.\n   * @package\n   */\n  getConnections_(_all) {\n    const myConnections = [];\n    if (this.outputConnection) {\n      myConnections.push(this.outputConnection);\n    }\n    if (this.previousConnection) {\n      myConnections.push(this.previousConnection);\n    }\n    if (this.nextConnection) {\n      myConnections.push(this.nextConnection);\n    }\n    for (let i = 0, input; (input = this.inputList[i]); i++) {\n      if (input.connection) {\n        myConnections.push(input.connection);\n      }\n    }\n    return myConnections;\n  }\n\n  /**\n   * Walks down a stack of blocks and finds the last next connection on the\n   * stack.\n   * @param {boolean} ignoreShadows If true,the last connection on a non-shadow\n   *     block will be returned. If false, this will follow shadows to find the\n   *     last connection.\n   * @return {?Connection} The last next connection on the stack, or null.\n   * @package\n   */\n  lastConnectionInStack(ignoreShadows) {\n    let nextConnection = this.nextConnection;\n    while (nextConnection) {\n      const nextBlock = nextConnection.targetBlock();\n      if (!nextBlock || (ignoreShadows && nextBlock.isShadow())) {\n        return nextConnection;\n      }\n      nextConnection = nextBlock.nextConnection;\n    }\n    return null;\n  }\n\n  /**\n   * Bump unconnected blocks out of alignment.  Two blocks which aren't actually\n   * connected should not coincidentally line up on screen.\n   */\n  bumpNeighbours() {\n    // noop.\n  }\n\n  /**\n   * Return the parent block or null if this block is at the top level. The\n   * parent block is either the block connected to the previous connection (for\n   * a statement block) or the block connected to the output connection (for a\n   * value block).\n   * @return {?Block} The block (if any) that holds the current block.\n   */\n  getParent() {\n    return this.parentBlock_;\n  }\n\n  /**\n   * Return the input that connects to the specified block.\n   * @param {!Block} block A block connected to an input on this block.\n   * @return {?Input} The input (if any) that connects to the specified\n   *     block.\n   */\n  getInputWithBlock(block) {\n    for (let i = 0, input; (input = this.inputList[i]); i++) {\n      if (input.connection && input.connection.targetBlock() === block) {\n        return input;\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Return the parent block that surrounds the current block, or null if this\n   * block has no surrounding block.  A parent block might just be the previous\n   * statement, whereas the surrounding block is an if statement, while loop,\n   * etc.\n   * @return {?Block} The block (if any) that surrounds the current block.\n   */\n  getSurroundParent() {\n    let block = this;\n    let prevBlock;\n    do {\n      prevBlock = block;\n      block = block.getParent();\n      if (!block) {\n        // Ran off the top.\n        return null;\n      }\n    } while (block.getNextBlock() === prevBlock);\n    // This block is an enclosing parent, not just a statement in a stack.\n    return block;\n  }\n\n  /**\n   * Return the next statement block directly connected to this block.\n   * @return {?Block} The next statement block or null.\n   */\n  getNextBlock() {\n    return this.nextConnection && this.nextConnection.targetBlock();\n  }\n\n  /**\n   * Returns the block connected to the previous connection.\n   * @return {?Block} The previous statement block or null.\n   */\n  getPreviousBlock() {\n    return this.previousConnection && this.previousConnection.targetBlock();\n  }\n\n  /**\n   * Return the connection on the first statement input on this block, or null\n   * if there are none.\n   * @return {?Connection} The first statement connection or null.\n   * @package\n   */\n  getFirstStatementConnection() {\n    for (let i = 0, input; (input = this.inputList[i]); i++) {\n      if (input.connection &&\n          input.connection.type === ConnectionType.NEXT_STATEMENT) {\n        return input.connection;\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Return the top-most block in this block's tree.\n   * This will return itself if this block is at the top level.\n   * @return {!Block} The root block.\n   */\n  getRootBlock() {\n    let rootBlock;\n    let block = this;\n    do {\n      rootBlock = block;\n      block = rootBlock.parentBlock_;\n    } while (block);\n    return rootBlock;\n  }\n\n  /**\n   * Walk up from the given block up through the stack of blocks to find\n   * the top block of the sub stack. If we are nested in a statement input only\n   * find the top-most nested block. Do not go all the way to the root block.\n   * @return {!Block} The top block in a stack.\n   * @package\n   */\n  getTopStackBlock() {\n    let block = this;\n    let previous;\n    do {\n      previous = block.getPreviousBlock();\n    } while (previous && previous.getNextBlock() === block &&\n             (block = previous));\n    return block;\n  }\n\n  /**\n   * Find all the blocks that are directly nested inside this one.\n   * Includes value and statement inputs, as well as any following statement.\n   * Excludes any connection on an output tab or any preceding statement.\n   * Blocks are optionally sorted by position; top to bottom.\n   * @param {boolean} ordered Sort the list if true.\n   * @return {!Array<!Block>} Array of blocks.\n   */\n  getChildren(ordered) {\n    if (!ordered) {\n      return this.childBlocks_;\n    }\n    const blocks = [];\n    for (let i = 0, input; (input = this.inputList[i]); i++) {\n      if (input.connection) {\n        const child = input.connection.targetBlock();\n        if (child) {\n          blocks.push(child);\n        }\n      }\n    }\n    const next = this.getNextBlock();\n    if (next) {\n      blocks.push(next);\n    }\n    return blocks;\n  }\n\n  /**\n   * Set parent of this block to be a new block or null.\n   * @param {Block} newParent New parent block.\n   * @package\n   */\n  setParent(newParent) {\n    if (newParent === this.parentBlock_) {\n      return;\n    }\n\n    // Check that block is connected to new parent if new parent is not null and\n    //    that block is not connected to superior one if new parent is null.\n    const targetBlock =\n        (this.previousConnection && this.previousConnection.targetBlock()) ||\n        (this.outputConnection && this.outputConnection.targetBlock());\n    const isConnected = !!targetBlock;\n\n    if (isConnected && newParent && targetBlock !== newParent) {\n      throw Error('Block connected to superior one that is not new parent.');\n    } else if (!isConnected && newParent) {\n      throw Error('Block not connected to new parent.');\n    } else if (isConnected && !newParent) {\n      throw Error(\n          'Cannot set parent to null while block is still connected to' +\n          ' superior block.');\n    }\n\n    if (this.parentBlock_) {\n      // Remove this block from the old parent's child list.\n      arrayUtils.removeElem(this.parentBlock_.childBlocks_, this);\n\n      // This block hasn't actually moved on-screen, so there's no need to\n      // update\n      //     its connection locations.\n    } else {\n      // New parent must be non-null so remove this block from the workspace's\n      //     list of top-most blocks.\n      this.workspace.removeTopBlock(this);\n    }\n\n    this.parentBlock_ = newParent;\n    if (newParent) {\n      // Add this block to the new parent's child list.\n      newParent.childBlocks_.push(this);\n    } else {\n      this.workspace.addTopBlock(this);\n    }\n  }\n\n  /**\n   * Find all the blocks that are directly or indirectly nested inside this one.\n   * Includes this block in the list.\n   * Includes value and statement inputs, as well as any following statements.\n   * Excludes any connection on an output tab or any preceding statements.\n   * Blocks are optionally sorted by position; top to bottom.\n   * @param {boolean} ordered Sort the list if true.\n   * @return {!Array<!Block>} Flattened array of blocks.\n   */\n  getDescendants(ordered) {\n    const blocks = [this];\n    const childBlocks = this.getChildren(ordered);\n    for (let child, i = 0; (child = childBlocks[i]); i++) {\n      blocks.push.apply(blocks, child.getDescendants(ordered));\n    }\n    return blocks;\n  }\n\n  /**\n   * Get whether this block is deletable or not.\n   * @return {boolean} True if deletable.\n   */\n  isDeletable() {\n    return this.deletable_ && !this.isShadow_ &&\n        !(this.workspace && this.workspace.options.readOnly);\n  }\n\n  /**\n   * Set whether this block is deletable or not.\n   * @param {boolean} deletable True if deletable.\n   */\n  setDeletable(deletable) {\n    this.deletable_ = deletable;\n  }\n\n  /**\n   * Get whether this block is movable or not.\n   * @return {boolean} True if movable.\n   */\n  isMovable() {\n    return this.movable_ && !this.isShadow_ &&\n        !(this.workspace && this.workspace.options.readOnly);\n  }\n\n  /**\n   * Set whether this block is movable or not.\n   * @param {boolean} movable True if movable.\n   */\n  setMovable(movable) {\n    this.movable_ = movable;\n  }\n\n  /**\n   * Get whether is block is duplicatable or not. If duplicating this block and\n   * descendants will put this block over the workspace's capacity this block is\n   * not duplicatable. If duplicating this block and descendants will put any\n   * type over their maxInstances this block is not duplicatable.\n   * @return {boolean} True if duplicatable.\n   */\n  isDuplicatable() {\n    if (!this.workspace.hasBlockLimits()) {\n      return true;\n    }\n    return this.workspace.isCapacityAvailable(\n        common.getBlockTypeCounts(this, true));\n  }\n\n  /**\n   * Get whether this block is a shadow block or not.\n   * @return {boolean} True if a shadow.\n   */\n  isShadow() {\n    return this.isShadow_;\n  }\n\n  /**\n   * Set whether this block is a shadow block or not.\n   * @param {boolean} shadow True if a shadow.\n   * @package\n   */\n  setShadow(shadow) {\n    this.isShadow_ = shadow;\n  }\n\n  /**\n   * Get whether this block is an insertion marker block or not.\n   * @return {boolean} True if an insertion marker.\n   */\n  isInsertionMarker() {\n    return this.isInsertionMarker_;\n  }\n\n  /**\n   * Set whether this block is an insertion marker block or not.\n   * Once set this cannot be unset.\n   * @param {boolean} insertionMarker True if an insertion marker.\n   * @package\n   */\n  setInsertionMarker(insertionMarker) {\n    this.isInsertionMarker_ = insertionMarker;\n  }\n\n  /**\n   * Get whether this block is editable or not.\n   * @return {boolean} True if editable.\n   */\n  isEditable() {\n    return this.editable_ &&\n        !(this.workspace && this.workspace.options.readOnly);\n  }\n\n  /**\n   * Set whether this block is editable or not.\n   * @param {boolean} editable True if editable.\n   */\n  setEditable(editable) {\n    this.editable_ = editable;\n    for (let i = 0, input; (input = this.inputList[i]); i++) {\n      for (let j = 0, field; (field = input.fieldRow[j]); j++) {\n        field.updateEditable();\n      }\n    }\n  }\n\n  /**\n   * Returns if this block has been disposed of / deleted.\n   * @return {boolean} True if this block has been disposed of / deleted.\n   */\n  isDisposed() {\n    return this.disposed;\n  }\n\n  /**\n   * Find the connection on this block that corresponds to the given connection\n   * on the other block.\n   * Used to match connections between a block and its insertion marker.\n   * @param {!Block} otherBlock The other block to match against.\n   * @param {!Connection} conn The other connection to match.\n   * @return {?Connection} The matching connection on this block, or null.\n   * @package\n   */\n  getMatchingConnection(otherBlock, conn) {\n    const connections = this.getConnections_(true);\n    const otherConnections = otherBlock.getConnections_(true);\n    if (connections.length !== otherConnections.length) {\n      throw Error('Connection lists did not match in length.');\n    }\n    for (let i = 0; i < otherConnections.length; i++) {\n      if (otherConnections[i] === conn) {\n        return connections[i];\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Set the URL of this block's help page.\n   * @param {string|Function} url URL string for block help, or function that\n   *     returns a URL.  Null for no help.\n   */\n  setHelpUrl(url) {\n    this.helpUrl = url;\n  }\n\n  /**\n   * Sets the tooltip for this block.\n   * @param {!Tooltip.TipInfo} newTip The text for the tooltip, a function\n   *     that returns the text for the tooltip, or a parent object whose tooltip\n   *     will be used. To not display a tooltip pass the empty string.\n   */\n  setTooltip(newTip) {\n    this.tooltip = newTip;\n  }\n\n  /**\n   * Returns the tooltip text for this block.\n   * @return {!string} The tooltip text for this block.\n   */\n  getTooltip() {\n    return Tooltip.getTooltipOfObject(this);\n  }\n\n  /**\n   * Get the colour of a block.\n   * @return {string} #RRGGBB string.\n   */\n  getColour() {\n    return this.colour_;\n  }\n\n  /**\n   * Get the name of the block style.\n   * @return {string} Name of the block style.\n   */\n  getStyleName() {\n    return this.styleName_;\n  }\n\n  /**\n   * Get the HSV hue value of a block.  Null if hue not set.\n   * @return {?number} Hue value (0-360).\n   */\n  getHue() {\n    return this.hue_;\n  }\n\n  /**\n   * Change the colour of a block.\n   * @param {number|string} colour HSV hue value (0 to 360), #RRGGBB string,\n   *     or a message reference string pointing to one of those two values.\n   */\n  setColour(colour) {\n    const parsed = parsing.parseBlockColour(colour);\n    this.hue_ = parsed.hue;\n    this.colour_ = parsed.hex;\n  }\n\n  /**\n   * Set the style and colour values of a block.\n   * @param {string} blockStyleName Name of the block style.\n   */\n  setStyle(blockStyleName) {\n    this.styleName_ = blockStyleName;\n  }\n\n  /**\n   * Sets a callback function to use whenever the block's parent workspace\n   * changes, replacing any prior onchange handler. This is usually only called\n   * from the constructor, the block type initializer function, or an extension\n   * initializer function.\n   * @param {function(Abstract)} onchangeFn The callback to call\n   *     when the block's workspace changes.\n   * @throws {Error} if onchangeFn is not falsey and not a function.\n   */\n  setOnChange(onchangeFn) {\n    if (onchangeFn && typeof onchangeFn !== 'function') {\n      throw Error('onchange must be a function.');\n    }\n    if (this.onchangeWrapper_) {\n      this.workspace.removeChangeListener(this.onchangeWrapper_);\n    }\n    this.onchange = onchangeFn;\n    if (this.onchange) {\n      this.onchangeWrapper_ = onchangeFn.bind(this);\n      this.workspace.addChangeListener(this.onchangeWrapper_);\n    }\n  }\n\n  /**\n   * Returns the named field from a block.\n   * @param {string} name The name of the field.\n   * @return {?Field} Named field, or null if field does not exist.\n   */\n  getField(name) {\n    if (typeof name !== 'string') {\n      throw TypeError(\n          'Block.prototype.getField expects a string ' +\n          'with the field name but received ' +\n          (name === undefined ? 'nothing' : name + ' of type ' + typeof name) +\n          ' instead');\n    }\n    for (let i = 0, input; (input = this.inputList[i]); i++) {\n      for (let j = 0, field; (field = input.fieldRow[j]); j++) {\n        if (field.name === name) {\n          return field;\n        }\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Return all variables referenced by this block.\n   * @return {!Array<string>} List of variable ids.\n   */\n  getVars() {\n    const vars = [];\n    for (let i = 0, input; (input = this.inputList[i]); i++) {\n      for (let j = 0, field; (field = input.fieldRow[j]); j++) {\n        if (field.referencesVariables()) {\n          vars.push(field.getValue());\n        }\n      }\n    }\n    return vars;\n  }\n\n  /**\n   * Return all variables referenced by this block.\n   * @return {!Array<!VariableModel>} List of variable models.\n   * @package\n   */\n  getVarModels() {\n    const vars = [];\n    for (let i = 0, input; (input = this.inputList[i]); i++) {\n      for (let j = 0, field; (field = input.fieldRow[j]); j++) {\n        if (field.referencesVariables()) {\n          const model = this.workspace.getVariableById(\n              /** @type {string} */ (field.getValue()));\n          // Check if the variable actually exists (and isn't just a potential\n          // variable).\n          if (model) {\n            vars.push(model);\n          }\n        }\n      }\n    }\n    return vars;\n  }\n\n  /**\n   * Notification that a variable is renaming but keeping the same ID.  If the\n   * variable is in use on this block, rerender to show the new name.\n   * @param {!VariableModel} variable The variable being renamed.\n   * @package\n   */\n  updateVarName(variable) {\n    for (let i = 0, input; (input = this.inputList[i]); i++) {\n      for (let j = 0, field; (field = input.fieldRow[j]); j++) {\n        if (field.referencesVariables() &&\n            variable.getId() === field.getValue()) {\n          field.refreshVariableName();\n        }\n      }\n    }\n  }\n\n  /**\n   * Notification that a variable is renaming.\n   * If the ID matches one of this block's variables, rename it.\n   * @param {string} oldId ID of variable to rename.\n   * @param {string} newId ID of new variable.  May be the same as oldId, but\n   *     with an updated name.\n   */\n  renameVarById(oldId, newId) {\n    for (let i = 0, input; (input = this.inputList[i]); i++) {\n      for (let j = 0, field; (field = input.fieldRow[j]); j++) {\n        if (field.referencesVariables() && oldId === field.getValue()) {\n          field.setValue(newId);\n        }\n      }\n    }\n  }\n\n  /**\n   * Returns the language-neutral value of the given field.\n   * @param {string} name The name of the field.\n   * @return {*} Value of the field or null if field does not exist.\n   */\n  getFieldValue(name) {\n    const field = this.getField(name);\n    if (field) {\n      return field.getValue();\n    }\n    return null;\n  }\n\n  /**\n   * Sets the value of the given field for this block.\n   * @param {*} newValue The value to set.\n   * @param {string} name The name of the field to set the value of.\n   */\n  setFieldValue(newValue, name) {\n    const field = this.getField(name);\n    if (!field) {\n      throw Error('Field \"' + name + '\" not found.');\n    }\n    field.setValue(newValue);\n  }\n\n  /**\n   * Set whether this block can chain onto the bottom of another block.\n   * @param {boolean} newBoolean True if there can be a previous statement.\n   * @param {(string|Array<string>|null)=} opt_check Statement type or\n   *     list of statement types.  Null/undefined if any type could be\n   * connected.\n   */\n  setPreviousStatement(newBoolean, opt_check) {\n    if (newBoolean) {\n      if (opt_check === undefined) {\n        opt_check = null;\n      }\n      if (!this.previousConnection) {\n        this.previousConnection =\n            this.makeConnection_(ConnectionType.PREVIOUS_STATEMENT);\n      }\n      this.previousConnection.setCheck(opt_check);\n    } else {\n      if (this.previousConnection) {\n        if (this.previousConnection.isConnected()) {\n          throw Error(\n              'Must disconnect previous statement before removing ' +\n              'connection.');\n        }\n        this.previousConnection.dispose();\n        this.previousConnection = null;\n      }\n    }\n  }\n\n  /**\n   * Set whether another block can chain onto the bottom of this block.\n   * @param {boolean} newBoolean True if there can be a next statement.\n   * @param {(string|Array<string>|null)=} opt_check Statement type or\n   *     list of statement types.  Null/undefined if any type could be\n   * connected.\n   */\n  setNextStatement(newBoolean, opt_check) {\n    if (newBoolean) {\n      if (opt_check === undefined) {\n        opt_check = null;\n      }\n      if (!this.nextConnection) {\n        this.nextConnection =\n            this.makeConnection_(ConnectionType.NEXT_STATEMENT);\n      }\n      this.nextConnection.setCheck(opt_check);\n    } else {\n      if (this.nextConnection) {\n        if (this.nextConnection.isConnected()) {\n          throw Error(\n              'Must disconnect next statement before removing ' +\n              'connection.');\n        }\n        this.nextConnection.dispose();\n        this.nextConnection = null;\n      }\n    }\n  }\n\n  /**\n   * Set whether this block returns a value.\n   * @param {boolean} newBoolean True if there is an output.\n   * @param {(string|Array<string>|null)=} opt_check Returned type or list\n   *     of returned types.  Null or undefined if any type could be returned\n   *     (e.g. variable get).\n   */\n  setOutput(newBoolean, opt_check) {\n    if (newBoolean) {\n      if (opt_check === undefined) {\n        opt_check = null;\n      }\n      if (!this.outputConnection) {\n        this.outputConnection =\n            this.makeConnection_(ConnectionType.OUTPUT_VALUE);\n      }\n      this.outputConnection.setCheck(opt_check);\n    } else {\n      if (this.outputConnection) {\n        if (this.outputConnection.isConnected()) {\n          throw Error(\n              'Must disconnect output value before removing connection.');\n        }\n        this.outputConnection.dispose();\n        this.outputConnection = null;\n      }\n    }\n  }\n\n  /**\n   * Set whether value inputs are arranged horizontally or vertically.\n   * @param {boolean} newBoolean True if inputs are horizontal.\n   */\n  setInputsInline(newBoolean) {\n    if (this.inputsInline !== newBoolean) {\n      eventUtils.fire(new (eventUtils.get(eventUtils.BLOCK_CHANGE))(\n          this, 'inline', null, this.inputsInline, newBoolean));\n      this.inputsInline = newBoolean;\n    }\n  }\n\n  /**\n   * Get whether value inputs are arranged horizontally or vertically.\n   * @return {boolean} True if inputs are horizontal.\n   */\n  getInputsInline() {\n    if (this.inputsInline !== undefined) {\n      // Set explicitly.\n      return this.inputsInline;\n    }\n    // Not defined explicitly.  Figure out what would look best.\n    for (let i = 1; i < this.inputList.length; i++) {\n      if (this.inputList[i - 1].type === inputTypes.DUMMY &&\n          this.inputList[i].type === inputTypes.DUMMY) {\n        // Two dummy inputs in a row.  Don't inline them.\n        return false;\n      }\n    }\n    for (let i = 1; i < this.inputList.length; i++) {\n      if (this.inputList[i - 1].type === inputTypes.VALUE &&\n          this.inputList[i].type === inputTypes.DUMMY) {\n        // Dummy input after a value input.  Inline them.\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Set the block's output shape.\n   * @param {?number} outputShape Value representing an output shape.\n   */\n  setOutputShape(outputShape) {\n    this.outputShape_ = outputShape;\n  }\n\n  /**\n   * Get the block's output shape.\n   * @return {?number} Value representing output shape if one exists.\n   */\n  getOutputShape() {\n    return this.outputShape_;\n  }\n\n  /**\n   * Get whether this block is enabled or not.\n   * @return {boolean} True if enabled.\n   */\n  isEnabled() {\n    return !this.disabled;\n  }\n\n  /**\n   * Set whether the block is enabled or not.\n   * @param {boolean} enabled True if enabled.\n   */\n  setEnabled(enabled) {\n    if (this.isEnabled() !== enabled) {\n      const oldValue = this.disabled;\n      this.disabled = !enabled;\n      eventUtils.fire(new (eventUtils.get(eventUtils.BLOCK_CHANGE))(\n          this, 'disabled', null, oldValue, !enabled));\n    }\n  }\n\n  /**\n   * Get whether the block is disabled or not due to parents.\n   * The block's own disabled property is not considered.\n   * @return {boolean} True if disabled.\n   */\n  getInheritedDisabled() {\n    let ancestor = this.getSurroundParent();\n    while (ancestor) {\n      if (ancestor.disabled) {\n        return true;\n      }\n      ancestor = ancestor.getSurroundParent();\n    }\n    // Ran off the top.\n    return false;\n  }\n\n  /**\n   * Get whether the block is collapsed or not.\n   * @return {boolean} True if collapsed.\n   */\n  isCollapsed() {\n    return this.collapsed_;\n  }\n\n  /**\n   * Set whether the block is collapsed or not.\n   * @param {boolean} collapsed True if collapsed.\n   */\n  setCollapsed(collapsed) {\n    if (this.collapsed_ !== collapsed) {\n      eventUtils.fire(new (eventUtils.get(eventUtils.BLOCK_CHANGE))(\n          this, 'collapsed', null, this.collapsed_, collapsed));\n      this.collapsed_ = collapsed;\n    }\n  }\n\n  /**\n   * Create a human-readable text representation of this block and any children.\n   * @param {number=} opt_maxLength Truncate the string to this length.\n   * @param {string=} opt_emptyToken The placeholder string used to denote an\n   *     empty field. If not specified, '?' is used.\n   * @return {string} Text of block.\n   */\n  toString(opt_maxLength, opt_emptyToken) {\n    let text = [];\n    const emptyFieldPlaceholder = opt_emptyToken || '?';\n\n    // Temporarily set flag to navigate to all fields.\n    const prevNavigateFields = ASTNode.NAVIGATE_ALL_FIELDS;\n    ASTNode.NAVIGATE_ALL_FIELDS = true;\n\n    let node = ASTNode.createBlockNode(this);\n    const rootNode = node;\n\n    /**\n     * Whether or not to add parentheses around an input.\n     * @param {!Connection} connection The connection.\n     * @return {boolean} True if we should add parentheses around the input.\n     */\n    function shouldAddParentheses(connection) {\n      let checks = connection.getCheck();\n      if (!checks && connection.targetConnection) {\n        checks = connection.targetConnection.getCheck();\n      }\n      return !!checks &&\n          (checks.indexOf('Boolean') !== -1 || checks.indexOf('Number') !== -1);\n    }\n\n    /**\n     * Check that we haven't circled back to the original root node.\n     */\n    function checkRoot() {\n      if (node && node.getType() === rootNode.getType() &&\n          node.getLocation() === rootNode.getLocation()) {\n        node = null;\n      }\n    }\n\n    // Traverse the AST building up our text string.\n    while (node) {\n      switch (node.getType()) {\n        case ASTNode.types.INPUT: {\n          const connection = /** @type {!Connection} */ (node.getLocation());\n          if (!node.in()) {\n            text.push(emptyFieldPlaceholder);\n          } else if (shouldAddParentheses(connection)) {\n            text.push('(');\n          }\n          break;\n        }\n        case ASTNode.types.FIELD: {\n          const field = /** @type {Field} */ (node.getLocation());\n          if (field.name !== constants.COLLAPSED_FIELD_NAME) {\n            text.push(field.getText());\n          }\n          break;\n        }\n      }\n\n      const current = node;\n      node = current.in() || current.next();\n      if (!node) {\n        // Can't go in or next, keep going out until we can go next.\n        node = current.out();\n        checkRoot();\n        while (node && !node.next()) {\n          node = node.out();\n          checkRoot();\n          // If we hit an input on the way up, possibly close out parentheses.\n          if (node && node.getType() === ASTNode.types.INPUT &&\n              shouldAddParentheses(\n                  /** @type {!Connection} */ (node.getLocation()))) {\n            text.push(')');\n          }\n        }\n        if (node) {\n          node = node.next();\n        }\n      }\n    }\n\n    // Restore state of NAVIGATE_ALL_FIELDS.\n    ASTNode.NAVIGATE_ALL_FIELDS = prevNavigateFields;\n\n    // Run through our text array and simplify expression to remove parentheses\n    // around single field blocks.\n    // E.g. ['repeat', '(', '10', ')', 'times', 'do', '?']\n    for (let i = 2; i < text.length; i++) {\n      if (text[i - 2] === '(' && text[i] === ')') {\n        text[i - 2] = text[i - 1];\n        text.splice(i - 1, 2);\n      }\n    }\n\n    // Join the text array, removing spaces around added parentheses.\n    text = text.reduce(function(acc, value) {\n      return acc + ((acc.substr(-1) === '(' || value === ')') ? '' : ' ') +\n          value;\n    }, '');\n    text = text.trim() || '???';\n    if (opt_maxLength) {\n      // TODO: Improve truncation so that text from this block is given\n      // priority. E.g. \"1+2+3+4+5+6+7+8+9=0\" should be \"...6+7+8+9=0\", not\n      // \"1+2+3+4+5...\". E.g. \"1+2+3+4+5=6+7+8+9+0\" should be \"...4+5=6+7...\".\n      if (text.length > opt_maxLength) {\n        text = text.substring(0, opt_maxLength - 3) + '...';\n      }\n    }\n    return text;\n  }\n\n  /**\n   * Shortcut for appending a value input row.\n   * @param {string} name Language-neutral identifier which may used to find\n   *     this input again.  Should be unique to this block.\n   * @return {!Input} The input object created.\n   */\n  appendValueInput(name) {\n    return this.appendInput_(inputTypes.VALUE, name);\n  }\n\n  /**\n   * Shortcut for appending a statement input row.\n   * @param {string} name Language-neutral identifier which may used to find\n   *     this input again.  Should be unique to this block.\n   * @return {!Input} The input object created.\n   */\n  appendStatementInput(name) {\n    return this.appendInput_(inputTypes.STATEMENT, name);\n  }\n\n  /**\n   * Shortcut for appending a dummy input row.\n   * @param {string=} opt_name Language-neutral identifier which may used to\n   *     find this input again.  Should be unique to this block.\n   * @return {!Input} The input object created.\n   */\n  appendDummyInput(opt_name) {\n    return this.appendInput_(inputTypes.DUMMY, opt_name || '');\n  }\n\n  /**\n   * Initialize this block using a cross-platform, internationalization-friendly\n   * JSON description.\n   * @param {!Object} json Structured data describing the block.\n   */\n  jsonInit(json) {\n    const warningPrefix = json['type'] ? 'Block \"' + json['type'] + '\": ' : '';\n\n    // Validate inputs.\n    if (json['output'] && json['previousStatement']) {\n      throw Error(\n          warningPrefix +\n          'Must not have both an output and a previousStatement.');\n    }\n\n    // Set basic properties of block.\n    // Makes styles backward compatible with old way of defining hat style.\n    if (json['style'] && json['style'].hat) {\n      this.hat = json['style'].hat;\n      // Must set to null so it doesn't error when checking for style and\n      // colour.\n      json['style'] = null;\n    }\n\n    if (json['style'] && json['colour']) {\n      throw Error(warningPrefix + 'Must not have both a colour and a style.');\n    } else if (json['style']) {\n      this.jsonInitStyle_(json, warningPrefix);\n    } else {\n      this.jsonInitColour_(json, warningPrefix);\n    }\n\n    // Interpolate the message blocks.\n    let i = 0;\n    while (json['message' + i] !== undefined) {\n      this.interpolate_(\n          json['message' + i], json['args' + i] || [],\n          json['lastDummyAlign' + i], warningPrefix);\n      i++;\n    }\n\n    if (json['inputsInline'] !== undefined) {\n      this.setInputsInline(json['inputsInline']);\n    }\n    // Set output and previous/next connections.\n    if (json['output'] !== undefined) {\n      this.setOutput(true, json['output']);\n    }\n    if (json['outputShape'] !== undefined) {\n      this.setOutputShape(json['outputShape']);\n    }\n    if (json['previousStatement'] !== undefined) {\n      this.setPreviousStatement(true, json['previousStatement']);\n    }\n    if (json['nextStatement'] !== undefined) {\n      this.setNextStatement(true, json['nextStatement']);\n    }\n    if (json['tooltip'] !== undefined) {\n      const rawValue = json['tooltip'];\n      const localizedText = parsing.replaceMessageReferences(rawValue);\n      this.setTooltip(localizedText);\n    }\n    if (json['enableContextMenu'] !== undefined) {\n      this.contextMenu = !!json['enableContextMenu'];\n    }\n    if (json['suppressPrefixSuffix'] !== undefined) {\n      this.suppressPrefixSuffix = !!json['suppressPrefixSuffix'];\n    }\n    if (json['helpUrl'] !== undefined) {\n      const rawValue = json['helpUrl'];\n      const localizedValue = parsing.replaceMessageReferences(rawValue);\n      this.setHelpUrl(localizedValue);\n    }\n    if (typeof json['extensions'] === 'string') {\n      console.warn(\n          warningPrefix +\n          'JSON attribute \\'extensions\\' should be an array of' +\n          ' strings. Found raw string in JSON for \\'' + json['type'] +\n          '\\' block.');\n      json['extensions'] = [json['extensions']];  // Correct and continue.\n    }\n\n    // Add the mutator to the block.\n    if (json['mutator'] !== undefined) {\n      Extensions.apply(json['mutator'], this, true);\n    }\n\n    const extensionNames = json['extensions'];\n    if (Array.isArray(extensionNames)) {\n      for (let j = 0; j < extensionNames.length; j++) {\n        Extensions.apply(extensionNames[j], this, false);\n      }\n    }\n  }\n\n  /**\n   * Initialize the colour of this block from the JSON description.\n   * @param {!Object} json Structured data describing the block.\n   * @param {string} warningPrefix Warning prefix string identifying block.\n   * @private\n   */\n  jsonInitColour_(json, warningPrefix) {\n    if ('colour' in json) {\n      if (json['colour'] === undefined) {\n        console.warn(warningPrefix + 'Undefined colour value.');\n      } else {\n        const rawValue = json['colour'];\n        try {\n          this.setColour(rawValue);\n        } catch (e) {\n          console.warn(warningPrefix + 'Illegal colour value: ', rawValue);\n        }\n      }\n    }\n  }\n\n  /**\n   * Initialize the style of this block from the JSON description.\n   * @param {!Object} json Structured data describing the block.\n   * @param {string} warningPrefix Warning prefix string identifying block.\n   * @private\n   */\n  jsonInitStyle_(json, warningPrefix) {\n    const blockStyleName = json['style'];\n    try {\n      this.setStyle(blockStyleName);\n    } catch (styleError) {\n      console.warn(warningPrefix + 'Style does not exist: ', blockStyleName);\n    }\n  }\n\n  /**\n   * Add key/values from mixinObj to this block object. By default, this method\n   * will check that the keys in mixinObj will not overwrite existing values in\n   * the block, including prototype values. This provides some insurance against\n   * mixin / extension incompatibilities with future block features. This check\n   * can be disabled by passing true as the second argument.\n   * @param {!Object} mixinObj The key/values pairs to add to this block object.\n   * @param {boolean=} opt_disableCheck Option flag to disable overwrite checks.\n   */\n  mixin(mixinObj, opt_disableCheck) {\n    if (opt_disableCheck !== undefined &&\n        typeof opt_disableCheck !== 'boolean') {\n      throw Error('opt_disableCheck must be a boolean if provided');\n    }\n    if (!opt_disableCheck) {\n      const overwrites = [];\n      for (const key in mixinObj) {\n        if (this[key] !== undefined) {\n          overwrites.push(key);\n        }\n      }\n      if (overwrites.length) {\n        throw Error(\n            'Mixin will overwrite block members: ' +\n            JSON.stringify(overwrites));\n      }\n    }\n    object.mixin(this, mixinObj);\n  }\n\n  /**\n   * Interpolate a message description onto the block.\n   * @param {string} message Text contains interpolation tokens (%1, %2, ...)\n   *     that match with fields or inputs defined in the args array.\n   * @param {!Array} args Array of arguments to be interpolated.\n   * @param {string|undefined} lastDummyAlign If a dummy input is added at the\n   *     end, how should it be aligned?\n   * @param {string} warningPrefix Warning prefix string identifying block.\n   * @private\n   */\n  interpolate_(message, args, lastDummyAlign, warningPrefix) {\n    const tokens = parsing.tokenizeInterpolation(message);\n    this.validateTokens_(tokens, args.length);\n    const elements = this.interpolateArguments_(tokens, args, lastDummyAlign);\n\n    // An array of [field, fieldName] tuples.\n    const fieldStack = [];\n    for (let i = 0, element; (element = elements[i]); i++) {\n      if (this.isInputKeyword_(element['type'])) {\n        const input = this.inputFromJson_(element, warningPrefix);\n        // Should never be null, but just in case.\n        if (input) {\n          for (let j = 0, tuple; (tuple = fieldStack[j]); j++) {\n            input.appendField(tuple[0], tuple[1]);\n          }\n          fieldStack.length = 0;\n        }\n      } else {\n        // All other types, including ones starting with 'input_' get routed\n        // here.\n        const field = this.fieldFromJson_(element);\n        if (field) {\n          fieldStack.push([field, element['name']]);\n        }\n      }\n    }\n  }\n\n  /**\n   * Validates that the tokens are within the correct bounds, with no\n   * duplicates, and that all of the arguments are referred to. Throws errors if\n   * any of these things are not true.\n   * @param {!Array<string|number>} tokens An array of tokens to validate\n   * @param {number} argsCount The number of args that need to be referred to.\n   * @private\n   */\n  validateTokens_(tokens, argsCount) {\n    const visitedArgsHash = [];\n    let visitedArgsCount = 0;\n    for (let i = 0; i < tokens.length; i++) {\n      const token = tokens[i];\n      if (typeof token !== 'number') {\n        continue;\n      }\n      if (token < 1 || token > argsCount) {\n        throw Error(\n            'Block \"' + this.type + '\": ' +\n            'Message index %' + token + ' out of range.');\n      }\n      if (visitedArgsHash[token]) {\n        throw Error(\n            'Block \"' + this.type + '\": ' +\n            'Message index %' + token + ' duplicated.');\n      }\n      visitedArgsHash[token] = true;\n      visitedArgsCount++;\n    }\n    if (visitedArgsCount !== argsCount) {\n      throw Error(\n          'Block \"' + this.type + '\": ' +\n          'Message does not reference all ' + argsCount + ' arg(s).');\n    }\n  }\n\n  /**\n   * Inserts args in place of numerical tokens. String args are converted to\n   * JSON that defines a label field. If necessary an extra dummy input is added\n   * to the end of the elements.\n   * @param {!Array<!string|number>} tokens The tokens to interpolate\n   * @param {!Array<!Object|string>} args The arguments to insert.\n   * @param {string|undefined} lastDummyAlign The alignment the added dummy\n   *     input should have, if we are required to add one.\n   * @return {!Array<!Object>} The JSON definitions of field and inputs to add\n   *     to the block.\n   * @private\n   */\n  interpolateArguments_(tokens, args, lastDummyAlign) {\n    const elements = [];\n    for (let i = 0; i < tokens.length; i++) {\n      let element = tokens[i];\n      if (typeof element === 'number') {\n        element = args[element - 1];\n      }\n      // Args can be strings, which is why this isn't elseif.\n      if (typeof element === 'string') {\n        element = this.stringToFieldJson_(element);\n        if (!element) {\n          continue;\n        }\n      }\n      elements.push(element);\n    }\n\n    const length = elements.length;\n    if (length && !this.isInputKeyword_(elements[length - 1]['type'])) {\n      const dummyInput = {'type': 'input_dummy'};\n      if (lastDummyAlign) {\n        dummyInput['align'] = lastDummyAlign;\n      }\n      elements.push(dummyInput);\n    }\n\n    return elements;\n  }\n\n  /**\n   * Creates a field from the JSON definition of a field. If a field with the\n   * given type cannot be found, this attempts to create a different field using\n   * the 'alt' property of the JSON definition (if it exists).\n   * @param {{alt:(string|undefined)}} element The element to try to turn into a\n   *     field.\n   * @return {?Field} The field defined by the JSON, or null if one\n   *     couldn't be created.\n   * @private\n   */\n  fieldFromJson_(element) {\n    const field = fieldRegistry.fromJson(element);\n    if (!field && element['alt']) {\n      if (typeof element['alt'] === 'string') {\n        const json = this.stringToFieldJson_(element['alt']);\n        return json ? this.fieldFromJson_(json) : null;\n      }\n      return this.fieldFromJson_(element['alt']);\n    }\n    return field;\n  }\n\n  /**\n   * Creates an input from the JSON definition of an input. Sets the input's\n   * check and alignment if they are provided.\n   * @param {!Object} element The JSON to turn into an input.\n   * @param {string} warningPrefix The prefix to add to warnings to help the\n   *     developer debug.\n   * @return {?Input} The input that has been created, or null if one\n   *     could not be created for some reason (should never happen).\n   * @private\n   */\n  inputFromJson_(element, warningPrefix) {\n    const alignmentLookup = {\n      'LEFT': Align.LEFT,\n      'RIGHT': Align.RIGHT,\n      'CENTRE': Align.CENTRE,\n      'CENTER': Align.CENTRE,\n    };\n\n    let input = null;\n    switch (element['type']) {\n      case 'input_value':\n        input = this.appendValueInput(element['name']);\n        break;\n      case 'input_statement':\n        input = this.appendStatementInput(element['name']);\n        break;\n      case 'input_dummy':\n        input = this.appendDummyInput(element['name']);\n        break;\n    }\n    // Should never be hit because of interpolate_'s checks, but just in case.\n    if (!input) {\n      return null;\n    }\n\n    if (element['check']) {\n      input.setCheck(element['check']);\n    }\n    if (element['align']) {\n      const alignment = alignmentLookup[element['align'].toUpperCase()];\n      if (alignment === undefined) {\n        console.warn(warningPrefix + 'Illegal align value: ', element['align']);\n      } else {\n        input.setAlign(alignment);\n      }\n    }\n    return input;\n  }\n\n  /**\n   * Returns true if the given string matches one of the input keywords.\n   * @param {string} str The string to check.\n   * @return {boolean} True if the given string matches one of the input\n   *     keywords, false otherwise.\n   * @private\n   */\n  isInputKeyword_(str) {\n    return str === 'input_value' || str === 'input_statement' ||\n        str === 'input_dummy';\n  }\n\n  /**\n   * Turns a string into the JSON definition of a label field. If the string\n   * becomes an empty string when trimmed, this returns null.\n   * @param {string} str String to turn into the JSON definition of a label\n   *     field.\n   * @return {?{text: string, type: string}} The JSON definition or null.\n   * @private\n   */\n  stringToFieldJson_(str) {\n    str = str.trim();\n    if (str) {\n      return {\n        'type': 'field_label',\n        'text': str,\n      };\n    }\n    return null;\n  }\n\n  /**\n   * Add a value input, statement input or local variable to this block.\n   * @param {number} type One of Blockly.inputTypes.\n   * @param {string} name Language-neutral identifier which may used to find\n   *     this input again.  Should be unique to this block.\n   * @return {!Input} The input object created.\n   * @protected\n   */\n  appendInput_(type, name) {\n    let connection = null;\n    if (type === inputTypes.VALUE || type === inputTypes.STATEMENT) {\n      connection = this.makeConnection_(type);\n    }\n    if (type === inputTypes.STATEMENT) {\n      this.statementInputCount++;\n    }\n    const input = new Input(type, name, this, connection);\n    // Append input to list.\n    this.inputList.push(input);\n    return input;\n  }\n\n  /**\n   * Move a named input to a different location on this block.\n   * @param {string} name The name of the input to move.\n   * @param {?string} refName Name of input that should be after the moved\n   *     input,\n   *   or null to be the input at the end.\n   */\n  moveInputBefore(name, refName) {\n    if (name === refName) {\n      return;\n    }\n    // Find both inputs.\n    let inputIndex = -1;\n    let refIndex = refName ? -1 : this.inputList.length;\n    for (let i = 0, input; (input = this.inputList[i]); i++) {\n      if (input.name === name) {\n        inputIndex = i;\n        if (refIndex !== -1) {\n          break;\n        }\n      } else if (refName && input.name === refName) {\n        refIndex = i;\n        if (inputIndex !== -1) {\n          break;\n        }\n      }\n    }\n    if (inputIndex === -1) {\n      throw Error('Named input \"' + name + '\" not found.');\n    }\n    if (refIndex === -1) {\n      throw Error('Reference input \"' + refName + '\" not found.');\n    }\n    this.moveNumberedInputBefore(inputIndex, refIndex);\n  }\n\n  /**\n   * Move a numbered input to a different location on this block.\n   * @param {number} inputIndex Index of the input to move.\n   * @param {number} refIndex Index of input that should be after the moved\n   *     input.\n   */\n  moveNumberedInputBefore(inputIndex, refIndex) {\n    // Validate arguments.\n    if (inputIndex === refIndex) {\n      throw Error('Can\\'t move input to itself.');\n    }\n    if (inputIndex >= this.inputList.length) {\n      throw RangeError('Input index ' + inputIndex + ' out of bounds.');\n    }\n    if (refIndex > this.inputList.length) {\n      throw RangeError('Reference input ' + refIndex + ' out of bounds.');\n    }\n    // Remove input.\n    const input = this.inputList[inputIndex];\n    this.inputList.splice(inputIndex, 1);\n    if (inputIndex < refIndex) {\n      refIndex--;\n    }\n    // Reinsert input.\n    this.inputList.splice(refIndex, 0, input);\n  }\n\n  /**\n   * Remove an input from this block.\n   * @param {string} name The name of the input.\n   * @param {boolean=} opt_quiet True to prevent an error if input is not\n   *     present.\n   * @return {boolean} True if operation succeeds, false if input is not present\n   *     and opt_quiet is true.\n   * @throws {Error} if the input is not present and opt_quiet is not true.\n   */\n  removeInput(name, opt_quiet) {\n    for (let i = 0, input; (input = this.inputList[i]); i++) {\n      if (input.name === name) {\n        if (input.type === inputTypes.STATEMENT) {\n          this.statementInputCount--;\n        }\n        input.dispose();\n        this.inputList.splice(i, 1);\n        return true;\n      }\n    }\n    if (opt_quiet) {\n      return false;\n    }\n    throw Error('Input not found: ' + name);\n  }\n\n  /**\n   * Fetches the named input object.\n   * @param {string} name The name of the input.\n   * @return {?Input} The input object, or null if input does not exist.\n   */\n  getInput(name) {\n    for (let i = 0, input; (input = this.inputList[i]); i++) {\n      if (input.name === name) {\n        return input;\n      }\n    }\n    // This input does not exist.\n    return null;\n  }\n\n  /**\n   * Fetches the block attached to the named input.\n   * @param {string} name The name of the input.\n   * @return {?Block} The attached value block, or null if the input is\n   *     either disconnected or if the input does not exist.\n   */\n  getInputTargetBlock(name) {\n    const input = this.getInput(name);\n    return input && input.connection && input.connection.targetBlock();\n  }\n\n  /**\n   * Returns the comment on this block (or null if there is no comment).\n   * @return {?string} Block's comment.\n   */\n  getCommentText() {\n    return this.commentModel.text;\n  }\n\n  /**\n   * Set this block's comment text.\n   * @param {?string} text The text, or null to delete.\n   */\n  setCommentText(text) {\n    if (this.commentModel.text === text) {\n      return;\n    }\n    eventUtils.fire(new (eventUtils.get(eventUtils.BLOCK_CHANGE))(\n        this, 'comment', null, this.commentModel.text, text));\n    this.commentModel.text = text;\n    this.comment = text;  // For backwards compatibility.\n  }\n\n  /**\n   * Set this block's warning text.\n   * @param {?string} _text The text, or null to delete.\n   * @param {string=} _opt_id An optional ID for the warning text to be able to\n   *     maintain multiple warnings.\n   */\n  setWarningText(_text, _opt_id) {\n    // NOP.\n  }\n\n  /**\n   * Give this block a mutator dialog.\n   * @param {Mutator} _mutator A mutator dialog instance or null to\n   *     remove.\n   */\n  setMutator(_mutator) {\n    // NOP.\n  }\n\n  /**\n   * Return the coordinates of the top-left corner of this block relative to the\n   * drawing surface's origin (0,0), in workspace units.\n   * @return {!Coordinate} Object with .x and .y properties.\n   */\n  getRelativeToSurfaceXY() {\n    return this.xy_;\n  }\n\n  /**\n   * Move a block by a relative offset.\n   * @param {number} dx Horizontal offset, in workspace units.\n   * @param {number} dy Vertical offset, in workspace units.\n   */\n  moveBy(dx, dy) {\n    if (this.parentBlock_) {\n      throw Error('Block has parent.');\n    }\n    const event = /** @type {!BlockMove} */ (\n        new (eventUtils.get(eventUtils.BLOCK_MOVE))(this));\n    this.xy_.translate(dx, dy);\n    event.recordNew();\n    eventUtils.fire(event);\n  }\n\n  /**\n   * Create a connection of the specified type.\n   * @param {number} type The type of the connection to create.\n   * @return {!Connection} A new connection of the specified type.\n   * @protected\n   */\n  makeConnection_(type) {\n    return new Connection(this, type);\n  }\n\n  /**\n   * Recursively checks whether all statement and value inputs are filled with\n   * blocks. Also checks all following statement blocks in this stack.\n   * @param {boolean=} opt_shadowBlocksAreFilled An optional argument\n   *     controlling whether shadow blocks are counted as filled. Defaults to\n   *     true.\n   * @return {boolean} True if all inputs are filled, false otherwise.\n   */\n  allInputsFilled(opt_shadowBlocksAreFilled) {\n    // Account for the shadow block filledness toggle.\n    if (opt_shadowBlocksAreFilled === undefined) {\n      opt_shadowBlocksAreFilled = true;\n    }\n    if (!opt_shadowBlocksAreFilled && this.isShadow()) {\n      return false;\n    }\n\n    // Recursively check each input block of the current block.\n    for (let i = 0, input; (input = this.inputList[i]); i++) {\n      if (!input.connection) {\n        continue;\n      }\n      const target = input.connection.targetBlock();\n      if (!target || !target.allInputsFilled(opt_shadowBlocksAreFilled)) {\n        return false;\n      }\n    }\n\n    // Recursively check the next block after the current block.\n    const next = this.getNextBlock();\n    if (next) {\n      return next.allInputsFilled(opt_shadowBlocksAreFilled);\n    }\n\n    return true;\n  }\n\n  /**\n   * This method returns a string describing this Block in developer terms (type\n   * name and ID; English only).\n   *\n   * Intended to on be used in console logs and errors. If you need a string\n   * that uses the user's native language (including block text, field values,\n   * and child blocks), use [toString()]{@link Block#toString}.\n   * @return {string} The description.\n   */\n  toDevString() {\n    let msg = this.type ? '\"' + this.type + '\" block' : 'Block';\n    if (this.id) {\n      msg += ' (id=\"' + this.id + '\")';\n    }\n    return msg;\n  }\n}\n\n/**\n * @typedef {{\n *            text:?string,\n *            pinned:boolean,\n *            size:Size\n *          }}\n */\nBlock.CommentModel;\n\n/**\n * An optional callback method to use whenever the block's parent workspace\n * changes. This is usually only called from the constructor, the block type\n * initializer function, or an extension initializer function.\n * @type {undefined|?function(Abstract)}\n */\nBlock.prototype.onchange;\n\n/**\n * The language-neutral ID given to the collapsed input.\n * @const {string}\n */\nBlock.COLLAPSED_INPUT_NAME = constants.COLLAPSED_INPUT_NAME;\n\n/**\n * The language-neutral ID given to the collapsed field.\n * @const {string}\n */\nBlock.COLLAPSED_FIELD_NAME = constants.COLLAPSED_FIELD_NAME;\n\nexports.Block = Block;\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Registry for context menu option items.\n */\n'use strict';\n\n/**\n * Registry for context menu option items.\n * @class\n */\ngoog.module('Blockly.ContextMenuRegistry');\n\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockSvg} = goog.requireType('Blockly.BlockSvg');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceSvg} = goog.requireType('Blockly.WorkspaceSvg');\n\n\n/**\n * Class for the registry of context menu items. This is intended to be a\n * singleton. You should not create a new instance, and only access this class\n * from ContextMenuRegistry.registry.\n * @alias Blockly.ContextMenuRegistry\n */\nclass ContextMenuRegistry {\n  /**\n   * Resets the existing singleton instance of ContextMenuRegistry.\n   */\n  constructor() {\n    this.reset();\n  }\n\n  /**\n   * Clear and recreate the registry.\n   */\n  reset() {\n    /**\n     * Registry of all registered RegistryItems, keyed by ID.\n     * @type {!Object<string, !ContextMenuRegistry.RegistryItem>}\n     * @private\n     */\n    this.registry_ = Object.create(null);\n  }\n\n  /**\n   * Registers a RegistryItem.\n   * @param {!ContextMenuRegistry.RegistryItem} item Context menu item to\n   *     register.\n   * @throws {Error} if an item with the given ID already exists.\n   */\n  register(item) {\n    if (this.registry_[item.id]) {\n      throw Error('Menu item with ID \"' + item.id + '\" is already registered.');\n    }\n    this.registry_[item.id] = item;\n  }\n\n  /**\n   * Unregisters a RegistryItem with the given ID.\n   * @param {string} id The ID of the RegistryItem to remove.\n   * @throws {Error} if an item with the given ID does not exist.\n   */\n  unregister(id) {\n    if (!this.registry_[id]) {\n      throw new Error('Menu item with ID \"' + id + '\" not found.');\n    }\n    delete this.registry_[id];\n  }\n\n  /**\n   * @param {string} id The ID of the RegistryItem to get.\n   * @return {?ContextMenuRegistry.RegistryItem} RegistryItem or null if not\n   *     found\n   */\n  getItem(id) {\n    return this.registry_[id] || null;\n  }\n\n  /**\n   * Gets the valid context menu options for the given scope type (e.g. block or\n   * workspace) and scope. Blocks are only shown if the preconditionFn shows\n   * they should not be hidden.\n   * @param {!ContextMenuRegistry.ScopeType} scopeType Type of scope where menu\n   *     should be shown (e.g. on a block or on a workspace)\n   * @param {!ContextMenuRegistry.Scope} scope Current scope of context menu\n   *     (i.e., the exact workspace or block being clicked on)\n   * @return {!Array<!ContextMenuRegistry.ContextMenuOption>} the list of\n   *     ContextMenuOptions\n   */\n  getContextMenuOptions(scopeType, scope) {\n    const menuOptions = [];\n    const registry = this.registry_;\n    Object.keys(registry).forEach(function(id) {\n      const item = registry[id];\n      if (scopeType === item.scopeType) {\n        const precondition = item.preconditionFn(scope);\n        if (precondition !== 'hidden') {\n          const displayText = typeof item.displayText === 'function' ?\n              item.displayText(scope) :\n              item.displayText;\n          /** @type {!ContextMenuRegistry.ContextMenuOption} */\n          const menuOption = {\n            text: displayText,\n            enabled: (precondition === 'enabled'),\n            callback: item.callback,\n            scope: scope,\n            weight: item.weight,\n          };\n          menuOptions.push(menuOption);\n        }\n      }\n    });\n    menuOptions.sort(function(a, b) {\n      return a.weight - b.weight;\n    });\n    return menuOptions;\n  }\n}\n\n/**\n * Where this menu item should be rendered. If the menu item should be rendered\n * in multiple scopes, e.g. on both a block and a workspace, it should be\n * registered for each scope.\n * @enum {string}\n */\nContextMenuRegistry.ScopeType = {\n  BLOCK: 'block',\n  WORKSPACE: 'workspace',\n};\n\n/**\n * The actual workspace/block where the menu is being rendered. This is passed\n * to callback and displayText functions that depend on this information.\n * @typedef {{\n *    block: (BlockSvg|undefined),\n *    workspace: (WorkspaceSvg|undefined)\n * }}\n */\nContextMenuRegistry.Scope;\n\n/**\n * A menu item as entered in the registry.\n * @typedef {{\n *    callback: function(!ContextMenuRegistry.Scope),\n *    scopeType: !ContextMenuRegistry.ScopeType,\n *    displayText: ((function(!ContextMenuRegistry.Scope):string)|string),\n *    preconditionFn: function(!ContextMenuRegistry.Scope):string,\n *    weight: number,\n *    id: string\n * }}\n */\nContextMenuRegistry.RegistryItem;\n\n/**\n * A menu item as presented to contextmenu.js.\n * @typedef {{\n *    text: string,\n *    enabled: boolean,\n *    callback: function(!ContextMenuRegistry.Scope),\n *    scope: !ContextMenuRegistry.Scope,\n *    weight: number\n * }}\n */\nContextMenuRegistry.ContextMenuOption;\n\n/**\n * Singleton instance of this class. All interactions with this class should be\n * done on this object.\n * @type {!ContextMenuRegistry}\n */\nContextMenuRegistry.registry = new ContextMenuRegistry();\n\nexports.ContextMenuRegistry = ContextMenuRegistry;\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The interface for a bounded element.\n */\n\n'use strict';\n\n/**\n * The interface for a bounded element.\n * @namespace Blockly.IBoundedElement\n */\ngoog.module('Blockly.IBoundedElement');\n\n/* eslint-disable-next-line no-unused-vars */\nconst {Rect} = goog.requireType('Blockly.utils.Rect');\n\n\n/**\n * A bounded element interface.\n * @interface\n * @alias Blockly.IBoundedElement\n */\nconst IBoundedElement = function() {};\n\n/**\n * Returns the coordinates of a bounded element describing the dimensions of the\n * element.\n * Coordinate system: workspace coordinates.\n * @return {!Rect} Object with coordinates of the bounded element.\n */\nIBoundedElement.prototype.getBoundingRectangle;\n\n/**\n * Move the element by a relative offset.\n * @param {number} dx Horizontal offset in workspace units.\n * @param {number} dy Vertical offset in workspace units.\n */\nIBoundedElement.prototype.moveBy;\n\nexports.IBoundedElement = IBoundedElement;\n","/**\n * @license\n * Copyright 2016 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Components for creating connections between blocks.\n */\n'use strict';\n\n/**\n * Components for creating connections between blocks.\n * @class\n */\ngoog.module('Blockly.RenderedConnection');\n\nconst common = goog.require('Blockly.common');\nconst dom = goog.require('Blockly.utils.dom');\nconst eventUtils = goog.require('Blockly.Events.utils');\nconst internalConstants = goog.require('Blockly.internalConstants');\nconst svgPaths = goog.require('Blockly.utils.svgPaths');\nconst svgMath = goog.require('Blockly.utils.svgMath');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockSvg} = goog.requireType('Blockly.BlockSvg');\n/* eslint-disable-next-line no-unused-vars */\nconst {Block} = goog.requireType('Blockly.Block');\nconst {config} = goog.require('Blockly.config');\n/* eslint-disable-next-line no-unused-vars */\nconst {ConnectionDB} = goog.requireType('Blockly.ConnectionDB');\nconst {ConnectionType} = goog.require('Blockly.ConnectionType');\nconst {Connection} = goog.require('Blockly.Connection');\nconst {Coordinate} = goog.require('Blockly.utils.Coordinate');\nconst {Svg} = goog.require('Blockly.utils.Svg');\n\n\n/**\n * Maximum randomness in workspace units for bumping a block.\n * @const\n */\nconst BUMP_RANDOMNESS = 10;\n\n/**\n * Class for a connection between blocks that may be rendered on screen.\n * @extends {Connection}\n * @alias Blockly.RenderedConnection\n */\nclass RenderedConnection extends Connection {\n  /**\n   * @param {!BlockSvg} source The block establishing this connection.\n   * @param {number} type The type of the connection.\n   */\n  constructor(source, type) {\n    super(source, type);\n\n    /** @type {!BlockSvg} */\n    this.sourceBlock_;\n\n    /**\n     * Connection database for connections of this type on the current\n     * workspace.\n     * @const {!ConnectionDB}\n     * @private\n     */\n    this.db_ = source.workspace.connectionDBList[type];\n\n    /**\n     * Connection database for connections compatible with this type on the\n     * current workspace.\n     * @const {!ConnectionDB}\n     * @private\n     */\n    this.dbOpposite_ =\n        source.workspace\n            .connectionDBList[internalConstants.OPPOSITE_TYPE[type]];\n\n    /**\n     * Workspace units, (0, 0) is top left of block.\n     * @type {!Coordinate}\n     * @private\n     */\n    this.offsetInBlock_ = new Coordinate(0, 0);\n\n    /**\n     * Describes the state of this connection's tracked-ness.\n     * @type {RenderedConnection.TrackedState}\n     * @private\n     */\n    this.trackedState_ = RenderedConnection.TrackedState.WILL_TRACK;\n\n    /**\n     * Connection this connection connects to.  Null if not connected.\n     * @type {RenderedConnection}\n     */\n    this.targetConnection = null;\n  }\n\n  /**\n   * Dispose of this connection. Remove it from the database (if it is\n   * tracked) and call the super-function to deal with connected blocks.\n   * @override\n   * @package\n   */\n  dispose() {\n    super.dispose();\n    if (this.trackedState_ === RenderedConnection.TrackedState.TRACKED) {\n      this.db_.removeConnection(this, this.y);\n    }\n  }\n\n  /**\n   * Get the source block for this connection.\n   * @return {!BlockSvg} The source block.\n   * @override\n   */\n  getSourceBlock() {\n    return /** @type {!BlockSvg} */ (super.getSourceBlock());\n  }\n\n  /**\n   * Returns the block that this connection connects to.\n   * @return {?BlockSvg} The connected block or null if none is connected.\n   * @override\n   */\n  targetBlock() {\n    return /** @type {BlockSvg} */ (super.targetBlock());\n  }\n\n  /**\n   * Returns the distance between this connection and another connection in\n   * workspace units.\n   * @param {!Connection} otherConnection The other connection to measure\n   *     the distance to.\n   * @return {number} The distance between connections, in workspace units.\n   */\n  distanceFrom(otherConnection) {\n    const xDiff = this.x - otherConnection.x;\n    const yDiff = this.y - otherConnection.y;\n    return Math.sqrt(xDiff * xDiff + yDiff * yDiff);\n  }\n\n  /**\n   * Move the block(s) belonging to the connection to a point where they don't\n   * visually interfere with the specified connection.\n   * @param {!RenderedConnection} staticConnection The connection to move away\n   *     from.\n   * @package\n   */\n  bumpAwayFrom(staticConnection) {\n    if (this.sourceBlock_.workspace.isDragging()) {\n      // Don't move blocks around while the user is doing the same.\n      return;\n    }\n    // Move the root block.\n    let rootBlock = this.sourceBlock_.getRootBlock();\n    if (rootBlock.isInFlyout) {\n      // Don't move blocks around in a flyout.\n      return;\n    }\n    let reverse = false;\n    if (!rootBlock.isMovable()) {\n      // Can't bump an uneditable block away.\n      // Check to see if the other block is movable.\n      rootBlock = staticConnection.getSourceBlock().getRootBlock();\n      if (!rootBlock.isMovable()) {\n        return;\n      }\n      // Swap the connections and move the 'static' connection instead.\n      staticConnection = this;\n      reverse = true;\n    }\n    // Raise it to the top for extra visibility.\n    const selected = common.getSelected() == rootBlock;\n    selected || rootBlock.addSelect();\n    let dx = (staticConnection.x + config.snapRadius +\n              Math.floor(Math.random() * BUMP_RANDOMNESS)) -\n        this.x;\n    let dy = (staticConnection.y + config.snapRadius +\n              Math.floor(Math.random() * BUMP_RANDOMNESS)) -\n        this.y;\n    if (reverse) {\n      // When reversing a bump due to an uneditable block, bump up.\n      dy = -dy;\n    }\n    if (rootBlock.RTL) {\n      dx = (staticConnection.x - config.snapRadius -\n            Math.floor(Math.random() * BUMP_RANDOMNESS)) -\n          this.x;\n    }\n    rootBlock.moveBy(dx, dy);\n    selected || rootBlock.removeSelect();\n  }\n\n  /**\n   * Change the connection's coordinates.\n   * @param {number} x New absolute x coordinate, in workspace coordinates.\n   * @param {number} y New absolute y coordinate, in workspace coordinates.\n   */\n  moveTo(x, y) {\n    if (this.trackedState_ === RenderedConnection.TrackedState.WILL_TRACK) {\n      this.db_.addConnection(this, y);\n      this.trackedState_ = RenderedConnection.TrackedState.TRACKED;\n    } else if (this.trackedState_ === RenderedConnection.TrackedState.TRACKED) {\n      this.db_.removeConnection(this, this.y);\n      this.db_.addConnection(this, y);\n    }\n    this.x = x;\n    this.y = y;\n  }\n\n  /**\n   * Change the connection's coordinates.\n   * @param {number} dx Change to x coordinate, in workspace units.\n   * @param {number} dy Change to y coordinate, in workspace units.\n   */\n  moveBy(dx, dy) {\n    this.moveTo(this.x + dx, this.y + dy);\n  }\n\n  /**\n   * Move this connection to the location given by its offset within the block\n   * and the location of the block's top left corner.\n   * @param {!Coordinate} blockTL The location of the top left\n   *     corner of the block, in workspace coordinates.\n   */\n  moveToOffset(blockTL) {\n    this.moveTo(\n        blockTL.x + this.offsetInBlock_.x, blockTL.y + this.offsetInBlock_.y);\n  }\n\n  /**\n   * Set the offset of this connection relative to the top left of its block.\n   * @param {number} x The new relative x, in workspace units.\n   * @param {number} y The new relative y, in workspace units.\n   */\n  setOffsetInBlock(x, y) {\n    this.offsetInBlock_.x = x;\n    this.offsetInBlock_.y = y;\n  }\n\n  /**\n   * Get the offset of this connection relative to the top left of its block.\n   * @return {!Coordinate} The offset of the connection.\n   * @package\n   */\n  getOffsetInBlock() {\n    return this.offsetInBlock_;\n  }\n\n  /**\n   * Move the blocks on either side of this connection right next to each other.\n   * @package\n   */\n  tighten() {\n    const dx = this.targetConnection.x - this.x;\n    const dy = this.targetConnection.y - this.y;\n    if (dx !== 0 || dy !== 0) {\n      const block = this.targetBlock();\n      const svgRoot = block.getSvgRoot();\n      if (!svgRoot) {\n        throw Error('block is not rendered.');\n      }\n      // Workspace coordinates.\n      const xy = svgMath.getRelativeXY(svgRoot);\n      block.getSvgRoot().setAttribute(\n          'transform', 'translate(' + (xy.x - dx) + ',' + (xy.y - dy) + ')');\n      block.moveConnections(-dx, -dy);\n    }\n  }\n\n  /**\n   * Find the closest compatible connection to this connection.\n   * All parameters are in workspace units.\n   * @param {number} maxLimit The maximum radius to another connection.\n   * @param {!Coordinate} dxy Offset between this connection's location\n   *     in the database and the current location (as a result of dragging).\n   * @return {!{connection: ?Connection, radius: number}} Contains two\n   *     properties: 'connection' which is either another connection or null,\n   *     and 'radius' which is the distance.\n   */\n  closest(maxLimit, dxy) {\n    return this.dbOpposite_.searchForClosest(this, maxLimit, dxy);\n  }\n\n  /**\n   * Add highlighting around this connection.\n   */\n  highlight() {\n    let steps;\n    const sourceBlockSvg = /** @type {!BlockSvg} */ (this.sourceBlock_);\n    const renderConstants =\n        sourceBlockSvg.workspace.getRenderer().getConstants();\n    const shape = renderConstants.shapeFor(this);\n    if (this.type === ConnectionType.INPUT_VALUE ||\n        this.type === ConnectionType.OUTPUT_VALUE) {\n      // Vertical line, puzzle tab, vertical line.\n      const yLen = renderConstants.TAB_OFFSET_FROM_TOP;\n      steps = svgPaths.moveBy(0, -yLen) + svgPaths.lineOnAxis('v', yLen) +\n          shape.pathDown + svgPaths.lineOnAxis('v', yLen);\n    } else {\n      const xLen =\n          renderConstants.NOTCH_OFFSET_LEFT - renderConstants.CORNER_RADIUS;\n      // Horizontal line, notch, horizontal line.\n      steps = svgPaths.moveBy(-xLen, 0) + svgPaths.lineOnAxis('h', xLen) +\n          shape.pathLeft + svgPaths.lineOnAxis('h', xLen);\n    }\n    const xy = this.sourceBlock_.getRelativeToSurfaceXY();\n    const x = this.x - xy.x;\n    const y = this.y - xy.y;\n    Connection.highlightedPath_ = dom.createSvgElement(\n        Svg.PATH, {\n          'class': 'blocklyHighlightedConnectionPath',\n          'd': steps,\n          'transform': 'translate(' + x + ',' + y + ')' +\n              (this.sourceBlock_.RTL ? ' scale(-1 1)' : ''),\n        },\n        this.sourceBlock_.getSvgRoot());\n  }\n\n  /**\n   * Remove the highlighting around this connection.\n   */\n  unhighlight() {\n    dom.removeNode(Connection.highlightedPath_);\n    delete Connection.highlightedPath_;\n  }\n\n  /**\n   * Set whether this connections is tracked in the database or not.\n   * @param {boolean} doTracking If true, start tracking. If false, stop\n   *     tracking.\n   * @package\n   */\n  setTracking(doTracking) {\n    if ((doTracking &&\n         this.trackedState_ === RenderedConnection.TrackedState.TRACKED) ||\n        (!doTracking &&\n         this.trackedState_ === RenderedConnection.TrackedState.UNTRACKED)) {\n      return;\n    }\n    if (this.sourceBlock_.isInFlyout) {\n      // Don't bother maintaining a database of connections in a flyout.\n      return;\n    }\n    if (doTracking) {\n      this.db_.addConnection(this, this.y);\n      this.trackedState_ = RenderedConnection.TrackedState.TRACKED;\n      return;\n    }\n    if (this.trackedState_ === RenderedConnection.TrackedState.TRACKED) {\n      this.db_.removeConnection(this, this.y);\n    }\n    this.trackedState_ = RenderedConnection.TrackedState.UNTRACKED;\n  }\n\n  /**\n   * Stop tracking this connection, as well as all down-stream connections on\n   * any block attached to this connection. This happens when a block is\n   * collapsed.\n   *\n   * Also closes down-stream icons/bubbles.\n   * @package\n   */\n  stopTrackingAll() {\n    this.setTracking(false);\n    if (this.targetConnection) {\n      const blocks = this.targetBlock().getDescendants(false);\n      for (let i = 0; i < blocks.length; i++) {\n        const block = blocks[i];\n        // Stop tracking connections of all children.\n        const connections = block.getConnections_(true);\n        for (let j = 0; j < connections.length; j++) {\n          /** @type {!RenderedConnection} */ (connections[j])\n              .setTracking(false);\n        }\n        // Close all bubbles of all children.\n        const icons = block.getIcons();\n        for (let j = 0; j < icons.length; j++) {\n          icons[j].setVisible(false);\n        }\n      }\n    }\n  }\n\n  /**\n   * Start tracking this connection, as well as all down-stream connections on\n   * any block attached to this connection. This happens when a block is\n   * expanded.\n   * @return {!Array<!Block>} List of blocks to render.\n   */\n  startTrackingAll() {\n    this.setTracking(true);\n    // All blocks that are not tracked must start tracking before any\n    // rendering takes place, since rendering requires knowing the dimensions\n    // of lower blocks. Also, since rendering a block renders all its parents,\n    // we only need to render the leaf nodes.\n    let renderList = [];\n    if (this.type !== ConnectionType.INPUT_VALUE &&\n        this.type !== ConnectionType.NEXT_STATEMENT) {\n      // Only spider down.\n      return renderList;\n    }\n    const block = this.targetBlock();\n    if (block) {\n      let connections;\n      if (block.isCollapsed()) {\n        // This block should only be partially revealed since it is collapsed.\n        connections = [];\n        block.outputConnection && connections.push(block.outputConnection);\n        block.nextConnection && connections.push(block.nextConnection);\n        block.previousConnection && connections.push(block.previousConnection);\n      } else {\n        // Show all connections of this block.\n        connections = block.getConnections_(true);\n      }\n      for (let i = 0; i < connections.length; i++) {\n        renderList.push.apply(renderList, connections[i].startTrackingAll());\n      }\n      if (!renderList.length) {\n        // Leaf block.\n        renderList = [block];\n      }\n    }\n    return renderList;\n  }\n\n  /**\n   * Behavior after a connection attempt fails.\n   * Bumps this connection away from the other connection. Called when an\n   * attempted connection fails.\n   * @param {!Connection} otherConnection Connection that this connection\n   *     failed to connect to.\n   * @package\n   */\n  onFailedConnect(otherConnection) {\n    const block = this.getSourceBlock();\n    if (eventUtils.getRecordUndo()) {\n      const group = eventUtils.getGroup();\n      setTimeout(function() {\n        if (!block.isDisposed() && !block.getParent()) {\n          eventUtils.setGroup(group);\n          this.bumpAwayFrom(\n              /** @type {!RenderedConnection} */ (otherConnection));\n          eventUtils.setGroup(false);\n        }\n      }.bind(this), config.bumpDelay);\n    }\n  }\n\n  /**\n   * Disconnect two blocks that are connected by this connection.\n   * @param {!Block} parentBlock The superior block.\n   * @param {!Block} childBlock The inferior block.\n   * @protected\n   * @override\n   */\n  disconnectInternal_(parentBlock, childBlock) {\n    super.disconnectInternal_(parentBlock, childBlock);\n    const renderedParent = /** @type {!BlockSvg} */ (parentBlock);\n    const renderedChild = /** @type {!BlockSvg} */ (childBlock);\n\n    // Rerender the parent so that it may reflow.\n    if (renderedParent.rendered) {\n      renderedParent.render();\n    }\n    if (renderedChild.rendered) {\n      renderedChild.updateDisabled();\n      renderedChild.render();\n      // Reset visibility, since the child is now a top block.\n      renderedChild.getSvgRoot().style.display = 'block';\n    }\n  }\n\n  /**\n   * Respawn the shadow block if there was one connected to the this connection.\n   * Render/rerender blocks as needed.\n   * @protected\n   * @override\n   */\n  respawnShadow_() {\n    super.respawnShadow_();\n    const blockShadow = this.targetBlock();\n    if (!blockShadow) {\n      return;\n    }\n    blockShadow.initSvg();\n    blockShadow.render(false);\n\n    const parentBlock = this.getSourceBlock();\n    if (parentBlock.rendered) {\n      parentBlock.render();\n    }\n  }\n\n  /**\n   * Find all nearby compatible connections to this connection.\n   * Type checking does not apply, since this function is used for bumping.\n   * @param {number} maxLimit The maximum radius to another connection, in\n   *     workspace units.\n   * @return {!Array<!Connection>} List of connections.\n   * @package\n   */\n  neighbours(maxLimit) {\n    return this.dbOpposite_.getNeighbours(this, maxLimit);\n  }\n\n  /**\n   * Connect two connections together.  This is the connection on the superior\n   * block.  Rerender blocks as needed.\n   * @param {!Connection} childConnection Connection on inferior block.\n   * @protected\n   */\n  connect_(childConnection) {\n    super.connect_(childConnection);\n\n    const renderedChildConnection = /** @type {!RenderedConnection} */\n        (childConnection);\n\n    const parentConnection = this;\n    const parentBlock = parentConnection.getSourceBlock();\n    const childBlock = renderedChildConnection.getSourceBlock();\n    const parentRendered = parentBlock.rendered;\n    const childRendered = childBlock.rendered;\n\n    if (parentRendered) {\n      parentBlock.updateDisabled();\n    }\n    if (childRendered) {\n      childBlock.updateDisabled();\n    }\n    if (parentRendered && childRendered) {\n      if (parentConnection.type === ConnectionType.NEXT_STATEMENT ||\n          parentConnection.type === ConnectionType.PREVIOUS_STATEMENT) {\n        // Child block may need to square off its corners if it is in a stack.\n        // Rendering a child will render its parent.\n        childBlock.render();\n      } else {\n        // Child block does not change shape.  Rendering the parent node will\n        // move its connected children into position.\n        parentBlock.render();\n      }\n    }\n\n    // The input the child block is connected to (if any).\n    const parentInput = parentBlock.getInputWithBlock(childBlock);\n    if (parentInput) {\n      const visible = parentInput.isVisible();\n      childBlock.getSvgRoot().style.display = visible ? 'block' : 'none';\n    }\n  }\n\n  /**\n   * Function to be called when this connection's compatible types have changed.\n   * @protected\n   */\n  onCheckChanged_() {\n    // The new value type may not be compatible with the existing connection.\n    if (this.isConnected() &&\n        (!this.targetConnection ||\n         !this.getConnectionChecker().canConnect(\n             this, this.targetConnection, false))) {\n      const child = this.isSuperior() ? this.targetBlock() : this.sourceBlock_;\n      child.unplug();\n      // Bump away.\n      this.sourceBlock_.bumpNeighbours();\n    }\n  }\n}\n\n/**\n * Enum for different kinds of tracked states.\n *\n * WILL_TRACK means that this connection will add itself to\n * the db on the next moveTo call it receives.\n *\n * UNTRACKED means that this connection will not add\n * itself to the database until setTracking(true) is explicitly called.\n *\n * TRACKED means that this connection is currently being tracked.\n * @enum {number}\n */\nRenderedConnection.TrackedState = {\n  WILL_TRACK: -1,\n  UNTRACKED: 0,\n  TRACKED: 1,\n};\n\nexports.RenderedConnection = RenderedConnection;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The class representing a marker.\n * Used primarily for keyboard navigation to show a marked location.\n */\n'use strict';\n\n/**\n * The class representing a marker.\n * Used primarily for keyboard navigation to show a marked location.\n * @class\n */\ngoog.module('Blockly.Marker');\n\n/* eslint-disable-next-line no-unused-vars */\nconst {ASTNode} = goog.requireType('Blockly.ASTNode');\n/* eslint-disable-next-line no-unused-vars */\nconst {MarkerSvg} = goog.requireType('Blockly.blockRendering.MarkerSvg');\n\n\n/**\n * Class for a marker.\n * This is used in keyboard navigation to save a location in the Blockly AST.\n * @alias Blockly.Marker\n */\nclass Marker {\n  /**\n   * Constructs a new Marker instance.\n   */\n  constructor() {\n    /**\n     * The colour of the marker.\n     * @type {?string}\n     */\n    this.colour = null;\n\n    /**\n     * The current location of the marker.\n     * @type {ASTNode}\n     * @private\n     */\n    this.curNode_ = null;\n\n    /**\n     * The object in charge of drawing the visual representation of the current\n     * node.\n     * @type {MarkerSvg}\n     * @private\n     */\n    this.drawer_ = null;\n\n    /**\n     * The type of the marker.\n     * @type {string}\n     */\n    this.type = 'marker';\n  }\n\n  /**\n   * Sets the object in charge of drawing the marker.\n   * @param {MarkerSvg} drawer The object in charge of\n   *     drawing the marker.\n   */\n  setDrawer(drawer) {\n    this.drawer_ = drawer;\n  }\n\n  /**\n   * Get the current drawer for the marker.\n   * @return {MarkerSvg} The object in charge of drawing\n   *     the marker.\n   */\n  getDrawer() {\n    return this.drawer_;\n  }\n\n  /**\n   * Gets the current location of the marker.\n   * @return {ASTNode} The current field, connection, or block the marker\n   *     is on.\n   */\n  getCurNode() {\n    return this.curNode_;\n  }\n\n  /**\n   * Set the location of the marker and call the update method.\n   * Setting isStack to true will only work if the newLocation is the top most\n   * output or previous connection on a stack.\n   * @param {ASTNode} newNode The new location of the marker.\n   */\n  setCurNode(newNode) {\n    const oldNode = this.curNode_;\n    this.curNode_ = newNode;\n    if (this.drawer_) {\n      this.drawer_.draw(oldNode, this.curNode_);\n    }\n  }\n\n  /**\n   * Redraw the current marker.\n   * @package\n   */\n  draw() {\n    if (this.drawer_) {\n      this.drawer_.draw(this.curNode_, this.curNode_);\n    }\n  }\n\n  /**\n   * Hide the marker SVG.\n   */\n  hide() {\n    if (this.drawer_) {\n      this.drawer_.hide();\n    }\n  }\n\n  /**\n   * Dispose of this marker.\n   */\n  dispose() {\n    if (this.getDrawer()) {\n      this.getDrawer().dispose();\n    }\n  }\n}\n\nexports.Marker = Marker;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The class representing a cursor.\n * Used primarily for keyboard navigation.\n */\n'use strict';\n\n/**\n * The class representing a cursor.\n * Used primarily for keyboard navigation.\n * @class\n */\ngoog.module('Blockly.Cursor');\n\nconst registry = goog.require('Blockly.registry');\nconst {ASTNode} = goog.require('Blockly.ASTNode');\nconst {Marker} = goog.require('Blockly.Marker');\n\n/**\n * Class for a cursor.\n * A cursor controls how a user navigates the Blockly AST.\n * @extends {Marker}\n * @alias Blockly.Cursor\n */\nclass Cursor extends Marker {\n  /**\n   * @alias Blockly.Cursor\n   */\n  constructor() {\n    super();\n\n    /**\n     * @override\n     */\n    this.type = 'cursor';\n  }\n\n  /**\n   * Find the next connection, field, or block.\n   * @return {ASTNode} The next element, or null if the current node is\n   *     not set or there is no next value.\n   * @public\n   */\n  next() {\n    const curNode = this.getCurNode();\n    if (!curNode) {\n      return null;\n    }\n\n    let newNode = curNode.next();\n    while (newNode && newNode.next() &&\n           (newNode.getType() === ASTNode.types.NEXT ||\n            newNode.getType() === ASTNode.types.BLOCK)) {\n      newNode = newNode.next();\n    }\n\n    if (newNode) {\n      this.setCurNode(newNode);\n    }\n    return newNode;\n  }\n\n  /**\n   * Find the in connection or field.\n   * @return {ASTNode} The in element, or null if the current node is\n   *     not set or there is no in value.\n   * @public\n   */\n  in() {\n    let curNode = this.getCurNode();\n    if (!curNode) {\n      return null;\n    }\n    // If we are on a previous or output connection, go to the block level\n    // before performing next operation.\n    if (curNode.getType() === ASTNode.types.PREVIOUS ||\n        curNode.getType() === ASTNode.types.OUTPUT) {\n      curNode = curNode.next();\n    }\n    const newNode = curNode.in();\n\n    if (newNode) {\n      this.setCurNode(newNode);\n    }\n    return newNode;\n  }\n\n  /**\n   * Find the previous connection, field, or block.\n   * @return {ASTNode} The previous element, or null if the current node\n   *     is not set or there is no previous value.\n   * @public\n   */\n  prev() {\n    const curNode = this.getCurNode();\n    if (!curNode) {\n      return null;\n    }\n    let newNode = curNode.prev();\n\n    while (newNode && newNode.prev() &&\n           (newNode.getType() === ASTNode.types.NEXT ||\n            newNode.getType() === ASTNode.types.BLOCK)) {\n      newNode = newNode.prev();\n    }\n\n    if (newNode) {\n      this.setCurNode(newNode);\n    }\n    return newNode;\n  }\n\n  /**\n   * Find the out connection, field, or block.\n   * @return {ASTNode} The out element, or null if the current node is\n   *     not set or there is no out value.\n   * @public\n   */\n  out() {\n    const curNode = this.getCurNode();\n    if (!curNode) {\n      return null;\n    }\n    let newNode = curNode.out();\n\n    if (newNode && newNode.getType() === ASTNode.types.BLOCK) {\n      newNode = newNode.prev() || newNode;\n    }\n\n    if (newNode) {\n      this.setCurNode(newNode);\n    }\n    return newNode;\n  }\n}\n\nregistry.register(registry.Type.CURSOR, registry.DEFAULT, Cursor);\n\nexports.Cursor = Cursor;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The class representing a basic cursor.\n * Used to demo switching between different cursors.\n */\n'use strict';\n\n/**\n * The class representing a basic cursor.\n * Used to demo switching between different cursors.\n * @class\n */\ngoog.module('Blockly.BasicCursor');\n\nconst registry = goog.require('Blockly.registry');\nconst {ASTNode} = goog.require('Blockly.ASTNode');\nconst {Cursor} = goog.require('Blockly.Cursor');\n\n\n/**\n * Class for a basic cursor.\n * This will allow the user to get to all nodes in the AST by hitting next or\n * previous.\n * @extends {Cursor}\n * @alias Blockly.BasicCursor\n */\nclass BasicCursor extends Cursor {\n  /**\n   * @alias Blockly.BasicCursor\n   */\n  constructor() {\n    super();\n  }\n\n  /**\n   * Find the next node in the pre order traversal.\n   * @return {?ASTNode} The next node, or null if the current node is\n   *     not set or there is no next value.\n   * @override\n   */\n  next() {\n    const curNode = this.getCurNode();\n    if (!curNode) {\n      return null;\n    }\n    const newNode = this.getNextNode_(curNode, this.validNode_);\n\n    if (newNode) {\n      this.setCurNode(newNode);\n    }\n    return newNode;\n  }\n\n  /**\n   * For a basic cursor we only have the ability to go next and previous, so\n   * in will also allow the user to get to the next node in the pre order\n   * traversal.\n   * @return {?ASTNode} The next node, or null if the current node is\n   *     not set or there is no next value.\n   * @override\n   */\n  in() {\n    return this.next();\n  }\n\n  /**\n   * Find the previous node in the pre order traversal.\n   * @return {?ASTNode} The previous node, or null if the current node\n   *     is not set or there is no previous value.\n   * @override\n   */\n  prev() {\n    const curNode = this.getCurNode();\n    if (!curNode) {\n      return null;\n    }\n    const newNode = this.getPreviousNode_(curNode, this.validNode_);\n\n    if (newNode) {\n      this.setCurNode(newNode);\n    }\n    return newNode;\n  }\n\n  /**\n   * For a basic cursor we only have the ability to go next and previous, so\n   * out will allow the user to get to the previous node in the pre order\n   * traversal.\n   * @return {?ASTNode} The previous node, or null if the current node is\n   *     not set or there is no previous value.\n   * @override\n   */\n  out() {\n    return this.prev();\n  }\n\n  /**\n   * Uses pre order traversal to navigate the Blockly AST. This will allow\n   * a user to easily navigate the entire Blockly AST without having to go in\n   * and out levels on the tree.\n   * @param {?ASTNode} node The current position in the AST.\n   * @param {!function(ASTNode) : boolean} isValid A function true/false\n   *     depending on whether the given node should be traversed.\n   * @return {?ASTNode} The next node in the traversal.\n   * @protected\n   */\n  getNextNode_(node, isValid) {\n    if (!node) {\n      return null;\n    }\n    const newNode = node.in() || node.next();\n    if (isValid(newNode)) {\n      return newNode;\n    } else if (newNode) {\n      return this.getNextNode_(newNode, isValid);\n    }\n    const siblingOrParent = this.findSiblingOrParent_(node.out());\n    if (isValid(siblingOrParent)) {\n      return siblingOrParent;\n    } else if (siblingOrParent) {\n      return this.getNextNode_(siblingOrParent, isValid);\n    }\n    return null;\n  }\n\n  /**\n   * Reverses the pre order traversal in order to find the previous node. This\n   * will allow a user to easily navigate the entire Blockly AST without having\n   * to go in and out levels on the tree.\n   * @param {?ASTNode} node The current position in the AST.\n   * @param {!function(ASTNode) : boolean} isValid A function true/false\n   *     depending on whether the given node should be traversed.\n   * @return {?ASTNode} The previous node in the traversal or null if no\n   *     previous node exists.\n   * @protected\n   */\n  getPreviousNode_(node, isValid) {\n    if (!node) {\n      return null;\n    }\n    let newNode = node.prev();\n\n    if (newNode) {\n      newNode = this.getRightMostChild_(newNode);\n    } else {\n      newNode = node.out();\n    }\n    if (isValid(newNode)) {\n      return newNode;\n    } else if (newNode) {\n      return this.getPreviousNode_(newNode, isValid);\n    }\n    return null;\n  }\n\n  /**\n   * Decides what nodes to traverse and which ones to skip. Currently, it\n   * skips output, stack and workspace nodes.\n   * @param {?ASTNode} node The AST node to check whether it is valid.\n   * @return {boolean} True if the node should be visited, false otherwise.\n   * @protected\n   */\n  validNode_(node) {\n    let isValid = false;\n    const type = node && node.getType();\n    if (type === ASTNode.types.OUTPUT || type === ASTNode.types.INPUT ||\n        type === ASTNode.types.FIELD || type === ASTNode.types.NEXT ||\n        type === ASTNode.types.PREVIOUS || type === ASTNode.types.WORKSPACE) {\n      isValid = true;\n    }\n    return isValid;\n  }\n\n  /**\n   * From the given node find either the next valid sibling or parent.\n   * @param {?ASTNode} node The current position in the AST.\n   * @return {?ASTNode} The parent AST node or null if there are no\n   *     valid parents.\n   * @private\n   */\n  findSiblingOrParent_(node) {\n    if (!node) {\n      return null;\n    }\n    const nextNode = node.next();\n    if (nextNode) {\n      return nextNode;\n    }\n    return this.findSiblingOrParent_(node.out());\n  }\n\n  /**\n   * Get the right most child of a node.\n   * @param {?ASTNode} node The node to find the right most child of.\n   * @return {?ASTNode} The right most child of the given node, or the node\n   *     if no child exists.\n   * @private\n   */\n  getRightMostChild_(node) {\n    if (!node.in()) {\n      return node;\n    }\n    let newNode = node.in();\n    while (newNode.next()) {\n      newNode = newNode.next();\n    }\n    return this.getRightMostChild_(newNode);\n  }\n}\n\n/**\n * Name used for registering a basic cursor.\n * @const {string}\n */\nBasicCursor.registrationName = 'basicCursor';\n\nregistry.register(\n    registry.Type.CURSOR, BasicCursor.registrationName, BasicCursor);\n\nexports.BasicCursor = BasicCursor;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The class representing a cursor that is used to navigate\n * between tab navigable fields.\n */\n'use strict';\n\n/**\n * The class representing a cursor that is used to navigate\n * between tab navigable fields.\n * @class\n */\ngoog.module('Blockly.TabNavigateCursor');\n\nconst {ASTNode} = goog.require('Blockly.ASTNode');\nconst {BasicCursor} = goog.require('Blockly.BasicCursor');\n/* eslint-disable-next-line no-unused-vars */\nconst {Field} = goog.requireType('Blockly.Field');\n\n\n/**\n * A cursor for navigating between tab navigable fields.\n * @extends {BasicCursor}\n * @alias Blockly.TabNavigateCursor\n */\nclass TabNavigateCursor extends BasicCursor {\n  /**\n   * Skip all nodes except for tab navigable fields.\n   * @param {?ASTNode} node The AST node to check whether it is valid.\n   * @return {boolean} True if the node should be visited, false otherwise.\n   * @override\n   */\n  validNode_(node) {\n    let isValid = false;\n    const type = node && node.getType();\n    if (node) {\n      const location = /** @type {Field} */ (node.getLocation());\n      if (type === ASTNode.types.FIELD && location &&\n          location.isTabNavigable() && location.isClickable()) {\n        isValid = true;\n      }\n    }\n    return isValid;\n  }\n}\n\nexports.TabNavigateCursor = TabNavigateCursor;\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Events fired as a result of element select action.\n */\n'use strict';\n\n/**\n * Events fired as a result of element select action.\n * @class\n */\ngoog.module('Blockly.Events.Selected');\n\nconst eventUtils = goog.require('Blockly.Events.utils');\nconst registry = goog.require('Blockly.registry');\nconst {UiBase} = goog.require('Blockly.Events.UiBase');\n\n\n/**\n * Class for a selected event.\n * @extends {UiBase}\n * @alias Blockly.Events.Selected\n */\nclass Selected extends UiBase {\n  /**\n   * @param {?string=} opt_oldElementId The ID of the previously selected\n   *    element. Null if no element last selected. Undefined for a blank event.\n   * @param {?string=} opt_newElementId The ID of the selected element. Null if\n   *     no element currently selected (deselect). Undefined for a blank event.\n   * @param {string=} opt_workspaceId The workspace identifier for this event.\n   *    Null if no element previously selected. Undefined for a blank event.\n   */\n  constructor(opt_oldElementId, opt_newElementId, opt_workspaceId) {\n    super(opt_workspaceId);\n\n    /**\n     * The id of the last selected element.\n     * @type {?string|undefined}\n     */\n    this.oldElementId = opt_oldElementId;\n\n    /**\n     * The id of the selected element.\n     * @type {?string|undefined}\n     */\n    this.newElementId = opt_newElementId;\n\n    /**\n     * Type of this event.\n     * @type {string}\n     */\n    this.type = eventUtils.SELECTED;\n  }\n\n  /**\n   * Encode the event as JSON.\n   * @return {!Object} JSON representation.\n   */\n  toJson() {\n    const json = super.toJson();\n    json['oldElementId'] = this.oldElementId;\n    json['newElementId'] = this.newElementId;\n    return json;\n  }\n\n  /**\n   * Decode the JSON event.\n   * @param {!Object} json JSON representation.\n   */\n  fromJson(json) {\n    super.fromJson(json);\n    this.oldElementId = json['oldElementId'];\n    this.newElementId = json['newElementId'];\n  }\n}\n\nregistry.register(registry.Type.EVENT, eventUtils.SELECTED, Selected);\n\nexports.Selected = Selected;\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Methods for graphically rendering a block as SVG.\n */\n'use strict';\n\n/**\n * Methods for graphically rendering a block as SVG.\n * @class\n */\ngoog.module('Blockly.BlockSvg');\n\nconst ContextMenu = goog.require('Blockly.ContextMenu');\nconst Tooltip = goog.require('Blockly.Tooltip');\nconst blockAnimations = goog.require('Blockly.blockAnimations');\nconst blocks = goog.require('Blockly.serialization.blocks');\nconst browserEvents = goog.require('Blockly.browserEvents');\nconst common = goog.require('Blockly.common');\nconst constants = goog.require('Blockly.constants');\nconst dom = goog.require('Blockly.utils.dom');\nconst eventUtils = goog.require('Blockly.Events.utils');\nconst internalConstants = goog.require('Blockly.internalConstants');\nconst svgMath = goog.require('Blockly.utils.svgMath');\nconst userAgent = goog.require('Blockly.utils.userAgent');\nconst {ASTNode} = goog.require('Blockly.ASTNode');\nconst {Block} = goog.require('Blockly.Block');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockMove} = goog.requireType('Blockly.Events.BlockMove');\n/* eslint-disable-next-line no-unused-vars */\nconst {Comment} = goog.requireType('Blockly.Comment');\nconst {config} = goog.require('Blockly.config');\nconst {ConnectionType} = goog.require('Blockly.ConnectionType');\n/* eslint-disable-next-line no-unused-vars */\nconst {Connection} = goog.requireType('Blockly.Connection');\nconst {ContextMenuRegistry} = goog.require('Blockly.ContextMenuRegistry');\nconst {Coordinate} = goog.require('Blockly.utils.Coordinate');\n/* eslint-disable-next-line no-unused-vars */\nconst {Debug: BlockRenderingDebug} = goog.requireType('Blockly.blockRendering.Debug');\nconst {FieldLabel} = goog.require('Blockly.FieldLabel');\n/* eslint-disable-next-line no-unused-vars */\nconst {Field} = goog.requireType('Blockly.Field');\n/* eslint-disable-next-line no-unused-vars */\nconst {IASTNodeLocationSvg} = goog.require('Blockly.IASTNodeLocationSvg');\n/* eslint-disable-next-line no-unused-vars */\nconst {IBoundedElement} = goog.require('Blockly.IBoundedElement');\n/* eslint-disable-next-line no-unused-vars */\nconst {ICopyable} = goog.require('Blockly.ICopyable');\n/* eslint-disable-next-line no-unused-vars */\nconst {IDraggable} = goog.require('Blockly.IDraggable');\n/* eslint-disable-next-line no-unused-vars */\nconst {IPathObject} = goog.requireType('Blockly.blockRendering.IPathObject');\n/* eslint-disable-next-line no-unused-vars */\nconst {Icon} = goog.requireType('Blockly.Icon');\n/* eslint-disable-next-line no-unused-vars */\nconst {Input} = goog.requireType('Blockly.Input');\nconst {MarkerManager} = goog.require('Blockly.MarkerManager');\nconst {Msg} = goog.require('Blockly.Msg');\n/* eslint-disable-next-line no-unused-vars */\nconst {Mutator} = goog.requireType('Blockly.Mutator');\nconst {Rect} = goog.require('Blockly.utils.Rect');\nconst {RenderedConnection} = goog.require('Blockly.RenderedConnection');\nconst {Svg} = goog.require('Blockly.utils.Svg');\nconst {TabNavigateCursor} = goog.require('Blockly.TabNavigateCursor');\n/* eslint-disable-next-line no-unused-vars */\nconst {Theme} = goog.requireType('Blockly.Theme');\n/* eslint-disable-next-line no-unused-vars */\nconst {Warning} = goog.requireType('Blockly.Warning');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceSvg} = goog.requireType('Blockly.WorkspaceSvg');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.Events.BlockMove');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.Events.Selected');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.Touch');\n\n\n/**\n * Class for a block's SVG representation.\n * Not normally called directly, workspace.newBlock() is preferred.\n * @extends {Block}\n * @implements {IASTNodeLocationSvg}\n * @implements {IBoundedElement}\n * @implements {ICopyable}\n * @implements {IDraggable}\n * @alias Blockly.BlockSvg\n */\nclass BlockSvg extends Block {\n  /**\n   * @param {!WorkspaceSvg} workspace The block's workspace.\n   * @param {string} prototypeName Name of the language object containing\n   *     type-specific functions for this block.\n   * @param {string=} opt_id Optional ID.  Use this ID if provided, otherwise\n   *     create a new ID.\n   */\n  constructor(workspace, prototypeName, opt_id) {\n    super(workspace, prototypeName, opt_id);\n\n    /**\n     * An optional method called when a mutator dialog is first opened.\n     * This function must create and initialize a top-level block for the\n     * mutator dialog, and return it. This function should also populate this\n     * top-level block with any sub-blocks which are appropriate. This method\n     * must also be coupled with defining a `compose` method for the default\n     * mutation dialog button and UI to appear.\n     * @type {undefined|?function(WorkspaceSvg):!BlockSvg}\n     */\n    this.decompose = this.decompose;\n\n    /**\n     * An optional method called when a mutator dialog saves its content.\n     * This function is called to modify the original block according to new\n     * settings. This method must also be coupled with defining a `decompose`\n     * method for the default mutation dialog button and UI to appear.\n     * @type {undefined|?function(!BlockSvg)}\n     */\n    this.compose = this.compose;\n\n    /**\n     * An optional method called by the default mutator UI which gives the block\n     * a chance to save information about what child blocks are connected to\n     * what mutated connections.\n     * @type {undefined|?function(!BlockSvg)}\n     */\n    this.saveConnections = this.saveConnections;\n\n    /**\n     * An optional method for defining custom block context menu items.\n     * @type {undefined|?function(!Array<!Object>)}\n     */\n    this.customContextMenu = this.customContextMenu;\n\n    /**\n     * An property used internally to reference the block's rendering debugger.\n     * @type {?BlockRenderingDebug}\n     * @package\n     */\n    this.renderingDebugger = null;\n\n    /**\n     * Height of this block, not including any statement blocks above or below.\n     * Height is in workspace units.\n     * @type {number}\n     */\n    this.height = 0;\n\n    /**\n     * Width of this block, including any connected value blocks.\n     * Width is in workspace units.\n     * @type {number}\n     */\n    this.width = 0;\n\n    /**\n     * Map from IDs for warnings text to PIDs of functions to apply them.\n     * Used to be able to maintain multiple warnings.\n     * @type {Object<string, number>}\n     * @private\n     */\n    this.warningTextDb_ = null;\n\n    /**\n     * Block's mutator icon (if any).\n     * @type {?Mutator}\n     */\n    this.mutator = null;\n\n    /**\n     * Block's comment icon (if any).\n     * @type {?Comment}\n     * @deprecated August 2019. Use getCommentIcon instead.\n     */\n    this.comment = null;\n\n    /**\n     * Block's comment icon (if any).\n     * @type {?Comment}\n     * @private\n     */\n    this.commentIcon_ = null;\n\n    /**\n     * Block's warning icon (if any).\n     * @type {?Warning}\n     */\n    this.warning = null;\n\n    // Create core elements for the block.\n    /**\n     * @type {!SVGGElement}\n     * @private\n     */\n    this.svgGroup_ = dom.createSvgElement(Svg.G, {}, null);\n    this.svgGroup_.translate_ = '';\n\n    /**\n     * A block style object.\n     * @type {!Theme.BlockStyle}\n     */\n    this.style = workspace.getRenderer().getConstants().getBlockStyle(null);\n\n    /**\n     * The renderer's path object.\n     * @type {IPathObject}\n     * @package\n     */\n    this.pathObject =\n        workspace.getRenderer().makePathObject(this.svgGroup_, this.style);\n\n    /** @type {boolean} */\n    this.rendered = false;\n    /**\n     * Is this block currently rendering? Used to stop recursive render calls\n     * from actually triggering a re-render.\n     * @type {boolean}\n     * @private\n     */\n    this.renderIsInProgress_ = false;\n\n    /**\n     * Whether mousedown events have been bound yet.\n     * @type {boolean}\n     * @private\n     */\n    this.eventsInit_ = false;\n\n    /** @type {!WorkspaceSvg} */\n    this.workspace;\n    /** @type {RenderedConnection} */\n    this.outputConnection;\n    /** @type {RenderedConnection} */\n    this.nextConnection;\n    /** @type {RenderedConnection} */\n    this.previousConnection;\n\n    /**\n     * Whether to move the block to the drag surface when it is dragged.\n     * True if it should move, false if it should be translated directly.\n     * @type {boolean}\n     * @private\n     */\n    this.useDragSurface_ =\n        svgMath.is3dSupported() && !!workspace.getBlockDragSurface();\n\n    const svgPath = this.pathObject.svgPath;\n    svgPath.tooltip = this;\n    Tooltip.bindMouseEvents(svgPath);\n\n    // Expose this block's ID on its top-level SVG group.\n    if (this.svgGroup_.dataset) {\n      this.svgGroup_.dataset['id'] = this.id;\n    } else if (userAgent.IE) {\n      // SVGElement.dataset is not available on IE11, but data-* properties\n      // can be set with setAttribute().\n      this.svgGroup_.setAttribute('data-id', this.id);\n    }\n\n    this.doInit_();\n  }\n\n  /**\n   * Create and initialize the SVG representation of the block.\n   * May be called more than once.\n   */\n  initSvg() {\n    if (!this.workspace.rendered) {\n      throw TypeError('Workspace is headless.');\n    }\n    for (let i = 0, input; (input = this.inputList[i]); i++) {\n      input.init();\n    }\n    const icons = this.getIcons();\n    for (let i = 0; i < icons.length; i++) {\n      icons[i].createIcon();\n    }\n    this.applyColour();\n    this.pathObject.updateMovable(this.isMovable());\n    const svg = this.getSvgRoot();\n    if (!this.workspace.options.readOnly && !this.eventsInit_ && svg) {\n      browserEvents.conditionalBind(svg, 'mousedown', this, this.onMouseDown_);\n    }\n    this.eventsInit_ = true;\n\n    if (!svg.parentNode) {\n      this.workspace.getCanvas().appendChild(svg);\n    }\n  }\n\n  /**\n   * Get the secondary colour of a block.\n   * @return {?string} #RRGGBB string.\n   */\n  getColourSecondary() {\n    return this.style.colourSecondary;\n  }\n\n  /**\n   * Get the tertiary colour of a block.\n   * @return {?string} #RRGGBB string.\n   */\n  getColourTertiary() {\n    return this.style.colourTertiary;\n  }\n\n  /**\n   * Selects this block. Highlights the block visually and fires a select event\n   * if the block is not already selected.\n   */\n  select() {\n    if (this.isShadow() && this.getParent()) {\n      // Shadow blocks should not be selected.\n      this.getParent().select();\n      return;\n    }\n    if (common.getSelected() === this) {\n      return;\n    }\n    let oldId = null;\n    if (common.getSelected()) {\n      oldId = common.getSelected().id;\n      // Unselect any previously selected block.\n      eventUtils.disable();\n      try {\n        common.getSelected().unselect();\n      } finally {\n        eventUtils.enable();\n      }\n    }\n    const event = new (eventUtils.get(eventUtils.SELECTED))(\n        oldId, this.id, this.workspace.id);\n    eventUtils.fire(event);\n    common.setSelected(this);\n    this.addSelect();\n  }\n\n  /**\n   * Unselects this block. Unhighlights the block and fires a select (false)\n   * event if the block is currently selected.\n   */\n  unselect() {\n    if (common.getSelected() !== this) {\n      return;\n    }\n    const event = new (eventUtils.get(eventUtils.SELECTED))(\n        this.id, null, this.workspace.id);\n    event.workspaceId = this.workspace.id;\n    eventUtils.fire(event);\n    common.setSelected(null);\n    this.removeSelect();\n  }\n\n  /**\n   * Returns a list of mutator, comment, and warning icons.\n   * @return {!Array<!Icon>} List of icons.\n   */\n  getIcons() {\n    const icons = [];\n    if (this.mutator) {\n      icons.push(this.mutator);\n    }\n    if (this.commentIcon_) {\n      icons.push(this.commentIcon_);\n    }\n    if (this.warning) {\n      icons.push(this.warning);\n    }\n    return icons;\n  }\n\n  /**\n   * Sets the parent of this block to be a new block or null.\n   * @param {?Block} newParent New parent block.\n   * @package\n   * @override\n   */\n  setParent(newParent) {\n    const oldParent = this.parentBlock_;\n    if (newParent === oldParent) {\n      return;\n    }\n\n    dom.startTextWidthCache();\n    super.setParent(newParent);\n    dom.stopTextWidthCache();\n\n    const svgRoot = this.getSvgRoot();\n\n    // Bail early if workspace is clearing, or we aren't rendered.\n    // We won't need to reattach ourselves anywhere.\n    if (this.workspace.isClearing || !svgRoot) {\n      return;\n    }\n\n    const oldXY = this.getRelativeToSurfaceXY();\n    if (newParent) {\n      (/** @type {!BlockSvg} */ (newParent)).getSvgRoot().appendChild(svgRoot);\n      const newXY = this.getRelativeToSurfaceXY();\n      // Move the connections to match the child's new position.\n      this.moveConnections(newXY.x - oldXY.x, newXY.y - oldXY.y);\n    } else if (oldParent) {\n      // If we are losing a parent, we want to move our DOM element to the\n      // root of the workspace.\n      this.workspace.getCanvas().appendChild(svgRoot);\n      this.translate(oldXY.x, oldXY.y);\n    }\n\n    this.applyColour();\n  }\n\n  /**\n   * Return the coordinates of the top-left corner of this block relative to the\n   * drawing surface's origin (0,0), in workspace units.\n   * If the block is on the workspace, (0, 0) is the origin of the workspace\n   * coordinate system.\n   * This does not change with workspace scale.\n   * @return {!Coordinate} Object with .x and .y properties in\n   *     workspace coordinates.\n   */\n  getRelativeToSurfaceXY() {\n    let x = 0;\n    let y = 0;\n\n    const dragSurfaceGroup = this.useDragSurface_ ?\n        this.workspace.getBlockDragSurface().getGroup() :\n        null;\n\n    let element = this.getSvgRoot();\n    if (element) {\n      do {\n        // Loop through this block and every parent.\n        const xy = svgMath.getRelativeXY(element);\n        x += xy.x;\n        y += xy.y;\n        // If this element is the current element on the drag surface, include\n        // the translation of the drag surface itself.\n        if (this.useDragSurface_ &&\n            this.workspace.getBlockDragSurface().getCurrentBlock() ===\n                element) {\n          const surfaceTranslation =\n              this.workspace.getBlockDragSurface().getSurfaceTranslation();\n          x += surfaceTranslation.x;\n          y += surfaceTranslation.y;\n        }\n        element = /** @type {!SVGElement} */ (element.parentNode);\n      } while (element && element !== this.workspace.getCanvas() &&\n               element !== dragSurfaceGroup);\n    }\n    return new Coordinate(x, y);\n  }\n\n  /**\n   * Move a block by a relative offset.\n   * @param {number} dx Horizontal offset in workspace units.\n   * @param {number} dy Vertical offset in workspace units.\n   */\n  moveBy(dx, dy) {\n    if (this.parentBlock_) {\n      throw Error('Block has parent.');\n    }\n    const eventsEnabled = eventUtils.isEnabled();\n    let event;\n    if (eventsEnabled) {\n      event = /** @type {!BlockMove} */\n          (new (eventUtils.get(eventUtils.BLOCK_MOVE))(this));\n    }\n    const xy = this.getRelativeToSurfaceXY();\n    this.translate(xy.x + dx, xy.y + dy);\n    this.moveConnections(dx, dy);\n    if (eventsEnabled) {\n      event.recordNew();\n      eventUtils.fire(event);\n    }\n    this.workspace.resizeContents();\n  }\n\n  /**\n   * Transforms a block by setting the translation on the transform attribute\n   * of the block's SVG.\n   * @param {number} x The x coordinate of the translation in workspace units.\n   * @param {number} y The y coordinate of the translation in workspace units.\n   */\n  translate(x, y) {\n    this.getSvgRoot().setAttribute(\n        'transform', 'translate(' + x + ',' + y + ')');\n  }\n\n  /**\n   * Move this block to its workspace's drag surface, accounting for\n   * positioning. Generally should be called at the same time as\n   * setDragging_(true). Does nothing if useDragSurface_ is false.\n   * @package\n   */\n  moveToDragSurface() {\n    if (!this.useDragSurface_) {\n      return;\n    }\n    // The translation for drag surface blocks,\n    // is equal to the current relative-to-surface position,\n    // to keep the position in sync as it move on/off the surface.\n    // This is in workspace coordinates.\n    const xy = this.getRelativeToSurfaceXY();\n    this.clearTransformAttributes_();\n    this.workspace.getBlockDragSurface().translateSurface(xy.x, xy.y);\n    // Execute the move on the top-level SVG component\n    const svg = this.getSvgRoot();\n    if (svg) {\n      this.workspace.getBlockDragSurface().setBlocksAndShow(svg);\n    }\n  }\n\n  /**\n   * Move a block to a position.\n   * @param {Coordinate} xy The position to move to in workspace units.\n   */\n  moveTo(xy) {\n    const curXY = this.getRelativeToSurfaceXY();\n    this.moveBy(xy.x - curXY.x, xy.y - curXY.y);\n  }\n\n  /**\n   * Move this block back to the workspace block canvas.\n   * Generally should be called at the same time as setDragging_(false).\n   * Does nothing if useDragSurface_ is false.\n   * @param {!Coordinate} newXY The position the block should take on\n   *     on the workspace canvas, in workspace coordinates.\n   * @package\n   */\n  moveOffDragSurface(newXY) {\n    if (!this.useDragSurface_) {\n      return;\n    }\n    // Translate to current position, turning off 3d.\n    this.translate(newXY.x, newXY.y);\n    this.workspace.getBlockDragSurface().clearAndHide(\n        this.workspace.getCanvas());\n  }\n\n  /**\n   * Move this block during a drag, taking into account whether we are using a\n   * drag surface to translate blocks.\n   * This block must be a top-level block.\n   * @param {!Coordinate} newLoc The location to translate to, in\n   *     workspace coordinates.\n   * @package\n   */\n  moveDuringDrag(newLoc) {\n    if (this.useDragSurface_) {\n      this.workspace.getBlockDragSurface().translateSurface(newLoc.x, newLoc.y);\n    } else {\n      this.svgGroup_.translate_ =\n          'translate(' + newLoc.x + ',' + newLoc.y + ')';\n      this.svgGroup_.setAttribute(\n          'transform', this.svgGroup_.translate_ + this.svgGroup_.skew_);\n    }\n  }\n\n  /**\n   * Clear the block of transform=\"...\" attributes.\n   * Used when the block is switching from 3d to 2d transform or vice versa.\n   * @private\n   */\n  clearTransformAttributes_() {\n    this.getSvgRoot().removeAttribute('transform');\n  }\n\n  /**\n   * Snap this block to the nearest grid point.\n   */\n  snapToGrid() {\n    if (!this.workspace) {\n      return;  // Deleted block.\n    }\n    if (this.workspace.isDragging()) {\n      return;  // Don't bump blocks during a drag.\n    }\n    if (this.getParent()) {\n      return;  // Only snap top-level blocks.\n    }\n    if (this.isInFlyout) {\n      return;  // Don't move blocks around in a flyout.\n    }\n    const grid = this.workspace.getGrid();\n    if (!grid || !grid.shouldSnap()) {\n      return;  // Config says no snapping.\n    }\n    const spacing = grid.getSpacing();\n    const half = spacing / 2;\n    const xy = this.getRelativeToSurfaceXY();\n    const dx =\n        Math.round(Math.round((xy.x - half) / spacing) * spacing + half - xy.x);\n    const dy =\n        Math.round(Math.round((xy.y - half) / spacing) * spacing + half - xy.y);\n    if (dx || dy) {\n      this.moveBy(dx, dy);\n    }\n  }\n\n  /**\n   * Returns the coordinates of a bounding box describing the dimensions of this\n   * block and any blocks stacked below it.\n   * Coordinate system: workspace coordinates.\n   * @return {!Rect} Object with coordinates of the bounding box.\n   */\n  getBoundingRectangle() {\n    const blockXY = this.getRelativeToSurfaceXY();\n    const blockBounds = this.getHeightWidth();\n    let left;\n    let right;\n    if (this.RTL) {\n      left = blockXY.x - blockBounds.width;\n      right = blockXY.x;\n    } else {\n      left = blockXY.x;\n      right = blockXY.x + blockBounds.width;\n    }\n    return new Rect(blockXY.y, blockXY.y + blockBounds.height, left, right);\n  }\n\n  /**\n   * Notify every input on this block to mark its fields as dirty.\n   * A dirty field is a field that needs to be re-rendered.\n   */\n  markDirty() {\n    this.pathObject.constants = (/** @type {!WorkspaceSvg} */ (this.workspace))\n                                    .getRenderer()\n                                    .getConstants();\n    for (let i = 0, input; (input = this.inputList[i]); i++) {\n      input.markDirty();\n    }\n  }\n\n  /**\n   * Set whether the block is collapsed or not.\n   * @param {boolean} collapsed True if collapsed.\n   */\n  setCollapsed(collapsed) {\n    if (this.collapsed_ === collapsed) {\n      return;\n    }\n    super.setCollapsed(collapsed);\n    if (!collapsed) {\n      this.updateCollapsed_();\n    } else if (this.rendered) {\n      this.render();\n      // Don't bump neighbours. Users like to store collapsed functions together\n      // and bumping makes them go out of alignment.\n    }\n  }\n\n  /**\n   * Makes sure that when the block is collapsed, it is rendered correctly\n   * for that state.\n   * @private\n   */\n  updateCollapsed_() {\n    const collapsed = this.isCollapsed();\n    const collapsedInputName = constants.COLLAPSED_INPUT_NAME;\n    const collapsedFieldName = constants.COLLAPSED_FIELD_NAME;\n\n    for (let i = 0, input; (input = this.inputList[i]); i++) {\n      if (input.name !== collapsedInputName) {\n        input.setVisible(!collapsed);\n      }\n    }\n\n    if (!collapsed) {\n      this.updateDisabled();\n      this.removeInput(collapsedInputName);\n      return;\n    }\n\n    const icons = this.getIcons();\n    for (let i = 0, icon; (icon = icons[i]); i++) {\n      icon.setVisible(false);\n    }\n\n    const text = this.toString(internalConstants.COLLAPSE_CHARS);\n    const field = this.getField(collapsedFieldName);\n    if (field) {\n      field.setValue(text);\n      return;\n    }\n    const input = this.getInput(collapsedInputName) ||\n        this.appendDummyInput(collapsedInputName);\n    input.appendField(new FieldLabel(text), collapsedFieldName);\n  }\n\n  /**\n   * Open the next (or previous) FieldTextInput.\n   * @param {!Field} start Current field.\n   * @param {boolean} forward If true go forward, otherwise backward.\n   */\n  tab(start, forward) {\n    const tabCursor = new TabNavigateCursor();\n    tabCursor.setCurNode(ASTNode.createFieldNode(start));\n    const currentNode = tabCursor.getCurNode();\n\n    if (forward) {\n      tabCursor.next();\n    } else {\n      tabCursor.prev();\n    }\n\n    const nextNode = tabCursor.getCurNode();\n    if (nextNode && nextNode !== currentNode) {\n      const nextField = /** @type {!Field} */ (nextNode.getLocation());\n      nextField.showEditor();\n\n      // Also move the cursor if we're in keyboard nav mode.\n      if (this.workspace.keyboardAccessibilityMode) {\n        this.workspace.getCursor().setCurNode(nextNode);\n      }\n    }\n  }\n\n  /**\n   * Handle a mouse-down on an SVG block.\n   * @param {!Event} e Mouse down event or touch start event.\n   * @private\n   */\n  onMouseDown_(e) {\n    const gesture = this.workspace && this.workspace.getGesture(e);\n    if (gesture) {\n      gesture.handleBlockStart(e, this);\n    }\n  }\n\n  /**\n   * Load the block's help page in a new window.\n   * @package\n   */\n  showHelp() {\n    const url =\n        (typeof this.helpUrl === 'function') ? this.helpUrl() : this.helpUrl;\n    if (url) {\n      window.open(url);\n    }\n  }\n\n  /**\n   * Generate the context menu for this block.\n   * @return {?Array<!Object>} Context menu options or null if no menu.\n   * @protected\n   */\n  generateContextMenu() {\n    if (this.workspace.options.readOnly || !this.contextMenu) {\n      return null;\n    }\n    const menuOptions = ContextMenuRegistry.registry.getContextMenuOptions(\n        ContextMenuRegistry.ScopeType.BLOCK, {block: this});\n\n    // Allow the block to add or modify menuOptions.\n    if (this.customContextMenu) {\n      this.customContextMenu(menuOptions);\n    }\n\n    return menuOptions;\n  }\n\n  /**\n   * Show the context menu for this block.\n   * @param {!Event} e Mouse event.\n   * @package\n   */\n  showContextMenu(e) {\n    const menuOptions = this.generateContextMenu();\n\n    if (menuOptions && menuOptions.length) {\n      ContextMenu.show(e, menuOptions, this.RTL);\n      ContextMenu.setCurrentBlock(this);\n    }\n  }\n\n  /**\n   * Move the connections for this block and all blocks attached under it.\n   * Also update any attached bubbles.\n   * @param {number} dx Horizontal offset from current location, in workspace\n   *     units.\n   * @param {number} dy Vertical offset from current location, in workspace\n   *     units.\n   * @package\n   */\n  moveConnections(dx, dy) {\n    if (!this.rendered) {\n      // Rendering is required to lay out the blocks.\n      // This is probably an invisible block attached to a collapsed block.\n      return;\n    }\n    const myConnections = this.getConnections_(false);\n    for (let i = 0; i < myConnections.length; i++) {\n      myConnections[i].moveBy(dx, dy);\n    }\n    const icons = this.getIcons();\n    for (let i = 0; i < icons.length; i++) {\n      icons[i].computeIconLocation();\n    }\n\n    // Recurse through all blocks attached under this one.\n    for (let i = 0; i < this.childBlocks_.length; i++) {\n      (/** @type {!BlockSvg} */ (this.childBlocks_[i])).moveConnections(dx, dy);\n    }\n  }\n\n  /**\n   * Recursively adds or removes the dragging class to this node and its\n   * children.\n   * @param {boolean} adding True if adding, false if removing.\n   * @package\n   */\n  setDragging(adding) {\n    if (adding) {\n      const group = this.getSvgRoot();\n      group.translate_ = '';\n      group.skew_ = '';\n      common.draggingConnections.push(...this.getConnections_(true));\n      dom.addClass(\n          /** @type {!Element} */ (this.svgGroup_), 'blocklyDragging');\n    } else {\n      common.draggingConnections.length = 0;\n      dom.removeClass(\n          /** @type {!Element} */ (this.svgGroup_), 'blocklyDragging');\n    }\n    // Recurse through all blocks attached under this one.\n    for (let i = 0; i < this.childBlocks_.length; i++) {\n      (/** @type {!BlockSvg} */ (this.childBlocks_[i])).setDragging(adding);\n    }\n  }\n\n  /**\n   * Set whether this block is movable or not.\n   * @param {boolean} movable True if movable.\n   */\n  setMovable(movable) {\n    super.setMovable(movable);\n    this.pathObject.updateMovable(movable);\n  }\n\n  /**\n   * Set whether this block is editable or not.\n   * @param {boolean} editable True if editable.\n   */\n  setEditable(editable) {\n    super.setEditable(editable);\n    const icons = this.getIcons();\n    for (let i = 0; i < icons.length; i++) {\n      icons[i].updateEditable();\n    }\n  }\n\n  /**\n   * Sets whether this block is a shadow block or not.\n   * @param {boolean} shadow True if a shadow.\n   * @package\n   */\n  setShadow(shadow) {\n    super.setShadow(shadow);\n    this.applyColour();\n  }\n\n  /**\n   * Set whether this block is an insertion marker block or not.\n   * Once set this cannot be unset.\n   * @param {boolean} insertionMarker True if an insertion marker.\n   * @package\n   */\n  setInsertionMarker(insertionMarker) {\n    if (this.isInsertionMarker_ === insertionMarker) {\n      return;  // No change.\n    }\n    this.isInsertionMarker_ = insertionMarker;\n    if (this.isInsertionMarker_) {\n      this.setColour(\n          this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR);\n      this.pathObject.updateInsertionMarker(true);\n    }\n  }\n\n  /**\n   * Return the root node of the SVG or null if none exists.\n   * @return {!SVGGElement} The root SVG node (probably a group).\n   */\n  getSvgRoot() {\n    return this.svgGroup_;\n  }\n\n  /**\n   * Dispose of this block.\n   * @param {boolean=} healStack If true, then try to heal any gap by connecting\n   *     the next statement with the previous statement.  Otherwise, dispose of\n   *     all children of this block.\n   * @param {boolean=} animate If true, show a disposal animation and sound.\n   * @suppress {checkTypes}\n   */\n  dispose(healStack, animate) {\n    if (!this.workspace) {\n      // The block has already been deleted.\n      return;\n    }\n    Tooltip.dispose();\n    Tooltip.unbindMouseEvents(this.pathObject.svgPath);\n    dom.startTextWidthCache();\n    // Save the block's workspace temporarily so we can resize the\n    // contents once the block is disposed.\n    const blockWorkspace = this.workspace;\n    // If this block is being dragged, unlink the mouse events.\n    if (common.getSelected() === this) {\n      this.unselect();\n      this.workspace.cancelCurrentGesture();\n    }\n    // If this block has a context menu open, close it.\n    if (ContextMenu.getCurrentBlock() === this) {\n      ContextMenu.hide();\n    }\n\n    if (animate && this.rendered) {\n      this.unplug(healStack);\n      blockAnimations.disposeUiEffect(this);\n    }\n    // Stop rerendering.\n    this.rendered = false;\n\n    // Clear pending warnings.\n    if (this.warningTextDb_) {\n      for (const n in this.warningTextDb_) {\n        clearTimeout(this.warningTextDb_[n]);\n      }\n      this.warningTextDb_ = null;\n    }\n\n    const icons = this.getIcons();\n    for (let i = 0; i < icons.length; i++) {\n      icons[i].dispose();\n    }\n    super.dispose(!!healStack);\n\n    dom.removeNode(this.svgGroup_);\n    blockWorkspace.resizeContents();\n    // Sever JavaScript to DOM connections.\n    this.svgGroup_ = null;\n    dom.stopTextWidthCache();\n  }\n\n  /**\n   * Delete a block and hide chaff when doing so. The block will not be deleted\n   * if it's in a flyout. This is called from the context menu and keyboard\n   * shortcuts as the full delete action. If you are disposing of a block from\n   * the workspace and don't need to perform flyout checks, handle event\n   * grouping, or hide chaff, then use `block.dispose()` directly.\n   */\n  checkAndDelete() {\n    if (this.workspace.isFlyout) {\n      return;\n    }\n    eventUtils.setGroup(true);\n    this.workspace.hideChaff();\n    if (this.outputConnection) {\n      // Do not attempt to heal rows\n      // (https://github.com/google/blockly/issues/4832)\n      this.dispose(false, true);\n    } else {\n      this.dispose(/* heal */ true, true);\n    }\n    eventUtils.setGroup(false);\n  }\n\n  /**\n   * Encode a block for copying.\n   * @return {?ICopyable.CopyData} Copy metadata, or null if the block is\n   *     an insertion marker.\n   * @package\n   */\n  toCopyData() {\n    if (this.isInsertionMarker_) {\n      return null;\n    }\n    return {\n      saveInfo: /** @type {!blocks.State} */ (\n          blocks.save(this, {addCoordinates: true, addNextBlocks: false})),\n      source: this.workspace,\n      typeCounts: common.getBlockTypeCounts(this, true),\n    };\n  }\n\n  /**\n   * Updates the colour of the block to match the block's state.\n   * @package\n   */\n  applyColour() {\n    this.pathObject.applyColour(this);\n\n    const icons = this.getIcons();\n    for (let i = 0; i < icons.length; i++) {\n      icons[i].applyColour();\n    }\n\n    for (let x = 0, input; (input = this.inputList[x]); x++) {\n      for (let y = 0, field; (field = input.fieldRow[y]); y++) {\n        field.applyColour();\n      }\n    }\n  }\n\n  /**\n   * Updates the color of the block (and children) to match the current disabled\n   * state.\n   * @package\n   */\n  updateDisabled() {\n    const children =\n        /** @type {!Array<!BlockSvg>} */ (this.getChildren(false));\n    this.applyColour();\n    if (this.isCollapsed()) {\n      return;\n    }\n    for (let i = 0, child; (child = children[i]); i++) {\n      if (child.rendered) {\n        child.updateDisabled();\n      }\n    }\n  }\n\n  /**\n   * Get the comment icon attached to this block, or null if the block has no\n   * comment.\n   * @return {?Comment} The comment icon attached to this block, or null.\n   */\n  getCommentIcon() {\n    return this.commentIcon_;\n  }\n\n  /**\n   * Set this block's comment text.\n   * @param {?string} text The text, or null to delete.\n   */\n  setCommentText(text) {\n    const {Comment} = goog.module.get('Blockly.Comment');\n    if (!Comment) {\n      throw Error('Missing require for Blockly.Comment');\n    }\n    if (this.commentModel.text === text) {\n      return;\n    }\n    super.setCommentText(text);\n\n    const shouldHaveComment = text !== null;\n    if (!!this.commentIcon_ === shouldHaveComment) {\n      // If the comment's state of existence is correct, but the text is new\n      // that means we're just updating a comment.\n      this.commentIcon_.updateText();\n      return;\n    }\n    if (shouldHaveComment) {\n      this.commentIcon_ = new Comment(this);\n      this.comment = this.commentIcon_;  // For backwards compatibility.\n    } else {\n      this.commentIcon_.dispose();\n      this.commentIcon_ = null;\n      this.comment = null;  // For backwards compatibility.\n    }\n    if (this.rendered) {\n      this.render();\n      // Adding or removing a comment icon will cause the block to change shape.\n      this.bumpNeighbours();\n    }\n  }\n\n  /**\n   * Set this block's warning text.\n   * @param {?string} text The text, or null to delete.\n   * @param {string=} opt_id An optional ID for the warning text to be able to\n   *     maintain multiple warnings.\n   */\n  setWarningText(text, opt_id) {\n    const {Warning} = goog.module.get('Blockly.Warning');\n    if (!Warning) {\n      throw Error('Missing require for Blockly.Warning');\n    }\n    if (!this.warningTextDb_) {\n      // Create a database of warning PIDs.\n      // Only runs once per block (and only those with warnings).\n      this.warningTextDb_ = Object.create(null);\n    }\n    const id = opt_id || '';\n    if (!id) {\n      // Kill all previous pending processes, this edit supersedes them all.\n      for (const n of Object.keys(this.warningTextDb_)) {\n        clearTimeout(this.warningTextDb_[n]);\n        delete this.warningTextDb_[n];\n      }\n    } else if (this.warningTextDb_[id]) {\n      // Only queue up the latest change.  Kill any earlier pending process.\n      clearTimeout(this.warningTextDb_[id]);\n      delete this.warningTextDb_[id];\n    }\n    if (this.workspace.isDragging()) {\n      // Don't change the warning text during a drag.\n      // Wait until the drag finishes.\n      const thisBlock = this;\n      this.warningTextDb_[id] = setTimeout(function() {\n        if (thisBlock.workspace) {  // Check block wasn't deleted.\n          delete thisBlock.warningTextDb_[id];\n          thisBlock.setWarningText(text, id);\n        }\n      }, 100);\n      return;\n    }\n    if (this.isInFlyout) {\n      text = null;\n    }\n\n    let changedState = false;\n    if (typeof text === 'string') {\n      // Bubble up to add a warning on top-most collapsed block.\n      let parent = this.getSurroundParent();\n      let collapsedParent = null;\n      while (parent) {\n        if (parent.isCollapsed()) {\n          collapsedParent = parent;\n        }\n        parent = parent.getSurroundParent();\n      }\n      if (collapsedParent) {\n        collapsedParent.setWarningText(\n            Msg['COLLAPSED_WARNINGS_WARNING'], BlockSvg.COLLAPSED_WARNING_ID);\n      }\n\n      if (!this.warning) {\n        this.warning = new Warning(this);\n        changedState = true;\n      }\n      this.warning.setText(/** @type {string} */ (text), id);\n    } else {\n      // Dispose all warnings if no ID is given.\n      if (this.warning && !id) {\n        this.warning.dispose();\n        changedState = true;\n      } else if (this.warning) {\n        const oldText = this.warning.getText();\n        this.warning.setText('', id);\n        const newText = this.warning.getText();\n        if (!newText) {\n          this.warning.dispose();\n        }\n        changedState = oldText !== newText;\n      }\n    }\n    if (changedState && this.rendered) {\n      this.render();\n      // Adding or removing a warning icon will cause the block to change shape.\n      this.bumpNeighbours();\n    }\n  }\n\n  /**\n   * Give this block a mutator dialog.\n   * @param {?Mutator} mutator A mutator dialog instance or null to remove.\n   */\n  setMutator(mutator) {\n    if (this.mutator && this.mutator !== mutator) {\n      this.mutator.dispose();\n    }\n    if (mutator) {\n      mutator.setBlock(this);\n      this.mutator = mutator;\n      mutator.createIcon();\n    }\n    if (this.rendered) {\n      this.render();\n      // Adding or removing a mutator icon will cause the block to change shape.\n      this.bumpNeighbours();\n    }\n  }\n\n  /**\n   * Set whether the block is enabled or not.\n   * @param {boolean} enabled True if enabled.\n   */\n  setEnabled(enabled) {\n    if (this.isEnabled() !== enabled) {\n      super.setEnabled(enabled);\n      if (this.rendered && !this.getInheritedDisabled()) {\n        this.updateDisabled();\n      }\n    }\n  }\n\n  /**\n   * Set whether the block is highlighted or not.  Block highlighting is\n   * often used to visually mark blocks currently being executed.\n   * @param {boolean} highlighted True if highlighted.\n   */\n  setHighlighted(highlighted) {\n    if (!this.rendered) {\n      return;\n    }\n    this.pathObject.updateHighlighted(highlighted);\n  }\n\n  /**\n   * Adds the visual \"select\" effect to the block, but does not actually select\n   * it or fire an event.\n   * @see BlockSvg#select\n   */\n  addSelect() {\n    this.pathObject.updateSelected(true);\n  }\n\n  /**\n   * Removes the visual \"select\" effect from the block, but does not actually\n   * unselect it or fire an event.\n   * @see BlockSvg#unselect\n   */\n  removeSelect() {\n    this.pathObject.updateSelected(false);\n  }\n\n  /**\n   * Update the cursor over this block by adding or removing a class.\n   * @param {boolean} enable True if the delete cursor should be shown, false\n   *     otherwise.\n   * @package\n   */\n  setDeleteStyle(enable) {\n    this.pathObject.updateDraggingDelete(enable);\n  }\n\n  // Overrides of functions on Blockly.Block that take into account whether the\n\n  // block has been rendered.\n\n  /**\n   * Get the colour of a block.\n   * @return {string} #RRGGBB string.\n   */\n  getColour() {\n    return this.style.colourPrimary;\n  }\n\n  /**\n   * Change the colour of a block.\n   * @param {number|string} colour HSV hue value, or #RRGGBB string.\n   */\n  setColour(colour) {\n    super.setColour(colour);\n    const styleObj =\n        this.workspace.getRenderer().getConstants().getBlockStyleForColour(\n            this.colour_);\n\n    this.pathObject.setStyle(styleObj.style);\n    this.style = styleObj.style;\n    this.styleName_ = styleObj.name;\n\n    this.applyColour();\n  }\n\n  /**\n   * Set the style and colour values of a block.\n   * @param {string} blockStyleName Name of the block style.\n   * @throws {Error} if the block style does not exist.\n   */\n  setStyle(blockStyleName) {\n    const blockStyle =\n        this.workspace.getRenderer().getConstants().getBlockStyle(\n            blockStyleName);\n    this.styleName_ = blockStyleName;\n\n    if (blockStyle) {\n      this.hat = blockStyle.hat;\n      this.pathObject.setStyle(blockStyle);\n      // Set colour to match Block.\n      this.colour_ = blockStyle.colourPrimary;\n      this.style = blockStyle;\n\n      this.applyColour();\n    } else {\n      throw Error('Invalid style name: ' + blockStyleName);\n    }\n  }\n\n  /**\n   * Move this block to the front of the visible workspace.\n   * <g> tags do not respect z-index so SVG renders them in the\n   * order that they are in the DOM.  By placing this block first within the\n   * block group's <g>, it will render on top of any other blocks.\n   * @package\n   */\n  bringToFront() {\n    let block = this;\n    do {\n      const root = block.getSvgRoot();\n      const parent = root.parentNode;\n      const childNodes = parent.childNodes;\n      // Avoid moving the block if it's already at the bottom.\n      if (childNodes[childNodes.length - 1] !== root) {\n        parent.appendChild(root);\n      }\n      block = block.getParent();\n    } while (block);\n  }\n\n  /**\n   * Set whether this block can chain onto the bottom of another block.\n   * @param {boolean} newBoolean True if there can be a previous statement.\n   * @param {(string|Array<string>|null)=} opt_check Statement type or\n   *     list of statement types.  Null/undefined if any type could be\n   * connected.\n   */\n  setPreviousStatement(newBoolean, opt_check) {\n    super.setPreviousStatement(newBoolean, opt_check);\n\n    if (this.rendered) {\n      this.render();\n      this.bumpNeighbours();\n    }\n  }\n\n  /**\n   * Set whether another block can chain onto the bottom of this block.\n   * @param {boolean} newBoolean True if there can be a next statement.\n   * @param {(string|Array<string>|null)=} opt_check Statement type or\n   *     list of statement types.  Null/undefined if any type could be\n   * connected.\n   */\n  setNextStatement(newBoolean, opt_check) {\n    super.setNextStatement(newBoolean, opt_check);\n\n    if (this.rendered) {\n      this.render();\n      this.bumpNeighbours();\n    }\n  }\n\n  /**\n   * Set whether this block returns a value.\n   * @param {boolean} newBoolean True if there is an output.\n   * @param {(string|Array<string>|null)=} opt_check Returned type or list\n   *     of returned types.  Null or undefined if any type could be returned\n   *     (e.g. variable get).\n   */\n  setOutput(newBoolean, opt_check) {\n    super.setOutput(newBoolean, opt_check);\n\n    if (this.rendered) {\n      this.render();\n      this.bumpNeighbours();\n    }\n  }\n\n  /**\n   * Set whether value inputs are arranged horizontally or vertically.\n   * @param {boolean} newBoolean True if inputs are horizontal.\n   */\n  setInputsInline(newBoolean) {\n    super.setInputsInline(newBoolean);\n\n    if (this.rendered) {\n      this.render();\n      this.bumpNeighbours();\n    }\n  }\n\n  /**\n   * Remove an input from this block.\n   * @param {string} name The name of the input.\n   * @param {boolean=} opt_quiet True to prevent error if input is not present.\n   * @return {boolean} True if operation succeeds, false if input is not present\n   *     and opt_quiet is true\n   * @throws {Error} if the input is not present and opt_quiet is not true.\n   */\n  removeInput(name, opt_quiet) {\n    const removed = super.removeInput(name, opt_quiet);\n\n    if (this.rendered) {\n      this.render();\n      // Removing an input will cause the block to change shape.\n      this.bumpNeighbours();\n    }\n\n    return removed;\n  }\n\n  /**\n   * Move a numbered input to a different location on this block.\n   * @param {number} inputIndex Index of the input to move.\n   * @param {number} refIndex Index of input that should be after the moved\n   *     input.\n   */\n  moveNumberedInputBefore(inputIndex, refIndex) {\n    super.moveNumberedInputBefore(inputIndex, refIndex);\n\n    if (this.rendered) {\n      this.render();\n      // Moving an input will cause the block to change shape.\n      this.bumpNeighbours();\n    }\n  }\n\n  /**\n   * Add a value input, statement input or local variable to this block.\n   * @param {number} type One of Blockly.inputTypes.\n   * @param {string} name Language-neutral identifier which may used to find\n   *     this input again.  Should be unique to this block.\n   * @return {!Input} The input object created.\n   * @protected\n   * @override\n   */\n  appendInput_(type, name) {\n    const input = super.appendInput_(type, name);\n\n    if (this.rendered) {\n      this.render();\n      // Adding an input will cause the block to change shape.\n      this.bumpNeighbours();\n    }\n    return input;\n  }\n\n  /**\n   * Sets whether this block's connections are tracked in the database or not.\n   *\n   * Used by the deserializer to be more efficient. Setting a connection's\n   * tracked_ value to false keeps it from adding itself to the db when it\n   * gets its first moveTo call, saving expensive ops for later.\n   * @param {boolean} track If true, start tracking. If false, stop tracking.\n   * @package\n   */\n  setConnectionTracking(track) {\n    if (this.previousConnection) {\n      /** @type {!RenderedConnection} */ (this.previousConnection)\n          .setTracking(track);\n    }\n    if (this.outputConnection) {\n      /** @type {!RenderedConnection} */ (this.outputConnection)\n          .setTracking(track);\n    }\n    if (this.nextConnection) {\n      /** @type {!RenderedConnection} */ (this.nextConnection)\n          .setTracking(track);\n      const child =\n          /** @type {!RenderedConnection} */ (this.nextConnection)\n              .targetBlock();\n      if (child) {\n        child.setConnectionTracking(track);\n      }\n    }\n\n    if (this.collapsed_) {\n      // When track is true, we don't want to start tracking collapsed\n      // connections. When track is false, we're already not tracking\n      // collapsed connections, so no need to update.\n      return;\n    }\n\n    for (let i = 0; i < this.inputList.length; i++) {\n      const conn =\n          /** @type {!RenderedConnection} */ (this.inputList[i].connection);\n      if (conn) {\n        conn.setTracking(track);\n\n        // Pass tracking on down the chain.\n        const block = conn.targetBlock();\n        if (block) {\n          block.setConnectionTracking(track);\n        }\n      }\n    }\n  }\n\n  /**\n   * Returns connections originating from this block.\n   * @param {boolean} all If true, return all connections even hidden ones.\n   *     Otherwise, for a non-rendered block return an empty list, and for a\n   *     collapsed block don't return inputs connections.\n   * @return {!Array<!RenderedConnection>} Array of connections.\n   * @package\n   */\n  getConnections_(all) {\n    const myConnections = [];\n    if (all || this.rendered) {\n      if (this.outputConnection) {\n        myConnections.push(this.outputConnection);\n      }\n      if (this.previousConnection) {\n        myConnections.push(this.previousConnection);\n      }\n      if (this.nextConnection) {\n        myConnections.push(this.nextConnection);\n      }\n      if (all || !this.collapsed_) {\n        for (let i = 0, input; (input = this.inputList[i]); i++) {\n          if (input.connection) {\n            myConnections.push(input.connection);\n          }\n        }\n      }\n    }\n    return myConnections;\n  }\n\n  /**\n   * Walks down a stack of blocks and finds the last next connection on the\n   * stack.\n   * @param {boolean} ignoreShadows If true,the last connection on a non-shadow\n   *     block will be returned. If false, this will follow shadows to find the\n   *     last connection.\n   * @return {?RenderedConnection} The last next connection on the stack,\n   *     or null.\n   * @package\n   * @override\n   */\n  lastConnectionInStack(ignoreShadows) {\n    return /** @type {RenderedConnection} */ (\n        super.lastConnectionInStack(ignoreShadows));\n  }\n\n  /**\n   * Find the connection on this block that corresponds to the given connection\n   * on the other block.\n   * Used to match connections between a block and its insertion marker.\n   * @param {!Block} otherBlock The other block to match against.\n   * @param {!Connection} conn The other connection to match.\n   * @return {?RenderedConnection} The matching connection on this block,\n   *     or null.\n   * @package\n   * @override\n   */\n  getMatchingConnection(otherBlock, conn) {\n    return /** @type {RenderedConnection} */ (\n        super.getMatchingConnection(otherBlock, conn));\n  }\n\n  /**\n   * Create a connection of the specified type.\n   * @param {number} type The type of the connection to create.\n   * @return {!RenderedConnection} A new connection of the specified type.\n   * @protected\n   */\n  makeConnection_(type) {\n    return new RenderedConnection(this, type);\n  }\n\n  /**\n   * Bump unconnected blocks out of alignment.  Two blocks which aren't actually\n   * connected should not coincidentally line up on screen.\n   */\n  bumpNeighbours() {\n    if (!this.workspace) {\n      return;  // Deleted block.\n    }\n    if (this.workspace.isDragging()) {\n      return;  // Don't bump blocks during a drag.\n    }\n    const rootBlock = this.getRootBlock();\n    if (rootBlock.isInFlyout) {\n      return;  // Don't move blocks around in a flyout.\n    }\n    // Loop through every connection on this block.\n    const myConnections = this.getConnections_(false);\n    for (let i = 0, connection; (connection = myConnections[i]); i++) {\n      const renderedConn = /** @type {!RenderedConnection} */ (connection);\n      // Spider down from this block bumping all sub-blocks.\n      if (renderedConn.isConnected() && renderedConn.isSuperior()) {\n        renderedConn.targetBlock().bumpNeighbours();\n      }\n\n      const neighbours = connection.neighbours(config.snapRadius);\n      for (let j = 0, otherConnection; (otherConnection = neighbours[j]); j++) {\n        const renderedOther =\n            /** @type {!RenderedConnection} */ (otherConnection);\n        // If both connections are connected, that's probably fine.  But if\n        // either one of them is unconnected, then there could be confusion.\n        if (!renderedConn.isConnected() || !renderedOther.isConnected()) {\n          // Only bump blocks if they are from different tree structures.\n          if (renderedOther.getSourceBlock().getRootBlock() !== rootBlock) {\n            // Always bump the inferior block.\n            if (renderedConn.isSuperior()) {\n              renderedOther.bumpAwayFrom(renderedConn);\n            } else {\n              renderedConn.bumpAwayFrom(renderedOther);\n            }\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   * Schedule snapping to grid and bumping neighbours to occur after a brief\n   * delay.\n   * @package\n   */\n  scheduleSnapAndBump() {\n    const block = this;\n    // Ensure that any snap and bump are part of this move's event group.\n    const group = eventUtils.getGroup();\n\n    setTimeout(function() {\n      eventUtils.setGroup(group);\n      block.snapToGrid();\n      eventUtils.setGroup(false);\n    }, config.bumpDelay / 2);\n\n    setTimeout(function() {\n      eventUtils.setGroup(group);\n      block.bumpNeighbours();\n      eventUtils.setGroup(false);\n    }, config.bumpDelay);\n  }\n\n  /**\n   * Position a block so that it doesn't move the target block when connected.\n   * The block to position is usually either the first block in a dragged stack\n   * or an insertion marker.\n   * @param {!RenderedConnection} sourceConnection The connection on the\n   *     moving block's stack.\n   * @param {!RenderedConnection} targetConnection The connection that\n   *     should stay stationary as this block is positioned.\n   * @package\n   */\n  positionNearConnection(sourceConnection, targetConnection) {\n    // We only need to position the new block if it's before the existing one,\n    // otherwise its position is set by the previous block.\n    if (sourceConnection.type === ConnectionType.NEXT_STATEMENT ||\n        sourceConnection.type === ConnectionType.INPUT_VALUE) {\n      const dx = targetConnection.x - sourceConnection.x;\n      const dy = targetConnection.y - sourceConnection.y;\n\n      this.moveBy(dx, dy);\n    }\n  }\n\n  /**\n   * Return the parent block or null if this block is at the top level.\n   * @return {?BlockSvg} The block (if any) that holds the current block.\n   * @override\n   */\n  getParent() {\n    return /** @type {?BlockSvg} */ (super.getParent());\n  }\n\n  /**\n   * @return {?BlockSvg} The block (if any) that surrounds the current block.\n   * @override\n   */\n  getSurroundParent() {\n    return /** @type {?BlockSvg} */ (super.getSurroundParent());\n  }\n\n  /**\n   * @return {?BlockSvg} The next statement block or null.\n   * @override\n   */\n  getNextBlock() {\n    return /** @type {?BlockSvg} */ (super.getNextBlock());\n  }\n\n  /**\n   * @return {?BlockSvg} The previou statement block or null.\n   * @override\n   */\n  getPreviousBlock() {\n    return /** @type {?BlockSvg} */ (super.getPreviousBlock());\n  }\n\n  /**\n   * @return {?RenderedConnection} The first statement connection or null.\n   * @package\n   * @override\n   */\n  getFirstStatementConnection() {\n    return /** @type {?RenderedConnection} */ (\n        super.getFirstStatementConnection());\n  }\n\n  /**\n   * @return {!BlockSvg} The top block in a stack.\n   * @override\n   */\n  getTopStackBlock() {\n    return /** @type {!BlockSvg} */ (super.getTopStackBlock());\n  }\n\n  /**\n   * @param {boolean} ordered Sort the list if true.\n   * @return {!Array<!BlockSvg>} Children of this block.\n   * @override\n   */\n  getChildren(ordered) {\n    return /** @type {!Array<!BlockSvg>} */ (super.getChildren(ordered));\n  }\n\n  /**\n   * @param {boolean} ordered Sort the list if true.\n   * @return {!Array<!BlockSvg>} Descendants of this block.\n   * @override\n   */\n  getDescendants(ordered) {\n    return /** @type {!Array<!BlockSvg>} */ (super.getDescendants(ordered));\n  }\n\n  /**\n   * @param {string} name The name of the input.\n   * @return {?BlockSvg} The attached value block, or null if the input is\n   *     either disconnected or if the input does not exist.\n   * @override\n   */\n  getInputTargetBlock(name) {\n    return /** @type {?BlockSvg} */ (super.getInputTargetBlock(name));\n  }\n\n  /**\n   * Return the top-most block in this block's tree.\n   * This will return itself if this block is at the top level.\n   * @return {!BlockSvg} The root block.\n   * @override\n   */\n  getRootBlock() {\n    return /** @type {!BlockSvg} */ (super.getRootBlock());\n  }\n\n  /**\n   * Lays out and reflows a block based on its contents and settings.\n   * @param {boolean=} opt_bubble If false, just render this block.\n   *   If true, also render block's parent, grandparent, etc.  Defaults to true.\n   */\n  render(opt_bubble) {\n    if (this.renderIsInProgress_) {\n      return;  // Don't allow recursive renders.\n    }\n    this.renderIsInProgress_ = true;\n    try {\n      this.rendered = true;\n      dom.startTextWidthCache();\n\n      if (this.isCollapsed()) {\n        this.updateCollapsed_();\n      }\n      this.workspace.getRenderer().render(this);\n      this.updateConnectionLocations_();\n\n      if (opt_bubble !== false) {\n        const parentBlock = this.getParent();\n        if (parentBlock) {\n          parentBlock.render(true);\n        } else {\n          // Top-most block. Fire an event to allow scrollbars to resize.\n          this.workspace.resizeContents();\n        }\n      }\n\n      dom.stopTextWidthCache();\n      this.updateMarkers_();\n    } finally {\n      this.renderIsInProgress_ = false;\n    }\n  }\n\n  /**\n   * Redraw any attached marker or cursor svgs if needed.\n   * @protected\n   */\n  updateMarkers_() {\n    if (this.workspace.keyboardAccessibilityMode && this.pathObject.cursorSvg) {\n      this.workspace.getCursor().draw();\n    }\n    if (this.workspace.keyboardAccessibilityMode && this.pathObject.markerSvg) {\n      // TODO(#4592): Update all markers on the block.\n      this.workspace.getMarker(MarkerManager.LOCAL_MARKER).draw();\n    }\n  }\n\n  /**\n   * Update all of the connections on this block with the new locations\n   * calculated during rendering.  Also move all of the connected blocks based\n   * on the new connection locations.\n   * @private\n   */\n  updateConnectionLocations_() {\n    const blockTL = this.getRelativeToSurfaceXY();\n    // Don't tighten previous or output connections because they are inferior\n    // connections.\n    if (this.previousConnection) {\n      this.previousConnection.moveToOffset(blockTL);\n    }\n    if (this.outputConnection) {\n      this.outputConnection.moveToOffset(blockTL);\n    }\n\n    for (let i = 0; i < this.inputList.length; i++) {\n      const conn =\n          /** @type {!RenderedConnection} */ (this.inputList[i].connection);\n      if (conn) {\n        conn.moveToOffset(blockTL);\n        if (conn.isConnected()) {\n          conn.tighten();\n        }\n      }\n    }\n\n    if (this.nextConnection) {\n      this.nextConnection.moveToOffset(blockTL);\n      if (this.nextConnection.isConnected()) {\n        this.nextConnection.tighten();\n      }\n    }\n  }\n\n  /**\n   * Add the cursor SVG to this block's SVG group.\n   * @param {SVGElement} cursorSvg The SVG root of the cursor to be added to the\n   *     block SVG group.\n   * @package\n   */\n  setCursorSvg(cursorSvg) {\n    this.pathObject.setCursorSvg(cursorSvg);\n  }\n\n  /**\n   * Add the marker SVG to this block's SVG group.\n   * @param {SVGElement} markerSvg The SVG root of the marker to be added to the\n   *     block SVG group.\n   * @package\n   */\n  setMarkerSvg(markerSvg) {\n    this.pathObject.setMarkerSvg(markerSvg);\n  }\n\n  /**\n   * Returns a bounding box describing the dimensions of this block\n   * and any blocks stacked below it.\n   * @return {!{height: number, width: number}} Object with height and width\n   *    properties in workspace units.\n   * @package\n   */\n  getHeightWidth() {\n    let height = this.height;\n    let width = this.width;\n    // Recursively add size of subsequent blocks.\n    const nextBlock = this.getNextBlock();\n    if (nextBlock) {\n      const nextHeightWidth = nextBlock.getHeightWidth();\n      const workspace = /** @type {!WorkspaceSvg} */ (this.workspace);\n      const tabHeight = workspace.getRenderer().getConstants().NOTCH_HEIGHT;\n      height += nextHeightWidth.height - tabHeight;\n      width = Math.max(width, nextHeightWidth.width);\n    }\n    return {height: height, width: width};\n  }\n\n  /**\n   * Visual effect to show that if the dragging block is dropped, this block\n   * will be replaced.  If a shadow block, it will disappear.  Otherwise it will\n   * bump.\n   * @param {boolean} add True if highlighting should be added.\n   * @package\n   */\n  fadeForReplacement(add) {\n    this.pathObject.updateReplacementFade(add);\n  }\n\n  /**\n   * Visual effect to show that if the dragging block is dropped it will connect\n   * to this input.\n   * @param {Connection} conn The connection on the input to highlight.\n   * @param {boolean} add True if highlighting should be added.\n   * @package\n   */\n  highlightShapeForInput(conn, add) {\n    this.pathObject.updateShapeForInputHighlight(conn, add);\n  }\n}\n\n/**\n * Constant for identifying rows that are to be rendered inline.\n * Don't collide with Blockly.inputTypes.\n * @const\n */\nBlockSvg.INLINE = -1;\n\n/**\n * ID to give the \"collapsed warnings\" warning. Allows us to remove the\n * \"collapsed warnings\" warning without removing any warnings that belong to\n * the block.\n * @type {string}\n * @const\n */\nBlockSvg.COLLAPSED_WARNING_ID = 'TEMP_COLLAPSED_WARNING_';\n\nexports.BlockSvg = BlockSvg;\n","/**\n * @license\n * Copyright 2011 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview A database of all the rendered connections that could\n *    possibly be connected to (i.e. not collapsed, etc).\n *    Sorted by y coordinate.\n */\n'use strict';\n\n/**\n * A database of all the rendered connections that could\n *    possibly be connected to (i.e. not collapsed, etc).\n *    Sorted by y coordinate.\n * @class\n */\ngoog.module('Blockly.ConnectionDB');\n\nconst {ConnectionType} = goog.require('Blockly.ConnectionType');\n/* eslint-disable-next-line no-unused-vars */\nconst {Coordinate} = goog.requireType('Blockly.utils.Coordinate');\n/* eslint-disable-next-line no-unused-vars */\nconst {IConnectionChecker} = goog.requireType('Blockly.IConnectionChecker');\n/* eslint-disable-next-line no-unused-vars */\nconst {RenderedConnection} = goog.requireType('Blockly.RenderedConnection');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.constants');\n\n\n/**\n * Database of connections.\n * Connections are stored in order of their vertical component.  This way\n * connections in an area may be looked up quickly using a binary search.\n * @alias Blockly.ConnectionDB\n */\nclass ConnectionDB {\n  /**\n   * @param {!IConnectionChecker} checker The workspace's\n   *     connection type checker, used to decide if connections are valid during\n   * a drag.\n   */\n  constructor(checker) {\n    /**\n     * Array of connections sorted by y position in workspace units.\n     * @type {!Array<!RenderedConnection>}\n     * @private\n     */\n    this.connections_ = [];\n    /**\n     * The workspace's connection type checker, used to decide if connections\n     * are valid during a drag.\n     * @type {!IConnectionChecker}\n     * @private\n     */\n    this.connectionChecker_ = checker;\n  }\n\n  /**\n   * Add a connection to the database. Should not already exist in the database.\n   * @param {!RenderedConnection} connection The connection to be added.\n   * @param {number} yPos The y position used to decide where to insert the\n   *    connection.\n   * @package\n   */\n  addConnection(connection, yPos) {\n    const index = this.calculateIndexForYPos_(yPos);\n    this.connections_.splice(index, 0, connection);\n  }\n\n  /**\n   * Finds the index of the given connection.\n   *\n   * Starts by doing a binary search to find the approximate location, then\n   * linearly searches nearby for the exact connection.\n   * @param {!RenderedConnection} conn The connection to find.\n   * @param {number} yPos The y position used to find the index of the\n   *     connection.\n   * @return {number} The index of the connection, or -1 if the connection was\n   *     not found.\n   * @private\n   */\n  findIndexOfConnection_(conn, yPos) {\n    if (!this.connections_.length) {\n      return -1;\n    }\n\n    const bestGuess = this.calculateIndexForYPos_(yPos);\n    if (bestGuess >= this.connections_.length) {\n      // Not in list\n      return -1;\n    }\n\n    yPos = conn.y;\n    // Walk forward and back on the y axis looking for the connection.\n    let pointer = bestGuess;\n    while (pointer >= 0 && this.connections_[pointer].y === yPos) {\n      if (this.connections_[pointer] === conn) {\n        return pointer;\n      }\n      pointer--;\n    }\n\n    pointer = bestGuess;\n    while (pointer < this.connections_.length &&\n           this.connections_[pointer].y === yPos) {\n      if (this.connections_[pointer] === conn) {\n        return pointer;\n      }\n      pointer++;\n    }\n    return -1;\n  }\n\n  /**\n   * Finds the correct index for the given y position.\n   * @param {number} yPos The y position used to decide where to\n   *    insert the connection.\n   * @return {number} The candidate index.\n   * @private\n   */\n  calculateIndexForYPos_(yPos) {\n    if (!this.connections_.length) {\n      return 0;\n    }\n    let pointerMin = 0;\n    let pointerMax = this.connections_.length;\n    while (pointerMin < pointerMax) {\n      const pointerMid = Math.floor((pointerMin + pointerMax) / 2);\n      if (this.connections_[pointerMid].y < yPos) {\n        pointerMin = pointerMid + 1;\n      } else if (this.connections_[pointerMid].y > yPos) {\n        pointerMax = pointerMid;\n      } else {\n        pointerMin = pointerMid;\n        break;\n      }\n    }\n    return pointerMin;\n  }\n\n  /**\n   * Remove a connection from the database.  Must already exist in DB.\n   * @param {!RenderedConnection} connection The connection to be removed.\n   * @param {number} yPos The y position used to find the index of the\n   *     connection.\n   * @throws {Error} If the connection cannot be found in the database.\n   */\n  removeConnection(connection, yPos) {\n    const index = this.findIndexOfConnection_(connection, yPos);\n    if (index === -1) {\n      throw Error('Unable to find connection in connectionDB.');\n    }\n    this.connections_.splice(index, 1);\n  }\n\n  /**\n   * Find all nearby connections to the given connection.\n   * Type checking does not apply, since this function is used for bumping.\n   * @param {!RenderedConnection} connection The connection whose\n   *     neighbours should be returned.\n   * @param {number} maxRadius The maximum radius to another connection.\n   * @return {!Array<!RenderedConnection>} List of connections.\n   */\n  getNeighbours(connection, maxRadius) {\n    const db = this.connections_;\n    const currentX = connection.x;\n    const currentY = connection.y;\n\n    // Binary search to find the closest y location.\n    let pointerMin = 0;\n    let pointerMax = db.length - 2;\n    let pointerMid = pointerMax;\n    while (pointerMin < pointerMid) {\n      if (db[pointerMid].y < currentY) {\n        pointerMin = pointerMid;\n      } else {\n        pointerMax = pointerMid;\n      }\n      pointerMid = Math.floor((pointerMin + pointerMax) / 2);\n    }\n\n    const neighbours = [];\n    /**\n     * Computes if the current connection is within the allowed radius of\n     * another connection. This function is a closure and has access to outside\n     * variables.\n     * @param {number} yIndex The other connection's index in the database.\n     * @return {boolean} True if the current connection's vertical distance from\n     *     the other connection is less than the allowed radius.\n     */\n    function checkConnection_(yIndex) {\n      const dx = currentX - db[yIndex].x;\n      const dy = currentY - db[yIndex].y;\n      const r = Math.sqrt(dx * dx + dy * dy);\n      if (r <= maxRadius) {\n        neighbours.push(db[yIndex]);\n      }\n      return dy < maxRadius;\n    }\n\n    // Walk forward and back on the y axis looking for the closest x,y point.\n    pointerMin = pointerMid;\n    pointerMax = pointerMid;\n    if (db.length) {\n      while (pointerMin >= 0 && checkConnection_(pointerMin)) {\n        pointerMin--;\n      }\n      do {\n        pointerMax++;\n      } while (pointerMax < db.length && checkConnection_(pointerMax));\n    }\n\n    return neighbours;\n  }\n\n  /**\n   * Is the candidate connection close to the reference connection.\n   * Extremely fast; only looks at Y distance.\n   * @param {number} index Index in database of candidate connection.\n   * @param {number} baseY Reference connection's Y value.\n   * @param {number} maxRadius The maximum radius to another connection.\n   * @return {boolean} True if connection is in range.\n   * @private\n   */\n  isInYRange_(index, baseY, maxRadius) {\n    return (Math.abs(this.connections_[index].y - baseY) <= maxRadius);\n  }\n\n  /**\n   * Find the closest compatible connection to this connection.\n   * @param {!RenderedConnection} conn The connection searching for a compatible\n   *     mate.\n   * @param {number} maxRadius The maximum radius to another connection.\n   * @param {!Coordinate} dxy Offset between this connection's\n   *     location in the database and the current location (as a result of\n   *     dragging).\n   * @return {!{connection: RenderedConnection, radius: number}}\n   *     Contains two properties: 'connection' which is either another\n   *     connection or null, and 'radius' which is the distance.\n   */\n  searchForClosest(conn, maxRadius, dxy) {\n    if (!this.connections_.length) {\n      // Don't bother.\n      return {connection: null, radius: maxRadius};\n    }\n\n    // Stash the values of x and y from before the drag.\n    const baseY = conn.y;\n    const baseX = conn.x;\n\n    conn.x = baseX + dxy.x;\n    conn.y = baseY + dxy.y;\n\n    // calculateIndexForYPos_ finds an index for insertion, which is always\n    // after any block with the same y index.  We want to search both forward\n    // and back, so search on both sides of the index.\n    const closestIndex = this.calculateIndexForYPos_(conn.y);\n\n    let bestConnection = null;\n    let bestRadius = maxRadius;\n    let temp;\n\n    // Walk forward and back on the y axis looking for the closest x,y point.\n    let pointerMin = closestIndex - 1;\n    while (pointerMin >= 0 && this.isInYRange_(pointerMin, conn.y, maxRadius)) {\n      temp = this.connections_[pointerMin];\n      if (this.connectionChecker_.canConnect(conn, temp, true, bestRadius)) {\n        bestConnection = temp;\n        bestRadius = temp.distanceFrom(conn);\n      }\n      pointerMin--;\n    }\n\n    let pointerMax = closestIndex;\n    while (pointerMax < this.connections_.length &&\n           this.isInYRange_(pointerMax, conn.y, maxRadius)) {\n      temp = this.connections_[pointerMax];\n      if (this.connectionChecker_.canConnect(conn, temp, true, bestRadius)) {\n        bestConnection = temp;\n        bestRadius = temp.distanceFrom(conn);\n      }\n      pointerMax++;\n    }\n\n    // Reset the values of x and y.\n    conn.x = baseX;\n    conn.y = baseY;\n\n    // If there were no valid connections, bestConnection will be null.\n    return {connection: bestConnection, radius: bestRadius};\n  }\n\n  /**\n   * Initialize a set of connection DBs for a workspace.\n   * @param {!IConnectionChecker} checker The workspace's\n   *     connection checker, used to decide if connections are valid during a\n   *     drag.\n   * @return {!Array<!ConnectionDB>} Array of databases.\n   */\n  static init(checker) {\n    // Create four databases, one for each connection type.\n    const dbList = [];\n    dbList[ConnectionType.INPUT_VALUE] = new ConnectionDB(checker);\n    dbList[ConnectionType.OUTPUT_VALUE] = new ConnectionDB(checker);\n    dbList[ConnectionType.NEXT_STATEMENT] = new ConnectionDB(checker);\n    dbList[ConnectionType.PREVIOUS_STATEMENT] = new ConnectionDB(checker);\n    return dbList;\n  }\n}\n\nexports.ConnectionDB = ConnectionDB;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Object in charge of storing and updating a workspace theme\n *     and UI components.\n */\n'use strict';\n\n/**\n * Object in charge of storing and updating a workspace theme\n *     and UI components.\n * @class\n */\ngoog.module('Blockly.ThemeManager');\n\nconst arrayUtils = goog.require('Blockly.utils.array');\nconst dom = goog.require('Blockly.utils.dom');\n/* eslint-disable-next-line no-unused-vars */\nconst {Theme} = goog.requireType('Blockly.Theme');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceSvg} = goog.requireType('Blockly.WorkspaceSvg');\n/* eslint-disable-next-line no-unused-vars */\nconst {Workspace} = goog.requireType('Blockly.Workspace');\n\n\n/**\n * Class for storing and updating a workspace's theme and UI components.\n * @alias Blockly.ThemeManager\n */\nclass ThemeManager {\n  /**\n   * @param {!WorkspaceSvg} workspace The main workspace.\n   * @param {!Theme} theme The workspace theme.\n   * @package\n   */\n  constructor(workspace, theme) {\n    /**\n     * The main workspace.\n     * @type {!WorkspaceSvg}\n     * @private\n     */\n    this.workspace_ = workspace;\n\n    /**\n     * The Blockly theme to use.\n     * @type {!Theme}\n     * @private\n     */\n    this.theme_ = theme;\n\n    /**\n     * A list of workspaces that are subscribed to this theme.\n     * @type {!Array<Workspace>}\n     * @private\n     */\n    this.subscribedWorkspaces_ = [];\n\n    /**\n     * A map of subscribed UI components, keyed by component name.\n     * @type {!Object<string, !Array<!ThemeManager.Component>>}\n     * @private\n     */\n    this.componentDB_ = Object.create(null);\n  }\n\n  /**\n   * Get the workspace theme.\n   * @return {!Theme} The workspace theme.\n   * @package\n   */\n  getTheme() {\n    return this.theme_;\n  }\n\n  /**\n   * Set the workspace theme, and refresh the workspace and all components.\n   * @param {!Theme} theme The workspace theme.\n   * @package\n   */\n  setTheme(theme) {\n    const prevTheme = this.theme_;\n    this.theme_ = theme;\n\n    // Set the theme name onto the injection div.\n    const injectionDiv = this.workspace_.getInjectionDiv();\n    if (injectionDiv) {\n      if (prevTheme) {\n        dom.removeClass(injectionDiv, prevTheme.getClassName());\n      }\n      dom.addClass(injectionDiv, this.theme_.getClassName());\n    }\n\n    // Refresh all subscribed workspaces.\n    for (let i = 0, workspace; (workspace = this.subscribedWorkspaces_[i]);\n         i++) {\n      /** @type {!WorkspaceSvg} */ (workspace).refreshTheme();\n    }\n\n    // Refresh all registered Blockly UI components.\n    for (let i = 0, keys = Object.keys(this.componentDB_), key; (key = keys[i]);\n         i++) {\n      for (let j = 0, component; (component = this.componentDB_[key][j]); j++) {\n        const element = component.element;\n        const propertyName = component.propertyName;\n        const style = this.theme_ && this.theme_.getComponentStyle(key);\n        element.style[propertyName] = style || '';\n      }\n    }\n\n    for (const workspace of this.subscribedWorkspaces_) {\n      /** @type {!WorkspaceSvg} */ (workspace).hideChaff();\n    }\n  }\n\n  /**\n   * Subscribe a workspace to changes to the selected theme.  If a new theme is\n   * set, the workspace is called to refresh its blocks.\n   * @param {!Workspace} workspace The workspace to subscribe.\n   * @package\n   */\n  subscribeWorkspace(workspace) {\n    this.subscribedWorkspaces_.push(workspace);\n  }\n\n  /**\n   * Unsubscribe a workspace to changes to the selected theme.\n   * @param {!Workspace} workspace The workspace to unsubscribe.\n   * @package\n   */\n  unsubscribeWorkspace(workspace) {\n    if (!arrayUtils.removeElem(this.subscribedWorkspaces_, workspace)) {\n      throw Error(\n          'Cannot unsubscribe a workspace that hasn\\'t been subscribed.');\n    }\n  }\n\n  /**\n   * Subscribe an element to changes to the selected theme.  If a new theme is\n   * selected, the element's style is refreshed with the new theme's style.\n   * @param {!Element} element The element to subscribe.\n   * @param {string} componentName The name used to identify the component. This\n   *     must be the same name used to configure the style in the Theme object.\n   * @param {string} propertyName The inline style property name to update.\n   * @package\n   */\n  subscribe(element, componentName, propertyName) {\n    if (!this.componentDB_[componentName]) {\n      this.componentDB_[componentName] = [];\n    }\n\n    // Add the element to our component map.\n    this.componentDB_[componentName].push(\n        {element: element, propertyName: propertyName});\n\n    // Initialize the element with its corresponding theme style.\n    const style = this.theme_ && this.theme_.getComponentStyle(componentName);\n    element.style[propertyName] = style || '';\n  }\n\n  /**\n   * Unsubscribe an element to changes to the selected theme.\n   * @param {Element} element The element to unsubscribe.\n   * @package\n   */\n  unsubscribe(element) {\n    if (!element) {\n      return;\n    }\n    // Go through all component, and remove any references to this element.\n    const componentNames = Object.keys(this.componentDB_);\n    for (let c = 0, componentName; (componentName = componentNames[c]); c++) {\n      const elements = this.componentDB_[componentName];\n      for (let i = elements.length - 1; i >= 0; i--) {\n        if (elements[i].element === element) {\n          elements.splice(i, 1);\n        }\n      }\n      // Clean up the component map entry if the list is empty.\n      if (!this.componentDB_[componentName].length) {\n        delete this.componentDB_[componentName];\n      }\n    }\n  }\n\n  /**\n   * Dispose of this theme manager.\n   * @package\n   * @suppress {checkTypes}\n   */\n  dispose() {\n    this.owner_ = null;\n    this.theme_ = null;\n    this.subscribedWorkspaces_ = null;\n    this.componentDB_ = null;\n  }\n}\n\n/**\n * A Blockly UI component type.\n * @typedef {{\n *            element:!Element,\n *            propertyName:string\n *          }}\n */\nThemeManager.Component;\n\nexports.ThemeManager = ThemeManager;\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The class extends Gesture to support pinch to zoom\n * for both pointer and touch events.\n */\n'use strict';\n\n/**\n * The class extends Gesture to support pinch to zoom\n * for both pointer and touch events.\n * @class\n */\ngoog.module('Blockly.TouchGesture');\n\nconst Touch = goog.require('Blockly.Touch');\nconst browserEvents = goog.require('Blockly.browserEvents');\nconst {Coordinate} = goog.require('Blockly.utils.Coordinate');\nconst {Gesture} = goog.require('Blockly.Gesture');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceSvg} = goog.requireType('Blockly.WorkspaceSvg');\n\n\n/*\n * Note: In this file \"start\" refers to touchstart, mousedown, and pointerstart\n * events.  \"End\" refers to touchend, mouseup, and pointerend events.\n */\n\n\n/**\n * A multiplier used to convert the gesture scale to a zoom in delta.\n * @const\n */\nconst ZOOM_IN_MULTIPLIER = 5;\n\n/**\n * A multiplier used to convert the gesture scale to a zoom out delta.\n * @const\n */\nconst ZOOM_OUT_MULTIPLIER = 6;\n\n/**\n * Class for one gesture.\n * @extends {Gesture}\n * @alias Blockly.TouchGesture\n */\nclass TouchGesture extends Gesture {\n  /**\n   * @param {!Event} e The event that kicked off this gesture.\n   * @param {!WorkspaceSvg} creatorWorkspace The workspace that created\n   *     this gesture and has a reference to it.\n   */\n  constructor(e, creatorWorkspace) {\n    super(e, creatorWorkspace);\n\n    /**\n     * Boolean for whether or not this gesture is a multi-touch gesture.\n     * @type {boolean}\n     * @private\n     */\n    this.isMultiTouch_ = false;\n\n    /**\n     * A map of cached points used for tracking multi-touch gestures.\n     * @type {!Object<number|string, Coordinate>}\n     * @private\n     */\n    this.cachedPoints_ = Object.create(null);\n\n    /**\n     * This is the ratio between the starting distance between the touch points\n     * and the most recent distance between the touch points.\n     * Scales between 0 and 1 mean the most recent zoom was a zoom out.\n     * Scales above 1.0 mean the most recent zoom was a zoom in.\n     * @type {number}\n     * @private\n     */\n    this.previousScale_ = 0;\n\n    /**\n     * The starting distance between two touch points.\n     * @type {number}\n     * @private\n     */\n    this.startDistance_ = 0;\n\n    /**\n     * A handle to use to unbind the second touch start or pointer down listener\n     * at the end of a drag.\n     * Opaque data returned from Blockly.bindEventWithChecks_.\n     * @type {?browserEvents.Data}\n     * @private\n     */\n    this.onStartWrapper_ = null;\n\n    /**\n     * Boolean for whether or not the workspace supports pinch-zoom.\n     * @type {?boolean}\n     * @private\n     */\n    this.isPinchZoomEnabled_ = null;\n  }\n\n  /**\n   * Start a gesture: update the workspace to indicate that a gesture is in\n   * progress and bind mousemove and mouseup handlers.\n   * @param {!Event} e A mouse down, touch start or pointer down event.\n   * @package\n   */\n  doStart(e) {\n    this.isPinchZoomEnabled_ = this.startWorkspace_.options.zoomOptions &&\n        this.startWorkspace_.options.zoomOptions.pinch;\n    super.doStart(e);\n    if (!this.isEnding_ && Touch.isTouchEvent(e)) {\n      this.handleTouchStart(e);\n    }\n  }\n\n  /**\n   * Bind gesture events.\n   * Overriding the gesture definition of this function, binding the same\n   * functions for onMoveWrapper_ and onUpWrapper_ but passing\n   * opt_noCaptureIdentifier.\n   * In addition, binding a second mouse down event to detect multi-touch\n   * events.\n   * @param {!Event} e A mouse down or touch start event.\n   * @package\n   */\n  bindMouseEvents(e) {\n    this.onStartWrapper_ = browserEvents.conditionalBind(\n        document, 'mousedown', null, this.handleStart.bind(this),\n        /* opt_noCaptureIdentifier */ true);\n    this.onMoveWrapper_ = browserEvents.conditionalBind(\n        document, 'mousemove', null, this.handleMove.bind(this),\n        /* opt_noCaptureIdentifier */ true);\n    this.onUpWrapper_ = browserEvents.conditionalBind(\n        document, 'mouseup', null, this.handleUp.bind(this),\n        /* opt_noCaptureIdentifier */ true);\n\n    e.preventDefault();\n    e.stopPropagation();\n  }\n\n  /**\n   * Handle a mouse down, touch start, or pointer down event.\n   * @param {!Event} e A mouse down, touch start, or pointer down event.\n   * @package\n   */\n  handleStart(e) {\n    if (this.isDragging()) {\n      // A drag has already started, so this can no longer be a pinch-zoom.\n      return;\n    }\n    if (Touch.isTouchEvent(e)) {\n      this.handleTouchStart(e);\n\n      if (this.isMultiTouch()) {\n        Touch.longStop();\n      }\n    }\n  }\n\n  /**\n   * Handle a mouse move, touch move, or pointer move event.\n   * @param {!Event} e A mouse move, touch move, or pointer move event.\n   * @package\n   */\n  handleMove(e) {\n    if (this.isDragging()) {\n      // We are in the middle of a drag, only handle the relevant events\n      if (Touch.shouldHandleEvent(e)) {\n        super.handleMove(e);\n      }\n      return;\n    }\n    if (this.isMultiTouch()) {\n      if (Touch.isTouchEvent(e)) {\n        this.handleTouchMove(e);\n      }\n      Touch.longStop();\n    } else {\n      super.handleMove(e);\n    }\n  }\n\n  /**\n   * Handle a mouse up, touch end, or pointer up event.\n   * @param {!Event} e A mouse up, touch end, or pointer up event.\n   * @package\n   */\n  handleUp(e) {\n    if (Touch.isTouchEvent(e) && !this.isDragging()) {\n      this.handleTouchEnd(e);\n    }\n    if (!this.isMultiTouch() || this.isDragging()) {\n      if (!Touch.shouldHandleEvent(e)) {\n        return;\n      }\n      super.handleUp(e);\n    } else {\n      e.preventDefault();\n      e.stopPropagation();\n\n      this.dispose();\n    }\n  }\n\n  /**\n   * Whether this gesture is part of a multi-touch gesture.\n   * @return {boolean} Whether this gesture is part of a multi-touch gesture.\n   * @package\n   */\n  isMultiTouch() {\n    return this.isMultiTouch_;\n  }\n\n  /**\n   * Sever all links from this object.\n   * @package\n   */\n  dispose() {\n    super.dispose();\n\n    if (this.onStartWrapper_) {\n      browserEvents.unbind(this.onStartWrapper_);\n    }\n  }\n\n  /**\n   * Handle a touch start or pointer down event and keep track of current\n   * pointers.\n   * @param {!Event} e A touch start, or pointer down event.\n   * @package\n   */\n  handleTouchStart(e) {\n    const pointerId = Touch.getTouchIdentifierFromEvent(e);\n    // store the pointerId in the current list of pointers\n    this.cachedPoints_[pointerId] = this.getTouchPoint(e);\n    const pointers = Object.keys(this.cachedPoints_);\n    // If two pointers are down, store info\n    if (pointers.length === 2) {\n      const point0 =\n          /** @type {!Coordinate} */ (this.cachedPoints_[pointers[0]]);\n      const point1 =\n          /** @type {!Coordinate} */ (this.cachedPoints_[pointers[1]]);\n      this.startDistance_ = Coordinate.distance(point0, point1);\n      this.isMultiTouch_ = true;\n      e.preventDefault();\n    }\n  }\n\n  /**\n   * Handle a touch move or pointer move event and zoom in/out if two pointers\n   * are on the screen.\n   * @param {!Event} e A touch move, or pointer move event.\n   * @package\n   */\n  handleTouchMove(e) {\n    const pointerId = Touch.getTouchIdentifierFromEvent(e);\n    // Update the cache\n    this.cachedPoints_[pointerId] = this.getTouchPoint(e);\n\n    const pointers = Object.keys(this.cachedPoints_);\n    if (this.isPinchZoomEnabled_ && pointers.length === 2) {\n      this.handlePinch_(e);\n    } else {\n      super.handleMove(e);\n    }\n  }\n\n  /**\n   * Handle pinch zoom gesture.\n   * @param {!Event} e A touch move, or pointer move event.\n   * @private\n   */\n  handlePinch_(e) {\n    const pointers = Object.keys(this.cachedPoints_);\n    // Calculate the distance between the two pointers\n    const point0 = /** @type {!Coordinate} */ (this.cachedPoints_[pointers[0]]);\n    const point1 = /** @type {!Coordinate} */ (this.cachedPoints_[pointers[1]]);\n    const moveDistance = Coordinate.distance(point0, point1);\n    const scale = moveDistance / this.startDistance_;\n\n    if (this.previousScale_ > 0 && this.previousScale_ < Infinity) {\n      const gestureScale = scale - this.previousScale_;\n      const delta = gestureScale > 0 ? gestureScale * ZOOM_IN_MULTIPLIER :\n                                       gestureScale * ZOOM_OUT_MULTIPLIER;\n      const workspace = this.startWorkspace_;\n      const position = browserEvents.mouseToSvg(\n          e, workspace.getParentSvg(), workspace.getInverseScreenCTM());\n      workspace.zoom(position.x, position.y, delta);\n    }\n    this.previousScale_ = scale;\n    e.preventDefault();\n  }\n\n  /**\n   * Handle a touch end or pointer end event and end the gesture.\n   * @param {!Event} e A touch end, or pointer end event.\n   * @package\n   */\n  handleTouchEnd(e) {\n    const pointerId = Touch.getTouchIdentifierFromEvent(e);\n    if (this.cachedPoints_[pointerId]) {\n      delete this.cachedPoints_[pointerId];\n    }\n    if (Object.keys(this.cachedPoints_).length < 2) {\n      this.cachedPoints_ = Object.create(null);\n      this.previousScale_ = 0;\n    }\n  }\n\n  /**\n   * Helper function returning the current touch point coordinate.\n   * @param {!Event} e A touch or pointer event.\n   * @return {?Coordinate} The current touch point coordinate\n   * @package\n   */\n  getTouchPoint(e) {\n    if (!this.startWorkspace_) {\n      return null;\n    }\n    return new Coordinate(\n        (e.changedTouches ? e.changedTouches[0].pageX : e.pageX),\n        (e.changedTouches ? e.changedTouches[0].pageY : e.pageY));\n  }\n}\n\nexports.TouchGesture = TouchGesture;\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Object in charge of loading, storing, and playing audio for a\n *     workspace.\n */\n'use strict';\n\n/**\n * Object in charge of loading, storing, and playing audio for a\n *     workspace.\n * @class\n */\ngoog.module('Blockly.WorkspaceAudio');\n\nconst userAgent = goog.require('Blockly.utils.userAgent');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceSvg} = goog.requireType('Blockly.WorkspaceSvg');\nconst {globalThis} = goog.require('Blockly.utils.global');\n\n\n/**\n * Prevent a sound from playing if another sound preceded it within this many\n * milliseconds.\n * @const\n */\nconst SOUND_LIMIT = 100;\n\n/**\n * Class for loading, storing, and playing audio for a workspace.\n * @alias Blockly.WorkspaceAudio\n */\nclass WorkspaceAudio {\n  /**\n   * @param {WorkspaceSvg} parentWorkspace The parent of the workspace\n   *     this audio object belongs to, or null.\n   */\n  constructor(parentWorkspace) {\n    /**\n     * The parent of the workspace this object belongs to, or null.  May be\n     * checked for sounds that this object can't find.\n     * @type {WorkspaceSvg}\n     * @private\n     */\n    this.parentWorkspace_ = parentWorkspace;\n\n    /**\n     * Database of pre-loaded sounds.\n     * @private\n     */\n    this.SOUNDS_ = Object.create(null);\n\n    /**\n     * Time that the last sound was played.\n     * @type {Date}\n     * @private\n     */\n    this.lastSound_ = null;\n  }\n\n  /**\n   * Dispose of this audio manager.\n   * @package\n   */\n  dispose() {\n    this.parentWorkspace_ = null;\n    this.SOUNDS_ = null;\n  }\n  /**\n   * Load an audio file.  Cache it, ready for instantaneous playing.\n   * @param {!Array<string>} filenames List of file types in decreasing order of\n   *   preference (i.e. increasing size).  E.g. ['media/go.mp3', 'media/go.wav']\n   *   Filenames include path from Blockly's root.  File extensions matter.\n   * @param {string} name Name of sound.\n   */\n  load(filenames, name) {\n    if (!filenames.length) {\n      return;\n    }\n    let audioTest;\n    try {\n      audioTest = new globalThis['Audio']();\n    } catch (e) {\n      // No browser support for Audio.\n      // IE can throw an error even if the Audio object exists.\n      return;\n    }\n    let sound;\n    for (let i = 0; i < filenames.length; i++) {\n      const filename = filenames[i];\n      const ext = filename.match(/\\.(\\w+)$/);\n      if (ext && audioTest.canPlayType('audio/' + ext[1])) {\n        // Found an audio format we can play.\n        sound = new globalThis['Audio'](filename);\n        break;\n      }\n    }\n    if (sound && sound.play) {\n      this.SOUNDS_[name] = sound;\n    }\n  }\n  /**\n   * Preload all the audio files so that they play quickly when asked for.\n   * @package\n   */\n  preload() {\n    for (const name in this.SOUNDS_) {\n      const sound = this.SOUNDS_[name];\n      sound.volume = 0.01;\n      const playPromise = sound.play();\n      // Edge does not return a promise, so we need to check.\n      if (playPromise !== undefined) {\n        // If we don't wait for the play request to complete before calling\n        // pause() we will get an exception: (DOMException: The play() request\n        // was interrupted) See more:\n        // https://developers.google.com/web/updates/2017/06/play-request-was-interrupted\n        playPromise.then(sound.pause).catch(function() {\n          // Play without user interaction was prevented.\n        });\n      } else {\n        sound.pause();\n      }\n\n      // iOS can only process one sound at a time.  Trying to load more than one\n      // corrupts the earlier ones.  Just load one and leave the others\n      // uncached.\n      if (userAgent.IPAD || userAgent.IPHONE) {\n        break;\n      }\n    }\n  }\n  /**\n   * Play a named sound at specified volume.  If volume is not specified,\n   * use full volume (1).\n   * @param {string} name Name of sound.\n   * @param {number=} opt_volume Volume of sound (0-1).\n   */\n  play(name, opt_volume) {\n    const sound = this.SOUNDS_[name];\n    if (sound) {\n      // Don't play one sound on top of another.\n      const now = new Date;\n      if (this.lastSound_ !== null && now - this.lastSound_ < SOUND_LIMIT) {\n        return;\n      }\n      this.lastSound_ = now;\n      let mySound;\n      if (userAgent.IPAD || userAgent.ANDROID) {\n        // Creating a new audio node causes lag in Android and iPad.  Android\n        // refetches the file from the server, iPad uses a singleton audio\n        // node which must be deleted and recreated for each new audio tag.\n        mySound = sound;\n      } else {\n        mySound = sound.cloneNode();\n      }\n      mySound.volume = (opt_volume === undefined ? 1 : opt_volume);\n      mySound.play();\n    } else if (this.parentWorkspace_) {\n      // Maybe a workspace on a lower level knows about this sound.\n      this.parentWorkspace_.getAudioManager().play(name, opt_volume);\n    }\n  }\n}\n\nexports.WorkspaceAudio = WorkspaceAudio;\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Events fired as a result of a theme update.\n */\n'use strict';\n\n/**\n * Events fired as a result of a theme update.\n * @class\n */\ngoog.module('Blockly.Events.ThemeChange');\n\nconst eventUtils = goog.require('Blockly.Events.utils');\nconst registry = goog.require('Blockly.registry');\nconst {UiBase} = goog.require('Blockly.Events.UiBase');\n\n\n/**\n * Class for a theme change event.\n * @extends {UiBase}\n * @alias Blockly.Events.ThemeChange\n */\nclass ThemeChange extends UiBase {\n  /**\n   * @param {string=} opt_themeName The theme name. Undefined for a blank event.\n   * @param {string=} opt_workspaceId The workspace identifier for this event.\n   *    event. Undefined for a blank event.\n   */\n  constructor(opt_themeName, opt_workspaceId) {\n    super(opt_workspaceId);\n\n    /**\n     * The theme name.\n     * @type {string|undefined}\n     */\n    this.themeName = opt_themeName;\n\n    /**\n     * Type of this event.\n     * @type {string}\n     */\n    this.type = eventUtils.THEME_CHANGE;\n  }\n\n  /**\n   * Encode the event as JSON.\n   * @return {!Object} JSON representation.\n   */\n  toJson() {\n    const json = super.toJson();\n    json['themeName'] = this.themeName;\n    return json;\n  }\n\n  /**\n   * Decode the JSON event.\n   * @param {!Object} json JSON representation.\n   */\n  fromJson(json) {\n    super.fromJson(json);\n    this.themeName = json['themeName'];\n  }\n}\n\nregistry.register(registry.Type.EVENT, eventUtils.THEME_CHANGE, ThemeChange);\n\nexports.ThemeChange = ThemeChange;\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Events fired as a result of a viewport change.\n */\n'use strict';\n\n/**\n * Events fired as a result of a viewport change.\n * @class\n */\ngoog.module('Blockly.Events.ViewportChange');\n\nconst eventUtils = goog.require('Blockly.Events.utils');\nconst registry = goog.require('Blockly.registry');\nconst {UiBase} = goog.require('Blockly.Events.UiBase');\n\n\n/**\n * Class for a viewport change event.\n * @extends {UiBase}\n * @alias Blockly.Events.ViewportChange\n */\nclass ViewportChange extends UiBase {\n  /**\n   * @param {number=} opt_top Top-edge of the visible portion of the workspace,\n   *    relative to the workspace origin. Undefined for a blank event.\n   * @param {number=} opt_left Left-edge of the visible portion of the\n   *     workspace relative to the workspace origin. Undefined for a blank\n   *     event.\n   * @param {number=} opt_scale The scale of the workspace. Undefined for a\n   *     blank event.\n   * @param {string=} opt_workspaceId The workspace identifier for this event.\n   *    Undefined for a blank event.\n   * @param {number=} opt_oldScale The old scale of the workspace. Undefined for\n   *     a blank event.\n   */\n  constructor(opt_top, opt_left, opt_scale, opt_workspaceId, opt_oldScale) {\n    super(opt_workspaceId);\n\n    /**\n     * Top-edge of the visible portion of the workspace, relative to the\n     * workspace origin.\n     * @type {number|undefined}\n     */\n    this.viewTop = opt_top;\n\n    /**\n     * Left-edge of the visible portion of the workspace, relative to the\n     * workspace origin.\n     * @type {number|undefined}\n     */\n    this.viewLeft = opt_left;\n\n    /**\n     * The scale of the workspace.\n     * @type {number|undefined}\n     */\n    this.scale = opt_scale;\n\n    /**\n     * The old scale of the workspace.\n     * @type {number|undefined}\n     */\n    this.oldScale = opt_oldScale;\n\n    /**\n     * Type of this event.\n     * @type {string}\n     */\n    this.type = eventUtils.VIEWPORT_CHANGE;\n  }\n\n  /**\n   * Encode the event as JSON.\n   * @return {!Object} JSON representation.\n   */\n  toJson() {\n    const json = super.toJson();\n    json['viewTop'] = this.viewTop;\n    json['viewLeft'] = this.viewLeft;\n    json['scale'] = this.scale;\n    json['oldScale'] = this.oldScale;\n    return json;\n  }\n\n  /**\n   * Decode the JSON event.\n   * @param {!Object} json JSON representation.\n   */\n  fromJson(json) {\n    super.fromJson(json);\n    this.viewTop = json['viewTop'];\n    this.viewLeft = json['viewLeft'];\n    this.scale = json['scale'];\n    this.oldScale = json['oldScale'];\n  }\n}\n\nregistry.register(\n    registry.Type.EVENT, eventUtils.VIEWPORT_CHANGE, ViewportChange);\n\nexports.ViewportChange = ViewportChange;\n","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The interface for a metrics manager.\n */\n\n'use strict';\n\n/**\n * The interface for a metrics manager.\n * @namespace Blockly.IMetricsManager\n */\ngoog.module('Blockly.IMetricsManager');\n\n/* eslint-disable-next-line no-unused-vars */\nconst {MetricsManager} = goog.requireType('Blockly.MetricsManager');\n/* eslint-disable-next-line no-unused-vars */\nconst {Metrics} = goog.requireType('Blockly.utils.Metrics');\n/* eslint-disable-next-line no-unused-vars */\nconst {Size} = goog.requireType('Blockly.utils.Size');\n\n\n/**\n * Interface for a metrics manager.\n * @interface\n * @alias Blockly.IMetricsManager\n */\nconst IMetricsManager = function() {};\n\n/**\n * Returns whether the scroll area has fixed edges.\n * @return {boolean} Whether the scroll area has fixed edges.\n * @package\n */\nIMetricsManager.prototype.hasFixedEdges;\n\n/**\n * Returns the metrics for the scroll area of the workspace.\n * @param {boolean=} opt_getWorkspaceCoordinates True to get the scroll metrics\n *     in workspace coordinates, false to get them in pixel coordinates.\n * @param {!MetricsManager.ContainerRegion=} opt_viewMetrics The view\n *     metrics if they have been previously computed. Passing in null may cause\n *     the view metrics to be computed again, if it is needed.\n * @param {!MetricsManager.ContainerRegion=} opt_contentMetrics The\n *     content metrics if they have been previously computed. Passing in null\n *     may cause the content metrics to be computed again, if it is needed.\n * @return {!MetricsManager.ContainerRegion} The metrics for the scroll\n *    container\n */\nIMetricsManager.prototype.getScrollMetrics;\n\n/**\n * Gets the width and the height of the flyout on the workspace in pixel\n * coordinates. Returns 0 for the width and height if the workspace has a\n * category toolbox instead of a simple toolbox.\n * @param {boolean=} opt_own Whether to only return the workspace's own flyout.\n * @return {!MetricsManager.ToolboxMetrics} The width and height of the\n *     flyout.\n * @public\n */\nIMetricsManager.prototype.getFlyoutMetrics;\n\n/**\n * Gets the width, height and position of the toolbox on the workspace in pixel\n * coordinates. Returns 0 for the width and height if the workspace has a simple\n * toolbox instead of a category toolbox. To get the width and height of a\n * simple toolbox @see {@link getFlyoutMetrics}.\n * @return {!MetricsManager.ToolboxMetrics} The object with the width,\n *     height and position of the toolbox.\n * @public\n */\nIMetricsManager.prototype.getToolboxMetrics;\n\n/**\n * Gets the width and height of the workspace's parent SVG element in pixel\n * coordinates. This area includes the toolbox and the visible workspace area.\n * @return {!Size} The width and height of the workspace's parent\n *     SVG element.\n * @public\n */\nIMetricsManager.prototype.getSvgMetrics;\n\n/**\n * Gets the absolute left and absolute top in pixel coordinates.\n * This is where the visible workspace starts in relation to the SVG container.\n * @return {!MetricsManager.AbsoluteMetrics} The absolute metrics for\n *     the workspace.\n * @public\n */\nIMetricsManager.prototype.getAbsoluteMetrics;\n\n/**\n * Gets the metrics for the visible workspace in either pixel or workspace\n * coordinates. The visible workspace does not include the toolbox or flyout.\n * @param {boolean=} opt_getWorkspaceCoordinates True to get the view metrics in\n *     workspace coordinates, false to get them in pixel coordinates.\n * @return {!MetricsManager.ContainerRegion} The width, height, top and\n *     left of the viewport in either workspace coordinates or pixel\n *     coordinates.\n * @public\n */\nIMetricsManager.prototype.getViewMetrics;\n\n/**\n * Gets content metrics in either pixel or workspace coordinates.\n * The content area is a rectangle around all the top bounded elements on the\n * workspace (workspace comments and blocks).\n * @param {boolean=} opt_getWorkspaceCoordinates True to get the content metrics\n *     in workspace coordinates, false to get them in pixel coordinates.\n * @return {!MetricsManager.ContainerRegion} The\n *     metrics for the content container.\n * @public\n */\nIMetricsManager.prototype.getContentMetrics;\n\n/**\n * Returns an object with all the metrics required to size scrollbars for a\n * top level workspace.  The following properties are computed:\n * Coordinate system: pixel coordinates, -left, -up, +right, +down\n * .viewHeight: Height of the visible portion of the workspace.\n * .viewWidth: Width of the visible portion of the workspace.\n * .contentHeight: Height of the content.\n * .contentWidth: Width of the content.\n * .svgHeight: Height of the Blockly div (the view + the toolbox,\n *    simple or otherwise),\n * .svgWidth: Width of the Blockly div (the view + the toolbox,\n *    simple or otherwise),\n * .viewTop: Top-edge of the visible portion of the workspace, relative to\n *     the workspace origin.\n * .viewLeft: Left-edge of the visible portion of the workspace, relative to\n *     the workspace origin.\n * .contentTop: Top-edge of the content, relative to the workspace origin.\n * .contentLeft: Left-edge of the content relative to the workspace origin.\n * .absoluteTop: Top-edge of the visible portion of the workspace, relative\n *     to the blocklyDiv.\n * .absoluteLeft: Left-edge of the visible portion of the workspace, relative\n *     to the blocklyDiv.\n * .toolboxWidth: Width of the toolbox, if it exists.  Otherwise zero.\n * .toolboxHeight: Height of the toolbox, if it exists.  Otherwise zero.\n * .flyoutWidth: Width of the flyout if it is always open.  Otherwise zero.\n * .flyoutHeight: Height of the flyout if it is always open.  Otherwise zero.\n * .toolboxPosition: Top, bottom, left or right. Use TOOLBOX_AT constants to\n *     compare.\n * @return {!Metrics} Contains size and position metrics of a top\n *     level workspace.\n * @public\n */\nIMetricsManager.prototype.getMetrics;\n\nexports.IMetricsManager = IMetricsManager;\n","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Calculates and reports workspace metrics.\n */\n'use strict';\n\n/**\n * Calculates and reports workspace metrics.\n * @class\n */\ngoog.module('Blockly.MetricsManager');\n\nconst registry = goog.require('Blockly.registry');\nconst toolboxUtils = goog.require('Blockly.utils.toolbox');\n/* eslint-disable-next-line no-unused-vars */\nconst {IFlyout} = goog.requireType('Blockly.IFlyout');\n/* eslint-disable-next-line no-unused-vars */\nconst {IMetricsManager} = goog.require('Blockly.IMetricsManager');\n/* eslint-disable-next-line no-unused-vars */\nconst {IToolbox} = goog.requireType('Blockly.IToolbox');\n/* eslint-disable-next-line no-unused-vars */\nconst {Metrics} = goog.requireType('Blockly.utils.Metrics');\nconst {Size} = goog.require('Blockly.utils.Size');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceSvg} = goog.requireType('Blockly.WorkspaceSvg');\n\n\n/**\n * The manager for all workspace metrics calculations.\n * @implements {IMetricsManager}\n * @alias Blockly.MetricsManager\n */\nclass MetricsManager {\n  /**\n   * @param {!WorkspaceSvg} workspace The workspace to calculate metrics\n   *     for.\n   */\n  constructor(workspace) {\n    /**\n     * The workspace to calculate metrics for.\n     * @type {!WorkspaceSvg}\n     * @protected\n     */\n    this.workspace_ = workspace;\n  }\n\n  /**\n   * Gets the dimensions of the given workspace component, in pixel coordinates.\n   * @param {?IToolbox|?IFlyout} elem The element to get the\n   *     dimensions of, or null.  It should be a toolbox or flyout, and should\n   *     implement getWidth() and getHeight().\n   * @return {!Size} An object containing width and height\n   *     attributes, which will both be zero if elem did not exist.\n   * @protected\n   */\n  getDimensionsPx_(elem) {\n    let width = 0;\n    let height = 0;\n    if (elem) {\n      width = elem.getWidth();\n      height = elem.getHeight();\n    }\n    return new Size(width, height);\n  }\n\n  /**\n   * Gets the width and the height of the flyout on the workspace in pixel\n   * coordinates. Returns 0 for the width and height if the workspace has a\n   * category toolbox instead of a simple toolbox.\n   * @param {boolean=} opt_own Whether to only return the workspace's own\n   *     flyout.\n   * @return {!MetricsManager.ToolboxMetrics} The width and height of the\n   *     flyout.\n   * @public\n   */\n  getFlyoutMetrics(opt_own) {\n    const flyoutDimensions =\n        this.getDimensionsPx_(this.workspace_.getFlyout(opt_own));\n    return {\n      width: flyoutDimensions.width,\n      height: flyoutDimensions.height,\n      position: this.workspace_.toolboxPosition,\n    };\n  }\n\n  /**\n   * Gets the width, height and position of the toolbox on the workspace in\n   * pixel coordinates. Returns 0 for the width and height if the workspace has\n   * a simple toolbox instead of a category toolbox. To get the width and height\n   * of a\n   * simple toolbox @see {@link getFlyoutMetrics}.\n   * @return {!MetricsManager.ToolboxMetrics} The object with the width,\n   *     height and position of the toolbox.\n   * @public\n   */\n  getToolboxMetrics() {\n    const toolboxDimensions =\n        this.getDimensionsPx_(this.workspace_.getToolbox());\n\n    return {\n      width: toolboxDimensions.width,\n      height: toolboxDimensions.height,\n      position: this.workspace_.toolboxPosition,\n    };\n  }\n\n  /**\n   * Gets the width and height of the workspace's parent SVG element in pixel\n   * coordinates. This area includes the toolbox and the visible workspace area.\n   * @return {!Size} The width and height of the workspace's parent\n   *     SVG element.\n   * @public\n   */\n  getSvgMetrics() {\n    return this.workspace_.getCachedParentSvgSize();\n  }\n\n  /**\n   * Gets the absolute left and absolute top in pixel coordinates.\n   * This is where the visible workspace starts in relation to the SVG\n   * container.\n   * @return {!MetricsManager.AbsoluteMetrics} The absolute metrics for\n   *     the workspace.\n   * @public\n   */\n  getAbsoluteMetrics() {\n    let absoluteLeft = 0;\n    const toolboxMetrics = this.getToolboxMetrics();\n    const flyoutMetrics = this.getFlyoutMetrics(true);\n    const doesToolboxExist = !!this.workspace_.getToolbox();\n    const doesFlyoutExist = !!this.workspace_.getFlyout(true);\n    const toolboxPosition =\n        doesToolboxExist ? toolboxMetrics.position : flyoutMetrics.position;\n\n    const atLeft = toolboxPosition === toolboxUtils.Position.LEFT;\n    const atTop = toolboxPosition === toolboxUtils.Position.TOP;\n    if (doesToolboxExist && atLeft) {\n      absoluteLeft = toolboxMetrics.width;\n    } else if (doesFlyoutExist && atLeft) {\n      absoluteLeft = flyoutMetrics.width;\n    }\n    let absoluteTop = 0;\n    if (doesToolboxExist && atTop) {\n      absoluteTop = toolboxMetrics.height;\n    } else if (doesFlyoutExist && atTop) {\n      absoluteTop = flyoutMetrics.height;\n    }\n\n    return {\n      top: absoluteTop,\n      left: absoluteLeft,\n    };\n  }\n\n  /**\n   * Gets the metrics for the visible workspace in either pixel or workspace\n   * coordinates. The visible workspace does not include the toolbox or flyout.\n   * @param {boolean=} opt_getWorkspaceCoordinates True to get the view metrics\n   *     in workspace coordinates, false to get them in pixel coordinates.\n   * @return {!MetricsManager.ContainerRegion} The width, height, top and\n   *     left of the viewport in either workspace coordinates or pixel\n   *     coordinates.\n   * @public\n   */\n  getViewMetrics(opt_getWorkspaceCoordinates) {\n    const scale = opt_getWorkspaceCoordinates ? this.workspace_.scale : 1;\n    const svgMetrics = this.getSvgMetrics();\n    const toolboxMetrics = this.getToolboxMetrics();\n    const flyoutMetrics = this.getFlyoutMetrics(true);\n    const doesToolboxExist = !!this.workspace_.getToolbox();\n    const toolboxPosition =\n        doesToolboxExist ? toolboxMetrics.position : flyoutMetrics.position;\n\n    if (this.workspace_.getToolbox()) {\n      if (toolboxPosition === toolboxUtils.Position.TOP ||\n          toolboxPosition === toolboxUtils.Position.BOTTOM) {\n        svgMetrics.height -= toolboxMetrics.height;\n      } else if (\n          toolboxPosition === toolboxUtils.Position.LEFT ||\n          toolboxPosition === toolboxUtils.Position.RIGHT) {\n        svgMetrics.width -= toolboxMetrics.width;\n      }\n    } else if (this.workspace_.getFlyout(true)) {\n      if (toolboxPosition === toolboxUtils.Position.TOP ||\n          toolboxPosition === toolboxUtils.Position.BOTTOM) {\n        svgMetrics.height -= flyoutMetrics.height;\n      } else if (\n          toolboxPosition === toolboxUtils.Position.LEFT ||\n          toolboxPosition === toolboxUtils.Position.RIGHT) {\n        svgMetrics.width -= flyoutMetrics.width;\n      }\n    }\n    return {\n      height: svgMetrics.height / scale,\n      width: svgMetrics.width / scale,\n      top: -this.workspace_.scrollY / scale,\n      left: -this.workspace_.scrollX / scale,\n    };\n  }\n\n  /**\n   * Gets content metrics in either pixel or workspace coordinates.\n   * The content area is a rectangle around all the top bounded elements on the\n   * workspace (workspace comments and blocks).\n   * @param {boolean=} opt_getWorkspaceCoordinates True to get the content\n   *     metrics in workspace coordinates, false to get them in pixel\n   *     coordinates.\n   * @return {!MetricsManager.ContainerRegion} The\n   *     metrics for the content container.\n   * @public\n   */\n  getContentMetrics(opt_getWorkspaceCoordinates) {\n    const scale = opt_getWorkspaceCoordinates ? 1 : this.workspace_.scale;\n\n    // Block bounding box is in workspace coordinates.\n    const blockBox = this.workspace_.getBlocksBoundingBox();\n\n    return {\n      height: (blockBox.bottom - blockBox.top) * scale,\n      width: (blockBox.right - blockBox.left) * scale,\n      top: blockBox.top * scale,\n      left: blockBox.left * scale,\n    };\n  }\n\n  /**\n   * Returns whether the scroll area has fixed edges.\n   * @return {boolean} Whether the scroll area has fixed edges.\n   * @package\n   */\n  hasFixedEdges() {\n    // This exists for optimization of bump logic.\n    return !this.workspace_.isMovableHorizontally() ||\n        !this.workspace_.isMovableVertically();\n  }\n\n  /**\n   * Computes the fixed edges of the scroll area.\n   * @param {!MetricsManager.ContainerRegion=} opt_viewMetrics The view\n   *     metrics if they have been previously computed. Passing in null may\n   * cause the view metrics to be computed again, if it is needed.\n   * @return {!MetricsManager.FixedEdges} The fixed edges of the scroll\n   *     area.\n   * @protected\n   */\n  getComputedFixedEdges_(opt_viewMetrics) {\n    if (!this.hasFixedEdges()) {\n      // Return early if there are no edges.\n      return {};\n    }\n\n    const hScrollEnabled = this.workspace_.isMovableHorizontally();\n    const vScrollEnabled = this.workspace_.isMovableVertically();\n\n    const viewMetrics = opt_viewMetrics || this.getViewMetrics(false);\n\n    const edges = {};\n    if (!vScrollEnabled) {\n      edges.top = viewMetrics.top;\n      edges.bottom = viewMetrics.top + viewMetrics.height;\n    }\n    if (!hScrollEnabled) {\n      edges.left = viewMetrics.left;\n      edges.right = viewMetrics.left + viewMetrics.width;\n    }\n    return edges;\n  }\n\n  /**\n   * Returns the content area with added padding.\n   * @param {!MetricsManager.ContainerRegion} viewMetrics The view\n   *     metrics.\n   * @param {!MetricsManager.ContainerRegion} contentMetrics The content\n   *     metrics.\n   * @return {{top: number, bottom: number, left: number, right: number}} The\n   *     padded content area.\n   * @protected\n   */\n  getPaddedContent_(viewMetrics, contentMetrics) {\n    const contentBottom = contentMetrics.top + contentMetrics.height;\n    const contentRight = contentMetrics.left + contentMetrics.width;\n\n    const viewWidth = viewMetrics.width;\n    const viewHeight = viewMetrics.height;\n    const halfWidth = viewWidth / 2;\n    const halfHeight = viewHeight / 2;\n\n    // Add a padding around the content that is at least half a screen wide.\n    // Ensure padding is wide enough that blocks can scroll over entire screen.\n    const top =\n        Math.min(contentMetrics.top - halfHeight, contentBottom - viewHeight);\n    const left =\n        Math.min(contentMetrics.left - halfWidth, contentRight - viewWidth);\n    const bottom =\n        Math.max(contentBottom + halfHeight, contentMetrics.top + viewHeight);\n    const right =\n        Math.max(contentRight + halfWidth, contentMetrics.left + viewWidth);\n\n    return {top: top, bottom: bottom, left: left, right: right};\n  }\n\n  /**\n   * Returns the metrics for the scroll area of the workspace.\n   * @param {boolean=} opt_getWorkspaceCoordinates True to get the scroll\n   *     metrics in workspace coordinates, false to get them in pixel\n   *     coordinates.\n   * @param {!MetricsManager.ContainerRegion=} opt_viewMetrics The view\n   *     metrics if they have been previously computed. Passing in null may\n   * cause the view metrics to be computed again, if it is needed.\n   * @param {!MetricsManager.ContainerRegion=} opt_contentMetrics The\n   *     content metrics if they have been previously computed. Passing in null\n   *     may cause the content metrics to be computed again, if it is needed.\n   * @return {!MetricsManager.ContainerRegion} The metrics for the scroll\n   *    container.\n   */\n  getScrollMetrics(\n      opt_getWorkspaceCoordinates, opt_viewMetrics, opt_contentMetrics) {\n    const scale = opt_getWorkspaceCoordinates ? this.workspace_.scale : 1;\n    const viewMetrics = opt_viewMetrics || this.getViewMetrics(false);\n    const contentMetrics = opt_contentMetrics || this.getContentMetrics();\n    const fixedEdges = this.getComputedFixedEdges_(viewMetrics);\n\n    // Add padding around content.\n    const paddedContent = this.getPaddedContent_(viewMetrics, contentMetrics);\n\n    // Use combination of fixed bounds and padded content to make scroll area.\n    const top =\n        fixedEdges.top !== undefined ? fixedEdges.top : paddedContent.top;\n    const left =\n        fixedEdges.left !== undefined ? fixedEdges.left : paddedContent.left;\n    const bottom = fixedEdges.bottom !== undefined ? fixedEdges.bottom :\n                                                     paddedContent.bottom;\n    const right =\n        fixedEdges.right !== undefined ? fixedEdges.right : paddedContent.right;\n\n    return {\n      top: top / scale,\n      left: left / scale,\n      width: (right - left) / scale,\n      height: (bottom - top) / scale,\n    };\n  }\n\n  /**\n   * Returns common metrics used by UI elements.\n   * @return {!MetricsManager.UiMetrics} The UI metrics.\n   */\n  getUiMetrics() {\n    return {\n      viewMetrics: this.getViewMetrics(),\n      absoluteMetrics: this.getAbsoluteMetrics(),\n      toolboxMetrics: this.getToolboxMetrics(),\n    };\n  }\n\n  /**\n   * Returns an object with all the metrics required to size scrollbars for a\n   * top level workspace.  The following properties are computed:\n   * Coordinate system: pixel coordinates, -left, -up, +right, +down\n   * .viewHeight: Height of the visible portion of the workspace.\n   * .viewWidth: Width of the visible portion of the workspace.\n   * .contentHeight: Height of the content.\n   * .contentWidth: Width of the content.\n   * .scrollHeight: Height of the scroll area.\n   * .scrollWidth: Width of the scroll area.\n   * .svgHeight: Height of the Blockly div (the view + the toolbox,\n   *    simple or otherwise),\n   * .svgWidth: Width of the Blockly div (the view + the toolbox,\n   *    simple or otherwise),\n   * .viewTop: Top-edge of the visible portion of the workspace, relative to\n   *     the workspace origin.\n   * .viewLeft: Left-edge of the visible portion of the workspace, relative to\n   *     the workspace origin.\n   * .contentTop: Top-edge of the content, relative to the workspace origin.\n   * .contentLeft: Left-edge of the content relative to the workspace origin.\n   * .scrollTop: Top-edge of the scroll area, relative to the workspace origin.\n   * .scrollLeft: Left-edge of the scroll area relative to the workspace origin.\n   * .absoluteTop: Top-edge of the visible portion of the workspace, relative\n   *     to the blocklyDiv.\n   * .absoluteLeft: Left-edge of the visible portion of the workspace, relative\n   *     to the blocklyDiv.\n   * .toolboxWidth: Width of the toolbox, if it exists.  Otherwise zero.\n   * .toolboxHeight: Height of the toolbox, if it exists.  Otherwise zero.\n   * .flyoutWidth: Width of the flyout if it is always open.  Otherwise zero.\n   * .flyoutHeight: Height of the flyout if it is always open.  Otherwise zero.\n   * .toolboxPosition: Top, bottom, left or right. Use TOOLBOX_AT constants to\n   *     compare.\n   * @return {!Metrics} Contains size and position metrics of a top\n   *     level workspace.\n   * @public\n   */\n  getMetrics() {\n    const toolboxMetrics = this.getToolboxMetrics();\n    const flyoutMetrics = this.getFlyoutMetrics(true);\n    const svgMetrics = this.getSvgMetrics();\n    const absoluteMetrics = this.getAbsoluteMetrics();\n    const viewMetrics = this.getViewMetrics();\n    const contentMetrics = this.getContentMetrics();\n    const scrollMetrics =\n        this.getScrollMetrics(false, viewMetrics, contentMetrics);\n\n    return {\n      contentHeight: contentMetrics.height,\n      contentWidth: contentMetrics.width,\n      contentTop: contentMetrics.top,\n      contentLeft: contentMetrics.left,\n\n      scrollHeight: scrollMetrics.height,\n      scrollWidth: scrollMetrics.width,\n      scrollTop: scrollMetrics.top,\n      scrollLeft: scrollMetrics.left,\n\n      viewHeight: viewMetrics.height,\n      viewWidth: viewMetrics.width,\n      viewTop: viewMetrics.top,\n      viewLeft: viewMetrics.left,\n\n      absoluteTop: absoluteMetrics.top,\n      absoluteLeft: absoluteMetrics.left,\n\n      svgHeight: svgMetrics.height,\n      svgWidth: svgMetrics.width,\n\n      toolboxWidth: toolboxMetrics.width,\n      toolboxHeight: toolboxMetrics.height,\n      toolboxPosition: toolboxMetrics.position,\n\n      flyoutWidth: flyoutMetrics.width,\n      flyoutHeight: flyoutMetrics.height,\n    };\n  }\n}\n\n/**\n * Describes the width, height and location of the toolbox on the main\n * workspace.\n * @typedef {{\n *            width: number,\n *            height: number,\n *            position: !toolboxUtils.Position\n *          }}\n */\nMetricsManager.ToolboxMetrics;\n\n/**\n * Describes where the viewport starts in relation to the workspace SVG.\n * @typedef {{\n *            left: number,\n *            top: number\n *          }}\n */\nMetricsManager.AbsoluteMetrics;\n\n/**\n * All the measurements needed to describe the size and location of a\n * container.\n * @typedef {{\n *            height: number,\n *            width: number,\n *            top: number,\n *            left: number\n *          }}\n */\nMetricsManager.ContainerRegion;\n\n/**\n * Describes fixed edges of the workspace.\n * @typedef {{\n *            top: (number|undefined),\n *            bottom: (number|undefined),\n *            left: (number|undefined),\n *            right: (number|undefined)\n *          }}\n */\nMetricsManager.FixedEdges;\n\n/**\n * Common metrics used for UI elements.\n * @typedef {{\n *            viewMetrics: !MetricsManager.ContainerRegion,\n *            absoluteMetrics: !MetricsManager.AbsoluteMetrics,\n *            toolboxMetrics: !MetricsManager.ToolboxMetrics\n *          }}\n */\nMetricsManager.UiMetrics;\n\nregistry.register(\n    registry.Type.METRICS_MANAGER, registry.DEFAULT, MetricsManager);\n\nexports.MetricsManager = MetricsManager;\n","/**\n * @license\n * Copyright 2014 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Object representing a workspace rendered as SVG.\n */\n'use strict';\n\n/**\n * Object representing a workspace rendered as SVG.\n * @class\n */\ngoog.module('Blockly.WorkspaceSvg');\n\nconst ContextMenu = goog.require('Blockly.ContextMenu');\n/* eslint-disable-next-line no-unused-vars */\nconst Procedures = goog.requireType('Blockly.Procedures');\nconst Tooltip = goog.require('Blockly.Tooltip');\n/* eslint-disable-next-line no-unused-vars */\nconst Variables = goog.requireType('Blockly.Variables');\n/* eslint-disable-next-line no-unused-vars */\nconst VariablesDynamic = goog.requireType('Blockly.VariablesDynamic');\nconst WidgetDiv = goog.require('Blockly.WidgetDiv');\nconst Xml = goog.require('Blockly.Xml');\nconst arrayUtils = goog.require('Blockly.utils.array');\nconst blockRendering = goog.require('Blockly.blockRendering');\nconst blocks = goog.require('Blockly.serialization.blocks');\nconst browserEvents = goog.require('Blockly.browserEvents');\nconst common = goog.require('Blockly.common');\nconst dom = goog.require('Blockly.utils.dom');\nconst dropDownDiv = goog.require('Blockly.dropDownDiv');\nconst eventUtils = goog.require('Blockly.Events.utils');\nconst registry = goog.require('Blockly.registry');\nconst svgMath = goog.require('Blockly.utils.svgMath');\nconst toolbox = goog.require('Blockly.utils.toolbox');\nconst userAgent = goog.require('Blockly.utils.userAgent');\nconst utils = goog.require('Blockly.utils');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockDragSurfaceSvg} = goog.requireType('Blockly.BlockDragSurfaceSvg');\nconst {BlockSvg} = goog.require('Blockly.BlockSvg');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlocklyOptions} = goog.requireType('Blockly.BlocklyOptions');\n/* eslint-disable-next-line no-unused-vars */\nconst {Block} = goog.requireType('Blockly.Block');\nconst {Classic} = goog.require('Blockly.Themes.Classic');\nconst {ComponentManager} = goog.require('Blockly.ComponentManager');\nconst {config} = goog.require('Blockly.config');\nconst {ConnectionDB} = goog.require('Blockly.ConnectionDB');\nconst {ContextMenuRegistry} = goog.require('Blockly.ContextMenuRegistry');\nconst {Coordinate} = goog.require('Blockly.utils.Coordinate');\n/* eslint-disable-next-line no-unused-vars */\nconst {Cursor} = goog.requireType('Blockly.Cursor');\n/* eslint-disable-next-line no-unused-vars */\nconst {FlyoutButton} = goog.requireType('Blockly.FlyoutButton');\nconst {Gesture} = goog.require('Blockly.Gesture');\nconst {Grid} = goog.require('Blockly.Grid');\n/* eslint-disable-next-line no-unused-vars */\nconst {IASTNodeLocationSvg} = goog.require('Blockly.IASTNodeLocationSvg');\n/* eslint-disable-next-line no-unused-vars */\nconst {IBoundedElement} = goog.requireType('Blockly.IBoundedElement');\n/* eslint-disable-next-line no-unused-vars */\nconst {ICopyable} = goog.requireType('Blockly.ICopyable');\n/* eslint-disable-next-line no-unused-vars */\nconst {IDragTarget} = goog.requireType('Blockly.IDragTarget');\n/* eslint-disable-next-line no-unused-vars */\nconst {IFlyout} = goog.requireType('Blockly.IFlyout');\n/* eslint-disable-next-line no-unused-vars */\nconst {IMetricsManager} = goog.requireType('Blockly.IMetricsManager');\n/* eslint-disable-next-line no-unused-vars */\nconst {IToolbox} = goog.requireType('Blockly.IToolbox');\nconst {MarkerManager} = goog.require('Blockly.MarkerManager');\n/* eslint-disable-next-line no-unused-vars */\nconst {Marker} = goog.requireType('Blockly.Marker');\n/* eslint-disable-next-line no-unused-vars */\nconst {Metrics} = goog.requireType('Blockly.utils.Metrics');\nconst {Options} = goog.require('Blockly.Options');\nconst {Rect} = goog.require('Blockly.utils.Rect');\n/* eslint-disable-next-line no-unused-vars */\nconst {RenderedConnection} = goog.requireType('Blockly.RenderedConnection');\n/* eslint-disable-next-line no-unused-vars */\nconst {Renderer} = goog.requireType('Blockly.blockRendering.Renderer');\n/* eslint-disable-next-line no-unused-vars */\nconst {ScrollbarPair} = goog.requireType('Blockly.ScrollbarPair');\nconst {Size} = goog.require('Blockly.utils.Size');\nconst {Svg} = goog.require('Blockly.utils.Svg');\nconst {ThemeManager} = goog.require('Blockly.ThemeManager');\n/* eslint-disable-next-line no-unused-vars */\nconst {Theme} = goog.requireType('Blockly.Theme');\nconst {TouchGesture} = goog.require('Blockly.TouchGesture');\n/* eslint-disable-next-line no-unused-vars */\nconst {Trashcan} = goog.requireType('Blockly.Trashcan');\n/* eslint-disable-next-line no-unused-vars */\nconst {VariableModel} = goog.requireType('Blockly.VariableModel');\nconst {WorkspaceAudio} = goog.require('Blockly.WorkspaceAudio');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceCommentSvg} = goog.requireType('Blockly.WorkspaceCommentSvg');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceComment} = goog.requireType('Blockly.WorkspaceComment');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceDragSurfaceSvg} = goog.requireType('Blockly.WorkspaceDragSurfaceSvg');\nconst {Workspace} = goog.require('Blockly.Workspace');\n/* eslint-disable-next-line no-unused-vars */\nconst {ZoomControls} = goog.requireType('Blockly.ZoomControls');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.Events.BlockCreate');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.Events.ThemeChange');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.Events.ViewportChange');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.MetricsManager');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.Msg');\n\n\n/**\n * Class for a workspace.  This is an onscreen area with optional trashcan,\n * scrollbars, bubbles, and dragging.\n * @extends {Workspace}\n * @implements {IASTNodeLocationSvg}\n * @alias Blockly.WorkspaceSvg\n */\nclass WorkspaceSvg extends Workspace {\n  /**\n   * @param {!Options} options Dictionary of options.\n   * @param {BlockDragSurfaceSvg=} opt_blockDragSurface Drag surface for\n   *     blocks.\n   * @param {WorkspaceDragSurfaceSvg=} opt_wsDragSurface Drag surface for\n   *     the workspace.\n   */\n  constructor(options, opt_blockDragSurface, opt_wsDragSurface) {\n    super(options);\n\n    /**\n     * A wrapper function called when a resize event occurs.\n     * You can pass the result to `eventHandling.unbind`.\n     * @type {?browserEvents.Data}\n     * @private\n     */\n    this.resizeHandlerWrapper_ = null;\n\n    /**\n     * The render status of an SVG workspace.\n     * Returns `false` for headless workspaces and true for instances of\n     * `WorkspaceSvg`.\n     * @type {boolean}\n     */\n    this.rendered = true;\n\n    /**\n     * Whether the workspace is visible.  False if the workspace has been hidden\n     * by calling `setVisible(false)`.\n     * @type {boolean}\n     * @private\n     */\n    this.isVisible_ = true;\n\n    /**\n     * Whether this workspace has resizes enabled.\n     * Disable during batch operations for a performance improvement.\n     * @type {boolean}\n     * @private\n     */\n    this.resizesEnabled_ = true;\n\n    /**\n     * Current horizontal scrolling offset in pixel units, relative to the\n     * workspace origin.\n     *\n     * It is useful to think about a view, and a canvas moving beneath that\n     * view. As the canvas moves right, this value becomes more positive, and\n     * the view is now \"seeing\" the left side of the canvas. As the canvas moves\n     * left, this value becomes more negative, and the view is now \"seeing\" the\n     * right side of the canvas.\n     *\n     * The confusing thing about this value is that it does not, and must not\n     * include the absoluteLeft offset. This is because it is used to calculate\n     * the viewLeft value.\n     *\n     * The viewLeft is relative to the workspace origin (although in pixel\n     * units). The workspace origin is the top-left corner of the workspace (at\n     * least when it is enabled). It is shifted from the top-left of the\n     * blocklyDiv so as not to be beneath the toolbox.\n     *\n     * When the workspace is enabled the viewLeft and workspace origin are at\n     * the same X location. As the canvas slides towards the right beneath the\n     * view this value (scrollX) becomes more positive, and the viewLeft becomes\n     * more negative relative to the workspace origin (imagine the workspace\n     * origin as a dot on the canvas sliding to the right as the canvas moves).\n     *\n     * So if the scrollX were to include the absoluteLeft this would in a way\n     * \"unshift\" the workspace origin. This means that the viewLeft would be\n     * representing the left edge of the blocklyDiv, rather than the left edge\n     * of the workspace.\n     *\n     * @type {number}\n     */\n    this.scrollX = 0;\n\n    /**\n     * Current vertical scrolling offset in pixel units, relative to the\n     * workspace origin.\n     *\n     * It is useful to think about a view, and a canvas moving beneath that\n     * view. As the canvas moves down, this value becomes more positive, and the\n     * view is now \"seeing\" the upper part of the canvas. As the canvas moves\n     * up, this value becomes more negative, and the view is \"seeing\" the lower\n     * part of the canvas.\n     *\n     * This confusing thing about this value is that it does not, and must not\n     * include the absoluteTop offset. This is because it is used to calculate\n     * the viewTop value.\n     *\n     * The viewTop is relative to the workspace origin (although in pixel\n     * units). The workspace origin is the top-left corner of the workspace (at\n     * least when it is enabled). It is shifted from the top-left of the\n     * blocklyDiv so as not to be beneath the toolbox.\n     *\n     * When the workspace is enabled the viewTop and workspace origin are at the\n     * same Y location. As the canvas slides towards the bottom this value\n     * (scrollY) becomes more positive, and the viewTop becomes more negative\n     * relative to the workspace origin (image in the workspace origin as a dot\n     * on the canvas sliding downwards as the canvas moves).\n     *\n     * So if the scrollY were to include the absoluteTop this would in a way\n     * \"unshift\" the workspace origin. This means that the viewTop would be\n     * representing the top edge of the blocklyDiv, rather than the top edge of\n     * the workspace.\n     *\n     * @type {number}\n     */\n    this.scrollY = 0;\n\n    /**\n     * Horizontal scroll value when scrolling started in pixel units.\n     * @type {number}\n     */\n    this.startScrollX = 0;\n\n    /**\n     * Vertical scroll value when scrolling started in pixel units.\n     * @type {number}\n     */\n    this.startScrollY = 0;\n\n    /**\n     * Distance from mouse to object being dragged.\n     * @type {Coordinate}\n     * @private\n     */\n    this.dragDeltaXY_ = null;\n\n    /**\n     * Current scale.\n     * @type {number}\n     */\n    this.scale = 1;\n\n    /**\n     * Cached scale value. Used to detect changes in viewport.\n     * @type {number}\n     * @private\n     */\n    this.oldScale_ = 1;\n\n    /**\n     * Cached viewport top value. Used to detect changes in viewport.\n     * @type {number}\n     * @private\n     */\n    this.oldTop_ = 0;\n\n    /**\n     * Cached viewport left value. Used to detect changes in viewport.\n     * @type {number}\n     * @private\n     */\n    this.oldLeft_ = 0;\n\n    /**\n     * The workspace's trashcan (if any).\n     * @type {Trashcan}\n     */\n    this.trashcan = null;\n\n    /**\n     * This workspace's scrollbars, if they exist.\n     * @type {ScrollbarPair}\n     */\n    this.scrollbar = null;\n\n    /**\n     * Fixed flyout providing blocks which may be dragged into this workspace.\n     * @type {IFlyout}\n     * @private\n     */\n    this.flyout_ = null;\n\n    /**\n     * Category-based toolbox providing blocks which may be dragged into this\n     * workspace.\n     * @type {IToolbox}\n     * @private\n     */\n    this.toolbox_ = null;\n\n    /**\n     * The current gesture in progress on this workspace, if any.\n     * @type {TouchGesture}\n     * @package\n     */\n    this.currentGesture_ = null;\n\n    /**\n     * This workspace's surface for dragging blocks, if it exists.\n     * @type {BlockDragSurfaceSvg}\n     * @private\n     */\n    this.blockDragSurface_ = null;\n\n    /**\n     * This workspace's drag surface, if it exists.\n     * @type {WorkspaceDragSurfaceSvg}\n     * @private\n     */\n    this.workspaceDragSurface_ = null;\n\n    /**\n     * Whether to move workspace to the drag surface when it is dragged.\n     * True if it should move, false if it should be translated directly.\n     * @type {boolean}\n     * @private\n     */\n    this.useWorkspaceDragSurface_ = false;\n\n    /**\n     * Whether the drag surface is actively in use. When true, calls to\n     * translate will translate the drag surface instead of the translating the\n     * workspace directly.\n     * This is set to true in setupDragSurface and to false in resetDragSurface.\n     * @type {boolean}\n     * @private\n     */\n    this.isDragSurfaceActive_ = false;\n\n    /**\n     * The first parent div with 'injectionDiv' in the name, or null if not set.\n     * Access this with getInjectionDiv.\n     * @type {Element}\n     * @private\n     */\n    this.injectionDiv_ = null;\n\n    /**\n     * Last known position of the page scroll.\n     * This is used to determine whether we have recalculated screen coordinate\n     * stuff since the page scrolled.\n     * @type {Coordinate}\n     * @private\n     */\n    this.lastRecordedPageScroll_ = null;\n\n    /**\n     * Developers may define this function to add custom menu options to the\n     * workspace's context menu or edit the workspace-created set of menu\n     * options.\n     * @param {!Array<!Object>} options List of menu options to add to.\n     * @param {!Event} e The right-click event that triggered the context menu.\n     */\n    this.configureContextMenu;\n\n    /**\n     * In a flyout, the target workspace where blocks should be placed after a\n     * drag. Otherwise null.\n     * @type {WorkspaceSvg}\n     * @package\n     */\n    this.targetWorkspace = null;\n\n    /**\n     * Inverted screen CTM, for use in mouseToSvg.\n     * @type {?SVGMatrix}\n     * @private\n     */\n    this.inverseScreenCTM_ = null;\n\n    /**\n     * Inverted screen CTM is dirty, recalculate it.\n     * @type {boolean}\n     * @private\n     */\n    this.inverseScreenCTMDirty_ = true;\n\n    const MetricsManagerClass = registry.getClassFromOptions(\n        registry.Type.METRICS_MANAGER, options, true);\n    /**\n     * Object in charge of calculating metrics for the workspace.\n     * @type {!IMetricsManager}\n     * @private\n     */\n    this.metricsManager_ = new MetricsManagerClass(this);\n\n    /**\n     * Method to get all the metrics that have to do with a workspace.\n     * @type {function():!Metrics}\n     * @package\n     */\n    this.getMetrics = options.getMetrics ||\n        this.metricsManager_.getMetrics.bind(this.metricsManager_);\n\n    /**\n     * Translates the workspace.\n     * @type {function(!{x:number, y:number}):void}\n     * @package\n     */\n    this.setMetrics =\n        options.setMetrics || WorkspaceSvg.setTopLevelWorkspaceMetrics_;\n\n    /**\n     * @type {!ComponentManager}\n     * @private\n     */\n    this.componentManager_ = new ComponentManager();\n\n    this.connectionDBList = ConnectionDB.init(this.connectionChecker);\n\n    if (opt_blockDragSurface) {\n      this.blockDragSurface_ = opt_blockDragSurface;\n    }\n\n    if (opt_wsDragSurface) {\n      this.workspaceDragSurface_ = opt_wsDragSurface;\n    }\n\n    this.useWorkspaceDragSurface_ =\n        !!this.workspaceDragSurface_ && svgMath.is3dSupported();\n\n    /**\n     * List of currently highlighted blocks.  Block highlighting is often used\n     * to visually mark blocks currently being executed.\n     * @type {!Array<!BlockSvg>}\n     * @private\n     */\n    this.highlightedBlocks_ = [];\n\n    /**\n     * Object in charge of loading, storing, and playing audio for a workspace.\n     * @type {!WorkspaceAudio}\n     * @private\n     */\n    this.audioManager_ = new WorkspaceAudio(\n        /** @type {WorkspaceSvg} */ (options.parentWorkspace));\n\n    /**\n     * This workspace's grid object or null.\n     * @type {Grid}\n     * @private\n     */\n    this.grid_ = this.options.gridPattern ?\n        new Grid(this.options.gridPattern, options.gridOptions) :\n        null;\n\n    /**\n     * Manager in charge of markers and cursors.\n     * @type {!MarkerManager}\n     * @private\n     */\n    this.markerManager_ = new MarkerManager(this);\n\n    /**\n     * Map from function names to callbacks, for deciding what to do when a\n     * custom toolbox category is opened.\n     * @type {!Object<string, ?function(!WorkspaceSvg):\n     *     !toolbox.FlyoutDefinition>}\n     * @private\n     */\n    this.toolboxCategoryCallbacks_ = Object.create(null);\n\n    /**\n     * Map from function names to callbacks, for deciding what to do when a\n     * button is clicked.\n     * @type {!Object<string, ?function(!FlyoutButton)>}\n     * @private\n     */\n    this.flyoutButtonCallbacks_ = Object.create(null);\n\n    const Variables = goog.module.get('Blockly.Variables');\n    if (Variables && Variables.flyoutCategory) {\n      this.registerToolboxCategoryCallback(\n          Variables.CATEGORY_NAME, Variables.flyoutCategory);\n    }\n\n    const VariablesDynamic = goog.module.get('Blockly.VariablesDynamic');\n    if (VariablesDynamic && VariablesDynamic.flyoutCategory) {\n      this.registerToolboxCategoryCallback(\n          VariablesDynamic.CATEGORY_NAME, VariablesDynamic.flyoutCategory);\n    }\n\n    const Procedures = goog.module.get('Blockly.Procedures');\n    if (Procedures && Procedures.flyoutCategory) {\n      this.registerToolboxCategoryCallback(\n          Procedures.CATEGORY_NAME, Procedures.flyoutCategory);\n      this.addChangeListener(Procedures.mutatorOpenListener);\n    }\n\n    /**\n     * Object in charge of storing and updating the workspace theme.\n     * @type {!ThemeManager}\n     * @protected\n     */\n    this.themeManager_ = this.options.parentWorkspace ?\n        this.options.parentWorkspace.getThemeManager() :\n        new ThemeManager(this, this.options.theme || Classic);\n    this.themeManager_.subscribeWorkspace(this);\n\n    /**\n     * The block renderer used for rendering blocks on this workspace.\n     * @type {!Renderer}\n     * @private\n     */\n    this.renderer_ = blockRendering.init(\n        this.options.renderer || 'geras', this.getTheme(),\n        this.options.rendererOverrides);\n\n    /**\n     * Cached parent SVG.\n     * @type {SVGElement}\n     * @private\n     */\n    this.cachedParentSvg_ = null;\n\n    /**\n     * True if keyboard accessibility mode is on, false otherwise.\n     * @type {boolean}\n     */\n    this.keyboardAccessibilityMode = false;\n\n    /**\n     * The list of top-level bounded elements on the workspace.\n     * @type {!Array<!IBoundedElement>}\n     * @private\n     */\n    this.topBoundedElements_ = [];\n\n    /**\n     * The recorded drag targets.\n     * @type {!Array<\n     * {\n     *   component: !IDragTarget,\n     *   clientRect: !Rect\n     * }>}\n     * @private\n     */\n    this.dragTargetAreas_ = [];\n\n    /**\n     * The cached size of the parent svg element.\n     * Used to compute svg metrics.\n     * @type {!Size}\n     * @private\n     */\n    this.cachedParentSvgSize_ = new Size(0, 0);\n  }\n\n  /**\n   * Get the marker manager for this workspace.\n   * @return {!MarkerManager} The marker manager.\n   */\n  getMarkerManager() {\n    return this.markerManager_;\n  }\n\n  /**\n   * Gets the metrics manager for this workspace.\n   * @return {!IMetricsManager} The metrics manager.\n   * @public\n   */\n  getMetricsManager() {\n    return this.metricsManager_;\n  }\n\n  /**\n   * Sets the metrics manager for the workspace.\n   * @param {!IMetricsManager} metricsManager The metrics manager.\n   * @package\n   */\n  setMetricsManager(metricsManager) {\n    this.metricsManager_ = metricsManager;\n    this.getMetrics =\n        this.metricsManager_.getMetrics.bind(this.metricsManager_);\n  }\n\n  /**\n   * Gets the component manager for this workspace.\n   * @return {!ComponentManager} The component manager.\n   * @public\n   */\n  getComponentManager() {\n    return this.componentManager_;\n  }\n\n  /**\n   * Add the cursor SVG to this workspaces SVG group.\n   * @param {SVGElement} cursorSvg The SVG root of the cursor to be added to the\n   *     workspace SVG group.\n   * @package\n   */\n  setCursorSvg(cursorSvg) {\n    this.markerManager_.setCursorSvg(cursorSvg);\n  }\n\n  /**\n   * Add the marker SVG to this workspaces SVG group.\n   * @param {SVGElement} markerSvg The SVG root of the marker to be added to the\n   *     workspace SVG group.\n   * @package\n   */\n  setMarkerSvg(markerSvg) {\n    this.markerManager_.setMarkerSvg(markerSvg);\n  }\n\n  /**\n   * Get the marker with the given ID.\n   * @param {string} id The ID of the marker.\n   * @return {?Marker} The marker with the given ID or null if no marker\n   *     with the given ID exists.\n   * @package\n   */\n  getMarker(id) {\n    if (this.markerManager_) {\n      return this.markerManager_.getMarker(id);\n    }\n    return null;\n  }\n\n  /**\n   * The cursor for this workspace.\n   * @return {?Cursor} The cursor for the workspace.\n   */\n  getCursor() {\n    if (this.markerManager_) {\n      return this.markerManager_.getCursor();\n    }\n    return null;\n  }\n\n  /**\n   * Get the block renderer attached to this workspace.\n   * @return {!Renderer} The renderer attached to this\n   *     workspace.\n   */\n  getRenderer() {\n    return this.renderer_;\n  }\n\n  /**\n   * Get the theme manager for this workspace.\n   * @return {!ThemeManager} The theme manager for this workspace.\n   * @package\n   */\n  getThemeManager() {\n    return this.themeManager_;\n  }\n\n  /**\n   * Get the workspace theme object.\n   * @return {!Theme} The workspace theme object.\n   */\n  getTheme() {\n    return this.themeManager_.getTheme();\n  }\n\n  /**\n   * Set the workspace theme object.\n   * If no theme is passed, default to the `Classic` theme.\n   * @param {Theme} theme The workspace theme object.\n   */\n  setTheme(theme) {\n    if (!theme) {\n      theme = /** @type {!Theme} */ (Classic);\n    }\n    this.themeManager_.setTheme(theme);\n  }\n\n  /**\n   * Refresh all blocks on the workspace after a theme update.\n   * @package\n   */\n  refreshTheme() {\n    if (this.svgGroup_) {\n      this.renderer_.refreshDom(this.svgGroup_, this.getTheme());\n    }\n\n    // Update all blocks in workspace that have a style name.\n    this.updateBlockStyles_(this.getAllBlocks(false).filter(function(block) {\n      return !!block.getStyleName();\n    }));\n\n    // Update current toolbox selection.\n    this.refreshToolboxSelection();\n    if (this.toolbox_) {\n      this.toolbox_.refreshTheme();\n    }\n\n    // Re-render if workspace is visible\n    if (this.isVisible()) {\n      this.setVisible(true);\n    }\n\n    const event = new (eventUtils.get(eventUtils.THEME_CHANGE))(\n        this.getTheme().name, this.id);\n    eventUtils.fire(event);\n  }\n\n  /**\n   * Updates all the blocks with new style.\n   * @param {!Array<!Block>} blocks List of blocks to update the style\n   *     on.\n   * @private\n   */\n  updateBlockStyles_(blocks) {\n    for (let i = 0, block; (block = blocks[i]); i++) {\n      const blockStyleName = block.getStyleName();\n      if (blockStyleName) {\n        block.setStyle(blockStyleName);\n        if (block.mutator) {\n          block.mutator.updateBlockStyle();\n        }\n      }\n    }\n  }\n\n  /**\n   * Getter for the inverted screen CTM.\n   * @return {?SVGMatrix} The matrix to use in mouseToSvg\n   */\n  getInverseScreenCTM() {\n    // Defer getting the screen CTM until we actually need it, this should\n    // avoid forced reflows from any calls to updateInverseScreenCTM.\n    if (this.inverseScreenCTMDirty_) {\n      const ctm = this.getParentSvg().getScreenCTM();\n      if (ctm) {\n        this.inverseScreenCTM_ = ctm.inverse();\n        this.inverseScreenCTMDirty_ = false;\n      }\n    }\n\n    return this.inverseScreenCTM_;\n  }\n\n  /**\n   * Mark the inverse screen CTM as dirty.\n   */\n  updateInverseScreenCTM() {\n    this.inverseScreenCTMDirty_ = true;\n  }\n\n  /**\n   * Getter for isVisible\n   * @return {boolean} Whether the workspace is visible.\n   *     False if the workspace has been hidden by calling `setVisible(false)`.\n   */\n  isVisible() {\n    return this.isVisible_;\n  }\n\n  /**\n   * Return the absolute coordinates of the top-left corner of this element,\n   * scales that after canvas SVG element, if it's a descendant.\n   * The origin (0,0) is the top-left corner of the Blockly SVG.\n   * @param {!SVGElement} element SVG element to find the coordinates of.\n   * @return {!Coordinate} Object with .x and .y properties.\n   * @package\n   */\n  getSvgXY(element) {\n    let x = 0;\n    let y = 0;\n    let scale = 1;\n    if (dom.containsNode(this.getCanvas(), element) ||\n        dom.containsNode(this.getBubbleCanvas(), element)) {\n      // Before the SVG canvas, scale the coordinates.\n      scale = this.scale;\n    }\n    do {\n      // Loop through this block and every parent.\n      const xy = svgMath.getRelativeXY(element);\n      if (element === this.getCanvas() || element === this.getBubbleCanvas()) {\n        // After the SVG canvas, don't scale the coordinates.\n        scale = 1;\n      }\n      x += xy.x * scale;\n      y += xy.y * scale;\n      element = /** @type {!SVGElement} */ (element.parentNode);\n    } while (element && element !== this.getParentSvg());\n    return new Coordinate(x, y);\n  }\n\n  /**\n   * Gets the size of the workspace's parent SVG element.\n   * @return {!Size} The cached width and height of the workspace's\n   *     parent SVG element.\n   * @package\n   */\n  getCachedParentSvgSize() {\n    const size = this.cachedParentSvgSize_;\n    return new Size(size.width, size.height);\n  }\n\n  /**\n   * Return the position of the workspace origin relative to the injection div\n   * origin in pixels.\n   * The workspace origin is where a block would render at position (0, 0).\n   * It is not the upper left corner of the workspace SVG.\n   * @return {!Coordinate} Offset in pixels.\n   * @package\n   */\n  getOriginOffsetInPixels() {\n    return svgMath.getInjectionDivXY(this.getCanvas());\n  }\n\n  /**\n   * Return the injection div that is a parent of this workspace.\n   * Walks the DOM the first time it's called, then returns a cached value.\n   * Note: We assume this is only called after the workspace has been injected\n   * into the DOM.\n   * @return {!Element} The first parent div with 'injectionDiv' in the name.\n   * @package\n   */\n  getInjectionDiv() {\n    // NB: it would be better to pass this in at createDom, but is more likely\n    // to break existing uses of Blockly.\n    if (!this.injectionDiv_) {\n      let element = this.svgGroup_;\n      while (element) {\n        const classes = element.getAttribute('class') || '';\n        if ((' ' + classes + ' ').indexOf(' injectionDiv ') !== -1) {\n          this.injectionDiv_ = element;\n          break;\n        }\n        element = /** @type {!Element} */ (element.parentNode);\n      }\n    }\n    return /** @type {!Element} */ (this.injectionDiv_);\n  }\n\n  /**\n   * Get the SVG block canvas for the workspace.\n   * @return {?SVGElement} The SVG group for the workspace.\n   * @package\n   */\n  getBlockCanvas() {\n    return this.svgBlockCanvas_;\n  }\n\n  /**\n   * Save resize handler data so we can delete it later in dispose.\n   * @param {!browserEvents.Data} handler Data that can be passed to\n   *     eventHandling.unbind.\n   */\n  setResizeHandlerWrapper(handler) {\n    this.resizeHandlerWrapper_ = handler;\n  }\n\n  /**\n   * Create the workspace DOM elements.\n   * @param {string=} opt_backgroundClass Either 'blocklyMainBackground' or\n   *     'blocklyMutatorBackground'.\n   * @return {!Element} The workspace's SVG group.\n   */\n  createDom(opt_backgroundClass) {\n    /**\n     * <g class=\"blocklyWorkspace\">\n     *   <rect class=\"blocklyMainBackground\" height=\"100%\" width=\"100%\"></rect>\n     *   [Trashcan and/or flyout may go here]\n     *   <g class=\"blocklyBlockCanvas\"></g>\n     *   <g class=\"blocklyBubbleCanvas\"></g>\n     * </g>\n     * @type {SVGElement}\n     */\n    this.svgGroup_ =\n        dom.createSvgElement(Svg.G, {'class': 'blocklyWorkspace'}, null);\n\n    // Note that a <g> alone does not receive mouse events--it must have a\n    // valid target inside it.  If no background class is specified, as in the\n    // flyout, the workspace will not receive mouse events.\n    if (opt_backgroundClass) {\n      /** @type {SVGElement} */\n      this.svgBackground_ = dom.createSvgElement(\n          Svg.RECT,\n          {'height': '100%', 'width': '100%', 'class': opt_backgroundClass},\n          this.svgGroup_);\n\n      if (opt_backgroundClass === 'blocklyMainBackground' && this.grid_) {\n        this.svgBackground_.style.fill =\n            'url(#' + this.grid_.getPatternId() + ')';\n      } else {\n        this.themeManager_.subscribe(\n            this.svgBackground_, 'workspaceBackgroundColour', 'fill');\n      }\n    }\n    /** @type {SVGElement} */\n    this.svgBlockCanvas_ = dom.createSvgElement(\n        Svg.G, {'class': 'blocklyBlockCanvas'}, this.svgGroup_);\n    /** @type {SVGElement} */\n    this.svgBubbleCanvas_ = dom.createSvgElement(\n        Svg.G, {'class': 'blocklyBubbleCanvas'}, this.svgGroup_);\n\n    if (!this.isFlyout) {\n      browserEvents.conditionalBind(\n          this.svgGroup_, 'mousedown', this, this.onMouseDown_, false, true);\n      // This no-op works around https://bugs.webkit.org/show_bug.cgi?id=226683,\n      // which otherwise prevents zoom/scroll events from being observed in\n      // Safari. Once that bug is fixed it should be removed.\n      document.body.addEventListener('wheel', function() {});\n      browserEvents.conditionalBind(\n          this.svgGroup_, 'wheel', this, this.onMouseWheel_);\n    }\n\n    // Determine if there needs to be a category tree, or a simple list of\n    // blocks.  This cannot be changed later, since the UI is very different.\n    if (this.options.hasCategories) {\n      const ToolboxClass = registry.getClassFromOptions(\n          registry.Type.TOOLBOX, this.options, true);\n      this.toolbox_ = new ToolboxClass(this);\n    }\n    if (this.grid_) {\n      this.grid_.update(this.scale);\n    }\n    this.recordDragTargets();\n    const CursorClass =\n        registry.getClassFromOptions(registry.Type.CURSOR, this.options);\n\n    CursorClass && this.markerManager_.setCursor(new CursorClass());\n\n    this.renderer_.createDom(this.svgGroup_, this.getTheme());\n    return this.svgGroup_;\n  }\n\n  /**\n   * Dispose of this workspace.\n   * Unlink from all DOM elements to prevent memory leaks.\n   * @suppress {checkTypes}\n   */\n  dispose() {\n    // Stop rerendering.\n    this.rendered = false;\n    if (this.currentGesture_) {\n      this.currentGesture_.cancel();\n    }\n    if (this.svgGroup_) {\n      dom.removeNode(this.svgGroup_);\n      this.svgGroup_ = null;\n    }\n    this.svgBlockCanvas_ = null;\n    this.svgBubbleCanvas_ = null;\n    if (this.toolbox_) {\n      this.toolbox_.dispose();\n      this.toolbox_ = null;\n    }\n    if (this.flyout_) {\n      this.flyout_.dispose();\n      this.flyout_ = null;\n    }\n    if (this.trashcan) {\n      this.trashcan.dispose();\n      this.trashcan = null;\n    }\n    if (this.scrollbar) {\n      this.scrollbar.dispose();\n      this.scrollbar = null;\n    }\n    if (this.zoomControls_) {\n      this.zoomControls_.dispose();\n      this.zoomControls_ = null;\n    }\n\n    if (this.audioManager_) {\n      this.audioManager_.dispose();\n      this.audioManager_ = null;\n    }\n\n    if (this.grid_) {\n      this.grid_.dispose();\n      this.grid_ = null;\n    }\n\n    this.renderer_.dispose();\n\n    if (this.markerManager_) {\n      this.markerManager_.dispose();\n      this.markerManager_ = null;\n    }\n\n    super.dispose();\n\n    // Dispose of theme manager after all blocks and mutators are disposed of.\n    if (this.themeManager_) {\n      this.themeManager_.unsubscribeWorkspace(this);\n      this.themeManager_.unsubscribe(this.svgBackground_);\n      if (!this.options.parentWorkspace) {\n        this.themeManager_.dispose();\n        this.themeManager_ = null;\n      }\n    }\n\n    this.connectionDBList = null;\n\n    this.toolboxCategoryCallbacks_ = null;\n    this.flyoutButtonCallbacks_ = null;\n\n    if (!this.options.parentWorkspace) {\n      // Top-most workspace.  Dispose of the div that the\n      // SVG is injected into (i.e. injectionDiv).\n      const parentSvg = this.getParentSvg();\n      if (parentSvg && parentSvg.parentNode) {\n        dom.removeNode(parentSvg.parentNode);\n      }\n    }\n    if (this.resizeHandlerWrapper_) {\n      browserEvents.unbind(this.resizeHandlerWrapper_);\n      this.resizeHandlerWrapper_ = null;\n    }\n  }\n\n  /**\n   * Obtain a newly created block.\n   *\n   * This block's SVG must still be initialized\n   * ([initSvg]{@link BlockSvg#initSvg}) and it must be rendered\n   * ([render]{@link BlockSvg#render}) before the block will be visible.\n   * @param {!string} prototypeName Name of the language object containing\n   *     type-specific functions for this block.\n   * @param {string=} opt_id Optional ID.  Use this ID if provided, otherwise\n   *     create a new ID.\n   * @return {!BlockSvg} The created block.\n   * @override\n   */\n  newBlock(prototypeName, opt_id) {\n    return new BlockSvg(this, prototypeName, opt_id);\n  }\n\n  /**\n   * Add a trashcan.\n   * @package\n   */\n  addTrashcan() {\n    const {Trashcan} = goog.module.get('Blockly.Trashcan');\n    if (!Trashcan) {\n      throw Error('Missing require for Blockly.Trashcan');\n    }\n    /** @type {Trashcan} */\n    this.trashcan = new Trashcan(this);\n    const svgTrashcan = this.trashcan.createDom();\n    this.svgGroup_.insertBefore(svgTrashcan, this.svgBlockCanvas_);\n  }\n\n  /**\n   * Add zoom controls.\n   * @package\n   */\n  addZoomControls() {\n    const {ZoomControls} = goog.module.get('Blockly.ZoomControls');\n    if (!ZoomControls) {\n      throw Error('Missing require for Blockly.ZoomControls');\n    }\n    /** @type {ZoomControls} */\n    this.zoomControls_ = new ZoomControls(this);\n    const svgZoomControls = this.zoomControls_.createDom();\n    this.svgGroup_.appendChild(svgZoomControls);\n  }\n\n  /**\n   * Add a flyout element in an element with the given tag name.\n   * @param {string|\n   * !Svg<!SVGSVGElement>|\n   * !Svg<!SVGGElement>} tagName What type of tag the\n   *     flyout belongs in.\n   * @return {!Element} The element containing the flyout DOM.\n   * @package\n   */\n  addFlyout(tagName) {\n    const workspaceOptions = new Options(\n        /** @type {!BlocklyOptions} */\n        ({\n          'parentWorkspace': this,\n          'rtl': this.RTL,\n          'oneBasedIndex': this.options.oneBasedIndex,\n          'horizontalLayout': this.horizontalLayout,\n          'renderer': this.options.renderer,\n          'rendererOverrides': this.options.rendererOverrides,\n          'move': {\n            'scrollbars': true,\n          },\n        }));\n    workspaceOptions.toolboxPosition = this.options.toolboxPosition;\n    if (this.horizontalLayout) {\n      const HorizontalFlyout = registry.getClassFromOptions(\n          registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX, this.options, true);\n      this.flyout_ = new HorizontalFlyout(workspaceOptions);\n    } else {\n      const VerticalFlyout = registry.getClassFromOptions(\n          registry.Type.FLYOUTS_VERTICAL_TOOLBOX, this.options, true);\n      this.flyout_ = new VerticalFlyout(workspaceOptions);\n    }\n    this.flyout_.autoClose = false;\n    this.flyout_.getWorkspace().setVisible(true);\n\n    // Return the element so that callers can place it in their desired\n    // spot in the DOM.  For example, mutator flyouts do not go in the same\n    // place as main workspace flyouts.\n    return this.flyout_.createDom(tagName);\n  }\n\n  /**\n   * Getter for the flyout associated with this workspace.  This flyout may be\n   * owned by either the toolbox or the workspace, depending on toolbox\n   * configuration.  It will be null if there is no flyout.\n   * @param {boolean=} opt_own Whether to only return the workspace's own\n   *     flyout.\n   * @return {?IFlyout} The flyout on this workspace.\n   * @package\n   */\n  getFlyout(opt_own) {\n    if (this.flyout_ || opt_own) {\n      return this.flyout_;\n    }\n    if (this.toolbox_) {\n      return this.toolbox_.getFlyout();\n    }\n    return null;\n  }\n\n  /**\n   * Getter for the toolbox associated with this workspace, if one exists.\n   * @return {?IToolbox} The toolbox on this workspace.\n   * @package\n   */\n  getToolbox() {\n    return this.toolbox_;\n  }\n\n  /**\n   * Update items that use screen coordinate calculations\n   * because something has changed (e.g. scroll position, window size).\n   * @private\n   */\n  updateScreenCalculations_() {\n    this.updateInverseScreenCTM();\n    this.recordDragTargets();\n  }\n\n  /**\n   * If enabled, resize the parts of the workspace that change when the\n   * workspace contents (e.g. block positions) change.  This will also scroll\n   * the workspace contents if needed.\n   * @package\n   */\n  resizeContents() {\n    if (!this.resizesEnabled_ || !this.rendered) {\n      return;\n    }\n    if (this.scrollbar) {\n      this.scrollbar.resize();\n    }\n    this.updateInverseScreenCTM();\n  }\n\n  /**\n   * Resize and reposition all of the workspace chrome (toolbox,\n   * trash, scrollbars etc.)\n   * This should be called when something changes that\n   * requires recalculating dimensions and positions of the\n   * trash, zoom, toolbox, etc. (e.g. window resize).\n   */\n  resize() {\n    if (this.toolbox_) {\n      this.toolbox_.position();\n    }\n    if (this.flyout_) {\n      this.flyout_.position();\n    }\n\n    const positionables = this.componentManager_.getComponents(\n        ComponentManager.Capability.POSITIONABLE, true);\n    const metrics = this.getMetricsManager().getUiMetrics();\n    const savedPositions = [];\n    for (let i = 0, positionable; (positionable = positionables[i]); i++) {\n      positionable.position(metrics, savedPositions);\n      const boundingRect = positionable.getBoundingRectangle();\n      if (boundingRect) {\n        savedPositions.push(boundingRect);\n      }\n    }\n\n    if (this.scrollbar) {\n      this.scrollbar.resize();\n    }\n    this.updateScreenCalculations_();\n  }\n\n  /**\n   * Resizes and repositions workspace chrome if the page has a new\n   * scroll position.\n   * @package\n   */\n  updateScreenCalculationsIfScrolled() {\n    /* eslint-disable indent */\n    const currScroll = svgMath.getDocumentScroll();\n    if (!Coordinate.equals(this.lastRecordedPageScroll_, currScroll)) {\n      this.lastRecordedPageScroll_ = currScroll;\n      this.updateScreenCalculations_();\n    }\n  }\n  /* eslint-enable indent */\n\n  /**\n   * Get the SVG element that forms the drawing surface.\n   * @return {!SVGGElement} SVG group element.\n   */\n  getCanvas() {\n    return /** @type {!SVGGElement} */ (this.svgBlockCanvas_);\n  }\n\n  /**\n   * Caches the width and height of the workspace's parent SVG element for use\n   * with getSvgMetrics.\n   * @param {?number} width The width of the parent SVG element.\n   * @param {?number} height The height of the parent SVG element\n   * @package\n   */\n  setCachedParentSvgSize(width, height) {\n    const svg = this.getParentSvg();\n    if (width != null) {\n      this.cachedParentSvgSize_.width = width;\n      // This is set to support the public (but deprecated) Blockly.svgSize\n      // method.\n      svg.cachedWidth_ = width;\n    }\n    if (height != null) {\n      this.cachedParentSvgSize_.height = height;\n      // This is set to support the public (but deprecated) Blockly.svgSize\n      // method.\n      svg.cachedHeight_ = height;\n    }\n  }\n\n  /**\n   * Get the SVG element that forms the bubble surface.\n   * @return {!SVGGElement} SVG group element.\n   */\n  getBubbleCanvas() {\n    return /** @type {!SVGGElement} */ (this.svgBubbleCanvas_);\n  }\n\n  /**\n   * Get the SVG element that contains this workspace.\n   * Note: We assume this is only called after the workspace has been injected\n   * into the DOM.\n   * @return {!SVGElement} SVG element.\n   */\n  getParentSvg() {\n    if (!this.cachedParentSvg_) {\n      let element = this.svgGroup_;\n      while (element) {\n        if (element.tagName === 'svg') {\n          this.cachedParentSvg_ = element;\n          break;\n        }\n        element = /** @type {!SVGElement} */ (element.parentNode);\n      }\n    }\n    return /** @type {!SVGElement} */ (this.cachedParentSvg_);\n  }\n\n  /**\n   * Fires a viewport event if events are enabled and there is a change in\n   * viewport values.\n   * @package\n   */\n  maybeFireViewportChangeEvent() {\n    if (!eventUtils.isEnabled()) {\n      return;\n    }\n    const scale = this.scale;\n    const top = -this.scrollY;\n    const left = -this.scrollX;\n    if (scale === this.oldScale_ && Math.abs(top - this.oldTop_) < 1 &&\n        Math.abs(left - this.oldLeft_) < 1) {\n      // Ignore sub-pixel changes in top and left. Due to #4192 there are a lot\n      // of negligible changes in viewport top/left.\n      return;\n    }\n    const event = new (eventUtils.get(eventUtils.VIEWPORT_CHANGE))(\n        top, left, scale, this.id, this.oldScale_);\n    this.oldScale_ = scale;\n    this.oldTop_ = top;\n    this.oldLeft_ = left;\n    eventUtils.fire(event);\n  }\n\n  /**\n   * Translate this workspace to new coordinates.\n   * @param {number} x Horizontal translation, in pixel units relative to the\n   *    top left of the Blockly div.\n   * @param {number} y Vertical translation, in pixel units relative to the\n   *    top left of the Blockly div.\n   */\n  translate(x, y) {\n    if (this.useWorkspaceDragSurface_ && this.isDragSurfaceActive_) {\n      this.workspaceDragSurface_.translateSurface(x, y);\n    } else {\n      const translation = 'translate(' + x + ',' + y + ') ' +\n          'scale(' + this.scale + ')';\n      this.svgBlockCanvas_.setAttribute('transform', translation);\n      this.svgBubbleCanvas_.setAttribute('transform', translation);\n    }\n    // Now update the block drag surface if we're using one.\n    if (this.blockDragSurface_) {\n      this.blockDragSurface_.translateAndScaleGroup(x, y, this.scale);\n    }\n    // And update the grid if we're using one.\n    if (this.grid_) {\n      this.grid_.moveTo(x, y);\n    }\n\n    this.maybeFireViewportChangeEvent();\n  }\n\n  /**\n   * Called at the end of a workspace drag to take the contents\n   * out of the drag surface and put them back into the workspace SVG.\n   * Does nothing if the workspace drag surface is not enabled.\n   * @package\n   */\n  resetDragSurface() {\n    // Don't do anything if we aren't using a drag surface.\n    if (!this.useWorkspaceDragSurface_) {\n      return;\n    }\n\n    this.isDragSurfaceActive_ = false;\n\n    const trans = this.workspaceDragSurface_.getSurfaceTranslation();\n    this.workspaceDragSurface_.clearAndHide(this.svgGroup_);\n    const translation = 'translate(' + trans.x + ',' + trans.y + ') ' +\n        'scale(' + this.scale + ')';\n    this.svgBlockCanvas_.setAttribute('transform', translation);\n    this.svgBubbleCanvas_.setAttribute('transform', translation);\n  }\n\n  /**\n   * Called at the beginning of a workspace drag to move contents of\n   * the workspace to the drag surface.\n   * Does nothing if the drag surface is not enabled.\n   * @package\n   */\n  setupDragSurface() {\n    // Don't do anything if we aren't using a drag surface.\n    if (!this.useWorkspaceDragSurface_) {\n      return;\n    }\n\n    // This can happen if the user starts a drag, mouses up outside of the\n    // document where the mouseup listener is registered (e.g. outside of an\n    // iframe) and then moves the mouse back in the workspace.  On mobile and\n    // ff, we get the mouseup outside the frame. On chrome and safari desktop we\n    // do not.\n    if (this.isDragSurfaceActive_) {\n      return;\n    }\n\n    this.isDragSurfaceActive_ = true;\n\n    // Figure out where we want to put the canvas back.  The order\n    // in the is important because things are layered.\n    const previousElement =\n        /** @type {Element} */ (this.svgBlockCanvas_.previousSibling);\n    const width = parseInt(this.getParentSvg().getAttribute('width'), 10);\n    const height = parseInt(this.getParentSvg().getAttribute('height'), 10);\n    const coord = svgMath.getRelativeXY(this.getCanvas());\n    this.workspaceDragSurface_.setContentsAndShow(\n        this.getCanvas(), this.getBubbleCanvas(), previousElement, width,\n        height, this.scale);\n    this.workspaceDragSurface_.translateSurface(coord.x, coord.y);\n  }\n\n  /**\n   * Gets the drag surface blocks are moved to when a drag is started.\n   * @return {?BlockDragSurfaceSvg} This workspace's block drag surface,\n   *     if one is in use.\n   * @package\n   */\n  getBlockDragSurface() {\n    return this.blockDragSurface_;\n  }\n\n  /**\n   * Returns the horizontal offset of the workspace.\n   * Intended for LTR/RTL compatibility in XML.\n   * @return {number} Width.\n   */\n  getWidth() {\n    const metrics = this.getMetrics();\n    return metrics ? metrics.viewWidth / this.scale : 0;\n  }\n\n  /**\n   * Toggles the visibility of the workspace.\n   * Currently only intended for main workspace.\n   * @param {boolean} isVisible True if workspace should be visible.\n   */\n  setVisible(isVisible) {\n    this.isVisible_ = isVisible;\n    if (!this.svgGroup_) {\n      return;\n    }\n\n    // Tell the scrollbar whether its container is visible so it can\n    // tell when to hide itself.\n    if (this.scrollbar) {\n      this.scrollbar.setContainerVisible(isVisible);\n    }\n\n    // Tell the flyout whether its container is visible so it can\n    // tell when to hide itself.\n    if (this.getFlyout()) {\n      this.getFlyout().setContainerVisible(isVisible);\n    }\n\n    this.getParentSvg().style.display = isVisible ? 'block' : 'none';\n    if (this.toolbox_) {\n      // Currently does not support toolboxes in mutators.\n      this.toolbox_.setVisible(isVisible);\n    }\n    if (isVisible) {\n      const blocks = this.getAllBlocks(false);\n      // Tell each block on the workspace to mark its fields as dirty.\n      for (let i = blocks.length - 1; i >= 0; i--) {\n        blocks[i].markDirty();\n      }\n\n      this.render();\n      if (this.toolbox_) {\n        this.toolbox_.position();\n      }\n    } else {\n      this.hideChaff(true);\n    }\n  }\n\n  /**\n   * Render all blocks in workspace.\n   */\n  render() {\n    // Generate list of all blocks.\n    const blocks = this.getAllBlocks(false);\n    // Render each block.\n    for (let i = blocks.length - 1; i >= 0; i--) {\n      blocks[i].render(false);\n    }\n\n    if (this.currentGesture_) {\n      const imList = this.currentGesture_.getInsertionMarkers();\n      for (let i = 0; i < imList.length; i++) {\n        imList[i].render(false);\n      }\n    }\n\n    this.markerManager_.updateMarkers();\n  }\n\n  /**\n   * Highlight or unhighlight a block in the workspace.  Block highlighting is\n   * often used to visually mark blocks currently being executed.\n   * @param {?string} id ID of block to highlight/unhighlight,\n   *   or null for no block (used to unhighlight all blocks).\n   * @param {boolean=} opt_state If undefined, highlight specified block and\n   * automatically unhighlight all others.  If true or false, manually\n   * highlight/unhighlight the specified block.\n   */\n  highlightBlock(id, opt_state) {\n    if (opt_state === undefined) {\n      // Unhighlight all blocks.\n      for (let i = 0, block; (block = this.highlightedBlocks_[i]); i++) {\n        block.setHighlighted(false);\n      }\n      this.highlightedBlocks_.length = 0;\n    }\n    // Highlight/unhighlight the specified block.\n    const block = id ? this.getBlockById(id) : null;\n    if (block) {\n      const state = (opt_state === undefined) || opt_state;\n      // Using Set here would be great, but at the cost of IE10 support.\n      if (!state) {\n        arrayUtils.removeElem(this.highlightedBlocks_, block);\n      } else if (this.highlightedBlocks_.indexOf(block) === -1) {\n        this.highlightedBlocks_.push(block);\n      }\n      block.setHighlighted(state);\n    }\n  }\n\n  /**\n   * Pastes the provided block or workspace comment onto the workspace.\n   * Does not check whether there is remaining capacity for the object, that\n   * should be done before calling this method.\n   * @param {!Object|!Element|!DocumentFragment} state The representation of the\n   *     thing to paste.\n   * @return {!ICopyable|null} The pasted thing, or null if\n   *     the paste was not successful.\n   */\n  paste(state) {\n    if (!this.rendered || !state['type'] && !state.tagName) {\n      return null;\n    }\n    if (this.currentGesture_) {\n      this.currentGesture_.cancel();  // Dragging while pasting?  No.\n    }\n\n    const existingGroup = eventUtils.getGroup();\n    if (!existingGroup) {\n      eventUtils.setGroup(true);\n    }\n\n    let pastedThing;\n    // Checks if this is JSON. JSON has a type property, while elements don't.\n    if (state['type']) {\n      pastedThing =\n          this.pasteBlock_(null, /** @type {!blocks.State} */ (state));\n    } else {\n      const xmlBlock = /** @type {!Element} */ (state);\n      if (xmlBlock.tagName.toLowerCase() === 'comment') {\n        pastedThing = this.pasteWorkspaceComment_(xmlBlock);\n      } else {\n        pastedThing = this.pasteBlock_(xmlBlock, null);\n      }\n    }\n\n    eventUtils.setGroup(existingGroup);\n    return pastedThing;\n  }\n\n  /**\n   * Paste the provided block onto the workspace.\n   * @param {?Element} xmlBlock XML block element.\n   * @param {?blocks.State} jsonBlock JSON block\n   *     representation.\n   * @return {!BlockSvg} The pasted block.\n   * @private\n   */\n  pasteBlock_(xmlBlock, jsonBlock) {\n    eventUtils.disable();\n    let block;\n    try {\n      let blockX = 0;\n      let blockY = 0;\n      if (xmlBlock) {\n        block = /** @type {!BlockSvg} */ (Xml.domToBlock(xmlBlock, this));\n        blockX = parseInt(xmlBlock.getAttribute('x'), 10);\n        if (this.RTL) {\n          blockX = -blockX;\n        }\n        blockY = parseInt(xmlBlock.getAttribute('y'), 10);\n      } else if (jsonBlock) {\n        block = /** @type {!BlockSvg} */ (blocks.append(jsonBlock, this));\n        blockX = jsonBlock['x'] || 10;\n        if (this.RTL) {\n          blockX = this.getWidth() - blockX;\n        }\n        blockY = jsonBlock['y'] || 10;\n      }\n\n      // Move the duplicate to original position.\n      if (!isNaN(blockX) && !isNaN(blockY)) {\n        // Offset block until not clobbering another block and not in connection\n        // distance with neighbouring blocks.\n        let collide;\n        do {\n          collide = false;\n          const allBlocks = this.getAllBlocks(false);\n          for (let i = 0, otherBlock; (otherBlock = allBlocks[i]); i++) {\n            const otherXY = otherBlock.getRelativeToSurfaceXY();\n            if (Math.abs(blockX - otherXY.x) <= 1 &&\n                Math.abs(blockY - otherXY.y) <= 1) {\n              collide = true;\n              break;\n            }\n          }\n          if (!collide) {\n            // Check for blocks in snap range to any of its connections.\n            const connections = block.getConnections_(false);\n            for (let i = 0, connection; (connection = connections[i]); i++) {\n              const neighbour =\n                  /** @type {!RenderedConnection} */ (connection)\n                      .closest(\n                          config.snapRadius, new Coordinate(blockX, blockY));\n              if (neighbour.connection) {\n                collide = true;\n                break;\n              }\n            }\n          }\n          if (collide) {\n            if (this.RTL) {\n              blockX -= config.snapRadius;\n            } else {\n              blockX += config.snapRadius;\n            }\n            blockY += config.snapRadius * 2;\n          }\n        } while (collide);\n        block.moveTo(new Coordinate(blockX, blockY));\n      }\n    } finally {\n      eventUtils.enable();\n    }\n    if (eventUtils.isEnabled() && !block.isShadow()) {\n      eventUtils.fire(new (eventUtils.get(eventUtils.BLOCK_CREATE))(block));\n    }\n    block.select();\n    return block;\n  }\n\n  /**\n   * Paste the provided comment onto the workspace.\n   * @param {!Element} xmlComment XML workspace comment element.\n   * @return {!WorkspaceCommentSvg} The pasted workspace comment.\n   * @private\n   * @suppress {checkTypes} Suppress checks while workspace comments are not\n   *     bundled in.\n   */\n  pasteWorkspaceComment_(xmlComment) {\n    eventUtils.disable();\n    let comment;\n    try {\n      comment = goog.module.get('Blockly.WorkspaceCommentSvg')\n                    .fromXml(xmlComment, this);\n      // Move the duplicate to original position.\n      let commentX = parseInt(xmlComment.getAttribute('x'), 10);\n      let commentY = parseInt(xmlComment.getAttribute('y'), 10);\n      if (!isNaN(commentX) && !isNaN(commentY)) {\n        if (this.RTL) {\n          commentX = -commentX;\n        }\n        // Offset workspace comment.\n        // TODO (#1719): Properly offset comment such that it's not interfering\n        // with any blocks.\n        commentX += 50;\n        commentY += 50;\n        comment.moveBy(commentX, commentY);\n      }\n    } finally {\n      eventUtils.enable();\n    }\n    if (eventUtils.isEnabled()) {\n      goog.module.get('Blockly.WorkspaceComment').fireCreateEvent(comment);\n    }\n    comment.select();\n    return comment;\n  }\n\n  /**\n   * Refresh the toolbox unless there's a drag in progress.\n   * @package\n   */\n  refreshToolboxSelection() {\n    const ws = this.isFlyout ? this.targetWorkspace : this;\n    if (ws && !ws.currentGesture_ && ws.toolbox_ && ws.toolbox_.getFlyout()) {\n      ws.toolbox_.refreshSelection();\n    }\n  }\n\n  /**\n   * Rename a variable by updating its name in the variable map.  Update the\n   *     flyout to show the renamed variable immediately.\n   * @param {string} id ID of the variable to rename.\n   * @param {string} newName New variable name.\n   */\n  renameVariableById(id, newName) {\n    super.renameVariableById(id, newName);\n    this.refreshToolboxSelection();\n  }\n\n  /**\n   * Delete a variable by the passed in ID.   Update the flyout to show\n   *     immediately that the variable is deleted.\n   * @param {string} id ID of variable to delete.\n   */\n  deleteVariableById(id) {\n    super.deleteVariableById(id);\n    this.refreshToolboxSelection();\n  }\n\n  /**\n   * Create a new variable with the given name.  Update the flyout to show the\n   *     new variable immediately.\n   * @param {string} name The new variable's name.\n   * @param {?string=} opt_type The type of the variable like 'int' or 'string'.\n   *     Does not need to be unique. Field_variable can filter variables based\n   * on their type. This will default to '' which is a specific type.\n   * @param {?string=} opt_id The unique ID of the variable. This will default\n   *     to a UUID.\n   * @return {!VariableModel} The newly created variable.\n   */\n  createVariable(name, opt_type, opt_id) {\n    const newVar = super.createVariable(name, opt_type, opt_id);\n    this.refreshToolboxSelection();\n    return newVar;\n  }\n\n  /**\n   * Make a list of all the delete areas for this workspace.\n   * @deprecated Use workspace.recordDragTargets. (2021 June)\n   */\n  recordDeleteAreas() {\n    utils.deprecation.warn(\n        'WorkspaceSvg.prototype.recordDeleteAreas', 'June 2021', 'June 2022',\n        'WorkspaceSvg.prototype.recordDragTargets');\n    this.recordDragTargets();\n  }\n\n  /**\n   * Make a list of all the delete areas for this workspace.\n   */\n  recordDragTargets() {\n    const dragTargets = this.componentManager_.getComponents(\n        ComponentManager.Capability.DRAG_TARGET, true);\n\n    this.dragTargetAreas_ = [];\n    for (let i = 0, targetArea; (targetArea = dragTargets[i]); i++) {\n      const rect = targetArea.getClientRect();\n      if (rect) {\n        this.dragTargetAreas_.push({\n          component: targetArea,\n          clientRect: rect,\n        });\n      }\n    }\n  }\n\n  /**\n   * Returns the drag target the mouse event is over.\n   * @param {!Event} e Mouse move event.\n   * @return {?IDragTarget} Null if not over a drag target, or the drag\n   *     target the event is over.\n   */\n  getDragTarget(e) {\n    for (let i = 0, targetArea; (targetArea = this.dragTargetAreas_[i]); i++) {\n      if (targetArea.clientRect.contains(e.clientX, e.clientY)) {\n        return targetArea.component;\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Handle a mouse-down on SVG drawing surface.\n   * @param {!Event} e Mouse down event.\n   * @private\n   */\n  onMouseDown_(e) {\n    const gesture = this.getGesture(e);\n    if (gesture) {\n      gesture.handleWsStart(e, this);\n    }\n  }\n\n  /**\n   * Start tracking a drag of an object on this workspace.\n   * @param {!Event} e Mouse down event.\n   * @param {!Coordinate} xy Starting location of object.\n   */\n  startDrag(e, xy) {\n    // Record the starting offset between the bubble's location and the mouse.\n    const point = browserEvents.mouseToSvg(\n        e, this.getParentSvg(), this.getInverseScreenCTM());\n    // Fix scale of mouse event.\n    point.x /= this.scale;\n    point.y /= this.scale;\n    this.dragDeltaXY_ = Coordinate.difference(xy, point);\n  }\n\n  /**\n   * Track a drag of an object on this workspace.\n   * @param {!Event} e Mouse move event.\n   * @return {!Coordinate} New location of object.\n   */\n  moveDrag(e) {\n    const point = browserEvents.mouseToSvg(\n        e, this.getParentSvg(), this.getInverseScreenCTM());\n    // Fix scale of mouse event.\n    point.x /= this.scale;\n    point.y /= this.scale;\n    return Coordinate.sum(\n        /** @type {!Coordinate} */ (this.dragDeltaXY_), point);\n  }\n\n  /**\n   * Is the user currently dragging a block or scrolling the flyout/workspace?\n   * @return {boolean} True if currently dragging or scrolling.\n   */\n  isDragging() {\n    return this.currentGesture_ !== null && this.currentGesture_.isDragging();\n  }\n\n  /**\n   * Is this workspace draggable?\n   * @return {boolean} True if this workspace may be dragged.\n   */\n  isDraggable() {\n    return this.options.moveOptions && this.options.moveOptions.drag;\n  }\n\n  /**\n   * Is this workspace movable?\n   *\n   * This means the user can reposition the X Y coordinates of the workspace\n   * through input. This can be through scrollbars, scroll wheel, dragging, or\n   * through zooming with the scroll wheel or pinch (since the zoom is centered\n   * on the mouse position). This does not include zooming with the zoom\n   * controls since the X Y coordinates are decided programmatically.\n   * @return {boolean} True if the workspace is movable, false otherwise.\n   */\n  isMovable() {\n    return (this.options.moveOptions &&\n            !!this.options.moveOptions.scrollbars) ||\n        (this.options.moveOptions && this.options.moveOptions.wheel) ||\n        (this.options.moveOptions && this.options.moveOptions.drag) ||\n        (this.options.zoomOptions && this.options.zoomOptions.wheel) ||\n        (this.options.zoomOptions && this.options.zoomOptions.pinch);\n  }\n\n  /**\n   * Is this workspace movable horizontally?\n   * @return {boolean} True if the workspace is movable horizontally, false\n   *    otherwise.\n   */\n  isMovableHorizontally() {\n    const hasScrollbars = !!this.scrollbar;\n    return this.isMovable() &&\n        (!hasScrollbars ||\n         (hasScrollbars && this.scrollbar.canScrollHorizontally()));\n  }\n\n  /**\n   * Is this workspace movable vertically?\n   * @return {boolean} True if the workspace is movable vertically, false\n   *    otherwise.\n   */\n  isMovableVertically() {\n    const hasScrollbars = !!this.scrollbar;\n    return this.isMovable() &&\n        (!hasScrollbars ||\n         (hasScrollbars && this.scrollbar.canScrollVertically()));\n  }\n\n  /**\n   * Handle a mouse-wheel on SVG drawing surface.\n   * @param {!Event} e Mouse wheel event.\n   * @private\n   */\n  onMouseWheel_(e) {\n    // Don't scroll or zoom anything if drag is in progress.\n    if (Gesture.inProgress()) {\n      e.preventDefault();\n      e.stopPropagation();\n      return;\n    }\n    const canWheelZoom =\n        this.options.zoomOptions && this.options.zoomOptions.wheel;\n    const canWheelMove =\n        this.options.moveOptions && this.options.moveOptions.wheel;\n    if (!canWheelZoom && !canWheelMove) {\n      return;\n    }\n\n    const scrollDelta = browserEvents.getScrollDeltaPixels(e);\n\n    // Zoom should also be enabled by the command key on Mac devices,\n    // but not super on Unix.\n    let commandKey;\n    if (userAgent.MAC) {\n      commandKey = e.metaKey;\n    }\n\n    if (canWheelZoom && (e.ctrlKey || commandKey || !canWheelMove)) {\n      // Zoom.\n      // The vertical scroll distance that corresponds to a click of a zoom\n      // button.\n      const PIXELS_PER_ZOOM_STEP = 50;\n      const delta = -scrollDelta.y / PIXELS_PER_ZOOM_STEP;\n      const position = browserEvents.mouseToSvg(\n          e, this.getParentSvg(), this.getInverseScreenCTM());\n      this.zoom(position.x, position.y, delta);\n    } else {\n      // Scroll.\n      let x = this.scrollX - scrollDelta.x;\n      let y = this.scrollY - scrollDelta.y;\n\n      if (e.shiftKey && !scrollDelta.x) {\n        // Scroll horizontally (based on vertical scroll delta).\n        // This is needed as for some browser/system combinations which do not\n        // set deltaX.\n        x = this.scrollX - scrollDelta.y;\n        y = this.scrollY;  // Don't scroll vertically.\n      }\n      this.scroll(x, y);\n    }\n    e.preventDefault();\n  }\n\n  /**\n   * Calculate the bounding box for the blocks on the workspace.\n   * Coordinate system: workspace coordinates.\n   *\n   * @return {!Rect} Contains the position and size of the\n   *   bounding box containing the blocks on the workspace.\n   */\n  getBlocksBoundingBox() {\n    const topElements = this.getTopBoundedElements();\n    // There are no blocks, return empty rectangle.\n    if (!topElements.length) {\n      return new Rect(0, 0, 0, 0);\n    }\n\n    // Initialize boundary using the first block.\n    const boundary = topElements[0].getBoundingRectangle();\n\n    // Start at 1 since the 0th block was used for initialization.\n    for (let i = 1; i < topElements.length; i++) {\n      const topElement = topElements[i];\n      if (topElement.isInsertionMarker && topElement.isInsertionMarker()) {\n        continue;\n      }\n      const blockBoundary = topElement.getBoundingRectangle();\n      if (blockBoundary.top < boundary.top) {\n        boundary.top = blockBoundary.top;\n      }\n      if (blockBoundary.bottom > boundary.bottom) {\n        boundary.bottom = blockBoundary.bottom;\n      }\n      if (blockBoundary.left < boundary.left) {\n        boundary.left = blockBoundary.left;\n      }\n      if (blockBoundary.right > boundary.right) {\n        boundary.right = blockBoundary.right;\n      }\n    }\n    return boundary;\n  }\n\n  /**\n   * Clean up the workspace by ordering all the blocks in a column.\n   */\n  cleanUp() {\n    this.setResizesEnabled(false);\n    eventUtils.setGroup(true);\n    const topBlocks = this.getTopBlocks(true);\n    let cursorY = 0;\n    for (let i = 0, block; (block = topBlocks[i]); i++) {\n      if (!block.isMovable()) {\n        continue;\n      }\n      const xy = block.getRelativeToSurfaceXY();\n      block.moveBy(-xy.x, cursorY - xy.y);\n      block.snapToGrid();\n      cursorY = block.getRelativeToSurfaceXY().y +\n          block.getHeightWidth().height +\n          this.renderer_.getConstants().MIN_BLOCK_HEIGHT;\n    }\n    eventUtils.setGroup(false);\n    this.setResizesEnabled(true);\n  }\n\n  /**\n   * Show the context menu for the workspace.\n   * @param {!Event} e Mouse event.\n   * @package\n   */\n  showContextMenu(e) {\n    if (this.options.readOnly || this.isFlyout) {\n      return;\n    }\n    const menuOptions = ContextMenuRegistry.registry.getContextMenuOptions(\n        ContextMenuRegistry.ScopeType.WORKSPACE, {workspace: this});\n\n    // Allow the developer to add or modify menuOptions.\n    if (this.configureContextMenu) {\n      this.configureContextMenu(menuOptions, e);\n    }\n\n    ContextMenu.show(e, menuOptions, this.RTL);\n  }\n\n  /**\n   * Modify the block tree on the existing toolbox.\n   * @param {?toolbox.ToolboxDefinition} toolboxDef\n   *    DOM tree of toolbox contents, string of toolbox contents, or JSON\n   *    representing toolbox definition.\n   */\n  updateToolbox(toolboxDef) {\n    const parsedToolboxDef = toolbox.convertToolboxDefToJson(toolboxDef);\n\n    if (!parsedToolboxDef) {\n      if (this.options.languageTree) {\n        throw Error('Can\\'t nullify an existing toolbox.');\n      }\n      return;  // No change (null to null).\n    }\n    if (!this.options.languageTree) {\n      throw Error('Existing toolbox is null.  Can\\'t create new toolbox.');\n    }\n\n    if (toolbox.hasCategories(parsedToolboxDef)) {\n      if (!this.toolbox_) {\n        throw Error('Existing toolbox has no categories.  Can\\'t change mode.');\n      }\n      this.options.languageTree = parsedToolboxDef;\n      this.toolbox_.render(parsedToolboxDef);\n    } else {\n      if (!this.flyout_) {\n        throw Error('Existing toolbox has categories.  Can\\'t change mode.');\n      }\n      this.options.languageTree = parsedToolboxDef;\n      this.flyout_.show(parsedToolboxDef);\n    }\n  }\n\n  /**\n   * Mark this workspace as the currently focused main workspace.\n   */\n  markFocused() {\n    if (this.options.parentWorkspace) {\n      this.options.parentWorkspace.markFocused();\n    } else {\n      common.setMainWorkspace(this);\n      // We call e.preventDefault in many event handlers which means we\n      // need to explicitly grab focus (e.g from a textarea) because\n      // the browser will not do it for us.  How to do this is browser\n      // dependent.\n      this.setBrowserFocus();\n    }\n  }\n\n  /**\n   * Set the workspace to have focus in the browser.\n   * @private\n   */\n  setBrowserFocus() {\n    // Blur whatever was focused since explicitly grabbing focus below does not\n    // work in Edge.\n    // In IE, SVGs can't be blurred or focused. Check to make sure the current\n    // focus can be blurred before doing so.\n    // See https://github.com/google/blockly/issues/4440\n    if (document.activeElement && document.activeElement.blur) {\n      document.activeElement.blur();\n    }\n    try {\n      // Focus the workspace SVG - this is for Chrome and Firefox.\n      this.getParentSvg().focus({preventScroll: true});\n    } catch (e) {\n      // IE and Edge do not support focus on SVG elements. When that fails\n      // above, get the injectionDiv (the workspace's parent) and focus that\n      // instead.  This doesn't work in Chrome.\n      try {\n        // In IE11, use setActive (which is IE only) so the page doesn't scroll\n        // to the workspace gaining focus.\n        this.getParentSvg().parentNode.setActive();\n      } catch (e) {\n        // setActive support was discontinued in Edge so when that fails, call\n        // focus instead.\n        this.getParentSvg().parentNode.focus({preventScroll: true});\n      }\n    }\n  }\n\n  /**\n   * Zooms the workspace in or out relative to/centered on the given (x, y)\n   * coordinate.\n   * @param {number} x X coordinate of center, in pixel units relative to the\n   *     top-left corner of the parentSVG.\n   * @param {number} y Y coordinate of center, in pixel units relative to the\n   *     top-left corner of the parentSVG.\n   * @param {number} amount Amount of zooming. The formula for the new scale\n   *     is newScale = currentScale * (scaleSpeed^amount). scaleSpeed is set in\n   *     the workspace options. Negative amount values zoom out, and positive\n   *     amount values zoom in.\n   */\n  zoom(x, y, amount) {\n    // Scale factor.\n    const speed = this.options.zoomOptions.scaleSpeed;\n    let scaleChange = Math.pow(speed, amount);\n    const newScale = this.scale * scaleChange;\n    if (this.scale === newScale) {\n      return;  // No change in zoom.\n    }\n\n    // Clamp scale within valid range.\n    if (newScale > this.options.zoomOptions.maxScale) {\n      scaleChange = this.options.zoomOptions.maxScale / this.scale;\n    } else if (newScale < this.options.zoomOptions.minScale) {\n      scaleChange = this.options.zoomOptions.minScale / this.scale;\n    }\n\n    // Transform the x/y coordinates from the parentSVG's space into the\n    // canvas' space, so that they are in workspace units relative to the top\n    // left of the visible portion of the workspace.\n    let matrix = this.getCanvas().getCTM();\n    let center = this.getParentSvg().createSVGPoint();\n    center.x = x;\n    center.y = y;\n    center = center.matrixTransform(matrix.inverse());\n    x = center.x;\n    y = center.y;\n\n    // Find the new scrollX/scrollY so that the center remains in the same\n    // position (relative to the center) after we zoom.\n    // newScale and matrix.a should be identical (within a rounding error).\n    matrix = matrix.translate(x * (1 - scaleChange), y * (1 - scaleChange))\n                 .scale(scaleChange);\n    // scrollX and scrollY are in pixels.\n    // The scrollX and scrollY still need to have absoluteLeft and absoluteTop\n    // subtracted from them, but we'll leave that for setScale so that they're\n    // correctly updated for the new flyout size if we have a simple toolbox.\n    this.scrollX = matrix.e;\n    this.scrollY = matrix.f;\n    this.setScale(newScale);\n  }\n\n  /**\n   * Zooming the blocks centered in the center of view with zooming in or out.\n   * @param {number} type Type of zooming (-1 zooming out and 1 zooming in).\n   */\n  zoomCenter(type) {\n    const metrics = this.getMetrics();\n    let x;\n    let y;\n    if (this.flyout_) {\n      // If you want blocks in the center of the view (visible portion of the\n      // workspace) to stay centered when the size of the view decreases (i.e.\n      // when the size of the flyout increases) you need the center of the\n      // *blockly div* to stay in the same pixel-position.\n      // Note: This only works because of how scrollCenter positions blocks.\n      x = metrics.svgWidth ? metrics.svgWidth / 2 : 0;\n      y = metrics.svgHeight ? metrics.svgHeight / 2 : 0;\n    } else {\n      x = (metrics.viewWidth / 2) + metrics.absoluteLeft;\n      y = (metrics.viewHeight / 2) + metrics.absoluteTop;\n    }\n    this.zoom(x, y, type);\n  }\n\n  /**\n   * Zoom the blocks to fit in the workspace if possible.\n   */\n  zoomToFit() {\n    if (!this.isMovable()) {\n      console.warn(\n          'Tried to move a non-movable workspace. This could result' +\n          ' in blocks becoming inaccessible.');\n      return;\n    }\n\n    const metrics = this.getMetrics();\n    let workspaceWidth = metrics.viewWidth;\n    let workspaceHeight = metrics.viewHeight;\n    const blocksBox = this.getBlocksBoundingBox();\n    let blocksWidth = blocksBox.right - blocksBox.left;\n    let blocksHeight = blocksBox.bottom - blocksBox.top;\n    if (!blocksWidth) {\n      return;  // Prevents zooming to infinity.\n    }\n    if (this.flyout_) {\n      // We have to add the flyout size to both the workspace size and the\n      // block size because the blocks we want to resize include the blocks in\n      // the flyout, and the area we want to fit them includes the portion of\n      // the workspace that is behind the flyout.\n      if (this.horizontalLayout) {\n        workspaceHeight += this.flyout_.getHeight();\n        // Convert from pixels to workspace coordinates.\n        blocksHeight += this.flyout_.getHeight() / this.scale;\n      } else {\n        workspaceWidth += this.flyout_.getWidth();\n        // Convert from pixels to workspace coordinates.\n        blocksWidth += this.flyout_.getWidth() / this.scale;\n      }\n    }\n\n    // Scale Units: (pixels / workspaceUnit)\n    const ratioX = workspaceWidth / blocksWidth;\n    const ratioY = workspaceHeight / blocksHeight;\n    eventUtils.disable();\n    try {\n      this.setScale(Math.min(ratioX, ratioY));\n      this.scrollCenter();\n    } finally {\n      eventUtils.enable();\n    }\n    this.maybeFireViewportChangeEvent();\n  }\n\n  /**\n   * Add a transition class to the block and bubble canvas, to animate any\n   * transform changes.\n   * @package\n   */\n  beginCanvasTransition() {\n    dom.addClass(\n        /** @type {!SVGElement} */ (this.svgBlockCanvas_),\n        'blocklyCanvasTransitioning');\n    dom.addClass(\n        /** @type {!SVGElement} */ (this.svgBubbleCanvas_),\n        'blocklyCanvasTransitioning');\n  }\n\n  /**\n   * Remove transition class from the block and bubble canvas.\n   * @package\n   */\n  endCanvasTransition() {\n    dom.removeClass(\n        /** @type {!SVGElement} */ (this.svgBlockCanvas_),\n        'blocklyCanvasTransitioning');\n    dom.removeClass(\n        /** @type {!SVGElement} */ (this.svgBubbleCanvas_),\n        'blocklyCanvasTransitioning');\n  }\n\n  /**\n   * Center the workspace.\n   */\n  scrollCenter() {\n    if (!this.isMovable()) {\n      console.warn(\n          'Tried to move a non-movable workspace. This could result' +\n          ' in blocks becoming inaccessible.');\n      return;\n    }\n\n    const metrics = this.getMetrics();\n    let x = (metrics.scrollWidth - metrics.viewWidth) / 2;\n    let y = (metrics.scrollHeight - metrics.viewHeight) / 2;\n\n    // Convert from workspace directions to canvas directions.\n    x = -x - metrics.scrollLeft;\n    y = -y - metrics.scrollTop;\n    this.scroll(x, y);\n  }\n\n  /**\n   * Scroll the workspace to center on the given block. If the block has other\n   * blocks stacked below it, the workspace will be centered on the stack.\n   * @param {?string} id ID of block center on.\n   * @public\n   */\n  centerOnBlock(id) {\n    if (!this.isMovable()) {\n      console.warn(\n          'Tried to move a non-movable workspace. This could result' +\n          ' in blocks becoming inaccessible.');\n      return;\n    }\n\n    const block = id ? this.getBlockById(id) : null;\n    if (!block) {\n      return;\n    }\n\n    // XY is in workspace coordinates.\n    const xy = block.getRelativeToSurfaceXY();\n    // Height/width is in workspace units.\n    const heightWidth = block.getHeightWidth();\n\n    // Find the enter of the block in workspace units.\n    const blockCenterY = xy.y + heightWidth.height / 2;\n\n    // In RTL the block's position is the top right of the block, not top left.\n    const multiplier = this.RTL ? -1 : 1;\n    const blockCenterX = xy.x + (multiplier * heightWidth.width / 2);\n\n    // Workspace scale, used to convert from workspace coordinates to pixels.\n    const scale = this.scale;\n\n    // Center of block in pixels, relative to workspace origin (center 0,0).\n    // Scrolling to here would put the block in the top-left corner of the\n    // visible workspace.\n    const pixelX = blockCenterX * scale;\n    const pixelY = blockCenterY * scale;\n\n    const metrics = this.getMetrics();\n\n    // viewHeight and viewWidth are in pixels.\n    const halfViewWidth = metrics.viewWidth / 2;\n    const halfViewHeight = metrics.viewHeight / 2;\n\n    // Put the block in the center of the visible workspace instead.\n    const scrollToCenterX = pixelX - halfViewWidth;\n    const scrollToCenterY = pixelY - halfViewHeight;\n\n    // Convert from workspace directions to canvas directions.\n    const x = -scrollToCenterX;\n    const y = -scrollToCenterY;\n\n    this.scroll(x, y);\n  }\n\n  /**\n   * Set the workspace's zoom factor.\n   * @param {number} newScale Zoom factor. Units: (pixels / workspaceUnit).\n   */\n  setScale(newScale) {\n    if (this.options.zoomOptions.maxScale &&\n        newScale > this.options.zoomOptions.maxScale) {\n      newScale = this.options.zoomOptions.maxScale;\n    } else if (\n        this.options.zoomOptions.minScale &&\n        newScale < this.options.zoomOptions.minScale) {\n      newScale = this.options.zoomOptions.minScale;\n    }\n    this.scale = newScale;\n\n    this.hideChaff(false);\n    // Get the flyout, if any, whether our own or owned by the toolbox.\n    const flyout = this.getFlyout(false);\n    if (flyout && flyout.isVisible()) {\n      flyout.reflow();\n      this.recordDragTargets();\n    }\n    if (this.grid_) {\n      this.grid_.update(this.scale);\n    }\n\n    // We call scroll instead of scrollbar.resize() so that we can center the\n    // zoom correctly without scrollbars, but scroll does not resize the\n    // scrollbars so we have to call resizeView/resizeContent as well.\n    const metrics = this.getMetrics();\n\n    this.scrollX -= metrics.absoluteLeft;\n    this.scrollY -= metrics.absoluteTop;\n    // The scroll values and the view values are additive inverses of\n    // each other, so when we subtract from one we have to add to the other.\n    metrics.viewLeft += metrics.absoluteLeft;\n    metrics.viewTop += metrics.absoluteTop;\n\n    this.scroll(this.scrollX, this.scrollY);\n    if (this.scrollbar) {\n      if (this.flyout_) {\n        this.scrollbar.resizeView(metrics);\n      } else {\n        this.scrollbar.resizeContent(metrics);\n      }\n    }\n  }\n\n  /**\n   * Get the workspace's zoom factor.  If the workspace has a parent, we call\n   * into the parent to get the workspace scale.\n   * @return {number} The workspace zoom factor. Units: (pixels /\n   *     workspaceUnit).\n   */\n  getScale() {\n    if (this.options.parentWorkspace) {\n      return this.options.parentWorkspace.getScale();\n    }\n    return this.scale;\n  }\n\n  /**\n   * Scroll the workspace to a specified offset (in pixels), keeping in the\n   * workspace bounds. See comment on workspaceSvg.scrollX for more detail on\n   * the meaning of these values.\n   * @param {number} x Target X to scroll to.\n   * @param {number} y Target Y to scroll to.\n   * @package\n   */\n  scroll(x, y) {\n    this.hideChaff(/* opt_onlyClosePopups= */ true);\n\n    // Keep scrolling within the bounds of the content.\n    const metrics = this.getMetrics();\n    // Canvas coordinates (aka scroll coordinates) have inverse directionality\n    // to workspace coordinates so we have to inverse them.\n    x = Math.min(x, -metrics.scrollLeft);\n    y = Math.min(y, -metrics.scrollTop);\n    const maxXDisplacement =\n        Math.max(0, metrics.scrollWidth - metrics.viewWidth);\n    const maxXScroll = metrics.scrollLeft + maxXDisplacement;\n    const maxYDisplacement =\n        Math.max(0, metrics.scrollHeight - metrics.viewHeight);\n    const maxYScroll = metrics.scrollTop + maxYDisplacement;\n    x = Math.max(x, -maxXScroll);\n    y = Math.max(y, -maxYScroll);\n    this.scrollX = x;\n    this.scrollY = y;\n\n    if (this.scrollbar) {\n      // The content position (displacement from the content's top-left to the\n      // origin) plus the scroll position (displacement from the view's top-left\n      // to the origin) gives us the distance from the view's top-left to the\n      // content's top-left. Then we negate this so we get the displacement from\n      // the content's top-left to the view's top-left, matching the\n      // directionality of the scrollbars.\n      this.scrollbar.set(\n          -(x + metrics.scrollLeft), -(y + metrics.scrollTop), false);\n    }\n    // We have to shift the translation so that when the canvas is at 0, 0 the\n    // workspace origin is not underneath the toolbox.\n    x += metrics.absoluteLeft;\n    y += metrics.absoluteTop;\n    this.translate(x, y);\n  }\n\n  /**\n   * Find the block on this workspace with the specified ID.\n   * @param {string} id ID of block to find.\n   * @return {?BlockSvg} The sought after block, or null if not found.\n   * @override\n   */\n  getBlockById(id) {\n    return /** @type {BlockSvg} */ (super.getBlockById(id));\n  }\n\n  /**\n   * Find all blocks in workspace.  Blocks are optionally sorted\n   * by position; top to bottom (with slight LTR or RTL bias).\n   * @param {boolean} ordered Sort the list if true.\n   * @return {!Array<!BlockSvg>} Array of blocks.\n   */\n  getAllBlocks(ordered) {\n    return /** @type {!Array<!BlockSvg>} */ (super.getAllBlocks(ordered));\n  }\n\n  /**\n   * Finds the top-level blocks and returns them.  Blocks are optionally sorted\n   * by position; top to bottom (with slight LTR or RTL bias).\n   * @param {boolean} ordered Sort the list if true.\n   * @return {!Array<!BlockSvg>} The top-level block objects.\n   * @override\n   */\n  getTopBlocks(ordered) {\n    return super.getTopBlocks(ordered);\n  }\n\n  /**\n   * Adds a block to the list of top blocks.\n   * @param {!Block} block Block to add.\n   */\n  addTopBlock(block) {\n    this.addTopBoundedElement(/** @type {!BlockSvg} */ (block));\n    super.addTopBlock(block);\n  }\n\n  /**\n   * Removes a block from the list of top blocks.\n   * @param {!Block} block Block to remove.\n   */\n  removeTopBlock(block) {\n    this.removeTopBoundedElement(/** @type {!BlockSvg} */ (block));\n    super.removeTopBlock(block);\n  }\n\n  /**\n   * Adds a comment to the list of top comments.\n   * @param {!WorkspaceComment} comment comment to add.\n   */\n  addTopComment(comment) {\n    this.addTopBoundedElement(\n        /** @type {!WorkspaceCommentSvg} */ (comment));\n    super.addTopComment(comment);\n  }\n\n  /**\n   * Removes a comment from the list of top comments.\n   * @param {!WorkspaceComment} comment comment to remove.\n   */\n  removeTopComment(comment) {\n    this.removeTopBoundedElement(\n        /** @type {!WorkspaceCommentSvg} */ (comment));\n    super.removeTopComment(comment);\n  }\n\n  /**\n   * Adds a bounded element to the list of top bounded elements.\n   * @param {!IBoundedElement} element Bounded element to add.\n   */\n  addTopBoundedElement(element) {\n    this.topBoundedElements_.push(element);\n  }\n\n  /**\n   * Removes a bounded element from the list of top bounded elements.\n   * @param {!IBoundedElement} element Bounded element to remove.\n   */\n  removeTopBoundedElement(element) {\n    arrayUtils.removeElem(this.topBoundedElements_, element);\n  }\n\n  /**\n   * Finds the top-level bounded elements and returns them.\n   * @return {!Array<!IBoundedElement>} The top-level bounded elements.\n   */\n  getTopBoundedElements() {\n    return [].concat(this.topBoundedElements_);\n  }\n\n  /**\n   * Update whether this workspace has resizes enabled.\n   * If enabled, workspace will resize when appropriate.\n   * If disabled, workspace will not resize until re-enabled.\n   * Use to avoid resizing during a batch operation, for performance.\n   * @param {boolean} enabled Whether resizes should be enabled.\n   */\n  setResizesEnabled(enabled) {\n    const reenabled = (!this.resizesEnabled_ && enabled);\n    this.resizesEnabled_ = enabled;\n    if (reenabled) {\n      // Newly enabled.  Trigger a resize.\n      this.resizeContents();\n    }\n  }\n\n  /**\n   * Dispose of all blocks in workspace, with an optimization to prevent\n   * resizes.\n   */\n  clear() {\n    this.setResizesEnabled(false);\n    super.clear();\n    this.topBoundedElements_ = [];\n    this.setResizesEnabled(true);\n  }\n\n  /**\n   * Register a callback function associated with a given key, for clicks on\n   * buttons and labels in the flyout.\n   * For instance, a button specified by the XML\n   * <button text=\"create variable\" callbackKey=\"CREATE_VARIABLE\"></button>\n   * should be matched by a call to\n   * registerButtonCallback(\"CREATE_VARIABLE\", yourCallbackFunction).\n   * @param {string} key The name to use to look up this function.\n   * @param {function(!FlyoutButton)} func The function to call when the\n   *     given button is clicked.\n   */\n  registerButtonCallback(key, func) {\n    if (typeof func !== 'function') {\n      throw TypeError('Button callbacks must be functions.');\n    }\n    this.flyoutButtonCallbacks_[key] = func;\n  }\n\n  /**\n   * Get the callback function associated with a given key, for clicks on\n   * buttons and labels in the flyout.\n   * @param {string} key The name to use to look up the function.\n   * @return {?function(!FlyoutButton)} The function corresponding to the\n   *     given key for this workspace; null if no callback is registered.\n   */\n  getButtonCallback(key) {\n    const result = this.flyoutButtonCallbacks_[key];\n    return result ? result : null;\n  }\n\n  /**\n   * Remove a callback for a click on a button in the flyout.\n   * @param {string} key The name associated with the callback function.\n   */\n  removeButtonCallback(key) {\n    this.flyoutButtonCallbacks_[key] = null;\n  }\n\n  /**\n   * Register a callback function associated with a given key, for populating\n   * custom toolbox categories in this workspace.  See the variable and\n   * procedure categories as an example.\n   * @param {string} key The name to use to look up this function.\n   * @param {function(!WorkspaceSvg): !toolbox.FlyoutDefinition} func The\n   *     function to call when the given toolbox category is opened.\n   */\n  registerToolboxCategoryCallback(key, func) {\n    if (typeof func !== 'function') {\n      throw TypeError('Toolbox category callbacks must be functions.');\n    }\n    this.toolboxCategoryCallbacks_[key] = func;\n  }\n\n  /**\n   * Get the callback function associated with a given key, for populating\n   * custom toolbox categories in this workspace.\n   * @param {string} key The name to use to look up the function.\n   * @return {?function(!WorkspaceSvg): !toolbox.FlyoutDefinition} The function\n   *     corresponding to the given key for this workspace, or null if no\n   * function is registered.\n   */\n  getToolboxCategoryCallback(key) {\n    return this.toolboxCategoryCallbacks_[key] || null;\n  }\n\n  /**\n   * Remove a callback for a click on a custom category's name in the toolbox.\n   * @param {string} key The name associated with the callback function.\n   */\n  removeToolboxCategoryCallback(key) {\n    this.toolboxCategoryCallbacks_[key] = null;\n  }\n\n  /**\n   * Look up the gesture that is tracking this touch stream on this workspace.\n   * May create a new gesture.\n   * @param {!Event} e Mouse event or touch event.\n   * @return {?TouchGesture} The gesture that is tracking this touch\n   *     stream, or null if no valid gesture exists.\n   * @package\n   */\n  getGesture(e) {\n    const isStart =\n        (e.type === 'mousedown' || e.type === 'touchstart' ||\n         e.type === 'pointerdown');\n\n    const gesture = this.currentGesture_;\n    if (gesture) {\n      if (isStart && gesture.hasStarted()) {\n        console.warn('Tried to start the same gesture twice.');\n        // That's funny.  We must have missed a mouse up.\n        // Cancel it, rather than try to retrieve all of the state we need.\n        gesture.cancel();\n        return null;\n      }\n      return gesture;\n    }\n\n    // No gesture existed on this workspace, but this looks like the start of a\n    // new gesture.\n    if (isStart) {\n      this.currentGesture_ = new TouchGesture(e, this);\n      return this.currentGesture_;\n    }\n    // No gesture existed and this event couldn't be the start of a new gesture.\n    return null;\n  }\n\n  /**\n   * Clear the reference to the current gesture.\n   * @package\n   */\n  clearGesture() {\n    this.currentGesture_ = null;\n  }\n\n  /**\n   * Cancel the current gesture, if one exists.\n   * @package\n   */\n  cancelCurrentGesture() {\n    if (this.currentGesture_) {\n      this.currentGesture_.cancel();\n    }\n  }\n\n  /**\n   * Get the audio manager for this workspace.\n   * @return {!WorkspaceAudio} The audio manager for this workspace.\n   */\n  getAudioManager() {\n    return this.audioManager_;\n  }\n\n  /**\n   * Get the grid object for this workspace, or null if there is none.\n   * @return {?Grid} The grid object for this workspace.\n   * @package\n   */\n  getGrid() {\n    return this.grid_;\n  }\n\n  /**\n   * Close tooltips, context menus, dropdown selections, etc.\n   * @param {boolean=} opt_onlyClosePopups Whether only popups should be closed.\n   */\n  hideChaff(opt_onlyClosePopups) {\n    Tooltip.hide();\n    WidgetDiv.hide();\n    dropDownDiv.hideWithoutAnimation();\n\n    const onlyClosePopups = !!opt_onlyClosePopups;\n    const autoHideables = this.getComponentManager().getComponents(\n        ComponentManager.Capability.AUTOHIDEABLE, true);\n    autoHideables.forEach(\n        (autoHideable) => autoHideable.autoHide(onlyClosePopups));\n  }\n\n  /**\n   * Sets the X/Y translations of a top level workspace.\n   * @param {!Object} xyRatio Contains an x and/or y property which is a float\n   *     between 0 and 1 specifying the degree of scrolling.\n   * @private\n   * @this {WorkspaceSvg}\n   */\n  static setTopLevelWorkspaceMetrics_(xyRatio) {\n    const metrics = this.getMetrics();\n\n    if (typeof xyRatio.x === 'number') {\n      this.scrollX =\n          -(metrics.scrollLeft +\n            (metrics.scrollWidth - metrics.viewWidth) * xyRatio.x);\n    }\n    if (typeof xyRatio.y === 'number') {\n      this.scrollY =\n          -(metrics.scrollTop +\n            (metrics.scrollHeight - metrics.viewHeight) * xyRatio.y);\n    }\n    // We have to shift the translation so that when the canvas is at 0, 0 the\n    // workspace origin is not underneath the toolbox.\n    const x = this.scrollX + metrics.absoluteLeft;\n    const y = this.scrollY + metrics.absoluteTop;\n    // We could call scroll here, but that has extra checks we don't need to do.\n    this.translate(x, y);\n  }\n}\n\n/**\n * Size the workspace when the contents change.  This also updates\n * scrollbars accordingly.\n * @param {!WorkspaceSvg} workspace The workspace to resize.\n * @alias Blockly.WorkspaceSvg.resizeSvgContents\n */\nconst resizeSvgContents = function(workspace) {\n  workspace.resizeContents();\n};\nexports.resizeSvgContents = resizeSvgContents;\n\nexports.WorkspaceSvg = WorkspaceSvg;\n","/**\n * @license\n * Copyright 2011 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Functions for injecting Blockly into a web page.\n */\n'use strict';\n\n/**\n * Functions for injecting Blockly into a web page.\n * @namespace Blockly.inject\n */\ngoog.module('Blockly.inject');\n\nconst Css = goog.require('Blockly.Css');\nconst Tooltip = goog.require('Blockly.Tooltip');\nconst Touch = goog.require('Blockly.Touch');\nconst WidgetDiv = goog.require('Blockly.WidgetDiv');\nconst aria = goog.require('Blockly.utils.aria');\nconst browserEvents = goog.require('Blockly.browserEvents');\nconst bumpObjects = goog.require('Blockly.bumpObjects');\nconst common = goog.require('Blockly.common');\nconst dom = goog.require('Blockly.utils.dom');\nconst dropDownDiv = goog.require('Blockly.dropDownDiv');\nconst userAgent = goog.require('Blockly.utils.userAgent');\nconst {BlockDragSurfaceSvg} = goog.require('Blockly.BlockDragSurfaceSvg');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlocklyOptions} = goog.requireType('Blockly.BlocklyOptions');\nconst {Grid} = goog.require('Blockly.Grid');\nconst {Msg} = goog.require('Blockly.Msg');\nconst {Options} = goog.require('Blockly.Options');\nconst {ScrollbarPair} = goog.require('Blockly.ScrollbarPair');\nconst {ShortcutRegistry} = goog.require('Blockly.ShortcutRegistry');\nconst {Svg} = goog.require('Blockly.utils.Svg');\nconst {WorkspaceDragSurfaceSvg} = goog.require('Blockly.WorkspaceDragSurfaceSvg');\nconst {WorkspaceSvg} = goog.require('Blockly.WorkspaceSvg');\nconst {Workspace} = goog.require('Blockly.Workspace');\n\n\n/**\n * Inject a Blockly editor into the specified container element (usually a div).\n * @param {Element|string} container Containing element, or its ID,\n *     or a CSS selector.\n * @param {BlocklyOptions=} opt_options Optional dictionary of options.\n * @return {!WorkspaceSvg} Newly created main workspace.\n * @alias Blockly.inject\n */\nconst inject = function(container, opt_options) {\n  if (typeof container === 'string') {\n    container =\n        document.getElementById(container) || document.querySelector(container);\n  }\n  // Verify that the container is in document.\n  if (!container || !dom.containsNode(document, container)) {\n    throw Error('Error: container is not in current document.');\n  }\n  const options =\n      new Options(opt_options || (/** @type {!BlocklyOptions} */ ({})));\n  const subContainer =\n      /** @type {!HTMLDivElement} */ (document.createElement('div'));\n  subContainer.className = 'injectionDiv';\n  subContainer.tabIndex = 0;\n  aria.setState(subContainer, aria.State.LABEL, Msg['WORKSPACE_ARIA_LABEL']);\n\n  container.appendChild(subContainer);\n  const svg = createDom(subContainer, options);\n\n  // Create surfaces for dragging things. These are optimizations\n  // so that the browser does not repaint during the drag.\n  const blockDragSurface = new BlockDragSurfaceSvg(subContainer);\n\n  const workspaceDragSurface = new WorkspaceDragSurfaceSvg(subContainer);\n\n  const workspace =\n      createMainWorkspace(svg, options, blockDragSurface, workspaceDragSurface);\n\n  init(workspace);\n\n  // Keep focus on the first workspace so entering keyboard navigation looks\n  // correct.\n  common.setMainWorkspace(workspace);\n\n  common.svgResize(workspace);\n\n  subContainer.addEventListener('focusin', function() {\n    common.setMainWorkspace(workspace);\n  });\n\n  return workspace;\n};\n\n/**\n * Create the SVG image.\n * @param {!Element} container Containing element.\n * @param {!Options} options Dictionary of options.\n * @return {!Element} Newly created SVG image.\n */\nconst createDom = function(container, options) {\n  // Sadly browsers (Chrome vs Firefox) are currently inconsistent in laying\n  // out content in RTL mode.  Therefore Blockly forces the use of LTR,\n  // then manually positions content in RTL as needed.\n  container.setAttribute('dir', 'LTR');\n\n  // Load CSS.\n  Css.inject(options.hasCss, options.pathToMedia);\n\n  // Build the SVG DOM.\n  /*\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    xmlns:html=\"http://www.w3.org/1999/xhtml\"\n    xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n    version=\"1.1\"\n    class=\"blocklySvg\">\n    ...\n  </svg>\n  */\n  const svg = dom.createSvgElement(\n      Svg.SVG, {\n        'xmlns': dom.SVG_NS,\n        'xmlns:html': dom.HTML_NS,\n        'xmlns:xlink': dom.XLINK_NS,\n        'version': '1.1',\n        'class': 'blocklySvg',\n        'tabindex': '0',\n      },\n      container);\n  /*\n  <defs>\n    ... filters go here ...\n  </defs>\n  */\n  const defs = dom.createSvgElement(Svg.DEFS, {}, svg);\n  // Each filter/pattern needs a unique ID for the case of multiple Blockly\n  // instances on a page.  Browser behaviour becomes undefined otherwise.\n  // https://neil.fraser.name/news/2015/11/01/\n  const rnd = String(Math.random()).substring(2);\n\n  options.gridPattern = Grid.createDom(rnd, options.gridOptions, defs);\n  return svg;\n};\n\n/**\n * Create a main workspace and add it to the SVG.\n * @param {!Element} svg SVG element with pattern defined.\n * @param {!Options} options Dictionary of options.\n * @param {!BlockDragSurfaceSvg} blockDragSurface Drag surface SVG\n *     for the blocks.\n * @param {!WorkspaceDragSurfaceSvg} workspaceDragSurface Drag surface\n *     SVG for the workspace.\n * @return {!WorkspaceSvg} Newly created main workspace.\n */\nconst createMainWorkspace = function(\n    svg, options, blockDragSurface, workspaceDragSurface) {\n  options.parentWorkspace = null;\n  const mainWorkspace =\n      new WorkspaceSvg(options, blockDragSurface, workspaceDragSurface);\n  const wsOptions = mainWorkspace.options;\n  mainWorkspace.scale = wsOptions.zoomOptions.startScale;\n  svg.appendChild(mainWorkspace.createDom('blocklyMainBackground'));\n\n  // Set the theme name and renderer name onto the injection div.\n  dom.addClass(\n      mainWorkspace.getInjectionDiv(),\n      mainWorkspace.getRenderer().getClassName());\n  dom.addClass(\n      mainWorkspace.getInjectionDiv(), mainWorkspace.getTheme().getClassName());\n\n  if (!wsOptions.hasCategories && wsOptions.languageTree) {\n    // Add flyout as an <svg> that is a sibling of the workspace SVG.\n    const flyout = mainWorkspace.addFlyout(Svg.SVG);\n    dom.insertAfter(flyout, svg);\n  }\n  if (wsOptions.hasTrashcan) {\n    mainWorkspace.addTrashcan();\n  }\n  if (wsOptions.zoomOptions && wsOptions.zoomOptions.controls) {\n    mainWorkspace.addZoomControls();\n  }\n  // Register the workspace svg as a UI component.\n  mainWorkspace.getThemeManager().subscribe(\n      svg, 'workspaceBackgroundColour', 'background-color');\n\n  // A null translation will also apply the correct initial scale.\n  mainWorkspace.translate(0, 0);\n\n  mainWorkspace.addChangeListener(\n      bumpObjects.bumpIntoBoundsHandler(mainWorkspace));\n\n  // The SVG is now fully assembled.\n  common.svgResize(mainWorkspace);\n  WidgetDiv.createDom();\n  dropDownDiv.createDom();\n  Tooltip.createDom();\n  return mainWorkspace;\n};\n\n/**\n * Initialize Blockly with various handlers.\n * @param {!WorkspaceSvg} mainWorkspace Newly created main workspace.\n */\nconst init = function(mainWorkspace) {\n  const options = mainWorkspace.options;\n  const svg = mainWorkspace.getParentSvg();\n\n  // Suppress the browser's context menu.\n  browserEvents.conditionalBind(\n      /** @type {!Element} */ (svg.parentNode), 'contextmenu', null,\n      function(e) {\n        if (!browserEvents.isTargetInput(e)) {\n          e.preventDefault();\n        }\n      });\n\n  const workspaceResizeHandler =\n      browserEvents.conditionalBind(window, 'resize', null, function() {\n        mainWorkspace.hideChaff(true);\n        common.svgResize(mainWorkspace);\n        goog.module.get('Blockly.bumpObjects')\n            .bumpTopObjectsIntoBounds(mainWorkspace);\n      });\n  mainWorkspace.setResizeHandlerWrapper(workspaceResizeHandler);\n\n  bindDocumentEvents();\n\n  if (options.languageTree) {\n    const toolbox = mainWorkspace.getToolbox();\n    const flyout = mainWorkspace.getFlyout(true);\n    if (toolbox) {\n      toolbox.init();\n    } else if (flyout) {\n      // Build a fixed flyout with the root blocks.\n      flyout.init(mainWorkspace);\n      flyout.show(options.languageTree);\n      if (typeof flyout.scrollToStart === 'function') {\n        flyout.scrollToStart();\n      }\n    }\n  }\n\n  if (options.hasTrashcan) {\n    mainWorkspace.trashcan.init();\n  }\n  if (options.zoomOptions && options.zoomOptions.controls) {\n    mainWorkspace.zoomControls_.init();\n  }\n\n  if (options.moveOptions && options.moveOptions.scrollbars) {\n    const horizontalScroll = options.moveOptions.scrollbars === true ||\n        !!options.moveOptions.scrollbars.horizontal;\n    const verticalScroll = options.moveOptions.scrollbars === true ||\n        !!options.moveOptions.scrollbars.vertical;\n    mainWorkspace.scrollbar = new ScrollbarPair(\n        mainWorkspace, horizontalScroll, verticalScroll,\n        'blocklyMainWorkspaceScrollbar');\n    mainWorkspace.scrollbar.resize();\n  } else {\n    mainWorkspace.setMetrics({x: 0.5, y: 0.5});\n  }\n\n  // Load the sounds.\n  if (options.hasSounds) {\n    loadSounds(options.pathToMedia, mainWorkspace);\n  }\n};\n\n/**\n * Handle a key-down on SVG drawing surface. Does nothing if the main workspace\n * is not visible.\n * @param {!KeyboardEvent} e Key down event.\n */\n// TODO (https://github.com/google/blockly/issues/1998) handle cases where there\n// are multiple workspaces and non-main workspaces are able to accept input.\nconst onKeyDown = function(e) {\n  const mainWorkspace =\n      /** @type {!WorkspaceSvg} */ (common.getMainWorkspace());\n  if (!mainWorkspace) {\n    return;\n  }\n\n  if (browserEvents.isTargetInput(e) ||\n      (mainWorkspace.rendered && !mainWorkspace.isVisible())) {\n    // When focused on an HTML text input widget, don't trap any keys.\n    // Ignore keypresses on rendered workspaces that have been explicitly\n    // hidden.\n    return;\n  }\n  ShortcutRegistry.registry.onKeyDown(mainWorkspace, e);\n};\n\n/**\n * Whether event handlers have been bound. Document event handlers will only\n * be bound once, even if Blockly is destroyed and reinjected.\n * @type {boolean}\n */\nlet documentEventsBound = false;\n\n/**\n * Bind document events, but only once.  Destroying and reinjecting Blockly\n * should not bind again.\n * Bind events for scrolling the workspace.\n * Most of these events should be bound to the SVG's surface.\n * However, 'mouseup' has to be on the whole document so that a block dragged\n * out of bounds and released will know that it has been released.\n * Also, 'keydown' has to be on the whole document since the browser doesn't\n * understand a concept of focus on the SVG image.\n */\nconst bindDocumentEvents = function() {\n  if (!documentEventsBound) {\n    browserEvents.conditionalBind(document, 'scroll', null, function() {\n      const workspaces = Workspace.getAll();\n      for (let i = 0, workspace; (workspace = workspaces[i]); i++) {\n        if (workspace.updateInverseScreenCTM) {\n          workspace.updateInverseScreenCTM();\n        }\n      }\n    });\n    browserEvents.conditionalBind(document, 'keydown', null, onKeyDown);\n    // longStop needs to run to stop the context menu from showing up.  It\n    // should run regardless of what other touch event handlers have run.\n    browserEvents.bind(document, 'touchend', null, Touch.longStop);\n    browserEvents.bind(document, 'touchcancel', null, Touch.longStop);\n    // Some iPad versions don't fire resize after portrait to landscape change.\n    if (userAgent.IPAD) {\n      browserEvents.conditionalBind(\n          window, 'orientationchange', document, function() {\n            // TODO (#397): Fix for multiple Blockly workspaces.\n            common.svgResize(/** @type {!WorkspaceSvg} */\n                             (common.getMainWorkspace()));\n          });\n    }\n  }\n  documentEventsBound = true;\n};\n\n/**\n * Load sounds for the given workspace.\n * @param {string} pathToMedia The path to the media directory.\n * @param {!WorkspaceSvg} workspace The workspace to load sounds for.\n */\nconst loadSounds = function(pathToMedia, workspace) {\n  const audioMgr = workspace.getAudioManager();\n  audioMgr.load(\n      [\n        pathToMedia + 'click.mp3',\n        pathToMedia + 'click.wav',\n        pathToMedia + 'click.ogg',\n      ],\n      'click');\n  audioMgr.load(\n      [\n        pathToMedia + 'disconnect.wav',\n        pathToMedia + 'disconnect.mp3',\n        pathToMedia + 'disconnect.ogg',\n      ],\n      'disconnect');\n  audioMgr.load(\n      [\n        pathToMedia + 'delete.mp3',\n        pathToMedia + 'delete.ogg',\n        pathToMedia + 'delete.wav',\n      ],\n      'delete');\n\n  // Bind temporary hooks that preload the sounds.\n  const soundBinds = [];\n  const unbindSounds = function() {\n    while (soundBinds.length) {\n      browserEvents.unbind(soundBinds.pop());\n    }\n    audioMgr.preload();\n  };\n\n  // These are bound on mouse/touch events with\n  // Blockly.browserEvents.conditionalBind, so they restrict the touch\n  // identifier that will be recognized.  But this is really something that\n  // happens on a click, not a drag, so that's not necessary.\n\n  // Android ignores any sound not loaded as a result of a user action.\n  soundBinds.push(browserEvents.conditionalBind(\n      document, 'mousemove', null, unbindSounds, true));\n  soundBinds.push(browserEvents.conditionalBind(\n      document, 'touchstart', null, unbindSounds, true));\n};\n\nexports.inject = inject;\n","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The abstract class for a component with custom behaviour when a\n * block or bubble is dragged over or dropped on top of it.\n */\n\n'use strict';\n\n/**\n * The abstract class for a component with custom behaviour when a\n * block or bubble is dragged over or dropped on top of it.\n * @class\n */\ngoog.module('Blockly.DragTarget');\n\n/* eslint-disable-next-line no-unused-vars */\nconst {IDragTarget} = goog.require('Blockly.IDragTarget');\n/* eslint-disable-next-line no-unused-vars */\nconst {IDraggable} = goog.requireType('Blockly.IDraggable');\n/* eslint-disable-next-line no-unused-vars */\nconst {Rect} = goog.requireType('Blockly.utils.Rect');\n\n\n/**\n * Abstract class for a component with custom behaviour when a block or bubble\n * is dragged over or dropped on top of it.\n * @implements {IDragTarget}\n * @alias Blockly.DragTarget\n */\nclass DragTarget {\n  /**\n   * Handles when a cursor with a block or bubble enters this drag target.\n   * @param {!IDraggable} _dragElement The block or bubble currently being\n   *   dragged.\n   */\n  onDragEnter(_dragElement) {\n    // no-op\n  }\n\n  /**\n   * Handles when a cursor with a block or bubble is dragged over this drag\n   * target.\n   * @param {!IDraggable} _dragElement The block or bubble currently being\n   *   dragged.\n   */\n  onDragOver(_dragElement) {\n    // no-op\n  }\n\n  /**\n   * Handles when a cursor with a block or bubble exits this drag target.\n   * @param {!IDraggable} _dragElement The block or bubble currently being\n   *   dragged.\n   */\n  onDragExit(_dragElement) {\n    // no-op\n  }\n\n  /**\n   * Handles when a block or bubble is dropped on this component.\n   * Should not handle delete here.\n   * @param {!IDraggable} _dragElement The block or bubble currently being\n   *   dragged.\n   */\n  onDrop(_dragElement) {\n    // no-op\n  }\n\n  /**\n   * Returns the bounding rectangle of the drag target area in pixel units\n   * relative to the Blockly injection div.\n   * @return {?Rect} The component's bounding box. Null if drag\n   *   target area should be ignored.\n   */\n  getClientRect() {\n    return null;\n  }\n\n  /**\n   * Returns whether the provided block or bubble should not be moved after\n   * being dropped on this component. If true, the element will return to where\n   * it was when the drag started.\n   * @param {!IDraggable} _dragElement The block or bubble currently being\n   *   dragged.\n   * @return {boolean} Whether the block or bubble provided should be returned\n   *     to drag start.\n   */\n  shouldPreventMove(_dragElement) {\n    return false;\n  }\n}\n\nexports.DragTarget = DragTarget;\n","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The interface for a component that can delete a block or bubble\n * that is dropped on top of it.\n */\n\n'use strict';\n\n/**\n * The interface for a component that can delete a block or bubble\n * that is dropped on top of it.\n * @namespace Blockly.IDeleteArea\n */\ngoog.module('Blockly.IDeleteArea');\n\n/* eslint-disable-next-line no-unused-vars */\nconst {IDragTarget} = goog.require('Blockly.IDragTarget');\n/* eslint-disable-next-line no-unused-vars */\nconst {IDraggable} = goog.requireType('Blockly.IDraggable');\n\n\n/**\n * Interface for a component that can delete a block or bubble that is dropped\n * on top of it.\n * @extends {IDragTarget}\n * @interface\n * @alias Blockly.IDeleteArea\n */\nconst IDeleteArea = function() {};\n\n/**\n * Returns whether the provided block or bubble would be deleted if dropped on\n * this area.\n * This method should check if the element is deletable and is always called\n * before onDragEnter/onDragOver/onDragExit.\n * @param {!IDraggable} element The block or bubble currently being\n *   dragged.\n * @param {boolean} couldConnect Whether the element could could connect to\n *     another.\n * @return {boolean} Whether the element provided would be deleted if dropped on\n *     this area.\n */\nIDeleteArea.prototype.wouldDelete;\n\nexports.IDeleteArea = IDeleteArea;\n","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The abstract class for a component that can delete a block or\n * bubble that is dropped on top of it.\n */\n\n'use strict';\n\n/**\n * The abstract class for a component that can delete a block or\n * bubble that is dropped on top of it.\n * @class\n */\ngoog.module('Blockly.DeleteArea');\n\nconst {BlockSvg} = goog.require('Blockly.BlockSvg');\nconst {DragTarget} = goog.require('Blockly.DragTarget');\n/* eslint-disable-next-line no-unused-vars */\nconst {IDeleteArea} = goog.require('Blockly.IDeleteArea');\n/* eslint-disable-next-line no-unused-vars */\nconst {IDraggable} = goog.requireType('Blockly.IDraggable');\n\n\n/**\n * Abstract class for a component that can delete a block or bubble that is\n * dropped on top of it.\n * @extends {DragTarget}\n * @implements {IDeleteArea}\n * @alias Blockly.DeleteArea\n */\nclass DeleteArea extends DragTarget {\n  /**\n   * Constructor for DeleteArea. Should not be called directly, only by a\n   * subclass.\n   */\n  constructor() {\n    super();\n\n    /**\n     * Whether the last block or bubble dragged over this delete area would be\n     * deleted if dropped on this component.\n     * This property is not updated after the block or bubble is deleted.\n     * @type {boolean}\n     * @protected\n     */\n    this.wouldDelete_ = false;\n  }\n\n  /**\n   * Returns whether the provided block or bubble would be deleted if dropped on\n   * this area.\n   * This method should check if the element is deletable and is always called\n   * before onDragEnter/onDragOver/onDragExit.\n   * @param {!IDraggable} element The block or bubble currently being\n   *   dragged.\n   * @param {boolean} couldConnect Whether the element could could connect to\n   *     another.\n   * @return {boolean} Whether the element provided would be deleted if dropped\n   *     on this area.\n   */\n  wouldDelete(element, couldConnect) {\n    if (element instanceof BlockSvg) {\n      const block = /** @type {BlockSvg} */ (element);\n      const couldDeleteBlock = !block.getParent() && block.isDeletable();\n      this.updateWouldDelete_(couldDeleteBlock && !couldConnect);\n    } else {\n      this.updateWouldDelete_(element.isDeletable());\n    }\n    return this.wouldDelete_;\n  }\n\n  /**\n   * Updates the internal wouldDelete_ state.\n   * @param {boolean} wouldDelete The new value for the wouldDelete state.\n   * @protected\n   */\n  updateWouldDelete_(wouldDelete) {\n    this.wouldDelete_ = wouldDelete;\n  }\n}\n\nexports.DeleteArea = DeleteArea;\n","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Calculates and reports flyout workspace metrics.\n */\n'use strict';\n\n/**\n * Calculates and reports flyout workspace metrics.\n * @class\n */\ngoog.module('Blockly.FlyoutMetricsManager');\n\n/* eslint-disable-next-line no-unused-vars */\nconst {IFlyout} = goog.requireType('Blockly.IFlyout');\nconst {MetricsManager} = goog.require('Blockly.MetricsManager');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceSvg} = goog.requireType('Blockly.WorkspaceSvg');\n\n\n/**\n * Calculates metrics for a flyout's workspace.\n * The metrics are mainly used to size scrollbars for the flyout.\n * @extends {MetricsManager}\n * @alias Blockly.FlyoutMetricsManager\n */\nclass FlyoutMetricsManager extends MetricsManager {\n  /**\n   * @param {!WorkspaceSvg} workspace The flyout's workspace.\n   * @param {!IFlyout} flyout The flyout.\n   */\n  constructor(workspace, flyout) {\n    super(workspace);\n\n    /**\n     * The flyout that owns the workspace to calculate metrics for.\n     * @type {!IFlyout}\n     * @protected\n     */\n    this.flyout_ = flyout;\n  }\n\n  /**\n   * Gets the bounding box of the blocks on the flyout's workspace.\n   * This is in workspace coordinates.\n   * @return {!SVGRect|{height: number, y: number, width: number, x: number}}\n   *     The bounding box of the blocks on the workspace.\n   * @private\n   */\n  getBoundingBox_() {\n    let blockBoundingBox;\n    try {\n      blockBoundingBox = this.workspace_.getCanvas().getBBox();\n    } catch (e) {\n      // Firefox has trouble with hidden elements (Bug 528969).\n      // 2021 Update: It looks like this was fixed around Firefox 77 released in\n      // 2020.\n      blockBoundingBox = {height: 0, y: 0, width: 0, x: 0};\n    }\n    return blockBoundingBox;\n  }\n\n  /**\n   * @override\n   */\n  getContentMetrics(opt_getWorkspaceCoordinates) {\n    // The bounding box is in workspace coordinates.\n    const blockBoundingBox = this.getBoundingBox_();\n    const scale = opt_getWorkspaceCoordinates ? 1 : this.workspace_.scale;\n\n    return {\n      height: blockBoundingBox.height * scale,\n      width: blockBoundingBox.width * scale,\n      top: blockBoundingBox.y * scale,\n      left: blockBoundingBox.x * scale,\n    };\n  }\n\n  /**\n   * @override\n   */\n  getScrollMetrics(\n      opt_getWorkspaceCoordinates, opt_viewMetrics, opt_contentMetrics) {\n    const contentMetrics = opt_contentMetrics || this.getContentMetrics();\n    const margin = this.flyout_.MARGIN * this.workspace_.scale;\n    const scale = opt_getWorkspaceCoordinates ? this.workspace_.scale : 1;\n\n    // The left padding isn't just the margin. Some blocks are also offset by\n    // tabWidth so that value and statement blocks line up.\n    // The contentMetrics.left value is equivalent to the variable left padding.\n    const leftPadding = contentMetrics.left;\n\n    return {\n      height: (contentMetrics.height + 2 * margin) / scale,\n      width: (contentMetrics.width + leftPadding + margin) / scale,\n      top: 0,\n      left: 0,\n    };\n  }\n}\n\nexports.FlyoutMetricsManager = FlyoutMetricsManager;\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The interface for a flyout.\n */\n\n'use strict';\n\n/**\n * The interface for a flyout.\n * @namespace Blockly.IFlyout\n */\ngoog.module('Blockly.IFlyout');\n\n/* eslint-disable-next-line no-unused-vars */\nconst toolbox = goog.requireType('Blockly.utils.toolbox');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockSvg} = goog.requireType('Blockly.BlockSvg');\n/* eslint-disable-next-line no-unused-vars */\nconst {Coordinate} = goog.requireType('Blockly.utils.Coordinate');\n/* eslint-disable-next-line no-unused-vars */\nconst {IRegistrable} = goog.require('Blockly.IRegistrable');\n/* eslint-disable-next-line no-unused-vars */\nconst {Svg} = goog.requireType('Blockly.utils.Svg');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceSvg} = goog.requireType('Blockly.WorkspaceSvg');\n\n\n/**\n * Interface for a flyout.\n * @extends {IRegistrable}\n * @interface\n * @alias Blockly.IFlyout\n */\nconst IFlyout = function() {};\n\n/**\n * Whether the flyout is laid out horizontally or not.\n * @type {boolean}\n */\nIFlyout.prototype.horizontalLayout;\n\n/**\n * Is RTL vs LTR.\n * @type {boolean}\n */\nIFlyout.prototype.RTL;\n\n/**\n * The target workspace\n * @type {?WorkspaceSvg}\n */\nIFlyout.prototype.targetWorkspace;\n\n/**\n * Margin around the edges of the blocks in the flyout.\n * @type {number}\n * @const\n */\nIFlyout.prototype.MARGIN;\n\n/**\n * Does the flyout automatically close when a block is created?\n * @type {boolean}\n */\nIFlyout.prototype.autoClose;\n\n/**\n * Corner radius of the flyout background.\n * @type {number}\n * @const\n */\nIFlyout.prototype.CORNER_RADIUS;\n\n/**\n * Creates the flyout's DOM.  Only needs to be called once.  The flyout can\n * either exist as its own svg element or be a g element nested inside a\n * separate svg element.\n * @param {string|\n * !Svg<!SVGSVGElement>|\n * !Svg<!SVGGElement>} tagName The type of tag to\n *     put the flyout in. This should be <svg> or <g>.\n * @return {!SVGElement} The flyout's SVG group.\n */\nIFlyout.prototype.createDom;\n\n/**\n * Initializes the flyout.\n * @param {!WorkspaceSvg} targetWorkspace The workspace in which to\n *     create new blocks.\n */\nIFlyout.prototype.init;\n\n/**\n * Dispose of this flyout.\n * Unlink from all DOM elements to prevent memory leaks.\n */\nIFlyout.prototype.dispose;\n\n/**\n * Get the width of the flyout.\n * @return {number} The width of the flyout.\n */\nIFlyout.prototype.getWidth;\n\n/**\n * Get the height of the flyout.\n * @return {number} The width of the flyout.\n */\nIFlyout.prototype.getHeight;\n\n/**\n * Get the workspace inside the flyout.\n * @return {!WorkspaceSvg} The workspace inside the flyout.\n */\nIFlyout.prototype.getWorkspace;\n\n/**\n * Is the flyout visible?\n * @return {boolean} True if visible.\n */\nIFlyout.prototype.isVisible;\n\n/**\n * Set whether the flyout is visible. A value of true does not necessarily mean\n * that the flyout is shown. It could be hidden because its container is hidden.\n * @param {boolean} visible True if visible.\n */\nIFlyout.prototype.setVisible;\n\n/**\n * Set whether this flyout's container is visible.\n * @param {boolean} visible Whether the container is visible.\n */\nIFlyout.prototype.setContainerVisible;\n\n/**\n * Hide and empty the flyout.\n */\nIFlyout.prototype.hide;\n\n/**\n * Show and populate the flyout.\n * @param {!toolbox.FlyoutDefinition|string} flyoutDef Contents to\n *     display in the flyout. This is either an array of Nodes, a NodeList, a\n *     toolbox definition, or a string with the name of the dynamic category.\n */\nIFlyout.prototype.show;\n\n/**\n * Create a copy of this block on the workspace.\n * @param {!BlockSvg} originalBlock The block to copy from the flyout.\n * @return {!BlockSvg} The newly created block.\n * @throws {Error} if something went wrong with deserialization.\n */\nIFlyout.prototype.createBlock;\n\n/**\n * Reflow blocks and their mats.\n */\nIFlyout.prototype.reflow;\n\n/**\n * @return {boolean} True if this flyout may be scrolled with a scrollbar or by\n *     dragging.\n */\nIFlyout.prototype.isScrollable;\n\n/**\n * Calculates the x coordinate for the flyout position.\n * @return {number} X coordinate.\n */\nIFlyout.prototype.getX;\n\n/**\n * Calculates the y coordinate for the flyout position.\n * @return {number} Y coordinate.\n */\nIFlyout.prototype.getY;\n\n/**\n * Position the flyout.\n * @return {void}\n */\nIFlyout.prototype.position;\n\n/**\n * Determine if a drag delta is toward the workspace, based on the position\n * and orientation of the flyout. This is used in determineDragIntention_ to\n * determine if a new block should be created or if the flyout should scroll.\n * @param {!Coordinate} currentDragDeltaXY How far the pointer has\n *     moved from the position at mouse down, in pixel units.\n * @return {boolean} True if the drag is toward the workspace.\n */\nIFlyout.prototype.isDragTowardWorkspace;\n\nexports.IFlyout = IFlyout;\n","/**\n * @license\n * Copyright 2011 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Flyout tray containing blocks which may be created.\n */\n'use strict';\n\n/**\n * Flyout tray containing blocks which may be created.\n * @class\n */\ngoog.module('Blockly.Flyout');\n\nconst Tooltip = goog.require('Blockly.Tooltip');\nconst Variables = goog.require('Blockly.Variables');\nconst Xml = goog.require('Blockly.Xml');\nconst blocks = goog.require('Blockly.serialization.blocks');\nconst browserEvents = goog.require('Blockly.browserEvents');\nconst common = goog.require('Blockly.common');\nconst dom = goog.require('Blockly.utils.dom');\nconst eventUtils = goog.require('Blockly.Events.utils');\nconst idGenerator = goog.require('Blockly.utils.idGenerator');\nconst toolbox = goog.require('Blockly.utils.toolbox');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockSvg} = goog.requireType('Blockly.BlockSvg');\n/* eslint-disable-next-line no-unused-vars */\nconst {Block} = goog.requireType('Blockly.Block');\nconst {ComponentManager} = goog.require('Blockly.ComponentManager');\nconst {Coordinate} = goog.require('Blockly.utils.Coordinate');\nconst {DeleteArea} = goog.require('Blockly.DeleteArea');\n/* eslint-disable-next-line no-unused-vars */\nconst {FlyoutButton} = goog.requireType('Blockly.FlyoutButton');\nconst {FlyoutMetricsManager} = goog.require('Blockly.FlyoutMetricsManager');\n/* eslint-disable-next-line no-unused-vars */\nconst {IFlyout} = goog.require('Blockly.IFlyout');\n/* eslint-disable-next-line no-unused-vars */\nconst {Options} = goog.requireType('Blockly.Options');\n/* eslint-disable-next-line no-unused-vars */\nconst {Rect} = goog.require('Blockly.utils.Rect');\nconst {ScrollbarPair} = goog.require('Blockly.ScrollbarPair');\nconst {Svg} = goog.require('Blockly.utils.Svg');\nconst {WorkspaceSvg} = goog.require('Blockly.WorkspaceSvg');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.Events.BlockCreate');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.Events.VarCreate');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.Gesture');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.Touch');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.blockRendering');\n\n\n/**\n * Class for a flyout.\n * @abstract\n * @implements {IFlyout}\n * @extends {DeleteArea}\n * @alias Blockly.Flyout\n */\nclass Flyout extends DeleteArea {\n  /**\n   * @param {!Options} workspaceOptions Dictionary of options for the\n   *     workspace.\n   */\n  constructor(workspaceOptions) {\n    super();\n    workspaceOptions.setMetrics = this.setMetrics_.bind(this);\n\n    /**\n     * @type {!WorkspaceSvg}\n     * @protected\n     */\n    this.workspace_ = new WorkspaceSvg(workspaceOptions);\n    this.workspace_.setMetricsManager(\n        new FlyoutMetricsManager(this.workspace_, this));\n\n    this.workspace_.isFlyout = true;\n    // Keep the workspace visibility consistent with the flyout's visibility.\n    this.workspace_.setVisible(this.isVisible_);\n\n    /**\n     * The unique id for this component that is used to register with the\n     * ComponentManager.\n     * @type {string}\n     */\n    this.id = idGenerator.genUid();\n\n    /**\n     * Is RTL vs LTR.\n     * @type {boolean}\n     */\n    this.RTL = !!workspaceOptions.RTL;\n\n    /**\n     * Whether the flyout should be laid out horizontally or not.\n     * @type {boolean}\n     * @package\n     */\n    this.horizontalLayout = false;\n\n    /**\n     * Position of the toolbox and flyout relative to the workspace.\n     * @type {number}\n     * @protected\n     */\n    this.toolboxPosition_ = workspaceOptions.toolboxPosition;\n\n    /**\n     * Opaque data that can be passed to Blockly.unbindEvent_.\n     * @type {!Array<!Array>}\n     * @private\n     */\n    this.eventWrappers_ = [];\n\n    /**\n     * Function that will be registered as a change listener on the workspace\n     * to reflow when blocks in the flyout workspace change.\n     * @type {?Function}\n     * @private\n     */\n    this.reflowWrapper_ = null;\n\n    /**\n     * Function that disables blocks in the flyout based on max block counts\n     * allowed in the target workspace. Registered as a change listener on the\n     * target workspace.\n     * @type {?Function}\n     * @private\n     */\n    this.filterWrapper_ = null;\n\n    /**\n     * List of background mats that lurk behind each block to catch clicks\n     * landing in the blocks' lakes and bays.\n     * @type {!Array<!SVGElement>}\n     * @private\n     */\n    this.mats_ = [];\n\n    /**\n     * List of visible buttons.\n     * @type {!Array<!FlyoutButton>}\n     * @protected\n     */\n    this.buttons_ = [];\n\n    /**\n     * List of event listeners.\n     * @type {!Array<!Array>}\n     * @private\n     */\n    this.listeners_ = [];\n\n    /**\n     * List of blocks that should always be disabled.\n     * @type {!Array<!Block>}\n     * @private\n     */\n    this.permanentlyDisabled_ = [];\n\n    /**\n     * Width of output tab.\n     * @type {number}\n     * @protected\n     * @const\n     */\n    this.tabWidth_ = this.workspace_.getRenderer().getConstants().TAB_WIDTH;\n\n    /**\n     * The target workspace\n     * @type {?WorkspaceSvg}\n     * @package\n     */\n    this.targetWorkspace = null;\n\n    /**\n     * A list of blocks that can be reused.\n     * @type {!Array<!BlockSvg>}\n     * @private\n     */\n    this.recycledBlocks_ = [];\n\n    /**\n     * Does the flyout automatically close when a block is created?\n     * @type {boolean}\n     */\n    this.autoClose = true;\n\n    /**\n     * Whether the flyout is visible.\n     * @type {boolean}\n     * @private\n     */\n    this.isVisible_ = false;\n\n    /**\n     * Whether the workspace containing this flyout is visible.\n     * @type {boolean}\n     * @private\n     */\n    this.containerVisible_ = true;\n\n    /**\n     * A map from blocks to the rects which are beneath them to act as input\n     * targets.\n     * @type {!WeakMap<!BlockSvg, !SVGElement>}\n     * @private\n     */\n    this.rectMap_ = new WeakMap();\n\n    /**\n     * Corner radius of the flyout background.\n     * @type {number}\n     * @const\n     */\n    this.CORNER_RADIUS = 8;\n\n    /**\n     * Margin around the edges of the blocks in the flyout.\n     * @type {number}\n     * @const\n     */\n    this.MARGIN = this.CORNER_RADIUS;\n\n    // TODO: Move GAP_X and GAP_Y to their appropriate files.\n\n    /**\n     * Gap between items in horizontal flyouts. Can be overridden with the \"sep\"\n     * element.\n     * @const {number}\n     */\n    this.GAP_X = this.MARGIN * 3;\n\n    /**\n     * Gap between items in vertical flyouts. Can be overridden with the \"sep\"\n     * element.\n     * @const {number}\n     */\n    this.GAP_Y = this.MARGIN * 3;\n\n    /**\n     * Top/bottom padding between scrollbar and edge of flyout background.\n     * @type {number}\n     * @const\n     */\n    this.SCROLLBAR_MARGIN = 2.5;\n\n    /**\n     * Width of flyout.\n     * @type {number}\n     * @protected\n     */\n    this.width_ = 0;\n\n    /**\n     * Height of flyout.\n     * @type {number}\n     * @protected\n     */\n    this.height_ = 0;\n\n    // clang-format off\n    /**\n     * Range of a drag angle from a flyout considered \"dragging toward\n     * workspace\". Drags that are within the bounds of this many degrees from\n     * the orthogonal line to the flyout edge are considered to be \"drags toward\n     * the workspace\".\n     * Example:\n     * Flyout                                                 Edge   Workspace\n     * [block] /  <-within this angle, drags \"toward workspace\" |\n     * [block] ---- orthogonal to flyout boundary ----          |\n     * [block] \\                                                |\n     * The angle is given in degrees from the orthogonal.\n     *\n     * This is used to know when to create a new block and when to scroll the\n     * flyout. Setting it to 360 means that all drags create a new block.\n     * @type {number}\n     * @protected\n     */\n    // clang-format on\n    this.dragAngleRange_ = 70;\n\n    /**\n     * The path around the background of the flyout, which will be filled with a\n     * background colour.\n     * @type {?SVGPathElement}\n     * @protected\n     */\n    this.svgBackground_ = null;\n\n    /**\n     * The root SVG group for the button or label.\n     * @type {?SVGGElement}\n     * @protected\n     */\n    this.svgGroup_ = null;\n  }\n\n  /**\n   * Creates the flyout's DOM.  Only needs to be called once.  The flyout can\n   * either exist as its own SVG element or be a g element nested inside a\n   * separate SVG element.\n   * @param {string|\n   * !Svg<!SVGSVGElement>|\n   * !Svg<!SVGGElement>} tagName The type of tag to\n   *     put the flyout in. This should be <svg> or <g>.\n   * @return {!SVGElement} The flyout's SVG group.\n   */\n  createDom(tagName) {\n    /*\n    <svg | g>\n      <path class=\"blocklyFlyoutBackground\"/>\n      <g class=\"blocklyFlyout\"></g>\n    </ svg | g>\n    */\n    // Setting style to display:none to start. The toolbox and flyout\n    // hide/show code will set up proper visibility and size later.\n    this.svgGroup_ = dom.createSvgElement(\n        tagName, {'class': 'blocklyFlyout', 'style': 'display: none'}, null);\n    this.svgBackground_ = dom.createSvgElement(\n        Svg.PATH, {'class': 'blocklyFlyoutBackground'}, this.svgGroup_);\n    this.svgGroup_.appendChild(this.workspace_.createDom());\n    this.workspace_.getThemeManager().subscribe(\n        this.svgBackground_, 'flyoutBackgroundColour', 'fill');\n    this.workspace_.getThemeManager().subscribe(\n        this.svgBackground_, 'flyoutOpacity', 'fill-opacity');\n    return this.svgGroup_;\n  }\n\n  /**\n   * Initializes the flyout.\n   * @param {!WorkspaceSvg} targetWorkspace The workspace in which to\n   *     create new blocks.\n   */\n  init(targetWorkspace) {\n    this.targetWorkspace = targetWorkspace;\n    this.workspace_.targetWorkspace = targetWorkspace;\n\n    this.workspace_.scrollbar = new ScrollbarPair(\n        this.workspace_, this.horizontalLayout, !this.horizontalLayout,\n        'blocklyFlyoutScrollbar', this.SCROLLBAR_MARGIN);\n\n    this.hide();\n\n    Array.prototype.push.apply(\n        this.eventWrappers_,\n        browserEvents.conditionalBind(\n            /** @type {!SVGGElement} */ (this.svgGroup_), 'wheel', this,\n            this.wheel_));\n    if (!this.autoClose) {\n      this.filterWrapper_ = this.filterForCapacity_.bind(this);\n      this.targetWorkspace.addChangeListener(this.filterWrapper_);\n    }\n\n    // Dragging the flyout up and down.\n    Array.prototype.push.apply(\n        this.eventWrappers_,\n        browserEvents.conditionalBind(\n            /** @type {!SVGPathElement} */ (this.svgBackground_), 'mousedown',\n            this, this.onMouseDown_));\n\n    // A flyout connected to a workspace doesn't have its own current gesture.\n    this.workspace_.getGesture =\n        this.targetWorkspace.getGesture.bind(this.targetWorkspace);\n\n    // Get variables from the main workspace rather than the target workspace.\n    this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap());\n\n    this.workspace_.createPotentialVariableMap();\n\n    targetWorkspace.getComponentManager().addComponent({\n      component: this,\n      weight: 1,\n      capabilities: [\n        ComponentManager.Capability.DELETE_AREA,\n        ComponentManager.Capability.DRAG_TARGET,\n      ],\n    });\n  }\n\n  /**\n   * Dispose of this flyout.\n   * Unlink from all DOM elements to prevent memory leaks.\n   * @suppress {checkTypes}\n   */\n  dispose() {\n    this.hide();\n    this.workspace_.getComponentManager().removeComponent(this.id);\n    browserEvents.unbind(this.eventWrappers_);\n    if (this.filterWrapper_) {\n      this.targetWorkspace.removeChangeListener(this.filterWrapper_);\n      this.filterWrapper_ = null;\n    }\n    if (this.workspace_) {\n      this.workspace_.getThemeManager().unsubscribe(this.svgBackground_);\n      this.workspace_.targetWorkspace = null;\n      this.workspace_.dispose();\n      this.workspace_ = null;\n    }\n    if (this.svgGroup_) {\n      dom.removeNode(this.svgGroup_);\n      this.svgGroup_ = null;\n    }\n    this.svgBackground_ = null;\n    this.targetWorkspace = null;\n  }\n\n  /**\n   * Get the width of the flyout.\n   * @return {number} The width of the flyout.\n   */\n  getWidth() {\n    return this.width_;\n  }\n\n  /**\n   * Get the height of the flyout.\n   * @return {number} The width of the flyout.\n   */\n  getHeight() {\n    return this.height_;\n  }\n\n  /**\n   * Get the scale (zoom level) of the flyout. By default,\n   * this matches the target workspace scale, but this can be overridden.\n   * @return {number} Flyout workspace scale.\n   */\n  getFlyoutScale() {\n    return this.targetWorkspace.scale;\n  }\n\n  /**\n   * Get the workspace inside the flyout.\n   * @return {!WorkspaceSvg} The workspace inside the flyout.\n   * @package\n   */\n  getWorkspace() {\n    return this.workspace_;\n  }\n\n  /**\n   * Is the flyout visible?\n   * @return {boolean} True if visible.\n   */\n  isVisible() {\n    return this.isVisible_;\n  }\n\n  /**\n   * Set whether the flyout is visible. A value of true does not necessarily\n   * mean that the flyout is shown. It could be hidden because its container is\n   * hidden.\n   * @param {boolean} visible True if visible.\n   */\n  setVisible(visible) {\n    const visibilityChanged = (visible !== this.isVisible());\n\n    this.isVisible_ = visible;\n    if (visibilityChanged) {\n      if (!this.autoClose) {\n        // Auto-close flyouts are ignored as drag targets, so only non\n        // auto-close flyouts need to have their drag target updated.\n        this.workspace_.recordDragTargets();\n      }\n      this.updateDisplay_();\n    }\n  }\n\n  /**\n   * Set whether this flyout's container is visible.\n   * @param {boolean} visible Whether the container is visible.\n   */\n  setContainerVisible(visible) {\n    const visibilityChanged = (visible !== this.containerVisible_);\n    this.containerVisible_ = visible;\n    if (visibilityChanged) {\n      this.updateDisplay_();\n    }\n  }\n\n  /**\n   * Update the display property of the flyout based whether it thinks it should\n   * be visible and whether its containing workspace is visible.\n   * @private\n   */\n  updateDisplay_() {\n    let show = true;\n    if (!this.containerVisible_) {\n      show = false;\n    } else {\n      show = this.isVisible();\n    }\n    this.svgGroup_.style.display = show ? 'block' : 'none';\n    // Update the scrollbar's visibility too since it should mimic the\n    // flyout's visibility.\n    this.workspace_.scrollbar.setContainerVisible(show);\n  }\n\n  /**\n   * Update the view based on coordinates calculated in position().\n   * @param {number} width The computed width of the flyout's SVG group\n   * @param {number} height The computed height of the flyout's SVG group.\n   * @param {number} x The computed x origin of the flyout's SVG group.\n   * @param {number} y The computed y origin of the flyout's SVG group.\n   * @protected\n   */\n  positionAt_(width, height, x, y) {\n    this.svgGroup_.setAttribute('width', width);\n    this.svgGroup_.setAttribute('height', height);\n    this.workspace_.setCachedParentSvgSize(width, height);\n\n    if (this.svgGroup_.tagName === 'svg') {\n      const transform = 'translate(' + x + 'px,' + y + 'px)';\n      dom.setCssTransform(this.svgGroup_, transform);\n    } else {\n      // IE and Edge don't support CSS transforms on SVG elements so\n      // it's important to set the transform on the SVG element itself\n      const transform = 'translate(' + x + ',' + y + ')';\n      this.svgGroup_.setAttribute('transform', transform);\n    }\n\n    // Update the scrollbar (if one exists).\n    const scrollbar = this.workspace_.scrollbar;\n    if (scrollbar) {\n      // Set the scrollbars origin to be the top left of the flyout.\n      scrollbar.setOrigin(x, y);\n      scrollbar.resize();\n      // If origin changed and metrics haven't changed enough to trigger\n      // reposition in resize, we need to call setPosition. See issue #4692.\n      if (scrollbar.hScroll) {\n        scrollbar.hScroll.setPosition(\n            scrollbar.hScroll.position.x, scrollbar.hScroll.position.y);\n      }\n      if (scrollbar.vScroll) {\n        scrollbar.vScroll.setPosition(\n            scrollbar.vScroll.position.x, scrollbar.vScroll.position.y);\n      }\n    }\n  }\n\n  /**\n   * Hide and empty the flyout.\n   */\n  hide() {\n    if (!this.isVisible()) {\n      return;\n    }\n    this.setVisible(false);\n    // Delete all the event listeners.\n    for (let i = 0, listen; (listen = this.listeners_[i]); i++) {\n      browserEvents.unbind(listen);\n    }\n    this.listeners_.length = 0;\n    if (this.reflowWrapper_) {\n      this.workspace_.removeChangeListener(this.reflowWrapper_);\n      this.reflowWrapper_ = null;\n    }\n    // Do NOT delete the blocks here.  Wait until Flyout.show.\n    // https://neil.fraser.name/news/2014/08/09/\n  }\n\n  /**\n   * Show and populate the flyout.\n   * @param {!toolbox.FlyoutDefinition|string} flyoutDef Contents to display\n   *     in the flyout. This is either an array of Nodes, a NodeList, a\n   *     toolbox definition, or a string with the name of the dynamic category.\n   */\n  show(flyoutDef) {\n    this.workspace_.setResizesEnabled(false);\n    this.hide();\n    this.clearOldBlocks_();\n\n    // Handle dynamic categories, represented by a name instead of a list.\n    if (typeof flyoutDef === 'string') {\n      flyoutDef = this.getDynamicCategoryContents_(flyoutDef);\n    }\n    this.setVisible(true);\n\n    // Parse the Array, Node or NodeList into a a list of flyout items.\n    const parsedContent = toolbox.convertFlyoutDefToJsonArray(flyoutDef);\n    const flyoutInfo =\n        /** @type {{contents:!Array<!Object>, gaps:!Array<number>}} */ (\n            this.createFlyoutInfo_(parsedContent));\n\n    this.layout_(flyoutInfo.contents, flyoutInfo.gaps);\n\n    // IE 11 is an incompetent browser that fails to fire mouseout events.\n    // When the mouse is over the background, deselect all blocks.\n    const deselectAll =\n        /** @this {Flyout} */\n        function() {\n          const topBlocks = this.workspace_.getTopBlocks(false);\n          for (let i = 0, block; (block = topBlocks[i]); i++) {\n            block.removeSelect();\n          }\n        };\n\n    this.listeners_.push(browserEvents.conditionalBind(\n        /** @type {!SVGPathElement} */ (this.svgBackground_), 'mouseover', this,\n        deselectAll));\n\n    if (this.horizontalLayout) {\n      this.height_ = 0;\n    } else {\n      this.width_ = 0;\n    }\n    this.workspace_.setResizesEnabled(true);\n    this.reflow();\n\n    this.filterForCapacity_();\n\n    // Correctly position the flyout's scrollbar when it opens.\n    this.position();\n\n    this.reflowWrapper_ = this.reflow.bind(this);\n    this.workspace_.addChangeListener(this.reflowWrapper_);\n    this.emptyRecycledBlocks_();\n  }\n\n  /**\n   * Create the contents array and gaps array necessary to create the layout for\n   * the flyout.\n   * @param {!toolbox.FlyoutItemInfoArray} parsedContent The array\n   *     of objects to show in the flyout.\n   * @return {{contents:Array<Object>, gaps:Array<number>}} The list of contents\n   *     and gaps needed to lay out the flyout.\n   * @private\n   */\n  createFlyoutInfo_(parsedContent) {\n    const contents = [];\n    const gaps = [];\n    this.permanentlyDisabled_.length = 0;\n    const defaultGap = this.horizontalLayout ? this.GAP_X : this.GAP_Y;\n    for (let i = 0, contentInfo; (contentInfo = parsedContent[i]); i++) {\n      if (contentInfo['custom']) {\n        const customInfo =\n            /** @type {!toolbox.DynamicCategoryInfo} */ (contentInfo);\n        const categoryName = customInfo['custom'];\n        const flyoutDef = this.getDynamicCategoryContents_(categoryName);\n        const parsedDynamicContent = /** @type {!toolbox.FlyoutItemInfoArray} */\n            (toolbox.convertFlyoutDefToJsonArray(flyoutDef));\n        // Replace the element at i with the dynamic content it represents.\n        parsedContent.splice.apply(\n            parsedContent, [i, 1].concat(parsedDynamicContent));\n        contentInfo = parsedContent[i];\n      }\n\n      switch (contentInfo['kind'].toUpperCase()) {\n        case 'BLOCK': {\n          const blockInfo = /** @type {!toolbox.BlockInfo} */ (contentInfo);\n          const block = this.createFlyoutBlock_(blockInfo);\n          contents.push({type: 'block', block: block});\n          this.addBlockGap_(blockInfo, gaps, defaultGap);\n          break;\n        }\n        case 'SEP': {\n          const sepInfo = /** @type {!toolbox.SeparatorInfo} */ (contentInfo);\n          this.addSeparatorGap_(sepInfo, gaps, defaultGap);\n          break;\n        }\n        case 'LABEL': {\n          const labelInfo = /** @type {!toolbox.LabelInfo} */ (contentInfo);\n          // A label is a button with different styling.\n          const label = this.createButton_(labelInfo, /** isLabel */ true);\n          contents.push({type: 'button', button: label});\n          gaps.push(defaultGap);\n          break;\n        }\n        case 'BUTTON': {\n          const buttonInfo = /** @type {!toolbox.ButtonInfo} */ (contentInfo);\n          const button = this.createButton_(buttonInfo, /** isLabel */ false);\n          contents.push({type: 'button', button: button});\n          gaps.push(defaultGap);\n          break;\n        }\n      }\n    }\n    return {contents: contents, gaps: gaps};\n  }\n\n  /**\n   * Gets the flyout definition for the dynamic category.\n   * @param {string} categoryName The name of the dynamic category.\n   * @return {!toolbox.FlyoutDefinition} The definition of the\n   *     flyout in one of its many forms.\n   * @private\n   */\n  getDynamicCategoryContents_(categoryName) {\n    // Look up the correct category generation function and call that to get a\n    // valid XML list.\n    const fnToApply =\n        this.workspace_.targetWorkspace.getToolboxCategoryCallback(\n            categoryName);\n    if (typeof fnToApply !== 'function') {\n      throw TypeError(\n          'Couldn\\'t find a callback function when opening' +\n          ' a toolbox category.');\n    }\n    return fnToApply(this.workspace_.targetWorkspace);\n  }\n\n  /**\n   * Creates a flyout button or a flyout label.\n   * @param {!toolbox.ButtonOrLabelInfo} btnInfo\n   *    The object holding information about a button or a label.\n   * @param {boolean} isLabel True if the button is a label, false otherwise.\n   * @return {!FlyoutButton} The object used to display the button in the\n   *    flyout.\n   * @private\n   */\n  createButton_(btnInfo, isLabel) {\n    const {FlyoutButton} = goog.module.get('Blockly.FlyoutButton');\n    if (!FlyoutButton) {\n      throw Error('Missing require for Blockly.FlyoutButton');\n    }\n    const curButton = new FlyoutButton(\n        this.workspace_,\n        /** @type {!WorkspaceSvg} */ (this.targetWorkspace), btnInfo, isLabel);\n    return curButton;\n  }\n\n  /**\n   * Create a block from the xml and permanently disable any blocks that were\n   * defined as disabled.\n   * @param {!toolbox.BlockInfo} blockInfo The info of the block.\n   * @return {!BlockSvg} The block created from the blockInfo.\n   * @private\n   */\n  createFlyoutBlock_(blockInfo) {\n    let block;\n    if (blockInfo['blockxml']) {\n      const xml = typeof blockInfo['blockxml'] === 'string' ?\n          Xml.textToDom(blockInfo['blockxml']) :\n          blockInfo['blockxml'];\n      block = this.getRecycledBlock_(xml.getAttribute('type'));\n      if (!block) {\n        block = Xml.domToBlock(xml, this.workspace_);\n      }\n    } else {\n      block = this.getRecycledBlock_(blockInfo['type']);\n      if (!block) {\n        if (blockInfo['enabled'] === undefined) {\n          blockInfo['enabled'] = blockInfo['disabled'] !== 'true' &&\n              blockInfo['disabled'] !== true;\n        }\n        block = blocks.append(\n            /** @type {blocks.State} */ (blockInfo), this.workspace_);\n      }\n    }\n\n    if (!block.isEnabled()) {\n      // Record blocks that were initially disabled.\n      // Do not enable these blocks as a result of capacity filtering.\n      this.permanentlyDisabled_.push(block);\n    }\n    return /** @type {!BlockSvg} */ (block);\n  }\n\n  /**\n   * Returns a block from the array of recycled blocks with the given type, or\n   * undefined if one cannot be found.\n   * @param {string} blockType The type of the block to try to recycle.\n   * @return {(!BlockSvg|undefined)} The recycled block, or undefined if\n   *     one could not be recycled.\n   * @private\n   */\n  getRecycledBlock_(blockType) {\n    let index = -1;\n    for (let i = 0; i < this.recycledBlocks_.length; i++) {\n      if (this.recycledBlocks_[i].type === blockType) {\n        index = i;\n        break;\n      }\n    }\n    return index === -1 ? undefined : this.recycledBlocks_.splice(index, 1)[0];\n  }\n\n  /**\n   * Adds a gap in the flyout based on block info.\n   * @param {!toolbox.BlockInfo} blockInfo Information about a block.\n   * @param {!Array<number>} gaps The list of gaps between items in the flyout.\n   * @param {number} defaultGap The default gap between one element and the\n   *     next.\n   * @private\n   */\n  addBlockGap_(blockInfo, gaps, defaultGap) {\n    let gap;\n    if (blockInfo['gap']) {\n      gap = parseInt(blockInfo['gap'], 10);\n    } else if (blockInfo['blockxml']) {\n      const xml = typeof blockInfo['blockxml'] === 'string' ?\n          Xml.textToDom(blockInfo['blockxml']) :\n          blockInfo['blockxml'];\n      gap = parseInt(xml.getAttribute('gap'), 10);\n    }\n    gaps.push(isNaN(gap) ? defaultGap : gap);\n  }\n\n  /**\n   * Add the necessary gap in the flyout for a separator.\n   * @param {!toolbox.SeparatorInfo} sepInfo The object holding\n   *    information about a separator.\n   * @param {!Array<number>} gaps The list gaps between items in the flyout.\n   * @param {number} defaultGap The default gap between the button and next\n   *     element.\n   * @private\n   */\n  addSeparatorGap_(sepInfo, gaps, defaultGap) {\n    // Change the gap between two toolbox elements.\n    // <sep gap=\"36\"></sep>\n    // The default gap is 24, can be set larger or smaller.\n    // This overwrites the gap attribute on the previous element.\n    const newGap = parseInt(sepInfo['gap'], 10);\n    // Ignore gaps before the first block.\n    if (!isNaN(newGap) && gaps.length > 0) {\n      gaps[gaps.length - 1] = newGap;\n    } else {\n      gaps.push(defaultGap);\n    }\n  }\n\n  /**\n   * Delete blocks, mats and buttons from a previous showing of the flyout.\n   * @private\n   */\n  clearOldBlocks_() {\n    // Delete any blocks from a previous showing.\n    const oldBlocks = this.workspace_.getTopBlocks(false);\n    for (let i = 0, block; (block = oldBlocks[i]); i++) {\n      if (this.blockIsRecyclable_(block)) {\n        this.recycleBlock_(block);\n      } else {\n        block.dispose(false, false);\n      }\n    }\n    // Delete any mats from a previous showing.\n    for (let j = 0; j < this.mats_.length; j++) {\n      const rect = this.mats_[j];\n      if (rect) {\n        Tooltip.unbindMouseEvents(rect);\n        dom.removeNode(rect);\n      }\n    }\n    this.mats_.length = 0;\n    // Delete any buttons from a previous showing.\n    for (let i = 0, button; (button = this.buttons_[i]); i++) {\n      button.dispose();\n    }\n    this.buttons_.length = 0;\n\n    // Clear potential variables from the previous showing.\n    this.workspace_.getPotentialVariableMap().clear();\n  }\n\n  /**\n   * Empties all of the recycled blocks, properly disposing of them.\n   * @private\n   */\n  emptyRecycledBlocks_() {\n    for (let i = 0; i < this.recycledBlocks_.length; i++) {\n      this.recycledBlocks_[i].dispose();\n    }\n    this.recycledBlocks_ = [];\n  }\n\n  /**\n   * Returns whether the given block can be recycled or not.\n   * @param {!BlockSvg} _block The block to check for recyclability.\n   * @return {boolean} True if the block can be recycled. False otherwise.\n   * @protected\n   */\n  blockIsRecyclable_(_block) {\n    // By default, recycling is disabled.\n    return false;\n  }\n\n  /**\n   * Puts a previously created block into the recycle bin and moves it to the\n   * top of the workspace. Used during large workspace swaps to limit the number\n   * of new DOM elements we need to create.\n   * @param {!BlockSvg} block The block to recycle.\n   * @private\n   */\n  recycleBlock_(block) {\n    const xy = block.getRelativeToSurfaceXY();\n    block.moveBy(-xy.x, -xy.y);\n    this.recycledBlocks_.push(block);\n  }\n\n  /**\n   * Add listeners to a block that has been added to the flyout.\n   * @param {!SVGElement} root The root node of the SVG group the block is in.\n   * @param {!BlockSvg} block The block to add listeners for.\n   * @param {!SVGElement} rect The invisible rectangle under the block that acts\n   *     as a mat for that block.\n   * @protected\n   */\n  addBlockListeners_(root, block, rect) {\n    this.listeners_.push(browserEvents.conditionalBind(\n        root, 'mousedown', null, this.blockMouseDown_(block)));\n    this.listeners_.push(browserEvents.conditionalBind(\n        rect, 'mousedown', null, this.blockMouseDown_(block)));\n    this.listeners_.push(\n        browserEvents.bind(root, 'mouseenter', block, block.addSelect));\n    this.listeners_.push(\n        browserEvents.bind(root, 'mouseleave', block, block.removeSelect));\n    this.listeners_.push(\n        browserEvents.bind(rect, 'mouseenter', block, block.addSelect));\n    this.listeners_.push(\n        browserEvents.bind(rect, 'mouseleave', block, block.removeSelect));\n  }\n\n  /**\n   * Handle a mouse-down on an SVG block in a non-closing flyout.\n   * @param {!BlockSvg} block The flyout block to copy.\n   * @return {!Function} Function to call when block is clicked.\n   * @private\n   */\n  blockMouseDown_(block) {\n    const flyout = this;\n    return function(e) {\n      const gesture = flyout.targetWorkspace.getGesture(e);\n      if (gesture) {\n        gesture.setStartBlock(block);\n        gesture.handleFlyoutStart(e, flyout);\n      }\n    };\n  }\n\n  /**\n   * Mouse down on the flyout background.  Start a vertical scroll drag.\n   * @param {!Event} e Mouse down event.\n   * @private\n   */\n  onMouseDown_(e) {\n    const gesture = this.targetWorkspace.getGesture(e);\n    if (gesture) {\n      gesture.handleFlyoutStart(e, this);\n    }\n  }\n\n  /**\n   * Does this flyout allow you to create a new instance of the given block?\n   * Used for deciding if a block can be \"dragged out of\" the flyout.\n   * @param {!BlockSvg} block The block to copy from the flyout.\n   * @return {boolean} True if you can create a new instance of the block, false\n   *    otherwise.\n   * @package\n   */\n  isBlockCreatable_(block) {\n    return block.isEnabled();\n  }\n\n  /**\n   * Create a copy of this block on the workspace.\n   * @param {!BlockSvg} originalBlock The block to copy from the flyout.\n   * @return {!BlockSvg} The newly created block.\n   * @throws {Error} if something went wrong with deserialization.\n   * @package\n   */\n  createBlock(originalBlock) {\n    let newBlock = null;\n    eventUtils.disable();\n    const variablesBeforeCreation = this.targetWorkspace.getAllVariables();\n    this.targetWorkspace.setResizesEnabled(false);\n    try {\n      newBlock = this.placeNewBlock_(originalBlock);\n    } finally {\n      eventUtils.enable();\n    }\n\n    // Close the flyout.\n    this.targetWorkspace.hideChaff();\n\n    const newVariables = Variables.getAddedVariables(\n        this.targetWorkspace, variablesBeforeCreation);\n\n    if (eventUtils.isEnabled()) {\n      eventUtils.setGroup(true);\n      // Fire a VarCreate event for each (if any) new variable created.\n      for (let i = 0; i < newVariables.length; i++) {\n        const thisVariable = newVariables[i];\n        eventUtils.fire(\n            new (eventUtils.get(eventUtils.VAR_CREATE))(thisVariable));\n      }\n\n      // Block events come after var events, in case they refer to newly created\n      // variables.\n      eventUtils.fire(new (eventUtils.get(eventUtils.BLOCK_CREATE))(newBlock));\n    }\n    if (this.autoClose) {\n      this.hide();\n    } else {\n      this.filterForCapacity_();\n    }\n    return newBlock;\n  }\n\n  /**\n   * Initialize the given button: move it to the correct location,\n   * add listeners, etc.\n   * @param {!FlyoutButton} button The button to initialize and place.\n   * @param {number} x The x position of the cursor during this layout pass.\n   * @param {number} y The y position of the cursor during this layout pass.\n   * @protected\n   */\n  initFlyoutButton_(button, x, y) {\n    const buttonSvg = button.createDom();\n    button.moveTo(x, y);\n    button.show();\n    // Clicking on a flyout button or label is a lot like clicking on the\n    // flyout background.\n    this.listeners_.push(browserEvents.conditionalBind(\n        buttonSvg, 'mousedown', this, this.onMouseDown_));\n\n    this.buttons_.push(button);\n  }\n\n  /**\n   * Create and place a rectangle corresponding to the given block.\n   * @param {!BlockSvg} block The block to associate the rect to.\n   * @param {number} x The x position of the cursor during this layout pass.\n   * @param {number} y The y position of the cursor during this layout pass.\n   * @param {!{height: number, width: number}} blockHW The height and width of\n   *     the block.\n   * @param {number} index The index into the mats list where this rect should\n   *     be placed.\n   * @return {!SVGElement} Newly created SVG element for the rectangle behind\n   *     the block.\n   * @protected\n   */\n  createRect_(block, x, y, blockHW, index) {\n    // Create an invisible rectangle under the block to act as a button.  Just\n    // using the block as a button is poor, since blocks have holes in them.\n    const rect = dom.createSvgElement(\n        Svg.RECT, {\n          'fill-opacity': 0,\n          'x': x,\n          'y': y,\n          'height': blockHW.height,\n          'width': blockHW.width,\n        },\n        null);\n    rect.tooltip = block;\n    Tooltip.bindMouseEvents(rect);\n    // Add the rectangles under the blocks, so that the blocks' tooltips work.\n    this.workspace_.getCanvas().insertBefore(rect, block.getSvgRoot());\n\n    this.rectMap_.set(block, rect);\n    this.mats_[index] = rect;\n    return rect;\n  }\n\n  /**\n   * Move a rectangle to sit exactly behind a block, taking into account tabs,\n   * hats, and any other protrusions we invent.\n   * @param {!SVGElement} rect The rectangle to move directly behind the block.\n   * @param {!BlockSvg} block The block the rectangle should be behind.\n   * @protected\n   */\n  moveRectToBlock_(rect, block) {\n    const blockHW = block.getHeightWidth();\n    rect.setAttribute('width', blockHW.width);\n    rect.setAttribute('height', blockHW.height);\n\n    const blockXY = block.getRelativeToSurfaceXY();\n    rect.setAttribute('y', blockXY.y);\n    rect.setAttribute('x', this.RTL ? blockXY.x - blockHW.width : blockXY.x);\n  }\n\n  /**\n   * Filter the blocks on the flyout to disable the ones that are above the\n   * capacity limit.  For instance, if the user may only place two more blocks\n   * on the workspace, an \"a + b\" block that has two shadow blocks would be\n   * disabled.\n   * @private\n   */\n  filterForCapacity_() {\n    const blocks = this.workspace_.getTopBlocks(false);\n    for (let i = 0, block; (block = blocks[i]); i++) {\n      if (this.permanentlyDisabled_.indexOf(block) === -1) {\n        const enable = this.targetWorkspace.isCapacityAvailable(\n            common.getBlockTypeCounts(block));\n        while (block) {\n          block.setEnabled(enable);\n          block = block.getNextBlock();\n        }\n      }\n    }\n  }\n\n  /**\n   * Reflow blocks and their mats.\n   */\n  reflow() {\n    if (this.reflowWrapper_) {\n      this.workspace_.removeChangeListener(this.reflowWrapper_);\n    }\n    this.reflowInternal_();\n    if (this.reflowWrapper_) {\n      this.workspace_.addChangeListener(this.reflowWrapper_);\n    }\n  }\n\n  /**\n   * @return {boolean} True if this flyout may be scrolled with a scrollbar or\n   *     by dragging.\n   * @package\n   */\n  isScrollable() {\n    return this.workspace_.scrollbar ? this.workspace_.scrollbar.isVisible() :\n                                       false;\n  }\n\n  /**\n   * Copy a block from the flyout to the workspace and position it correctly.\n   * @param {!BlockSvg} oldBlock The flyout block to copy.\n   * @return {!BlockSvg} The new block in the main workspace.\n   * @private\n   */\n  placeNewBlock_(oldBlock) {\n    const targetWorkspace = this.targetWorkspace;\n    const svgRootOld = oldBlock.getSvgRoot();\n    if (!svgRootOld) {\n      throw Error('oldBlock is not rendered.');\n    }\n\n    // Clone the block.\n    const json = /** @type {!blocks.State} */ (blocks.save(oldBlock));\n    // Normallly this resizes leading to weird jumps. Save it for terminateDrag.\n    targetWorkspace.setResizesEnabled(false);\n    const block =\n        /** @type {!BlockSvg} */ (blocks.append(json, targetWorkspace));\n\n    this.positionNewBlock_(oldBlock, block);\n\n    return block;\n  }\n\n  /**\n   * Positions a block on the target workspace.\n   * @param {!BlockSvg} oldBlock The flyout block being copied.\n   * @param {!BlockSvg} block The block to posiiton.\n   * @private\n   */\n  positionNewBlock_(oldBlock, block) {\n    const targetWorkspace = this.targetWorkspace;\n\n    // The offset in pixels between the main workspace's origin and the upper\n    // left corner of the injection div.\n    const mainOffsetPixels = targetWorkspace.getOriginOffsetInPixels();\n\n    // The offset in pixels between the flyout workspace's origin and the upper\n    // left corner of the injection div.\n    const flyoutOffsetPixels = this.workspace_.getOriginOffsetInPixels();\n\n    // The position of the old block in flyout workspace coordinates.\n    const oldBlockPos = oldBlock.getRelativeToSurfaceXY();\n    // The position of the old block in pixels relative to the flyout\n    // workspace's origin.\n    oldBlockPos.scale(this.workspace_.scale);\n\n    // The position of the old block in pixels relative to the upper left corner\n    // of the injection div.\n    const oldBlockOffsetPixels =\n        Coordinate.sum(flyoutOffsetPixels, oldBlockPos);\n\n    // The position of the old block in pixels relative to the origin of the\n    // main workspace.\n    const finalOffset =\n        Coordinate.difference(oldBlockOffsetPixels, mainOffsetPixels);\n    // The position of the old block in main workspace coordinates.\n    finalOffset.scale(1 / targetWorkspace.scale);\n\n    block.moveTo(new Coordinate(finalOffset.x, finalOffset.y));\n  }\n}\n\n/**\n * Returns the bounding rectangle of the drag target area in pixel units\n * relative to viewport.\n * @return {Rect} The component's bounding box.\n */\nFlyout.prototype.getClientRect;\n\n/**\n * Position the flyout.\n * @return {void}\n */\nFlyout.prototype.position;\n\n/**\n * Determine if a drag delta is toward the workspace, based on the position\n * and orientation of the flyout. This is used in determineDragIntention_ to\n * determine if a new block should be created or if the flyout should scroll.\n * @param {!Coordinate} currentDragDeltaXY How far the pointer has\n *     moved from the position at mouse down, in pixel units.\n * @return {boolean} True if the drag is toward the workspace.\n * @package\n */\nFlyout.prototype.isDragTowardWorkspace;\n\n/**\n * Sets the translation of the flyout to match the scrollbars.\n * @param {!{x:number,y:number}} xyRatio Contains a y property which is a float\n *     between 0 and 1 specifying the degree of scrolling and a\n *     similar x property.\n * @protected\n */\nFlyout.prototype.setMetrics_;\n\n/**\n * Lay out the blocks in the flyout.\n * @param {!Array<!Object>} contents The blocks and buttons to lay out.\n * @param {!Array<number>} gaps The visible gaps between blocks.\n * @protected\n */\nFlyout.prototype.layout_;\n\n/**\n * Scroll the flyout.\n * @param {!Event} e Mouse wheel scroll event.\n * @protected\n */\nFlyout.prototype.wheel_;\n\n/**\n * Compute height of flyout.  Position mat under each block.\n * For RTL: Lay out the blocks right-aligned.\n * @return {void}\n * @protected\n */\nFlyout.prototype.reflowInternal_;\n\n/**\n * Calculates the x coordinate for the flyout position.\n * @return {number} X coordinate.\n */\nFlyout.prototype.getX;\n\n/**\n * Calculates the y coordinate for the flyout position.\n * @return {number} Y coordinate.\n */\nFlyout.prototype.getY;\n\nexports.Flyout = Flyout;\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Layout code for a vertical variant of the flyout.\n */\n'use strict';\n\n/**\n * Layout code for a vertical variant of the flyout.\n * @class\n */\ngoog.module('Blockly.VerticalFlyout');\n\nconst WidgetDiv = goog.require('Blockly.WidgetDiv');\nconst browserEvents = goog.require('Blockly.browserEvents');\nconst dropDownDiv = goog.require('Blockly.dropDownDiv');\nconst registry = goog.require('Blockly.registry');\nconst toolbox = goog.require('Blockly.utils.toolbox');\n/* eslint-disable-next-line no-unused-vars */\nconst {Coordinate} = goog.requireType('Blockly.utils.Coordinate');\nconst {Flyout} = goog.require('Blockly.Flyout');\n/* eslint-disable-next-line no-unused-vars */\nconst {Options} = goog.requireType('Blockly.Options');\nconst {Rect} = goog.require('Blockly.utils.Rect');\nconst {Scrollbar} = goog.require('Blockly.Scrollbar');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.Block');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.constants');\n\n\n/**\n * Class for a flyout.\n * @extends {Flyout}\n * @alias Blockly.VerticalFlyout\n */\nclass VerticalFlyout extends Flyout {\n  /**\n   * @param {!Options} workspaceOptions Dictionary of options for the\n   *     workspace.\n   */\n  constructor(workspaceOptions) {\n    super(workspaceOptions);\n  }\n\n  /**\n   * Sets the translation of the flyout to match the scrollbars.\n   * @param {!{x:number,y:number}} xyRatio Contains a y property which is a\n   *     float between 0 and 1 specifying the degree of scrolling and a similar\n   *     x property.\n   * @protected\n   */\n  setMetrics_(xyRatio) {\n    if (!this.isVisible()) {\n      return;\n    }\n    const metricsManager = this.workspace_.getMetricsManager();\n    const scrollMetrics = metricsManager.getScrollMetrics();\n    const viewMetrics = metricsManager.getViewMetrics();\n    const absoluteMetrics = metricsManager.getAbsoluteMetrics();\n\n    if (typeof xyRatio.y === 'number') {\n      this.workspace_.scrollY =\n          -(scrollMetrics.top +\n            (scrollMetrics.height - viewMetrics.height) * xyRatio.y);\n    }\n    this.workspace_.translate(\n        this.workspace_.scrollX + absoluteMetrics.left,\n        this.workspace_.scrollY + absoluteMetrics.top);\n  }\n\n  /**\n   * Calculates the x coordinate for the flyout position.\n   * @return {number} X coordinate.\n   */\n  getX() {\n    if (!this.isVisible()) {\n      return 0;\n    }\n    const metricsManager = this.targetWorkspace.getMetricsManager();\n    const absoluteMetrics = metricsManager.getAbsoluteMetrics();\n    const viewMetrics = metricsManager.getViewMetrics();\n    const toolboxMetrics = metricsManager.getToolboxMetrics();\n    let x = 0;\n\n    // If this flyout is not the trashcan flyout (e.g. toolbox or mutator).\n    if (this.targetWorkspace.toolboxPosition === this.toolboxPosition_) {\n      // If there is a category toolbox.\n      if (this.targetWorkspace.getToolbox()) {\n        if (this.toolboxPosition_ === toolbox.Position.LEFT) {\n          x = toolboxMetrics.width;\n        } else {\n          x = viewMetrics.width - this.width_;\n        }\n        // Simple (flyout-only) toolbox.\n      } else {\n        if (this.toolboxPosition_ === toolbox.Position.LEFT) {\n          x = 0;\n        } else {\n          // The simple flyout does not cover the workspace.\n          x = viewMetrics.width;\n        }\n      }\n      // Trashcan flyout is opposite the main flyout.\n    } else {\n      if (this.toolboxPosition_ === toolbox.Position.LEFT) {\n        x = 0;\n      } else {\n        // Because the anchor point of the flyout is on the left, but we want\n        // to align the right edge of the flyout with the right edge of the\n        // blocklyDiv, we calculate the full width of the div minus the width\n        // of the flyout.\n        x = viewMetrics.width + absoluteMetrics.left - this.width_;\n      }\n    }\n\n    return x;\n  }\n\n  /**\n   * Calculates the y coordinate for the flyout position.\n   * @return {number} Y coordinate.\n   */\n  getY() {\n    // Y is always 0 since this is a vertical flyout.\n    return 0;\n  }\n\n  /**\n   * Move the flyout to the edge of the workspace.\n   */\n  position() {\n    if (!this.isVisible() || !this.targetWorkspace.isVisible()) {\n      return;\n    }\n    const metricsManager = this.targetWorkspace.getMetricsManager();\n    const targetWorkspaceViewMetrics = metricsManager.getViewMetrics();\n\n    // Record the height for workspace metrics.\n    this.height_ = targetWorkspaceViewMetrics.height;\n\n    const edgeWidth = this.width_ - this.CORNER_RADIUS;\n    const edgeHeight =\n        targetWorkspaceViewMetrics.height - 2 * this.CORNER_RADIUS;\n    this.setBackgroundPath_(edgeWidth, edgeHeight);\n\n    const x = this.getX();\n    const y = this.getY();\n\n    this.positionAt_(this.width_, this.height_, x, y);\n  }\n\n  /**\n   * Create and set the path for the visible boundaries of the flyout.\n   * @param {number} width The width of the flyout, not including the\n   *     rounded corners.\n   * @param {number} height The height of the flyout, not including\n   *     rounded corners.\n   * @private\n   */\n  setBackgroundPath_(width, height) {\n    const atRight = this.toolboxPosition_ === toolbox.Position.RIGHT;\n    const totalWidth = width + this.CORNER_RADIUS;\n\n    // Decide whether to start on the left or right.\n    const path = ['M ' + (atRight ? totalWidth : 0) + ',0'];\n    // Top.\n    path.push('h', atRight ? -width : width);\n    // Rounded corner.\n    path.push(\n        'a', this.CORNER_RADIUS, this.CORNER_RADIUS, 0, 0, atRight ? 0 : 1,\n        atRight ? -this.CORNER_RADIUS : this.CORNER_RADIUS, this.CORNER_RADIUS);\n    // Side closest to workspace.\n    path.push('v', Math.max(0, height));\n    // Rounded corner.\n    path.push(\n        'a', this.CORNER_RADIUS, this.CORNER_RADIUS, 0, 0, atRight ? 0 : 1,\n        atRight ? this.CORNER_RADIUS : -this.CORNER_RADIUS, this.CORNER_RADIUS);\n    // Bottom.\n    path.push('h', atRight ? width : -width);\n    path.push('z');\n    this.svgBackground_.setAttribute('d', path.join(' '));\n  }\n\n  /**\n   * Scroll the flyout to the top.\n   */\n  scrollToStart() {\n    this.workspace_.scrollbar.setY(0);\n  }\n\n  /**\n   * Scroll the flyout.\n   * @param {!Event} e Mouse wheel scroll event.\n   * @protected\n   */\n  wheel_(e) {\n    const scrollDelta = browserEvents.getScrollDeltaPixels(e);\n\n    if (scrollDelta.y) {\n      const metricsManager = this.workspace_.getMetricsManager();\n      const scrollMetrics = metricsManager.getScrollMetrics();\n      const viewMetrics = metricsManager.getViewMetrics();\n      const pos = (viewMetrics.top - scrollMetrics.top) + scrollDelta.y;\n\n      this.workspace_.scrollbar.setY(pos);\n      // When the flyout moves from a wheel event, hide WidgetDiv and\n      // dropDownDiv.\n      WidgetDiv.hide();\n      dropDownDiv.hideWithoutAnimation();\n    }\n\n    // Don't scroll the page.\n    e.preventDefault();\n    // Don't propagate mousewheel event (zooming).\n    e.stopPropagation();\n  }\n\n  /**\n   * Lay out the blocks in the flyout.\n   * @param {!Array<!Object>} contents The blocks and buttons to lay out.\n   * @param {!Array<number>} gaps The visible gaps between blocks.\n   * @protected\n   */\n  layout_(contents, gaps) {\n    this.workspace_.scale = this.targetWorkspace.scale;\n    const margin = this.MARGIN;\n    const cursorX = this.RTL ? margin : margin + this.tabWidth_;\n    let cursorY = margin;\n\n    for (let i = 0, item; (item = contents[i]); i++) {\n      if (item.type === 'block') {\n        const block = item.block;\n        const allBlocks = block.getDescendants(false);\n        for (let j = 0, child; (child = allBlocks[j]); j++) {\n          // Mark blocks as being inside a flyout.  This is used to detect and\n          // prevent the closure of the flyout if the user right-clicks on such\n          // a block.\n          child.isInFlyout = true;\n        }\n        block.render();\n        const root = block.getSvgRoot();\n        const blockHW = block.getHeightWidth();\n        const moveX =\n            block.outputConnection ? cursorX - this.tabWidth_ : cursorX;\n        block.moveBy(moveX, cursorY);\n\n        const rect = this.createRect_(\n            block, this.RTL ? moveX - blockHW.width : moveX, cursorY, blockHW,\n            i);\n\n        this.addBlockListeners_(root, block, rect);\n\n        cursorY += blockHW.height + gaps[i];\n      } else if (item.type === 'button') {\n        this.initFlyoutButton_(item.button, cursorX, cursorY);\n        cursorY += item.button.height + gaps[i];\n      }\n    }\n  }\n\n  /**\n   * Determine if a drag delta is toward the workspace, based on the position\n   * and orientation of the flyout. This is used in determineDragIntention_ to\n   * determine if a new block should be created or if the flyout should scroll.\n   * @param {!Coordinate} currentDragDeltaXY How far the pointer has\n   *     moved from the position at mouse down, in pixel units.\n   * @return {boolean} True if the drag is toward the workspace.\n   * @package\n   */\n  isDragTowardWorkspace(currentDragDeltaXY) {\n    const dx = currentDragDeltaXY.x;\n    const dy = currentDragDeltaXY.y;\n    // Direction goes from -180 to 180, with 0 toward the right and 90 on top.\n    const dragDirection = Math.atan2(dy, dx) / Math.PI * 180;\n\n    const range = this.dragAngleRange_;\n    // Check for left or right dragging.\n    if ((dragDirection < range && dragDirection > -range) ||\n        (dragDirection < -180 + range || dragDirection > 180 - range)) {\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Returns the bounding rectangle of the drag target area in pixel units\n   * relative to viewport.\n   * @return {?Rect} The component's bounding box. Null if drag\n   *   target area should be ignored.\n   */\n  getClientRect() {\n    if (!this.svgGroup_ || this.autoClose || !this.isVisible()) {\n      // The bounding rectangle won't compute correctly if the flyout is closed\n      // and auto-close flyouts aren't valid drag targets (or delete areas).\n      return null;\n    }\n\n    const flyoutRect = this.svgGroup_.getBoundingClientRect();\n    // BIG_NUM is offscreen padding so that blocks dragged beyond the shown\n    // flyout area are still deleted.  Must be larger than the largest screen\n    // size, but be smaller than half Number.MAX_SAFE_INTEGER (not available on\n    // IE).\n    const BIG_NUM = 1000000000;\n    const left = flyoutRect.left;\n\n    if (this.toolboxPosition_ === toolbox.Position.LEFT) {\n      const width = flyoutRect.width;\n      return new Rect(-BIG_NUM, BIG_NUM, -BIG_NUM, left + width);\n    } else {  // Right\n      return new Rect(-BIG_NUM, BIG_NUM, left, BIG_NUM);\n    }\n  }\n\n  /**\n   * Compute width of flyout.  toolbox.Position mat under each block.\n   * For RTL: Lay out the blocks and buttons to be right-aligned.\n   * @protected\n   */\n  reflowInternal_() {\n    this.workspace_.scale = this.getFlyoutScale();\n    let flyoutWidth = 0;\n    const blocks = this.workspace_.getTopBlocks(false);\n    for (let i = 0, block; (block = blocks[i]); i++) {\n      let width = block.getHeightWidth().width;\n      if (block.outputConnection) {\n        width -= this.tabWidth_;\n      }\n      flyoutWidth = Math.max(flyoutWidth, width);\n    }\n    for (let i = 0, button; (button = this.buttons_[i]); i++) {\n      flyoutWidth = Math.max(flyoutWidth, button.width);\n    }\n    flyoutWidth += this.MARGIN * 1.5 + this.tabWidth_;\n    flyoutWidth *= this.workspace_.scale;\n    flyoutWidth += Scrollbar.scrollbarThickness;\n\n    if (this.width_ !== flyoutWidth) {\n      for (let i = 0, block; (block = blocks[i]); i++) {\n        if (this.RTL) {\n          // With the flyoutWidth known, right-align the blocks.\n          const oldX = block.getRelativeToSurfaceXY().x;\n          let newX = flyoutWidth / this.workspace_.scale - this.MARGIN;\n          if (!block.outputConnection) {\n            newX -= this.tabWidth_;\n          }\n          block.moveBy(newX - oldX, 0);\n        }\n        if (this.rectMap_.has(block)) {\n          this.moveRectToBlock_(this.rectMap_.get(block), block);\n        }\n      }\n      if (this.RTL) {\n        // With the flyoutWidth known, right-align the buttons.\n        for (let i = 0, button; (button = this.buttons_[i]); i++) {\n          const y = button.getPosition().y;\n          const x = flyoutWidth / this.workspace_.scale - button.width -\n              this.MARGIN - this.tabWidth_;\n          button.moveTo(x, y);\n        }\n      }\n\n      if (this.targetWorkspace.toolboxPosition === this.toolboxPosition_ &&\n          this.toolboxPosition_ === toolbox.Position.LEFT &&\n          !this.targetWorkspace.getToolbox()) {\n        // This flyout is a simple toolbox. Reposition the workspace so that\n        // (0,0) is in the correct position relative to the new absolute edge\n        // (ie toolbox edge).\n        this.targetWorkspace.translate(\n            this.targetWorkspace.scrollX + flyoutWidth,\n            this.targetWorkspace.scrollY);\n      }\n\n      // Record the width for workspace metrics and .position.\n      this.width_ = flyoutWidth;\n      this.position();\n      this.targetWorkspace.recordDragTargets();\n    }\n  }\n}\n\n/**\n * The name of the vertical flyout in the registry.\n * @type {string}\n */\nVerticalFlyout.registryName = 'verticalFlyout';\n\nregistry.register(\n    registry.Type.FLYOUTS_VERTICAL_TOOLBOX, registry.DEFAULT, VerticalFlyout);\n\nexports.VerticalFlyout = VerticalFlyout;\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The interface for a toolbox item.\n */\n\n'use strict';\n\n/**\n * The interface for a toolbox item.\n * @namespace Blockly.IToolboxItem\n */\ngoog.module('Blockly.IToolboxItem');\n\n\n/**\n * Interface for an item in the toolbox.\n * @interface\n * @alias Blockly.IToolboxItem\n */\nconst IToolboxItem = function() {};\n\n/**\n * Initializes the toolbox item.\n * This includes creating the DOM and updating the state of any items based\n * on the info object.\n * @return {void}\n * @public\n */\nIToolboxItem.prototype.init;\n\n/**\n * Gets the div for the toolbox item.\n * @return {?Element} The div for the toolbox item.\n * @public\n */\nIToolboxItem.prototype.getDiv;\n\n/**\n * Gets a unique identifier for this toolbox item.\n * @return {string} The ID for the toolbox item.\n * @public\n */\nIToolboxItem.prototype.getId;\n\n/**\n * Gets the parent if the toolbox item is nested.\n * @return {?IToolboxItem} The parent toolbox item, or null if\n *     this toolbox item is not nested.\n * @public\n */\nIToolboxItem.prototype.getParent;\n\n/**\n * Gets the nested level of the category.\n * @return {number} The nested level of the category.\n * @package\n */\nIToolboxItem.prototype.getLevel;\n\n/**\n * Whether the toolbox item is selectable.\n * @return {boolean} True if the toolbox item can be selected.\n * @public\n */\nIToolboxItem.prototype.isSelectable;\n\n/**\n * Whether the toolbox item is collapsible.\n * @return {boolean} True if the toolbox item is collapsible.\n * @public\n */\nIToolboxItem.prototype.isCollapsible;\n\n/**\n * Dispose of this toolbox item. No-op by default.\n * @public\n */\nIToolboxItem.prototype.dispose;\n\nexports.IToolboxItem = IToolboxItem;\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview An item in the toolbox.\n */\n'use strict';\n\n/**\n * An item in the toolbox.\n * @class\n */\ngoog.module('Blockly.ToolboxItem');\n\nconst idGenerator = goog.require('Blockly.utils.idGenerator');\n/* eslint-disable-next-line no-unused-vars */\nconst toolbox = goog.requireType('Blockly.utils.toolbox');\n/* eslint-disable-next-line no-unused-vars */\nconst {ICollapsibleToolboxItem} = goog.requireType('Blockly.ICollapsibleToolboxItem');\n/* eslint-disable-next-line no-unused-vars */\nconst {IToolboxItem} = goog.require('Blockly.IToolboxItem');\n/* eslint-disable-next-line no-unused-vars */\nconst {IToolbox} = goog.requireType('Blockly.IToolbox');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceSvg} = goog.requireType('Blockly.WorkspaceSvg');\n\n\n/**\n * Class for an item in the toolbox.\n * @implements {IToolboxItem}\n * @alias Blockly.ToolboxItem\n */\nclass ToolboxItem {\n  /**\n   * @param {!toolbox.ToolboxItemInfo} toolboxItemDef The JSON defining\n   *     the toolbox item.\n   * @param {!IToolbox} toolbox The toolbox that holds the toolbox item.\n   * @param {ICollapsibleToolboxItem=} opt_parent The parent toolbox item\n   *     or null if the category does not have a parent.\n   */\n  constructor(toolboxItemDef, toolbox, opt_parent) {\n    /**\n     * The id for the category.\n     * @type {string}\n     * @protected\n     */\n    this.id_ = toolboxItemDef['toolboxitemid'] || idGenerator.getNextUniqueId();\n\n    /**\n     * The parent of the category.\n     * @type {?ICollapsibleToolboxItem}\n     * @protected\n     */\n    this.parent_ = opt_parent || null;\n\n    /**\n     * The level that the category is nested at.\n     * @type {number}\n     * @protected\n     */\n    this.level_ = this.parent_ ? this.parent_.getLevel() + 1 : 0;\n\n    /**\n     * The JSON definition of the toolbox item.\n     * @type {?toolbox.ToolboxItemInfo}\n     * @protected\n     */\n    this.toolboxItemDef_ = toolboxItemDef;\n\n    /**\n     * The toolbox this category belongs to.\n     * @type {!IToolbox}\n     * @protected\n     */\n    this.parentToolbox_ = toolbox;\n\n    /**\n     * The workspace of the parent toolbox.\n     * @type {!WorkspaceSvg}\n     * @protected\n     */\n    this.workspace_ = this.parentToolbox_.getWorkspace();\n  }\n\n  /**\n   * Initializes the toolbox item.\n   * This includes creating the DOM and updating the state of any items based\n   * on the info object.\n   * @public\n   */\n  init() {\n    // No-op by default.\n  }\n\n  /**\n   * Gets the div for the toolbox item.\n   * @return {?Element} The div for the toolbox item.\n   * @public\n   */\n  getDiv() {\n    return null;\n  }\n\n  /**\n   * Gets the HTML element that is clickable.\n   * The parent toolbox element receives clicks. The parent toolbox will add an\n   * ID to this element so it can pass the onClick event to the correct\n   * toolboxItem.\n   * @return {?Element} The HTML element that receives clicks, or null if this\n   *     item should not receive clicks.\n   * @public\n   */\n  getClickTarget() {\n    return null;\n  }\n\n  /**\n   * Gets a unique identifier for this toolbox item.\n   * @return {string} The ID for the toolbox item.\n   * @public\n   */\n  getId() {\n    return this.id_;\n  }\n\n  /**\n   * Gets the parent if the toolbox item is nested.\n   * @return {?IToolboxItem} The parent toolbox item, or null if\n   *     this toolbox item is not nested.\n   * @public\n   */\n  getParent() {\n    return null;\n  }\n\n  /**\n   * Gets the nested level of the category.\n   * @return {number} The nested level of the category.\n   * @package\n   */\n  getLevel() {\n    return this.level_;\n  }\n\n  /**\n   * Whether the toolbox item is selectable.\n   * @return {boolean} True if the toolbox item can be selected.\n   * @public\n   */\n  isSelectable() {\n    return false;\n  }\n\n  /**\n   * Whether the toolbox item is collapsible.\n   * @return {boolean} True if the toolbox item is collapsible.\n   * @public\n   */\n  isCollapsible() {\n    return false;\n  }\n\n  /**\n   * Dispose of this toolbox item. No-op by default.\n   * @public\n   */\n  dispose() {}\n}\n\nexports.ToolboxItem = ToolboxItem;\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview A toolbox category used to organize blocks in the toolbox.\n */\n'use strict';\n\n/**\n * A toolbox category used to organize blocks in the toolbox.\n * @class\n */\ngoog.module('Blockly.ToolboxCategory');\n\nconst Css = goog.require('Blockly.Css');\nconst aria = goog.require('Blockly.utils.aria');\nconst colourUtils = goog.require('Blockly.utils.colour');\nconst dom = goog.require('Blockly.utils.dom');\nconst object = goog.require('Blockly.utils.object');\nconst parsing = goog.require('Blockly.utils.parsing');\nconst registry = goog.require('Blockly.registry');\nconst toolbox = goog.require('Blockly.utils.toolbox');\n/* eslint-disable-next-line no-unused-vars */\nconst {ICollapsibleToolboxItem} = goog.requireType('Blockly.ICollapsibleToolboxItem');\n/* eslint-disable-next-line no-unused-vars */\nconst {ISelectableToolboxItem} = goog.require('Blockly.ISelectableToolboxItem');\n/* eslint-disable-next-line no-unused-vars */\nconst {IToolbox} = goog.requireType('Blockly.IToolbox');\nconst {ToolboxItem} = goog.require('Blockly.ToolboxItem');\n\n\n/**\n * Class for a category in a toolbox.\n * @implements {ISelectableToolboxItem}\n * @alias Blockly.ToolboxCategory\n */\nclass ToolboxCategory extends ToolboxItem {\n  /**\n   * @param {!toolbox.CategoryInfo} categoryDef The information needed\n   *     to create a category in the toolbox.\n   * @param {!IToolbox} toolbox The parent toolbox for the category.\n   * @param {ICollapsibleToolboxItem=} opt_parent The parent category or null if\n   *     the category does not have a parent.\n   */\n  constructor(categoryDef, toolbox, opt_parent) {\n    super(categoryDef, toolbox, opt_parent);\n\n    /** @type {!toolbox.CategoryInfo} */\n    this.toolboxItemDef_;\n\n    /**\n     * The name that will be displayed on the category.\n     * @type {string}\n     * @protected\n     */\n    this.name_ = '';\n\n    /**\n     * The colour of the category.\n     * @type {string}\n     * @protected\n     */\n    this.colour_ = '';\n\n    /**\n     * The html container for the category.\n     * @type {?HTMLDivElement}\n     * @protected\n     */\n    this.htmlDiv_ = null;\n\n    /**\n     * The html element for the category row.\n     * @type {?HTMLDivElement}\n     * @protected\n     */\n    this.rowDiv_ = null;\n\n    /**\n     * The html element that holds children elements of the category row.\n     * @type {?HTMLDivElement}\n     * @protected\n     */\n    this.rowContents_ = null;\n\n    /**\n     * The html element for the toolbox icon.\n     * @type {?Element}\n     * @protected\n     */\n    this.iconDom_ = null;\n\n    /**\n     * The html element for the toolbox label.\n     * @type {?Element}\n     * @protected\n     */\n    this.labelDom_ = null;\n\n    /**\n     * All the css class names that are used to create a category.\n     * @type {!ToolboxCategory.CssConfig}\n     * @protected\n     */\n    this.cssConfig_ = this.makeDefaultCssConfig_();\n\n    /**\n     * True if the category is meant to be hidden, false otherwise.\n     * @type {boolean}\n     * @protected\n     */\n    this.isHidden_ = false;\n\n    /**\n     * True if this category is disabled, false otherwise.\n     * @type {boolean}\n     * @protected\n     */\n    this.isDisabled_ = false;\n\n    /**\n     * The flyout items for this category.\n     * @type {string|!toolbox.FlyoutItemInfoArray}\n     * @protected\n     */\n    this.flyoutItems_ = [];\n  }\n\n  /**\n   * Initializes the toolbox item.\n   * This includes creating the DOM and updating the state of any items based\n   * on the info object.\n   * Init should be called immediately after the construction of the toolbox\n   * item, to ensure that the category contents are properly parsed.\n   * @override\n   */\n  init() {\n    this.parseCategoryDef_(this.toolboxItemDef_);\n    this.parseContents_(this.toolboxItemDef_);\n    this.createDom_();\n    if (this.toolboxItemDef_['hidden'] === 'true') {\n      this.hide();\n    }\n  }\n\n\n  /**\n   * Creates an object holding the default classes for a category.\n   * @return {!ToolboxCategory.CssConfig} The configuration object holding\n   *    all the CSS classes for a category.\n   * @protected\n   */\n  makeDefaultCssConfig_() {\n    return {\n      'container': 'blocklyToolboxCategory',\n      'row': 'blocklyTreeRow',\n      'rowcontentcontainer': 'blocklyTreeRowContentContainer',\n      'icon': 'blocklyTreeIcon',\n      'label': 'blocklyTreeLabel',\n      'contents': 'blocklyToolboxContents',\n      'selected': 'blocklyTreeSelected',\n      'openicon': 'blocklyTreeIconOpen',\n      'closedicon': 'blocklyTreeIconClosed',\n    };\n  }\n\n  /**\n   * Parses the contents array depending on if the category is a dynamic\n   * category, or if its contents are meant to be shown in the flyout.\n   * @param {!toolbox.CategoryInfo} categoryDef The information needed\n   *     to create a category.\n   * @protected\n   */\n  parseContents_(categoryDef) {\n    const contents = categoryDef['contents'];\n\n    if (categoryDef['custom']) {\n      this.flyoutItems_ = categoryDef['custom'];\n    } else if (contents) {\n      for (let i = 0; i < contents.length; i++) {\n        const itemDef = contents[i];\n        const flyoutItem =\n            /** @type {toolbox.FlyoutItemInfo} */ (itemDef);\n        this.flyoutItems_.push(flyoutItem);\n      }\n    }\n  }\n\n  /**\n   * Parses the non-contents parts of the category def.\n   * @param {!toolbox.CategoryInfo} categoryDef The information needed to create\n   *     a category.\n   * @protected\n   */\n  parseCategoryDef_(categoryDef) {\n    this.name_ = parsing.replaceMessageReferences(categoryDef['name']);\n    this.colour_ = this.getColour_(categoryDef);\n    object.mixin(\n        this.cssConfig_, categoryDef['cssconfig'] || categoryDef['cssConfig']);\n  }\n\n  /**\n   * Creates the DOM for the category.\n   * @return {!HTMLDivElement} The parent element for the category.\n   * @protected\n   */\n  createDom_() {\n    this.htmlDiv_ = this.createContainer_();\n    aria.setRole(this.htmlDiv_, aria.Role.TREEITEM);\n    aria.setState(\n        /** @type {!HTMLDivElement} */ (this.htmlDiv_), aria.State.SELECTED,\n        false);\n    aria.setState(\n        /** @type {!HTMLDivElement} */ (this.htmlDiv_), aria.State.LEVEL,\n        this.level_);\n\n    this.rowDiv_ = this.createRowContainer_();\n    this.rowDiv_.style.pointerEvents = 'auto';\n    this.htmlDiv_.appendChild(this.rowDiv_);\n\n    this.rowContents_ = this.createRowContentsContainer_();\n    this.rowContents_.style.pointerEvents = 'none';\n    this.rowDiv_.appendChild(this.rowContents_);\n\n    this.iconDom_ = this.createIconDom_();\n    aria.setRole(this.iconDom_, aria.Role.PRESENTATION);\n    this.rowContents_.appendChild(this.iconDom_);\n\n    this.labelDom_ = this.createLabelDom_(this.name_);\n    this.rowContents_.appendChild(this.labelDom_);\n    aria.setState(\n        /** @type {!Element} */ (this.htmlDiv_), aria.State.LABELLEDBY,\n        this.labelDom_.getAttribute('id'));\n\n    this.addColourBorder_(this.colour_);\n\n    return this.htmlDiv_;\n  }\n\n  /**\n   * Creates the container that holds the row and any subcategories.\n   * @return {!HTMLDivElement} The div that holds the icon and the label.\n   * @protected\n   */\n  createContainer_() {\n    const container =\n        /** @type {!HTMLDivElement} */ (document.createElement('div'));\n    dom.addClass(container, this.cssConfig_['container']);\n    return container;\n  }\n\n  /**\n   * Creates the parent of the contents container. All clicks will happen on\n   * this div.\n   * @return {!HTMLDivElement} The div that holds the contents container.\n   * @protected\n   */\n  createRowContainer_() {\n    const rowDiv =\n        /** @type {!HTMLDivElement} */ (document.createElement('div'));\n    dom.addClass(rowDiv, this.cssConfig_['row']);\n    let nestedPadding = ToolboxCategory.nestedPadding * this.getLevel();\n    nestedPadding = nestedPadding.toString() + 'px';\n    this.workspace_.RTL ? rowDiv.style.paddingRight = nestedPadding :\n                          rowDiv.style.paddingLeft = nestedPadding;\n    return rowDiv;\n  }\n\n  /**\n   * Creates the container for the label and icon.\n   * This is necessary so we can set all subcategory pointer events to none.\n   * @return {!HTMLDivElement} The div that holds the icon and the label.\n   * @protected\n   */\n  createRowContentsContainer_() {\n    const contentsContainer =\n        /** @type {!HTMLDivElement} */ (document.createElement('div'));\n    dom.addClass(contentsContainer, this.cssConfig_['rowcontentcontainer']);\n    return contentsContainer;\n  }\n\n  /**\n   * Creates the span that holds the category icon.\n   * @return {!Element} The span that holds the category icon.\n   * @protected\n   */\n  createIconDom_() {\n    const toolboxIcon = document.createElement('span');\n    if (!this.parentToolbox_.isHorizontal()) {\n      dom.addClass(toolboxIcon, this.cssConfig_['icon']);\n    }\n\n    toolboxIcon.style.display = 'inline-block';\n    return toolboxIcon;\n  }\n\n  /**\n   * Creates the span that holds the category label.\n   * This should have an ID for accessibility purposes.\n   * @param {string} name The name of the category.\n   * @return {!Element} The span that holds the category label.\n   * @protected\n   */\n  createLabelDom_(name) {\n    const toolboxLabel = document.createElement('span');\n    toolboxLabel.setAttribute('id', this.getId() + '.label');\n    toolboxLabel.textContent = name;\n    dom.addClass(toolboxLabel, this.cssConfig_['label']);\n    return toolboxLabel;\n  }\n\n  /**\n   * Updates the colour for this category.\n   * @public\n   */\n  refreshTheme() {\n    this.colour_ = this.getColour_(/** @type {toolbox.CategoryInfo} **/\n                                   (this.toolboxItemDef_));\n    this.addColourBorder_(this.colour_);\n  }\n\n  /**\n   * Add the strip of colour to the toolbox category.\n   * @param {string} colour The category colour.\n   * @protected\n   */\n  addColourBorder_(colour) {\n    if (colour) {\n      const border =\n          ToolboxCategory.borderWidth + 'px solid ' + (colour || '#ddd');\n      if (this.workspace_.RTL) {\n        this.rowDiv_.style.borderRight = border;\n      } else {\n        this.rowDiv_.style.borderLeft = border;\n      }\n    }\n  }\n\n  /**\n   * Gets either the colour or the style for a category.\n   * @param {!toolbox.CategoryInfo} categoryDef The object holding\n   *    information on the category.\n   * @return {string} The hex colour for the category.\n   * @protected\n   */\n  getColour_(categoryDef) {\n    const styleName =\n        categoryDef['categorystyle'] || categoryDef['categoryStyle'];\n    const colour = categoryDef['colour'];\n\n    if (colour && styleName) {\n      console.warn(\n          'Toolbox category \"' + this.name_ +\n          '\" must not have both a style and a colour');\n    } else if (styleName) {\n      return this.getColourfromStyle_(styleName);\n    } else {\n      return this.parseColour_(colour);\n    }\n    return '';\n  }\n\n  /**\n   * Sets the colour for the category using the style name and returns the new\n   * colour as a hex string.\n   * @param {string} styleName Name of the style.\n   * @return {string} The hex colour for the category.\n   * @private\n   */\n  getColourfromStyle_(styleName) {\n    const theme = this.workspace_.getTheme();\n    if (styleName && theme) {\n      const style = theme.categoryStyles[styleName];\n      if (style && style.colour) {\n        return this.parseColour_(style.colour);\n      } else {\n        console.warn(\n            'Style \"' + styleName + '\" must exist and contain a colour value');\n      }\n    }\n    return '';\n  }\n\n  /**\n   * Gets the HTML element that is clickable.\n   * The parent toolbox element receives clicks. The parent toolbox will add an\n   * ID to this element so it can pass the onClick event to the correct\n   * toolboxItem.\n   * @return {!Element} The HTML element that receives clicks.\n   * @public\n   */\n  getClickTarget() {\n    return /** @type {!Element} */ (this.rowDiv_);\n  }\n\n  /**\n   * Parses the colour on the category.\n   * @param {number|string} colourValue HSV hue value (0 to 360), #RRGGBB\n   *     string, or a message reference string pointing to one of those two\n   *     values.\n   * @return {string} The hex colour for the category.\n   * @private\n   */\n  parseColour_(colourValue) {\n    // Decode the colour for any potential message references\n    // (eg. `%{BKY_MATH_HUE}`).\n    const colour = parsing.replaceMessageReferences(colourValue);\n    if (colour == null || colour === '') {\n      // No attribute. No colour.\n      return '';\n    } else {\n      const hue = Number(colour);\n      if (!isNaN(hue)) {\n        return colourUtils.hueToHex(hue);\n      } else {\n        const hex = colourUtils.parse(colour);\n        if (hex) {\n          return hex;\n        } else {\n          console.warn(\n              'Toolbox category \"' + this.name_ +\n              '\" has unrecognized colour attribute: ' + colour);\n          return '';\n        }\n      }\n    }\n  }\n\n  /**\n   * Adds appropriate classes to display an open icon.\n   * @param {?Element} iconDiv The div that holds the icon.\n   * @protected\n   */\n  openIcon_(iconDiv) {\n    if (!iconDiv) {\n      return;\n    }\n    dom.removeClasses(iconDiv, this.cssConfig_['closedicon']);\n    dom.addClass(iconDiv, this.cssConfig_['openicon']);\n  }\n\n  /**\n   * Adds appropriate classes to display a closed icon.\n   * @param {?Element} iconDiv The div that holds the icon.\n   * @protected\n   */\n  closeIcon_(iconDiv) {\n    if (!iconDiv) {\n      return;\n    }\n    dom.removeClasses(iconDiv, this.cssConfig_['openicon']);\n    dom.addClass(iconDiv, this.cssConfig_['closedicon']);\n  }\n\n  /**\n   * Sets whether the category is visible or not.\n   * For a category to be visible its parent category must also be expanded.\n   * @param {boolean} isVisible True if category should be visible.\n   * @protected\n   */\n  setVisible_(isVisible) {\n    this.htmlDiv_.style.display = isVisible ? 'block' : 'none';\n    this.isHidden_ = !isVisible;\n\n    if (this.parentToolbox_.getSelectedItem() === this) {\n      this.parentToolbox_.clearSelection();\n    }\n  }\n\n  /**\n   * Hide the category.\n   */\n  hide() {\n    this.setVisible_(false);\n  }\n\n  /**\n   * Show the category. Category will only appear if its parent category is also\n   * expanded.\n   */\n  show() {\n    this.setVisible_(true);\n  }\n\n  /**\n   * Whether the category is visible.\n   * A category is only visible if all of its ancestors are expanded and\n   * isHidden_ is false.\n   * @return {boolean} True if the category is visible, false otherwise.\n   * @public\n   */\n  isVisible() {\n    return !this.isHidden_ && this.allAncestorsExpanded_();\n  }\n\n  /**\n   * Whether all ancestors of a category (parent and parent's parent, etc.) are\n   * expanded.\n   * @return {boolean} True only if every ancestor is expanded\n   * @protected\n   */\n  allAncestorsExpanded_() {\n    let category = this;\n    while (category.getParent()) {\n      category = category.getParent();\n      if (!category.isExpanded()) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  /**\n   * @override\n   */\n  isSelectable() {\n    return this.isVisible() && !this.isDisabled_;\n  }\n\n  /**\n   * Handles when the toolbox item is clicked.\n   * @param {!Event} _e Click event to handle.\n   * @public\n   */\n  onClick(_e) {\n    // No-op\n  }\n\n  /**\n   * Sets the current category as selected.\n   * @param {boolean} isSelected True if this category is selected, false\n   *     otherwise.\n   * @public\n   */\n  setSelected(isSelected) {\n    if (isSelected) {\n      const defaultColour =\n          this.parseColour_(ToolboxCategory.defaultBackgroundColour);\n      this.rowDiv_.style.backgroundColor = this.colour_ || defaultColour;\n      dom.addClass(this.rowDiv_, this.cssConfig_['selected']);\n    } else {\n      this.rowDiv_.style.backgroundColor = '';\n      dom.removeClass(this.rowDiv_, this.cssConfig_['selected']);\n    }\n    aria.setState(\n        /** @type {!Element} */ (this.htmlDiv_), aria.State.SELECTED,\n        isSelected);\n  }\n\n  /**\n   * Sets whether the category is disabled.\n   * @param {boolean} isDisabled True to disable the category, false otherwise.\n   */\n  setDisabled(isDisabled) {\n    this.isDisabled_ = isDisabled;\n    this.getDiv().setAttribute('disabled', isDisabled);\n    isDisabled ? this.getDiv().setAttribute('disabled', 'true') :\n                 this.getDiv().removeAttribute('disabled');\n  }\n\n  /**\n   * Gets the name of the category. Used for emitting events.\n   * @return {string} The name of the toolbox item.\n   * @public\n   */\n  getName() {\n    return this.name_;\n  }\n\n  /**\n   * @override\n   */\n  getParent() {\n    return this.parent_;\n  }\n\n  /**\n   * @override\n   */\n  getDiv() {\n    return this.htmlDiv_;\n  }\n\n  /**\n   * Gets the contents of the category. These are items that are meant to be\n   * displayed in the flyout.\n   * @return {!toolbox.FlyoutItemInfoArray|string} The definition\n   *     of items to be displayed in the flyout.\n   * @public\n   */\n  getContents() {\n    return this.flyoutItems_;\n  }\n\n  /**\n   * Updates the contents to be displayed in the flyout.\n   * If the flyout is open when the contents are updated, refreshSelection on\n   * the toolbox must also be called.\n   * @param {!toolbox.FlyoutDefinition|string} contents The contents\n   *     to be displayed in the flyout. A string can be supplied to create a\n   *     dynamic category.\n   * @public\n   */\n  updateFlyoutContents(contents) {\n    this.flyoutItems_ = [];\n\n    if (typeof contents === 'string') {\n      this.toolboxItemDef_['custom'] = contents;\n    } else {\n      // Removes old custom field when contents is updated.\n      delete this.toolboxItemDef_['custom'];\n      this.toolboxItemDef_['contents'] =\n          toolbox.convertFlyoutDefToJsonArray(contents);\n    }\n    this.parseContents_(\n        /** @type {toolbox.CategoryInfo} */ (this.toolboxItemDef_));\n  }\n\n  /**\n   * @override\n   */\n  dispose() {\n    dom.removeNode(this.htmlDiv_);\n  }\n}\n\n/**\n * All the CSS class names that are used to create a category.\n * @typedef {{\n *            container:(string|undefined),\n *            row:(string|undefined),\n *            rowcontentcontainer:(string|undefined),\n *            icon:(string|undefined),\n *            label:(string|undefined),\n *            selected:(string|undefined),\n *            openicon:(string|undefined),\n *            closedicon:(string|undefined)\n *          }}\n */\nToolboxCategory.CssConfig;\n\n/**\n * Name used for registering a toolbox category.\n * @type {string}\n */\nToolboxCategory.registrationName = 'category';\n\n/**\n * The number of pixels to move the category over at each nested level.\n * @type {number}\n */\nToolboxCategory.nestedPadding = 19;\n\n/**\n * The width in pixels of the strip of colour next to each category.\n * @type {number}\n */\nToolboxCategory.borderWidth = 8;\n\n/**\n * The default colour of the category. This is used as the background colour of\n * the category when it is selected.\n * @type {string}\n */\nToolboxCategory.defaultBackgroundColour = '#57e';\n\n/**\n * CSS for Toolbox.  See css.js for use.\n */\nCss.register(`\n.blocklyTreeRow:not(.blocklyTreeSelected):hover {\n  background-color: rgba(255, 255, 255, .2);\n}\n\n.blocklyToolboxDiv[layout=\"h\"] .blocklyToolboxCategory {\n  margin: 1px 5px 1px 0;\n}\n\n.blocklyToolboxDiv[dir=\"RTL\"][layout=\"h\"] .blocklyToolboxCategory {\n  margin: 1px 0 1px 5px;\n}\n\n.blocklyTreeRow {\n  height: 22px;\n  line-height: 22px;\n  margin-bottom: 3px;\n  padding-right: 8px;\n  white-space: nowrap;\n}\n\n.blocklyToolboxDiv[dir=\"RTL\"] .blocklyTreeRow {\n  margin-left: 8px;\n  padding-right: 0;\n}\n\n.blocklyTreeIcon {\n  background-image: url(<<<PATH>>>/sprites.png);\n  height: 16px;\n  vertical-align: middle;\n  visibility: hidden;\n  width: 16px;\n}\n\n.blocklyTreeIconClosed {\n  background-position: -32px -1px;\n}\n\n.blocklyToolboxDiv[dir=\"RTL\"] .blocklyTreeIconClosed {\n  background-position: 0 -1px;\n}\n\n.blocklyTreeSelected>.blocklyTreeIconClosed {\n  background-position: -32px -17px;\n}\n\n.blocklyToolboxDiv[dir=\"RTL\"] .blocklyTreeSelected>.blocklyTreeIconClosed {\n  background-position: 0 -17px;\n}\n\n.blocklyTreeIconOpen {\n  background-position: -16px -1px;\n}\n\n.blocklyTreeSelected>.blocklyTreeIconOpen {\n  background-position: -16px -17px;\n}\n\n.blocklyTreeLabel {\n  cursor: default;\n  font: 16px sans-serif;\n  padding: 0 3px;\n  vertical-align: middle;\n}\n\n.blocklyToolboxDelete .blocklyTreeLabel {\n  cursor: url(\"<<<PATH>>>/handdelete.cur\"), auto;\n}\n\n.blocklyTreeSelected .blocklyTreeLabel {\n  color: #fff;\n}\n`);\n\nregistry.register(\n    registry.Type.TOOLBOX_ITEM, ToolboxCategory.registrationName,\n    ToolboxCategory);\n\nexports.ToolboxCategory = ToolboxCategory;\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview A separator used for separating toolbox categories.\n */\n'use strict';\n\n/**\n * A separator used for separating toolbox categories.\n * @class\n */\ngoog.module('Blockly.ToolboxSeparator');\n\nconst Css = goog.require('Blockly.Css');\nconst dom = goog.require('Blockly.utils.dom');\nconst object = goog.require('Blockly.utils.object');\nconst registry = goog.require('Blockly.registry');\n/* eslint-disable-next-line no-unused-vars */\nconst toolbox = goog.requireType('Blockly.utils.toolbox');\n/* eslint-disable-next-line no-unused-vars */\nconst {IToolbox} = goog.requireType('Blockly.IToolbox');\nconst {ToolboxItem} = goog.require('Blockly.ToolboxItem');\n\n\n/**\n * Class for a toolbox separator. This is the thin visual line that appears on\n * the toolbox. This item is not interactable.\n * @extends {ToolboxItem}\n * @alias Blockly.ToolboxSeparator\n */\nclass ToolboxSeparator extends ToolboxItem {\n  /**\n   * @param {!toolbox.SeparatorInfo} separatorDef The information\n   *     needed to create a separator.\n   * @param {!IToolbox} toolbox The parent toolbox for the separator.\n   */\n  constructor(separatorDef, toolbox) {\n    super(separatorDef, toolbox);\n    /**\n     * All the CSS class names that are used to create a separator.\n     * @type {!ToolboxSeparator.CssConfig}\n     * @protected\n     */\n    this.cssConfig_ = {'container': 'blocklyTreeSeparator'};\n\n    /**\n     * @type {?HTMLDivElement}\n     * @private\n     */\n    this.htmlDiv_ = null;\n\n    const cssConfig = separatorDef['cssconfig'] || separatorDef['cssConfig'];\n    object.mixin(this.cssConfig_, cssConfig);\n  }\n\n  /**\n   * @override\n   */\n  init() {\n    this.createDom_();\n  }\n\n  /**\n   * Creates the DOM for a separator.\n   * @return {!HTMLDivElement} The parent element for the separator.\n   * @protected\n   */\n  createDom_() {\n    const container =\n        /** @type {!HTMLDivElement} */ (document.createElement('div'));\n    dom.addClass(container, this.cssConfig_['container']);\n    this.htmlDiv_ = container;\n    return container;\n  }\n\n  /**\n   * @override\n   */\n  getDiv() {\n    return /** @type {!HTMLDivElement} */ (this.htmlDiv_);\n  }\n\n  /**\n   * @override\n   */\n  dispose() {\n    dom.removeNode(/** @type {!HTMLDivElement} */ (this.htmlDiv_));\n  }\n}\n\n/**\n * All the CSS class names that are used to create a separator.\n * @typedef {{\n *            container:(string|undefined)\n *          }}\n */\nToolboxSeparator.CssConfig;\n\n/**\n * Name used for registering a toolbox separator.\n * @type {string}\n */\nToolboxSeparator.registrationName = 'sep';\n\n/**\n * CSS for Toolbox.  See css.js for use.\n */\nCss.register(`\n.blocklyTreeSeparator {\n  border-bottom: solid #e5e5e5 1px;\n  height: 0;\n  margin: 5px 0;\n}\n\n.blocklyToolboxDiv[layout=\"h\"] .blocklyTreeSeparator {\n  border-right: solid #e5e5e5 1px;\n  border-bottom: none;\n  height: auto;\n  margin: 0 5px 0 5px;\n  padding: 5px 0;\n  width: 0;\n}\n`);\n\nregistry.register(\n    registry.Type.TOOLBOX_ITEM, ToolboxSeparator.registrationName,\n    ToolboxSeparator);\n\nexports.ToolboxSeparator = ToolboxSeparator;\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview A toolbox category used to organize blocks in the toolbox.\n */\n'use strict';\n\n/**\n * A toolbox category used to organize blocks in the toolbox.\n * @class\n */\ngoog.module('Blockly.CollapsibleToolboxCategory');\n\nconst aria = goog.require('Blockly.utils.aria');\nconst dom = goog.require('Blockly.utils.dom');\nconst registry = goog.require('Blockly.registry');\nconst toolbox = goog.require('Blockly.utils.toolbox');\n/* eslint-disable-next-line no-unused-vars */\nconst {ICollapsibleToolboxItem} = goog.require('Blockly.ICollapsibleToolboxItem');\n/* eslint-disable-next-line no-unused-vars */\nconst {IToolboxItem} = goog.requireType('Blockly.IToolboxItem');\n/* eslint-disable-next-line no-unused-vars */\nconst {IToolbox} = goog.requireType('Blockly.IToolbox');\nconst {ToolboxCategory} = goog.require('Blockly.ToolboxCategory');\nconst {ToolboxSeparator} = goog.require('Blockly.ToolboxSeparator');\n\n\n/**\n * Class for a category in a toolbox that can be collapsed.\n * @implements {ICollapsibleToolboxItem}\n * @alias Blockly.CollapsibleToolboxCategory\n */\nclass CollapsibleToolboxCategory extends ToolboxCategory {\n  /**\n   * @param {!toolbox.CategoryInfo} categoryDef The information needed\n   *     to create a category in the toolbox.\n   * @param {!IToolbox} toolbox The parent toolbox for the category.\n   * @param {ICollapsibleToolboxItem=} opt_parent The parent category or null if\n   *     the category does not have a parent.\n   */\n  constructor(categoryDef, toolbox, opt_parent) {\n    super(categoryDef, toolbox, opt_parent);\n\n    /**\n     * Container for any child categories.\n     * @type {?HTMLDivElement}\n     * @protected\n     */\n    this.subcategoriesDiv_ = null;\n\n    /**\n     * Whether or not the category should display its subcategories.\n     * @type {boolean}\n     * @protected\n     */\n    this.expanded_ = false;\n\n    /**\n     * The child toolbox items for this category.\n     * @type {!Array<!IToolboxItem>}\n     * @protected\n     */\n    this.toolboxItems_ = [];\n  }\n\n  /**\n   * @override\n   */\n  makeDefaultCssConfig_() {\n    const cssConfig = super.makeDefaultCssConfig_();\n    cssConfig['contents'] = 'blocklyToolboxContents';\n    return cssConfig;\n  }\n\n  /**\n   * @override\n   */\n  parseContents_(categoryDef) {\n    const contents = categoryDef['contents'];\n    let prevIsFlyoutItem = true;\n\n    if (categoryDef['custom']) {\n      this.flyoutItems_ = categoryDef['custom'];\n    } else if (contents) {\n      for (let i = 0; i < contents.length; i++) {\n        const itemDef = contents[i];\n        // Separators can exist as either a flyout item or a toolbox item so\n        // decide where it goes based on the type of the previous item.\n        if (!registry.hasItem(registry.Type.TOOLBOX_ITEM, itemDef['kind']) ||\n            (itemDef['kind'].toLowerCase() ===\n                 ToolboxSeparator.registrationName &&\n             prevIsFlyoutItem)) {\n          const flyoutItem = /** @type {toolbox.FlyoutItemInfo} */ (itemDef);\n          this.flyoutItems_.push(flyoutItem);\n          prevIsFlyoutItem = true;\n        } else {\n          this.createToolboxItem_(itemDef);\n          prevIsFlyoutItem = false;\n        }\n      }\n    }\n  }\n\n  /**\n   * Creates a toolbox item and adds it to the list of toolbox items.\n   * @param {!toolbox.ToolboxItemInfo} itemDef The information needed\n   *     to create a toolbox item.\n   * @private\n   */\n  createToolboxItem_(itemDef) {\n    let registryName = itemDef['kind'];\n    const categoryDef = /** @type {!toolbox.CategoryInfo} */ (itemDef);\n\n    // Categories that are collapsible are created using a class registered\n    // under a different name.\n    if (registryName.toUpperCase() == 'CATEGORY' &&\n        toolbox.isCategoryCollapsible(categoryDef)) {\n      registryName = CollapsibleToolboxCategory.registrationName;\n    }\n    const ToolboxItemClass =\n        registry.getClass(registry.Type.TOOLBOX_ITEM, registryName);\n    const toolboxItem =\n        new ToolboxItemClass(itemDef, this.parentToolbox_, this);\n    this.toolboxItems_.push(toolboxItem);\n  }\n\n  /**\n   * @override\n   */\n  init() {\n    super.init();\n\n    this.setExpanded(\n        this.toolboxItemDef_['expanded'] === 'true' ||\n        this.toolboxItemDef_['expanded']);\n  }\n\n  /**\n   * @override\n   */\n  createDom_() {\n    super.createDom_();\n\n    const subCategories = this.getChildToolboxItems();\n    this.subcategoriesDiv_ = this.createSubCategoriesDom_(subCategories);\n    aria.setRole(this.subcategoriesDiv_, aria.Role.GROUP);\n    this.htmlDiv_.appendChild(this.subcategoriesDiv_);\n\n    return this.htmlDiv_;\n  }\n\n  /**\n   * @override\n   */\n  createIconDom_() {\n    const toolboxIcon = document.createElement('span');\n    if (!this.parentToolbox_.isHorizontal()) {\n      dom.addClass(toolboxIcon, this.cssConfig_['icon']);\n      toolboxIcon.style.visibility = 'visible';\n    }\n\n    toolboxIcon.style.display = 'inline-block';\n    return toolboxIcon;\n  }\n\n  /**\n   * Create the DOM for all subcategories.\n   * @param {!Array<!IToolboxItem>} subcategories The subcategories.\n   * @return {!HTMLDivElement} The div holding all the subcategories.\n   * @protected\n   */\n  createSubCategoriesDom_(subcategories) {\n    const contentsContainer =\n        /** @type {!HTMLDivElement} */ (document.createElement('div'));\n    dom.addClass(contentsContainer, this.cssConfig_['contents']);\n\n    for (let i = 0; i < subcategories.length; i++) {\n      const newCategory = subcategories[i];\n      newCategory.init();\n      const newCategoryDiv = newCategory.getDiv();\n      contentsContainer.appendChild(newCategoryDiv);\n      if (newCategory.getClickTarget) {\n        newCategory.getClickTarget().setAttribute('id', newCategory.getId());\n      }\n    }\n    return contentsContainer;\n  }\n\n  /**\n   * Opens or closes the current category.\n   * @param {boolean} isExpanded True to expand the category, false to close.\n   * @public\n   */\n  setExpanded(isExpanded) {\n    if (this.expanded_ === isExpanded) {\n      return;\n    }\n    this.expanded_ = isExpanded;\n    if (isExpanded) {\n      this.subcategoriesDiv_.style.display = 'block';\n      this.openIcon_(this.iconDom_);\n    } else {\n      this.subcategoriesDiv_.style.display = 'none';\n      this.closeIcon_(this.iconDom_);\n    }\n    aria.setState(\n        /** @type {!HTMLDivElement} */ (this.htmlDiv_), aria.State.EXPANDED,\n        isExpanded);\n\n    this.parentToolbox_.handleToolboxItemResize();\n  }\n\n  /**\n   * @override\n   */\n  setVisible_(isVisible) {\n    this.htmlDiv_.style.display = isVisible ? 'block' : 'none';\n    const childToolboxItems = this.getChildToolboxItems();\n    for (let i = 0; i < childToolboxItems.length; i++) {\n      const child = childToolboxItems[i];\n      child.setVisible_(isVisible);\n    }\n    this.isHidden_ = !isVisible;\n\n    if (this.parentToolbox_.getSelectedItem() === this) {\n      this.parentToolbox_.clearSelection();\n    }\n  }\n\n  /**\n   * Whether the category is expanded to show its child subcategories.\n   * @return {boolean} True if the toolbox item shows its children, false if it\n   *     is collapsed.\n   * @public\n   */\n  isExpanded() {\n    return this.expanded_;\n  }\n\n  /**\n   * @override\n   */\n  isCollapsible() {\n    return true;\n  }\n\n  /**\n   * @override\n   */\n  onClick(_e) {\n    this.toggleExpanded();\n  }\n\n  /**\n   * Toggles whether or not the category is expanded.\n   * @public\n   */\n  toggleExpanded() {\n    this.setExpanded(!this.expanded_);\n  }\n\n  /**\n   * @override\n   */\n  getDiv() {\n    return this.htmlDiv_;\n  }\n\n  /**\n   * Gets any children toolbox items. (ex. Gets the subcategories)\n   * @return {!Array<!IToolboxItem>} The child toolbox items.\n   */\n  getChildToolboxItems() {\n    return this.toolboxItems_;\n  }\n}\n\n/**\n * All the CSS class names that are used to create a collapsible\n * category. This is all the properties from the regular category plus contents.\n * @typedef {{\n *            container:?string,\n *            row:?string,\n *            rowcontentcontainer:?string,\n *            icon:?string,\n *            label:?string,\n *            selected:?string,\n *            openicon:?string,\n *            closedicon:?string,\n *            contents:?string\n *          }}\n */\nCollapsibleToolboxCategory.CssConfig;\n\n/**\n * Name used for registering a collapsible toolbox category.\n * @type {string}\n * @override\n */\nCollapsibleToolboxCategory.registrationName = 'collapsibleCategory';\n\n\nregistry.register(\n    registry.Type.TOOLBOX_ITEM, CollapsibleToolboxCategory.registrationName,\n    CollapsibleToolboxCategory);\n\nexports.CollapsibleToolboxCategory = CollapsibleToolboxCategory;\n","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The interface for a component that is automatically hidden\n * when WorkspaceSvg.hideChaff is called.\n */\n\n'use strict';\n\n/**\n * The interface for a component that is automatically hidden\n * when WorkspaceSvg.hideChaff is called.\n * @namespace Blockly.IAutoHideable\n */\ngoog.module('Blockly.IAutoHideable');\n\n/* eslint-disable-next-line no-unused-vars */\nconst {IComponent} = goog.require('Blockly.IComponent');\n\n\n/**\n * Interface for a component that can be automatically hidden.\n * @extends {IComponent}\n * @interface\n * @alias Blockly.IAutoHideable\n */\nconst IAutoHideable = function() {};\n\n/**\n * Hides the component. Called in WorkspaceSvg.hideChaff.\n * @param {boolean} onlyClosePopups Whether only popups should be closed.\n *   Flyouts should not be closed if this is true.\n */\nIAutoHideable.prototype.autoHide;\n\nexports.IAutoHideable = IAutoHideable;\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Events fired as a result of selecting an item on the toolbox.\n */\n'use strict';\n\n/**\n * Events fired as a result of selecting an item on the toolbox.\n * @class\n */\ngoog.module('Blockly.Events.ToolboxItemSelect');\n\nconst eventUtils = goog.require('Blockly.Events.utils');\nconst registry = goog.require('Blockly.registry');\nconst {UiBase} = goog.require('Blockly.Events.UiBase');\n\n\n/**\n * Class for a toolbox item select event.\n * @extends {UiBase}\n * @alias Blockly.Events.ToolboxItemSelect\n */\nclass ToolboxItemSelect extends UiBase {\n  /**\n   * @param {?string=} opt_oldItem The previously selected toolbox item.\n   *     Undefined for a blank event.\n   * @param {?string=} opt_newItem The newly selected toolbox item. Undefined\n   *     for a blank event.\n   * @param {string=} opt_workspaceId The workspace identifier for this event.\n   *    Undefined for a blank event.\n   */\n  constructor(opt_oldItem, opt_newItem, opt_workspaceId) {\n    super(opt_workspaceId);\n\n    /**\n     * The previously selected toolbox item.\n     * @type {?string|undefined}\n     */\n    this.oldItem = opt_oldItem;\n\n    /**\n     * The newly selected toolbox item.\n     * @type {?string|undefined}\n     */\n    this.newItem = opt_newItem;\n\n    /**\n     * Type of this event.\n     * @type {string}\n     */\n    this.type = eventUtils.TOOLBOX_ITEM_SELECT;\n  }\n\n  /**\n   * Encode the event as JSON.\n   * @return {!Object} JSON representation.\n   */\n  toJson() {\n    const json = super.toJson();\n    json['oldItem'] = this.oldItem;\n    json['newItem'] = this.newItem;\n    return json;\n  }\n\n  /**\n   * Decode the JSON event.\n   * @param {!Object} json JSON representation.\n   */\n  fromJson(json) {\n    super.fromJson(json);\n    this.oldItem = json['oldItem'];\n    this.newItem = json['newItem'];\n  }\n}\n\nregistry.register(\n    registry.Type.EVENT, eventUtils.TOOLBOX_ITEM_SELECT, ToolboxItemSelect);\n\nexports.ToolboxItemSelect = ToolboxItemSelect;\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Toolbox from whence to create blocks.\n */\n'use strict';\n\n/**\n * Toolbox from whence to create blocks.\n * @class\n */\ngoog.module('Blockly.Toolbox');\n\nconst Css = goog.require('Blockly.Css');\nconst Touch = goog.require('Blockly.Touch');\nconst aria = goog.require('Blockly.utils.aria');\nconst browserEvents = goog.require('Blockly.browserEvents');\nconst common = goog.require('Blockly.common');\nconst dom = goog.require('Blockly.utils.dom');\nconst eventUtils = goog.require('Blockly.Events.utils');\nconst registry = goog.require('Blockly.registry');\nconst toolbox = goog.require('Blockly.utils.toolbox');\nconst {BlockSvg} = goog.require('Blockly.BlockSvg');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlocklyOptions} = goog.requireType('Blockly.BlocklyOptions');\nconst {CollapsibleToolboxCategory} = goog.require('Blockly.CollapsibleToolboxCategory');\nconst {ComponentManager} = goog.require('Blockly.ComponentManager');\nconst {DeleteArea} = goog.require('Blockly.DeleteArea');\n/* eslint-disable-next-line no-unused-vars */\nconst {IAutoHideable} = goog.require('Blockly.IAutoHideable');\n/* eslint-disable-next-line no-unused-vars */\nconst {ICollapsibleToolboxItem} = goog.requireType('Blockly.ICollapsibleToolboxItem');\n/* eslint-disable-next-line no-unused-vars */\nconst {IDraggable} = goog.requireType('Blockly.IDraggable');\n/* eslint-disable-next-line no-unused-vars */\nconst {IFlyout} = goog.requireType('Blockly.IFlyout');\n/* eslint-disable-next-line no-unused-vars */\nconst {IKeyboardAccessible} = goog.require('Blockly.IKeyboardAccessible');\n/* eslint-disable-next-line no-unused-vars */\nconst {ISelectableToolboxItem} = goog.requireType('Blockly.ISelectableToolboxItem');\n/* eslint-disable-next-line no-unused-vars */\nconst {IStyleable} = goog.require('Blockly.IStyleable');\n/* eslint-disable-next-line no-unused-vars */\nconst {IToolboxItem} = goog.requireType('Blockly.IToolboxItem');\n/* eslint-disable-next-line no-unused-vars */\nconst {IToolbox} = goog.require('Blockly.IToolbox');\nconst {KeyCodes} = goog.require('Blockly.utils.KeyCodes');\nconst {Options} = goog.require('Blockly.Options');\nconst {Rect} = goog.require('Blockly.utils.Rect');\n/* eslint-disable-next-line no-unused-vars */\nconst {ShortcutRegistry} = goog.requireType('Blockly.ShortcutRegistry');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceSvg} = goog.requireType('Blockly.WorkspaceSvg');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.Events.ToolboxItemSelect');\n\n\n/**\n * Class for a Toolbox.\n * Creates the toolbox's DOM.\n * @implements {IAutoHideable}\n * @implements {IKeyboardAccessible}\n * @implements {IStyleable}\n * @implements {IToolbox}\n * @extends {DeleteArea}\n * @alias Blockly.Toolbox\n */\nclass Toolbox extends DeleteArea {\n  /**\n   * @param {!WorkspaceSvg} workspace The workspace in which to create new\n   *     blocks.\n   */\n  constructor(workspace) {\n    super();\n\n    /**\n     * The workspace this toolbox is on.\n     * @type {!WorkspaceSvg}\n     * @protected\n     */\n    this.workspace_ = workspace;\n\n    /**\n     * The unique id for this component that is used to register with the\n     * ComponentManager.\n     * @type {string}\n     */\n    this.id = 'toolbox';\n\n    /**\n     * The JSON describing the contents of this toolbox.\n     * @type {!toolbox.ToolboxInfo}\n     * @protected\n     */\n    this.toolboxDef_ = workspace.options.languageTree || {'contents': []};\n\n    /**\n     * Whether the toolbox should be laid out horizontally.\n     * @type {boolean}\n     * @private\n     */\n    this.horizontalLayout_ = workspace.options.horizontalLayout;\n\n    /**\n     * The html container for the toolbox.\n     * @type {?HTMLDivElement}\n     */\n    this.HtmlDiv = null;\n\n    /**\n     * The html container for the contents of a toolbox.\n     * @type {?HTMLDivElement}\n     * @protected\n     */\n    this.contentsDiv_ = null;\n\n    /**\n     * Whether the Toolbox is visible.\n     * @type {boolean}\n     * @protected\n     */\n    this.isVisible_ = false;\n\n    /**\n     * The list of items in the toolbox.\n     * @type {!Array<!IToolboxItem>}\n     * @protected\n     */\n    this.contents_ = [];\n\n    /**\n     * The width of the toolbox.\n     * @type {number}\n     * @protected\n     */\n    this.width_ = 0;\n\n    /**\n     * The height of the toolbox.\n     * @type {number}\n     * @protected\n     */\n    this.height_ = 0;\n\n    /**\n     * Is RTL vs LTR.\n     * @type {boolean}\n     */\n    this.RTL = workspace.options.RTL;\n\n    /**\n     * The flyout for the toolbox.\n     * @type {?IFlyout}\n     * @private\n     */\n    this.flyout_ = null;\n\n    /**\n     * A map from toolbox item IDs to toolbox items.\n     * @type {!Object<string, !IToolboxItem>}\n     * @protected\n     */\n    this.contentMap_ = Object.create(null);\n\n    /**\n     * Position of the toolbox and flyout relative to the workspace.\n     * @type {!toolbox.Position}\n     */\n    this.toolboxPosition = workspace.options.toolboxPosition;\n\n    /**\n     * The currently selected item.\n     * @type {?ISelectableToolboxItem}\n     * @protected\n     */\n    this.selectedItem_ = null;\n\n    /**\n     * The previously selected item.\n     * @type {?ISelectableToolboxItem}\n     * @protected\n     */\n    this.previouslySelectedItem_ = null;\n\n    /**\n     * Array holding info needed to unbind event handlers.\n     * Used for disposing.\n     * Ex: [[node, name, func], [node, name, func]].\n     * @type {!Array<!browserEvents.Data>}\n     * @protected\n     */\n    this.boundEvents_ = [];\n  }\n\n  /**\n   * Handles the given keyboard shortcut.\n   * @param {!ShortcutRegistry.KeyboardShortcut} _shortcut The shortcut to be\n   *     handled.\n   * @return {boolean} True if the shortcut has been handled, false otherwise.\n   * @public\n   */\n  onShortcut(_shortcut) {\n    return false;\n  }\n\n  /**\n   * Initializes the toolbox\n   * @public\n   */\n  init() {\n    const workspace = this.workspace_;\n    const svg = workspace.getParentSvg();\n\n    this.flyout_ = this.createFlyout_();\n\n    this.HtmlDiv = this.createDom_(this.workspace_);\n    dom.insertAfter(this.flyout_.createDom('svg'), svg);\n    this.setVisible(true);\n    this.flyout_.init(workspace);\n\n    this.render(this.toolboxDef_);\n    const themeManager = workspace.getThemeManager();\n    themeManager.subscribe(\n        this.HtmlDiv, 'toolboxBackgroundColour', 'background-color');\n    themeManager.subscribe(this.HtmlDiv, 'toolboxForegroundColour', 'color');\n    this.workspace_.getComponentManager().addComponent({\n      component: this,\n      weight: 1,\n      capabilities: [\n        ComponentManager.Capability.AUTOHIDEABLE,\n        ComponentManager.Capability.DELETE_AREA,\n        ComponentManager.Capability.DRAG_TARGET,\n      ],\n    });\n  }\n\n  /**\n   * Creates the DOM for the toolbox.\n   * @param {!WorkspaceSvg} workspace The workspace this toolbox is on.\n   * @return {!HTMLDivElement} The HTML container for the toolbox.\n   * @protected\n   */\n  createDom_(workspace) {\n    const svg = workspace.getParentSvg();\n\n    const container = this.createContainer_();\n\n    this.contentsDiv_ = this.createContentsContainer_();\n    this.contentsDiv_.tabIndex = 0;\n    aria.setRole(this.contentsDiv_, aria.Role.TREE);\n    container.appendChild(this.contentsDiv_);\n\n    svg.parentNode.insertBefore(container, svg);\n\n    this.attachEvents_(container, this.contentsDiv_);\n    return container;\n  }\n\n  /**\n   * Creates the container div for the toolbox.\n   * @return {!HTMLDivElement} The HTML container for the toolbox.\n   * @protected\n   */\n  createContainer_() {\n    const toolboxContainer =\n        /** @type {!HTMLDivElement} */ (document.createElement('div'));\n    toolboxContainer.setAttribute('layout', this.isHorizontal() ? 'h' : 'v');\n    dom.addClass(toolboxContainer, 'blocklyToolboxDiv');\n    dom.addClass(toolboxContainer, 'blocklyNonSelectable');\n    toolboxContainer.setAttribute('dir', this.RTL ? 'RTL' : 'LTR');\n    return toolboxContainer;\n  }\n\n  /**\n   * Creates the container for all the contents in the toolbox.\n   * @return {!HTMLDivElement} The HTML container for the toolbox contents.\n   * @protected\n   */\n  createContentsContainer_() {\n    const contentsContainer =\n        /** @type {!HTMLDivElement} */ (document.createElement('div'));\n    dom.addClass(contentsContainer, 'blocklyToolboxContents');\n    if (this.isHorizontal()) {\n      contentsContainer.style.flexDirection = 'row';\n    }\n    return contentsContainer;\n  }\n\n  /**\n   * Adds event listeners to the toolbox container div.\n   * @param {!HTMLDivElement} container The HTML container for the toolbox.\n   * @param {!HTMLDivElement} contentsContainer The HTML container for the\n   *     contents of the toolbox.\n   * @protected\n   */\n  attachEvents_(container, contentsContainer) {\n    // Clicking on toolbox closes popups.\n    const clickEvent = browserEvents.conditionalBind(\n        container, 'click', this, this.onClick_,\n        /* opt_noCaptureIdentifier */ false,\n        /* opt_noPreventDefault */ true);\n    this.boundEvents_.push(clickEvent);\n\n    const keyDownEvent = browserEvents.conditionalBind(\n        contentsContainer, 'keydown', this, this.onKeyDown_,\n        /* opt_noCaptureIdentifier */ false,\n        /* opt_noPreventDefault */ true);\n    this.boundEvents_.push(keyDownEvent);\n  }\n\n  /**\n   * Handles on click events for when the toolbox or toolbox items are clicked.\n   * @param {!Event} e Click event to handle.\n   * @protected\n   */\n  onClick_(e) {\n    if (browserEvents.isRightButton(e) || e.target === this.HtmlDiv) {\n      // Close flyout.\n      /** @type {!WorkspaceSvg} */ (common.getMainWorkspace()).hideChaff(false);\n    } else {\n      const targetElement = e.target;\n      const itemId = targetElement.getAttribute('id');\n      if (itemId) {\n        const item = this.getToolboxItemById(itemId);\n        if (item.isSelectable()) {\n          this.setSelectedItem(item);\n          item.onClick(e);\n        }\n      }\n      // Just close popups.\n      /** @type {!WorkspaceSvg} */ (common.getMainWorkspace()).hideChaff(true);\n    }\n    Touch.clearTouchIdentifier();  // Don't block future drags.\n  }\n\n  /**\n   * Handles key down events for the toolbox.\n   * @param {!KeyboardEvent} e The key down event.\n   * @protected\n   */\n  onKeyDown_(e) {\n    let handled = false;\n    switch (e.keyCode) {\n      case KeyCodes.DOWN:\n        handled = this.selectNext_();\n        break;\n      case KeyCodes.UP:\n        handled = this.selectPrevious_();\n        break;\n      case KeyCodes.LEFT:\n        handled = this.selectParent_();\n        break;\n      case KeyCodes.RIGHT:\n        handled = this.selectChild_();\n        break;\n      case KeyCodes.ENTER:\n      case KeyCodes.SPACE:\n        if (this.selectedItem_ && this.selectedItem_.isCollapsible()) {\n          const collapsibleItem =\n              /** @type {!ICollapsibleToolboxItem} */ (this.selectedItem_);\n          collapsibleItem.toggleExpanded();\n          handled = true;\n        }\n        break;\n      default:\n        handled = false;\n        break;\n    }\n    if (!handled && this.selectedItem_ && this.selectedItem_.onKeyDown) {\n      handled = this.selectedItem_.onKeyDown(e);\n    }\n\n    if (handled) {\n      e.preventDefault();\n    }\n  }\n\n  /**\n   * Creates the flyout based on the toolbox layout.\n   * @return {!IFlyout} The flyout for the toolbox.\n   * @throws {Error} If missing a require for `Blockly.HorizontalFlyout`,\n   *     `Blockly.VerticalFlyout`, and no flyout plugin is specified.\n   * @protected\n   */\n  createFlyout_() {\n    const workspace = this.workspace_;\n    // TODO (#4247): Look into adding a makeFlyout method to Blockly Options.\n    const workspaceOptions = new Options(\n        /** @type {!BlocklyOptions} */\n        ({\n          'parentWorkspace': workspace,\n          'rtl': workspace.RTL,\n          'oneBasedIndex': workspace.options.oneBasedIndex,\n          'horizontalLayout': workspace.horizontalLayout,\n          'renderer': workspace.options.renderer,\n          'rendererOverrides': workspace.options.rendererOverrides,\n          'move': {\n            'scrollbars': true,\n          },\n        }));\n    // Options takes in either 'end' or 'start'. This has already been parsed to\n    // be either 0 or 1, so set it after.\n    workspaceOptions.toolboxPosition = workspace.options.toolboxPosition;\n    let FlyoutClass = null;\n    if (workspace.horizontalLayout) {\n      FlyoutClass = registry.getClassFromOptions(\n          registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX, workspace.options, true);\n    } else {\n      FlyoutClass = registry.getClassFromOptions(\n          registry.Type.FLYOUTS_VERTICAL_TOOLBOX, workspace.options, true);\n    }\n    return new FlyoutClass(workspaceOptions);\n  }\n\n  /**\n   * Fills the toolbox with new toolbox items and removes any old contents.\n   * @param {!toolbox.ToolboxInfo} toolboxDef Object holding information\n   *     for creating a toolbox.\n   * @package\n   */\n  render(toolboxDef) {\n    this.toolboxDef_ = toolboxDef;\n    for (let i = 0; i < this.contents_.length; i++) {\n      const toolboxItem = this.contents_[i];\n      if (toolboxItem) {\n        toolboxItem.dispose();\n      }\n    }\n    this.contents_ = [];\n    this.contentMap_ = Object.create(null);\n    this.renderContents_(toolboxDef['contents']);\n    this.position();\n    this.handleToolboxItemResize();\n  }\n\n  /**\n   * Adds all the toolbox items to the toolbox.\n   * @param {!Array<!toolbox.ToolboxItemInfo>} toolboxDef Array\n   *     holding objects containing information on the contents of the toolbox.\n   * @protected\n   */\n  renderContents_(toolboxDef) {\n    // This is for performance reasons. By using document fragment we only have\n    // to add to the DOM once.\n    const fragment = document.createDocumentFragment();\n    for (let i = 0; i < toolboxDef.length; i++) {\n      const toolboxItemDef = toolboxDef[i];\n      this.createToolboxItem_(toolboxItemDef, fragment);\n    }\n    this.contentsDiv_.appendChild(fragment);\n  }\n\n  /**\n   * Creates and renders the toolbox item.\n   * @param {!toolbox.ToolboxItemInfo} toolboxItemDef Any information\n   *    that can be used to create an item in the toolbox.\n   * @param {!DocumentFragment} fragment The document fragment to add the child\n   *     toolbox elements to.\n   * @private\n   */\n  createToolboxItem_(toolboxItemDef, fragment) {\n    let registryName = toolboxItemDef['kind'];\n\n    // Categories that are collapsible are created using a class registered\n    // under a different name.\n    if (registryName.toUpperCase() === 'CATEGORY' &&\n        toolbox.isCategoryCollapsible(\n            /** @type {!toolbox.CategoryInfo} */ (toolboxItemDef))) {\n      registryName = CollapsibleToolboxCategory.registrationName;\n    }\n\n    const ToolboxItemClass = registry.getClass(\n        registry.Type.TOOLBOX_ITEM, registryName.toLowerCase());\n    if (ToolboxItemClass) {\n      const toolboxItem = new ToolboxItemClass(toolboxItemDef, this);\n      toolboxItem.init();\n      this.addToolboxItem_(toolboxItem);\n      const toolboxItemDom = toolboxItem.getDiv();\n      if (toolboxItemDom) {\n        fragment.appendChild(toolboxItemDom);\n      }\n      // Adds the ID to the HTML element that can receive a click.\n      // This is used in onClick_ to find the toolboxItem that was clicked.\n      if (toolboxItem.getClickTarget()) {\n        toolboxItem.getClickTarget().setAttribute('id', toolboxItem.getId());\n      }\n    }\n  }\n\n  /**\n   * Adds an item to the toolbox.\n   * @param {!IToolboxItem} toolboxItem The item in the toolbox.\n   * @protected\n   */\n  addToolboxItem_(toolboxItem) {\n    this.contents_.push(toolboxItem);\n    this.contentMap_[toolboxItem.getId()] = toolboxItem;\n    if (toolboxItem.isCollapsible()) {\n      const collapsibleItem = /** @type {ICollapsibleToolboxItem} */\n          (toolboxItem);\n      const childToolboxItems = collapsibleItem.getChildToolboxItems();\n      for (let i = 0; i < childToolboxItems.length; i++) {\n        const child = childToolboxItems[i];\n        this.addToolboxItem_(child);\n      }\n    }\n  }\n\n  /**\n   * Gets the items in the toolbox.\n   * @return {!Array<!IToolboxItem>} The list of items in the toolbox.\n   * @public\n   */\n  getToolboxItems() {\n    return this.contents_;\n  }\n\n  /**\n   * Adds a style on the toolbox. Usually used to change the cursor.\n   * @param {string} style The name of the class to add.\n   * @package\n   */\n  addStyle(style) {\n    dom.addClass(/** @type {!Element} */ (this.HtmlDiv), style);\n  }\n\n  /**\n   * Removes a style from the toolbox. Usually used to change the cursor.\n   * @param {string} style The name of the class to remove.\n   * @package\n   */\n  removeStyle(style) {\n    dom.removeClass(/** @type {!Element} */ (this.HtmlDiv), style);\n  }\n\n  /**\n   * Returns the bounding rectangle of the drag target area in pixel units\n   * relative to viewport.\n   * @return {?Rect} The component's bounding box. Null if drag\n   *   target area should be ignored.\n   */\n  getClientRect() {\n    if (!this.HtmlDiv || !this.isVisible_) {\n      return null;\n    }\n\n    // BIG_NUM is offscreen padding so that blocks dragged beyond the toolbox\n    // area are still deleted.  Must be smaller than Infinity, but larger than\n    // the largest screen size.\n    const BIG_NUM = 10000000;\n    const toolboxRect = this.HtmlDiv.getBoundingClientRect();\n\n    const top = toolboxRect.top;\n    const bottom = top + toolboxRect.height;\n    const left = toolboxRect.left;\n    const right = left + toolboxRect.width;\n\n    // Assumes that the toolbox is on the SVG edge.  If this changes\n    // (e.g. toolboxes in mutators) then this code will need to be more complex.\n    if (this.toolboxPosition === toolbox.Position.TOP) {\n      return new Rect(-BIG_NUM, bottom, -BIG_NUM, BIG_NUM);\n    } else if (this.toolboxPosition === toolbox.Position.BOTTOM) {\n      return new Rect(top, BIG_NUM, -BIG_NUM, BIG_NUM);\n    } else if (this.toolboxPosition === toolbox.Position.LEFT) {\n      return new Rect(-BIG_NUM, BIG_NUM, -BIG_NUM, right);\n    } else {  // Right\n      return new Rect(-BIG_NUM, BIG_NUM, left, BIG_NUM);\n    }\n  }\n\n  /**\n   * Returns whether the provided block or bubble would be deleted if dropped on\n   * this area.\n   * This method should check if the element is deletable and is always called\n   * before onDragEnter/onDragOver/onDragExit.\n   * @param {!IDraggable} element The block or bubble currently being\n   *   dragged.\n   * @param {boolean} _couldConnect Whether the element could could connect to\n   *     another.\n   * @return {boolean} Whether the element provided would be deleted if dropped\n   *     on this area.\n   * @override\n   */\n  wouldDelete(element, _couldConnect) {\n    if (element instanceof BlockSvg) {\n      const block = /** @type {BlockSvg} */ (element);\n      // Prefer dragging to the toolbox over connecting to other blocks.\n      this.updateWouldDelete_(!block.getParent() && block.isDeletable());\n    } else {\n      this.updateWouldDelete_(element.isDeletable());\n    }\n    return this.wouldDelete_;\n  }\n\n  /**\n   * Handles when a cursor with a block or bubble enters this drag target.\n   * @param {!IDraggable} _dragElement The block or bubble currently being\n   *   dragged.\n   * @override\n   */\n  onDragEnter(_dragElement) {\n    this.updateCursorDeleteStyle_(true);\n  }\n\n  /**\n   * Handles when a cursor with a block or bubble exits this drag target.\n   * @param {!IDraggable} _dragElement The block or bubble currently being\n   *   dragged.\n   * @override\n   */\n  onDragExit(_dragElement) {\n    this.updateCursorDeleteStyle_(false);\n  }\n\n  /**\n   * Handles when a block or bubble is dropped on this component.\n   * Should not handle delete here.\n   * @param {!IDraggable} _dragElement The block or bubble currently being\n   *   dragged.\n   * @override\n   */\n  onDrop(_dragElement) {\n    this.updateCursorDeleteStyle_(false);\n  }\n\n  /**\n   * Updates the internal wouldDelete_ state.\n   * @param {boolean} wouldDelete The new value for the wouldDelete state.\n   * @protected\n   * @override\n   */\n  updateWouldDelete_(wouldDelete) {\n    if (wouldDelete === this.wouldDelete_) {\n      return;\n    }\n    // This logic handles updating the deleteStyle properly if the delete state\n    // changes while the block is over the Toolbox. This could happen if the\n    // implementation of wouldDeleteBlock depends on the couldConnect parameter\n    // or if the isDeletable property of the block currently being dragged\n    // changes during the drag.\n    this.updateCursorDeleteStyle_(false);\n    this.wouldDelete_ = wouldDelete;\n    this.updateCursorDeleteStyle_(true);\n  }\n\n  /**\n   * Adds or removes the CSS style of the cursor over the toolbox based whether\n   * the block or bubble over it is expected to be deleted if dropped (using the\n   * internal this.wouldDelete_ property).\n   * @param {boolean} addStyle Whether the style should be added or removed.\n   * @protected\n   */\n  updateCursorDeleteStyle_(addStyle) {\n    const style =\n        this.wouldDelete_ ? 'blocklyToolboxDelete' : 'blocklyToolboxGrab';\n    if (addStyle) {\n      this.addStyle(style);\n    } else {\n      this.removeStyle(style);\n    }\n  }\n\n  /**\n   * Gets the toolbox item with the given ID.\n   * @param {string} id The ID of the toolbox item.\n   * @return {?IToolboxItem} The toolbox item with the given ID, or null\n   *     if no item exists.\n   * @public\n   */\n  getToolboxItemById(id) {\n    return this.contentMap_[id] || null;\n  }\n\n  /**\n   * Gets the width of the toolbox.\n   * @return {number} The width of the toolbox.\n   * @public\n   */\n  getWidth() {\n    return this.width_;\n  }\n\n  /**\n   * Gets the height of the toolbox.\n   * @return {number} The width of the toolbox.\n   * @public\n   */\n  getHeight() {\n    return this.height_;\n  }\n\n  /**\n   * Gets the toolbox flyout.\n   * @return {?IFlyout} The toolbox flyout.\n   * @public\n   */\n  getFlyout() {\n    return this.flyout_;\n  }\n\n  /**\n   * Gets the workspace for the toolbox.\n   * @return {!WorkspaceSvg} The parent workspace for the toolbox.\n   * @public\n   */\n  getWorkspace() {\n    return this.workspace_;\n  }\n\n  /**\n   * Gets the selected item.\n   * @return {?ISelectableToolboxItem} The selected item, or null if no item is\n   *     currently selected.\n   * @public\n   */\n  getSelectedItem() {\n    return this.selectedItem_;\n  }\n\n  /**\n   * Gets the previously selected item.\n   * @return {?ISelectableToolboxItem} The previously selected item, or null if\n   *     no item was previously selected.\n   * @public\n   */\n  getPreviouslySelectedItem() {\n    return this.previouslySelectedItem_;\n  }\n\n  /**\n   * Gets whether or not the toolbox is horizontal.\n   * @return {boolean} True if the toolbox is horizontal, false if the toolbox\n   *     is vertical.\n   * @public\n   */\n  isHorizontal() {\n    return this.horizontalLayout_;\n  }\n\n  /**\n   * Positions the toolbox based on whether it is a horizontal toolbox and\n   * whether the workspace is in rtl.\n   * @public\n   */\n  position() {\n    const workspaceMetrics = this.workspace_.getMetrics();\n    const toolboxDiv = this.HtmlDiv;\n    if (!toolboxDiv) {\n      // Not initialized yet.\n      return;\n    }\n\n    if (this.horizontalLayout_) {\n      toolboxDiv.style.left = '0';\n      toolboxDiv.style.height = 'auto';\n      toolboxDiv.style.width = '100%';\n      this.height_ = toolboxDiv.offsetHeight;\n      this.width_ = workspaceMetrics.viewWidth;\n      if (this.toolboxPosition === toolbox.Position.TOP) {\n        toolboxDiv.style.top = '0';\n      } else {  // Bottom\n        toolboxDiv.style.bottom = '0';\n      }\n    } else {\n      if (this.toolboxPosition === toolbox.Position.RIGHT) {\n        toolboxDiv.style.right = '0';\n      } else {  // Left\n        toolboxDiv.style.left = '0';\n      }\n      toolboxDiv.style.height = '100%';\n      this.width_ = toolboxDiv.offsetWidth;\n      this.height_ = workspaceMetrics.viewHeight;\n    }\n    this.flyout_.position();\n  }\n\n  /**\n   * Handles resizing the toolbox when a toolbox item resizes.\n   * @package\n   */\n  handleToolboxItemResize() {\n    // Reposition the workspace so that (0,0) is in the correct position\n    // relative to the new absolute edge (ie toolbox edge).\n    const workspace = this.workspace_;\n    const rect = this.HtmlDiv.getBoundingClientRect();\n    const newX = this.toolboxPosition === toolbox.Position.LEFT ?\n        workspace.scrollX + rect.width :\n        workspace.scrollX;\n    const newY = this.toolboxPosition === toolbox.Position.TOP ?\n        workspace.scrollY + rect.height :\n        workspace.scrollY;\n    workspace.translate(newX, newY);\n\n    // Even though the div hasn't changed size, the visible workspace\n    // surface of the workspace has, so we may need to reposition everything.\n    common.svgResize(workspace);\n  }\n\n  /**\n   * Unhighlights any previously selected item.\n   * @public\n   */\n  clearSelection() {\n    this.setSelectedItem(null);\n  }\n\n  /**\n   * Updates the category colours and background colour of selected categories.\n   * @package\n   */\n  refreshTheme() {\n    for (let i = 0; i < this.contents_.length; i++) {\n      const child = this.contents_[i];\n      if (child.refreshTheme) {\n        child.refreshTheme();\n      }\n    }\n  }\n\n  /**\n   * Updates the flyout's content without closing it.  Should be used in\n   * response to a change in one of the dynamic categories, such as variables or\n   * procedures.\n   * @public\n   */\n  refreshSelection() {\n    if (this.selectedItem_ && this.selectedItem_.isSelectable() &&\n        this.selectedItem_.getContents().length) {\n      this.flyout_.show(this.selectedItem_.getContents());\n    }\n  }\n\n  /**\n   * Shows or hides the toolbox.\n   * @param {boolean} isVisible True if toolbox should be visible.\n   * @public\n   */\n  setVisible(isVisible) {\n    if (this.isVisible_ === isVisible) {\n      return;\n    }\n\n    this.HtmlDiv.style.display = isVisible ? 'block' : 'none';\n    this.isVisible_ = isVisible;\n    // Invisible toolbox is ignored as drag targets and must have the drag\n    // target updated.\n    this.workspace_.recordDragTargets();\n  }\n\n  /**\n   * Hides the component. Called in WorkspaceSvg.hideChaff.\n   * @param {boolean} onlyClosePopups Whether only popups should be closed.\n   *     Flyouts should not be closed if this is true.\n   */\n  autoHide(onlyClosePopups) {\n    if (!onlyClosePopups && this.flyout_ && this.flyout_.autoClose) {\n      this.clearSelection();\n    }\n  }\n\n  /**\n   * Sets the given item as selected.\n   * No-op if the item is not selectable.\n   * @param {?IToolboxItem} newItem The toolbox item to select.\n   * @public\n   */\n  setSelectedItem(newItem) {\n    const oldItem = this.selectedItem_;\n\n    if ((!newItem && !oldItem) || (newItem && !newItem.isSelectable())) {\n      return;\n    }\n    newItem = /** @type {ISelectableToolboxItem} */ (newItem);\n\n    if (this.shouldDeselectItem_(oldItem, newItem) && oldItem !== null) {\n      this.deselectItem_(oldItem);\n    }\n\n    if (this.shouldSelectItem_(oldItem, newItem) && newItem !== null) {\n      this.selectItem_(oldItem, newItem);\n    }\n\n    this.updateFlyout_(oldItem, newItem);\n    this.fireSelectEvent_(oldItem, newItem);\n  }\n\n  /**\n   * Decides whether the old item should be deselected.\n   * @param {?ISelectableToolboxItem} oldItem The previously selected\n   *     toolbox item.\n   * @param {?ISelectableToolboxItem} newItem The newly selected toolbox\n   *     item.\n   * @return {boolean} True if the old item should be deselected, false\n   *     otherwise.\n   * @protected\n   */\n  shouldDeselectItem_(oldItem, newItem) {\n    // Deselect the old item unless the old item is collapsible and has been\n    // previously clicked on.\n    return oldItem !== null &&\n        (!oldItem.isCollapsible() || oldItem !== newItem);\n  }\n\n  /**\n   * Decides whether the new item should be selected.\n   * @param {?ISelectableToolboxItem} oldItem The previously selected\n   *     toolbox item.\n   * @param {?ISelectableToolboxItem} newItem The newly selected toolbox\n   *     item.\n   * @return {boolean} True if the new item should be selected, false otherwise.\n   * @protected\n   */\n  shouldSelectItem_(oldItem, newItem) {\n    // Select the new item unless the old item equals the new item.\n    return newItem !== null && newItem !== oldItem;\n  }\n\n  /**\n   * Deselects the given item, marks it as unselected, and updates aria state.\n   * @param {!ISelectableToolboxItem} item The previously selected\n   *     toolbox item which should be deselected.\n   * @protected\n   */\n  deselectItem_(item) {\n    this.selectedItem_ = null;\n    this.previouslySelectedItem_ = item;\n    item.setSelected(false);\n    aria.setState(\n        /** @type {!Element} */ (this.contentsDiv_),\n        aria.State.ACTIVEDESCENDANT, '');\n  }\n\n  /**\n   * Selects the given item, marks it selected, and updates aria state.\n   * @param {?ISelectableToolboxItem} oldItem The previously selected\n   *     toolbox item.\n   * @param {!ISelectableToolboxItem} newItem The newly selected toolbox\n   *     item.\n   * @protected\n   */\n  selectItem_(oldItem, newItem) {\n    this.selectedItem_ = newItem;\n    this.previouslySelectedItem_ = oldItem;\n    newItem.setSelected(true);\n    aria.setState(\n        /** @type {!Element} */ (this.contentsDiv_),\n        aria.State.ACTIVEDESCENDANT, newItem.getId());\n  }\n\n  /**\n   * Selects the toolbox item by its position in the list of toolbox items.\n   * @param {number} position The position of the item to select.\n   * @public\n   */\n  selectItemByPosition(position) {\n    if (position > -1 && position < this.contents_.length) {\n      const item = this.contents_[position];\n      if (item.isSelectable()) {\n        this.setSelectedItem(item);\n      }\n    }\n  }\n\n  /**\n   * Decides whether to hide or show the flyout depending on the selected item.\n   * @param {?ISelectableToolboxItem} oldItem The previously selected toolbox\n   *     item.\n   * @param {?ISelectableToolboxItem} newItem The newly selected toolbox item.\n   * @protected\n   */\n  updateFlyout_(oldItem, newItem) {\n    if (!newItem || (oldItem === newItem && !newItem.isCollapsible()) ||\n        !newItem.getContents().length) {\n      this.flyout_.hide();\n    } else {\n      this.flyout_.show(newItem.getContents());\n      this.flyout_.scrollToStart();\n    }\n  }\n\n  /**\n   * Emits an event when a new toolbox item is selected.\n   * @param {?ISelectableToolboxItem} oldItem The previously selected\n   *     toolbox item.\n   * @param {?ISelectableToolboxItem} newItem The newly selected toolbox\n   *     item.\n   * @private\n   */\n  fireSelectEvent_(oldItem, newItem) {\n    const oldElement = oldItem && oldItem.getName();\n    let newElement = newItem && newItem.getName();\n    // In this case the toolbox closes, so the newElement should be null.\n    if (oldItem === newItem) {\n      newElement = null;\n    }\n    const event = new (eventUtils.get(eventUtils.TOOLBOX_ITEM_SELECT))(\n        oldElement, newElement, this.workspace_.id);\n    eventUtils.fire(event);\n  }\n\n  /**\n   * Closes the current item if it is expanded, or selects the parent.\n   * @return {boolean} True if a parent category was selected, false otherwise.\n   * @private\n   */\n  selectParent_() {\n    if (!this.selectedItem_) {\n      return false;\n    }\n\n    if (this.selectedItem_.isCollapsible() && this.selectedItem_.isExpanded()) {\n      const collapsibleItem =\n          /** @type {!ICollapsibleToolboxItem} */ (this.selectedItem_);\n      collapsibleItem.setExpanded(false);\n      return true;\n    } else if (\n        this.selectedItem_.getParent() &&\n        this.selectedItem_.getParent().isSelectable()) {\n      this.setSelectedItem(this.selectedItem_.getParent());\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Selects the first child of the currently selected item, or nothing if the\n   * toolbox item has no children.\n   * @return {boolean} True if a child category was selected, false otherwise.\n   * @private\n   */\n  selectChild_() {\n    if (!this.selectedItem_ || !this.selectedItem_.isCollapsible()) {\n      return false;\n    }\n    const collapsibleItem = /** @type {ICollapsibleToolboxItem} */\n        (this.selectedItem_);\n    if (!collapsibleItem.isExpanded()) {\n      collapsibleItem.setExpanded(true);\n      return true;\n    } else {\n      this.selectNext_();\n      return true;\n    }\n  }\n\n  /**\n   * Selects the next visible toolbox item.\n   * @return {boolean} True if a next category was selected, false otherwise.\n   * @private\n   */\n  selectNext_() {\n    if (!this.selectedItem_) {\n      return false;\n    }\n\n    let nextItemIdx = this.contents_.indexOf(this.selectedItem_) + 1;\n    if (nextItemIdx > -1 && nextItemIdx < this.contents_.length) {\n      let nextItem = this.contents_[nextItemIdx];\n      while (nextItem && !nextItem.isSelectable()) {\n        nextItem = this.contents_[++nextItemIdx];\n      }\n      if (nextItem && nextItem.isSelectable()) {\n        this.setSelectedItem(nextItem);\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Selects the previous visible toolbox item.\n   * @return {boolean} True if a previous category was selected, false\n   *     otherwise.\n   * @private\n   */\n  selectPrevious_() {\n    if (!this.selectedItem_) {\n      return false;\n    }\n\n    let prevItemIdx = this.contents_.indexOf(this.selectedItem_) - 1;\n    if (prevItemIdx > -1 && prevItemIdx < this.contents_.length) {\n      let prevItem = this.contents_[prevItemIdx];\n      while (prevItem && !prevItem.isSelectable()) {\n        prevItem = this.contents_[--prevItemIdx];\n      }\n      if (prevItem && prevItem.isSelectable()) {\n        this.setSelectedItem(prevItem);\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Disposes of this toolbox.\n   * @public\n   */\n  dispose() {\n    this.workspace_.getComponentManager().removeComponent('toolbox');\n    this.flyout_.dispose();\n    for (let i = 0; i < this.contents_.length; i++) {\n      const toolboxItem = this.contents_[i];\n      toolboxItem.dispose();\n    }\n\n    for (let j = 0; j < this.boundEvents_.length; j++) {\n      browserEvents.unbind(this.boundEvents_[j]);\n    }\n    this.boundEvents_ = [];\n    this.contents_ = [];\n\n    this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv);\n    dom.removeNode(this.HtmlDiv);\n  }\n}\n\n/**\n * CSS for Toolbox.  See css.js for use.\n */\nCss.register(`\n.blocklyToolboxDelete {\n  cursor: url(\"<<<PATH>>>/handdelete.cur\"), auto;\n}\n\n.blocklyToolboxGrab {\n  cursor: url(\"<<<PATH>>>/handclosed.cur\"), auto;\n  cursor: grabbing;\n  cursor: -webkit-grabbing;\n}\n\n/* Category tree in Toolbox. */\n.blocklyToolboxDiv {\n  background-color: #ddd;\n  overflow-x: visible;\n  overflow-y: auto;\n  padding: 4px 0 4px 0;\n  position: absolute;\n  z-index: 70;  /* so blocks go under toolbox when dragging */\n  -webkit-tap-highlight-color: transparent;  /* issue #1345 */\n}\n\n.blocklyToolboxContents {\n  display: flex;\n  flex-wrap: wrap;\n  flex-direction: column;\n}\n\n.blocklyToolboxContents:focus {\n  outline: none;\n}\n`);\n\nregistry.register(registry.Type.TOOLBOX, registry.DEFAULT, Toolbox);\n\nexports.Toolbox = Toolbox;\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Horizontal flyout tray containing blocks which may be created.\n */\n'use strict';\n\n/**\n * Horizontal flyout tray containing blocks which may be created.\n * @class\n */\ngoog.module('Blockly.HorizontalFlyout');\n\nconst WidgetDiv = goog.require('Blockly.WidgetDiv');\nconst browserEvents = goog.require('Blockly.browserEvents');\nconst dropDownDiv = goog.require('Blockly.dropDownDiv');\nconst registry = goog.require('Blockly.registry');\nconst toolbox = goog.require('Blockly.utils.toolbox');\n/* eslint-disable-next-line no-unused-vars */\nconst {Coordinate} = goog.requireType('Blockly.utils.Coordinate');\nconst {Flyout} = goog.require('Blockly.Flyout');\n/* eslint-disable-next-line no-unused-vars */\nconst {Options} = goog.requireType('Blockly.Options');\nconst {Rect} = goog.require('Blockly.utils.Rect');\nconst {Scrollbar} = goog.require('Blockly.Scrollbar');\n\n\n/**\n * Class for a flyout.\n * @extends {Flyout}\n * @alias Blockly.HorizontalFlyout\n */\nclass HorizontalFlyout extends Flyout {\n  /**\n   * @param {!Options} workspaceOptions Dictionary of options for the\n   *     workspace.\n   */\n  constructor(workspaceOptions) {\n    super(workspaceOptions);\n    this.horizontalLayout = true;\n  }\n\n  /**\n   * Sets the translation of the flyout to match the scrollbars.\n   * @param {!{x:number,y:number}} xyRatio Contains a y property which is a\n   *     float between 0 and 1 specifying the degree of scrolling and a similar\n   *     x property.\n   * @protected\n   */\n  setMetrics_(xyRatio) {\n    if (!this.isVisible()) {\n      return;\n    }\n\n    const metricsManager = this.workspace_.getMetricsManager();\n    const scrollMetrics = metricsManager.getScrollMetrics();\n    const viewMetrics = metricsManager.getViewMetrics();\n    const absoluteMetrics = metricsManager.getAbsoluteMetrics();\n\n    if (typeof xyRatio.x === 'number') {\n      this.workspace_.scrollX =\n          -(scrollMetrics.left +\n            (scrollMetrics.width - viewMetrics.width) * xyRatio.x);\n    }\n\n    this.workspace_.translate(\n        this.workspace_.scrollX + absoluteMetrics.left,\n        this.workspace_.scrollY + absoluteMetrics.top);\n  }\n\n  /**\n   * Calculates the x coordinate for the flyout position.\n   * @return {number} X coordinate.\n   */\n  getX() {\n    // X is always 0 since this is a horizontal flyout.\n    return 0;\n  }\n\n  /**\n   * Calculates the y coordinate for the flyout position.\n   * @return {number} Y coordinate.\n   */\n  getY() {\n    if (!this.isVisible()) {\n      return 0;\n    }\n    const metricsManager = this.targetWorkspace.getMetricsManager();\n    const absoluteMetrics = metricsManager.getAbsoluteMetrics();\n    const viewMetrics = metricsManager.getViewMetrics();\n    const toolboxMetrics = metricsManager.getToolboxMetrics();\n\n    let y = 0;\n    const atTop = this.toolboxPosition_ === toolbox.Position.TOP;\n    // If this flyout is not the trashcan flyout (e.g. toolbox or mutator).\n    if (this.targetWorkspace.toolboxPosition === this.toolboxPosition_) {\n      // If there is a category toolbox.\n      if (this.targetWorkspace.getToolbox()) {\n        if (atTop) {\n          y = toolboxMetrics.height;\n        } else {\n          y = viewMetrics.height - this.height_;\n        }\n        // Simple (flyout-only) toolbox.\n      } else {\n        if (atTop) {\n          y = 0;\n        } else {\n          // The simple flyout does not cover the workspace.\n          y = viewMetrics.height;\n        }\n      }\n      // Trashcan flyout is opposite the main flyout.\n    } else {\n      if (atTop) {\n        y = 0;\n      } else {\n        // Because the anchor point of the flyout is on the top, but we want\n        // to align the bottom edge of the flyout with the bottom edge of the\n        // blocklyDiv, we calculate the full height of the div minus the height\n        // of the flyout.\n        y = viewMetrics.height + absoluteMetrics.top - this.height_;\n      }\n    }\n\n    return y;\n  }\n\n  /**\n   * Move the flyout to the edge of the workspace.\n   */\n  position() {\n    if (!this.isVisible() || !this.targetWorkspace.isVisible()) {\n      return;\n    }\n    const metricsManager = this.targetWorkspace.getMetricsManager();\n    const targetWorkspaceViewMetrics = metricsManager.getViewMetrics();\n\n    // Record the width for workspace metrics.\n    this.width_ = targetWorkspaceViewMetrics.width;\n\n    const edgeWidth = targetWorkspaceViewMetrics.width - 2 * this.CORNER_RADIUS;\n    const edgeHeight = this.height_ - this.CORNER_RADIUS;\n    this.setBackgroundPath_(edgeWidth, edgeHeight);\n\n    const x = this.getX();\n    const y = this.getY();\n\n    this.positionAt_(this.width_, this.height_, x, y);\n  }\n\n  /**\n   * Create and set the path for the visible boundaries of the flyout.\n   * @param {number} width The width of the flyout, not including the\n   *     rounded corners.\n   * @param {number} height The height of the flyout, not including\n   *     rounded corners.\n   * @private\n   */\n  setBackgroundPath_(width, height) {\n    const atTop = this.toolboxPosition_ === toolbox.Position.TOP;\n    // Start at top left.\n    const path = ['M 0,' + (atTop ? 0 : this.CORNER_RADIUS)];\n\n    if (atTop) {\n      // Top.\n      path.push('h', width + 2 * this.CORNER_RADIUS);\n      // Right.\n      path.push('v', height);\n      // Bottom.\n      path.push(\n          'a', this.CORNER_RADIUS, this.CORNER_RADIUS, 0, 0, 1,\n          -this.CORNER_RADIUS, this.CORNER_RADIUS);\n      path.push('h', -width);\n      // Left.\n      path.push(\n          'a', this.CORNER_RADIUS, this.CORNER_RADIUS, 0, 0, 1,\n          -this.CORNER_RADIUS, -this.CORNER_RADIUS);\n      path.push('z');\n    } else {\n      // Top.\n      path.push(\n          'a', this.CORNER_RADIUS, this.CORNER_RADIUS, 0, 0, 1,\n          this.CORNER_RADIUS, -this.CORNER_RADIUS);\n      path.push('h', width);\n      // Right.\n      path.push(\n          'a', this.CORNER_RADIUS, this.CORNER_RADIUS, 0, 0, 1,\n          this.CORNER_RADIUS, this.CORNER_RADIUS);\n      path.push('v', height);\n      // Bottom.\n      path.push('h', -width - 2 * this.CORNER_RADIUS);\n      // Left.\n      path.push('z');\n    }\n    this.svgBackground_.setAttribute('d', path.join(' '));\n  }\n\n  /**\n   * Scroll the flyout to the top.\n   */\n  scrollToStart() {\n    this.workspace_.scrollbar.setX(this.RTL ? Infinity : 0);\n  }\n\n  /**\n   * Scroll the flyout.\n   * @param {!Event} e Mouse wheel scroll event.\n   * @protected\n   */\n  wheel_(e) {\n    const scrollDelta = browserEvents.getScrollDeltaPixels(e);\n    const delta = scrollDelta.x || scrollDelta.y;\n\n    if (delta) {\n      const metricsManager = this.workspace_.getMetricsManager();\n      const scrollMetrics = metricsManager.getScrollMetrics();\n      const viewMetrics = metricsManager.getViewMetrics();\n\n      const pos = (viewMetrics.left - scrollMetrics.left) + delta;\n      this.workspace_.scrollbar.setX(pos);\n      // When the flyout moves from a wheel event, hide WidgetDiv and\n      // dropDownDiv.\n      WidgetDiv.hide();\n      dropDownDiv.hideWithoutAnimation();\n    }\n\n    // Don't scroll the page.\n    e.preventDefault();\n    // Don't propagate mousewheel event (zooming).\n    e.stopPropagation();\n  }\n\n  /**\n   * Lay out the blocks in the flyout.\n   * @param {!Array<!Object>} contents The blocks and buttons to lay out.\n   * @param {!Array<number>} gaps The visible gaps between blocks.\n   * @protected\n   */\n  layout_(contents, gaps) {\n    this.workspace_.scale = this.targetWorkspace.scale;\n    const margin = this.MARGIN;\n    let cursorX = margin + this.tabWidth_;\n    const cursorY = margin;\n    if (this.RTL) {\n      contents = contents.reverse();\n    }\n\n    for (let i = 0, item; (item = contents[i]); i++) {\n      if (item.type === 'block') {\n        const block = item.block;\n        const allBlocks = block.getDescendants(false);\n        for (let j = 0, child; (child = allBlocks[j]); j++) {\n          // Mark blocks as being inside a flyout.  This is used to detect and\n          // prevent the closure of the flyout if the user right-clicks on such\n          // a block.\n          child.isInFlyout = true;\n        }\n        block.render();\n        const root = block.getSvgRoot();\n        const blockHW = block.getHeightWidth();\n\n        // Figure out where to place the block.\n        const tab = block.outputConnection ? this.tabWidth_ : 0;\n        let moveX;\n        if (this.RTL) {\n          moveX = cursorX + blockHW.width;\n        } else {\n          moveX = cursorX - tab;\n        }\n        block.moveBy(moveX, cursorY);\n\n        const rect = this.createRect_(block, moveX, cursorY, blockHW, i);\n        cursorX += (blockHW.width + gaps[i]);\n\n        this.addBlockListeners_(root, block, rect);\n      } else if (item.type === 'button') {\n        this.initFlyoutButton_(item.button, cursorX, cursorY);\n        cursorX += (item.button.width + gaps[i]);\n      }\n    }\n  }\n\n  /**\n   * Determine if a drag delta is toward the workspace, based on the position\n   * and orientation of the flyout. This is used in determineDragIntention_ to\n   * determine if a new block should be created or if the flyout should scroll.\n   * @param {!Coordinate} currentDragDeltaXY How far the pointer has\n   *     moved from the position at mouse down, in pixel units.\n   * @return {boolean} True if the drag is toward the workspace.\n   * @package\n   */\n  isDragTowardWorkspace(currentDragDeltaXY) {\n    const dx = currentDragDeltaXY.x;\n    const dy = currentDragDeltaXY.y;\n    // Direction goes from -180 to 180, with 0 toward the right and 90 on top.\n    const dragDirection = Math.atan2(dy, dx) / Math.PI * 180;\n\n    const range = this.dragAngleRange_;\n    // Check for up or down dragging.\n    if ((dragDirection < 90 + range && dragDirection > 90 - range) ||\n        (dragDirection > -90 - range && dragDirection < -90 + range)) {\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Returns the bounding rectangle of the drag target area in pixel units\n   * relative to viewport.\n   * @return {?Rect} The component's bounding box. Null if drag\n   *   target area should be ignored.\n   */\n  getClientRect() {\n    if (!this.svgGroup_ || this.autoClose || !this.isVisible()) {\n      // The bounding rectangle won't compute correctly if the flyout is closed\n      // and auto-close flyouts aren't valid drag targets (or delete areas).\n      return null;\n    }\n\n    const flyoutRect = this.svgGroup_.getBoundingClientRect();\n    // BIG_NUM is offscreen padding so that blocks dragged beyond the shown\n    // flyout area are still deleted.  Must be larger than the largest screen\n    // size, but be smaller than half Number.MAX_SAFE_INTEGER (not available on\n    // IE).\n    const BIG_NUM = 1000000000;\n    const top = flyoutRect.top;\n\n    if (this.toolboxPosition_ === toolbox.Position.TOP) {\n      const height = flyoutRect.height;\n      return new Rect(-BIG_NUM, top + height, -BIG_NUM, BIG_NUM);\n    } else {  // Bottom.\n      return new Rect(top, BIG_NUM, -BIG_NUM, BIG_NUM);\n    }\n  }\n\n  /**\n   * Compute height of flyout.  toolbox.Position mat under each block.\n   * For RTL: Lay out the blocks right-aligned.\n   * @protected\n   */\n  reflowInternal_() {\n    this.workspace_.scale = this.getFlyoutScale();\n    let flyoutHeight = 0;\n    const blocks = this.workspace_.getTopBlocks(false);\n    for (let i = 0, block; (block = blocks[i]); i++) {\n      flyoutHeight = Math.max(flyoutHeight, block.getHeightWidth().height);\n    }\n    const buttons = this.buttons_;\n    for (let i = 0, button; (button = buttons[i]); i++) {\n      flyoutHeight = Math.max(flyoutHeight, button.height);\n    }\n    flyoutHeight += this.MARGIN * 1.5;\n    flyoutHeight *= this.workspace_.scale;\n    flyoutHeight += Scrollbar.scrollbarThickness;\n\n    if (this.height_ !== flyoutHeight) {\n      for (let i = 0, block; (block = blocks[i]); i++) {\n        if (this.rectMap_.has(block)) {\n          this.moveRectToBlock_(this.rectMap_.get(block), block);\n        }\n      }\n\n      if (this.targetWorkspace.toolboxPosition === this.toolboxPosition_ &&\n          this.toolboxPosition_ === toolbox.Position.TOP &&\n          !this.targetWorkspace.getToolbox()) {\n        // This flyout is a simple toolbox. Reposition the workspace so that\n        // (0,0) is in the correct position relative to the new absolute edge\n        // (ie toolbox edge).\n        this.targetWorkspace.translate(\n            this.targetWorkspace.scrollX,\n            this.targetWorkspace.scrollY + flyoutHeight);\n      }\n\n      // Record the height for workspace metrics and .position.\n      this.height_ = flyoutHeight;\n      this.position();\n      this.targetWorkspace.recordDragTargets();\n    }\n  }\n}\n\nregistry.register(\n    registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX, registry.DEFAULT,\n    HorizontalFlyout);\n\nexports.HorizontalFlyout = HorizontalFlyout;\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Utility functions for generating executable code from\n * Blockly code.\n */\n'use strict';\n\n/**\n * Utility functions for generating executable code from\n * Blockly code.\n * @class\n */\ngoog.module('Blockly.Generator');\n\nconst common = goog.require('Blockly.common');\nconst deprecation = goog.require('Blockly.utils.deprecation');\n/* eslint-disable-next-line no-unused-vars */\nconst {Block} = goog.requireType('Blockly.Block');\n/* eslint-disable-next-line no-unused-vars */\nconst {Names, NameType} = goog.require('Blockly.Names');\n/* eslint-disable-next-line no-unused-vars */\nconst {Workspace} = goog.requireType('Blockly.Workspace');\n\n\n/**\n * Class for a code generator that translates the blocks into a language.\n * @unrestricted\n * @alias Blockly.Generator\n */\nclass Generator {\n  /**\n   * @param {string} name Language name of this generator.\n   */\n  constructor(name) {\n    this.name_ = name;\n\n    /**\n     * This is used as a placeholder in functions defined using\n     * Generator.provideFunction_.  It must not be legal code that could\n     * legitimately appear in a function definition (or comment), and it must\n     * not confuse the regular expression parser.\n     * @type {string}\n     * @protected\n     */\n    this.FUNCTION_NAME_PLACEHOLDER_ = '{leCUI8hutHZI4480Dc}';\n\n    this.FUNCTION_NAME_PLACEHOLDER_REGEXP_ =\n        new RegExp(this.FUNCTION_NAME_PLACEHOLDER_, 'g');\n\n    /**\n     * Arbitrary code to inject into locations that risk causing infinite loops.\n     * Any instances of '%1' will be replaced by the block ID that failed.\n     * E.g. '  checkTimeout(%1);\\n'\n     * @type {?string}\n     */\n    this.INFINITE_LOOP_TRAP = null;\n\n    /**\n     * Arbitrary code to inject before every statement.\n     * Any instances of '%1' will be replaced by the block ID of the statement.\n     * E.g. 'highlight(%1);\\n'\n     * @type {?string}\n     */\n    this.STATEMENT_PREFIX = null;\n\n    /**\n     * Arbitrary code to inject after every statement.\n     * Any instances of '%1' will be replaced by the block ID of the statement.\n     * E.g. 'highlight(%1);\\n'\n     * @type {?string}\n     */\n    this.STATEMENT_SUFFIX = null;\n\n    /**\n     * The method of indenting.  Defaults to two spaces, but language generators\n     * may override this to increase indent or change to tabs.\n     * @type {string}\n     */\n    this.INDENT = '  ';\n\n    /**\n     * Maximum length for a comment before wrapping.  Does not account for\n     * indenting level.\n     * @type {number}\n     */\n    this.COMMENT_WRAP = 60;\n\n    /**\n     * List of outer-inner pairings that do NOT require parentheses.\n     * @type {!Array<!Array<number>>}\n     */\n    this.ORDER_OVERRIDES = [];\n\n    /**\n     * Whether the init method has been called.\n     * Generators that set this flag to false after creation and true in init\n     * will cause blockToCode to emit a warning if the generator has not been\n     * initialized. If this flag is untouched, it will have no effect.\n     * @type {?boolean}\n     */\n    this.isInitialized = null;\n\n    /**\n     * Comma-separated list of reserved words.\n     * @type {string}\n     * @protected\n     */\n    this.RESERVED_WORDS_ = '';\n\n    /**\n     * A dictionary of definitions to be printed before the code.\n     * @type {!Object|undefined}\n     * @protected\n     */\n    this.definitions_ = undefined;\n\n    /**\n     * A dictionary mapping desired function names in definitions_ to actual\n     * function names (to avoid collisions with user functions).\n     * @type {!Object|undefined}\n     * @protected\n     */\n    this.functionNames_ = undefined;\n\n    /**\n     * A database of variable and procedure names.\n     * @type {!Names|undefined}\n     * @protected\n     */\n    this.nameDB_ = undefined;\n  }\n\n  /**\n   * Generate code for all blocks in the workspace to the specified language.\n   * @param {!Workspace=} workspace Workspace to generate code from.\n   * @return {string} Generated code.\n   */\n  workspaceToCode(workspace) {\n    if (!workspace) {\n      // Backwards compatibility from before there could be multiple workspaces.\n      console.warn(\n          'No workspace specified in workspaceToCode call.  Guessing.');\n      workspace = common.getMainWorkspace();\n    }\n    let code = [];\n    this.init(workspace);\n    const blocks = workspace.getTopBlocks(true);\n    for (let i = 0, block; (block = blocks[i]); i++) {\n      let line = this.blockToCode(block);\n      if (Array.isArray(line)) {\n        // Value blocks return tuples of code and operator order.\n        // Top-level blocks don't care about operator order.\n        line = line[0];\n      }\n      if (line) {\n        if (block.outputConnection) {\n          // This block is a naked value.  Ask the language's code generator if\n          // it wants to append a semicolon, or something.\n          line = this.scrubNakedValue(line);\n          if (this.STATEMENT_PREFIX && !block.suppressPrefixSuffix) {\n            line = this.injectId(this.STATEMENT_PREFIX, block) + line;\n          }\n          if (this.STATEMENT_SUFFIX && !block.suppressPrefixSuffix) {\n            line = line + this.injectId(this.STATEMENT_SUFFIX, block);\n          }\n        }\n        code.push(line);\n      }\n    }\n    code = code.join('\\n');  // Blank line between each section.\n    code = this.finish(code);\n    // Final scrubbing of whitespace.\n    code = code.replace(/^\\s+\\n/, '');\n    code = code.replace(/\\n\\s+$/, '\\n');\n    code = code.replace(/[ \\t]+\\n/g, '\\n');\n    return code;\n  }\n\n  // The following are some helpful functions which can be used by multiple\n\n  // languages.\n\n  /**\n   * Prepend a common prefix onto each line of code.\n   * Intended for indenting code or adding comment markers.\n   * @param {string} text The lines of code.\n   * @param {string} prefix The common prefix.\n   * @return {string} The prefixed lines of code.\n   */\n  prefixLines(text, prefix) {\n    return prefix + text.replace(/(?!\\n$)\\n/g, '\\n' + prefix);\n  }\n\n  /**\n   * Recursively spider a tree of blocks, returning all their comments.\n   * @param {!Block} block The block from which to start spidering.\n   * @return {string} Concatenated list of comments.\n   */\n  allNestedComments(block) {\n    const comments = [];\n    const blocks = block.getDescendants(true);\n    for (let i = 0; i < blocks.length; i++) {\n      const comment = blocks[i].getCommentText();\n      if (comment) {\n        comments.push(comment);\n      }\n    }\n    // Append an empty string to create a trailing line break when joined.\n    if (comments.length) {\n      comments.push('');\n    }\n    return comments.join('\\n');\n  }\n\n  /**\n   * Generate code for the specified block (and attached blocks).\n   * The generator must be initialized before calling this function.\n   * @param {?Block} block The block to generate code for.\n   * @param {boolean=} opt_thisOnly True to generate code for only this\n   *     statement.\n   * @return {string|!Array} For statement blocks, the generated code.\n   *     For value blocks, an array containing the generated code and an\n   *     operator order value.  Returns '' if block is null.\n   */\n  blockToCode(block, opt_thisOnly) {\n    if (this.isInitialized === false) {\n      console.warn(\n          'Generator init was not called before blockToCode was called.');\n    }\n    if (!block) {\n      return '';\n    }\n    if (!block.isEnabled()) {\n      // Skip past this block if it is disabled.\n      return opt_thisOnly ? '' : this.blockToCode(block.getNextBlock());\n    }\n    if (block.isInsertionMarker()) {\n      // Skip past insertion markers.\n      return opt_thisOnly ? '' : this.blockToCode(block.getChildren(false)[0]);\n    }\n\n    const func = this[block.type];\n    if (typeof func !== 'function') {\n      throw Error(\n          'Language \"' + this.name_ + '\" does not know how to generate ' +\n          'code for block type \"' + block.type + '\".');\n    }\n    // First argument to func.call is the value of 'this' in the generator.\n    // Prior to 24 September 2013 'this' was the only way to access the block.\n    // The current preferred method of accessing the block is through the second\n    // argument to func.call, which becomes the first parameter to the\n    // generator.\n    let code = func.call(block, block);\n    if (Array.isArray(code)) {\n      // Value blocks return tuples of code and operator order.\n      if (!block.outputConnection) {\n        throw TypeError('Expecting string from statement block: ' + block.type);\n      }\n      return [this.scrub_(block, code[0], opt_thisOnly), code[1]];\n    } else if (typeof code === 'string') {\n      if (this.STATEMENT_PREFIX && !block.suppressPrefixSuffix) {\n        code = this.injectId(this.STATEMENT_PREFIX, block) + code;\n      }\n      if (this.STATEMENT_SUFFIX && !block.suppressPrefixSuffix) {\n        code = code + this.injectId(this.STATEMENT_SUFFIX, block);\n      }\n      return this.scrub_(block, code, opt_thisOnly);\n    } else if (code === null) {\n      // Block has handled code generation itself.\n      return '';\n    }\n    throw SyntaxError('Invalid code generated: ' + code);\n  }\n\n  /**\n   * Generate code representing the specified value input.\n   * @param {!Block} block The block containing the input.\n   * @param {string} name The name of the input.\n   * @param {number} outerOrder The maximum binding strength (minimum order\n   *     value) of any operators adjacent to \"block\".\n   * @return {string} Generated code or '' if no blocks are connected or the\n   *     specified input does not exist.\n   */\n  valueToCode(block, name, outerOrder) {\n    if (isNaN(outerOrder)) {\n      throw TypeError('Expecting valid order from block: ' + block.type);\n    }\n    const targetBlock = block.getInputTargetBlock(name);\n    if (!targetBlock) {\n      return '';\n    }\n    const tuple = this.blockToCode(targetBlock);\n    if (tuple === '') {\n      // Disabled block.\n      return '';\n    }\n    // Value blocks must return code and order of operations info.\n    // Statement blocks must only return code.\n    if (!Array.isArray(tuple)) {\n      throw TypeError('Expecting tuple from value block: ' + targetBlock.type);\n    }\n    let code = tuple[0];\n    const innerOrder = tuple[1];\n    if (isNaN(innerOrder)) {\n      throw TypeError(\n          'Expecting valid order from value block: ' + targetBlock.type);\n    }\n    if (!code) {\n      return '';\n    }\n\n    // Add parentheses if needed.\n    let parensNeeded = false;\n    const outerOrderClass = Math.floor(outerOrder);\n    const innerOrderClass = Math.floor(innerOrder);\n    if (outerOrderClass <= innerOrderClass) {\n      if (outerOrderClass === innerOrderClass &&\n          (outerOrderClass === 0 || outerOrderClass === 99)) {\n        // Don't generate parens around NONE-NONE and ATOMIC-ATOMIC pairs.\n        // 0 is the atomic order, 99 is the none order.  No parentheses needed.\n        // In all known languages multiple such code blocks are not order\n        // sensitive.  In fact in Python ('a' 'b') 'c' would fail.\n      } else {\n        // The operators outside this code are stronger than the operators\n        // inside this code.  To prevent the code from being pulled apart,\n        // wrap the code in parentheses.\n        parensNeeded = true;\n        // Check for special exceptions.\n        for (let i = 0; i < this.ORDER_OVERRIDES.length; i++) {\n          if (this.ORDER_OVERRIDES[i][0] === outerOrder &&\n              this.ORDER_OVERRIDES[i][1] === innerOrder) {\n            parensNeeded = false;\n            break;\n          }\n        }\n      }\n    }\n    if (parensNeeded) {\n      // Technically, this should be handled on a language-by-language basis.\n      // However all known (sane) languages use parentheses for grouping.\n      code = '(' + code + ')';\n    }\n    return code;\n  }\n\n  /**\n   * Generate a code string representing the blocks attached to the named\n   * statement input. Indent the code.\n   * This is mainly used in generators. When trying to generate code to evaluate\n   * look at using workspaceToCode or blockToCode.\n   * @param {!Block} block The block containing the input.\n   * @param {string} name The name of the input.\n   * @return {string} Generated code or '' if no blocks are connected.\n   */\n  statementToCode(block, name) {\n    const targetBlock = block.getInputTargetBlock(name);\n    let code = this.blockToCode(targetBlock);\n    // Value blocks must return code and order of operations info.\n    // Statement blocks must only return code.\n    if (typeof code !== 'string') {\n      throw TypeError(\n          'Expecting code from statement block: ' +\n          (targetBlock && targetBlock.type));\n    }\n    if (code) {\n      code = this.prefixLines(/** @type {string} */ (code), this.INDENT);\n    }\n    return code;\n  }\n\n  /**\n   * Add an infinite loop trap to the contents of a loop.\n   * Add statement suffix at the start of the loop block (right after the loop\n   * statement executes), and a statement prefix to the end of the loop block\n   * (right before the loop statement executes).\n   * @param {string} branch Code for loop contents.\n   * @param {!Block} block Enclosing block.\n   * @return {string} Loop contents, with infinite loop trap added.\n   */\n  addLoopTrap(branch, block) {\n    if (this.INFINITE_LOOP_TRAP) {\n      branch = this.prefixLines(\n                   this.injectId(this.INFINITE_LOOP_TRAP, block), this.INDENT) +\n          branch;\n    }\n    if (this.STATEMENT_SUFFIX && !block.suppressPrefixSuffix) {\n      branch = this.prefixLines(\n                   this.injectId(this.STATEMENT_SUFFIX, block), this.INDENT) +\n          branch;\n    }\n    if (this.STATEMENT_PREFIX && !block.suppressPrefixSuffix) {\n      branch = branch +\n          this.prefixLines(\n              this.injectId(this.STATEMENT_PREFIX, block), this.INDENT);\n    }\n    return branch;\n  }\n\n  /**\n   * Inject a block ID into a message to replace '%1'.\n   * Used for STATEMENT_PREFIX, STATEMENT_SUFFIX, and INFINITE_LOOP_TRAP.\n   * @param {string} msg Code snippet with '%1'.\n   * @param {!Block} block Block which has an ID.\n   * @return {string} Code snippet with ID.\n   */\n  injectId(msg, block) {\n    const id = block.id.replace(/\\$/g, '$$$$');  // Issue 251.\n    return msg.replace(/%1/g, '\\'' + id + '\\'');\n  }\n\n  /**\n   * Add one or more words to the list of reserved words for this language.\n   * @param {string} words Comma-separated list of words to add to the list.\n   *     No spaces.  Duplicates are ok.\n   */\n  addReservedWords(words) {\n    this.RESERVED_WORDS_ += words + ',';\n  }\n\n  /**\n   * Define a developer-defined function (not a user-defined procedure) to be\n   * included in the generated code.  Used for creating private helper\n   * functions. The first time this is called with a given desiredName, the code\n   * is saved and an actual name is generated.  Subsequent calls with the same\n   * desiredName have no effect but have the same return value.\n   *\n   * It is up to the caller to make sure the same desiredName is not\n   * used for different helper functions (e.g. use \"colourRandom\" and\n   * \"listRandom\", not \"random\").  There is no danger of colliding with reserved\n   * words, or user-defined variable or procedure names.\n   *\n   * The code gets output when Generator.finish() is called.\n   *\n   * @param {string} desiredName The desired name of the function\n   *     (e.g. mathIsPrime).\n   * @param {!Array<string>|string} code A list of statements or one multi-line\n   *     code string.  Use '  ' for indents (they will be replaced).\n   * @return {string} The actual name of the new function.  This may differ\n   *     from desiredName if the former has already been taken by the user.\n   * @protected\n   */\n  provideFunction_(desiredName, code) {\n    if (!this.definitions_[desiredName]) {\n      const functionName =\n          this.nameDB_.getDistinctName(desiredName, NameType.PROCEDURE);\n      this.functionNames_[desiredName] = functionName;\n      if (Array.isArray(code)) {\n        code = code.join('\\n');\n      }\n      let codeText = code.trim().replace(\n          this.FUNCTION_NAME_PLACEHOLDER_REGEXP_, functionName);\n      // Change all '  ' indents into the desired indent.\n      // To avoid an infinite loop of replacements, change all indents to '\\0'\n      // character first, then replace them all with the indent.\n      // We are assuming that no provided functions contain a literal null char.\n      let oldCodeText;\n      while (oldCodeText !== codeText) {\n        oldCodeText = codeText;\n        codeText = codeText.replace(/^(( {2})*) {2}/gm, '$1\\0');\n      }\n      codeText = codeText.replace(/\\0/g, this.INDENT);\n      this.definitions_[desiredName] = codeText;\n    }\n    return this.functionNames_[desiredName];\n  }\n\n  /**\n   * Hook for code to run before code generation starts.\n   * Subclasses may override this, e.g. to initialise the database of variable\n   * names.\n   * @param {!Workspace} _workspace Workspace to generate code from.\n   */\n  init(_workspace) {\n    // Optionally override\n    // Create a dictionary of definitions to be printed before the code.\n    this.definitions_ = Object.create(null);\n    // Create a dictionary mapping desired developer-defined function names in\n    // definitions_ to actual function names (to avoid collisions with\n    // user-defined procedures).\n    this.functionNames_ = Object.create(null);\n  }\n\n  /**\n   * Common tasks for generating code from blocks.  This is called from\n   * blockToCode and is called on every block, not just top level blocks.\n   * Subclasses may override this, e.g. to generate code for statements\n   * following the block, or to handle comments for the specified block and any\n   * connected value blocks.\n   * @param {!Block} _block The current block.\n   * @param {string} code The code created for this block.\n   * @param {boolean=} _opt_thisOnly True to generate code for only this\n   *     statement.\n   * @return {string} Code with comments and subsequent blocks added.\n   * @protected\n   */\n  scrub_(_block, code, _opt_thisOnly) {\n    // Optionally override\n    return code;\n  }\n\n  /**\n   * Hook for code to run at end of code generation.\n   * Subclasses may override this, e.g. to prepend the generated code with\n   * import statements or variable definitions.\n   * @param {string} code Generated code.\n   * @return {string} Completed code.\n   */\n  finish(code) {\n    // Optionally override\n    // Clean up temporary data.\n    delete this.definitions_;\n    delete this.functionNames_;\n    return code;\n  }\n\n  /**\n   * Naked values are top-level blocks with outputs that aren't plugged into\n   * anything.\n   * Subclasses may override this, e.g. if their language does not allow\n   * naked values.\n   * @param {string} line Line of generated code.\n   * @return {string} Legal line of code.\n   */\n  scrubNakedValue(line) {\n    // Optionally override\n    return line;\n  }\n}\n\nObject.defineProperties(Generator.prototype, {\n  /**\n   * A database of variable names.\n   * @name Blockly.Generator.prototype.variableDB_\n   * @type {!Names|undefined}\n   * @protected\n   * @deprecated 'variableDB_' was renamed to 'nameDB_' (May 2021).\n   * @suppress {checkTypes}\n   */\n  variableDB_: {\n    /**\n     * @this {Generator}\n     * @return {!Names|undefined} Name database.\n     */\n    get: function() {\n      deprecation.warn('variableDB_', 'May 2021', 'May 2026', 'nameDB_');\n      return this.nameDB_;\n    },\n    /**\n     * @this {Generator}\n     * @param {!Names|undefined} nameDb New name database.\n     */\n    set: function(nameDb) {\n      deprecation.warn('variableDB_', 'May 2021', 'May 2026', 'nameDB_');\n      this.nameDB_ = nameDb;\n    },\n  },\n});\n\nexports.Generator = Generator;\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Variable input field.\n */\n'use strict';\n\n/**\n * Variable input field.\n * @class\n */\ngoog.module('Blockly.FieldVariable');\n\nconst Variables = goog.require('Blockly.Variables');\nconst Xml = goog.require('Blockly.Xml');\nconst fieldRegistry = goog.require('Blockly.fieldRegistry');\nconst internalConstants = goog.require('Blockly.internalConstants');\nconst parsing = goog.require('Blockly.utils.parsing');\n/* eslint-disable-next-line no-unused-vars */\nconst {Block} = goog.requireType('Blockly.Block');\nconst {Field} = goog.require('Blockly.Field');\nconst {FieldDropdown} = goog.require('Blockly.FieldDropdown');\n/* eslint-disable-next-line no-unused-vars */\nconst {MenuItem} = goog.requireType('Blockly.MenuItem');\n/* eslint-disable-next-line no-unused-vars */\nconst {Menu} = goog.requireType('Blockly.Menu');\nconst {Msg} = goog.require('Blockly.Msg');\n/* eslint-disable-next-line no-unused-vars */\nconst {Sentinel} = goog.requireType('Blockly.utils.Sentinel');\nconst {Size} = goog.require('Blockly.utils.Size');\nconst {VariableModel} = goog.require('Blockly.VariableModel');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.Events.BlockChange');\n\n\n/**\n * Class for a variable's dropdown field.\n * @extends {FieldDropdown}\n * @alias Blockly.FieldVariable\n */\nclass FieldVariable extends FieldDropdown {\n  /**\n   * @param {?string|!Sentinel} varName The default name for the variable.\n   *     If null, a unique variable name will be generated.\n   *     Also accepts Field.SKIP_SETUP if you wish to skip setup (only used by\n   *     subclasses that want to handle configuration and setting the field\n   *     value after their own constructors have run).\n   * @param {Function=} opt_validator A function that is called to validate\n   *    changes to the field's value. Takes in a variable ID  & returns a\n   *    validated variable ID, or null to abort the change.\n   * @param {Array<string>=} opt_variableTypes A list of the types of variables\n   *     to include in the dropdown. Will only be used if opt_config is not\n   *     provided.\n   * @param {string=} opt_defaultType The type of variable to create if this\n   *     field's value is not explicitly set.  Defaults to ''. Will only be used\n   *     if opt_config is not provided.\n   * @param {Object=} opt_config A map of options used to configure the field.\n   *    See the [field creation documentation]{@link\n   *    https://developers.google.com/blockly/guides/create-custom-blocks/fields/built-in-fields/variable#creation}\n   *    for a list of properties this parameter supports.\n   */\n  constructor(\n      varName, opt_validator, opt_variableTypes, opt_defaultType, opt_config) {\n    super(Field.SKIP_SETUP);\n\n    /**\n     * An array of options for a dropdown list,\n     * or a function which generates these options.\n     * @type {(!Array<!Array>|\n     *    !function(this:FieldDropdown): !Array<!Array>)}\n     * @protected\n     */\n    this.menuGenerator_ = FieldVariable.dropdownCreate;\n\n    /**\n     * The initial variable name passed to this field's constructor, or an\n     * empty string if a name wasn't provided. Used to create the initial\n     * variable.\n     * @type {string}\n     */\n    this.defaultVariableName = typeof varName === 'string' ? varName : '';\n\n    /**\n     * The type of the default variable for this field.\n     * @type {string}\n     * @private\n     */\n    this.defaultType_ = '';\n\n    /**\n     * All of the types of variables that will be available in this field's\n     * dropdown.\n     * @type {?Array<string>}\n     */\n    this.variableTypes = [];\n\n    /**\n     * The size of the area rendered by the field.\n     * @type {Size}\n     * @protected\n     * @override\n     */\n    this.size_ = new Size(0, 0);\n\n    /**\n     * The variable model associated with this field.\n     * @type {?VariableModel}\n     * @private\n     */\n    this.variable_ = null;\n\n    /**\n     * Serializable fields are saved by the serializer, non-serializable fields\n     * are not. Editable fields should also be serializable.\n     * @type {boolean}\n     */\n    this.SERIALIZABLE = true;\n\n    if (varName === Field.SKIP_SETUP) return;\n\n    if (opt_config) {\n      this.configure_(opt_config);\n    } else {\n      this.setTypes_(opt_variableTypes, opt_defaultType);\n    }\n    if (opt_validator) this.setValidator(opt_validator);\n  }\n\n  /**\n   * Configure the field based on the given map of options.\n   * @param {!Object} config A map of options to configure the field based on.\n   * @protected\n   */\n  configure_(config) {\n    super.configure_(config);\n    this.setTypes_(config['variableTypes'], config['defaultType']);\n  }\n\n  /**\n   * Initialize the model for this field if it has not already been initialized.\n   * If the value has not been set to a variable by the first render, we make up\n   * a variable rather than let the value be invalid.\n   * @package\n   */\n  initModel() {\n    if (this.variable_) {\n      return;  // Initialization already happened.\n    }\n    const variable = Variables.getOrCreateVariablePackage(\n        this.sourceBlock_.workspace, null, this.defaultVariableName,\n        this.defaultType_);\n\n    // Don't call setValue because we don't want to cause a rerender.\n    this.doValueUpdate_(variable.getId());\n  }\n\n  /**\n   * @override\n   */\n  shouldAddBorderRect_() {\n    return super.shouldAddBorderRect_() &&\n        (!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW ||\n         this.sourceBlock_.type !== 'variables_get');\n  }\n\n  /**\n   * Initialize this field based on the given XML.\n   * @param {!Element} fieldElement The element containing information about the\n   *    variable field's state.\n   */\n  fromXml(fieldElement) {\n    const id = fieldElement.getAttribute('id');\n    const variableName = fieldElement.textContent;\n    // 'variabletype' should be lowercase, but until July 2019 it was sometimes\n    // recorded as 'variableType'.  Thus we need to check for both.\n    const variableType = fieldElement.getAttribute('variabletype') ||\n        fieldElement.getAttribute('variableType') || '';\n\n    const variable = Variables.getOrCreateVariablePackage(\n        this.sourceBlock_.workspace, id, variableName, variableType);\n\n    // This should never happen :)\n    if (variableType !== null && variableType !== variable.type) {\n      throw Error(\n          'Serialized variable type with id \\'' + variable.getId() +\n          '\\' had type ' + variable.type + ', and ' +\n          'does not match variable field that references it: ' +\n          Xml.domToText(fieldElement) + '.');\n    }\n\n    this.setValue(variable.getId());\n  }\n\n  /**\n   * Serialize this field to XML.\n   * @param {!Element} fieldElement The element to populate with info about the\n   *    field's state.\n   * @return {!Element} The element containing info about the field's state.\n   */\n  toXml(fieldElement) {\n    // Make sure the variable is initialized.\n    this.initModel();\n\n    fieldElement.id = this.variable_.getId();\n    fieldElement.textContent = this.variable_.name;\n    if (this.variable_.type) {\n      fieldElement.setAttribute('variabletype', this.variable_.type);\n    }\n    return fieldElement;\n  }\n\n  /**\n   * Saves this field's value.\n   * @param {boolean=} doFullSerialization If true, the variable field will\n   *     serialize the full state of the field being referenced (ie ID, name,\n   *     and type) rather than just a reference to it (ie ID).\n   * @return {*} The state of the variable field.\n   * @override\n   * @package\n   */\n  saveState(doFullSerialization) {\n    const legacyState = this.saveLegacyState(FieldVariable);\n    if (legacyState !== null) {\n      return legacyState;\n    }\n    // Make sure the variable is initialized.\n    this.initModel();\n    const state = {'id': this.variable_.getId()};\n    if (doFullSerialization) {\n      state['name'] = this.variable_.name;\n      state['type'] = this.variable_.type;\n    }\n    return state;\n  }\n\n  /**\n   * Sets the field's value based on the given state.\n   * @param {*} state The state of the variable to assign to this variable\n   *     field.\n   * @override\n   * @package\n   */\n  loadState(state) {\n    if (this.loadLegacyState(FieldVariable, state)) {\n      return;\n    }\n    // This is necessary so that blocks in the flyout can have custom var names.\n    const variable = Variables.getOrCreateVariablePackage(\n        this.sourceBlock_.workspace, state['id'] || null, state['name'],\n        state['type'] || '');\n    this.setValue(variable.getId());\n  }\n\n  /**\n   * Attach this field to a block.\n   * @param {!Block} block The block containing this field.\n   */\n  setSourceBlock(block) {\n    if (block.isShadow()) {\n      throw Error('Variable fields are not allowed to exist on shadow blocks.');\n    }\n    super.setSourceBlock(block);\n  }\n\n  /**\n   * Get the variable's ID.\n   * @return {?string} Current variable's ID.\n   */\n  getValue() {\n    return this.variable_ ? this.variable_.getId() : null;\n  }\n\n  /**\n   * Get the text from this field, which is the selected variable's name.\n   * @return {string} The selected variable's name, or the empty string if no\n   *     variable is selected.\n   */\n  getText() {\n    return this.variable_ ? this.variable_.name : '';\n  }\n\n  /**\n   * Get the variable model for the selected variable.\n   * Not guaranteed to be in the variable map on the workspace (e.g. if accessed\n   * after the variable has been deleted).\n   * @return {?VariableModel} The selected variable, or null if none was\n   *     selected.\n   * @package\n   */\n  getVariable() {\n    return this.variable_;\n  }\n\n  /**\n   * Gets the validation function for this field, or null if not set.\n   * Returns null if the variable is not set, because validators should not\n   * run on the initial setValue call, because the field won't be attached to\n   * a block and workspace at that point.\n   * @return {?Function} Validation function, or null.\n   */\n  getValidator() {\n    // Validators shouldn't operate on the initial setValue call.\n    // Normally this is achieved by calling setValidator after setValue, but\n    // this is not a possibility with variable fields.\n    if (this.variable_) {\n      return this.validator_;\n    }\n    return null;\n  }\n\n  /**\n   * Ensure that the ID belongs to a valid variable of an allowed type.\n   * @param {*=} opt_newValue The ID of the new variable to set.\n   * @return {?string} The validated ID, or null if invalid.\n   * @protected\n   */\n  doClassValidation_(opt_newValue) {\n    if (opt_newValue === null) {\n      return null;\n    }\n    const newId = /** @type {string} */ (opt_newValue);\n    const variable = Variables.getVariable(this.sourceBlock_.workspace, newId);\n    if (!variable) {\n      console.warn(\n          'Variable id doesn\\'t point to a real variable! ' +\n          'ID was ' + newId);\n      return null;\n    }\n    // Type Checks.\n    const type = variable.type;\n    if (!this.typeIsAllowed_(type)) {\n      console.warn(\n          'Variable type doesn\\'t match this field!  Type was ' + type);\n      return null;\n    }\n    return newId;\n  }\n\n  /**\n   * Update the value of this variable field, as well as its variable and text.\n   *\n   * The variable ID should be valid at this point, but if a variable field\n   * validator returns a bad ID, this could break.\n   * @param {*} newId The value to be saved.\n   * @protected\n   */\n  doValueUpdate_(newId) {\n    this.variable_ = Variables.getVariable(\n        this.sourceBlock_.workspace, /** @type {string} */ (newId));\n    super.doValueUpdate_(newId);\n  }\n\n  /**\n   * Check whether the given variable type is allowed on this field.\n   * @param {string} type The type to check.\n   * @return {boolean} True if the type is in the list of allowed types.\n   * @private\n   */\n  typeIsAllowed_(type) {\n    const typeList = this.getVariableTypes_();\n    if (!typeList) {\n      return true;  // If it's null, all types are valid.\n    }\n    for (let i = 0; i < typeList.length; i++) {\n      if (type === typeList[i]) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Return a list of variable types to include in the dropdown.\n   * @return {!Array<string>} Array of variable types.\n   * @throws {Error} if variableTypes is an empty array.\n   * @private\n   */\n  getVariableTypes_() {\n    // TODO (#1513): Try to avoid calling this every time the field is edited.\n    let variableTypes = this.variableTypes;\n    if (variableTypes === null) {\n      // If variableTypes is null, return all variable types.\n      if (this.sourceBlock_ && this.sourceBlock_.workspace) {\n        return this.sourceBlock_.workspace.getVariableTypes();\n      }\n    }\n    variableTypes = variableTypes || [''];\n    if (variableTypes.length === 0) {\n      // Throw an error if variableTypes is an empty list.\n      const name = this.getText();\n      throw Error(\n          '\\'variableTypes\\' of field variable ' + name + ' was an empty list');\n    }\n    return variableTypes;\n  }\n\n  /**\n   * Parse the optional arguments representing the allowed variable types and\n   * the default variable type.\n   * @param {Array<string>=} opt_variableTypes A list of the types of variables\n   *     to include in the dropdown.  If null or undefined, variables of all\n   * types will be displayed in the dropdown.\n   * @param {string=} opt_defaultType The type of the variable to create if this\n   *     field's value is not explicitly set.  Defaults to ''.\n   * @private\n   */\n  setTypes_(opt_variableTypes, opt_defaultType) {\n    // If you expected that the default type would be the same as the only entry\n    // in the variable types array, tell the Blockly team by commenting on\n    // #1499.\n    const defaultType = opt_defaultType || '';\n    let variableTypes;\n    // Set the allowable variable types.  Null means all types on the workspace.\n    if (opt_variableTypes === null || opt_variableTypes === undefined) {\n      variableTypes = null;\n    } else if (Array.isArray(opt_variableTypes)) {\n      variableTypes = opt_variableTypes;\n      // Make sure the default type is valid.\n      let isInArray = false;\n      for (let i = 0; i < variableTypes.length; i++) {\n        if (variableTypes[i] === defaultType) {\n          isInArray = true;\n        }\n      }\n      if (!isInArray) {\n        throw Error(\n            'Invalid default type \\'' + defaultType + '\\' in ' +\n            'the definition of a FieldVariable');\n      }\n    } else {\n      throw Error(\n          '\\'variableTypes\\' was not an array in the definition of ' +\n          'a FieldVariable');\n    }\n    // Only update the field once all checks pass.\n    this.defaultType_ = defaultType;\n    this.variableTypes = variableTypes;\n  }\n\n  /**\n   * Refreshes the name of the variable by grabbing the name of the model.\n   * Used when a variable gets renamed, but the ID stays the same. Should only\n   * be called by the block.\n   * @override\n   * @package\n   */\n  refreshVariableName() {\n    this.forceRerender();\n  }\n\n  /**\n   * Handle the selection of an item in the variable dropdown menu.\n   * Special case the 'Rename variable...' and 'Delete variable...' options.\n   * In the rename case, prompt the user for a new name.\n   * @param {!Menu} menu The Menu component clicked.\n   * @param {!MenuItem} menuItem The MenuItem selected within menu.\n   * @protected\n   */\n  onItemSelected_(menu, menuItem) {\n    const id = menuItem.getValue();\n    // Handle special cases.\n    if (this.sourceBlock_ && this.sourceBlock_.workspace) {\n      if (id === internalConstants.RENAME_VARIABLE_ID) {\n        // Rename variable.\n        Variables.renameVariable(\n            this.sourceBlock_.workspace,\n            /** @type {!VariableModel} */ (this.variable_));\n        return;\n      } else if (id === internalConstants.DELETE_VARIABLE_ID) {\n        // Delete variable.\n        this.sourceBlock_.workspace.deleteVariableById(this.variable_.getId());\n        return;\n      }\n    }\n    // Handle unspecial case.\n    this.setValue(id);\n  }\n\n  /**\n   * Overrides referencesVariables(), indicating this field refers to a\n   * variable.\n   * @return {boolean} True.\n   * @package\n   * @override\n   */\n  referencesVariables() {\n    return true;\n  }\n\n  /**\n   * Construct a FieldVariable from a JSON arg object,\n   * dereferencing any string table references.\n   * @param {!Object} options A JSON object with options (variable,\n   *                          variableTypes, and defaultType).\n   * @return {!FieldVariable} The new field instance.\n   * @package\n   * @nocollapse\n   * @override\n   */\n  static fromJson(options) {\n    const varName = parsing.replaceMessageReferences(options['variable']);\n    // `this` might be a subclass of FieldVariable if that class doesn't\n    // override the static fromJson method.\n    return new this(varName, undefined, undefined, undefined, options);\n  }\n\n  /**\n   * Return a sorted list of variable names for variable dropdown menus.\n   * Include a special option at the end for creating a new variable name.\n   * @return {!Array<!Array>} Array of variable names/id tuples.\n   * @this {FieldVariable}\n   */\n  static dropdownCreate() {\n    if (!this.variable_) {\n      throw Error(\n          'Tried to call dropdownCreate on a variable field with no' +\n          ' variable selected.');\n    }\n    const name = this.getText();\n    let variableModelList = [];\n    if (this.sourceBlock_ && this.sourceBlock_.workspace) {\n      const variableTypes = this.getVariableTypes_();\n      // Get a copy of the list, so that adding rename and new variable options\n      // doesn't modify the workspace's list.\n      for (let i = 0; i < variableTypes.length; i++) {\n        const variableType = variableTypes[i];\n        const variables =\n            this.sourceBlock_.workspace.getVariablesOfType(variableType);\n        variableModelList = variableModelList.concat(variables);\n      }\n    }\n    variableModelList.sort(VariableModel.compareByName);\n\n    const options = [];\n    for (let i = 0; i < variableModelList.length; i++) {\n      // Set the UUID as the internal representation of the variable.\n      options[i] = [variableModelList[i].name, variableModelList[i].getId()];\n    }\n    options.push(\n        [Msg['RENAME_VARIABLE'], internalConstants.RENAME_VARIABLE_ID]);\n    if (Msg['DELETE_VARIABLE']) {\n      options.push([\n        Msg['DELETE_VARIABLE'].replace('%1', name),\n        internalConstants.DELETE_VARIABLE_ID,\n      ]);\n    }\n\n    return options;\n  }\n}\n\nfieldRegistry.register('field_variable', FieldVariable);\n\nexports.FieldVariable = FieldVariable;\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Text input field.\n */\n'use strict';\n\n/**\n * Text input field.\n * @class\n */\ngoog.module('Blockly.FieldTextInput');\n\nconst WidgetDiv = goog.require('Blockly.WidgetDiv');\nconst aria = goog.require('Blockly.utils.aria');\nconst browserEvents = goog.require('Blockly.browserEvents');\nconst dialog = goog.require('Blockly.dialog');\nconst dom = goog.require('Blockly.utils.dom');\nconst dropDownDiv = goog.require('Blockly.dropDownDiv');\nconst eventUtils = goog.require('Blockly.Events.utils');\nconst fieldRegistry = goog.require('Blockly.fieldRegistry');\nconst parsing = goog.require('Blockly.utils.parsing');\nconst userAgent = goog.require('Blockly.utils.userAgent');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockSvg} = goog.requireType('Blockly.BlockSvg');\nconst {Coordinate} = goog.require('Blockly.utils.Coordinate');\nconst {Field} = goog.require('Blockly.Field');\nconst {KeyCodes} = goog.require('Blockly.utils.KeyCodes');\nconst {Msg} = goog.require('Blockly.Msg');\n/* eslint-disable-next-line no-unused-vars */\nconst {Sentinel} = goog.requireType('Blockly.utils.Sentinel');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceSvg} = goog.requireType('Blockly.WorkspaceSvg');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.Events.BlockChange');\n\n\n/**\n * Class for an editable text field.\n * @alias Blockly.FieldTextInput\n */\nclass FieldTextInput extends Field {\n  /**\n   * @param {(string|!Sentinel)=} opt_value The initial value of the\n   *     field. Should cast to a string. Defaults to an empty string if null or\n   *     undefined.\n   *     Also accepts Field.SKIP_SETUP if you wish to skip setup (only used by\n   *     subclasses that want to handle configuration and setting the field\n   *     value after their own constructors have run).\n   * @param {?Function=} opt_validator A function that is called to validate\n   *     changes to the field's value. Takes in a string & returns a validated\n   *     string, or null to abort the change.\n   * @param {Object=} opt_config A map of options used to configure the field.\n   *     See the [field creation documentation]{@link\n   * https://developers.google.com/blockly/guides/create-custom-blocks/fields/built-in-fields/text-input#creation}\n   *     for a list of properties this parameter supports.\n   */\n  constructor(opt_value, opt_validator, opt_config) {\n    super(Field.SKIP_SETUP);\n\n    /**\n     * Allow browser to spellcheck this field.\n     * @type {boolean}\n     * @protected\n     */\n    this.spellcheck_ = true;\n\n    /**\n     * The HTML input element.\n     * @type {HTMLElement}\n     * @protected\n     */\n    this.htmlInput_ = null;\n\n    /**\n     * True if the field's value is currently being edited via the UI.\n     * @type {boolean}\n     * @private\n     */\n    this.isBeingEdited_ = false;\n\n    /**\n     * True if the value currently displayed in the field's editory UI is valid.\n     * @type {boolean}\n     * @private\n     */\n    this.isTextValid_ = false;\n\n    /**\n     * Key down event data.\n     * @type {?browserEvents.Data}\n     * @private\n     */\n    this.onKeyDownWrapper_ = null;\n\n    /**\n     * Key input event data.\n     * @type {?browserEvents.Data}\n     * @private\n     */\n    this.onKeyInputWrapper_ = null;\n\n    /**\n     * Whether the field should consider the whole parent block to be its click\n     * target.\n     * @type {?boolean}\n     */\n    this.fullBlockClickTarget_ = false;\n\n    /**\n     * The workspace that this field belongs to.\n     * @type {?WorkspaceSvg}\n     * @protected\n     */\n    this.workspace_ = null;\n\n    /**\n     * Serializable fields are saved by the serializer, non-serializable fields\n     * are not. Editable fields should also be serializable.\n     * @type {boolean}\n     */\n    this.SERIALIZABLE = true;\n\n    /**\n     * Mouse cursor style when over the hotspot that initiates the editor.\n     * @type {string}\n     */\n    this.CURSOR = 'text';\n\n    if (opt_value === Field.SKIP_SETUP) return;\n    if (opt_config) this.configure_(opt_config);\n    this.setValue(opt_value);\n    if (opt_validator) this.setValidator(opt_validator);\n  }\n\n  /**\n   * @override\n   */\n  configure_(config) {\n    super.configure_(config);\n    if (typeof config['spellcheck'] === 'boolean') {\n      this.spellcheck_ = config['spellcheck'];\n    }\n  }\n\n  /**\n   * @override\n   */\n  initView() {\n    if (this.getConstants().FULL_BLOCK_FIELDS) {\n      // Step one: figure out if this is the only field on this block.\n      // Rendering is quite different in that case.\n      let nFields = 0;\n      let nConnections = 0;\n\n      // Count the number of fields, excluding text fields\n      for (let i = 0, input; (input = this.sourceBlock_.inputList[i]); i++) {\n        for (let j = 0; (input.fieldRow[j]); j++) {\n          nFields++;\n        }\n        if (input.connection) {\n          nConnections++;\n        }\n      }\n      // The special case is when this is the only non-label field on the block\n      // and it has an output but no inputs.\n      this.fullBlockClickTarget_ =\n          nFields <= 1 && this.sourceBlock_.outputConnection && !nConnections;\n    } else {\n      this.fullBlockClickTarget_ = false;\n    }\n\n    if (this.fullBlockClickTarget_) {\n      this.clickTarget_ = this.sourceBlock_.getSvgRoot();\n    } else {\n      this.createBorderRect_();\n    }\n    this.createTextElement_();\n  }\n\n  /**\n   * Ensure that the input value casts to a valid string.\n   * @param {*=} opt_newValue The input value.\n   * @return {*} A valid string, or null if invalid.\n   * @protected\n   */\n  doClassValidation_(opt_newValue) {\n    if (opt_newValue === null || opt_newValue === undefined) {\n      return null;\n    }\n    return String(opt_newValue);\n  }\n\n  /**\n   * Called by setValue if the text input is not valid. If the field is\n   * currently being edited it reverts value of the field to the previous\n   * value while allowing the display text to be handled by the htmlInput_.\n   * @param {*} _invalidValue The input value that was determined to be invalid.\n   *    This is not used by the text input because its display value is stored\n   * on the htmlInput_.\n   * @protected\n   */\n  doValueInvalid_(_invalidValue) {\n    if (this.isBeingEdited_) {\n      this.isTextValid_ = false;\n      const oldValue = this.value_;\n      // Revert value when the text becomes invalid.\n      this.value_ = this.htmlInput_.untypedDefaultValue_;\n      if (this.sourceBlock_ && eventUtils.isEnabled()) {\n        eventUtils.fire(new (eventUtils.get(eventUtils.BLOCK_CHANGE))(\n            this.sourceBlock_, 'field', this.name || null, oldValue,\n            this.value_));\n      }\n    }\n  }\n\n  /**\n   * Called by setValue if the text input is valid. Updates the value of the\n   * field, and updates the text of the field if it is not currently being\n   * edited (i.e. handled by the htmlInput_).\n   * @param {*} newValue The value to be saved. The default validator guarantees\n   * that this is a string.\n   * @protected\n   */\n  doValueUpdate_(newValue) {\n    this.isTextValid_ = true;\n    this.value_ = newValue;\n    if (!this.isBeingEdited_) {\n      // This should only occur if setValue is triggered programmatically.\n      this.isDirty_ = true;\n    }\n  }\n\n  /**\n   * Updates text field to match the colour/style of the block.\n   * @package\n   */\n  applyColour() {\n    if (this.sourceBlock_ && this.getConstants().FULL_BLOCK_FIELDS) {\n      if (this.borderRect_) {\n        this.borderRect_.setAttribute(\n            'stroke', this.sourceBlock_.style.colourTertiary);\n      } else {\n        this.sourceBlock_.pathObject.svgPath.setAttribute(\n            'fill', this.getConstants().FIELD_BORDER_RECT_COLOUR);\n      }\n    }\n  }\n\n  /**\n   * Updates the colour of the htmlInput given the current validity of the\n   * field's value.\n   * @protected\n   */\n  render_() {\n    super.render_();\n    // This logic is done in render_ rather than doValueInvalid_ or\n    // doValueUpdate_ so that the code is more centralized.\n    if (this.isBeingEdited_) {\n      this.resizeEditor_();\n      const htmlInput = /** @type {!HTMLElement} */ (this.htmlInput_);\n      if (!this.isTextValid_) {\n        dom.addClass(htmlInput, 'blocklyInvalidInput');\n        aria.setState(htmlInput, aria.State.INVALID, true);\n      } else {\n        dom.removeClass(htmlInput, 'blocklyInvalidInput');\n        aria.setState(htmlInput, aria.State.INVALID, false);\n      }\n    }\n  }\n\n  /**\n   * Set whether this field is spellchecked by the browser.\n   * @param {boolean} check True if checked.\n   */\n  setSpellcheck(check) {\n    if (check === this.spellcheck_) {\n      return;\n    }\n    this.spellcheck_ = check;\n    if (this.htmlInput_) {\n      this.htmlInput_.setAttribute('spellcheck', this.spellcheck_);\n    }\n  }\n\n  /**\n   * Show the inline free-text editor on top of the text.\n   * @param {Event=} _opt_e Optional mouse event that triggered the field to\n   *     open, or undefined if triggered programmatically.\n   * @param {boolean=} opt_quietInput True if editor should be created without\n   *     focus.  Defaults to false.\n   * @protected\n   */\n  showEditor_(_opt_e, opt_quietInput) {\n    this.workspace_ = (/** @type {!BlockSvg} */ (this.sourceBlock_)).workspace;\n    const quietInput = opt_quietInput || false;\n    if (!quietInput &&\n        (userAgent.MOBILE || userAgent.ANDROID || userAgent.IPAD)) {\n      this.showPromptEditor_();\n    } else {\n      this.showInlineEditor_(quietInput);\n    }\n  }\n\n  /**\n   * Create and show a text input editor that is a prompt (usually a popup).\n   * Mobile browsers have issues with in-line textareas (focus and keyboards).\n   * @private\n   */\n  showPromptEditor_() {\n    dialog.prompt(Msg['CHANGE_VALUE_TITLE'], this.getText(), function(text) {\n      // Text is null if user pressed cancel button.\n      if (text !== null) {\n        this.setValue(this.getValueFromEditorText_(text));\n      }\n    }.bind(this));\n  }\n\n  /**\n   * Create and show a text input editor that sits directly over the text input.\n   * @param {boolean} quietInput True if editor should be created without\n   *     focus.\n   * @private\n   */\n  showInlineEditor_(quietInput) {\n    WidgetDiv.show(this, this.sourceBlock_.RTL, this.widgetDispose_.bind(this));\n    this.htmlInput_ = this.widgetCreate_();\n    this.isBeingEdited_ = true;\n\n    if (!quietInput) {\n      this.htmlInput_.focus({preventScroll: true});\n      this.htmlInput_.select();\n    }\n  }\n\n  /**\n   * Create the text input editor widget.\n   * @return {!HTMLElement} The newly created text input editor.\n   * @protected\n   */\n  widgetCreate_() {\n    eventUtils.setGroup(true);\n    const div = WidgetDiv.getDiv();\n\n    dom.addClass(this.getClickTarget_(), 'editing');\n\n    const htmlInput =\n        /** @type {HTMLInputElement} */ (document.createElement('input'));\n    htmlInput.className = 'blocklyHtmlInput';\n    htmlInput.setAttribute('spellcheck', this.spellcheck_);\n    const scale = this.workspace_.getScale();\n    const fontSize = (this.getConstants().FIELD_TEXT_FONTSIZE * scale) + 'pt';\n    div.style.fontSize = fontSize;\n    htmlInput.style.fontSize = fontSize;\n    let borderRadius = (FieldTextInput.BORDERRADIUS * scale) + 'px';\n\n    if (this.fullBlockClickTarget_) {\n      const bBox = this.getScaledBBox();\n\n      // Override border radius.\n      borderRadius = (bBox.bottom - bBox.top) / 2 + 'px';\n      // Pull stroke colour from the existing shadow block\n      const strokeColour = this.sourceBlock_.getParent() ?\n          this.sourceBlock_.getParent().style.colourTertiary :\n          this.sourceBlock_.style.colourTertiary;\n      htmlInput.style.border = (1 * scale) + 'px solid ' + strokeColour;\n      div.style.borderRadius = borderRadius;\n      div.style.transition = 'box-shadow 0.25s ease 0s';\n      if (this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW) {\n        div.style.boxShadow =\n            'rgba(255, 255, 255, 0.3) 0 0 0 ' + (4 * scale) + 'px';\n      }\n    }\n    htmlInput.style.borderRadius = borderRadius;\n\n    div.appendChild(htmlInput);\n\n    htmlInput.value = htmlInput.defaultValue = this.getEditorText_(this.value_);\n    htmlInput.untypedDefaultValue_ = this.value_;\n    htmlInput.oldValue_ = null;\n\n    this.resizeEditor_();\n\n    this.bindInputEvents_(htmlInput);\n\n    return htmlInput;\n  }\n\n  /**\n   * Closes the editor, saves the results, and disposes of any events or\n   * DOM-references belonging to the editor.\n   * @protected\n   */\n  widgetDispose_() {\n    // Non-disposal related things that we do when the editor closes.\n    this.isBeingEdited_ = false;\n    this.isTextValid_ = true;\n    // Make sure the field's node matches the field's internal value.\n    this.forceRerender();\n    this.onFinishEditing_(this.value_);\n    eventUtils.setGroup(false);\n\n    // Actual disposal.\n    this.unbindInputEvents_();\n    const style = WidgetDiv.getDiv().style;\n    style.width = 'auto';\n    style.height = 'auto';\n    style.fontSize = '';\n    style.transition = '';\n    style.boxShadow = '';\n    this.htmlInput_ = null;\n\n    dom.removeClass(this.getClickTarget_(), 'editing');\n  }\n\n  /**\n   * A callback triggered when the user is done editing the field via the UI.\n   * @param {*} _value The new value of the field.\n   */\n  onFinishEditing_(_value) {\n    // NOP by default.\n    // TODO(#2496): Support people passing a func into the field.\n  }\n\n  /**\n   * Bind handlers for user input on the text input field's editor.\n   * @param {!HTMLElement} htmlInput The htmlInput to which event\n   *    handlers will be bound.\n   * @protected\n   */\n  bindInputEvents_(htmlInput) {\n    // Trap Enter without IME and Esc to hide.\n    this.onKeyDownWrapper_ = browserEvents.conditionalBind(\n        htmlInput, 'keydown', this, this.onHtmlInputKeyDown_);\n    // Resize after every input change.\n    this.onKeyInputWrapper_ = browserEvents.conditionalBind(\n        htmlInput, 'input', this, this.onHtmlInputChange_);\n  }\n\n  /**\n   * Unbind handlers for user input and workspace size changes.\n   * @protected\n   */\n  unbindInputEvents_() {\n    if (this.onKeyDownWrapper_) {\n      browserEvents.unbind(this.onKeyDownWrapper_);\n      this.onKeyDownWrapper_ = null;\n    }\n    if (this.onKeyInputWrapper_) {\n      browserEvents.unbind(this.onKeyInputWrapper_);\n      this.onKeyInputWrapper_ = null;\n    }\n  }\n\n  /**\n   * Handle key down to the editor.\n   * @param {!Event} e Keyboard event.\n   * @protected\n   */\n  onHtmlInputKeyDown_(e) {\n    if (e.keyCode === KeyCodes.ENTER) {\n      WidgetDiv.hide();\n      dropDownDiv.hideWithoutAnimation();\n    } else if (e.keyCode === KeyCodes.ESC) {\n      this.setValue(this.htmlInput_.untypedDefaultValue_);\n      WidgetDiv.hide();\n      dropDownDiv.hideWithoutAnimation();\n    } else if (e.keyCode === KeyCodes.TAB) {\n      WidgetDiv.hide();\n      dropDownDiv.hideWithoutAnimation();\n      this.sourceBlock_.tab(this, !e.shiftKey);\n      e.preventDefault();\n    }\n  }\n\n  /**\n   * Handle a change to the editor.\n   * @param {!Event} _e Keyboard event.\n   * @private\n   */\n  onHtmlInputChange_(_e) {\n    const text = this.htmlInput_.value;\n    if (text !== this.htmlInput_.oldValue_) {\n      this.htmlInput_.oldValue_ = text;\n\n      const value = this.getValueFromEditorText_(text);\n      this.setValue(value);\n      this.forceRerender();\n      this.resizeEditor_();\n    }\n  }\n\n  /**\n   * Set the HTML input value and the field's internal value. The difference\n   * between this and ``setValue`` is that this also updates the HTML input\n   * value whilst editing.\n   * @param {*} newValue New value.\n   * @protected\n   */\n  setEditorValue_(newValue) {\n    this.isDirty_ = true;\n    if (this.isBeingEdited_) {\n      // In the case this method is passed an invalid value, we still\n      // pass it through the transformation method `getEditorText` to deal\n      // with. Otherwise, the internal field's state will be inconsistent\n      // with what's shown to the user.\n      this.htmlInput_.value = this.getEditorText_(newValue);\n    }\n    this.setValue(newValue);\n  }\n\n  /**\n   * Resize the editor to fit the text.\n   * @protected\n   */\n  resizeEditor_() {\n    const div = WidgetDiv.getDiv();\n    const bBox = this.getScaledBBox();\n    div.style.width = bBox.right - bBox.left + 'px';\n    div.style.height = bBox.bottom - bBox.top + 'px';\n\n    // In RTL mode block fields and LTR input fields the left edge moves,\n    // whereas the right edge is fixed.  Reposition the editor.\n    const x = this.sourceBlock_.RTL ? bBox.right - div.offsetWidth : bBox.left;\n    const xy = new Coordinate(x, bBox.top);\n\n    div.style.left = xy.x + 'px';\n    div.style.top = xy.y + 'px';\n  }\n\n  /**\n   * Returns whether or not the field is tab navigable.\n   * @return {boolean} True if the field is tab navigable.\n   * @override\n   */\n  isTabNavigable() {\n    return true;\n  }\n\n  /**\n   * Use the `getText_` developer hook to override the field's text\n   * representation. When we're currently editing, return the current HTML value\n   * instead. Otherwise, return null which tells the field to use the default\n   * behaviour (which is a string cast of the field's value).\n   * @return {?string} The HTML value if we're editing, otherwise null.\n   * @protected\n   * @override\n   */\n  getText_() {\n    if (this.isBeingEdited_ && this.htmlInput_) {\n      // We are currently editing, return the HTML input value instead.\n      return this.htmlInput_.value;\n    }\n    return null;\n  }\n\n  /**\n   * Transform the provided value into a text to show in the HTML input.\n   * Override this method if the field's HTML input representation is different\n   * than the field's value. This should be coupled with an override of\n   * `getValueFromEditorText_`.\n   * @param {*} value The value stored in this field.\n   * @return {string} The text to show on the HTML input.\n   * @protected\n   */\n  getEditorText_(value) {\n    return String(value);\n  }\n\n  /**\n   * Transform the text received from the HTML input into a value to store\n   * in this field.\n   * Override this method if the field's HTML input representation is different\n   * than the field's value. This should be coupled with an override of\n   * `getEditorText_`.\n   * @param {string} text Text received from the HTML input.\n   * @return {*} The value to store.\n   * @protected\n   */\n  getValueFromEditorText_(text) {\n    return text;\n  }\n\n  /**\n   * Construct a FieldTextInput from a JSON arg object,\n   * dereferencing any string table references.\n   * @param {!Object} options A JSON object with options (text, and spellcheck).\n   * @return {!FieldTextInput} The new field instance.\n   * @package\n   * @nocollapse\n   */\n  static fromJson(options) {\n    const text = parsing.replaceMessageReferences(options['text']);\n    // `this` might be a subclass of FieldTextInput if that class doesn't\n    // override the static fromJson method.\n    return new this(text, undefined, options);\n  }\n}\n\n/**\n * The default value for this field.\n * @type {*}\n * @protected\n */\nFieldTextInput.prototype.DEFAULT_VALUE = '';\n\n/**\n * Pixel size of input border radius.\n * Should match blocklyText's border-radius in CSS.\n */\nFieldTextInput.BORDERRADIUS = 4;\n\nfieldRegistry.register('field_input', FieldTextInput);\n\nexports.FieldTextInput = FieldTextInput;\n","/**\n * @license\n * Copyright 2016 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Number input field\n */\n'use strict';\n\n/**\n * Number input field\n * @class\n */\ngoog.module('Blockly.FieldNumber');\n\nconst aria = goog.require('Blockly.utils.aria');\nconst fieldRegistry = goog.require('Blockly.fieldRegistry');\nconst {Field} = goog.require('Blockly.Field');\nconst {FieldTextInput} = goog.require('Blockly.FieldTextInput');\n/* eslint-disable-next-line no-unused-vars */\nconst {Sentinel} = goog.requireType('Blockly.utils.Sentinel');\n\n\n/**\n * Class for an editable number field.\n * @extends {FieldTextInput}\n * @alias Blockly.FieldNumber\n */\nclass FieldNumber extends FieldTextInput {\n  /**\n   * @param {(string|number|!Sentinel)=} opt_value The initial value of\n   *     the field. Should cast to a number. Defaults to 0.\n   *     Also accepts Field.SKIP_SETUP if you wish to skip setup (only used by\n   *     subclasses that want to handle configuration and setting the field\n   *     value after their own constructors have run).\n   * @param {?(string|number)=} opt_min Minimum value. Will only be used if\n   *     opt_config is not provided.\n   * @param {?(string|number)=} opt_max Maximum value. Will only be used if\n   *     opt_config is not provided.\n   * @param {?(string|number)=} opt_precision Precision for value. Will only be\n   *     used if opt_config is not provided.\n   * @param {?Function=} opt_validator A function that is called to validate\n   *     changes to the field's value. Takes in a number & returns a validated\n   *     number, or null to abort the change.\n   * @param {Object=} opt_config A map of options used to configure the field.\n   *     See the [field creation documentation]{@link\n   *     https://developers.google.com/blockly/guides/create-custom-blocks/fields/built-in-fields/number#creation}\n   *     for a list of properties this parameter supports.\n   */\n  constructor(\n      opt_value, opt_min, opt_max, opt_precision, opt_validator, opt_config) {\n    // Pass SENTINEL so that we can define properties before value validation.\n    super(Field.SKIP_SETUP);\n\n    /**\n     * The minimum value this number field can contain.\n     * @type {number}\n     * @protected\n     */\n    this.min_ = -Infinity;\n\n    /**\n     * The maximum value this number field can contain.\n     * @type {number}\n     * @protected\n     */\n    this.max_ = Infinity;\n\n    /**\n     * The multiple to which this fields value is rounded.\n     * @type {number}\n     * @protected\n     */\n    this.precision_ = 0;\n\n    /**\n     * The number of decimal places to allow, or null to allow any number of\n     * decimal digits.\n     * @type {?number}\n     * @private\n     */\n    this.decimalPlaces_ = null;\n\n    /**\n     * Serializable fields are saved by the serializer, non-serializable fields\n     * are not. Editable fields should also be serializable.\n     * @type {boolean}\n     */\n    this.SERIALIZABLE = true;\n\n    if (opt_value === Field.SKIP_SETUP) return;\n    if (opt_config) {\n      this.configure_(opt_config);\n    } else {\n      this.setConstraints(opt_min, opt_max, opt_precision);\n    }\n    this.setValue(opt_value);\n    if (opt_validator) this.setValidator(opt_validator);\n  }\n\n  /**\n   * Configure the field based on the given map of options.\n   * @param {!Object} config A map of options to configure the field based on.\n   * @protected\n   * @override\n   */\n  configure_(config) {\n    super.configure_(config);\n    this.setMinInternal_(config['min']);\n    this.setMaxInternal_(config['max']);\n    this.setPrecisionInternal_(config['precision']);\n  }\n\n  /**\n   * Set the maximum, minimum and precision constraints on this field.\n   * Any of these properties may be undefined or NaN to be disabled.\n   * Setting precision (usually a power of 10) enforces a minimum step between\n   * values. That is, the user's value will rounded to the closest multiple of\n   * precision. The least significant digit place is inferred from the\n   * precision. Integers values can be enforces by choosing an integer\n   * precision.\n   * @param {?(number|string|undefined)} min Minimum value.\n   * @param {?(number|string|undefined)} max Maximum value.\n   * @param {?(number|string|undefined)} precision Precision for value.\n   */\n  setConstraints(min, max, precision) {\n    this.setMinInternal_(min);\n    this.setMaxInternal_(max);\n    this.setPrecisionInternal_(precision);\n    this.setValue(this.getValue());\n  }\n\n  /**\n   * Sets the minimum value this field can contain. Updates the value to\n   * reflect.\n   * @param {?(number|string|undefined)} min Minimum value.\n   */\n  setMin(min) {\n    this.setMinInternal_(min);\n    this.setValue(this.getValue());\n  }\n\n  /**\n   * Sets the minimum value this field can contain. Called internally to avoid\n   * value updates.\n   * @param {?(number|string|undefined)} min Minimum value.\n   * @private\n   */\n  setMinInternal_(min) {\n    if (min == null) {\n      this.min_ = -Infinity;\n    } else {\n      min = Number(min);\n      if (!isNaN(min)) {\n        this.min_ = min;\n      }\n    }\n  }\n\n  /**\n   * Returns the current minimum value this field can contain. Default is\n   * -Infinity.\n   * @return {number} The current minimum value this field can contain.\n   */\n  getMin() {\n    return this.min_;\n  }\n\n  /**\n   * Sets the maximum value this field can contain. Updates the value to\n   * reflect.\n   * @param {?(number|string|undefined)} max Maximum value.\n   */\n  setMax(max) {\n    this.setMaxInternal_(max);\n    this.setValue(this.getValue());\n  }\n\n  /**\n   * Sets the maximum value this field can contain. Called internally to avoid\n   * value updates.\n   * @param {?(number|string|undefined)} max Maximum value.\n   * @private\n   */\n  setMaxInternal_(max) {\n    if (max == null) {\n      this.max_ = Infinity;\n    } else {\n      max = Number(max);\n      if (!isNaN(max)) {\n        this.max_ = max;\n      }\n    }\n  }\n\n  /**\n   * Returns the current maximum value this field can contain. Default is\n   * Infinity.\n   * @return {number} The current maximum value this field can contain.\n   */\n  getMax() {\n    return this.max_;\n  }\n\n  /**\n   * Sets the precision of this field's value, i.e. the number to which the\n   * value is rounded. Updates the field to reflect.\n   * @param {?(number|string|undefined)} precision The number to which the\n   *    field's value is rounded.\n   */\n  setPrecision(precision) {\n    this.setPrecisionInternal_(precision);\n    this.setValue(this.getValue());\n  }\n\n  /**\n   * Sets the precision of this field's value. Called internally to avoid\n   * value updates.\n   * @param {?(number|string|undefined)} precision The number to which the\n   *    field's value is rounded.\n   * @private\n   */\n  setPrecisionInternal_(precision) {\n    this.precision_ = Number(precision) || 0;\n    let precisionString = String(this.precision_);\n    if (precisionString.indexOf('e') !== -1) {\n      // String() is fast.  But it turns .0000001 into '1e-7'.\n      // Use the much slower toLocaleString to access all the digits.\n      precisionString =\n          this.precision_.toLocaleString('en-US', {maximumFractionDigits: 20});\n    }\n    const decimalIndex = precisionString.indexOf('.');\n    if (decimalIndex === -1) {\n      // If the precision is 0 (float) allow any number of decimals,\n      // otherwise allow none.\n      this.decimalPlaces_ = precision ? 0 : null;\n    } else {\n      this.decimalPlaces_ = precisionString.length - decimalIndex - 1;\n    }\n  }\n\n  /**\n   * Returns the current precision of this field. The precision being the\n   * number to which the field's value is rounded. A precision of 0 means that\n   * the value is not rounded.\n   * @return {number} The number to which this field's value is rounded.\n   */\n  getPrecision() {\n    return this.precision_;\n  }\n\n  /**\n   * Ensure that the input value is a valid number (must fulfill the\n   * constraints placed on the field).\n   * @param {*=} opt_newValue The input value.\n   * @return {?number} A valid number, or null if invalid.\n   * @protected\n   * @override\n   */\n  doClassValidation_(opt_newValue) {\n    if (opt_newValue === null) {\n      return null;\n    }\n    // Clean up text.\n    let newValue = String(opt_newValue);\n    // TODO: Handle cases like 'ten', '1.203,14', etc.\n    // 'O' is sometimes mistaken for '0' by inexperienced users.\n    newValue = newValue.replace(/O/ig, '0');\n    // Strip out thousands separators.\n    newValue = newValue.replace(/,/g, '');\n    // Ignore case of 'Infinity'.\n    newValue = newValue.replace(/infinity/i, 'Infinity');\n\n    // Clean up number.\n    let n = Number(newValue || 0);\n    if (isNaN(n)) {\n      // Invalid number.\n      return null;\n    }\n    // Get the value in range.\n    n = Math.min(Math.max(n, this.min_), this.max_);\n    // Round to nearest multiple of precision.\n    if (this.precision_ && isFinite(n)) {\n      n = Math.round(n / this.precision_) * this.precision_;\n    }\n    // Clean up floating point errors.\n    if (this.decimalPlaces_ !== null) {\n      n = Number(n.toFixed(this.decimalPlaces_));\n    }\n    return n;\n  }\n\n  /**\n   * Create the number input editor widget.\n   * @return {!HTMLElement} The newly created number input editor.\n   * @protected\n   * @override\n   */\n  widgetCreate_() {\n    const htmlInput = super.widgetCreate_();\n\n    // Set the accessibility state\n    if (this.min_ > -Infinity) {\n      aria.setState(htmlInput, aria.State.VALUEMIN, this.min_);\n    }\n    if (this.max_ < Infinity) {\n      aria.setState(htmlInput, aria.State.VALUEMAX, this.max_);\n    }\n    return htmlInput;\n  }\n\n  /**\n   * Construct a FieldNumber from a JSON arg object.\n   * @param {!Object} options A JSON object with options (value, min, max, and\n   *                          precision).\n   * @return {!FieldNumber} The new field instance.\n   * @package\n   * @nocollapse\n   * @override\n   */\n  static fromJson(options) {\n    // `this` might be a subclass of FieldNumber if that class doesn't override\n    // the static fromJson method.\n    return new this(\n        options['value'], undefined, undefined, undefined, undefined, options);\n  }\n}\n\n/**\n * The default value for this field.\n * @type {*}\n * @protected\n */\nFieldNumber.prototype.DEFAULT_VALUE = 0;\n\nfieldRegistry.register('field_number', FieldNumber);\n\nexports.FieldNumber = FieldNumber;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Text Area field.\n */\n'use strict';\n\n/**\n * Text Area field.\n * @class\n */\ngoog.module('Blockly.FieldMultilineInput');\n\nconst Css = goog.require('Blockly.Css');\nconst WidgetDiv = goog.require('Blockly.WidgetDiv');\nconst aria = goog.require('Blockly.utils.aria');\nconst dom = goog.require('Blockly.utils.dom');\nconst fieldRegistry = goog.require('Blockly.fieldRegistry');\nconst parsing = goog.require('Blockly.utils.parsing');\nconst userAgent = goog.require('Blockly.utils.userAgent');\nconst {FieldTextInput} = goog.require('Blockly.FieldTextInput');\nconst {Field} = goog.require('Blockly.Field');\nconst {KeyCodes} = goog.require('Blockly.utils.KeyCodes');\n/* eslint-disable-next-line no-unused-vars */\nconst {Sentinel} = goog.requireType('Blockly.utils.Sentinel');\nconst {Svg} = goog.require('Blockly.utils.Svg');\n\n\n/**\n * Class for an editable text area field.\n * @extends {FieldTextInput}\n * @alias Blockly.FieldMultilineInput\n */\nclass FieldMultilineInput extends FieldTextInput {\n  /**\n   * @param {(string|!Sentinel)=} opt_value The initial content of the\n   *     field. Should cast to a string. Defaults to an empty string if null or\n   *     undefined.\n   *     Also accepts Field.SKIP_SETUP if you wish to skip setup (only used by\n   *     subclasses that want to handle configuration and setting the field\n   *     value after their own constructors have run).\n   * @param {Function=} opt_validator An optional function that is called\n   *     to validate any constraints on what the user entered.  Takes the new\n   *     text as an argument and returns either the accepted text, a replacement\n   *     text, or null to abort the change.\n   * @param {Object=} opt_config A map of options used to configure the field.\n   *     See the [field creation documentation]{@link\n   *     https://developers.google.com/blockly/guides/create-custom-blocks/fields/built-in-fields/multiline-text-input#creation}\n   *     for a list of properties this parameter supports.\n   */\n  constructor(opt_value, opt_validator, opt_config) {\n    super(Field.SKIP_SETUP);\n\n    /**\n     * The SVG group element that will contain a text element for each text row\n     *     when initialized.\n     * @type {SVGGElement}\n     */\n    this.textGroup_ = null;\n\n    /**\n     * Defines the maximum number of lines of field.\n     * If exceeded, scrolling functionality is enabled.\n     * @type {number}\n     * @protected\n     */\n    this.maxLines_ = Infinity;\n\n    /**\n     * Whether Y overflow is currently occurring.\n     * @type {boolean}\n     * @protected\n     */\n    this.isOverflowedY_ = false;\n\n    if (opt_value === Field.SKIP_SETUP) return;\n    if (opt_config) this.configure_(opt_config);\n    this.setValue(opt_value);\n    if (opt_validator) this.setValidator(opt_validator);\n  }\n\n  /**\n   * @override\n   */\n  configure_(config) {\n    super.configure_(config);\n    config.maxLines && this.setMaxLines(config.maxLines);\n  }\n\n  /**\n   * Serializes this field's value to XML. Should only be called by Blockly.Xml.\n   * @param {!Element} fieldElement The element to populate with info about the\n   *    field's state.\n   * @return {!Element} The element containing info about the field's state.\n   * @package\n   */\n  toXml(fieldElement) {\n    // Replace '\\n' characters with HTML-escaped equivalent '&#10'. This is\n    // needed so the plain-text representation of the XML produced by\n    // `Blockly.Xml.domToText` will appear on a single line (this is a\n    // limitation of the plain-text format).\n    fieldElement.textContent = this.getValue().replace(/\\n/g, '&#10;');\n    return fieldElement;\n  }\n\n  /**\n   * Sets the field's value based on the given XML element. Should only be\n   * called by Blockly.Xml.\n   * @param {!Element} fieldElement The element containing info about the\n   *    field's state.\n   * @package\n   */\n  fromXml(fieldElement) {\n    this.setValue(fieldElement.textContent.replace(/&#10;/g, '\\n'));\n  }\n\n  /**\n   * Saves this field's value.\n   * @return {*} The state of this field.\n   * @package\n   */\n  saveState() {\n    const legacyState = this.saveLegacyState(FieldMultilineInput);\n    if (legacyState !== null) {\n      return legacyState;\n    }\n    return this.getValue();\n  }\n\n  /**\n   * Sets the field's value based on the given state.\n   * @param {*} state The state of the variable to assign to this variable\n   *     field.\n   * @override\n   * @package\n   */\n  loadState(state) {\n    if (this.loadLegacyState(Field, state)) {\n      return;\n    }\n    this.setValue(state);\n  }\n\n  /**\n   * Create the block UI for this field.\n   * @package\n   */\n  initView() {\n    this.createBorderRect_();\n    this.textGroup_ = dom.createSvgElement(\n        Svg.G, {\n          'class': 'blocklyEditableText',\n        },\n        this.fieldGroup_);\n  }\n\n  /**\n   * Get the text from this field as displayed on screen.  May differ from\n   * getText due to ellipsis, and other formatting.\n   * @return {string} Currently displayed text.\n   * @protected\n   * @override\n   */\n  getDisplayText_() {\n    let textLines = this.getText();\n    if (!textLines) {\n      // Prevent the field from disappearing if empty.\n      return Field.NBSP;\n    }\n    const lines = textLines.split('\\n');\n    textLines = '';\n    const displayLinesNumber =\n        this.isOverflowedY_ ? this.maxLines_ : lines.length;\n    for (let i = 0; i < displayLinesNumber; i++) {\n      let text = lines[i];\n      if (text.length > this.maxDisplayLength) {\n        // Truncate displayed string and add an ellipsis ('...').\n        text = text.substring(0, this.maxDisplayLength - 4) + '...';\n      } else if (this.isOverflowedY_ && i === displayLinesNumber - 1) {\n        text = text.substring(0, text.length - 3) + '...';\n      }\n      // Replace whitespace with non-breaking spaces so the text doesn't\n      // collapse.\n      text = text.replace(/\\s/g, Field.NBSP);\n\n      textLines += text;\n      if (i !== displayLinesNumber - 1) {\n        textLines += '\\n';\n      }\n    }\n    if (this.sourceBlock_.RTL) {\n      // The SVG is LTR, force value to be RTL.\n      textLines += '\\u200F';\n    }\n    return textLines;\n  }\n\n  /**\n   * Called by setValue if the text input is valid. Updates the value of the\n   * field, and updates the text of the field if it is not currently being\n   * edited (i.e. handled by the htmlInput_). Is being redefined here to update\n   * overflow state of the field.\n   * @param {*} newValue The value to be saved. The default validator guarantees\n   * that this is a string.\n   * @protected\n   */\n  doValueUpdate_(newValue) {\n    super.doValueUpdate_(newValue);\n    this.isOverflowedY_ = this.value_.split('\\n').length > this.maxLines_;\n  }\n\n  /**\n   * Updates the text of the textElement.\n   * @protected\n   */\n  render_() {\n    // Remove all text group children.\n    let currentChild;\n    while ((currentChild = this.textGroup_.firstChild)) {\n      this.textGroup_.removeChild(currentChild);\n    }\n\n    // Add in text elements into the group.\n    const lines = this.getDisplayText_().split('\\n');\n    let y = 0;\n    for (let i = 0; i < lines.length; i++) {\n      const lineHeight = this.getConstants().FIELD_TEXT_HEIGHT +\n          this.getConstants().FIELD_BORDER_RECT_Y_PADDING;\n      const span = dom.createSvgElement(\n          Svg.TEXT, {\n            'class': 'blocklyText blocklyMultilineText',\n            'x': this.getConstants().FIELD_BORDER_RECT_X_PADDING,\n            'y': y + this.getConstants().FIELD_BORDER_RECT_Y_PADDING,\n            'dy': this.getConstants().FIELD_TEXT_BASELINE,\n          },\n          this.textGroup_);\n      span.appendChild(document.createTextNode(lines[i]));\n      y += lineHeight;\n    }\n\n    if (this.isBeingEdited_) {\n      const htmlInput = /** @type {!HTMLElement} */ (this.htmlInput_);\n      if (this.isOverflowedY_) {\n        dom.addClass(htmlInput, 'blocklyHtmlTextAreaInputOverflowedY');\n      } else {\n        dom.removeClass(htmlInput, 'blocklyHtmlTextAreaInputOverflowedY');\n      }\n    }\n\n    this.updateSize_();\n\n    if (this.isBeingEdited_) {\n      if (this.sourceBlock_.RTL) {\n        // in RTL, we need to let the browser reflow before resizing\n        // in order to get the correct bounding box of the borderRect\n        // avoiding issue #2777.\n        setTimeout(this.resizeEditor_.bind(this), 0);\n      } else {\n        this.resizeEditor_();\n      }\n      const htmlInput = /** @type {!HTMLElement} */ (this.htmlInput_);\n      if (!this.isTextValid_) {\n        dom.addClass(htmlInput, 'blocklyInvalidInput');\n        aria.setState(htmlInput, aria.State.INVALID, true);\n      } else {\n        dom.removeClass(htmlInput, 'blocklyInvalidInput');\n        aria.setState(htmlInput, aria.State.INVALID, false);\n      }\n    }\n  }\n\n  /**\n   * Updates the size of the field based on the text.\n   * @protected\n   */\n  updateSize_() {\n    const nodes = this.textGroup_.childNodes;\n    let totalWidth = 0;\n    let totalHeight = 0;\n    for (let i = 0; i < nodes.length; i++) {\n      const tspan = /** @type {!Element} */ (nodes[i]);\n      const textWidth = dom.getTextWidth(tspan);\n      if (textWidth > totalWidth) {\n        totalWidth = textWidth;\n      }\n      totalHeight += this.getConstants().FIELD_TEXT_HEIGHT +\n          (i > 0 ? this.getConstants().FIELD_BORDER_RECT_Y_PADDING : 0);\n    }\n    if (this.isBeingEdited_) {\n      // The default width is based on the longest line in the display text,\n      // but when it's being edited, width should be calculated based on the\n      // absolute longest line, even if it would be truncated after editing.\n      // Otherwise we would get wrong editor width when there are more\n      // lines than this.maxLines_.\n      const actualEditorLines = this.value_.split('\\n');\n      const dummyTextElement = dom.createSvgElement(\n          Svg.TEXT, {'class': 'blocklyText blocklyMultilineText'});\n      const fontSize = this.getConstants().FIELD_TEXT_FONTSIZE;\n      const fontWeight = this.getConstants().FIELD_TEXT_FONTWEIGHT;\n      const fontFamily = this.getConstants().FIELD_TEXT_FONTFAMILY;\n\n      for (let i = 0; i < actualEditorLines.length; i++) {\n        if (actualEditorLines[i].length > this.maxDisplayLength) {\n          actualEditorLines[i] =\n              actualEditorLines[i].substring(0, this.maxDisplayLength);\n        }\n        dummyTextElement.textContent = actualEditorLines[i];\n        const lineWidth = dom.getFastTextWidth(\n            dummyTextElement, fontSize, fontWeight, fontFamily);\n        if (lineWidth > totalWidth) {\n          totalWidth = lineWidth;\n        }\n      }\n\n      const scrollbarWidth =\n          this.htmlInput_.offsetWidth - this.htmlInput_.clientWidth;\n      totalWidth += scrollbarWidth;\n    }\n    if (this.borderRect_) {\n      totalHeight += this.getConstants().FIELD_BORDER_RECT_Y_PADDING * 2;\n      totalWidth += this.getConstants().FIELD_BORDER_RECT_X_PADDING * 2;\n      this.borderRect_.setAttribute('width', totalWidth);\n      this.borderRect_.setAttribute('height', totalHeight);\n    }\n    this.size_.width = totalWidth;\n    this.size_.height = totalHeight;\n\n    this.positionBorderRect_();\n  }\n\n  /**\n   * Show the inline free-text editor on top of the text.\n   * Overrides the default behaviour to force rerender in order to\n   * correct block size, based on editor text.\n   * @param {Event=} _opt_e Optional mouse event that triggered the field to\n   *     open, or undefined if triggered programmatically.\n   * @param {boolean=} opt_quietInput True if editor should be created without\n   *     focus.  Defaults to false.\n   * @override\n   */\n  showEditor_(_opt_e, opt_quietInput) {\n    super.showEditor_(_opt_e, opt_quietInput);\n    this.forceRerender();\n  }\n\n  /**\n   * Create the text input editor widget.\n   * @return {!HTMLTextAreaElement} The newly created text input editor.\n   * @protected\n   */\n  widgetCreate_() {\n    const div = WidgetDiv.getDiv();\n    const scale = this.workspace_.getScale();\n\n    const htmlInput =\n        /** @type {HTMLTextAreaElement} */ (document.createElement('textarea'));\n    htmlInput.className = 'blocklyHtmlInput blocklyHtmlTextAreaInput';\n    htmlInput.setAttribute('spellcheck', this.spellcheck_);\n    const fontSize = (this.getConstants().FIELD_TEXT_FONTSIZE * scale) + 'pt';\n    div.style.fontSize = fontSize;\n    htmlInput.style.fontSize = fontSize;\n    const borderRadius = (FieldTextInput.BORDERRADIUS * scale) + 'px';\n    htmlInput.style.borderRadius = borderRadius;\n    const paddingX = this.getConstants().FIELD_BORDER_RECT_X_PADDING * scale;\n    const paddingY =\n        this.getConstants().FIELD_BORDER_RECT_Y_PADDING * scale / 2;\n    htmlInput.style.padding = paddingY + 'px ' + paddingX + 'px ' + paddingY +\n        'px ' + paddingX + 'px';\n    const lineHeight = this.getConstants().FIELD_TEXT_HEIGHT +\n        this.getConstants().FIELD_BORDER_RECT_Y_PADDING;\n    htmlInput.style.lineHeight = (lineHeight * scale) + 'px';\n\n    div.appendChild(htmlInput);\n\n    htmlInput.value = htmlInput.defaultValue = this.getEditorText_(this.value_);\n    htmlInput.untypedDefaultValue_ = this.value_;\n    htmlInput.oldValue_ = null;\n    if (userAgent.GECKO) {\n      // In FF, ensure the browser reflows before resizing to avoid issue #2777.\n      setTimeout(this.resizeEditor_.bind(this), 0);\n    } else {\n      this.resizeEditor_();\n    }\n\n    this.bindInputEvents_(htmlInput);\n\n    return htmlInput;\n  }\n\n  /**\n   * Sets the maxLines config for this field.\n   * @param {number} maxLines Defines the maximum number of lines allowed,\n   *     before scrolling functionality is enabled.\n   */\n  setMaxLines(maxLines) {\n    if (typeof maxLines === 'number' && maxLines > 0 &&\n        maxLines !== this.maxLines_) {\n      this.maxLines_ = maxLines;\n      this.forceRerender();\n    }\n  }\n\n  /**\n   * Returns the maxLines config of this field.\n   * @return {number} The maxLines config value.\n   */\n  getMaxLines() {\n    return this.maxLines_;\n  }\n\n  /**\n   * Handle key down to the editor. Override the text input definition of this\n   * so as to not close the editor when enter is typed in.\n   * @param {!Event} e Keyboard event.\n   * @protected\n   */\n  onHtmlInputKeyDown_(e) {\n    if (e.keyCode !== KeyCodes.ENTER) {\n      super.onHtmlInputKeyDown_(e);\n    }\n  }\n\n  /**\n   * Construct a FieldMultilineInput from a JSON arg object,\n   * dereferencing any string table references.\n   * @param {!Object} options A JSON object with options (text, and spellcheck).\n   * @return {!FieldMultilineInput} The new field instance.\n   * @package\n   * @nocollapse\n   * @override\n   */\n  static fromJson(options) {\n    const text = parsing.replaceMessageReferences(options['text']);\n    // `this` might be a subclass of FieldMultilineInput if that class doesn't\n    // override the static fromJson method.\n    return new this(text, undefined, options);\n  }\n}\n\n/**\n * CSS for multiline field.  See css.js for use.\n */\nCss.register(`\n.blocklyHtmlTextAreaInput {\n  font-family: monospace;\n  resize: none;\n  overflow: hidden;\n  height: 100%;\n  text-align: left;\n}\n\n.blocklyHtmlTextAreaInputOverflowedY {\n  overflow-y: scroll;\n}\n`);\n\nfieldRegistry.register('field_multilinetext', FieldMultilineInput);\n\nexports.FieldMultilineInput = FieldMultilineInput;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Non-editable, serializable text field. Behaves like a\n *    normal label but is serialized to XML. It may only be\n *    edited programmatically.\n */\n'use strict';\n\n/**\n * Non-editable, serializable text field. Behaves like a\n *    normal label but is serialized to XML. It may only be\n *    edited programmatically.\n * @class\n */\ngoog.module('Blockly.FieldLabelSerializable');\n\nconst fieldRegistry = goog.require('Blockly.fieldRegistry');\nconst parsing = goog.require('Blockly.utils.parsing');\nconst {FieldLabel} = goog.require('Blockly.FieldLabel');\n\n\n/**\n * Class for a non-editable, serializable text field.\n * @extends {FieldLabel}\n * @alias Blockly.FieldLabelSerializable\n */\nclass FieldLabelSerializable extends FieldLabel {\n  /**\n   * @param {string=} opt_value The initial value of the field. Should cast to a\n   *    string. Defaults to an empty string if null or undefined.\n   * @param {string=} opt_class Optional CSS class for the field's text.\n   * @param {Object=} opt_config A map of options used to configure the field.\n   *    See the [field creation documentation]{@link\n   * https://developers.google.com/blockly/guides/create-custom-blocks/fields/built-in-fields/label-serializable#creation}\n   *    for a list of properties this parameter supports.\n   */\n  constructor(opt_value, opt_class, opt_config) {\n    super(String(opt_value ?? ''), opt_class, opt_config);\n\n    /**\n     * Editable fields usually show some sort of UI indicating they are\n     * editable. This field should not.\n     * @type {boolean}\n     */\n    this.EDITABLE = false;\n\n    /**\n     * Serializable fields are saved by the XML renderer, non-serializable\n     * fields are not.  This field should be serialized, but only edited\n     * programmatically.\n     * @type {boolean}\n     */\n    this.SERIALIZABLE = true;\n  }\n\n  /**\n   * Construct a FieldLabelSerializable from a JSON arg object,\n   * dereferencing any string table references.\n   * @param {!Object} options A JSON object with options (text, and class).\n   * @return {!FieldLabelSerializable} The new field instance.\n   * @package\n   * @nocollapse\n   * @override\n   */\n  static fromJson(options) {\n    const text = parsing.replaceMessageReferences(options['text']);\n    // `this` might be a subclass of FieldLabelSerializable if that class\n    // doesn't override the static fromJson method.\n    return new this(text, undefined, options);\n  }\n}\n\nfieldRegistry.register('field_label_serializable', FieldLabelSerializable);\n\nexports.FieldLabelSerializable = FieldLabelSerializable;\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Colour input field.\n */\n'use strict';\n\n/**\n * Colour input field.\n * @class\n */\ngoog.module('Blockly.FieldColour');\n\nconst Css = goog.require('Blockly.Css');\nconst aria = goog.require('Blockly.utils.aria');\nconst browserEvents = goog.require('Blockly.browserEvents');\nconst colour = goog.require('Blockly.utils.colour');\nconst dom = goog.require('Blockly.utils.dom');\nconst dropDownDiv = goog.require('Blockly.dropDownDiv');\nconst fieldRegistry = goog.require('Blockly.fieldRegistry');\nconst idGenerator = goog.require('Blockly.utils.idGenerator');\nconst {Field} = goog.require('Blockly.Field');\nconst {KeyCodes} = goog.require('Blockly.utils.KeyCodes');\n/* eslint-disable-next-line no-unused-vars */\nconst {Sentinel} = goog.requireType('Blockly.utils.Sentinel');\nconst {Size} = goog.require('Blockly.utils.Size');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.Events.BlockChange');\n\n\n/**\n * Class for a colour input field.\n * @extends {Field}\n * @alias Blockly.FieldColour\n */\nclass FieldColour extends Field {\n  /**\n   * @param {(string|!Sentinel)=} opt_value The initial value of the\n   *     field. Should be in '#rrggbb' format. Defaults to the first value in\n   *     the default colour array.\n   *     Also accepts Field.SKIP_SETUP if you wish to skip setup (only used by\n   *     subclasses that want to handle configuration and setting the field\n   *     value after their own constructors have run).\n   * @param {Function=} opt_validator A function that is called to validate\n   *     changes to the field's value. Takes in a colour string & returns a\n   *     validated colour string ('#rrggbb' format), or null to abort the\n   *     change.Blockly.\n   * @param {Object=} opt_config A map of options used to configure the field.\n   *     See the [field creation documentation]{@link\n   *     https://developers.google.com/blockly/guides/create-custom-blocks/fields/built-in-fields/colour}\n   *     for a list of properties this parameter supports.\n   */\n  constructor(opt_value, opt_validator, opt_config) {\n    super(Field.SKIP_SETUP);\n\n    /**\n     * The field's colour picker element.\n     * @type {?Element}\n     * @private\n     */\n    this.picker_ = null;\n\n    /**\n     * Index of the currently highlighted element.\n     * @type {?number}\n     * @private\n     */\n    this.highlightedIndex_ = null;\n\n    /**\n     * Mouse click event data.\n     * @type {?browserEvents.Data}\n     * @private\n     */\n    this.onClickWrapper_ = null;\n\n    /**\n     * Mouse move event data.\n     * @type {?browserEvents.Data}\n     * @private\n     */\n    this.onMouseMoveWrapper_ = null;\n\n    /**\n     * Mouse enter event data.\n     * @type {?browserEvents.Data}\n     * @private\n     */\n    this.onMouseEnterWrapper_ = null;\n\n    /**\n     * Mouse leave event data.\n     * @type {?browserEvents.Data}\n     * @private\n     */\n    this.onMouseLeaveWrapper_ = null;\n\n    /**\n     * Key down event data.\n     * @type {?browserEvents.Data}\n     * @private\n     */\n    this.onKeyDownWrapper_ = null;\n\n    /**\n     * Serializable fields are saved by the serializer, non-serializable fields\n     * are not. Editable fields should also be serializable.\n     * @type {boolean}\n     */\n    this.SERIALIZABLE = true;\n\n    /**\n     * Mouse cursor style when over the hotspot that initiates the editor.\n     * @type {string}\n     */\n    this.CURSOR = 'default';\n\n    /**\n     * Used to tell if the field needs to be rendered the next time the block is\n     * rendered. Colour fields are statically sized, and only need to be\n     * rendered at initialization.\n     * @type {boolean}\n     * @protected\n     */\n    this.isDirty_ = false;\n\n    /**\n     * Array of colours used by this field.  If null, use the global list.\n     * @type {Array<string>}\n     * @private\n     */\n    this.colours_ = null;\n\n    /**\n     * Array of colour tooltips used by this field.  If null, use the global\n     * list.\n     * @type {Array<string>}\n     * @private\n     */\n    this.titles_ = null;\n\n    /**\n     * Number of colour columns used by this field.  If 0, use the global\n     * setting. By default use the global constants for columns.\n     * @type {number}\n     * @private\n     */\n    this.columns_ = 0;\n\n    if (opt_value === Field.SKIP_SETUP) return;\n    if (opt_config) this.configure_(opt_config);\n    this.setValue(opt_value);\n    if (opt_validator) this.setValidator(opt_validator);\n  }\n\n  /**\n   * Configure the field based on the given map of options.\n   * @param {!Object} config A map of options to configure the field based on.\n   * @protected\n   * @override\n   */\n  configure_(config) {\n    super.configure_(config);\n    if (config['colourOptions']) {\n      this.colours_ = config['colourOptions'];\n      this.titles_ = config['colourTitles'];\n    }\n    if (config['columns']) {\n      this.columns_ = config['columns'];\n    }\n  }\n\n  /**\n   * Create the block UI for this colour field.\n   * @package\n   */\n  initView() {\n    this.size_ = new Size(\n        this.getConstants().FIELD_COLOUR_DEFAULT_WIDTH,\n        this.getConstants().FIELD_COLOUR_DEFAULT_HEIGHT);\n    if (!this.getConstants().FIELD_COLOUR_FULL_BLOCK) {\n      this.createBorderRect_();\n      this.borderRect_.style['fillOpacity'] = '1';\n    } else {\n      this.clickTarget_ = this.sourceBlock_.getSvgRoot();\n    }\n  }\n\n  /**\n   * @override\n   */\n  applyColour() {\n    if (!this.getConstants().FIELD_COLOUR_FULL_BLOCK) {\n      if (this.borderRect_) {\n        this.borderRect_.style.fill = /** @type {string} */ (this.getValue());\n      }\n    } else {\n      this.sourceBlock_.pathObject.svgPath.setAttribute(\n          'fill', this.getValue());\n      this.sourceBlock_.pathObject.svgPath.setAttribute('stroke', '#fff');\n    }\n  }\n\n  /**\n   * Ensure that the input value is a valid colour.\n   * @param {*=} opt_newValue The input value.\n   * @return {?string} A valid colour, or null if invalid.\n   * @protected\n   */\n  doClassValidation_(opt_newValue) {\n    if (typeof opt_newValue !== 'string') {\n      return null;\n    }\n    return colour.parse(opt_newValue);\n  }\n\n  /**\n   * Update the value of this colour field, and update the displayed colour.\n   * @param {*} newValue The value to be saved. The default validator guarantees\n   * that this is a colour in '#rrggbb' format.\n   * @protected\n   */\n  doValueUpdate_(newValue) {\n    this.value_ = newValue;\n    if (this.borderRect_) {\n      this.borderRect_.style.fill = /** @type {string} */ (newValue);\n    } else if (this.sourceBlock_ && this.sourceBlock_.rendered) {\n      this.sourceBlock_.pathObject.svgPath.setAttribute('fill', newValue);\n      this.sourceBlock_.pathObject.svgPath.setAttribute('stroke', '#fff');\n    }\n  }\n\n  /**\n   * Get the text for this field.  Used when the block is collapsed.\n   * @return {string} Text representing the value of this field.\n   */\n  getText() {\n    let colour = /** @type {string} */ (this.value_);\n    // Try to use #rgb format if possible, rather than #rrggbb.\n    if (/^#(.)\\1(.)\\2(.)\\3$/.test(colour)) {\n      colour = '#' + colour[1] + colour[3] + colour[5];\n    }\n    return colour;\n  }\n\n  /**\n   * Set a custom colour grid for this field.\n   * @param {Array<string>} colours Array of colours for this block,\n   *     or null to use default (FieldColour.COLOURS).\n   * @param {Array<string>=} opt_titles Optional array of colour tooltips,\n   *     or null to use default (FieldColour.TITLES).\n   * @return {!FieldColour} Returns itself (for method chaining).\n   */\n  setColours(colours, opt_titles) {\n    this.colours_ = colours;\n    if (opt_titles) {\n      this.titles_ = opt_titles;\n    }\n    return this;\n  }\n\n  /**\n   * Set a custom grid size for this field.\n   * @param {number} columns Number of columns for this block,\n   *     or 0 to use default (FieldColour.COLUMNS).\n   * @return {!FieldColour} Returns itself (for method chaining).\n   */\n  setColumns(columns) {\n    this.columns_ = columns;\n    return this;\n  }\n\n  /**\n   * Create and show the colour field's editor.\n   * @protected\n   */\n  showEditor_() {\n    this.dropdownCreate_();\n    dropDownDiv.getContentDiv().appendChild(this.picker_);\n\n    dropDownDiv.showPositionedByField(this, this.dropdownDispose_.bind(this));\n\n    // Focus so we can start receiving keyboard events.\n    this.picker_.focus({preventScroll: true});\n  }\n\n  /**\n   * Handle a click on a colour cell.\n   * @param {!MouseEvent} e Mouse event.\n   * @private\n   */\n  onClick_(e) {\n    const cell = /** @type {!Element} */ (e.target);\n    const colour = cell && cell.label;\n    if (colour !== null) {\n      this.setValue(colour);\n      dropDownDiv.hideIfOwner(this);\n    }\n  }\n\n  /**\n   * Handle a key down event. Navigate around the grid with the\n   * arrow keys. Enter selects the highlighted colour.\n   * @param {!KeyboardEvent} e Keyboard event.\n   * @private\n   */\n  onKeyDown_(e) {\n    let handled = false;\n    if (e.keyCode === KeyCodes.UP) {\n      this.moveHighlightBy_(0, -1);\n      handled = true;\n    } else if (e.keyCode === KeyCodes.DOWN) {\n      this.moveHighlightBy_(0, 1);\n      handled = true;\n    } else if (e.keyCode === KeyCodes.LEFT) {\n      this.moveHighlightBy_(-1, 0);\n      handled = true;\n    } else if (e.keyCode === KeyCodes.RIGHT) {\n      this.moveHighlightBy_(1, 0);\n      handled = true;\n    } else if (e.keyCode === KeyCodes.ENTER) {\n      // Select the highlighted colour.\n      const highlighted = this.getHighlighted_();\n      if (highlighted) {\n        const colour = highlighted && highlighted.label;\n        if (colour !== null) {\n          this.setValue(colour);\n        }\n      }\n      dropDownDiv.hideWithoutAnimation();\n      handled = true;\n    }\n    if (handled) {\n      e.stopPropagation();\n    }\n  }\n\n  /**\n   * Move the currently highlighted position by dx and dy.\n   * @param {number} dx Change of x\n   * @param {number} dy Change of y\n   * @private\n   */\n  moveHighlightBy_(dx, dy) {\n    const colours = this.colours_ || FieldColour.COLOURS;\n    const columns = this.columns_ || FieldColour.COLUMNS;\n\n    // Get the current x and y coordinates\n    let x = this.highlightedIndex_ % columns;\n    let y = Math.floor(this.highlightedIndex_ / columns);\n\n    // Add the offset\n    x += dx;\n    y += dy;\n\n    if (dx < 0) {\n      // Move left one grid cell, even in RTL.\n      // Loop back to the end of the previous row if we have room.\n      if (x < 0 && y > 0) {\n        x = columns - 1;\n        y--;\n      } else if (x < 0) {\n        x = 0;\n      }\n    } else if (dx > 0) {\n      // Move right one grid cell, even in RTL.\n      // Loop to the start of the next row, if there's room.\n      if (x > columns - 1 && y < Math.floor(colours.length / columns) - 1) {\n        x = 0;\n        y++;\n      } else if (x > columns - 1) {\n        x--;\n      }\n    } else if (dy < 0) {\n      // Move up one grid cell, stop at the top.\n      if (y < 0) {\n        y = 0;\n      }\n    } else if (dy > 0) {\n      // Move down one grid cell, stop at the bottom.\n      if (y > Math.floor(colours.length / columns) - 1) {\n        y = Math.floor(colours.length / columns) - 1;\n      }\n    }\n\n    // Move the highlight to the new coordinates.\n    const cell =\n        /** @type {!Element} */ (this.picker_.childNodes[y].childNodes[x]);\n    const index = (y * columns) + x;\n    this.setHighlightedCell_(cell, index);\n  }\n\n  /**\n   * Handle a mouse move event. Highlight the hovered colour.\n   * @param {!MouseEvent} e Mouse event.\n   * @private\n   */\n  onMouseMove_(e) {\n    const cell = /** @type {!Element} */ (e.target);\n    const index = cell && Number(cell.getAttribute('data-index'));\n    if (index !== null && index !== this.highlightedIndex_) {\n      this.setHighlightedCell_(cell, index);\n    }\n  }\n\n  /**\n   * Handle a mouse enter event. Focus the picker.\n   * @private\n   */\n  onMouseEnter_() {\n    this.picker_.focus({preventScroll: true});\n  }\n\n  /**\n   * Handle a mouse leave event. Blur the picker and unhighlight\n   * the currently highlighted colour.\n   * @private\n   */\n  onMouseLeave_() {\n    this.picker_.blur();\n    const highlighted = this.getHighlighted_();\n    if (highlighted) {\n      dom.removeClass(highlighted, 'blocklyColourHighlighted');\n    }\n  }\n\n  /**\n   * Returns the currently highlighted item (if any).\n   * @return {?HTMLElement} Highlighted item (null if none).\n   * @private\n   */\n  getHighlighted_() {\n    const columns = this.columns_ || FieldColour.COLUMNS;\n    const x = this.highlightedIndex_ % columns;\n    const y = Math.floor(this.highlightedIndex_ / columns);\n    const row = this.picker_.childNodes[y];\n    if (!row) {\n      return null;\n    }\n    const col = /** @type {HTMLElement} */ (row.childNodes[x]);\n    return col;\n  }\n\n  /**\n   * Update the currently highlighted cell.\n   * @param {!Element} cell the new cell to highlight\n   * @param {number} index the index of the new cell\n   * @private\n   */\n  setHighlightedCell_(cell, index) {\n    // Unhighlight the current item.\n    const highlighted = this.getHighlighted_();\n    if (highlighted) {\n      dom.removeClass(highlighted, 'blocklyColourHighlighted');\n    }\n    // Highlight new item.\n    dom.addClass(cell, 'blocklyColourHighlighted');\n    // Set new highlighted index.\n    this.highlightedIndex_ = index;\n\n    // Update accessibility roles.\n    aria.setState(\n        /** @type {!Element} */ (this.picker_), aria.State.ACTIVEDESCENDANT,\n        cell.getAttribute('id'));\n  }\n\n  /**\n   * Create a colour picker dropdown editor.\n   * @private\n   */\n  dropdownCreate_() {\n    const columns = this.columns_ || FieldColour.COLUMNS;\n    const colours = this.colours_ || FieldColour.COLOURS;\n    const titles = this.titles_ || FieldColour.TITLES;\n    const selectedColour = this.getValue();\n    // Create the palette.\n    const table = document.createElement('table');\n    table.className = 'blocklyColourTable';\n    table.tabIndex = 0;\n    table.dir = 'ltr';\n    aria.setRole(table, aria.Role.GRID);\n    aria.setState(table, aria.State.EXPANDED, true);\n    aria.setState(\n        table, aria.State.ROWCOUNT, Math.floor(colours.length / columns));\n    aria.setState(table, aria.State.COLCOUNT, columns);\n    let row;\n    for (let i = 0; i < colours.length; i++) {\n      if (i % columns === 0) {\n        row = document.createElement('tr');\n        aria.setRole(row, aria.Role.ROW);\n        table.appendChild(row);\n      }\n      const cell = document.createElement('td');\n      row.appendChild(cell);\n      cell.label = colours[i];  // This becomes the value, if clicked.\n      cell.title = titles[i] || colours[i];\n      cell.id = idGenerator.getNextUniqueId();\n      cell.setAttribute('data-index', i);\n      aria.setRole(cell, aria.Role.GRIDCELL);\n      aria.setState(cell, aria.State.LABEL, colours[i]);\n      aria.setState(cell, aria.State.SELECTED, colours[i] === selectedColour);\n      cell.style.backgroundColor = colours[i];\n      if (colours[i] === selectedColour) {\n        cell.className = 'blocklyColourSelected';\n        this.highlightedIndex_ = i;\n      }\n    }\n\n    // Configure event handler on the table to listen for any event in a cell.\n    this.onClickWrapper_ = browserEvents.conditionalBind(\n        table, 'click', this, this.onClick_, true);\n    this.onMouseMoveWrapper_ = browserEvents.conditionalBind(\n        table, 'mousemove', this, this.onMouseMove_, true);\n    this.onMouseEnterWrapper_ = browserEvents.conditionalBind(\n        table, 'mouseenter', this, this.onMouseEnter_, true);\n    this.onMouseLeaveWrapper_ = browserEvents.conditionalBind(\n        table, 'mouseleave', this, this.onMouseLeave_, true);\n    this.onKeyDownWrapper_ =\n        browserEvents.conditionalBind(table, 'keydown', this, this.onKeyDown_);\n\n    this.picker_ = table;\n  }\n\n  /**\n   * Disposes of events and DOM-references belonging to the colour editor.\n   * @private\n   */\n  dropdownDispose_() {\n    if (this.onClickWrapper_) {\n      browserEvents.unbind(this.onClickWrapper_);\n      this.onClickWrapper_ = null;\n    }\n    if (this.onMouseMoveWrapper_) {\n      browserEvents.unbind(this.onMouseMoveWrapper_);\n      this.onMouseMoveWrapper_ = null;\n    }\n    if (this.onMouseEnterWrapper_) {\n      browserEvents.unbind(this.onMouseEnterWrapper_);\n      this.onMouseEnterWrapper_ = null;\n    }\n    if (this.onMouseLeaveWrapper_) {\n      browserEvents.unbind(this.onMouseLeaveWrapper_);\n      this.onMouseLeaveWrapper_ = null;\n    }\n    if (this.onKeyDownWrapper_) {\n      browserEvents.unbind(this.onKeyDownWrapper_);\n      this.onKeyDownWrapper_ = null;\n    }\n    this.picker_ = null;\n    this.highlightedIndex_ = null;\n  }\n\n  /**\n   * Construct a FieldColour from a JSON arg object.\n   * @param {!Object} options A JSON object with options (colour).\n   * @return {!FieldColour} The new field instance.\n   * @package\n   * @nocollapse\n   */\n  static fromJson(options) {\n    // `this` might be a subclass of FieldColour if that class doesn't override\n    // the static fromJson method.\n    return new this(options['colour'], undefined, options);\n  }\n}\n\n/**\n * An array of colour strings for the palette.\n * Copied from goog.ui.ColorPicker.SIMPLE_GRID_COLORS\n * All colour pickers use this unless overridden with setColours.\n * @type {!Array<string>}\n */\nFieldColour.COLOURS = [\n  // grays\n  '#ffffff',\n  '#cccccc',\n  '#c0c0c0',\n  '#999999',\n  '#666666',\n  '#333333',\n  '#000000',\n  // reds\n  '#ffcccc',\n  '#ff6666',\n  '#ff0000',\n  '#cc0000',\n  '#990000',\n  '#660000',\n  '#330000',\n  // oranges\n  '#ffcc99',\n  '#ff9966',\n  '#ff9900',\n  '#ff6600',\n  '#cc6600',\n  '#993300',\n  '#663300',\n  // yellows\n  '#ffff99',\n  '#ffff66',\n  '#ffcc66',\n  '#ffcc33',\n  '#cc9933',\n  '#996633',\n  '#663333',\n  // olives\n  '#ffffcc',\n  '#ffff33',\n  '#ffff00',\n  '#ffcc00',\n  '#999900',\n  '#666600',\n  '#333300',\n  // greens\n  '#99ff99',\n  '#66ff99',\n  '#33ff33',\n  '#33cc00',\n  '#009900',\n  '#006600',\n  '#003300',\n  // turquoises\n  '#99ffff',\n  '#33ffff',\n  '#66cccc',\n  '#00cccc',\n  '#339999',\n  '#336666',\n  '#003333',\n  // blues\n  '#ccffff',\n  '#66ffff',\n  '#33ccff',\n  '#3366ff',\n  '#3333ff',\n  '#000099',\n  '#000066',\n  // purples\n  '#ccccff',\n  '#9999ff',\n  '#6666cc',\n  '#6633ff',\n  '#6600cc',\n  '#333399',\n  '#330099',\n  // violets\n  '#ffccff',\n  '#ff99ff',\n  '#cc66cc',\n  '#cc33cc',\n  '#993399',\n  '#663366',\n  '#330033',\n];\n\n/**\n * The default value for this field.\n * @type {*}\n * @protected\n */\nFieldColour.prototype.DEFAULT_VALUE = FieldColour.COLOURS[0];\n\n/**\n * An array of tooltip strings for the palette.  If not the same length as\n * COLOURS, the colour's hex code will be used for any missing titles.\n * All colour pickers use this unless overridden with setColours.\n * @type {!Array<string>}\n */\nFieldColour.TITLES = [];\n\n/**\n * Number of columns in the palette.\n * All colour pickers use this unless overridden with setColumns.\n */\nFieldColour.COLUMNS = 7;\n\n/**\n * CSS for colour picker.  See css.js for use.\n */\nCss.register(`\n.blocklyColourTable {\n  border-collapse: collapse;\n  display: block;\n  outline: none;\n  padding: 1px;\n}\n\n.blocklyColourTable>tr>td {\n  border: .5px solid #888;\n  box-sizing: border-box;\n  cursor: pointer;\n  display: inline-block;\n  height: 20px;\n  padding: 0;\n  width: 20px;\n}\n\n.blocklyColourTable>tr>td.blocklyColourHighlighted {\n  border-color: #eee;\n  box-shadow: 2px 2px 7px 2px rgba(0,0,0,.3);\n  position: relative;\n}\n\n.blocklyColourSelected, .blocklyColourSelected:hover {\n  border-color: #eee !important;\n  outline: 1px solid #333;\n  position: relative;\n}\n`);\n\nfieldRegistry.register('field_colour', FieldColour);\n\nexports.FieldColour = FieldColour;\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Checkbox field.  Checked or not checked.\n */\n'use strict';\n\n/**\n * Checkbox field.  Checked or not checked.\n * @class\n */\ngoog.module('Blockly.FieldCheckbox');\n\nconst dom = goog.require('Blockly.utils.dom');\nconst fieldRegistry = goog.require('Blockly.fieldRegistry');\nconst {Field} = goog.require('Blockly.Field');\n/* eslint-disable-next-line no-unused-vars */\nconst {Sentinel} = goog.requireType('Blockly.utils.Sentinel');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.Events.BlockChange');\n\n\n/**\n * Class for a checkbox field.\n * @extends {Field}\n * @alias Blockly.FieldCheckbox\n */\nclass FieldCheckbox extends Field {\n  /**\n   * @param {(string|boolean|!Sentinel)=} opt_value The initial value of\n   *     the field. Should either be 'TRUE', 'FALSE' or a boolean. Defaults to\n   *     'FALSE'.\n   *     Also accepts Field.SKIP_SETUP if you wish to skip setup (only used by\n   *     subclasses that want to handle configuration and setting the field\n   *     value after their own constructors have run).\n   * @param {Function=} opt_validator  A function that is called to validate\n   *     changes to the field's value. Takes in a value ('TRUE' or 'FALSE') &\n   *     returns a validated value ('TRUE' or 'FALSE'), or null to abort the\n   *     change.\n   * @param {Object=} opt_config A map of options used to configure the field.\n   *     See the [field creation documentation]{@link\n   *     https://developers.google.com/blockly/guides/create-custom-blocks/fields/built-in-fields/checkbox#creation}\n   *     for a list of properties this parameter supports.\n   */\n  constructor(opt_value, opt_validator, opt_config) {\n    super(Field.SKIP_SETUP);\n\n    /**\n     * Character for the check mark. Used to apply a different check mark\n     * character to individual fields.\n     * @type {string}\n     * @private\n     */\n    this.checkChar_ = FieldCheckbox.CHECK_CHAR;\n\n    /**\n     * Serializable fields are saved by the serializer, non-serializable fields\n     * are not. Editable fields should also be serializable.\n     * @type {boolean}\n     */\n    this.SERIALIZABLE = true;\n\n    /**\n     * Mouse cursor style when over the hotspot that initiates editability.\n     * @type {string}\n     */\n    this.CURSOR = 'default';\n\n    if (opt_value === Field.SKIP_SETUP) return;\n    if (opt_config) this.configure_(opt_config);\n    this.setValue(opt_value);\n    if (opt_validator) this.setValidator(opt_validator);\n  }\n\n  /**\n   * Configure the field based on the given map of options.\n   * @param {!Object} config A map of options to configure the field based on.\n   * @protected\n   * @override\n   */\n  configure_(config) {\n    super.configure_(config);\n    if (config['checkCharacter']) {\n      this.checkChar_ = config['checkCharacter'];\n    }\n  }\n\n  /**\n   * Saves this field's value.\n   * @return {*} The boolean value held by this field.\n   * @override\n   * @package\n   */\n  saveState() {\n    const legacyState = this.saveLegacyState(FieldCheckbox);\n    if (legacyState !== null) {\n      return legacyState;\n    }\n    return this.getValueBoolean();\n  }\n\n  /**\n   * Create the block UI for this checkbox.\n   * @package\n   */\n  initView() {\n    super.initView();\n\n    dom.addClass(\n        /** @type {!SVGTextElement} **/ (this.textElement_), 'blocklyCheckbox');\n    this.textElement_.style.display = this.value_ ? 'block' : 'none';\n  }\n\n  /**\n   * @override\n   */\n  render_() {\n    if (this.textContent_) {\n      this.textContent_.nodeValue = this.getDisplayText_();\n    }\n    this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET);\n  }\n\n  /**\n   * @override\n   */\n  getDisplayText_() {\n    return this.checkChar_;\n  }\n\n  /**\n   * Set the character used for the check mark.\n   * @param {?string} character The character to use for the check mark, or\n   *    null to use the default.\n   */\n  setCheckCharacter(character) {\n    this.checkChar_ = character || FieldCheckbox.CHECK_CHAR;\n    this.forceRerender();\n  }\n\n  /**\n   * Toggle the state of the checkbox on click.\n   * @protected\n   */\n  showEditor_() {\n    this.setValue(!this.value_);\n  }\n\n  /**\n   * Ensure that the input value is valid ('TRUE' or 'FALSE').\n   * @param {*=} opt_newValue The input value.\n   * @return {?string} A valid value ('TRUE' or 'FALSE), or null if invalid.\n   * @protected\n   */\n  doClassValidation_(opt_newValue) {\n    if (opt_newValue === true || opt_newValue === 'TRUE') {\n      return 'TRUE';\n    }\n    if (opt_newValue === false || opt_newValue === 'FALSE') {\n      return 'FALSE';\n    }\n    return null;\n  }\n\n  /**\n   * Update the value of the field, and update the checkElement.\n   * @param {*} newValue The value to be saved. The default validator guarantees\n   * that this is a either 'TRUE' or 'FALSE'.\n   * @protected\n   */\n  doValueUpdate_(newValue) {\n    this.value_ = this.convertValueToBool_(newValue);\n    // Update visual.\n    if (this.textElement_) {\n      this.textElement_.style.display = this.value_ ? 'block' : 'none';\n    }\n  }\n\n  /**\n   * Get the value of this field, either 'TRUE' or 'FALSE'.\n   * @return {string} The value of this field.\n   */\n  getValue() {\n    return this.value_ ? 'TRUE' : 'FALSE';\n  }\n\n  /**\n   * Get the boolean value of this field.\n   * @return {boolean} The boolean value of this field.\n   */\n  getValueBoolean() {\n    return /** @type {boolean} */ (this.value_);\n  }\n\n  /**\n   * Get the text of this field. Used when the block is collapsed.\n   * @return {string} Text representing the value of this field\n   *    ('true' or 'false').\n   */\n  getText() {\n    return String(this.convertValueToBool_(this.value_));\n  }\n\n  /**\n   * Convert a value into a pure boolean.\n   *\n   * Converts 'TRUE' to true and 'FALSE' to false correctly, everything else\n   * is cast to a boolean.\n   * @param {*} value The value to convert.\n   * @return {boolean} The converted value.\n   * @private\n   */\n  convertValueToBool_(value) {\n    if (typeof value === 'string') {\n      return value === 'TRUE';\n    } else {\n      return !!value;\n    }\n  }\n\n  /**\n   * Construct a FieldCheckbox from a JSON arg object.\n   * @param {!Object} options A JSON object with options (checked).\n   * @return {!FieldCheckbox} The new field instance.\n   * @package\n   * @nocollapse\n   */\n  static fromJson(options) {\n    // `this` might be a subclass of FieldCheckbox if that class doesn't\n    // 'override' the static fromJson method.\n    return new this(options['checked'], undefined, options);\n  }\n}\n\n/**\n * The default value for this field.\n * @type {*}\n * @protected\n */\nFieldCheckbox.prototype.DEFAULT_VALUE = false;\n\n/**\n * Default character for the checkmark.\n * @type {string}\n * @const\n */\nFieldCheckbox.CHECK_CHAR = '\\u2713';\n\nfieldRegistry.register('field_checkbox', FieldCheckbox);\n\nexports.FieldCheckbox = FieldCheckbox;\n","/**\n * @license\n * Copyright 2013 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Angle input field.\n */\n'use strict';\n\n/**\n * Angle input field.\n * @class\n */\ngoog.module('Blockly.FieldAngle');\n\nconst Css = goog.require('Blockly.Css');\nconst WidgetDiv = goog.require('Blockly.WidgetDiv');\nconst browserEvents = goog.require('Blockly.browserEvents');\nconst dom = goog.require('Blockly.utils.dom');\nconst dropDownDiv = goog.require('Blockly.dropDownDiv');\nconst fieldRegistry = goog.require('Blockly.fieldRegistry');\nconst math = goog.require('Blockly.utils.math');\nconst userAgent = goog.require('Blockly.utils.userAgent');\nconst {Field} = goog.require('Blockly.Field');\nconst {FieldTextInput} = goog.require('Blockly.FieldTextInput');\nconst {KeyCodes} = goog.require('Blockly.utils.KeyCodes');\n/* eslint-disable-next-line no-unused-vars */\nconst {Sentinel} = goog.requireType('Blockly.utils.Sentinel');\nconst {Svg} = goog.require('Blockly.utils.Svg');\n\n\n/**\n * Class for an editable angle field.\n * @extends {FieldTextInput}\n * @alias Blockly.FieldAngle\n */\nclass FieldAngle extends FieldTextInput {\n  /**\n   * @param {(string|number|!Sentinel)=} opt_value The initial value of\n   *     the field. Should cast to a number. Defaults to 0.\n   *     Also accepts Field.SKIP_SETUP if you wish to skip setup (only used by\n   *     subclasses that want to handle configuration and setting the field\n   *     value after their own constructors have run).\n   * @param {Function=} opt_validator A function that is called to validate\n   *     changes to the field's value. Takes in a number & returns a\n   *     validated number, or null to abort the change.\n   * @param {Object=} opt_config A map of options used to configure the field.\n   *     See the [field creation documentation]{@link\n   *     https://developers.google.com/blockly/guides/create-custom-blocks/fields/built-in-fields/angle#creation}\n   *     for a list of properties this parameter supports.\n   */\n  constructor(opt_value, opt_validator, opt_config) {\n    super(Field.SKIP_SETUP);\n\n    /**\n     * Should the angle increase as the angle picker is moved clockwise (true)\n     * or counterclockwise (false)\n     * @see FieldAngle.CLOCKWISE\n     * @type {boolean}\n     * @private\n     */\n    this.clockwise_ = FieldAngle.CLOCKWISE;\n\n    /**\n     * The offset of zero degrees (and all other angles).\n     * @see FieldAngle.OFFSET\n     * @type {number}\n     * @private\n     */\n    this.offset_ = FieldAngle.OFFSET;\n\n    /**\n     * The maximum angle to allow before wrapping.\n     * @see FieldAngle.WRAP\n     * @type {number}\n     * @private\n     */\n    this.wrap_ = FieldAngle.WRAP;\n\n    /**\n     * The amount to round angles to when using a mouse or keyboard nav input.\n     * @see FieldAngle.ROUND\n     * @type {number}\n     * @private\n     */\n    this.round_ = FieldAngle.ROUND;\n\n    /**\n     * The angle picker's SVG element.\n     * @type {?SVGElement}\n     * @private\n     */\n    this.editor_ = null;\n\n    /**\n     * The angle picker's gauge path depending on the value.\n     * @type {?SVGElement}\n     */\n    this.gauge_ = null;\n\n    /**\n     * The angle picker's line drawn representing the value's angle.\n     * @type {?SVGElement}\n     */\n    this.line_ = null;\n\n    /**\n     * The degree symbol for this field.\n     * @type {SVGTSpanElement}\n     * @protected\n     */\n    this.symbol_ = null;\n\n    /**\n     * Wrapper click event data.\n     * @type {?browserEvents.Data}\n     * @private\n     */\n    this.clickWrapper_ = null;\n\n    /**\n     * Surface click event data.\n     * @type {?browserEvents.Data}\n     * @private\n     */\n    this.clickSurfaceWrapper_ = null;\n\n    /**\n     * Surface mouse move event data.\n     * @type {?browserEvents.Data}\n     * @private\n     */\n    this.moveSurfaceWrapper_ = null;\n\n    /**\n     * Serializable fields are saved by the serializer, non-serializable fields\n     * are not. Editable fields should also be serializable.\n     * @type {boolean}\n     */\n    this.SERIALIZABLE = true;\n\n    if (opt_value === Field.SKIP_SETUP) return;\n    if (opt_config) this.configure_(opt_config);\n    this.setValue(opt_value);\n    if (opt_validator) this.setValidator(opt_validator);\n  }\n\n  /**\n   * Configure the field based on the given map of options.\n   * @param {!Object} config A map of options to configure the field based on.\n   * @protected\n   * @override\n   */\n  configure_(config) {\n    super.configure_(config);\n\n    switch (config['mode']) {\n      case 'compass':\n        this.clockwise_ = true;\n        this.offset_ = 90;\n        break;\n      case 'protractor':\n        // This is the default mode, so we could do nothing. But just to\n        // future-proof, we'll set it anyway.\n        this.clockwise_ = false;\n        this.offset_ = 0;\n        break;\n    }\n\n    // Allow individual settings to override the mode setting.\n    const clockwise = config['clockwise'];\n    if (typeof clockwise === 'boolean') {\n      this.clockwise_ = clockwise;\n    }\n\n    // If these are passed as null then we should leave them on the default.\n    let offset = config['offset'];\n    if (offset !== null) {\n      offset = Number(offset);\n      if (!isNaN(offset)) {\n        this.offset_ = offset;\n      }\n    }\n    let wrap = config['wrap'];\n    if (wrap !== null) {\n      wrap = Number(wrap);\n      if (!isNaN(wrap)) {\n        this.wrap_ = wrap;\n      }\n    }\n    let round = config['round'];\n    if (round !== null) {\n      round = Number(round);\n      if (!isNaN(round)) {\n        this.round_ = round;\n      }\n    }\n  }\n\n  /**\n   * Create the block UI for this field.\n   * @package\n   */\n  initView() {\n    super.initView();\n    // Add the degree symbol to the left of the number, even in RTL (issue\n    // #2380)\n    this.symbol_ = dom.createSvgElement(Svg.TSPAN, {}, null);\n    this.symbol_.appendChild(document.createTextNode('\\u00B0'));\n    this.textElement_.appendChild(this.symbol_);\n  }\n\n  /**\n   * Updates the graph when the field rerenders.\n   * @protected\n   * @override\n   */\n  render_() {\n    super.render_();\n    this.updateGraph_();\n  }\n\n  /**\n   * Create and show the angle field's editor.\n   * @param {Event=} opt_e Optional mouse event that triggered the field to\n   *     open, or undefined if triggered programmatically.\n   * @protected\n   */\n  showEditor_(opt_e) {\n    // Mobile browsers have issues with in-line textareas (focus & keyboards).\n    const noFocus = userAgent.MOBILE || userAgent.ANDROID || userAgent.IPAD;\n    super.showEditor_(opt_e, noFocus);\n\n    this.dropdownCreate_();\n    dropDownDiv.getContentDiv().appendChild(this.editor_);\n\n    dropDownDiv.setColour(\n        this.sourceBlock_.style.colourPrimary,\n        this.sourceBlock_.style.colourTertiary);\n\n    dropDownDiv.showPositionedByField(this, this.dropdownDispose_.bind(this));\n\n    this.updateGraph_();\n  }\n\n  /**\n   * Create the angle dropdown editor.\n   * @private\n   */\n  dropdownCreate_() {\n    const svg = dom.createSvgElement(\n        Svg.SVG, {\n          'xmlns': dom.SVG_NS,\n          'xmlns:html': dom.HTML_NS,\n          'xmlns:xlink': dom.XLINK_NS,\n          'version': '1.1',\n          'height': (FieldAngle.HALF * 2) + 'px',\n          'width': (FieldAngle.HALF * 2) + 'px',\n          'style': 'touch-action: none',\n        },\n        null);\n    const circle = dom.createSvgElement(\n        Svg.CIRCLE, {\n          'cx': FieldAngle.HALF,\n          'cy': FieldAngle.HALF,\n          'r': FieldAngle.RADIUS,\n          'class': 'blocklyAngleCircle',\n        },\n        svg);\n    this.gauge_ =\n        dom.createSvgElement(Svg.PATH, {'class': 'blocklyAngleGauge'}, svg);\n    this.line_ = dom.createSvgElement(\n        Svg.LINE, {\n          'x1': FieldAngle.HALF,\n          'y1': FieldAngle.HALF,\n          'class': 'blocklyAngleLine',\n        },\n        svg);\n    // Draw markers around the edge.\n    for (let angle = 0; angle < 360; angle += 15) {\n      dom.createSvgElement(\n          Svg.LINE, {\n            'x1': FieldAngle.HALF + FieldAngle.RADIUS,\n            'y1': FieldAngle.HALF,\n            'x2': FieldAngle.HALF + FieldAngle.RADIUS -\n                (angle % 45 === 0 ? 10 : 5),\n            'y2': FieldAngle.HALF,\n            'class': 'blocklyAngleMarks',\n            'transform': 'rotate(' + angle + ',' + FieldAngle.HALF + ',' +\n                FieldAngle.HALF + ')',\n          },\n          svg);\n    }\n\n    // The angle picker is different from other fields in that it updates on\n    // mousemove even if it's not in the middle of a drag.  In future we may\n    // change this behaviour.\n    this.clickWrapper_ =\n        browserEvents.conditionalBind(svg, 'click', this, this.hide_);\n    // On touch devices, the picker's value is only updated with a drag. Add\n    // a click handler on the drag surface to update the value if the surface\n    // is clicked.\n    this.clickSurfaceWrapper_ = browserEvents.conditionalBind(\n        circle, 'click', this, this.onMouseMove_, true, true);\n    this.moveSurfaceWrapper_ = browserEvents.conditionalBind(\n        circle, 'mousemove', this, this.onMouseMove_, true, true);\n    this.editor_ = svg;\n  }\n\n  /**\n   * Disposes of events and DOM-references belonging to the angle editor.\n   * @private\n   */\n  dropdownDispose_() {\n    if (this.clickWrapper_) {\n      browserEvents.unbind(this.clickWrapper_);\n      this.clickWrapper_ = null;\n    }\n    if (this.clickSurfaceWrapper_) {\n      browserEvents.unbind(this.clickSurfaceWrapper_);\n      this.clickSurfaceWrapper_ = null;\n    }\n    if (this.moveSurfaceWrapper_) {\n      browserEvents.unbind(this.moveSurfaceWrapper_);\n      this.moveSurfaceWrapper_ = null;\n    }\n    this.gauge_ = null;\n    this.line_ = null;\n  }\n\n  /**\n   * Hide the editor.\n   * @private\n   */\n  hide_() {\n    dropDownDiv.hideIfOwner(this);\n    WidgetDiv.hide();\n  }\n\n  /**\n   * Set the angle to match the mouse's position.\n   * @param {!Event} e Mouse move event.\n   * @protected\n   */\n  onMouseMove_(e) {\n    // Calculate angle.\n    const bBox = this.gauge_.ownerSVGElement.getBoundingClientRect();\n    const dx = e.clientX - bBox.left - FieldAngle.HALF;\n    const dy = e.clientY - bBox.top - FieldAngle.HALF;\n    let angle = Math.atan(-dy / dx);\n    if (isNaN(angle)) {\n      // This shouldn't happen, but let's not let this error propagate further.\n      return;\n    }\n    angle = math.toDegrees(angle);\n    // 0: East, 90: North, 180: West, 270: South.\n    if (dx < 0) {\n      angle += 180;\n    } else if (dy > 0) {\n      angle += 360;\n    }\n\n    // Do offsetting.\n    if (this.clockwise_) {\n      angle = this.offset_ + 360 - angle;\n    } else {\n      angle = 360 - (this.offset_ - angle);\n    }\n\n    this.displayMouseOrKeyboardValue_(angle);\n  }\n\n  /**\n   * Handles and displays values that are input via mouse or arrow key input.\n   * These values need to be rounded and wrapped before being displayed so\n   * that the text input's value is appropriate.\n   * @param {number} angle New angle.\n   * @private\n   */\n  displayMouseOrKeyboardValue_(angle) {\n    if (this.round_) {\n      angle = Math.round(angle / this.round_) * this.round_;\n    }\n    angle = this.wrapValue_(angle);\n    if (angle !== this.value_) {\n      this.setEditorValue_(angle);\n    }\n  }\n\n  /**\n   * Redraw the graph with the current angle.\n   * @private\n   */\n  updateGraph_() {\n    if (!this.gauge_) {\n      return;\n    }\n    // Always display the input (i.e. getText) even if it is invalid.\n    let angleDegrees = Number(this.getText()) + this.offset_;\n    angleDegrees %= 360;\n    let angleRadians = math.toRadians(angleDegrees);\n    const path = ['M ', FieldAngle.HALF, ',', FieldAngle.HALF];\n    let x2 = FieldAngle.HALF;\n    let y2 = FieldAngle.HALF;\n    if (!isNaN(angleRadians)) {\n      const clockwiseFlag = Number(this.clockwise_);\n      const angle1 = math.toRadians(this.offset_);\n      const x1 = Math.cos(angle1) * FieldAngle.RADIUS;\n      const y1 = Math.sin(angle1) * -FieldAngle.RADIUS;\n      if (clockwiseFlag) {\n        angleRadians = 2 * angle1 - angleRadians;\n      }\n      x2 += Math.cos(angleRadians) * FieldAngle.RADIUS;\n      y2 -= Math.sin(angleRadians) * FieldAngle.RADIUS;\n      // Don't ask how the flag calculations work.  They just do.\n      let largeFlag =\n          Math.abs(Math.floor((angleRadians - angle1) / Math.PI) % 2);\n      if (clockwiseFlag) {\n        largeFlag = 1 - largeFlag;\n      }\n      path.push(\n          ' l ', x1, ',', y1, ' A ', FieldAngle.RADIUS, ',', FieldAngle.RADIUS,\n          ' 0 ', largeFlag, ' ', clockwiseFlag, ' ', x2, ',', y2, ' z');\n    }\n    this.gauge_.setAttribute('d', path.join(''));\n    this.line_.setAttribute('x2', x2);\n    this.line_.setAttribute('y2', y2);\n  }\n\n  /**\n   * Handle key down to the editor.\n   * @param {!Event} e Keyboard event.\n   * @protected\n   * @override\n   */\n  onHtmlInputKeyDown_(e) {\n    super.onHtmlInputKeyDown_(e);\n\n    let multiplier;\n    if (e.keyCode === KeyCodes.LEFT) {\n      // decrement (increment in RTL)\n      multiplier = this.sourceBlock_.RTL ? 1 : -1;\n    } else if (e.keyCode === KeyCodes.RIGHT) {\n      // increment (decrement in RTL)\n      multiplier = this.sourceBlock_.RTL ? -1 : 1;\n    } else if (e.keyCode === KeyCodes.DOWN) {\n      // decrement\n      multiplier = -1;\n    } else if (e.keyCode === KeyCodes.UP) {\n      // increment\n      multiplier = 1;\n    }\n    if (multiplier) {\n      const value = /** @type {number} */ (this.getValue());\n      this.displayMouseOrKeyboardValue_(value + (multiplier * this.round_));\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  }\n\n  /**\n   * Ensure that the input value is a valid angle.\n   * @param {*=} opt_newValue The input value.\n   * @return {?number} A valid angle, or null if invalid.\n   * @protected\n   * @override\n   */\n  doClassValidation_(opt_newValue) {\n    const value = Number(opt_newValue);\n    if (isNaN(value) || !isFinite(value)) {\n      return null;\n    }\n    return this.wrapValue_(value);\n  }\n\n  /**\n   * Wraps the value so that it is in the range (-360 + wrap, wrap).\n   * @param {number} value The value to wrap.\n   * @return {number} The wrapped value.\n   * @private\n   */\n  wrapValue_(value) {\n    value %= 360;\n    if (value < 0) {\n      value += 360;\n    }\n    if (value > this.wrap_) {\n      value -= 360;\n    }\n    return value;\n  }\n\n  /**\n   * Construct a FieldAngle from a JSON arg object.\n   * @param {!Object} options A JSON object with options (angle).\n   * @return {!FieldAngle} The new field instance.\n   * @package\n   * @nocollapse\n   * @override\n   */\n  static fromJson(options) {\n    // `this` might be a subclass of FieldAngle if that class doesn't override\n    // the static fromJson method.\n    return new this(options['angle'], undefined, options);\n  }\n}\n\n/**\n * The default value for this field.\n * @type {*}\n * @protected\n */\nFieldAngle.prototype.DEFAULT_VALUE = 0;\n\n/**\n * The default amount to round angles to when using a mouse or keyboard nav\n * input. Must be a positive integer to support keyboard navigation.\n * @const {number}\n */\nFieldAngle.ROUND = 15;\n\n/**\n * Half the width of protractor image.\n * @const {number}\n */\nFieldAngle.HALF = 100 / 2;\n\n/**\n * Default property describing which direction makes an angle field's value\n * increase. Angle increases clockwise (true) or counterclockwise (false).\n * @const {boolean}\n */\nFieldAngle.CLOCKWISE = false;\n\n/**\n * The default offset of 0 degrees (and all angles). Always offsets in the\n * counterclockwise direction, regardless of the field's clockwise property.\n * Usually either 0 (0 = right) or 90 (0 = up).\n * @const {number}\n */\nFieldAngle.OFFSET = 0;\n\n/**\n * The default maximum angle to allow before wrapping.\n * Usually either 360 (for 0 to 359.9) or 180 (for -179.9 to 180).\n * @const {number}\n */\nFieldAngle.WRAP = 360;\n\n/**\n * Radius of protractor circle.  Slightly smaller than protractor size since\n * otherwise SVG crops off half the border at the edges.\n * @const {number}\n */\nFieldAngle.RADIUS = FieldAngle.HALF - 1;\n\n/**\n * CSS for angle field.  See css.js for use.\n */\nCss.register(`\n.blocklyAngleCircle {\n  stroke: #444;\n  stroke-width: 1;\n  fill: #ddd;\n  fill-opacity: .8;\n}\n\n.blocklyAngleMarks {\n  stroke: #444;\n  stroke-width: 1;\n}\n\n.blocklyAngleGauge {\n  fill: #f88;\n  fill-opacity: .8;\n  pointer-events: none;\n}\n\n.blocklyAngleLine {\n  stroke: #f00;\n  stroke-width: 2;\n  stroke-linecap: round;\n  pointer-events: none;\n}\n`);\n\nfieldRegistry.register('field_angle', FieldAngle);\n\nexports.FieldAngle = FieldAngle;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview An object representing the bottom row of a rendered block.\n */\n'use strict';\n\n/**\n * An object representing the bottom row of a rendered block.\n * @class\n */\ngoog.module('Blockly.zelos.BottomRow');\n\nconst {BottomRow: BaseBottomRow} = goog.require('Blockly.blockRendering.BottomRow');\n/* eslint-disable-next-line no-unused-vars */\nconst {ConstantProvider} = goog.requireType('Blockly.blockRendering.ConstantProvider');\n\n\n/**\n * An object containing information about what elements are in the bottom row of\n * a block as well as spacing information for the top row.\n * Elements in a bottom row can consist of corners, spacers and next\n * connections.\n * @extends {BaseBottomRow}\n * @alias Blockly.zelos.BottomRow\n */\nclass BottomRow extends BaseBottomRow {\n  /**\n   * @param {!ConstantProvider} constants The rendering\n   *   constants provider.\n   * @package\n   */\n  constructor(constants) {\n    super(constants);\n  }\n\n  /**\n   * @override\n   */\n  endsWithElemSpacer() {\n    return false;\n  }\n\n  /**\n   * Render a round corner unless the block has an output connection.\n   * @override\n   */\n  hasLeftSquareCorner(block) {\n    return !!block.outputConnection;\n  }\n\n  /**\n   * Render a round corner unless the block has an output connection.\n   * @override\n   */\n  hasRightSquareCorner(block) {\n    return !!block.outputConnection && !block.statementInputCount &&\n        !block.nextConnection;\n  }\n}\n\nexports.BottomRow = BottomRow;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview An object that provides constants for rendering blocks in Zelos\n * mode.\n */\n'use strict';\n\n/**\n * An object that provides constants for rendering blocks in Zelos\n * mode.\n * @class\n */\ngoog.module('Blockly.zelos.ConstantProvider');\n\nconst dom = goog.require('Blockly.utils.dom');\nconst svgPaths = goog.require('Blockly.utils.svgPaths');\nconst utilsColour = goog.require('Blockly.utils.colour');\nconst {ConnectionType} = goog.require('Blockly.ConnectionType');\nconst {ConstantProvider: BaseConstantProvider} = goog.require('Blockly.blockRendering.ConstantProvider');\nconst {Svg} = goog.require('Blockly.utils.Svg');\n\n\n/**\n * An object that provides constants for rendering blocks in Zelos mode.\n * @extends {BaseConstantProvider}\n * @alias Blockly.zelos.ConstantProvider\n */\nclass ConstantProvider extends BaseConstantProvider {\n  /**\n   * @package\n   */\n  constructor() {\n    super();\n\n    this.GRID_UNIT = 4;\n\n    /**\n     * @override\n     */\n    this.SMALL_PADDING = this.GRID_UNIT;\n\n    /**\n     * @override\n     */\n    this.MEDIUM_PADDING = 2 * this.GRID_UNIT;\n\n    /**\n     * @override\n     */\n    this.MEDIUM_LARGE_PADDING = 3 * this.GRID_UNIT;\n\n    /**\n     * @override\n     */\n    this.LARGE_PADDING = 4 * this.GRID_UNIT;\n\n    /**\n     * @override\n     */\n    this.CORNER_RADIUS = 1 * this.GRID_UNIT;\n\n    /**\n     * @override\n     */\n    this.NOTCH_WIDTH = 9 * this.GRID_UNIT;\n\n    /**\n     * @override\n     */\n    this.NOTCH_HEIGHT = 2 * this.GRID_UNIT;\n\n    /**\n     * @override\n     */\n    this.NOTCH_OFFSET_LEFT = 3 * this.GRID_UNIT;\n\n    /**\n     * @override\n     */\n    this.STATEMENT_INPUT_NOTCH_OFFSET = this.NOTCH_OFFSET_LEFT;\n\n    /**\n     * @override\n     */\n    this.MIN_BLOCK_WIDTH = 2 * this.GRID_UNIT;\n\n    /**\n     * @override\n     */\n    this.MIN_BLOCK_HEIGHT = 12 * this.GRID_UNIT;\n\n    /**\n     * @override\n     */\n    this.EMPTY_STATEMENT_INPUT_HEIGHT = 6 * this.GRID_UNIT;\n\n    /**\n     * @override\n     */\n    this.TAB_OFFSET_FROM_TOP = 0;\n\n    /**\n     * @override\n     */\n    this.TOP_ROW_MIN_HEIGHT = this.CORNER_RADIUS;\n\n    /**\n     * @override\n     */\n    this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT = this.LARGE_PADDING;\n\n    /**\n     * @override\n     */\n    this.BOTTOM_ROW_MIN_HEIGHT = this.CORNER_RADIUS;\n\n    /**\n     * @override\n     */\n    this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT = 6 * this.GRID_UNIT;\n\n    /**\n     * @override\n     */\n    this.STATEMENT_BOTTOM_SPACER = -this.NOTCH_HEIGHT;\n\n    /**\n     * Minimum statement input spacer width.\n     * @type {number}\n     */\n    this.STATEMENT_INPUT_SPACER_MIN_WIDTH = 40 * this.GRID_UNIT;\n\n    /**\n     * @override\n     */\n    this.STATEMENT_INPUT_PADDING_LEFT = 4 * this.GRID_UNIT;\n\n    /**\n     * @override\n     */\n    this.EMPTY_INLINE_INPUT_PADDING = 4 * this.GRID_UNIT;\n\n    /**\n     * @override\n     */\n    this.EMPTY_INLINE_INPUT_HEIGHT = 8 * this.GRID_UNIT;\n\n    /**\n     * @override\n     */\n    this.DUMMY_INPUT_MIN_HEIGHT = 8 * this.GRID_UNIT;\n\n    /**\n     * @override\n     */\n    this.DUMMY_INPUT_SHADOW_MIN_HEIGHT = 6 * this.GRID_UNIT;\n\n    /**\n     * @override\n     */\n    this.CURSOR_WS_WIDTH = 20 * this.GRID_UNIT;\n\n    /**\n     * @override\n     */\n    this.CURSOR_COLOUR = '#ffa200';\n\n    /**\n     * Radius of the cursor for input and output connections.\n     * @type {number}\n     * @package\n     */\n    this.CURSOR_RADIUS = 5;\n\n    /**\n     * @override\n     */\n    this.JAGGED_TEETH_HEIGHT = 0;\n\n    /**\n     * @override\n     */\n    this.JAGGED_TEETH_WIDTH = 0;\n\n    /**\n     * @override\n     */\n    this.START_HAT_HEIGHT = 22;\n\n    /**\n     * @override\n     */\n    this.START_HAT_WIDTH = 96;\n\n    /**\n     * @enum {number}\n     * @override\n     */\n    this.SHAPES = {HEXAGONAL: 1, ROUND: 2, SQUARE: 3, PUZZLE: 4, NOTCH: 5};\n\n    /**\n     * Map of output/input shapes and the amount they should cause a block to be\n     * padded. Outer key is the outer shape, inner key is the inner shape.\n     * When a block with the outer shape contains an input block with the inner\n     * shape on its left or right edge, the block elements are aligned such that\n     * the padding specified is reached.\n     * @package\n     */\n    this.SHAPE_IN_SHAPE_PADDING = {\n      1: {\n        // Outer shape: hexagon.\n        0: 5 * this.GRID_UNIT,  // Field in hexagon.\n        1: 2 * this.GRID_UNIT,  // Hexagon in hexagon.\n        2: 5 * this.GRID_UNIT,  // Round in hexagon.\n        3: 5 * this.GRID_UNIT,  // Square in hexagon.\n      },\n      2: {\n        // Outer shape: round.\n        0: 3 * this.GRID_UNIT,  // Field in round.\n        1: 3 * this.GRID_UNIT,  // Hexagon in round.\n        2: 1 * this.GRID_UNIT,  // Round in round.\n        3: 2 * this.GRID_UNIT,  // Square in round.\n      },\n      3: {\n        // Outer shape: square.\n        0: 2 * this.GRID_UNIT,  // Field in square.\n        1: 2 * this.GRID_UNIT,  // Hexagon in square.\n        2: 2 * this.GRID_UNIT,  // Round in square.\n        3: 2 * this.GRID_UNIT,  // Square in square.\n      },\n    };\n\n    /**\n     * @override\n     */\n    this.FULL_BLOCK_FIELDS = true;\n\n    /**\n     * @override\n     */\n    this.FIELD_TEXT_FONTSIZE = 3 * this.GRID_UNIT;\n\n    /**\n     * @override\n     */\n    this.FIELD_TEXT_FONTWEIGHT = 'bold';\n\n    /**\n     * @override\n     */\n    this.FIELD_TEXT_FONTFAMILY =\n        '\"Helvetica Neue\", \"Segoe UI\", Helvetica, sans-serif';\n\n    /**\n     * @override\n     */\n    this.FIELD_BORDER_RECT_RADIUS = this.CORNER_RADIUS;\n\n    /**\n     * @override\n     */\n    this.FIELD_BORDER_RECT_X_PADDING = 2 * this.GRID_UNIT;\n\n    /**\n     * @override\n     */\n    this.FIELD_BORDER_RECT_Y_PADDING = 1.625 * this.GRID_UNIT;\n\n    /**\n     * @override\n     */\n    this.FIELD_BORDER_RECT_HEIGHT = 8 * this.GRID_UNIT;\n\n    /**\n     * @override\n     */\n    this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT = 8 * this.GRID_UNIT;\n\n    /**\n     * @override\n     */\n    this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW = true;\n\n    /**\n     * @override\n     */\n    this.FIELD_DROPDOWN_COLOURED_DIV = true;\n\n    /**\n     * @override\n     */\n    this.FIELD_DROPDOWN_SVG_ARROW = true;\n\n    /**\n     * @override\n     */\n    this.FIELD_DROPDOWN_SVG_ARROW_PADDING = this.FIELD_BORDER_RECT_X_PADDING;\n\n    /**\n     * @override\n     */\n    this.FIELD_TEXTINPUT_BOX_SHADOW = true;\n\n    /**\n     * @override\n     */\n    this.FIELD_COLOUR_FULL_BLOCK = true;\n\n    /**\n     * @override\n     */\n    this.FIELD_COLOUR_DEFAULT_WIDTH = 2 * this.GRID_UNIT;\n\n    /**\n     * @override\n     */\n    this.FIELD_COLOUR_DEFAULT_HEIGHT = 4 * this.GRID_UNIT;\n\n    /**\n     * @override\n     */\n    this.FIELD_CHECKBOX_X_OFFSET = 1 * this.GRID_UNIT;\n\n    /**\n     * The maximum width of a dynamic connection shape.\n     * @type {number}\n     */\n    this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH = 12 * this.GRID_UNIT;\n\n    /**\n     * The selected glow colour.\n     * @type {string}\n     */\n    this.SELECTED_GLOW_COLOUR = '#fff200';\n\n    /**\n     * The size of the selected glow.\n     * @type {number}\n     */\n    this.SELECTED_GLOW_SIZE = 0.5;\n\n    /**\n     * The replacement glow colour.\n     * @type {string}\n     */\n    this.REPLACEMENT_GLOW_COLOUR = '#fff200';\n\n    /**\n     * The size of the selected glow.\n     * @type {number}\n     */\n    this.REPLACEMENT_GLOW_SIZE = 2;\n\n    /**\n     * The ID of the selected glow filter, or the empty string if no filter is\n     * set.\n     * @type {string}\n     * @package\n     */\n    this.selectedGlowFilterId = '';\n\n    /**\n     * The <filter> element to use for a selected glow, or null if not set.\n     * @type {SVGElement}\n     * @private\n     */\n    this.selectedGlowFilter_ = null;\n\n    /**\n     * The ID of the replacement glow filter, or the empty string if no filter\n     * is set.\n     * @type {string}\n     * @package\n     */\n    this.replacementGlowFilterId = '';\n\n    /**\n     * The <filter> element to use for a replacement glow, or null if not set.\n     * @type {SVGElement}\n     * @private\n     */\n    this.replacementGlowFilter_ = null;\n\n    /**\n     * The object containing information about the hexagon used for a boolean\n     * reporter block. Null before init is called.\n     * @type {Object}\n     */\n    this.HEXAGONAL = null;\n\n    /**\n     * The object containing information about the hexagon used for a number or\n     * string reporter block. Null before init is called.\n     * @type {Object}\n     */\n    this.ROUNDED = null;\n\n    /**\n     * The object containing information about the hexagon used for a\n     * rectangular reporter block. Null before init is called.\n     * @type {Object}\n     */\n    this.SQUARED = null;\n  }\n\n  /**\n   * @override\n   */\n  setFontConstants_(theme) {\n    super.setFontConstants_(theme);\n\n    this.FIELD_BORDER_RECT_HEIGHT =\n        this.FIELD_TEXT_HEIGHT + this.FIELD_BORDER_RECT_Y_PADDING * 2;\n    this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT = this.FIELD_BORDER_RECT_HEIGHT;\n  }\n\n  /**\n   * @override\n   */\n  init() {\n    super.init();\n    this.HEXAGONAL = this.makeHexagonal();\n    this.ROUNDED = this.makeRounded();\n    this.SQUARED = this.makeSquared();\n\n    this.STATEMENT_INPUT_NOTCH_OFFSET =\n        this.NOTCH_OFFSET_LEFT + this.INSIDE_CORNERS.rightWidth;\n  }\n\n  /**\n   * @override\n   */\n  setDynamicProperties_(theme) {\n    super.setDynamicProperties_(theme);\n\n    this.SELECTED_GLOW_COLOUR = theme.getComponentStyle('selectedGlowColour') ||\n        this.SELECTED_GLOW_COLOUR;\n    const selectedGlowSize =\n        Number(theme.getComponentStyle('selectedGlowSize'));\n    this.SELECTED_GLOW_SIZE = selectedGlowSize && !isNaN(selectedGlowSize) ?\n        selectedGlowSize :\n        this.SELECTED_GLOW_SIZE;\n    this.REPLACEMENT_GLOW_COLOUR =\n        theme.getComponentStyle('replacementGlowColour') ||\n        this.REPLACEMENT_GLOW_COLOUR;\n    const replacementGlowSize =\n        Number(theme.getComponentStyle('replacementGlowSize'));\n    this.REPLACEMENT_GLOW_SIZE =\n        replacementGlowSize && !isNaN(replacementGlowSize) ?\n        replacementGlowSize :\n        this.REPLACEMENT_GLOW_SIZE;\n  }\n\n  /**\n   * @override\n   */\n  dispose() {\n    super.dispose();\n    if (this.selectedGlowFilter_) {\n      dom.removeNode(this.selectedGlowFilter_);\n    }\n    if (this.replacementGlowFilter_) {\n      dom.removeNode(this.replacementGlowFilter_);\n    }\n  }\n\n  /**\n   * @override\n   */\n  makeStartHat() {\n    const height = this.START_HAT_HEIGHT;\n    const width = this.START_HAT_WIDTH;\n\n    const mainPath = svgPaths.curve('c', [\n      svgPaths.point(25, -height),\n      svgPaths.point(71, -height),\n      svgPaths.point(width, 0),\n    ]);\n    return {height: height, width: width, path: mainPath};\n  }\n\n  /**\n   * Create sizing and path information about a hexagonal shape.\n   * @return {!Object} An object containing sizing and path information about\n   *     a hexagonal shape for connections.\n   * @package\n   */\n  makeHexagonal() {\n    const maxWidth = this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;\n\n    /**\n     * Make the main path for the hexagonal connection shape out of two lines.\n     * The lines are defined with relative positions and require the block\n     * height. The 'up' and 'down' versions of the paths are the same, but the Y\n     * sign flips.  The 'left' and 'right' versions of the path are also the\n     * same, but the X sign flips.\n     * @param {number} height The height of the block the connection is on.\n     * @param {boolean} up True if the path should be drawn from bottom to top,\n     *     false otherwise.\n     * @param {boolean} right True if the path is for the right side of the\n     *     block.\n     * @return {string} A path fragment describing a rounded connection.\n     */\n    function makeMainPath(height, up, right) {\n      const halfHeight = height / 2;\n      const width = halfHeight > maxWidth ? maxWidth : halfHeight;\n      const forward = up ? -1 : 1;\n      const direction = right ? -1 : 1;\n      const dy = forward * height / 2;\n      return svgPaths.lineTo(-direction * width, dy) +\n          svgPaths.lineTo(direction * width, dy);\n    }\n\n    return {\n      type: this.SHAPES.HEXAGONAL,\n      isDynamic: true,\n      width: function(height) {\n        const halfHeight = height / 2;\n        return halfHeight > maxWidth ? maxWidth : halfHeight;\n      },\n      height: function(height) {\n        return height;\n      },\n      connectionOffsetY: function(connectionHeight) {\n        return connectionHeight / 2;\n      },\n      connectionOffsetX: function(connectionWidth) {\n        return -connectionWidth;\n      },\n      pathDown: function(height) {\n        return makeMainPath(height, false, false);\n      },\n      pathUp: function(height) {\n        return makeMainPath(height, true, false);\n      },\n      pathRightDown: function(height) {\n        return makeMainPath(height, false, true);\n      },\n      pathRightUp: function(height) {\n        return makeMainPath(height, false, true);\n      },\n    };\n  }\n\n  /**\n   * Create sizing and path information about a rounded shape.\n   * @return {!Object} An object containing sizing and path information about\n   *     a rounded shape for connections.\n   * @package\n   */\n  makeRounded() {\n    const maxWidth = this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;\n    const maxHeight = maxWidth * 2;\n\n    /**\n     * Make the main path for the rounded connection shape out of two arcs and\n     * a line that joins them.  The arcs are defined with relative positions.\n     * Usually, the height of the block is split between the two arcs. In the\n     * case where the height of the block exceeds the maximum height, a line is\n     * drawn in between the two arcs. The 'up' and 'down' versions of the paths\n     * are the same, but the Y sign flips.  The 'up' and 'right' versions of the\n     * path flip the sweep-flag which moves the arc at negative angles.\n     * @param {number} blockHeight The height of the block the connection is on.\n     * @param {boolean} up True if the path should be drawn from bottom to top,\n     *     false otherwise.\n     * @param {boolean} right True if the path is for the right side of the\n     *     block.\n     * @return {string} A path fragment describing a rounded connection.\n     */\n    function makeMainPath(blockHeight, up, right) {\n      const remainingHeight =\n          blockHeight > maxHeight ? blockHeight - maxHeight : 0;\n      const height = blockHeight > maxHeight ? maxHeight : blockHeight;\n      const radius = height / 2;\n      return svgPaths.arc(\n                 'a', '0 0,1', radius,\n                 svgPaths.point(\n                     (up ? -1 : 1) * radius, (up ? -1 : 1) * radius)) +\n          svgPaths.lineOnAxis('v', (right ? 1 : -1) * remainingHeight) +\n          svgPaths.arc(\n              'a', '0 0,1', radius,\n              svgPaths.point((up ? 1 : -1) * radius, (up ? -1 : 1) * radius));\n    }\n\n    return {\n      type: this.SHAPES.ROUND,\n      isDynamic: true,\n      width: function(height) {\n        const halfHeight = height / 2;\n        return halfHeight > maxWidth ? maxWidth : halfHeight;\n      },\n      height: function(height) {\n        return height;\n      },\n      connectionOffsetY: function(connectionHeight) {\n        return connectionHeight / 2;\n      },\n      connectionOffsetX: function(connectionWidth) {\n        return -connectionWidth;\n      },\n      pathDown: function(height) {\n        return makeMainPath(height, false, false);\n      },\n      pathUp: function(height) {\n        return makeMainPath(height, true, false);\n      },\n      pathRightDown: function(height) {\n        return makeMainPath(height, false, true);\n      },\n      pathRightUp: function(height) {\n        return makeMainPath(height, false, true);\n      },\n    };\n  }\n\n  /**\n   * Create sizing and path information about a squared shape.\n   * @return {!Object} An object containing sizing and path information about\n   *     a squared shape for connections.\n   * @package\n   */\n  makeSquared() {\n    const radius = this.CORNER_RADIUS;\n\n    /**\n     * Make the main path for the squared connection shape out of two corners\n     * and a single line in-between (a and v). These are defined in relative\n     * positions and require the height of the block.\n     * The 'left' and 'right' versions of the paths are the same, but the Y sign\n     * flips.  The 'up' and 'down' versions of the path determine where the\n     * corner point is placed and in turn the direction of the corners.\n     * @param {number} height The height of the block the connection is on.\n     * @param {boolean} up True if the path should be drawn from bottom to top,\n     *     false otherwise.\n     * @param {boolean} right True if the path is for the right side of the\n     *     block.\n     * @return {string} A path fragment describing a squared connection.\n     */\n    function makeMainPath(height, up, right) {\n      const innerHeight = height - radius * 2;\n      return svgPaths.arc(\n                 'a', '0 0,1', radius,\n                 svgPaths.point(\n                     (up ? -1 : 1) * radius, (up ? -1 : 1) * radius)) +\n          svgPaths.lineOnAxis('v', (right ? 1 : -1) * innerHeight) +\n          svgPaths.arc(\n              'a', '0 0,1', radius,\n              svgPaths.point((up ? 1 : -1) * radius, (up ? -1 : 1) * radius));\n    }\n\n    return {\n      type: this.SHAPES.SQUARE,\n      isDynamic: true,\n      width: function(_height) {\n        return radius;\n      },\n      height: function(height) {\n        return height;\n      },\n      connectionOffsetY: function(connectionHeight) {\n        return connectionHeight / 2;\n      },\n      connectionOffsetX: function(connectionWidth) {\n        return -connectionWidth;\n      },\n      pathDown: function(height) {\n        return makeMainPath(height, false, false);\n      },\n      pathUp: function(height) {\n        return makeMainPath(height, true, false);\n      },\n      pathRightDown: function(height) {\n        return makeMainPath(height, false, true);\n      },\n      pathRightUp: function(height) {\n        return makeMainPath(height, false, true);\n      },\n    };\n  }\n\n  /**\n   * @override\n   */\n  shapeFor(connection) {\n    let checks = connection.getCheck();\n    if (!checks && connection.targetConnection) {\n      checks = connection.targetConnection.getCheck();\n    }\n    let outputShape;\n    switch (connection.type) {\n      case ConnectionType.INPUT_VALUE:\n      case ConnectionType.OUTPUT_VALUE:\n        outputShape = connection.getSourceBlock().getOutputShape();\n        // If the block has an output shape set, use that instead.\n        if (outputShape !== null) {\n          switch (outputShape) {\n            case this.SHAPES.HEXAGONAL:\n              return /** @type {!Object} */ (this.HEXAGONAL);\n            case this.SHAPES.ROUND:\n              return /** @type {!Object} */ (this.ROUNDED);\n            case this.SHAPES.SQUARE:\n              return /** @type {!Object} */ (this.SQUARED);\n          }\n        }\n        // Includes doesn't work in IE.\n        if (checks && checks.indexOf('Boolean') !== -1) {\n          return /** @type {!Object} */ (this.HEXAGONAL);\n        }\n        if (checks && checks.indexOf('Number') !== -1) {\n          return /** @type {!Object} */ (this.ROUNDED);\n        }\n        if (checks && checks.indexOf('String') !== -1) {\n          return /** @type {!Object} */ (this.ROUNDED);\n        }\n        return /** @type {!Object} */ (this.ROUNDED);\n      case ConnectionType.PREVIOUS_STATEMENT:\n      case ConnectionType.NEXT_STATEMENT:\n        return this.NOTCH;\n      default:\n        throw Error('Unknown type');\n    }\n  }\n\n  /**\n   * @override\n   */\n  makeNotch() {\n    const width = this.NOTCH_WIDTH;\n    const height = this.NOTCH_HEIGHT;\n\n    const innerWidth = width / 3;\n    const curveWidth = innerWidth / 3;\n\n    const halfHeight = height / 2;\n    const quarterHeight = halfHeight / 2;\n\n    /**\n     * Make the main path for the notch.\n     * @param {number} dir Direction multiplier to apply to horizontal offsets\n     *     along the path. Either 1 or -1.\n     * @return {string} A path fragment describing a notch.\n     */\n    function makeMainPath(dir) {\n      return (\n          svgPaths.curve(\n              'c',\n              [\n                svgPaths.point(dir * curveWidth / 2, 0),\n                svgPaths.point(dir * curveWidth * 3 / 4, quarterHeight / 2),\n                svgPaths.point(dir * curveWidth, quarterHeight),\n              ]) +\n          svgPaths.line([svgPaths.point(dir * curveWidth, halfHeight)]) +\n          svgPaths.curve(\n              'c',\n              [\n                svgPaths.point(dir * curveWidth / 4, quarterHeight / 2),\n                svgPaths.point(dir * curveWidth / 2, quarterHeight),\n                svgPaths.point(dir * curveWidth, quarterHeight),\n              ]) +\n          svgPaths.lineOnAxis('h', dir * innerWidth) +\n          svgPaths.curve(\n              'c',\n              [\n                svgPaths.point(dir * curveWidth / 2, 0),\n                svgPaths.point(dir * curveWidth * 3 / 4, -(quarterHeight / 2)),\n                svgPaths.point(dir * curveWidth, -quarterHeight),\n              ]) +\n          svgPaths.line([svgPaths.point(dir * curveWidth, -halfHeight)]) +\n          svgPaths.curve('c', [\n            svgPaths.point(dir * curveWidth / 4, -(quarterHeight / 2)),\n            svgPaths.point(dir * curveWidth / 2, -quarterHeight),\n            svgPaths.point(dir * curveWidth, -quarterHeight),\n          ]));\n    }\n\n    const pathLeft = makeMainPath(1);\n    const pathRight = makeMainPath(-1);\n\n    return {\n      type: this.SHAPES.NOTCH,\n      width: width,\n      height: height,\n      pathLeft: pathLeft,\n      pathRight: pathRight,\n    };\n  }\n\n  /**\n   * @override\n   */\n  makeInsideCorners() {\n    const radius = this.CORNER_RADIUS;\n\n    const innerTopLeftCorner =\n        svgPaths.arc('a', '0 0,0', radius, svgPaths.point(-radius, radius));\n\n    const innerTopRightCorner =\n        svgPaths.arc('a', '0 0,1', radius, svgPaths.point(-radius, radius));\n\n    const innerBottomLeftCorner =\n        svgPaths.arc('a', '0 0,0', radius, svgPaths.point(radius, radius));\n\n    const innerBottomRightCorner =\n        svgPaths.arc('a', '0 0,1', radius, svgPaths.point(radius, radius));\n\n    return {\n      width: radius,\n      height: radius,\n      pathTop: innerTopLeftCorner,\n      pathBottom: innerBottomLeftCorner,\n      rightWidth: radius,\n      rightHeight: radius,\n      pathTopRight: innerTopRightCorner,\n      pathBottomRight: innerBottomRightCorner,\n    };\n  }\n\n  /**\n   * @override\n   */\n  generateSecondaryColour_(colour) {\n    return utilsColour.blend('#000', colour, 0.15) || colour;\n  }\n\n  /**\n   * @override\n   */\n  generateTertiaryColour_(colour) {\n    return utilsColour.blend('#000', colour, 0.25) || colour;\n  }\n\n  /**\n   * @override\n   */\n  createDom(svg, tagName, selector) {\n    super.createDom(svg, tagName, selector);\n    /*\n    <defs>\n      ... filters go here ...\n    </defs>\n    */\n    const defs = dom.createSvgElement(Svg.DEFS, {}, svg);\n    // Using a dilate distorts the block shape.\n    // Instead use a gaussian blur, and then set all alpha to 1 with a transfer.\n    const selectedGlowFilter = dom.createSvgElement(\n        Svg.FILTER, {\n          'id': 'blocklySelectedGlowFilter' + this.randomIdentifier,\n          'height': '160%',\n          'width': '180%',\n          'y': '-30%',\n          'x': '-40%',\n        },\n        defs);\n    dom.createSvgElement(\n        Svg.FEGAUSSIANBLUR,\n        {'in': 'SourceGraphic', 'stdDeviation': this.SELECTED_GLOW_SIZE},\n        selectedGlowFilter);\n    // Set all gaussian blur pixels to 1 opacity before applying flood\n    const selectedComponentTransfer = dom.createSvgElement(\n        Svg.FECOMPONENTTRANSFER, {'result': 'outBlur'}, selectedGlowFilter);\n    dom.createSvgElement(\n        Svg.FEFUNCA,\n        {'type': 'table', 'tableValues': '0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1'},\n        selectedComponentTransfer);\n    // Color the highlight\n    dom.createSvgElement(\n        Svg.FEFLOOD, {\n          'flood-color': this.SELECTED_GLOW_COLOUR,\n          'flood-opacity': 1,\n          'result': 'outColor',\n        },\n        selectedGlowFilter);\n    dom.createSvgElement(\n        Svg.FECOMPOSITE, {\n          'in': 'outColor',\n          'in2': 'outBlur',\n          'operator': 'in',\n          'result': 'outGlow',\n        },\n        selectedGlowFilter);\n    this.selectedGlowFilterId = selectedGlowFilter.id;\n    this.selectedGlowFilter_ = selectedGlowFilter;\n\n    // Using a dilate distorts the block shape.\n    // Instead use a gaussian blur, and then set all alpha to 1 with a transfer.\n    const replacementGlowFilter = dom.createSvgElement(\n        Svg.FILTER, {\n          'id': 'blocklyReplacementGlowFilter' + this.randomIdentifier,\n          'height': '160%',\n          'width': '180%',\n          'y': '-30%',\n          'x': '-40%',\n        },\n        defs);\n    dom.createSvgElement(\n        Svg.FEGAUSSIANBLUR,\n        {'in': 'SourceGraphic', 'stdDeviation': this.REPLACEMENT_GLOW_SIZE},\n        replacementGlowFilter);\n    // Set all gaussian blur pixels to 1 opacity before applying flood\n    const replacementComponentTransfer = dom.createSvgElement(\n        Svg.FECOMPONENTTRANSFER, {'result': 'outBlur'}, replacementGlowFilter);\n    dom.createSvgElement(\n        Svg.FEFUNCA,\n        {'type': 'table', 'tableValues': '0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1'},\n        replacementComponentTransfer);\n    // Color the highlight\n    dom.createSvgElement(\n        Svg.FEFLOOD, {\n          'flood-color': this.REPLACEMENT_GLOW_COLOUR,\n          'flood-opacity': 1,\n          'result': 'outColor',\n        },\n        replacementGlowFilter);\n    dom.createSvgElement(\n        Svg.FECOMPOSITE, {\n          'in': 'outColor',\n          'in2': 'outBlur',\n          'operator': 'in',\n          'result': 'outGlow',\n        },\n        replacementGlowFilter);\n    dom.createSvgElement(\n        Svg.FECOMPOSITE, {\n          'in': 'SourceGraphic',\n          'in2': 'outGlow',\n          'operator': 'over',\n        },\n        replacementGlowFilter);\n    this.replacementGlowFilterId = replacementGlowFilter.id;\n    this.replacementGlowFilter_ = replacementGlowFilter;\n  }\n\n  /**\n   * @override\n   */\n  getCSS_(selector) {\n    return [\n      /* eslint-disable indent */\n      // Text.\n      selector + ' .blocklyText,', selector + ' .blocklyFlyoutLabelText {',\n      'font: ' + this.FIELD_TEXT_FONTWEIGHT + ' ' + this.FIELD_TEXT_FONTSIZE +\n          'pt ' + this.FIELD_TEXT_FONTFAMILY + ';',\n      '}',\n\n      // Fields.\n      selector + ' .blocklyText {', 'fill: #fff;', '}',\n      selector + ' .blocklyNonEditableText>rect:not(.blocklyDropdownRect),',\n      selector + ' .blocklyEditableText>rect:not(.blocklyDropdownRect) {',\n      'fill: ' + this.FIELD_BORDER_RECT_COLOUR + ';', '}',\n      selector + ' .blocklyNonEditableText>text,',\n      selector + ' .blocklyEditableText>text,',\n      selector + ' .blocklyNonEditableText>g>text,',\n      selector + ' .blocklyEditableText>g>text {', 'fill: #575E75;', '}',\n\n      // Flyout labels.\n      selector + ' .blocklyFlyoutLabelText {', 'fill: #575E75;', '}',\n\n      // Bubbles.\n      selector + ' .blocklyText.blocklyBubbleText {', 'fill: #575E75;', '}',\n\n      // Editable field hover.\n      selector + ' .blocklyDraggable:not(.blocklyDisabled)',\n      ' .blocklyEditableText:not(.editing):hover>rect,',\n      selector + ' .blocklyDraggable:not(.blocklyDisabled)',\n      ' .blocklyEditableText:not(.editing):hover>.blocklyPath {',\n      'stroke: #fff;', 'stroke-width: 2;', '}',\n\n      // Text field input.\n      selector + ' .blocklyHtmlInput {',\n      'font-family: ' + this.FIELD_TEXT_FONTFAMILY + ';',\n      'font-weight: ' + this.FIELD_TEXT_FONTWEIGHT + ';', 'color: #575E75;',\n      '}',\n\n      // Dropdown field.\n      selector + ' .blocklyDropdownText {', 'fill: #fff !important;', '}',\n      // Widget and Dropdown Div\n      selector + '.blocklyWidgetDiv .goog-menuitem,',\n      selector + '.blocklyDropDownDiv .goog-menuitem {',\n      'font-family: ' + this.FIELD_TEXT_FONTFAMILY + ';', '}',\n      selector + '.blocklyDropDownDiv .goog-menuitem-content {', 'color: #fff;',\n      '}',\n\n      // Connection highlight.\n      selector + ' .blocklyHighlightedConnectionPath {',\n      'stroke: ' + this.SELECTED_GLOW_COLOUR + ';', '}',\n\n      // Disabled outline paths.\n      selector + ' .blocklyDisabled > .blocklyOutlinePath {',\n      'fill: url(#blocklyDisabledPattern' + this.randomIdentifier + ')', '}',\n\n      // Insertion marker.\n      selector + ' .blocklyInsertionMarker>.blocklyPath {',\n      'fill-opacity: ' + this.INSERTION_MARKER_OPACITY + ';', 'stroke: none;',\n      '}',\n      /* eslint-enable indent */\n    ];\n  }\n}\n\nexports.ConstantProvider = ConstantProvider;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Zelos renderer.\n */\n'use strict';\n\n/**\n * Zelos renderer.\n * @class\n */\ngoog.module('Blockly.zelos.Drawer');\n\nconst debug = goog.require('Blockly.blockRendering.debug');\nconst svgPaths = goog.require('Blockly.utils.svgPaths');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockSvg} = goog.requireType('Blockly.BlockSvg');\nconst {Drawer: BaseDrawer} = goog.require('Blockly.blockRendering.Drawer');\n/* eslint-disable-next-line no-unused-vars */\nconst {PathObject} = goog.requireType('Blockly.zelos.PathObject');\n/* eslint-disable-next-line no-unused-vars */\nconst {RenderInfo} = goog.requireType('Blockly.zelos.RenderInfo');\n/* eslint-disable-next-line no-unused-vars */\nconst {Row} = goog.requireType('Blockly.blockRendering.Row');\n/* eslint-disable-next-line no-unused-vars */\nconst {SpacerRow} = goog.requireType('Blockly.blockRendering.SpacerRow');\n/* eslint-disable-next-line no-unused-vars */\nconst {StatementInput} = goog.requireType('Blockly.zelos.StatementInput');\nconst {Types} = goog.require('Blockly.blockRendering.Types');\n\n\n/**\n * An object that draws a block based on the given rendering information.\n * @extends {BaseDrawer}\n * @alias Blockly.zelos.Drawer\n */\nclass Drawer extends BaseDrawer {\n  /**\n   * @param {!BlockSvg} block The block to render.\n   * @param {!RenderInfo} info An object containing all\n   *   information needed to render this block.\n   * @package\n   */\n  constructor(block, info) {\n    super(block, info);\n\n    /**\n     * @type {!RenderInfo}\n     */\n    this.info_;\n  }\n\n  /**\n   * @override\n   */\n  draw() {\n    const pathObject =\n        /** @type {!PathObject} */ (this.block_.pathObject);\n    pathObject.beginDrawing();\n    this.hideHiddenIcons_();\n    this.drawOutline_();\n    this.drawInternals_();\n\n    pathObject.setPath(this.outlinePath_ + '\\n' + this.inlinePath_);\n    if (this.info_.RTL) {\n      pathObject.flipRTL();\n    }\n    if (debug.isDebuggerEnabled()) {\n      this.block_.renderingDebugger.drawDebug(this.block_, this.info_);\n    }\n    this.recordSizeOnBlock_();\n    if (this.info_.outputConnection) {\n      // Store the output connection shape type for parent blocks to use during\n      // rendering.\n      pathObject.outputShapeType = this.info_.outputConnection.shape.type;\n    }\n    pathObject.endDrawing();\n  }\n\n  /**\n   * @override\n   */\n  drawOutline_() {\n    if (this.info_.outputConnection &&\n        this.info_.outputConnection.isDynamicShape &&\n        !this.info_.hasStatementInput &&\n        !this.info_.bottomRow.hasNextConnection) {\n      this.drawFlatTop_();\n      this.drawRightDynamicConnection_();\n      this.drawFlatBottom_();\n      this.drawLeftDynamicConnection_();\n    } else {\n      super.drawOutline_();\n    }\n  }\n\n  /**\n   * @override\n   */\n  drawLeft_() {\n    if (this.info_.outputConnection &&\n        this.info_.outputConnection.isDynamicShape) {\n      this.drawLeftDynamicConnection_();\n    } else {\n      super.drawLeft_();\n    }\n  }\n\n  /**\n   * Add steps for the right side of a row that does not have value or\n   * statement input connections.\n   * @param {!Row} row The row to draw the\n   *     side of.\n   * @protected\n   */\n  drawRightSideRow_(row) {\n    if (row.height <= 0) {\n      return;\n    }\n    if (Types.isSpacer(row)) {\n      const spacerRow = /** @type {!SpacerRow} */ (row);\n      if (spacerRow.precedesStatement || spacerRow.followsStatement) {\n        const cornerHeight = this.constants_.INSIDE_CORNERS.rightHeight;\n        const remainingHeight =\n            spacerRow.height - (spacerRow.precedesStatement ? cornerHeight : 0);\n        this.outlinePath_ +=\n            (spacerRow.followsStatement ?\n                 this.constants_.INSIDE_CORNERS.pathBottomRight :\n                 '') +\n            (remainingHeight > 0 ?\n                 svgPaths.lineOnAxis('V', spacerRow.yPos + remainingHeight) :\n                 '') +\n            (spacerRow.precedesStatement ?\n                 this.constants_.INSIDE_CORNERS.pathTopRight :\n                 '');\n        return;\n      }\n    }\n    this.outlinePath_ += svgPaths.lineOnAxis('V', row.yPos + row.height);\n  }\n\n  /**\n   * Add steps to draw the right side of an output with a dynamic connection.\n   * @protected\n   */\n  drawRightDynamicConnection_() {\n    this.outlinePath_ += this.info_.outputConnection.shape.pathRightDown(\n        this.info_.outputConnection.height);\n  }\n\n  /**\n   * Add steps to draw the left side of an output with a dynamic connection.\n   * @protected\n   */\n  drawLeftDynamicConnection_() {\n    this.positionOutputConnection_();\n\n    this.outlinePath_ += this.info_.outputConnection.shape.pathUp(\n        this.info_.outputConnection.height);\n\n    // Close off the path.  This draws a vertical line up to the start of the\n    // block's path, which may be either a rounded or a sharp corner.\n    this.outlinePath_ += 'z';\n  }\n\n  /**\n   * Add steps to draw a flat top row.\n   * @protected\n   */\n  drawFlatTop_() {\n    const topRow = this.info_.topRow;\n    this.positionPreviousConnection_();\n\n    this.outlinePath_ += svgPaths.moveBy(topRow.xPos, this.info_.startY);\n\n    this.outlinePath_ += svgPaths.lineOnAxis('h', topRow.width);\n  }\n\n  /**\n   * Add steps to draw a flat bottom row.\n   * @protected\n   */\n  drawFlatBottom_() {\n    const bottomRow = this.info_.bottomRow;\n    this.positionNextConnection_();\n\n    this.outlinePath_ += svgPaths.lineOnAxis('V', bottomRow.baseline);\n\n    this.outlinePath_ += svgPaths.lineOnAxis('h', -bottomRow.width);\n  }\n\n  /**\n   * @override\n   */\n  drawInlineInput_(input) {\n    this.positionInlineInputConnection_(input);\n\n    const inputName = input.input.name;\n    if (input.connectedBlock || this.info_.isInsertionMarker) {\n      return;\n    }\n\n    const width = input.width - (input.connectionWidth * 2);\n    const height = input.height;\n    const yPos = input.centerline - height / 2;\n\n    const connectionRight = input.xPos + input.connectionWidth;\n\n    const outlinePath = svgPaths.moveTo(connectionRight, yPos) +\n        svgPaths.lineOnAxis('h', width) +\n        input.shape.pathRightDown(input.height) +\n        svgPaths.lineOnAxis('h', -width) + input.shape.pathUp(input.height) +\n        'z';\n    this.block_.pathObject.setOutlinePath(inputName, outlinePath);\n  }\n\n  /**\n   * @override\n   */\n  drawStatementInput_(row) {\n    const input = /** @type {!StatementInput} */ (row.getLastInput());\n    // Where to start drawing the notch, which is on the right side in LTR.\n    const x = input.xPos + input.notchOffset + input.shape.width;\n\n    const innerTopLeftCorner = input.shape.pathRight +\n        svgPaths.lineOnAxis(\n            'h', -(input.notchOffset - this.constants_.INSIDE_CORNERS.width)) +\n        this.constants_.INSIDE_CORNERS.pathTop;\n\n    const innerHeight =\n        row.height - (2 * this.constants_.INSIDE_CORNERS.height);\n\n    const innerBottomLeftCorner = this.constants_.INSIDE_CORNERS.pathBottom +\n        svgPaths.lineOnAxis(\n            'h', (input.notchOffset - this.constants_.INSIDE_CORNERS.width)) +\n        (input.connectedBottomNextConnection ? '' : input.shape.pathLeft);\n\n    this.outlinePath_ += svgPaths.lineOnAxis('H', x) + innerTopLeftCorner +\n        svgPaths.lineOnAxis('v', innerHeight) + innerBottomLeftCorner +\n        svgPaths.lineOnAxis('H', row.xPos + row.width);\n\n    this.positionStatementInputConnection_(row);\n  }\n}\n\nexports.Drawer = Drawer;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Methods for graphically rendering a marker as SVG.\n */\n'use strict';\n\n/**\n * Methods for graphically rendering a marker as SVG.\n * @class\n */\ngoog.module('Blockly.zelos.MarkerSvg');\n\nconst dom = goog.require('Blockly.utils.dom');\n/* eslint-disable-next-line no-unused-vars */\nconst {ASTNode} = goog.requireType('Blockly.ASTNode');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockSvg} = goog.requireType('Blockly.BlockSvg');\n/* eslint-disable-next-line no-unused-vars */\nconst {ConstantProvider: BaseConstantProvider} = goog.requireType('Blockly.blockRendering.ConstantProvider');\nconst {MarkerSvg: BaseMarkerSvg} = goog.require('Blockly.blockRendering.MarkerSvg');\n/* eslint-disable-next-line no-unused-vars */\nconst {Marker} = goog.requireType('Blockly.Marker');\n/* eslint-disable-next-line no-unused-vars */\nconst {RenderedConnection} = goog.requireType('Blockly.RenderedConnection');\nconst {Svg} = goog.require('Blockly.utils.Svg');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceSvg} = goog.requireType('Blockly.WorkspaceSvg');\n/* eslint-disable-next-line no-unused-vars */\nconst {ConstantProvider: ZelosConstantProvider} = goog.requireType('Blockly.zelos.ConstantProvider');\n\n\n/**\n * Class to draw a marker.\n * @extends {BaseMarkerSvg}\n * @alias Blockly.zelos.MarkerSvg\n */\nclass MarkerSvg extends BaseMarkerSvg {\n  /**\n   * @param {!WorkspaceSvg} workspace The workspace the marker belongs to.\n   * @param {!BaseConstantProvider} constants The constants for\n   *     the renderer.\n   * @param {!Marker} marker The marker to draw.\n   */\n  constructor(workspace, constants, marker) {\n    super(workspace, constants, marker);\n\n    /** @type {!ZelosConstantProvider} */\n    this.constants_;\n\n    /**\n     * @type {SVGCircleElement}\n     * @private\n     */\n    this.markerCircle_ = null;\n  }\n\n  /**\n   * Position and display the marker for an input or an output connection.\n   * @param {!ASTNode} curNode The node to draw the marker for.\n   * @private\n   */\n  showWithInputOutput_(curNode) {\n    const block = /** @type {!BlockSvg} */ (curNode.getSourceBlock());\n    const connection =\n        /** @type {!RenderedConnection} */ (curNode.getLocation());\n    const offsetInBlock = connection.getOffsetInBlock();\n\n    this.positionCircle_(offsetInBlock.x, offsetInBlock.y);\n    this.setParent_(block);\n    this.showCurrent_();\n  }\n\n  /**\n   * @override\n   */\n  showWithOutput_(curNode) {\n    this.showWithInputOutput_(curNode);\n  }\n\n  /**\n   * @override\n   */\n  showWithInput_(curNode) {\n    this.showWithInputOutput_(curNode);\n  }\n\n  /**\n   * Draw a rectangle around the block.\n   * @param {!ASTNode} curNode The current node of the marker.\n   */\n  showWithBlock_(curNode) {\n    const block = /** @type {!BlockSvg} */ (curNode.getLocation());\n\n    // Gets the height and width of entire stack.\n    const heightWidth = block.getHeightWidth();\n\n    // Add padding so that being on a stack looks different than being on a\n    // block.\n    this.positionRect_(0, 0, heightWidth.width, heightWidth.height);\n    this.setParent_(block);\n    this.showCurrent_();\n  }\n\n  /**\n   * Position the circle we use for input and output connections.\n   * @param {number} x The x position of the circle.\n   * @param {number} y The y position of the circle.\n   * @private\n   */\n  positionCircle_(x, y) {\n    this.markerCircle_.setAttribute('cx', x);\n    this.markerCircle_.setAttribute('cy', y);\n    this.currentMarkerSvg = this.markerCircle_;\n  }\n\n  /**\n   * @override\n   */\n  hide() {\n    super.hide();\n    this.markerCircle_.style.display = 'none';\n  }\n\n  /**\n   * @override\n   */\n  createDomInternal_() {\n    /* clang-format off */\n    /* This markup will be generated and added to the .svgGroup_:\n    <g>\n      <rect width=\"100\" height=\"5\">\n        <animate attributeType=\"XML\" attributeName=\"fill\" dur=\"1s\"\n          values=\"transparent;transparent;#fff;transparent\" repeatCount=\"indefinite\" />\n      </rect>\n    </g>\n    */\n    /* clang-format on */\n\n    super.createDomInternal_();\n\n    this.markerCircle_ = dom.createSvgElement(\n        Svg.CIRCLE, {\n          'r': this.constants_.CURSOR_RADIUS,\n          'style': 'display: none',\n          'stroke-width': this.constants_.CURSOR_STROKE_WIDTH,\n        },\n        this.markerSvg_);\n\n    // Markers and stack cursors don't blink.\n    if (this.isCursor()) {\n      const blinkProperties = this.getBlinkProperties_();\n      dom.createSvgElement(Svg.ANIMATE, blinkProperties, this.markerCircle_);\n    }\n\n    return this.markerSvg_;\n  }\n\n  /**\n   * @override\n   */\n  applyColour_(curNode) {\n    super.applyColour_(curNode);\n\n    this.markerCircle_.setAttribute('fill', this.colour_);\n    this.markerCircle_.setAttribute('stroke', this.colour_);\n\n    if (this.isCursor()) {\n      const values = this.colour_ + ';transparent;transparent;';\n      this.markerCircle_.firstChild.setAttribute('values', values);\n    }\n  }\n}\n\nexports.MarkerSvg = MarkerSvg;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview An object that owns a block's rendering SVG elements.\n */\n\n'use strict';\n\n/**\n * An object that owns a block's rendering SVG elements.\n * @class\n */\ngoog.module('Blockly.zelos.PathObject');\n\nconst dom = goog.require('Blockly.utils.dom');\n/* eslint-disable-next-line no-unused-vars */\nconst {ConstantProvider} = goog.requireType('Blockly.zelos.ConstantProvider');\nconst {PathObject: BasePathObject} = goog.require('Blockly.blockRendering.PathObject');\nconst {Svg} = goog.require('Blockly.utils.Svg');\n/* eslint-disable-next-line no-unused-vars */\nconst {Theme} = goog.requireType('Blockly.Theme');\n\n\n/**\n * An object that handles creating and setting each of the SVG elements\n * used by the renderer.\n * @alias Blockly.zelos.PathObject\n */\nclass PathObject extends BasePathObject {\n  /**\n   * @param {!SVGElement} root The root SVG element.\n   * @param {!Theme.BlockStyle} style The style object to use for\n   *     colouring.\n   * @param {!ConstantProvider} constants The renderer's constants.\n   * @package\n   */\n  constructor(root, style, constants) {\n    super(root, style, constants);\n\n    /**\n     * The renderer's constant provider.\n     * @type {!ConstantProvider}\n     */\n    this.constants = constants;\n\n    /**\n     * The selected path of the block.\n     * @type {?SVGElement}\n     * @private\n     */\n    this.svgPathSelected_ = null;\n\n    /**\n     * The outline paths on the block.\n     * @type {!Object<string, !SVGElement>}\n     * @private\n     */\n    this.outlines_ = Object.create(null);\n\n    /**\n     * A set used to determine which outlines were used during a draw pass.  The\n     * set is initialized with a reference to all the outlines in\n     * `this.outlines_`. Every time we use an outline during the draw pass, the\n     * reference is removed from this set.\n     * @type {Object<string, number>}\n     * @private\n     */\n    this.remainingOutlines_ = null;\n\n    /**\n     * The type of block's output connection shape.  This is set when a block\n     * with an output connection is drawn.\n     * @package\n     */\n    this.outputShapeType = null;\n  }\n\n  /**\n   * @override\n   */\n  setPath(pathString) {\n    super.setPath(pathString);\n    if (this.svgPathSelected_) {\n      this.svgPathSelected_.setAttribute('d', pathString);\n    }\n  }\n\n  /**\n   * @override\n   */\n  applyColour(block) {\n    super.applyColour(block);\n    // Set shadow stroke colour.\n    if (block.isShadow() && block.getParent()) {\n      this.svgPath.setAttribute(\n          'stroke', block.getParent().style.colourTertiary);\n    }\n\n    // Apply colour to outlines.\n    for (const key in this.outlines_) {\n      this.outlines_[key].setAttribute('fill', this.style.colourTertiary);\n    }\n  }\n\n  /**\n   * @override\n   */\n  flipRTL() {\n    super.flipRTL();\n    // Mirror each input outline path.\n    for (const key in this.outlines_) {\n      this.outlines_[key].setAttribute('transform', 'scale(-1 1)');\n    }\n  }\n\n  /**\n   * @override\n   */\n  updateSelected(enable) {\n    this.setClass_('blocklySelected', enable);\n    if (enable) {\n      if (!this.svgPathSelected_) {\n        this.svgPathSelected_ =\n            /** @type {!SVGElement} */ (this.svgPath.cloneNode(true));\n        this.svgPathSelected_.setAttribute('fill', 'none');\n        this.svgPathSelected_.setAttribute(\n            'filter', 'url(#' + this.constants.selectedGlowFilterId + ')');\n        this.svgRoot.appendChild(this.svgPathSelected_);\n      }\n    } else {\n      if (this.svgPathSelected_) {\n        this.svgRoot.removeChild(this.svgPathSelected_);\n        this.svgPathSelected_ = null;\n      }\n    }\n  }\n\n  /**\n   * @override\n   */\n  updateReplacementFade(enable) {\n    this.setClass_('blocklyReplaceable', enable);\n    if (enable) {\n      this.svgPath.setAttribute(\n          'filter', 'url(#' + this.constants.replacementGlowFilterId + ')');\n    } else {\n      this.svgPath.removeAttribute('filter');\n    }\n  }\n\n  /**\n   * @override\n   */\n  updateShapeForInputHighlight(conn, enable) {\n    const name = conn.getParentInput().name;\n    const outlinePath = this.getOutlinePath_(name);\n    if (!outlinePath) {\n      return;\n    }\n    if (enable) {\n      outlinePath.setAttribute(\n          'filter', 'url(#' + this.constants.replacementGlowFilterId + ')');\n    } else {\n      outlinePath.removeAttribute('filter');\n    }\n  }\n\n  /**\n   * Method that's called when the drawer is about to draw the block.\n   * @package\n   */\n  beginDrawing() {\n    this.remainingOutlines_ = Object.create(null);\n    for (const key in this.outlines_) {\n      // The value set here isn't used anywhere, we are just using the\n      // object as a Set data structure.\n      this.remainingOutlines_[key] = 1;\n    }\n  }\n\n  /**\n   * Method that's called when the drawer is done drawing.\n   * @package\n   */\n  endDrawing() {\n    // Go through all remaining outlines that were not used this draw pass, and\n    // remove them.\n    if (this.remainingOutlines_) {\n      for (const key in this.remainingOutlines_) {\n        this.removeOutlinePath_(key);\n      }\n    }\n    this.remainingOutlines_ = null;\n  }\n\n  /**\n   * Set the path generated by the renderer for an outline path on the\n   * respective outline path SVG element.\n   * @param {string} name The input name.\n   * @param {string} pathString The path.\n   * @package\n   */\n  setOutlinePath(name, pathString) {\n    const outline = this.getOutlinePath_(name);\n    outline.setAttribute('d', pathString);\n    outline.setAttribute('fill', this.style.colourTertiary);\n  }\n\n  /**\n   * Create's an outline path for the specified input.\n   * @param {string} name The input name.\n   * @return {!SVGElement} The SVG outline path.\n   * @private\n   */\n  getOutlinePath_(name) {\n    if (!this.outlines_[name]) {\n      this.outlines_[name] = dom.createSvgElement(\n          Svg.PATH, {\n            'class': 'blocklyOutlinePath',\n            // IE doesn't like paths without the data definition, set empty\n            // default\n            'd': '',\n          },\n          this.svgRoot);\n    }\n    if (this.remainingOutlines_) {\n      delete this.remainingOutlines_[name];\n    }\n    return this.outlines_[name];\n  }\n\n  /**\n   * Remove an outline path that is associated with the specified input.\n   * @param {string} name The input name.\n   * @private\n   */\n  removeOutlinePath_(name) {\n    this.outlines_[name].parentNode.removeChild(this.outlines_[name]);\n    delete this.outlines_[name];\n  }\n}\n\nexports.PathObject = PathObject;\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Image field.  Used for pictures, icons, etc.\n */\n'use strict';\n\n/**\n * Image field.  Used for pictures, icons, etc.\n * @class\n */\ngoog.module('Blockly.FieldImage');\n\nconst dom = goog.require('Blockly.utils.dom');\nconst fieldRegistry = goog.require('Blockly.fieldRegistry');\nconst parsing = goog.require('Blockly.utils.parsing');\nconst {Field} = goog.require('Blockly.Field');\n/* eslint-disable-next-line no-unused-vars */\nconst {Sentinel} = goog.requireType('Blockly.utils.Sentinel');\nconst {Size} = goog.require('Blockly.utils.Size');\nconst {Svg} = goog.require('Blockly.utils.Svg');\n\n\n/**\n * Class for an image on a block.\n * @extends {Field}\n * @alias Blockly.FieldImage\n */\nclass FieldImage extends Field {\n  /**\n   * @param {string|!Sentinel} src The URL of the image.\n   *     Also accepts Field.SKIP_SETUP if you wish to skip setup (only used by\n   *     subclasses that want to handle configuration and setting the field\n   *     value after their own constructors have run).\n   * @param {!(string|number)} width Width of the image.\n   * @param {!(string|number)} height Height of the image.\n   * @param {string=} opt_alt Optional alt text for when block is collapsed.\n   * @param {function(!FieldImage)=} opt_onClick Optional function to be\n   *     called when the image is clicked. If opt_onClick is defined, opt_alt\n   *     must also be defined.\n   * @param {boolean=} opt_flipRtl Whether to flip the icon in RTL.\n   * @param {Object=} opt_config A map of options used to configure the field.\n   *     See the [field creation documentation]{@link\n   *     https://developers.google.com/blockly/guides/create-custom-blocks/fields/built-in-fields/image#creation}\n   *     for a list of properties this parameter supports.\n   */\n  constructor(\n      src, width, height, opt_alt, opt_onClick, opt_flipRtl, opt_config) {\n    super(Field.SKIP_SETUP);\n\n    // Return early.\n    if (!src) {\n      throw Error('Src value of an image field is required');\n    }\n    const imageHeight = Number(parsing.replaceMessageReferences(height));\n    const imageWidth = Number(parsing.replaceMessageReferences(width));\n    if (isNaN(imageHeight) || isNaN(imageWidth)) {\n      throw Error(\n          'Height and width values of an image field must cast to' +\n          ' numbers.');\n    }\n    if (imageHeight <= 0 || imageWidth <= 0) {\n      throw Error(\n          'Height and width values of an image field must be greater' +\n          ' than 0.');\n    }\n\n    /**\n     * The size of the area rendered by the field.\n     * @type {Size}\n     * @protected\n     * @override\n     */\n    this.size_ = new Size(imageWidth, imageHeight + FieldImage.Y_PADDING);\n\n    /**\n     * Store the image height, since it is different from the field height.\n     * @type {number}\n     * @private\n     */\n    this.imageHeight_ = imageHeight;\n\n    /**\n     * The function to be called when this field is clicked.\n     * @type {?function(!FieldImage)}\n     * @private\n     */\n    this.clickHandler_ = null;\n\n    if (typeof opt_onClick === 'function') {\n      this.clickHandler_ = opt_onClick;\n    }\n\n    /**\n     * The rendered field's image element.\n     * @type {SVGImageElement}\n     * @private\n     */\n    this.imageElement_ = null;\n\n    /**\n     * Editable fields usually show some sort of UI indicating they are\n     * editable. This field should not.\n     * @type {boolean}\n     * @const\n     */\n    this.EDITABLE = false;\n\n    /**\n     * Used to tell if the field needs to be rendered the next time the block is\n     * rendered. Image fields are statically sized, and only need to be\n     * rendered at initialization.\n     * @type {boolean}\n     * @protected\n     */\n    this.isDirty_ = false;\n\n    /**\n     * Whether to flip this image in RTL.\n     * @type {boolean}\n     * @private\n     */\n    this.flipRtl_ = false;\n\n    /**\n     * Alt text of this image.\n     * @type {string}\n     * @private\n     */\n    this.altText_ = '';\n\n    if (src === Field.SKIP_SETUP) return;\n\n    if (opt_config) {\n      this.configure_(opt_config);\n    } else {\n      this.flipRtl_ = !!opt_flipRtl;\n      this.altText_ = parsing.replaceMessageReferences(opt_alt) || '';\n    }\n    this.setValue(parsing.replaceMessageReferences(src));\n  }\n\n  /**\n   * Configure the field based on the given map of options.\n   * @param {!Object} config A map of options to configure the field based on.\n   * @protected\n   * @override\n   */\n  configure_(config) {\n    super.configure_(config);\n    this.flipRtl_ = !!config['flipRtl'];\n    this.altText_ = parsing.replaceMessageReferences(config['alt']) || '';\n  }\n\n  /**\n   * Create the block UI for this image.\n   * @package\n   */\n  initView() {\n    this.imageElement_ = dom.createSvgElement(\n        Svg.IMAGE, {\n          'height': this.imageHeight_ + 'px',\n          'width': this.size_.width + 'px',\n          'alt': this.altText_,\n        },\n        this.fieldGroup_);\n    this.imageElement_.setAttributeNS(\n        dom.XLINK_NS, 'xlink:href', /** @type {string} */ (this.value_));\n\n    if (this.clickHandler_) {\n      this.imageElement_.style.cursor = 'pointer';\n    }\n  }\n\n  /**\n   * @override\n   */\n  updateSize_() {\n    // NOP\n  }\n\n  /**\n   * Ensure that the input value (the source URL) is a string.\n   * @param {*=} opt_newValue The input value.\n   * @return {?string} A string, or null if invalid.\n   * @protected\n   */\n  doClassValidation_(opt_newValue) {\n    if (typeof opt_newValue !== 'string') {\n      return null;\n    }\n    return opt_newValue;\n  }\n\n  /**\n   * Update the value of this image field, and update the displayed image.\n   * @param {*} newValue The value to be saved. The default validator guarantees\n   * that this is a string.\n   * @protected\n   */\n  doValueUpdate_(newValue) {\n    this.value_ = newValue;\n    if (this.imageElement_) {\n      this.imageElement_.setAttributeNS(\n          dom.XLINK_NS, 'xlink:href', String(this.value_));\n    }\n  }\n\n  /**\n   * Get whether to flip this image in RTL\n   * @return {boolean} True if we should flip in RTL.\n   * @override\n   */\n  getFlipRtl() {\n    return this.flipRtl_;\n  }\n\n  /**\n   * Set the alt text of this image.\n   * @param {?string} alt New alt text.\n   * @public\n   */\n  setAlt(alt) {\n    if (alt === this.altText_) {\n      return;\n    }\n    this.altText_ = alt || '';\n    if (this.imageElement_) {\n      this.imageElement_.setAttribute('alt', this.altText_);\n    }\n  }\n\n  /**\n   * If field click is called, and click handler defined,\n   * call the handler.\n   * @protected\n   */\n  showEditor_() {\n    if (this.clickHandler_) {\n      this.clickHandler_(this);\n    }\n  }\n\n  /**\n   * Set the function that is called when this image  is clicked.\n   * @param {?function(!FieldImage)} func The function that is called\n   *    when the image is clicked, or null to remove.\n   */\n  setOnClickHandler(func) {\n    this.clickHandler_ = func;\n  }\n\n  /**\n   * Use the `getText_` developer hook to override the field's text\n   * representation.\n   * Return the image alt text instead.\n   * @return {?string} The image alt text.\n   * @protected\n   * @override\n   */\n  getText_() {\n    return this.altText_;\n  }\n\n  /**\n   * Construct a FieldImage from a JSON arg object,\n   * dereferencing any string table references.\n   * @param {!Object} options A JSON object with options (src, width, height,\n   *    alt, and flipRtl).\n   * @return {!FieldImage} The new field instance.\n   * @package\n   * @nocollapse\n   */\n  static fromJson(options) {\n    // `this` might be a subclass of FieldImage if that class doesn't override\n    // the static fromJson method.\n    return new this(\n        options['src'], options['width'], options['height'], undefined,\n        undefined, undefined, options);\n  }\n}\n\n/**\n * The default value for this field.\n * @type {*}\n * @protected\n */\nFieldImage.prototype.DEFAULT_VALUE = '';\n\n/**\n * Vertical padding below the image, which is included in the reported height of\n * the field.\n * @type {number}\n * @private\n */\nFieldImage.Y_PADDING = 1;\n\nfieldRegistry.register('field_image', FieldImage);\n\nexports.FieldImage = FieldImage;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Zelos specific objects representing elements in a row of a\n * rendered block.\n */\n\n/**\n * Zelos specific objects representing elements in a row of a\n * rendered block.\n * @class\n */\ngoog.module('Blockly.zelos.RightConnectionShape');\n\n/* eslint-disable-next-line no-unused-vars */\nconst {ConstantProvider} = goog.requireType('Blockly.blockRendering.ConstantProvider');\nconst {Measurable} = goog.require('Blockly.blockRendering.Measurable');\nconst {Types} = goog.require('Blockly.blockRendering.Types');\n\n\n/**\n * An object containing information about the space a right connection shape\n * takes up during rendering.\n * @extends {Measurable}\n * @alias Blockly.zelos.RightConnectionShape\n */\nclass RightConnectionShape extends Measurable {\n  /**\n   * @param {!ConstantProvider} constants The rendering\n   *   constants provider.\n   * @package\n   */\n  constructor(constants) {\n    super(constants);\n    this.type |= Types.getType('RIGHT_CONNECTION');\n    // Size is dynamic\n    this.height = 0;\n    this.width = 0;\n  }\n}\n\nexports.RightConnectionShape = RightConnectionShape;\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Zelos specific objects representing inputs with connections on\n * a rendered block.\n */\n\n/**\n * Zelos specific objects representing inputs with connections on\n * a rendered block.\n * @class\n */\ngoog.module('Blockly.zelos.StatementInput');\n\n/* eslint-disable-next-line no-unused-vars */\nconst {ConstantProvider} = goog.requireType('Blockly.blockRendering.ConstantProvider');\n/* eslint-disable-next-line no-unused-vars */\nconst {Input} = goog.requireType('Blockly.Input');\nconst {StatementInput: BaseStatementInput} = goog.require('Blockly.blockRendering.StatementInput');\n\n\n/**\n * An object containing information about the space a statement input takes up\n * during rendering.\n * @extends {BaseStatementInput}\n * @alias Blockly.zelos.StatementInput\n */\nclass StatementInput extends BaseStatementInput {\n  /**\n   * @param {!ConstantProvider} constants The rendering constants provider.\n   * @param {!Input} input The statement input to measure and store information\n   *    for.\n   * @package\n   */\n  constructor(constants, input) {\n    super(constants, input);\n\n    if (this.connectedBlock) {\n      // Find the bottom-most connected block in the stack.\n      let block = this.connectedBlock;\n      let nextBlock;\n      while ((nextBlock = block.getNextBlock())) {\n        block = nextBlock;\n      }\n      if (!block.nextConnection) {\n        this.height = this.connectedBlockHeight;\n        this.connectedBottomNextConnection = true;\n      }\n    }\n  }\n}\n\nexports.StatementInput = StatementInput;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview An object representing the top row of a rendered block.\n */\n'use strict';\n\n/**\n * An object representing the top row of a rendered block.\n * @class\n */\ngoog.module('Blockly.zelos.TopRow');\n\n/* eslint-disable-next-line no-unused-vars */\nconst {ConstantProvider} = goog.requireType('Blockly.blockRendering.ConstantProvider');\nconst {TopRow: BaseTopRow} = goog.require('Blockly.blockRendering.TopRow');\n\n\n/**\n * An object containing information about what elements are in the top row of a\n * block as well as sizing information for the top row.\n * Elements in a top row can consist of corners, hats, spacers, and previous\n * connections.\n * After this constructor is called, the row will contain all non-spacer\n * elements it needs.\n * @extends {BaseTopRow}\n * @alias Blockly.zelos.TopRow\n */\nclass TopRow extends BaseTopRow {\n  /**\n   * @param {!ConstantProvider} constants The rendering\n   *   constants provider.\n   * @package\n   */\n  constructor(constants) {\n    super(constants);\n  }\n\n  /**\n   * @override\n   */\n  endsWithElemSpacer() {\n    return false;\n  }\n\n  /**\n   * Render a round corner unless the block has an output connection.\n   * @override\n   */\n  hasLeftSquareCorner(block) {\n    const hasHat =\n        (block.hat ? block.hat === 'cap' : this.constants_.ADD_START_HATS) &&\n        !block.outputConnection && !block.previousConnection;\n    return !!block.outputConnection || hasHat;\n  }\n\n  /**\n   * Render a round corner unless the block has an output connection.\n   * @override\n   */\n  hasRightSquareCorner(block) {\n    return !!block.outputConnection && !block.statementInputCount &&\n        !block.nextConnection;\n  }\n}\n\nexports.TopRow = TopRow;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Makecode/scratch-style renderer.\n * Zelos: spirit of eager rivalry, emulation, envy, jealousy, and zeal.\n */\n'use strict';\n\n/**\n * Makecode/scratch-style renderer.\n * @class\n */\ngoog.module('Blockly.zelos.RenderInfo');\n\nconst {Align} = goog.require('Blockly.Input');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockSvg} = goog.requireType('Blockly.BlockSvg');\nconst {BottomRow} = goog.require('Blockly.zelos.BottomRow');\n/* eslint-disable-next-line no-unused-vars */\nconst {ConstantProvider} = goog.requireType('Blockly.zelos.ConstantProvider');\nconst {Field} = goog.require('Blockly.blockRendering.Field');\nconst {FieldImage} = goog.require('Blockly.FieldImage');\nconst {FieldLabel} = goog.require('Blockly.FieldLabel');\nconst {FieldTextInput} = goog.require('Blockly.FieldTextInput');\n/* eslint-disable-next-line no-unused-vars */\nconst {Input} = goog.requireType('Blockly.Input');\nconst {InputConnection} = goog.require('Blockly.blockRendering.InputConnection');\nconst {InRowSpacer} = goog.require('Blockly.blockRendering.InRowSpacer');\n/* eslint-disable-next-line no-unused-vars */\nconst {Measurable} = goog.requireType('Blockly.blockRendering.Measurable');\nconst {RenderInfo: BaseRenderInfo} = goog.require('Blockly.blockRendering.RenderInfo');\n/* eslint-disable-next-line no-unused-vars */\nconst {Renderer} = goog.requireType('Blockly.zelos.Renderer');\nconst {RightConnectionShape} = goog.require('Blockly.zelos.RightConnectionShape');\n/* eslint-disable-next-line no-unused-vars */\nconst {Row} = goog.require('Blockly.blockRendering.Row');\n/* eslint-disable-next-line no-unused-vars */\nconst {SpacerRow} = goog.requireType('Blockly.blockRendering.SpacerRow');\nconst {StatementInput} = goog.require('Blockly.zelos.StatementInput');\nconst {TopRow} = goog.require('Blockly.zelos.TopRow');\nconst {Types} = goog.require('Blockly.blockRendering.Types');\nconst {inputTypes} = goog.require('Blockly.inputTypes');\n\n\n/**\n * An object containing all sizing information needed to draw this block.\n *\n * This measure pass does not propagate changes to the block (although fields\n * may choose to rerender when getSize() is called).  However, calling it\n * repeatedly may be expensive.\n * @extends {BaseRenderInfo}\n * @alias Blockly.zelos.RenderInfo\n */\nclass RenderInfo extends BaseRenderInfo {\n  /**\n   * @param {!Renderer} renderer The renderer in use.\n   * @param {!BlockSvg} block The block to measure.\n   * @package\n   */\n  constructor(renderer, block) {\n    super(renderer, block);\n\n    /** @type {!ConstantProvider} */\n    this.constants_;\n\n    /**\n     * An object with rendering information about the top row of the block.\n     * @type {!TopRow}\n     * @override\n     */\n    this.topRow = new TopRow(this.constants_);\n\n    /**\n     * An object with rendering information about the bottom row of the block.\n     * @type {!BottomRow}\n     * @override\n     */\n    this.bottomRow = new BottomRow(this.constants_);\n\n    /**\n     * @override\n     */\n    this.isInline = true;\n\n    /**\n     * Whether the block should be rendered as a multi-line block, either\n     * because it's not inline or because it has been collapsed.\n     * @type {boolean}\n     */\n    this.isMultiRow = !block.getInputsInline() || block.isCollapsed();\n\n    /**\n     * Whether or not the block has a statement input in one of its rows.\n     * @type {boolean}\n     */\n    this.hasStatementInput = block.statementInputCount > 0;\n\n    /**\n     * An object with rendering information about the right connection shape.\n     * @type {RightConnectionShape}\n     */\n    this.rightSide = this.outputConnection ?\n        new RightConnectionShape(this.constants_) :\n        null;\n\n    /**\n     * A map of rows to right aligned dummy inputs within those rows. Used to\n     * add padding between left and right aligned inputs.\n     * @type {!WeakMap<!Row, !Input>}\n     * @private\n     */\n    this.rightAlignedDummyInputs_ = new WeakMap();\n  }\n\n  /**\n   * Get the block renderer in use.\n   * @return {!Renderer} The block renderer in use.\n   * @package\n   */\n  getRenderer() {\n    return /** @type {!Renderer} */ (this.renderer_);\n  }\n\n  /**\n   * @override\n   */\n  measure() {\n    // Modifying parent measure method to add `adjustXPosition_`.\n    this.createRows_();\n    this.addElemSpacing_();\n    this.addRowSpacing_();\n    this.adjustXPosition_();\n    this.computeBounds_();\n    this.alignRowElements_();\n    this.finalize_();\n  }\n\n  /**\n   * @override\n   */\n  shouldStartNewRow_(input, lastInput) {\n    // If this is the first input, just add to the existing row.\n    // That row is either empty or has some icons in it.\n    if (!lastInput) {\n      return false;\n    }\n    // A statement input or an input following one always gets a new row.\n    if (input.type === inputTypes.STATEMENT ||\n        lastInput.type === inputTypes.STATEMENT) {\n      return true;\n    }\n    // Value and dummy inputs get new row if inputs are not inlined.\n    if (input.type === inputTypes.VALUE || input.type === inputTypes.DUMMY) {\n      return !this.isInline || this.isMultiRow;\n    }\n    return false;\n  }\n\n  /**\n   * @override\n   */\n  getDesiredRowWidth_(row) {\n    if (row.hasStatement) {\n      const rightCornerWidth = this.constants_.INSIDE_CORNERS.rightWidth || 0;\n      return this.width - this.startX - rightCornerWidth;\n    }\n    return super.getDesiredRowWidth_(row);\n  }\n\n  /**\n   * @override\n   */\n  getInRowSpacing_(prev, next) {\n    if (!prev || !next) {\n      // No need for padding at the beginning or end of the row if the\n      // output shape is dynamic.\n      if (this.outputConnection && this.outputConnection.isDynamicShape &&\n          !this.hasStatementInput && !this.bottomRow.hasNextConnection) {\n        return this.constants_.NO_PADDING;\n      }\n    }\n    if (!prev) {\n      // Statement input padding.\n      if (next && Types.isStatementInput(next)) {\n        return this.constants_.STATEMENT_INPUT_PADDING_LEFT;\n      }\n    }\n    // Spacing between a rounded corner and a previous or next connection.\n    if (prev && Types.isLeftRoundedCorner(prev) && next) {\n      if (Types.isPreviousConnection(next) || Types.isNextConnection(next)) {\n        return next.notchOffset - this.constants_.CORNER_RADIUS;\n      }\n    }\n    // Spacing between a square corner and a hat.\n    if (prev && Types.isLeftSquareCorner(prev) && next && Types.isHat(next)) {\n      return this.constants_.NO_PADDING;\n    }\n    return this.constants_.MEDIUM_PADDING;\n  }\n\n  /**\n   * @override\n   */\n  getSpacerRowHeight_(prev, next) {\n    // If we have an empty block add a spacer to increase the height.\n    if (Types.isTopRow(prev) && Types.isBottomRow(next)) {\n      return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;\n    }\n    const followsStatement = Types.isInputRow(prev) && prev.hasStatement;\n    const precedesStatement = Types.isInputRow(next) && next.hasStatement;\n    if (precedesStatement || followsStatement) {\n      const cornerHeight = this.constants_.INSIDE_CORNERS.rightHeight || 0;\n      const height = Math.max(this.constants_.NOTCH_HEIGHT, cornerHeight);\n      return precedesStatement && followsStatement ?\n          Math.max(height, this.constants_.DUMMY_INPUT_MIN_HEIGHT) :\n          height;\n    }\n    // Top and bottom rows act as a spacer so we don't need any extra padding.\n    if (Types.isTopRow(prev)) {\n      const topRow = /** @type {!TopRow} */ (prev);\n      if (!topRow.hasPreviousConnection &&\n          (!this.outputConnection || this.hasStatementInput)) {\n        return Math.abs(\n            this.constants_.NOTCH_HEIGHT - this.constants_.CORNER_RADIUS);\n      }\n      return this.constants_.NO_PADDING;\n    }\n    if (Types.isBottomRow(next)) {\n      const bottomRow = /** @type {!BottomRow} */ (next);\n      if (!this.outputConnection) {\n        const topHeight = Math.max(\n                              this.topRow.minHeight,\n                              Math.max(\n                                  this.constants_.NOTCH_HEIGHT,\n                                  this.constants_.CORNER_RADIUS)) -\n            this.constants_.CORNER_RADIUS;\n        return topHeight;\n      } else if (!bottomRow.hasNextConnection && this.hasStatementInput) {\n        return Math.abs(\n            this.constants_.NOTCH_HEIGHT - this.constants_.CORNER_RADIUS);\n      }\n      return this.constants_.NO_PADDING;\n    }\n    return this.constants_.MEDIUM_PADDING;\n  }\n\n  /**\n   * @override\n   */\n  getSpacerRowWidth_(prev, next) {\n    const width = this.width - this.startX;\n    if ((Types.isInputRow(prev) && prev.hasStatement) ||\n        (Types.isInputRow(next) && next.hasStatement)) {\n      return Math.max(width, this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH);\n    }\n    return width;\n  }\n\n  /**\n   * @override\n   */\n  getElemCenterline_(row, elem) {\n    if (row.hasStatement && !Types.isSpacer(elem) &&\n        !Types.isStatementInput(elem)) {\n      return row.yPos + this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT / 2;\n    }\n    if (Types.isInlineInput(elem) && elem instanceof InputConnection) {\n      const connectedBlock = elem.connectedBlock;\n      if (connectedBlock && connectedBlock.outputConnection &&\n          connectedBlock.nextConnection) {\n        return row.yPos + connectedBlock.height / 2;\n      }\n    }\n    return super.getElemCenterline_(row, elem);\n  }\n\n  /**\n   * @override\n   */\n  addInput_(input, activeRow) {\n    // If we have two dummy inputs on the same row, one aligned left and the\n    // other right, keep track of the right aligned dummy input so we can add\n    // padding later.\n    if (input.type === inputTypes.DUMMY && activeRow.hasDummyInput &&\n        activeRow.align === Align.LEFT && input.align === Align.RIGHT) {\n      this.rightAlignedDummyInputs_.set(activeRow, input);\n    } else if (input.type === inputTypes.STATEMENT) {\n      // Handle statements without next connections correctly.\n      activeRow.elements.push(new StatementInput(this.constants_, input));\n      activeRow.hasStatement = true;\n\n      if (activeRow.align === null) {\n        activeRow.align = input.align;\n      }\n      return;\n    }\n    super.addInput_(input, activeRow);\n  }\n\n  /**\n   * @override\n   */\n  addAlignmentPadding_(row, missingSpace) {\n    if (this.rightAlignedDummyInputs_.get(row)) {\n      let alignmentDivider;\n      for (let i = 0; i < row.elements.length; i++) {\n        const elem = row.elements[i];\n        if (Types.isSpacer(elem)) {\n          alignmentDivider = elem;\n        }\n        if (Types.isField(elem) && elem instanceof Field &&\n            elem.parentInput === this.rightAlignedDummyInputs_.get(row)) {\n          break;\n        }\n      }\n      if (alignmentDivider) {\n        alignmentDivider.width += missingSpace;\n        row.width += missingSpace;\n        return;\n      }\n    }\n    super.addAlignmentPadding_(row, missingSpace);\n  }\n\n  /**\n   * Adjust the x position of fields to bump all non-label fields in the first\n   * row past the notch position.  This must be called before ``computeBounds``\n   * is called.\n   * @protected\n   */\n  adjustXPosition_() {\n    const notchTotalWidth =\n        this.constants_.NOTCH_OFFSET_LEFT + this.constants_.NOTCH_WIDTH;\n    let minXPos = notchTotalWidth;\n    // Run through every input row on the block and only apply bump logic to the\n    // first input row (if the block has prev connection) and every input row\n    // that has a prev and next notch.\n    for (let i = 2; i < this.rows.length - 1; i += 2) {\n      const prevSpacer = /** @type {!SpacerRow} */ (this.rows[i - 1]);\n      const row = this.rows[i];\n      const nextSpacer = /** @type {!SpacerRow} */ (this.rows[i + 1]);\n\n      const hasPrevNotch = i === 2 ? !!this.topRow.hasPreviousConnection :\n                                     !!prevSpacer.followsStatement;\n      const hasNextNotch = i + 2 >= this.rows.length - 1 ?\n          !!this.bottomRow.hasNextConnection :\n          !!nextSpacer.precedesStatement;\n\n      if (Types.isInputRow(row) && row.hasStatement) {\n        row.measure();\n        minXPos = row.width - row.getLastInput().width + notchTotalWidth;\n      } else if (\n          hasPrevNotch && (i === 2 || hasNextNotch) && Types.isInputRow(row) &&\n          !row.hasStatement) {\n        let xCursor = row.xPos;\n        let prevInRowSpacer = null;\n        for (let j = 0; j < row.elements.length; j++) {\n          const elem = row.elements[j];\n          if (Types.isSpacer(elem)) {\n            prevInRowSpacer = elem;\n          }\n          if (prevInRowSpacer && (Types.isField(elem) || Types.isInput(elem))) {\n            if (xCursor < minXPos &&\n                !(Types.isField(elem) && elem instanceof Field &&\n                  (elem.field instanceof FieldLabel ||\n                   elem.field instanceof FieldImage))) {\n              const difference = minXPos - xCursor;\n              prevInRowSpacer.width += difference;\n            }\n          }\n          xCursor += elem.width;\n        }\n      }\n    }\n  }\n\n  /**\n   * Finalize the output connection info.  In particular, set the height of the\n   * output connection to match that of the block.  For the right side, add a\n   * right connection shape element and have it match the dimensions of the\n   * output connection.\n   * @protected\n   */\n  finalizeOutputConnection_() {\n    // Dynamic output connections depend on the height of the block.\n    if (!this.outputConnection || !this.outputConnection.isDynamicShape) {\n      return;\n    }\n    let yCursor = 0;\n    // Determine the block height.\n    for (let i = 0; i < this.rows.length; i++) {\n      const row = this.rows[i];\n      row.yPos = yCursor;\n      yCursor += row.height;\n    }\n    this.height = yCursor;\n\n    // Adjust the height of the output connection.\n    const blockHeight = this.bottomRow.hasNextConnection ?\n        this.height - this.bottomRow.descenderHeight :\n        this.height;\n    const connectionHeight = this.outputConnection.shape.height(blockHeight);\n    const connectionWidth = this.outputConnection.shape.width(blockHeight);\n\n    this.outputConnection.height = connectionHeight;\n    this.outputConnection.width = connectionWidth;\n    this.outputConnection.startX = connectionWidth;\n    this.outputConnection.connectionOffsetY =\n        this.outputConnection.shape.connectionOffsetY(connectionHeight);\n    this.outputConnection.connectionOffsetX =\n        this.outputConnection.shape.connectionOffsetX(connectionWidth);\n\n    // Add the right connection measurable.\n    // Don't add it if we have a value-to-statement or a value-to-stack block.\n    let rightConnectionWidth = 0;\n    if (!this.hasStatementInput && !this.bottomRow.hasNextConnection) {\n      rightConnectionWidth = connectionWidth;\n      this.rightSide.height = connectionHeight;\n      this.rightSide.width = rightConnectionWidth;\n      this.rightSide.centerline = connectionHeight / 2;\n      this.rightSide.xPos = this.width + rightConnectionWidth;\n    }\n    this.startX = connectionWidth;\n    this.width += connectionWidth + rightConnectionWidth;\n    this.widthWithChildren += connectionWidth + rightConnectionWidth;\n  }\n\n  /**\n   * Finalize horizontal alignment of elements on the block.  In particular,\n   * reduce the implicit spacing created by the left and right output connection\n   * shapes by adding setting negative spacing onto the leftmost and rightmost\n   * spacers.\n   * @protected\n   */\n  finalizeHorizontalAlignment_() {\n    if (!this.outputConnection || this.hasStatementInput ||\n        this.bottomRow.hasNextConnection) {\n      return;\n    }\n    let totalNegativeSpacing = 0;\n    for (let i = 0; i < this.rows.length; i++) {\n      const row = this.rows[i];\n      if (!Types.isInputRow(row)) {\n        continue;\n      }\n      const firstElem = row.elements[1];\n      const lastElem = row.elements[row.elements.length - 2];\n      let leftNegPadding = this.getNegativeSpacing_(firstElem);\n      let rightNegPadding = this.getNegativeSpacing_(lastElem);\n      totalNegativeSpacing = leftNegPadding + rightNegPadding;\n      const minBlockWidth =\n          this.constants_.MIN_BLOCK_WIDTH + this.outputConnection.width * 2;\n      if (this.width - totalNegativeSpacing < minBlockWidth) {\n        // Maintain a minimum block width, split negative spacing between left\n        // and right edge.\n        totalNegativeSpacing = this.width - minBlockWidth;\n        leftNegPadding = totalNegativeSpacing / 2;\n        rightNegPadding = totalNegativeSpacing / 2;\n      }\n      // Add a negative spacer on the start and end of the block.\n      row.elements.unshift(new InRowSpacer(this.constants_, -leftNegPadding));\n      row.elements.push(new InRowSpacer(this.constants_, -rightNegPadding));\n    }\n    if (totalNegativeSpacing) {\n      this.width -= totalNegativeSpacing;\n      this.widthWithChildren -= totalNegativeSpacing;\n      this.rightSide.xPos -= totalNegativeSpacing;\n      for (let i = 0; i < this.rows.length; i++) {\n        const row = this.rows[i];\n        if (Types.isTopOrBottomRow(row)) {\n          row.elements[1].width -= totalNegativeSpacing;\n        }\n        row.width -= totalNegativeSpacing;\n        row.widthWithConnectedBlocks -= totalNegativeSpacing;\n      }\n    }\n  }\n\n  /**\n   * Calculate the spacing to reduce the left and right edges by based on the\n   * outer and inner connection shape.\n   * @param {Measurable} elem The first or last element on\n   *     a block.\n   * @return {number} The amount of spacing to reduce the first or last spacer.\n   * @protected\n   */\n  getNegativeSpacing_(elem) {\n    if (!elem) {\n      return 0;\n    }\n    const connectionWidth = this.outputConnection.width;\n    const outerShape = this.outputConnection.shape.type;\n    const constants =\n        /** @type {!ConstantProvider} */ (this.constants_);\n    if (this.isMultiRow && this.inputRows.length > 1) {\n      switch (outerShape) {\n        case constants.SHAPES.ROUND: {\n          // Special case for multi-row round reporter blocks.\n          const maxWidth = this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;\n          const width = this.height / 2 > maxWidth ? maxWidth : this.height / 2;\n          const topPadding = this.constants_.SMALL_PADDING;\n          const roundPadding =\n              width * (1 - Math.sin(Math.acos((width - topPadding) / width)));\n          return connectionWidth - roundPadding;\n        }\n        default:\n          return 0;\n      }\n    }\n    if (Types.isInlineInput(elem) && elem instanceof InputConnection) {\n      const connectedBlock = elem.connectedBlock;\n      const innerShape = connectedBlock ?\n          connectedBlock.pathObject.outputShapeType :\n          elem.shape.type;\n      // Special case for value to stack / value to statement blocks.\n      if (connectedBlock && connectedBlock.outputConnection &&\n          (connectedBlock.statementInputCount ||\n           connectedBlock.nextConnection)) {\n        return 0;\n      }\n      // Special case for hexagonal output.\n      if (outerShape === constants.SHAPES.HEXAGONAL &&\n          outerShape !== innerShape) {\n        return 0;\n      }\n      return connectionWidth -\n          this.constants_.SHAPE_IN_SHAPE_PADDING[outerShape][innerShape];\n    } else if (Types.isField(elem) && elem instanceof Field) {\n      // Special case for text inputs.\n      if (outerShape === constants.SHAPES.ROUND &&\n          elem.field instanceof FieldTextInput) {\n        return connectionWidth - (2.75 * constants.GRID_UNIT);\n      }\n      return connectionWidth -\n          this.constants_.SHAPE_IN_SHAPE_PADDING[outerShape][0];\n    } else if (Types.isIcon(elem)) {\n      return this.constants_.SMALL_PADDING;\n    }\n    return 0;\n  }\n\n  /**\n   * Finalize vertical alignment of rows on a block.  In particular, reduce the\n   * implicit spacing when a non-shadow block is connected to any of an input\n   * row's inline inputs.\n   * @protected\n   */\n  finalizeVerticalAlignment_() {\n    if (this.outputConnection) {\n      return;\n    }\n    // Run through every input row on the block and only apply tight nesting\n    // logic to input rows that have a prev and next notch.\n    for (let i = 2; i < this.rows.length - 1; i += 2) {\n      const prevSpacer = /** @type {!SpacerRow} */ (this.rows[i - 1]);\n      const row = this.rows[i];\n      const nextSpacer = /** @type {!SpacerRow} */ (this.rows[i + 1]);\n\n      const firstRow = i === 2;\n      const hasPrevNotch = firstRow ? !!this.topRow.hasPreviousConnection :\n                                      !!prevSpacer.followsStatement;\n      const hasNextNotch = i + 2 >= this.rows.length - 1 ?\n          !!this.bottomRow.hasNextConnection :\n          !!nextSpacer.precedesStatement;\n\n      if (hasPrevNotch) {\n        const elem = row.elements[1];\n        const hasSingleTextOrImageField = row.elements.length === 3 &&\n            elem instanceof Field &&\n            (elem.field instanceof FieldLabel ||\n             elem.field instanceof FieldImage);\n        if (!firstRow && hasSingleTextOrImageField) {\n          // Remove some padding if we have a single image or text field.\n          prevSpacer.height -= this.constants_.SMALL_PADDING;\n          nextSpacer.height -= this.constants_.SMALL_PADDING;\n          row.height -= this.constants_.MEDIUM_PADDING;\n        } else if (!firstRow && !hasNextNotch) {\n          // Add a small padding so the notch doesn't clash with inputs/fields.\n          prevSpacer.height += this.constants_.SMALL_PADDING;\n        } else if (hasNextNotch) {\n          // Determine if the input row has non-shadow connected blocks.\n          let hasNonShadowConnectedBlocks = false;\n          const minVerticalTightNestingHeight = 40;\n          for (let j = 0; j < row.elements.length; j++) {\n            const elem = row.elements[j];\n            if (elem instanceof InputConnection && Types.isInlineInput(elem) &&\n                elem.connectedBlock && !elem.connectedBlock.isShadow() &&\n                elem.connectedBlock.getHeightWidth().height >=\n                    minVerticalTightNestingHeight) {\n              hasNonShadowConnectedBlocks = true;\n              break;\n            }\n          }\n          // Apply tight-nesting if we have both a prev and next notch and the\n          // block has non-shadow connected blocks.\n          if (hasNonShadowConnectedBlocks) {\n            prevSpacer.height -= this.constants_.SMALL_PADDING;\n            nextSpacer.height -= this.constants_.SMALL_PADDING;\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   * @override\n   */\n  finalize_() {\n    this.finalizeOutputConnection_();\n    this.finalizeHorizontalAlignment_();\n    this.finalizeVerticalAlignment_();\n    super.finalize_();\n\n    if (this.rightSide) {\n      this.widthWithChildren += this.rightSide.width;\n    }\n  }\n}\n\nexports.RenderInfo = RenderInfo;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Zelos renderer.\n */\n'use strict';\n\n/**\n * Zelos renderer.\n * @class\n */\ngoog.module('Blockly.zelos.Renderer');\n\nconst blockRendering = goog.require('Blockly.blockRendering');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockSvg} = goog.requireType('Blockly.BlockSvg');\nconst {ConnectionType} = goog.require('Blockly.ConnectionType');\nconst {ConstantProvider} = goog.require('Blockly.zelos.ConstantProvider');\nconst {Drawer} = goog.require('Blockly.zelos.Drawer');\nconst {InsertionMarkerManager} = goog.require('Blockly.InsertionMarkerManager');\nconst {MarkerSvg} = goog.require('Blockly.zelos.MarkerSvg');\n/* eslint-disable-next-line no-unused-vars */\nconst {Marker} = goog.requireType('Blockly.Marker');\nconst {PathObject} = goog.require('Blockly.zelos.PathObject');\n/* eslint-disable-next-line no-unused-vars */\nconst {RenderInfo: BaseRenderInfo} = goog.requireType('Blockly.blockRendering.RenderInfo');\nconst {RenderInfo} = goog.require('Blockly.zelos.RenderInfo');\nconst {Renderer: BaseRenderer} = goog.require('Blockly.blockRendering.Renderer');\n/* eslint-disable-next-line no-unused-vars */\nconst {Theme} = goog.requireType('Blockly.Theme');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceSvg} = goog.requireType('Blockly.WorkspaceSvg');\n\n\n/**\n * The zelos renderer.\n * @extends {BaseRenderer}\n * @alias Blockly.zelos.Renderer\n */\nclass Renderer extends BaseRenderer {\n  /**\n   * @param {string} name The renderer name.\n   * @package\n   */\n  constructor(name) {\n    super(name);\n  }\n\n  /**\n   * Create a new instance of the renderer's constant provider.\n   * @return {!ConstantProvider} The constant provider.\n   * @protected\n   * @override\n   */\n  makeConstants_() {\n    return new ConstantProvider();\n  }\n\n  /**\n   * Create a new instance of the renderer's render info object.\n   * @param {!BlockSvg} block The block to measure.\n   * @return {!RenderInfo} The render info object.\n   * @protected\n   * @override\n   */\n  makeRenderInfo_(block) {\n    return new RenderInfo(this, block);\n  }\n\n  /**\n   * Create a new instance of the renderer's drawer.\n   * @param {!BlockSvg} block The block to render.\n   * @param {!BaseRenderInfo} info An object containing all\n   *   information needed to render this block.\n   * @return {!Drawer} The drawer.\n   * @protected\n   * @override\n   */\n  makeDrawer_(block, info) {\n    return new Drawer(\n        block,\n        /** @type {!RenderInfo} */ (info));\n  }\n\n  /**\n   * Create a new instance of the renderer's cursor drawer.\n   * @param {!WorkspaceSvg} workspace The workspace the cursor belongs to.\n   * @param {!Marker} marker The marker.\n   * @return {!MarkerSvg} The object in charge of drawing\n   *     the marker.\n   * @package\n   * @override\n   */\n  makeMarkerDrawer(workspace, marker) {\n    return new MarkerSvg(workspace, this.getConstants(), marker);\n  }\n\n  /**\n   * Create a new instance of a renderer path object.\n   * @param {!SVGElement} root The root SVG element.\n   * @param {!Theme.BlockStyle} style The style object to use for\n   *     colouring.\n   * @return {!PathObject} The renderer path object.\n   * @package\n   * @override\n   */\n  makePathObject(root, style) {\n    return new PathObject(\n        root, style,\n        /** @type {!ConstantProvider} */ (this.getConstants()));\n  }\n\n  /**\n   * @override\n   */\n  shouldHighlightConnection(conn) {\n    return conn.type !== ConnectionType.INPUT_VALUE &&\n        conn.type !== ConnectionType.OUTPUT_VALUE;\n  }\n\n  /**\n   * @override\n   */\n  getConnectionPreviewMethod(closest, local, topBlock) {\n    if (local.type === ConnectionType.OUTPUT_VALUE) {\n      if (!closest.isConnected()) {\n        return InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE;\n      }\n      // TODO: Returning this is a total hack, because we don't want to show\n      //   a replacement fade, we want to show an outline affect.\n      //   Sadly zelos does not support showing an outline around filled\n      //   inputs, so we have to pretend like the connected block is getting\n      //   replaced.\n      return InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE;\n    }\n\n    return super.getConnectionPreviewMethod(closest, local, topBlock);\n  }\n}\n\nblockRendering.register('zelos', Renderer);\n\nexports.Renderer = Renderer;\n","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Re-exports of Blockly.zelos.* modules.\n */\n'use strict';\n\n/**\n * Re-exports of Blockly.zelos.* modules.\n * @namespace Blockly.zelos\n */\ngoog.module('Blockly.zelos');\n\nconst {BottomRow} = goog.require('Blockly.zelos.BottomRow');\nconst {ConstantProvider} = goog.require('Blockly.zelos.ConstantProvider');\nconst {Drawer} = goog.require('Blockly.zelos.Drawer');\nconst {MarkerSvg} = goog.require('Blockly.zelos.MarkerSvg');\nconst {PathObject} = goog.require('Blockly.zelos.PathObject');\nconst {RenderInfo} = goog.require('Blockly.zelos.RenderInfo');\nconst {Renderer} = goog.require('Blockly.zelos.Renderer');\nconst {RightConnectionShape} = goog.require('Blockly.zelos.RightConnectionShape');\nconst {StatementInput} = goog.require('Blockly.zelos.StatementInput');\nconst {TopRow} = goog.require('Blockly.zelos.TopRow');\n\nexports.BottomRow = BottomRow;\nexports.ConstantProvider = ConstantProvider;\nexports.Drawer = Drawer;\nexports.MarkerSvg = MarkerSvg;\nexports.PathObject = PathObject;\nexports.RenderInfo = RenderInfo;\nexports.Renderer = Renderer;\nexports.RightConnectionShape = RightConnectionShape;\nexports.StatementInput = StatementInput;\nexports.TopRow = TopRow;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview New (evolving) renderer.\n * Thrasos: spirit of boldness.\n */\n'use strict';\n\n/**\n * New (evolving) renderer.\n * Thrasos: spirit of boldness.\n * @class\n */\ngoog.module('Blockly.thrasos.RenderInfo');\n\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockSvg} = goog.requireType('Blockly.BlockSvg');\n/* eslint-disable-next-line no-unused-vars */\nconst {BottomRow} = goog.requireType('Blockly.blockRendering.BottomRow');\n/* eslint-disable-next-line no-unused-vars */\nconst {Field} = goog.requireType('Blockly.blockRendering.Field');\nconst {InRowSpacer} = goog.require('Blockly.blockRendering.InRowSpacer');\nconst {RenderInfo: BaseRenderInfo} = goog.require('Blockly.blockRendering.RenderInfo');\n/* eslint-disable-next-line no-unused-vars */\nconst {Renderer} = goog.requireType('Blockly.thrasos.Renderer');\n/* eslint-disable-next-line no-unused-vars */\nconst {TopRow} = goog.requireType('Blockly.blockRendering.TopRow');\nconst {Types} = goog.require('Blockly.blockRendering.Types');\n\n\n/**\n * An object containing all sizing information needed to draw this block.\n *\n * This measure pass does not propagate changes to the block (although fields\n * may choose to rerender when getSize() is called).  However, calling it\n * repeatedly may be expensive.\n * @extends {BaseRenderInfo}\n * @alias Blockly.thrasos.RenderInfo\n */\nclass RenderInfo extends BaseRenderInfo {\n  /**\n   * @param {!Renderer} renderer The renderer in use.\n   * @param {!BlockSvg} block The block to measure.\n   * @package\n   */\n  constructor(renderer, block) {\n    super(renderer, block);\n  }\n\n  /**\n   * Get the block renderer in use.\n   * @return {!Renderer} The block renderer in use.\n   * @package\n   */\n  getRenderer() {\n    return /** @type {!Renderer} */ (this.renderer_);\n  }\n\n  /**\n   * @override\n   */\n  addElemSpacing_() {\n    let hasExternalInputs = false;\n    for (let i = 0; i < this.rows.length; i++) {\n      const row = this.rows[i];\n      if (row.hasExternalInput) {\n        hasExternalInputs = true;\n        break;\n      }\n    }\n    for (let i = 0; i < this.rows.length; i++) {\n      const row = this.rows[i];\n      const oldElems = row.elements;\n      row.elements = [];\n      // No spacing needed before the corner on the top row or the bottom row.\n      if (row.startsWithElemSpacer()) {\n        // There's a spacer before the first element in the row.\n        row.elements.push(new InRowSpacer(\n            this.constants_, this.getInRowSpacing_(null, oldElems[0])));\n      }\n      for (let e = 0; e < oldElems.length - 1; e++) {\n        row.elements.push(oldElems[e]);\n        const spacing = this.getInRowSpacing_(oldElems[e], oldElems[e + 1]);\n        row.elements.push(new InRowSpacer(this.constants_, spacing));\n      }\n      row.elements.push(oldElems[oldElems.length - 1]);\n      if (row.endsWithElemSpacer()) {\n        let spacing =\n            this.getInRowSpacing_(oldElems[oldElems.length - 1], null);\n        if (hasExternalInputs && row.hasDummyInput) {\n          spacing += this.constants_.TAB_WIDTH;\n        }\n        // There's a spacer after the last element in the row.\n        row.elements.push(new InRowSpacer(this.constants_, spacing));\n      }\n    }\n  }\n\n  /**\n   * @override\n   */\n  getInRowSpacing_(prev, next) {\n    if (!prev) {\n      // Between an editable field and the beginning of the row.\n      if (next && Types.isField(next) &&\n          (/** @type {Field} */ (next)).isEditable) {\n        return this.constants_.MEDIUM_PADDING;\n      }\n      // Inline input at the beginning of the row.\n      if (next && Types.isInlineInput(next)) {\n        return this.constants_.MEDIUM_LARGE_PADDING;\n      }\n      if (next && Types.isStatementInput(next)) {\n        return this.constants_.STATEMENT_INPUT_PADDING_LEFT;\n      }\n      // Anything else at the beginning of the row.\n      return this.constants_.LARGE_PADDING;\n    }\n\n    // Spacing between a non-input and the end of the row.\n    if (!Types.isInput(prev) && !next) {\n      // Between an editable field and the end of the row.\n      if (Types.isField(prev) && (/** @type {Field} */ (prev)).isEditable) {\n        return this.constants_.MEDIUM_PADDING;\n      }\n      // Padding at the end of an icon-only row to make the block shape clearer.\n      if (Types.isIcon(prev)) {\n        return (this.constants_.LARGE_PADDING * 2) + 1;\n      }\n      if (Types.isHat(prev)) {\n        return this.constants_.NO_PADDING;\n      }\n      // Establish a minimum width for a block with a previous or next\n      // connection.\n      if (Types.isPreviousOrNextConnection(prev)) {\n        return this.constants_.LARGE_PADDING;\n      }\n      // Between rounded corner and the end of the row.\n      if (Types.isLeftRoundedCorner(prev)) {\n        return this.constants_.MIN_BLOCK_WIDTH;\n      }\n      // Between a jagged edge and the end of the row.\n      if (Types.isJaggedEdge(prev)) {\n        return this.constants_.NO_PADDING;\n      }\n      // Between noneditable fields and icons and the end of the row.\n      return this.constants_.LARGE_PADDING;\n    }\n\n    // Between inputs and the end of the row.\n    if (Types.isInput(prev) && !next) {\n      if (Types.isExternalInput(prev)) {\n        return this.constants_.NO_PADDING;\n      } else if (Types.isInlineInput(prev)) {\n        return this.constants_.LARGE_PADDING;\n      } else if (Types.isStatementInput(prev)) {\n        return this.constants_.NO_PADDING;\n      }\n    }\n\n    // Spacing between a non-input and an input.\n    if (!Types.isInput(prev) && next && Types.isInput(next)) {\n      // Between an editable field and an input.\n      if (Types.isField(prev) && (/** @type {Field} */ (prev)).isEditable) {\n        if (Types.isInlineInput(next)) {\n          return this.constants_.SMALL_PADDING;\n        } else if (Types.isExternalInput(next)) {\n          return this.constants_.SMALL_PADDING;\n        }\n      } else {\n        if (Types.isInlineInput(next)) {\n          return this.constants_.MEDIUM_LARGE_PADDING;\n        } else if (Types.isExternalInput(next)) {\n          return this.constants_.MEDIUM_LARGE_PADDING;\n        } else if (Types.isStatementInput(next)) {\n          return this.constants_.LARGE_PADDING;\n        }\n      }\n      return this.constants_.LARGE_PADDING - 1;\n    }\n\n    // Spacing between an icon and an icon or field.\n    if (Types.isIcon(prev) && next && !Types.isInput(next)) {\n      return this.constants_.LARGE_PADDING;\n    }\n\n    // Spacing between an inline input and a field.\n    if (Types.isInlineInput(prev) && next && Types.isField(next)) {\n      // Editable field after inline input.\n      if ((/** @type {Field} */ (next)).isEditable) {\n        return this.constants_.MEDIUM_PADDING;\n      } else {\n        // Noneditable field after inline input.\n        return this.constants_.LARGE_PADDING;\n      }\n    }\n\n    if (Types.isLeftSquareCorner(prev) && next) {\n      // Spacing between a hat and a corner\n      if (Types.isHat(next)) {\n        return this.constants_.NO_PADDING;\n      }\n      // Spacing between a square corner and a previous or next connection\n      if (Types.isPreviousConnection(next) || Types.isNextConnection(next)) {\n        return next.notchOffset;\n      }\n    }\n\n    // Spacing between a rounded corner and a previous or next connection.\n    if (Types.isLeftRoundedCorner(prev) && next) {\n      return next.notchOffset - this.constants_.CORNER_RADIUS;\n    }\n\n    // Spacing between two fields of the same editability.\n    if (Types.isField(prev) && next && Types.isField(next) &&\n        ((/** @type {Field} */ (prev)).isEditable ===\n         (/** @type {Field} */ (next)).isEditable)) {\n      return this.constants_.LARGE_PADDING;\n    }\n\n    // Spacing between anything and a jagged edge.\n    if (next && Types.isJaggedEdge(next)) {\n      return this.constants_.LARGE_PADDING;\n    }\n\n    return this.constants_.MEDIUM_PADDING;\n  }\n\n  /**\n   * @override\n   */\n  getSpacerRowHeight_(prev, next) {\n    // If we have an empty block add a spacer to increase the height.\n    if (Types.isTopRow(prev) && Types.isBottomRow(next)) {\n      return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;\n    }\n    // Top and bottom rows act as a spacer so we don't need any extra padding.\n    if (Types.isTopRow(prev) || Types.isBottomRow(next)) {\n      return this.constants_.NO_PADDING;\n    }\n    if (prev.hasExternalInput && next.hasExternalInput) {\n      return this.constants_.LARGE_PADDING;\n    }\n    if (!prev.hasStatement && next.hasStatement) {\n      return this.constants_.BETWEEN_STATEMENT_PADDING_Y;\n    }\n    if (prev.hasStatement && next.hasStatement) {\n      return this.constants_.LARGE_PADDING;\n    }\n    if (prev.hasDummyInput || next.hasDummyInput) {\n      return this.constants_.LARGE_PADDING;\n    }\n    return this.constants_.MEDIUM_PADDING;\n  }\n\n  /**\n   * @override\n   */\n  getElemCenterline_(row, elem) {\n    if (Types.isSpacer(elem)) {\n      return row.yPos + elem.height / 2;\n    }\n    if (Types.isBottomRow(row)) {\n      const bottomRow = /** @type {!BottomRow} */ (row);\n      const baseline =\n          bottomRow.yPos + bottomRow.height - bottomRow.descenderHeight;\n      if (Types.isNextConnection(elem)) {\n        return baseline + elem.height / 2;\n      }\n      return baseline - elem.height / 2;\n    }\n    if (Types.isTopRow(row)) {\n      const topRow = /** @type {!TopRow} */ (row);\n      if (Types.isHat(elem)) {\n        return topRow.capline - elem.height / 2;\n      }\n      return topRow.capline + elem.height / 2;\n    }\n\n    let result = row.yPos;\n    if (Types.isField(elem) && row.hasStatement) {\n      const offset =\n          this.constants_.TALL_INPUT_FIELD_OFFSET_Y + elem.height / 2;\n      result += offset;\n    } else {\n      result += (row.height / 2);\n    }\n    return result;\n  }\n\n  /**\n   * @override\n   */\n  finalize_() {\n    // Performance note: this could be combined with the draw pass, if the time\n    // that this takes is excessive.  But it shouldn't be, because it only\n    // accesses and sets properties that already exist on the objects.\n    let widestRowWithConnectedBlocks = 0;\n    let yCursor = 0;\n    for (let i = 0; i < this.rows.length; i++) {\n      const row = this.rows[i];\n      row.yPos = yCursor;\n      row.xPos = this.startX;\n      yCursor += row.height;\n\n      widestRowWithConnectedBlocks =\n          Math.max(widestRowWithConnectedBlocks, row.widthWithConnectedBlocks);\n      // Add padding to the bottom row if block height is less than minimum\n      const heightWithoutHat = yCursor - this.topRow.ascenderHeight;\n      if (row === this.bottomRow &&\n          heightWithoutHat < this.constants_.MIN_BLOCK_HEIGHT) {\n        // But the hat height shouldn't be part of this.\n        const diff = this.constants_.MIN_BLOCK_HEIGHT - heightWithoutHat;\n        this.bottomRow.height += diff;\n        yCursor += diff;\n      }\n      this.recordElemPositions_(row);\n    }\n    if (this.outputConnection && this.block_.nextConnection &&\n        this.block_.nextConnection.isConnected()) {\n      // Include width of connected block in value to stack width measurement.\n      widestRowWithConnectedBlocks = Math.max(\n          widestRowWithConnectedBlocks,\n          this.block_.nextConnection.targetBlock().getHeightWidth().width);\n    }\n\n    this.bottomRow.baseline = yCursor - this.bottomRow.descenderHeight;\n    this.widthWithChildren = widestRowWithConnectedBlocks + this.startX;\n\n    this.height = yCursor;\n    this.startY = this.topRow.capline;\n  }\n}\n\nexports.RenderInfo = RenderInfo;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Thrasos renderer.\n */\n'use strict';\n\n/**\n * Thrasos renderer.\n * @class\n */\ngoog.module('Blockly.thrasos.Renderer');\n\nconst blockRendering = goog.require('Blockly.blockRendering');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockSvg} = goog.requireType('Blockly.BlockSvg');\nconst {RenderInfo} = goog.require('Blockly.thrasos.RenderInfo');\nconst {Renderer: BaseRenderer} = goog.require('Blockly.blockRendering.Renderer');\n\n\n/**\n * The thrasos renderer.\n * @extends {BaseRenderer}\n * @alias Blockly.thrasos.Renderer\n */\nclass Renderer extends BaseRenderer {\n  /**\n   * @param {string} name The renderer name.\n   * @package\n   */\n  constructor(name) {\n    super(name);\n  }\n\n  /**\n   * Create a new instance of the renderer's render info object.\n   * @param {!BlockSvg} block The block to measure.\n   * @return {!RenderInfo} The render info object.\n   * @protected\n   * @override\n   */\n  makeRenderInfo_(block) {\n    return new RenderInfo(this, block);\n  }\n}\n\nblockRendering.register('thrasos', Renderer);\n\nexports.Renderer = Renderer;\n","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Re-exports of Blockly.thrasos.* modules.\n */\n'use strict';\n\n/**\n * Re-exports of Blockly.thrasos.* modules.\n * @namespace Blockly.thrasos\n */\ngoog.module('Blockly.thrasos');\n\nconst {RenderInfo} = goog.require('Blockly.thrasos.RenderInfo');\nconst {Renderer} = goog.require('Blockly.thrasos.Renderer');\n\nexports.RenderInfo = RenderInfo;\nexports.Renderer = Renderer;\n","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Contains top-level functions for serializing workspaces to\n * plain JavaScript objects.\n */\n'use strict';\n\n/**\n * Contains top-level functions for serializing workspaces to plain JavaScript\n * objects.\n * @namespace Blockly.serialization.workspaces\n */\ngoog.module('Blockly.serialization.workspaces');\n\nconst dom = goog.require('Blockly.utils.dom');\nconst eventUtils = goog.require('Blockly.Events.utils');\nconst registry = goog.require('Blockly.registry');\n// eslint-disable-next-line no-unused-vars\nconst {Workspace} = goog.require('Blockly.Workspace');\nconst {WorkspaceSvg} = goog.require('Blockly.WorkspaceSvg');\n\n\n/**\n * Returns the state of the workspace as a plain JavaScript object.\n * @param {!Workspace} workspace The workspace to serialize.\n * @return {!Object<string, *>} The serialized state of the workspace.\n * @alias Blockly.serialization.workspaces.save\n */\nconst save = function(workspace) {\n  const state = Object.create(null);\n  const serializerMap = registry.getAllItems(registry.Type.SERIALIZER, true);\n  for (const key in serializerMap) {\n    const save = serializerMap[key].save(workspace);\n    if (save) {\n      state[key] = save;\n    }\n  }\n  return state;\n};\nexports.save = save;\n\n/**\n * Loads the variable represented by the given state into the given workspace.\n * @param {!Object<string, *>} state The state of the workspace to deserialize\n *     into the workspace.\n * @param {!Workspace} workspace The workspace to add the new state to.\n * @param {{recordUndo: (boolean|undefined)}=} param1\n *     recordUndo: If true, events triggered by this function will be undo-able\n *       by the user. False by default.\n * @alias Blockly.serialization.workspaces.load\n */\nconst load = function(state, workspace, {recordUndo = false} = {}) {\n  const serializerMap = registry.getAllItems(registry.Type.SERIALIZER, true);\n  if (!serializerMap) {\n    return;\n  }\n\n  const deserializers = Object.entries(serializerMap)\n                            .sort((a, b) => b[1].priority - a[1].priority);\n\n  const prevRecordUndo = eventUtils.getRecordUndo();\n  eventUtils.setRecordUndo(recordUndo);\n  const existingGroup = eventUtils.getGroup();\n  if (!existingGroup) {\n    eventUtils.setGroup(true);\n  }\n\n  dom.startTextWidthCache();\n  if (workspace instanceof WorkspaceSvg) {\n    workspace.setResizesEnabled(false);\n  }\n\n  // We want to trigger clearing in reverse priority order so plugins don't end\n  // up missing dependencies.\n  for (const [, deserializer] of deserializers.reverse()) {\n    deserializer.clear(workspace);\n  }\n\n  // reverse() is destructive, so we have to re-reverse to correct the order.\n  for (let [name, deserializer] of deserializers.reverse()) {\n    name = /** @type {string} */ (name);\n    const pluginState = state[name];\n    if (pluginState) {\n      deserializer.load(state[name], workspace);\n    }\n  }\n\n  if (workspace instanceof WorkspaceSvg) {\n    workspace.setResizesEnabled(true);\n  }\n  dom.stopTextWidthCache();\n\n  eventUtils.fire(new (eventUtils.get(eventUtils.FINISHED_LOADING))(workspace));\n\n  eventUtils.setGroup(existingGroup);\n  eventUtils.setRecordUndo(prevRecordUndo);\n};\nexports.load = load;\n","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Handles serializing variables to plain JavaScript objects, only\n * containing state.\n */\n'use strict';\n\n/**\n * Handles serializing variables to plain JavaScript objects, only containing\n * state.\n * @namespace Blockly.serialization.variables\n */\ngoog.module('Blockly.serialization.variables');\n\nconst priorities = goog.require('Blockly.serialization.priorities');\nconst serializationRegistry = goog.require('Blockly.serialization.registry');\n// eslint-disable-next-line no-unused-vars\nconst {ISerializer} = goog.require('Blockly.serialization.ISerializer');\n// eslint-disable-next-line no-unused-vars\nconst {Workspace} = goog.requireType('Blockly.Workspace');\n\n\n/**\n * Represents the state of a given variable.\n * @typedef {{\n *   name: string,\n *   id: string,\n *   type: (string|undefined)\n * }}\n * @alias Blockly.serialization.variables.State\n */\nlet State;\nexports.State = State;\n\n/**\n * Serializer for saving and loading variable state.\n * @implements {ISerializer}\n * @alias Blockly.serialization.variables.VariableSerializer\n */\nclass VariableSerializer {\n  /* eslint-disable-next-line require-jsdoc */\n  constructor() {\n    /**\n     * The priority for deserializing variables.\n     * @type {number}\n     */\n    this.priority = priorities.VARIABLES;\n  }\n\n  /**\n   * Serializes the variables of the given workspace.\n   * @param {!Workspace} workspace The workspace to save the variables of.\n   * @return {?Array<!State>} The state of the workspace's variables, or null\n   *     if there are no variables.\n   */\n  save(workspace) {\n    const variableStates = [];\n    for (const variable of workspace.getAllVariables()) {\n      const state = {\n        'name': variable.name,\n        'id': variable.getId(),\n      };\n      if (variable.type) {\n        state['type'] = variable.type;\n      }\n      variableStates.push(state);\n    }\n    return variableStates.length ? variableStates : null;\n  }\n\n  /**\n   * Deserializes the variable defined by the given state into the given\n   * workspace.\n   * @param {!Array<!State>} state The state of the variables to deserialize.\n   * @param {!Workspace} workspace The workspace to deserialize into.\n   */\n  load(state, workspace) {\n    for (const varState of state) {\n      workspace.createVariable(\n          varState['name'], varState['type'], varState['id']);\n    }\n  }\n\n  /**\n   * Disposes of any variables that exist on the workspace.\n   * @param {!Workspace} workspace The workspace to clear the variables of.\n   */\n  clear(workspace) {\n    workspace.getVariableMap().clear();\n  }\n}\n\nserializationRegistry.register('variables', new VariableSerializer());\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview An object that provides constants for rendering blocks in the\n * minimalist renderer.\n */\n'use strict';\n\n/**\n * An object that provides constants for rendering blocks in the\n * minimalist renderer.\n * @class\n */\ngoog.module('Blockly.minimalist.ConstantProvider');\n\nconst {ConstantProvider: BaseConstantProvider} = goog.require('Blockly.blockRendering.ConstantProvider');\n\n\n/**\n * An object that provides constants for rendering blocks in the sample.\n * @extends {BaseConstantProvider}\n * @alias Blockly.minimalist.ConstantProvider\n */\nclass ConstantProvider extends BaseConstantProvider {\n  /**\n   * @package\n   */\n  constructor() {\n    super();\n  }\n}\n\nexports.ConstantProvider = ConstantProvider;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Minimalist rendering drawer.\n */\n'use strict';\n\n/**\n * Minimalist rendering drawer.\n * @class\n */\ngoog.module('Blockly.minimalist.Drawer');\n\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockSvg} = goog.requireType('Blockly.BlockSvg');\nconst {Drawer: BaseDrawer} = goog.require('Blockly.blockRendering.Drawer');\n/* eslint-disable-next-line no-unused-vars */\nconst {RenderInfo} = goog.requireType('Blockly.minimalist.RenderInfo');\n\n\n/**\n * An object that draws a block based on the given rendering information.\n * @extends {BaseDrawer}\n * @alias Blockly.minimalist.Drawer\n */\nclass Drawer extends BaseDrawer {\n  /**\n   * @param {!BlockSvg} block The block to render.\n   * @param {!RenderInfo} info An object containing all\n   *   information needed to render this block.\n   * @package\n   */\n  constructor(block, info) {\n    super(block, info);\n  }\n}\n\nexports.Drawer = Drawer;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Minimalist render info object.\n */\n'use strict';\n\n/**\n * Minimalist render info object.\n * @class\n */\ngoog.module('Blockly.minimalist.RenderInfo');\n\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockSvg} = goog.requireType('Blockly.BlockSvg');\nconst {RenderInfo: BaseRenderInfo} = goog.require('Blockly.blockRendering.RenderInfo');\n/* eslint-disable-next-line no-unused-vars */\nconst {Renderer} = goog.requireType('Blockly.minimalist.Renderer');\n\n\n/**\n * An object containing all sizing information needed to draw this block.\n *\n * This measure pass does not propagate changes to the block (although fields\n * may choose to rerender when getSize() is called).  However, calling it\n * repeatedly may be expensive.\n * @extends {BaseRenderInfo}\n * @alias Blockly.minimalist.RenderInfo\n */\nclass RenderInfo extends BaseRenderInfo {\n  /**\n   * @param {!Renderer} renderer The renderer in use.\n   * @param {!BlockSvg} block The block to measure.\n   * @package\n   */\n  constructor(renderer, block) {\n    super(renderer, block);\n  }\n\n  /**\n   * Get the block renderer in use.\n   * @return {!Renderer} The block renderer in use.\n   * @package\n   */\n  getRenderer() {\n    return /** @type {!Renderer} */ (this.renderer_);\n  }\n}\n\nexports.RenderInfo = RenderInfo;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Minimalist renderer.\n */\n'use strict';\n\n/**\n * Minimalist renderer.\n * @class\n */\ngoog.module('Blockly.minimalist.Renderer');\n\nconst blockRendering = goog.require('Blockly.blockRendering');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockSvg} = goog.requireType('Blockly.BlockSvg');\nconst {ConstantProvider} = goog.require('Blockly.minimalist.ConstantProvider');\nconst {Drawer} = goog.require('Blockly.minimalist.Drawer');\n/* eslint-disable-next-line no-unused-vars */\nconst {RenderInfo: BaseRenderInfo} = goog.requireType('Blockly.blockRendering.RenderInfo');\nconst {RenderInfo} = goog.require('Blockly.minimalist.RenderInfo');\nconst {Renderer: BaseRenderer} = goog.require('Blockly.blockRendering.Renderer');\n\n\n/**\n * The minimalist renderer.\n * @extends {BaseRenderer}\n * @alias Blockly.minimalist.Renderer\n */\nclass Renderer extends BaseRenderer {\n  /**\n   * @param {string} name The renderer name.\n   * @package\n   */\n  constructor(name) {\n    super(name);\n  }\n\n  /**\n   * Create a new instance of the renderer's constant provider.\n   * @return {!ConstantProvider} The constant provider.\n   * @protected\n   * @override\n   */\n  makeConstants_() {\n    return new ConstantProvider();\n  }\n\n  /**\n   * Create a new instance of the renderer's render info object.\n   * @param {!BlockSvg} block The block to measure.\n   * @return {!RenderInfo} The render info object.\n   * @protected\n   * @override\n   */\n  makeRenderInfo_(block) {\n    return new RenderInfo(this, block);\n  }\n\n  /**\n   * Create a new instance of the renderer's drawer.\n   * @param {!BlockSvg} block The block to render.\n   * @param {!BaseRenderInfo} info An object containing all\n   *   information needed to render this block.\n   * @return {!Drawer} The drawer.\n   * @protected\n   * @override\n   */\n  makeDrawer_(block, info) {\n    return new Drawer(block, /** @type {!RenderInfo} */ (info));\n  }\n}\n\nblockRendering.register('minimalist', Renderer);\n\nexports.Renderer = Renderer;\n","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Re-exports of Blockly.minimalist.* modules.\n */\n'use strict';\n\n/**\n * Re-exports of Blockly.minimalist.* modules.\n * @namespace Blockly.minimalist\n */\ngoog.module('Blockly.minimalist');\n\nconst {ConstantProvider} = goog.require('Blockly.minimalist.ConstantProvider');\nconst {Drawer} = goog.require('Blockly.minimalist.Drawer');\nconst {RenderInfo} = goog.require('Blockly.minimalist.RenderInfo');\nconst {Renderer} = goog.require('Blockly.minimalist.Renderer');\n\nexports.ConstantProvider = ConstantProvider;\nexports.Drawer = Drawer;\nexports.RenderInfo = RenderInfo;\nexports.Renderer = Renderer;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Objects representing statement inputs with connections on a\n * rendered block.\n */\n'use strict';\n\n/**\n * Objects representing statement inputs with connections on a\n * rendered block.\n * @class\n */\ngoog.module('Blockly.geras.StatementInput');\n\n/* eslint-disable-next-line no-unused-vars */\nconst {ConstantProvider: BaseConstantProvider} = goog.requireType('Blockly.blockRendering.ConstantProvider');\n/* eslint-disable-next-line no-unused-vars */\nconst {ConstantProvider: GerasConstantProvider} = goog.requireType('Blockly.geras.ConstantProvider');\n/* eslint-disable-next-line no-unused-vars */\nconst {Input} = goog.requireType('Blockly.Input');\nconst {StatementInput: BaseStatementInput} = goog.require('Blockly.blockRendering.StatementInput');\n\n\n/**\n * An object containing information about the space a statement input takes up\n * during rendering.\n * @extends {BaseStatementInput}\n * @alias Blockly.geras.StatementInput\n */\nclass StatementInput extends BaseStatementInput {\n  /**\n   * @param {!BaseConstantProvider} constants The rendering\n   *   constants provider.\n   * @param {!Input} input The statement input to measure and store\n   *     information for.\n   * @package\n   */\n  constructor(constants, input) {\n    super(constants, input);\n\n    /** @type {!GerasConstantProvider} */\n    this.constants_;\n\n    if (this.connectedBlock) {\n      // We allow the dark path to show on the parent block so that the child\n      // block looks embossed.  This takes up an extra pixel in both x and y.\n      this.height += this.constants_.DARK_PATH_OFFSET;\n    }\n  }\n}\n\nexports.StatementInput = StatementInput;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview An object that owns a block's rendering SVG elements.\n */\n\n'use strict';\n\n/**\n * An object that owns a block's rendering SVG elements.\n * @class\n */\ngoog.module('Blockly.geras.PathObject');\n\nconst colour = goog.require('Blockly.utils.colour');\nconst dom = goog.require('Blockly.utils.dom');\n/* eslint-disable-next-line no-unused-vars */\nconst {ConstantProvider} = goog.requireType('Blockly.geras.ConstantProvider');\nconst {PathObject: BasePathObject} = goog.require('Blockly.blockRendering.PathObject');\nconst {Svg} = goog.require('Blockly.utils.Svg');\n/* eslint-disable-next-line no-unused-vars */\nconst {Theme} = goog.requireType('Blockly.Theme');\n\n\n/**\n * An object that handles creating and setting each of the SVG elements\n * used by the renderer.\n * @alias Blockly.geras.PathObject\n */\nclass PathObject extends BasePathObject {\n  /**\n   * @param {!SVGElement} root The root SVG element.\n   * @param {!Theme.BlockStyle} style The style object to use for\n   *     colouring.\n   * @param {!ConstantProvider} constants The renderer's constants.\n   * @package\n   */\n  constructor(root, style, constants) {\n    super(root, style, constants);\n    /**\n     * The renderer's constant provider.\n     * @type {!ConstantProvider}\n     */\n    this.constants = constants;\n\n    /**\n     * The dark path of the block.\n     * @type {SVGElement}\n     * @package\n     */\n    this.svgPathDark = dom.createSvgElement(\n        Svg.PATH, {'class': 'blocklyPathDark', 'transform': 'translate(1,1)'});\n\n    // SVG draw order is based on the order of elements (top most = back most)\n    // So we need to insert the dark path before the base path to make sure it\n    // gets drawn first.\n    this.svgRoot.insertBefore(this.svgPathDark, this.svgPath);\n\n    /**\n     * The light path of the block.\n     * @type {SVGElement}\n     * @package\n     */\n    this.svgPathLight = dom.createSvgElement(\n        Svg.PATH, {'class': 'blocklyPathLight'}, this.svgRoot);\n\n    /**\n     * The colour of the dark path on the block in '#RRGGBB' format.\n     * @type {string}\n     * @package\n     */\n    this.colourDark = '#000000';\n  }\n\n  /**\n   * @override\n   */\n  setPath(mainPath) {\n    this.svgPath.setAttribute('d', mainPath);\n    this.svgPathDark.setAttribute('d', mainPath);\n  }\n\n  /**\n   * Set the highlight path generated by the renderer onto the SVG element.\n   * @param {string} highlightPath The highlight path.\n   * @package\n   */\n  setHighlightPath(highlightPath) {\n    this.svgPathLight.setAttribute('d', highlightPath);\n  }\n\n  /**\n   * @override\n   */\n  flipRTL() {\n    // Mirror the block's path.\n    this.svgPath.setAttribute('transform', 'scale(-1 1)');\n    this.svgPathLight.setAttribute('transform', 'scale(-1 1)');\n    this.svgPathDark.setAttribute('transform', 'translate(1,1) scale(-1 1)');\n  }\n\n  /**\n   * @override\n   */\n  applyColour(block) {\n    this.svgPathLight.style.display = '';\n    this.svgPathDark.style.display = '';\n    this.svgPathLight.setAttribute('stroke', this.style.colourTertiary);\n    this.svgPathDark.setAttribute('fill', this.colourDark);\n\n    super.applyColour(block);\n\n    this.svgPath.setAttribute('stroke', 'none');\n  }\n\n  /**\n   * @override\n   */\n  setStyle(blockStyle) {\n    this.style = blockStyle;\n    this.colourDark =\n        colour.blend('#000', this.style.colourPrimary, 0.2) || this.colourDark;\n  }\n\n  /**\n   * @override\n   */\n  updateHighlighted(highlighted) {\n    if (highlighted) {\n      this.svgPath.setAttribute(\n          'filter', 'url(#' + this.constants.embossFilterId + ')');\n      this.svgPathLight.style.display = 'none';\n    } else {\n      this.svgPath.setAttribute('filter', 'none');\n      this.svgPathLight.style.display = 'inline';\n    }\n  }\n\n  /**\n   * @override\n   */\n  updateShadow_(shadow) {\n    if (shadow) {\n      this.svgPathLight.style.display = 'none';\n      this.svgPathDark.setAttribute('fill', this.style.colourSecondary);\n      this.svgPath.setAttribute('stroke', 'none');\n      this.svgPath.setAttribute('fill', this.style.colourSecondary);\n    }\n  }\n\n  /**\n   * @override\n   */\n  updateDisabled_(disabled) {\n    super.updateDisabled_(disabled);\n    if (disabled) {\n      this.svgPath.setAttribute('stroke', 'none');\n    }\n  }\n}\n\nexports.PathObject = PathObject;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview An object that provides constants for rendering blocks in Geras\n * mode.\n */\n'use strict';\n\n/**\n * An object that provides constants for rendering blocks in Geras\n * mode.\n * @class\n */\ngoog.module('Blockly.geras.ConstantProvider');\n\nconst {ConstantProvider: BaseConstantProvider} = goog.require('Blockly.blockRendering.ConstantProvider');\n\n\n/**\n * An object that provides constants for rendering blocks in Geras mode.\n * @extends {BaseConstantProvider}\n * @alias Blockly.geras.ConstantProvider\n */\nclass ConstantProvider extends BaseConstantProvider {\n  /**\n   * @package\n   */\n  constructor() {\n    super();\n\n    /**\n     * @override\n     */\n    this.FIELD_TEXT_BASELINE_CENTER = false;\n\n    // The dark/shadow path in classic rendering is the same as the normal block\n    // path, but translated down one and right one.\n    this.DARK_PATH_OFFSET = 1;\n\n    /**\n     * The maximum width of a bottom row that follows a statement input and has\n     * inputs inline.\n     * @type {number}\n     */\n    this.MAX_BOTTOM_WIDTH = 30;\n\n    /**\n     * @override\n     */\n    this.STATEMENT_BOTTOM_SPACER = -this.NOTCH_HEIGHT / 2;\n  }\n\n  /**\n   * @override\n   */\n  getCSS_(selector) {\n    return super.getCSS_(selector).concat([\n      /* eslint-disable indent */\n      // Insertion marker.\n      selector + ' .blocklyInsertionMarker>.blocklyPathLight,',\n      selector + ' .blocklyInsertionMarker>.blocklyPathDark {',\n      'fill-opacity: ' + this.INSERTION_MARKER_OPACITY + ';', 'stroke: none;',\n      '}',\n      /* eslint-enable indent */\n    ]);\n  }\n}\n\nexports.ConstantProvider = ConstantProvider;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Objects representing inline inputs with connections on a\n * rendered block.\n */\n'use strict';\n\n/**\n * Objects representing inline inputs with connections on a\n * rendered block.\n * @class\n */\ngoog.module('Blockly.geras.InlineInput');\n\n/* eslint-disable-next-line no-unused-vars */\nconst {ConstantProvider: BaseConstantProvider} = goog.requireType('Blockly.blockRendering.ConstantProvider');\n/* eslint-disable-next-line no-unused-vars */\nconst {ConstantProvider: GerasConstantProvider} = goog.requireType('Blockly.geras.ConstantProvider');\nconst {InlineInput: BaseInlineInput} = goog.require('Blockly.blockRendering.InlineInput');\n/* eslint-disable-next-line no-unused-vars */\nconst {Input} = goog.requireType('Blockly.Input');\n\n\n/**\n * An object containing information about the space an inline input takes up\n * during rendering.\n * @extends {BaseInlineInput}\n * @alias Blockly.geras.InlineInput\n */\nclass InlineInput extends BaseInlineInput {\n  /**\n   * @param {!BaseConstantProvider} constants The rendering\n   *   constants provider.\n   * @param {!Input} input The inline input to measure and store\n   *     information for.\n   * @package\n   */\n  constructor(constants, input) {\n    super(constants, input);\n\n    /** @type {!GerasConstantProvider} */\n    this.constants_;\n\n    if (this.connectedBlock) {\n      // We allow the dark path to show on the parent block so that the child\n      // block looks embossed.  This takes up an extra pixel in both x and y.\n      this.width += this.constants_.DARK_PATH_OFFSET;\n      this.height += this.constants_.DARK_PATH_OFFSET;\n    }\n  }\n}\n\nexports.InlineInput = InlineInput;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Methods for adding highlights on block, for rendering in\n * compatibility mode.\n */\n'use strict';\n\n/**\n * Methods for adding highlights on block, for rendering in\n * compatibility mode.\n * @class\n */\ngoog.module('Blockly.geras.Highlighter');\n\nconst svgPaths = goog.require('Blockly.utils.svgPaths');\n/* eslint-disable-next-line no-unused-vars */\nconst {BottomRow} = goog.require('Blockly.blockRendering.BottomRow');\n/* eslint-disable-next-line no-unused-vars */\nconst {ConstantProvider} = goog.requireType('Blockly.blockRendering.ConstantProvider');\n/* eslint-disable-next-line no-unused-vars */\nconst {HighlightConstantProvider} = goog.requireType('Blockly.geras.HighlightConstantProvider');\n/* eslint-disable-next-line no-unused-vars */\nconst {InlineInput} = goog.require('Blockly.geras.InlineInput');\n/* eslint-disable-next-line no-unused-vars */\nconst {RenderInfo} = goog.requireType('Blockly.geras.RenderInfo');\n/* eslint-disable-next-line no-unused-vars */\nconst {Renderer} = goog.requireType('Blockly.geras.Renderer');\n/* eslint-disable-next-line no-unused-vars */\nconst {Row} = goog.requireType('Blockly.blockRendering.Row');\nconst {SpacerRow} = goog.require('Blockly.blockRendering.SpacerRow');\n/* eslint-disable-next-line no-unused-vars */\nconst {TopRow} = goog.require('Blockly.blockRendering.TopRow');\nconst {Types} = goog.require('Blockly.blockRendering.Types');\n\n\n/**\n * An object that adds highlights to a block based on the given rendering\n * information.\n *\n * Highlighting is interesting because the highlights do not fully enclose the\n * block.  Instead, they are positioned based on a light source in the top left.\n * This means that rendering highlights requires exact information about the\n * position of each part of the block.  The resulting paths are not continuous\n * or closed paths.  The highlights for tabs and notches are loosely based on\n * tab and notch shapes, but are not exactly the same.\n * @alias Blockly.geras.Highlighter\n */\nclass Highlighter {\n  /**\n   * @param {!RenderInfo} info An object containing all\n   *     information needed to render this block.\n   * @package\n   */\n  constructor(info) {\n    this.info_ = info;\n    this.steps_ = '';\n    this.inlineSteps_ = '';\n\n    this.RTL_ = this.info_.RTL;\n\n    const renderer = /** @type {!Renderer} */ (info.getRenderer());\n\n    /**\n     * The renderer's constant provider.\n     * @type {!ConstantProvider}\n     */\n    this.constants_ = renderer.getConstants();\n\n    /**\n     * @type {!HighlightConstantProvider}\n     */\n    this.highlightConstants_ = renderer.getHighlightConstants();\n    /**\n     * The offset between the block's main path and highlight path.\n     * @type {number}\n     * @private\n     */\n    this.highlightOffset_ = this.highlightConstants_.OFFSET;\n\n    this.outsideCornerPaths_ = this.highlightConstants_.OUTSIDE_CORNER;\n    this.insideCornerPaths_ = this.highlightConstants_.INSIDE_CORNER;\n    this.puzzleTabPaths_ = this.highlightConstants_.PUZZLE_TAB;\n    this.notchPaths_ = this.highlightConstants_.NOTCH;\n    this.startPaths_ = this.highlightConstants_.START_HAT;\n    this.jaggedTeethPaths_ = this.highlightConstants_.JAGGED_TEETH;\n  }\n\n  /**\n   * Get the steps for the highlight path.\n   * @return {string} The steps for the highlight path.\n   * @package\n   */\n  getPath() {\n    return this.steps_ + '\\n' + this.inlineSteps_;\n  }\n\n  /**\n   * Add a highlight to the top corner of a block.\n   * @param {!TopRow} row The top row of the block.\n   * @package\n   */\n  drawTopCorner(row) {\n    this.steps_ += svgPaths.moveBy(row.xPos, this.info_.startY);\n    for (let i = 0, elem; (elem = row.elements[i]); i++) {\n      if (Types.isLeftSquareCorner(elem)) {\n        this.steps_ += this.highlightConstants_.START_POINT;\n      } else if (Types.isLeftRoundedCorner(elem)) {\n        this.steps_ += this.outsideCornerPaths_.topLeft(this.RTL_);\n      } else if (Types.isPreviousConnection(elem)) {\n        this.steps_ += this.notchPaths_.pathLeft;\n      } else if (Types.isHat(elem)) {\n        this.steps_ += this.startPaths_.path(this.RTL_);\n      } else if (Types.isSpacer(elem) && elem.width !== 0) {\n        // The end point of the spacer needs to be offset by the highlight\n        // amount. So instead of using the spacer's width for a relative\n        // horizontal, use its width and position for an absolute horizontal\n        // move.\n        this.steps_ += svgPaths.lineOnAxis(\n            'H', elem.xPos + elem.width - this.highlightOffset_);\n      }\n    }\n\n    const right = row.xPos + row.width - this.highlightOffset_;\n    this.steps_ += svgPaths.lineOnAxis('H', right);\n  }\n\n  /**\n   * Add a highlight on a jagged edge for a collapsed block.\n   * @param {!Row} row  The row to highlight.\n   * @package\n   */\n  drawJaggedEdge_(row) {\n    if (this.info_.RTL) {\n      const remainder =\n          row.height - this.jaggedTeethPaths_.height - this.highlightOffset_;\n      this.steps_ +=\n          this.jaggedTeethPaths_.pathLeft + svgPaths.lineOnAxis('v', remainder);\n    }\n  }\n\n  /**\n   * Add a highlight on a value input.\n   * @param {!Row} row The row the input belongs to.\n   * @package\n   */\n  drawValueInput(row) {\n    const input = /** @type {!InlineInput}} */ (row.getLastInput());\n    if (this.RTL_) {\n      const belowTabHeight = row.height - input.connectionHeight;\n\n      this.steps_ +=\n          svgPaths.moveTo(\n              input.xPos + input.width - this.highlightOffset_, row.yPos) +\n          this.puzzleTabPaths_.pathDown(this.RTL_) +\n          svgPaths.lineOnAxis('v', belowTabHeight);\n    } else {\n      this.steps_ += svgPaths.moveTo(input.xPos + input.width, row.yPos) +\n          this.puzzleTabPaths_.pathDown(this.RTL_);\n    }\n  }\n\n  /**\n   * Add a highlight on a statement input.\n   * @param {!Row} row The row to highlight.\n   * @package\n   */\n  drawStatementInput(row) {\n    const input = row.getLastInput();\n    if (this.RTL_) {\n      const innerHeight = row.height - (2 * this.insideCornerPaths_.height);\n      this.steps_ += svgPaths.moveTo(input.xPos, row.yPos) +\n          this.insideCornerPaths_.pathTop(this.RTL_) +\n          svgPaths.lineOnAxis('v', innerHeight) +\n          this.insideCornerPaths_.pathBottom(this.RTL_) +\n          svgPaths.lineTo(\n              row.width - input.xPos - this.insideCornerPaths_.width, 0);\n    } else {\n      this.steps_ += svgPaths.moveTo(input.xPos, row.yPos + row.height) +\n          this.insideCornerPaths_.pathBottom(this.RTL_) +\n          svgPaths.lineTo(\n              row.width - input.xPos - this.insideCornerPaths_.width, 0);\n    }\n  }\n\n  /**\n   * Add a highlight on the right side of a row.\n   * @param {!Row} row The row to highlight.\n   * @package\n   */\n  drawRightSideRow(row) {\n    const rightEdge = row.xPos + row.width - this.highlightOffset_;\n    if (row instanceof SpacerRow && row.followsStatement) {\n      this.steps_ += svgPaths.lineOnAxis('H', rightEdge);\n    }\n    if (this.RTL_) {\n      this.steps_ += svgPaths.lineOnAxis('H', rightEdge);\n      if (row.height > this.highlightOffset_) {\n        this.steps_ += svgPaths.lineOnAxis(\n            'V', row.yPos + row.height - this.highlightOffset_);\n      }\n    }\n  }\n\n  /**\n   * Add a highlight to the bottom row.\n   * @param {!BottomRow} row The row to highlight.\n   * @package\n   */\n  drawBottomRow(row) {\n    // Highlight the vertical edge of the bottom row on the input side.\n    // Highlighting is always from the top left, both in LTR and RTL.\n    if (this.RTL_) {\n      this.steps_ +=\n          svgPaths.lineOnAxis('V', row.baseline - this.highlightOffset_);\n    } else {\n      const cornerElem = this.info_.bottomRow.elements[0];\n      if (Types.isLeftSquareCorner(cornerElem)) {\n        this.steps_ += svgPaths.moveTo(\n            row.xPos + this.highlightOffset_,\n            row.baseline - this.highlightOffset_);\n      } else if (Types.isLeftRoundedCorner(cornerElem)) {\n        this.steps_ += svgPaths.moveTo(row.xPos, row.baseline);\n        this.steps_ += this.outsideCornerPaths_.bottomLeft();\n      }\n    }\n  }\n\n  /**\n   * Draw the highlight on the left side of the block.\n   * @package\n   */\n  drawLeft() {\n    const outputConnection = this.info_.outputConnection;\n    if (outputConnection) {\n      const tabBottom =\n          outputConnection.connectionOffsetY + outputConnection.height;\n      // Draw a line up to the bottom of the tab.\n      if (this.RTL_) {\n        this.steps_ += svgPaths.moveTo(this.info_.startX, tabBottom);\n      } else {\n        const left = this.info_.startX + this.highlightOffset_;\n        const bottom = this.info_.bottomRow.baseline - this.highlightOffset_;\n        this.steps_ += svgPaths.moveTo(left, bottom);\n        this.steps_ += svgPaths.lineOnAxis('V', tabBottom);\n      }\n      this.steps_ += this.puzzleTabPaths_.pathUp(this.RTL_);\n    }\n\n    if (!this.RTL_) {\n      const topRow = this.info_.topRow;\n      if (Types.isLeftRoundedCorner(topRow.elements[0])) {\n        this.steps_ +=\n            svgPaths.lineOnAxis('V', this.outsideCornerPaths_.height);\n      } else {\n        this.steps_ +=\n            svgPaths.lineOnAxis('V', topRow.capline + this.highlightOffset_);\n      }\n    }\n  }\n\n  /**\n   * Add a highlight to an inline input.\n   * @param {!InlineInput} input The input to highlight.\n   * @package\n   */\n  drawInlineInput(input) {\n    const offset = this.highlightOffset_;\n\n    // Relative to the block's left.\n    const connectionRight = input.xPos + input.connectionWidth;\n    const yPos = input.centerline - input.height / 2;\n    const bottomHighlightWidth = input.width - input.connectionWidth;\n    const startY = yPos + offset;\n\n    if (this.RTL_) {\n      const aboveTabHeight = input.connectionOffsetY - offset;\n      const belowTabHeight = input.height -\n          (input.connectionOffsetY + input.connectionHeight) + offset;\n\n      const startX = connectionRight - offset;\n\n      this.inlineSteps_ += svgPaths.moveTo(startX, startY) +\n          // Right edge above tab.\n          svgPaths.lineOnAxis('v', aboveTabHeight) +\n          // Back of tab.\n          this.puzzleTabPaths_.pathDown(this.RTL_) +\n          // Right edge below tab.\n          svgPaths.lineOnAxis('v', belowTabHeight) +\n          // Bottom.\n          svgPaths.lineOnAxis('h', bottomHighlightWidth);\n    } else {\n      this.inlineSteps_ +=\n          // Go to top right corner.\n          svgPaths.moveTo(input.xPos + input.width + offset, startY) +\n          // Highlight right edge, bottom.\n          svgPaths.lineOnAxis('v', input.height) +\n          svgPaths.lineOnAxis('h', -bottomHighlightWidth) +\n          // Go to top of tab.\n          svgPaths.moveTo(connectionRight, yPos + input.connectionOffsetY) +\n          // Short highlight glint at bottom of tab.\n          this.puzzleTabPaths_.pathDown(this.RTL_);\n    }\n  }\n}\n\nexports.Highlighter = Highlighter;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Renderer that preserves the look and feel of Blockly pre-2019.\n */\n'use strict';\n\n/**\n * Renderer that preserves the look and feel of Blockly pre-2019.\n * @class\n */\ngoog.module('Blockly.geras.Drawer');\n\nconst debug = goog.require('Blockly.blockRendering.debug');\nconst svgPaths = goog.require('Blockly.utils.svgPaths');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockSvg} = goog.requireType('Blockly.BlockSvg');\n/* eslint-disable-next-line no-unused-vars */\nconst {ConstantProvider} = goog.requireType('Blockly.geras.ConstantProvider');\nconst {Drawer: BaseDrawer} = goog.require('Blockly.blockRendering.Drawer');\nconst {Highlighter} = goog.require('Blockly.geras.Highlighter');\n/* eslint-disable-next-line no-unused-vars */\nconst {InlineInput} = goog.require('Blockly.geras.InlineInput');\n/* eslint-disable-next-line no-unused-vars */\nconst {PathObject} = goog.requireType('Blockly.geras.PathObject');\n/* eslint-disable-next-line no-unused-vars */\nconst {RenderInfo} = goog.requireType('Blockly.geras.RenderInfo');\n\n\n/**\n * An object that draws a block based on the given rendering information.\n * @extends {BaseDrawer}\n * @alias Blockly.geras.Drawer\n */\nclass Drawer extends BaseDrawer {\n  /**\n   * @param {!BlockSvg} block The block to render.\n   * @param {!RenderInfo} info An object containing all\n   *   information needed to render this block.\n   * @package\n   */\n  constructor(block, info) {\n    super(block, info);\n    // Unlike Thrasos, Geras has highlights and drop shadows.\n    this.highlighter_ = new Highlighter(info);\n\n    /** @type {!ConstantProvider} */\n    this.constants_;\n  }\n\n  /**\n   * @override\n   */\n  draw() {\n    this.hideHiddenIcons_();\n    this.drawOutline_();\n    this.drawInternals_();\n\n    const pathObject =\n        /** @type {!PathObject} */ (this.block_.pathObject);\n    pathObject.setPath(this.outlinePath_ + '\\n' + this.inlinePath_);\n    pathObject.setHighlightPath(this.highlighter_.getPath());\n    if (this.info_.RTL) {\n      pathObject.flipRTL();\n    }\n    if (debug.isDebuggerEnabled()) {\n      this.block_.renderingDebugger.drawDebug(this.block_, this.info_);\n    }\n    this.recordSizeOnBlock_();\n  }\n\n  /**\n   * @override\n   */\n  drawTop_() {\n    this.highlighter_.drawTopCorner(this.info_.topRow);\n    this.highlighter_.drawRightSideRow(this.info_.topRow);\n\n    super.drawTop_();\n  }\n\n  /**\n   * @override\n   */\n  drawJaggedEdge_(row) {\n    this.highlighter_.drawJaggedEdge_(row);\n\n    super.drawJaggedEdge_(row);\n  }\n\n  /**\n   * @override\n   */\n  drawValueInput_(row) {\n    this.highlighter_.drawValueInput(row);\n\n    super.drawValueInput_(row);\n  }\n\n  /**\n   * @override\n   */\n  drawStatementInput_(row) {\n    this.highlighter_.drawStatementInput(row);\n\n    super.drawStatementInput_(row);\n  }\n\n  /**\n   * @override\n   */\n  drawRightSideRow_(row) {\n    this.highlighter_.drawRightSideRow(row);\n\n    this.outlinePath_ += svgPaths.lineOnAxis('H', row.xPos + row.width) +\n        svgPaths.lineOnAxis('V', row.yPos + row.height);\n  }\n\n  /**\n   * @override\n   */\n  drawBottom_() {\n    this.highlighter_.drawBottomRow(this.info_.bottomRow);\n\n    super.drawBottom_();\n  }\n\n  /**\n   * Add steps for the left side of the block, which may include an output\n   * connection\n   * @protected\n   * @override\n   */\n  drawLeft_() {\n    this.highlighter_.drawLeft();\n\n    super.drawLeft_();\n  }\n\n  /**\n   * @override\n   */\n  drawInlineInput_(input) {\n    this.highlighter_.drawInlineInput(/** @type {!InlineInput} */ (input));\n\n    super.drawInlineInput_(input);\n  }\n\n  /**\n   * @override\n   */\n  positionInlineInputConnection_(input) {\n    const yPos = input.centerline - input.height / 2;\n    // Move the connection.\n    if (input.connectionModel) {\n      // xPos already contains info about startX\n      let connX =\n          input.xPos + input.connectionWidth + this.constants_.DARK_PATH_OFFSET;\n      if (this.info_.RTL) {\n        connX *= -1;\n      }\n      input.connectionModel.setOffsetInBlock(\n          connX,\n          yPos + input.connectionOffsetY + this.constants_.DARK_PATH_OFFSET);\n    }\n  }\n\n  /**\n   * @override\n   */\n  positionStatementInputConnection_(row) {\n    const input = row.getLastInput();\n    if (input.connectionModel) {\n      let connX = row.xPos + row.statementEdge + input.notchOffset;\n      if (this.info_.RTL) {\n        connX *= -1;\n      } else {\n        connX += this.constants_.DARK_PATH_OFFSET;\n      }\n      input.connectionModel.setOffsetInBlock(\n          connX, row.yPos + this.constants_.DARK_PATH_OFFSET);\n    }\n  }\n\n  /**\n   * @override\n   */\n  positionExternalValueConnection_(row) {\n    const input = row.getLastInput();\n    if (input.connectionModel) {\n      let connX = row.xPos + row.width + this.constants_.DARK_PATH_OFFSET;\n      if (this.info_.RTL) {\n        connX *= -1;\n      }\n      input.connectionModel.setOffsetInBlock(connX, row.yPos);\n    }\n  }\n\n  /**\n   * @override\n   */\n  positionNextConnection_() {\n    const bottomRow = this.info_.bottomRow;\n\n    if (bottomRow.connection) {\n      const connInfo = bottomRow.connection;\n      const x = connInfo.xPos;  // Already contains info about startX.\n      const connX =\n          (this.info_.RTL ? -x : x) + (this.constants_.DARK_PATH_OFFSET / 2);\n      connInfo.connectionModel.setOffsetInBlock(\n          connX, bottomRow.baseline + this.constants_.DARK_PATH_OFFSET);\n    }\n  }\n}\n\nexports.Drawer = Drawer;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Objects for rendering highlights on blocks.\n */\n'use strict';\n\n/**\n * Objects for rendering highlights on blocks.\n * @class\n */\ngoog.module('Blockly.geras.HighlightConstantProvider');\n\nconst svgPaths = goog.require('Blockly.utils.svgPaths');\n/* eslint-disable-next-line no-unused-vars */\nconst {ConstantProvider} = goog.requireType('Blockly.blockRendering.ConstantProvider');\n\n\n/**\n * An object that provides constants for rendering highlights on blocks.\n * Some highlights are simple offsets of the parent paths and can be generated\n * programmatically.  Others, especially on curves, are just made out of piles\n * of constants and are hard to tweak.\n * @alias Blockly.geras.HighlightConstantProvider\n */\nclass HighlightConstantProvider {\n  /**\n   * @param {!ConstantProvider} constants The rendering\n   *   constants provider.\n   * @package\n   */\n  constructor(constants) {\n    /**\n     * The renderer's constant provider.\n     * @type {!ConstantProvider}\n     */\n    this.constantProvider = constants;\n\n    /**\n     * The offset between the block's main path and highlight path.\n     * @type {number}\n     * @package\n     */\n    this.OFFSET = 0.5;\n\n    /**\n     * The start point, which is offset in both X and Y, as an SVG path chunk.\n     * @type {string}\n     */\n    this.START_POINT = svgPaths.moveBy(this.OFFSET, this.OFFSET);\n  }\n\n  /**\n   * Initialize shape objects based on the constants set in the constructor.\n   * @package\n   */\n  init() {\n    /**\n     * An object containing sizing and path information about inside corner\n     * highlights.\n     * @type {!Object}\n     */\n    this.INSIDE_CORNER = this.makeInsideCorner();\n\n    /**\n     * An object containing sizing and path information about outside corner\n     * highlights.\n     * @type {!Object}\n     */\n    this.OUTSIDE_CORNER = this.makeOutsideCorner();\n\n    /**\n     * An object containing sizing and path information about puzzle tab\n     * highlights.\n     * @type {!Object}\n     */\n    this.PUZZLE_TAB = this.makePuzzleTab();\n\n    /**\n     * An object containing sizing and path information about notch highlights.\n     * @type {!Object}\n     */\n    this.NOTCH = this.makeNotch();\n\n    /**\n     * An object containing sizing and path information about highlights for\n     * collapsed block indicators.\n     * @type {!Object}\n     */\n    this.JAGGED_TEETH = this.makeJaggedTeeth();\n\n    /**\n     * An object containing sizing and path information about start hat\n     * highlights.\n     * @type {!Object}\n     */\n    this.START_HAT = this.makeStartHat();\n  }\n\n  /**\n   * @return {!Object} An object containing sizing and path information about\n   *     inside corner highlights.\n   * @package\n   */\n  makeInsideCorner() {\n    const radius = this.constantProvider.CORNER_RADIUS;\n    const offset = this.OFFSET;\n\n    /**\n     * Distance from shape edge to intersect with a curved corner at 45 degrees.\n     * Applies to highlighting on around the outside of a curve.\n     * @const\n     */\n    const distance45outside = (1 - Math.SQRT1_2) * (radius + offset) - offset;\n\n    const pathTopRtl = svgPaths.moveBy(distance45outside, distance45outside) +\n        svgPaths.arc(\n            'a', '0 0,0', radius,\n            svgPaths.point(\n                -distance45outside - offset, radius - distance45outside));\n\n    const pathBottomRtl = svgPaths.arc(\n        'a', '0 0,0', radius + offset,\n        svgPaths.point(radius + offset, radius + offset));\n\n    const pathBottomLtr =\n        svgPaths.moveBy(distance45outside, -distance45outside) +\n        svgPaths.arc(\n            'a', '0 0,0', radius + offset,\n            svgPaths.point(\n                radius - distance45outside, distance45outside + offset));\n\n    return {\n      width: radius + offset,\n      height: radius,\n      pathTop: function(rtl) {\n        return rtl ? pathTopRtl : '';\n      },\n      pathBottom: function(rtl) {\n        return rtl ? pathBottomRtl : pathBottomLtr;\n      },\n    };\n  }\n\n  /**\n   * @return {!Object} An object containing sizing and path information about\n   *     outside corner highlights.\n   * @package\n   */\n  makeOutsideCorner() {\n    const radius = this.constantProvider.CORNER_RADIUS;\n    const offset = this.OFFSET;\n\n    /**\n     * Distance from shape edge to intersect with a curved corner at 45 degrees.\n     * Applies to highlighting on around the inside of a curve.\n     * @const\n     */\n    const distance45inside = (1 - Math.SQRT1_2) * (radius - offset) + offset;\n\n    const topLeftStartX = distance45inside;\n    const topLeftStartY = distance45inside;\n    const topLeftCornerHighlightRtl =\n        svgPaths.moveBy(topLeftStartX, topLeftStartY) +\n        svgPaths.arc(\n            'a', '0 0,1', radius - offset,\n            svgPaths.point(radius - topLeftStartX, -topLeftStartY + offset));\n    /**\n     * SVG path for drawing the highlight on the rounded top-left corner.\n     * @const\n     */\n    const topLeftCornerHighlightLtr = svgPaths.moveBy(offset, radius) +\n        svgPaths.arc(\n            'a', '0 0,1', radius - offset,\n            svgPaths.point(radius, -radius + offset));\n\n    const bottomLeftStartX = distance45inside;\n    const bottomLeftStartY = -distance45inside;\n    const bottomLeftPath = svgPaths.moveBy(bottomLeftStartX, bottomLeftStartY) +\n        svgPaths.arc(\n            'a', '0 0,1', radius - offset,\n            svgPaths.point(\n                -bottomLeftStartX + offset, -bottomLeftStartY - radius));\n\n    return {\n      height: radius,\n      topLeft: function(rtl) {\n        return rtl ? topLeftCornerHighlightRtl : topLeftCornerHighlightLtr;\n      },\n      bottomLeft: function() {\n        return bottomLeftPath;\n      },\n    };\n  }\n\n  /**\n   * @return {!Object} An object containing sizing and path information about\n   *     puzzle tab highlights.\n   * @package\n   */\n  makePuzzleTab() {\n    const width = this.constantProvider.TAB_WIDTH;\n    const height = this.constantProvider.TAB_HEIGHT;\n\n    // This is how much of the vertical block edge is actually drawn by the\n    // puzzle tab.\n    const verticalOverlap = 2.5;\n\n    const highlightRtlUp =\n        svgPaths.moveBy(-2, -height + verticalOverlap + 0.9) +\n        svgPaths.lineTo(width * -0.45, -2.1);\n\n    const highlightRtlDown = svgPaths.lineOnAxis('v', verticalOverlap) +\n        svgPaths.moveBy(-width * 0.97, 2.5) +\n        svgPaths.curve(\n            'q',\n            [\n              svgPaths.point(-width * 0.05, 10),\n              svgPaths.point(width * 0.3, 9.5),\n            ]) +\n        svgPaths.moveBy(width * 0.67, -1.9) +\n        svgPaths.lineOnAxis('v', verticalOverlap);\n\n    const highlightLtrUp = svgPaths.lineOnAxis('v', -1.5) +\n        svgPaths.moveBy(width * -0.92, -0.5) +\n        svgPaths.curve(\n            'q',\n            [svgPaths.point(width * -0.19, -5.5), svgPaths.point(0, -11)]) +\n        svgPaths.moveBy(width * 0.92, 1);\n\n    const highlightLtrDown =\n        svgPaths.moveBy(-5, height - 0.7) + svgPaths.lineTo(width * 0.46, -2.1);\n\n    return {\n      width: width,\n      height: height,\n      pathUp: function(rtl) {\n        return rtl ? highlightRtlUp : highlightLtrUp;\n      },\n      pathDown: function(rtl) {\n        return rtl ? highlightRtlDown : highlightLtrDown;\n      },\n    };\n  }\n\n  /**\n   * @return {!Object} An object containing sizing and path information about\n   *     notch highlights.\n   * @package\n   */\n  makeNotch() {\n    // This is only for the previous connection.\n    const pathLeft = svgPaths.lineOnAxis('h', this.OFFSET) +\n        this.constantProvider.NOTCH.pathLeft;\n    return {pathLeft: pathLeft};\n  }\n\n  /**\n   * @return {!Object} An object containing sizing and path information about\n   *     collapsed block edge highlights.\n   * @package\n   */\n  makeJaggedTeeth() {\n    const pathLeft = svgPaths.lineTo(5.1, 2.6) + svgPaths.moveBy(-10.2, 6.8) +\n        svgPaths.lineTo(5.1, 2.6);\n    return {pathLeft: pathLeft, height: 12, width: 10.2};\n  }\n\n  /**\n   * @return {!Object} An object containing sizing and path information about\n   *     start highlights.\n   * @package\n   */\n  makeStartHat() {\n    const hatHeight = this.constantProvider.START_HAT.height;\n    const pathRtl = svgPaths.moveBy(25, -8.7) + svgPaths.curve('c', [\n      svgPaths.point(29.7, -6.2),\n      svgPaths.point(57.2, -0.5),\n      svgPaths.point(75, 8.7),\n    ]);\n\n    const pathLtr = svgPaths.curve('c', [\n      svgPaths.point(17.8, -9.2),\n      svgPaths.point(45.3, -14.9),\n      svgPaths.point(75, -8.7),\n    ]) + svgPaths.moveTo(100.5, hatHeight + 0.5);\n    return {\n      path: function(rtl) {\n        return rtl ? pathRtl : pathLtr;\n      },\n    };\n  }\n}\n\nexports.HighlightConstantProvider = HighlightConstantProvider;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Old (compatibility) renderer.\n * Geras: spirit of old age.\n */\n'use strict';\n\n/**\n * Old (compatibility) renderer.\n * Geras: spirit of old age.\n * @class\n */\ngoog.module('Blockly.geras.RenderInfo');\n\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockSvg} = goog.requireType('Blockly.BlockSvg');\n/* eslint-disable-next-line no-unused-vars */\nconst {BottomRow} = goog.requireType('Blockly.blockRendering.BottomRow');\n/* eslint-disable-next-line no-unused-vars */\nconst {ConstantProvider} = goog.requireType('Blockly.geras.ConstantProvider');\nconst {ExternalValueInput} = goog.require('Blockly.blockRendering.ExternalValueInput');\n/* eslint-disable-next-line no-unused-vars */\nconst {Field} = goog.requireType('Blockly.blockRendering.Field');\nconst {InRowSpacer} = goog.require('Blockly.blockRendering.InRowSpacer');\nconst {InlineInput} = goog.require('Blockly.geras.InlineInput');\n/* eslint-disable-next-line no-unused-vars */\nconst {InputRow} = goog.requireType('Blockly.blockRendering.InputRow');\nconst {RenderInfo: BaseRenderInfo} = goog.require('Blockly.blockRendering.RenderInfo');\n/* eslint-disable-next-line no-unused-vars */\nconst {Renderer} = goog.requireType('Blockly.geras.Renderer');\nconst {StatementInput} = goog.require('Blockly.geras.StatementInput');\n/* eslint-disable-next-line no-unused-vars */\nconst {TopRow} = goog.requireType('Blockly.blockRendering.TopRow');\nconst {Types} = goog.require('Blockly.blockRendering.Types');\nconst {inputTypes} = goog.require('Blockly.inputTypes');\n\n\n/**\n * An object containing all sizing information needed to draw this block.\n *\n * This measure pass does not propagate changes to the block (although fields\n * may choose to rerender when getSize() is called).  However, calling it\n * repeatedly may be expensive.\n * @extends {BaseRenderInfo}\n * @alias Blockly.geras.RenderInfo\n */\nclass RenderInfo extends BaseRenderInfo {\n  /**\n   * @param {!Renderer} renderer The renderer in use.\n   * @param {!BlockSvg} block The block to measure.\n   * @package\n   */\n  constructor(renderer, block) {\n    super(renderer, block);\n\n    /** @type {!ConstantProvider} */\n    this.constants_;\n  }\n\n  /**\n   * Get the block renderer in use.\n   * @return {!Renderer} The block renderer in use.\n   * @package\n   */\n  getRenderer() {\n    return /** @type {!Renderer} */ (this.renderer_);\n  }\n\n  /**\n   * @override\n   */\n  populateBottomRow_() {\n    super.populateBottomRow_();\n\n    const followsStatement = this.block_.inputList.length &&\n        this.block_.inputList[this.block_.inputList.length - 1].type ===\n            inputTypes.STATEMENT;\n\n    // The minimum height of the bottom row is smaller in Geras than in other\n    // renderers, because the dark path adds a pixel.\n    // If one of the row's elements has a greater height this will be\n    // overwritten in the compute pass.\n    if (!followsStatement) {\n      this.bottomRow.minHeight =\n          this.constants_.MEDIUM_PADDING - this.constants_.DARK_PATH_OFFSET;\n    }\n  }\n\n  /**\n   * @override\n   */\n  addInput_(input, activeRow) {\n    // Non-dummy inputs have visual representations onscreen.\n    if (this.isInline && input.type === inputTypes.VALUE) {\n      activeRow.elements.push(new InlineInput(this.constants_, input));\n      activeRow.hasInlineInput = true;\n    } else if (input.type === inputTypes.STATEMENT) {\n      activeRow.elements.push(new StatementInput(this.constants_, input));\n      activeRow.hasStatement = true;\n    } else if (input.type === inputTypes.VALUE) {\n      activeRow.elements.push(new ExternalValueInput(this.constants_, input));\n      activeRow.hasExternalInput = true;\n    } else if (input.type === inputTypes.DUMMY) {\n      // Dummy inputs have no visual representation, but the information is\n      // still important.\n      activeRow.minHeight =\n          Math.max(activeRow.minHeight, this.constants_.DUMMY_INPUT_MIN_HEIGHT);\n      activeRow.hasDummyInput = true;\n    }\n    // Ignore row alignment if inline.\n    if (!this.isInline && activeRow.align === null) {\n      activeRow.align = input.align;\n    }\n  }\n\n  /**\n   * @override\n   */\n  addElemSpacing_() {\n    let hasExternalInputs = false;\n    for (let i = 0, row; (row = this.rows[i]); i++) {\n      if (row.hasExternalInput) {\n        hasExternalInputs = true;\n      }\n    }\n    for (let i = 0, row; (row = this.rows[i]); i++) {\n      const oldElems = row.elements;\n      row.elements = [];\n      // No spacing needed before the corner on the top row or the bottom row.\n      if (row.startsWithElemSpacer()) {\n        // There's a spacer before the first element in the row.\n        row.elements.push(new InRowSpacer(\n            this.constants_, this.getInRowSpacing_(null, oldElems[0])));\n      }\n      if (!oldElems.length) {\n        continue;\n      }\n      for (let e = 0; e < oldElems.length - 1; e++) {\n        row.elements.push(oldElems[e]);\n        const spacing = this.getInRowSpacing_(oldElems[e], oldElems[e + 1]);\n        row.elements.push(new InRowSpacer(this.constants_, spacing));\n      }\n      row.elements.push(oldElems[oldElems.length - 1]);\n      if (row.endsWithElemSpacer()) {\n        let spacing =\n            this.getInRowSpacing_(oldElems[oldElems.length - 1], null);\n        if (hasExternalInputs && row.hasDummyInput) {\n          spacing += this.constants_.TAB_WIDTH;\n        }\n        // There's a spacer after the last element in the row.\n        row.elements.push(new InRowSpacer(this.constants_, spacing));\n      }\n    }\n  }\n\n  /**\n   * @override\n   */\n  getInRowSpacing_(prev, next) {\n    if (!prev) {\n      // Between an editable field and the beginning of the row.\n      if (next && Types.isField(next) &&\n          (/** @type {Field} */ (next)).isEditable) {\n        return this.constants_.MEDIUM_PADDING;\n      }\n      // Inline input at the beginning of the row.\n      if (next && Types.isInlineInput(next)) {\n        return this.constants_.MEDIUM_LARGE_PADDING;\n      }\n      if (next && Types.isStatementInput(next)) {\n        return this.constants_.STATEMENT_INPUT_PADDING_LEFT;\n      }\n      // Anything else at the beginning of the row.\n      return this.constants_.LARGE_PADDING;\n    }\n\n    // Spacing between a non-input and the end of the row or a statement input.\n    if (!Types.isInput(prev) && (!next || Types.isStatementInput(next))) {\n      // Between an editable field and the end of the row.\n      if (Types.isField(prev) && (/** @type {Field} */ (prev)).isEditable) {\n        return this.constants_.MEDIUM_PADDING;\n      }\n      // Padding at the end of an icon-only row to make the block shape clearer.\n      if (Types.isIcon(prev)) {\n        return (this.constants_.LARGE_PADDING * 2) + 1;\n      }\n      if (Types.isHat(prev)) {\n        return this.constants_.NO_PADDING;\n      }\n      // Establish a minimum width for a block with a previous or next\n      // connection.\n      if (Types.isPreviousOrNextConnection(prev)) {\n        return this.constants_.LARGE_PADDING;\n      }\n      // Between rounded corner and the end of the row.\n      if (Types.isLeftRoundedCorner(prev)) {\n        return this.constants_.MIN_BLOCK_WIDTH;\n      }\n      // Between a jagged edge and the end of the row.\n      if (Types.isJaggedEdge(prev)) {\n        return this.constants_.NO_PADDING;\n      }\n      // Between noneditable fields and icons and the end of the row.\n      return this.constants_.LARGE_PADDING;\n    }\n\n    // Between inputs and the end of the row.\n    if (Types.isInput(prev) && !next) {\n      if (Types.isExternalInput(prev)) {\n        return this.constants_.NO_PADDING;\n      } else if (Types.isInlineInput(prev)) {\n        return this.constants_.LARGE_PADDING;\n      } else if (Types.isStatementInput(prev)) {\n        return this.constants_.NO_PADDING;\n      }\n    }\n\n    // Spacing between a non-input and an input.\n    if (!Types.isInput(prev) && next && Types.isInput(next)) {\n      // Between an editable field and an input.\n      if (Types.isField(prev) && (/** @type {Field} */ (prev)).isEditable) {\n        if (Types.isInlineInput(next)) {\n          return this.constants_.SMALL_PADDING;\n        } else if (Types.isExternalInput(next)) {\n          return this.constants_.SMALL_PADDING;\n        }\n      } else {\n        if (Types.isInlineInput(next)) {\n          return this.constants_.MEDIUM_LARGE_PADDING;\n        } else if (Types.isExternalInput(next)) {\n          return this.constants_.MEDIUM_LARGE_PADDING;\n        } else if (Types.isStatementInput(next)) {\n          return this.constants_.LARGE_PADDING;\n        }\n      }\n      return this.constants_.LARGE_PADDING - 1;\n    }\n\n    // Spacing between an icon and an icon or field.\n    if (Types.isIcon(prev) && next && !Types.isInput(next)) {\n      return this.constants_.LARGE_PADDING;\n    }\n\n    // Spacing between an inline input and a field.\n    if (Types.isInlineInput(prev) && next && Types.isField(next)) {\n      // Editable field after inline input.\n      if ((/** @type {Field} */ (next)).isEditable) {\n        return this.constants_.MEDIUM_PADDING;\n      } else {\n        // Noneditable field after inline input.\n        return this.constants_.LARGE_PADDING;\n      }\n    }\n\n    if (Types.isLeftSquareCorner(prev) && next) {\n      // Spacing between a hat and a corner\n      if (Types.isHat(next)) {\n        return this.constants_.NO_PADDING;\n      }\n      // Spacing between a square corner and a previous or next connection\n      if (Types.isPreviousConnection(next)) {\n        return next.notchOffset;\n      } else if (Types.isNextConnection(next)) {\n        // Next connections are shifted slightly to the left (in both LTR and\n        // RTL) to make the dark path under the previous connection show\n        // through.\n        const offset =\n            (this.RTL ? 1 : -1) * this.constants_.DARK_PATH_OFFSET / 2;\n        return next.notchOffset + offset;\n      }\n    }\n\n    // Spacing between a rounded corner and a previous or next connection.\n    if (Types.isLeftRoundedCorner(prev) && next) {\n      if (Types.isPreviousConnection(next)) {\n        return next.notchOffset - this.constants_.CORNER_RADIUS;\n      } else if (Types.isNextConnection(next)) {\n        // Next connections are shifted slightly to the left (in both LTR and\n        // RTL) to make the dark path under the previous connection show\n        // through.\n        const offset =\n            (this.RTL ? 1 : -1) * this.constants_.DARK_PATH_OFFSET / 2;\n        return next.notchOffset - this.constants_.CORNER_RADIUS + offset;\n      }\n    }\n\n    // Spacing between two fields of the same editability.\n    if (Types.isField(prev) && next && Types.isField(next) &&\n        ((/** @type {Field} */ (prev)).isEditable ===\n         (/** @type {Field} */ (next)).isEditable)) {\n      return this.constants_.LARGE_PADDING;\n    }\n\n    // Spacing between anything and a jagged edge.\n    if (next && Types.isJaggedEdge(next)) {\n      return this.constants_.LARGE_PADDING;\n    }\n\n    return this.constants_.MEDIUM_PADDING;\n  }\n\n  /**\n   * @override\n   */\n  getSpacerRowHeight_(prev, next) {\n    // If we have an empty block add a spacer to increase the height.\n    if (Types.isTopRow(prev) && Types.isBottomRow(next)) {\n      return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;\n    }\n    // Top and bottom rows act as a spacer so we don't need any extra padding.\n    if (Types.isTopRow(prev) || Types.isBottomRow(next)) {\n      return this.constants_.NO_PADDING;\n    }\n    if (prev.hasExternalInput && next.hasExternalInput) {\n      return this.constants_.LARGE_PADDING;\n    }\n    if (!prev.hasStatement && next.hasStatement) {\n      return this.constants_.BETWEEN_STATEMENT_PADDING_Y;\n    }\n    if (prev.hasStatement && next.hasStatement) {\n      return this.constants_.LARGE_PADDING;\n    }\n    if (!prev.hasStatement && next.hasDummyInput) {\n      return this.constants_.LARGE_PADDING;\n    }\n    if (prev.hasDummyInput) {\n      return this.constants_.LARGE_PADDING;\n    }\n    return this.constants_.MEDIUM_PADDING;\n  }\n\n  /**\n   * @override\n   */\n  getElemCenterline_(row, elem) {\n    if (Types.isSpacer(elem)) {\n      return row.yPos + elem.height / 2;\n    }\n    if (Types.isBottomRow(row)) {\n      const bottomRow = /** @type {!BottomRow} */ (row);\n      const baseline =\n          bottomRow.yPos + bottomRow.height - bottomRow.descenderHeight;\n      if (Types.isNextConnection(elem)) {\n        return baseline + elem.height / 2;\n      }\n      return baseline - elem.height / 2;\n    }\n    if (Types.isTopRow(row)) {\n      const topRow = /** @type {!TopRow} */ (row);\n      if (Types.isHat(elem)) {\n        return topRow.capline - elem.height / 2;\n      }\n      return topRow.capline + elem.height / 2;\n    }\n\n    let result = row.yPos;\n    if (Types.isField(elem) || Types.isIcon(elem)) {\n      result += (elem.height / 2);\n      if ((row.hasInlineInput || row.hasStatement) &&\n          elem.height + this.constants_.TALL_INPUT_FIELD_OFFSET_Y <=\n              row.height) {\n        result += this.constants_.TALL_INPUT_FIELD_OFFSET_Y;\n      }\n    } else if (Types.isInlineInput(elem)) {\n      result += elem.height / 2;\n    } else {\n      result += (row.height / 2);\n    }\n    return result;\n  }\n\n  /**\n   * @override\n   */\n  alignRowElements_() {\n    if (!this.isInline) {\n      super.alignRowElements_();\n      return;\n    }\n\n    // Walk backgrounds through rows on the block, keeping track of the right\n    // input edge.\n    let nextRightEdge = 0;\n    const rowNextRightEdges = new WeakMap();\n    let prevInput = null;\n    for (let i = this.rows.length - 1, row; (row = this.rows[i]); i--) {\n      rowNextRightEdges.set(row, nextRightEdge);\n      if (Types.isInputRow(row)) {\n        if (row.hasStatement) {\n          this.alignStatementRow_(\n              /** @type {!InputRow} */ (row));\n        }\n        if (prevInput && prevInput.hasStatement &&\n            row.width < prevInput.width) {\n          rowNextRightEdges.set(row, prevInput.width);\n        } else {\n          nextRightEdge = row.width;\n        }\n        prevInput = row;\n      }\n    }\n    // Walk down each row from the top, comparing the prev and next right input\n    // edges and setting the desired width to the max of the two.\n    let prevRightEdge = 0;\n    for (let i = 0, row; (row = this.rows[i]); i++) {\n      if (row.hasStatement) {\n        prevRightEdge = this.getDesiredRowWidth_(row);\n      } else if (Types.isSpacer(row)) {\n        // Set the spacer row to the max of the prev or next input width.\n        row.width = Math.max(prevRightEdge, rowNextRightEdges.get(row));\n      } else {\n        const currentWidth = row.width;\n        const desiredWidth =\n            Math.max(prevRightEdge, rowNextRightEdges.get(row));\n        const missingSpace = desiredWidth - currentWidth;\n        if (missingSpace > 0) {\n          this.addAlignmentPadding_(row, missingSpace);\n        }\n        prevRightEdge = row.width;\n      }\n    }\n  }\n\n  /**\n   * @override\n   */\n  getDesiredRowWidth_(row) {\n    // Limit the width of a statement row when a block is inline.\n    if (this.isInline && row.hasStatement) {\n      return this.statementEdge + this.constants_.MAX_BOTTOM_WIDTH +\n          this.startX;\n    }\n    return super.getDesiredRowWidth_(row);\n  }\n\n  /**\n   * @override\n   */\n  finalize_() {\n    // Performance note: this could be combined with the draw pass, if the time\n    // that this takes is excessive.  But it shouldn't be, because it only\n    // accesses and sets properties that already exist on the objects.\n    let widestRowWithConnectedBlocks = 0;\n    let yCursor = 0;\n    for (let i = 0, row; (row = this.rows[i]); i++) {\n      row.yPos = yCursor;\n      row.xPos = this.startX;\n      yCursor += row.height;\n\n      widestRowWithConnectedBlocks =\n          Math.max(widestRowWithConnectedBlocks, row.widthWithConnectedBlocks);\n      // Add padding to the bottom row if block height is less than minimum\n      const heightWithoutHat = yCursor - this.topRow.ascenderHeight;\n      if (row === this.bottomRow &&\n          heightWithoutHat < this.constants_.MIN_BLOCK_HEIGHT) {\n        // But the hat height shouldn't be part of this.\n        const diff = this.constants_.MIN_BLOCK_HEIGHT - heightWithoutHat;\n        this.bottomRow.height += diff;\n        yCursor += diff;\n      }\n      this.recordElemPositions_(row);\n    }\n    if (this.outputConnection && this.block_.nextConnection &&\n        this.block_.nextConnection.isConnected()) {\n      // Include width of connected block in value to stack width measurement.\n      widestRowWithConnectedBlocks = Math.max(\n          widestRowWithConnectedBlocks,\n          this.block_.nextConnection.targetBlock().getHeightWidth().width -\n              this.constants_.DARK_PATH_OFFSET);\n    }\n\n    this.bottomRow.baseline = yCursor - this.bottomRow.descenderHeight;\n\n    // The dark (lowlight) adds to the size of the block in both x and y.\n    this.widthWithChildren = widestRowWithConnectedBlocks + this.startX +\n        this.constants_.DARK_PATH_OFFSET;\n    this.width += this.constants_.DARK_PATH_OFFSET;\n    this.height = yCursor + this.constants_.DARK_PATH_OFFSET;\n    this.startY = this.topRow.capline;\n  }\n}\n\nexports.RenderInfo = RenderInfo;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Geras renderer.\n */\n'use strict';\n\n/**\n * Geras renderer.\n * @class\n */\ngoog.module('Blockly.geras.Renderer');\n\nconst blockRendering = goog.require('Blockly.blockRendering');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockSvg} = goog.requireType('Blockly.BlockSvg');\n/* eslint-disable-next-line no-unused-vars */\nconst {ConstantProvider: BaseConstantProvider} = goog.requireType('Blockly.blockRendering.ConstantProvider');\nconst {ConstantProvider} = goog.require('Blockly.geras.ConstantProvider');\nconst {Drawer} = goog.require('Blockly.geras.Drawer');\nconst {HighlightConstantProvider} = goog.require('Blockly.geras.HighlightConstantProvider');\nconst {PathObject} = goog.require('Blockly.geras.PathObject');\n/* eslint-disable-next-line no-unused-vars */\nconst {RenderInfo: BaseRenderInfo} = goog.requireType('Blockly.blockRendering.RenderInfo');\nconst {RenderInfo} = goog.require('Blockly.geras.RenderInfo');\nconst {Renderer: BaseRenderer} = goog.require('Blockly.blockRendering.Renderer');\n/* eslint-disable-next-line no-unused-vars */\nconst {Theme} = goog.requireType('Blockly.Theme');\n\n\n/**\n * The geras renderer.\n * @extends {BaseRenderer}\n * @alias Blockly.geras.Renderer\n */\nclass Renderer extends BaseRenderer {\n  /**\n   * @param {string} name The renderer name.\n   * @package\n   */\n  constructor(name) {\n    super(name);\n\n    /**\n     * The renderer's highlight constant provider.\n     * @type {HighlightConstantProvider}\n     * @private\n     */\n    this.highlightConstants_ = null;\n  }\n\n  /**\n   * Initialize the renderer.  Geras has a highlight provider in addition to\n   * the normal constant provider.\n   * @package\n   * @override\n   */\n  init(theme, opt_rendererOverrides) {\n    super.init(theme, opt_rendererOverrides);\n    this.highlightConstants_ = this.makeHighlightConstants_();\n    this.highlightConstants_.init();\n  }\n\n  /**\n   * @override\n   */\n  refreshDom(svg, theme) {\n    super.refreshDom(svg, theme);\n    this.getHighlightConstants().init();\n  }\n\n  /**\n   * @override\n   */\n  makeConstants_() {\n    return new ConstantProvider();\n  }\n\n  /**\n   * Create a new instance of the renderer's render info object.\n   * @param {!BlockSvg} block The block to measure.\n   * @return {!RenderInfo} The render info object.\n   * @protected\n   * @override\n   */\n  makeRenderInfo_(block) {\n    return new RenderInfo(this, block);\n  }\n\n  /**\n   * Create a new instance of the renderer's drawer.\n   * @param {!BlockSvg} block The block to render.\n   * @param {!BaseRenderInfo} info An object containing all information needed\n   *     to render this block.\n   * @return {!Drawer} The drawer.\n   * @protected\n   * @override\n   */\n  makeDrawer_(block, info) {\n    return new Drawer(\n        block,\n        /** @type {!RenderInfo} */ (info));\n  }\n\n  /**\n   * Create a new instance of a renderer path object.\n   * @param {!SVGElement} root The root SVG element.\n   * @param {!Theme.BlockStyle} style The style object to use for colouring.\n   * @return {!PathObject} The renderer path object.\n   * @package\n   * @override\n   */\n  makePathObject(root, style) {\n    return new PathObject(\n        root, style,\n        /** @type {!ConstantProvider} */ (this.getConstants()));\n  }\n\n  /**\n   * Create a new instance of the renderer's highlight constant provider.\n   * @return {!HighlightConstantProvider} The highlight constant provider.\n   * @protected\n   */\n  makeHighlightConstants_() {\n    return new HighlightConstantProvider(\n        /** @type {!BaseConstantProvider} */\n        (this.getConstants()));\n  }\n\n  /**\n   * Get the renderer's highlight constant provider.  We assume that when this\n   * is called, the renderer has already been initialized.\n   * @return {!HighlightConstantProvider} The highlight constant provider.\n   * @package\n   */\n  getHighlightConstants() {\n    return (\n        /** @type {!HighlightConstantProvider} */\n        (this.highlightConstants_));\n  }\n}\n\nblockRendering.register('geras', Renderer);\n\nexports.Renderer = Renderer;\n","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Re-exports of Blockly.geras.* modules.\n */\n'use strict';\n\n/**\n * Re-exports of Blockly.geras.* modules.\n * @namespace Blockly.geras\n */\ngoog.module('Blockly.geras');\n\nconst {ConstantProvider} = goog.require('Blockly.geras.ConstantProvider');\nconst {Drawer} = goog.require('Blockly.geras.Drawer');\nconst {HighlightConstantProvider} = goog.require('Blockly.geras.HighlightConstantProvider');\nconst {Highlighter} = goog.require('Blockly.geras.Highlighter');\nconst {InlineInput} = goog.require('Blockly.geras.InlineInput');\nconst {PathObject} = goog.require('Blockly.geras.PathObject');\nconst {RenderInfo} = goog.require('Blockly.geras.RenderInfo');\nconst {Renderer} = goog.require('Blockly.geras.Renderer');\nconst {StatementInput} = goog.require('Blockly.geras.StatementInput');\n\nexports.ConstantProvider = ConstantProvider;\nexports.Drawer = Drawer;\nexports.HighlightConstantProvider = HighlightConstantProvider;\nexports.Highlighter = Highlighter;\nexports.InlineInput = InlineInput;\nexports.PathObject = PathObject;\nexports.RenderInfo = RenderInfo;\nexports.Renderer = Renderer;\nexports.StatementInput = StatementInput;\n","/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Zelos theme.\n */\n'use strict';\n\n/**\n * Zelos theme.\n * @namespace Blockly.Themes.Zelos\n */\ngoog.module('Blockly.Themes.Zelos');\n\nconst {Theme} = goog.require('Blockly.Theme');\n\n\nconst defaultBlockStyles = {\n  'colour_blocks': {\n    'colourPrimary': '#CF63CF',\n    'colourSecondary': '#C94FC9',\n    'colourTertiary': '#BD42BD',\n  },\n  'list_blocks': {\n    'colourPrimary': '#9966FF',\n    'colourSecondary': '#855CD6',\n    'colourTertiary': '#774DCB',\n  },\n  'logic_blocks': {\n    'colourPrimary': '#4C97FF',\n    'colourSecondary': '#4280D7',\n    'colourTertiary': '#3373CC',\n  },\n  'loop_blocks': {\n    'colourPrimary': '#0fBD8C',\n    'colourSecondary': '#0DA57A',\n    'colourTertiary': '#0B8E69',\n  },\n  'math_blocks': {\n    'colourPrimary': '#59C059',\n    'colourSecondary': '#46B946',\n    'colourTertiary': '#389438',\n  },\n  'procedure_blocks': {\n    'colourPrimary': '#FF6680',\n    'colourSecondary': '#FF4D6A',\n    'colourTertiary': '#FF3355',\n  },\n  'text_blocks': {\n    'colourPrimary': '#FFBF00',\n    'colourSecondary': '#E6AC00',\n    'colourTertiary': '#CC9900',\n  },\n  'variable_blocks': {\n    'colourPrimary': '#FF8C1A',\n    'colourSecondary': '#FF8000',\n    'colourTertiary': '#DB6E00',\n  },\n  'variable_dynamic_blocks': {\n    'colourPrimary': '#FF8C1A',\n    'colourSecondary': '#FF8000',\n    'colourTertiary': '#DB6E00',\n  },\n  'hat_blocks': {\n    'colourPrimary': '#4C97FF',\n    'colourSecondary': '#4280D7',\n    'colourTertiary': '#3373CC',\n    'hat': 'cap',\n  },\n};\n\nconst categoryStyles = {\n  'colour_category': {'colour': '#CF63CF'},\n  'list_category': {'colour': '#9966FF'},\n  'logic_category': {'colour': '#4C97FF'},\n  'loop_category': {'colour': '#0fBD8C'},\n  'math_category': {'colour': '#59C059'},\n  'procedure_category': {'colour': '#FF6680'},\n  'text_category': {'colour': '#FFBF00'},\n  'variable_category': {'colour': '#FF8C1A'},\n  'variable_dynamic_category': {'colour': '#FF8C1A'},\n};\n\n/**\n * Zelos theme.\n * @type {Theme}\n * @alias Blockly.Themes.Zelos\n */\nconst Zelos = new Theme('zelos', defaultBlockStyles, categoryStyles);\n\nexports.Zelos = Zelos;\n","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Namespace for themes.\n */\n'use strict';\n\n/**\n * Namespace for themes.\n * @namespace Blockly.Themes\n */\ngoog.module('Blockly.Themes');\n\nconst {Classic} = goog.require('Blockly.Themes.Classic');\nconst {Zelos} = goog.require('Blockly.Themes.Zelos');\n\n\nexports.Classic = Classic;\nexports.Zelos = Zelos;\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Registers default keyboard shortcuts.\n */\n'use strict';\n\n/**\n * Registers default keyboard shortcuts.\n * @namespace Blockly.ShortcutItems\n */\ngoog.module('Blockly.ShortcutItems');\n\nconst clipboard = goog.require('Blockly.clipboard');\nconst common = goog.require('Blockly.common');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockSvg} = goog.requireType('Blockly.BlockSvg');\nconst {Gesture} = goog.require('Blockly.Gesture');\n/* eslint-disable-next-line no-unused-vars */\nconst {ICopyable} = goog.requireType('Blockly.ICopyable');\nconst {KeyCodes} = goog.require('Blockly.utils.KeyCodes');\nconst {ShortcutRegistry} = goog.require('Blockly.ShortcutRegistry');\n\n\n/**\n * Object holding the names of the default shortcut items.\n * @enum {string}\n * @alias Blockly.ShortcutItems.names\n */\nconst names = {\n  ESCAPE: 'escape',\n  DELETE: 'delete',\n  COPY: 'copy',\n  CUT: 'cut',\n  PASTE: 'paste',\n  UNDO: 'undo',\n  REDO: 'redo',\n};\nexports.names = names;\n\n/**\n * Keyboard shortcut to hide chaff on escape.\n * @alias Blockly.ShortcutItems.registerEscape\n */\nconst registerEscape = function() {\n  /** @type {!ShortcutRegistry.KeyboardShortcut} */\n  const escapeAction = {\n    name: names.ESCAPE,\n    preconditionFn: function(workspace) {\n      return !workspace.options.readOnly;\n    },\n    callback: function(workspace) {\n      workspace.hideChaff();\n      return true;\n    },\n  };\n  ShortcutRegistry.registry.register(escapeAction);\n  ShortcutRegistry.registry.addKeyMapping(KeyCodes.ESC, escapeAction.name);\n};\nexports.registerEscape = registerEscape;\n\n/**\n * Keyboard shortcut to delete a block on delete or backspace\n * @alias Blockly.ShortcutItems.registerDelete\n */\nconst registerDelete = function() {\n  /** @type {!ShortcutRegistry.KeyboardShortcut} */\n  const deleteShortcut = {\n    name: names.DELETE,\n    preconditionFn: function(workspace) {\n      const selected = common.getSelected();\n      return !workspace.options.readOnly && selected && selected.isDeletable();\n    },\n    callback: function(workspace, e) {\n      // Delete or backspace.\n      // Stop the browser from going back to the previous page.\n      // Do this first to prevent an error in the delete code from resulting in\n      // data loss.\n      e.preventDefault();\n      // Don't delete while dragging.  Jeez.\n      if (Gesture.inProgress()) {\n        return false;\n      }\n      (/** @type {!BlockSvg} */ (common.getSelected())).checkAndDelete();\n      return true;\n    },\n  };\n  ShortcutRegistry.registry.register(deleteShortcut);\n  ShortcutRegistry.registry.addKeyMapping(KeyCodes.DELETE, deleteShortcut.name);\n  ShortcutRegistry.registry.addKeyMapping(\n      KeyCodes.BACKSPACE, deleteShortcut.name);\n};\nexports.registerDelete = registerDelete;\n\n/**\n * Keyboard shortcut to copy a block on ctrl+c, cmd+c, or alt+c.\n * @alias Blockly.ShortcutItems.registerCopy\n */\nconst registerCopy = function() {\n  /** @type {!ShortcutRegistry.KeyboardShortcut} */\n  const copyShortcut = {\n    name: names.COPY,\n    preconditionFn: function(workspace) {\n      const selected = common.getSelected();\n      return !workspace.options.readOnly && !Gesture.inProgress() && selected &&\n          selected.isDeletable() && selected.isMovable();\n    },\n    callback: function(workspace, e) {\n      // Prevent the default copy behavior, which may beep or otherwise indicate\n      // an error due to the lack of a selection.\n      e.preventDefault();\n      workspace.hideChaff();\n      clipboard.copy(/** @type {!ICopyable} */ (common.getSelected()));\n      return true;\n    },\n  };\n  ShortcutRegistry.registry.register(copyShortcut);\n\n  const ctrlC = ShortcutRegistry.registry.createSerializedKey(\n      KeyCodes.C, [KeyCodes.CTRL]);\n  ShortcutRegistry.registry.addKeyMapping(ctrlC, copyShortcut.name);\n\n  const altC =\n      ShortcutRegistry.registry.createSerializedKey(KeyCodes.C, [KeyCodes.ALT]);\n  ShortcutRegistry.registry.addKeyMapping(altC, copyShortcut.name);\n\n  const metaC = ShortcutRegistry.registry.createSerializedKey(\n      KeyCodes.C, [KeyCodes.META]);\n  ShortcutRegistry.registry.addKeyMapping(metaC, copyShortcut.name);\n};\nexports.registerCopy = registerCopy;\n\n/**\n * Keyboard shortcut to copy and delete a block on ctrl+x, cmd+x, or alt+x.\n * @alias Blockly.ShortcutItems.registerCut\n */\nconst registerCut = function() {\n  /** @type {!ShortcutRegistry.KeyboardShortcut} */\n  const cutShortcut = {\n    name: names.CUT,\n    preconditionFn: function(workspace) {\n      const selected = common.getSelected();\n      return !workspace.options.readOnly && !Gesture.inProgress() && selected &&\n          selected.isDeletable() && selected.isMovable() &&\n          !selected.workspace.isFlyout;\n    },\n    callback: function() {\n      const selected = common.getSelected();\n      if (!selected) {\n        // Shouldn't happen but appeases the type system\n        return false;\n      }\n      clipboard.copy(selected);\n      (/** @type {!BlockSvg} */ (selected)).checkAndDelete();\n      return true;\n    },\n  };\n\n  ShortcutRegistry.registry.register(cutShortcut);\n\n  const ctrlX = ShortcutRegistry.registry.createSerializedKey(\n      KeyCodes.X, [KeyCodes.CTRL]);\n  ShortcutRegistry.registry.addKeyMapping(ctrlX, cutShortcut.name);\n\n  const altX =\n      ShortcutRegistry.registry.createSerializedKey(KeyCodes.X, [KeyCodes.ALT]);\n  ShortcutRegistry.registry.addKeyMapping(altX, cutShortcut.name);\n\n  const metaX = ShortcutRegistry.registry.createSerializedKey(\n      KeyCodes.X, [KeyCodes.META]);\n  ShortcutRegistry.registry.addKeyMapping(metaX, cutShortcut.name);\n};\nexports.registerCut = registerCut;\n\n/**\n * Keyboard shortcut to paste a block on ctrl+v, cmd+v, or alt+v.\n * @alias Blockly.ShortcutItems.registerPaste\n */\nconst registerPaste = function() {\n  /** @type {!ShortcutRegistry.KeyboardShortcut} */\n  const pasteShortcut = {\n    name: names.PASTE,\n    preconditionFn: function(workspace) {\n      return !workspace.options.readOnly && !Gesture.inProgress();\n    },\n    callback: function() {\n      return clipboard.paste();\n    },\n  };\n\n  ShortcutRegistry.registry.register(pasteShortcut);\n\n  const ctrlV = ShortcutRegistry.registry.createSerializedKey(\n      KeyCodes.V, [KeyCodes.CTRL]);\n  ShortcutRegistry.registry.addKeyMapping(ctrlV, pasteShortcut.name);\n\n  const altV =\n      ShortcutRegistry.registry.createSerializedKey(KeyCodes.V, [KeyCodes.ALT]);\n  ShortcutRegistry.registry.addKeyMapping(altV, pasteShortcut.name);\n\n  const metaV = ShortcutRegistry.registry.createSerializedKey(\n      KeyCodes.V, [KeyCodes.META]);\n  ShortcutRegistry.registry.addKeyMapping(metaV, pasteShortcut.name);\n};\nexports.registerPaste = registerPaste;\n\n/**\n * Keyboard shortcut to undo the previous action on ctrl+z, cmd+z, or alt+z.\n * @alias Blockly.ShortcutItems.registerUndo\n */\nconst registerUndo = function() {\n  /** @type {!ShortcutRegistry.KeyboardShortcut} */\n  const undoShortcut = {\n    name: names.UNDO,\n    preconditionFn: function(workspace) {\n      return !workspace.options.readOnly && !Gesture.inProgress();\n    },\n    callback: function(workspace) {\n      // 'z' for undo 'Z' is for redo.\n      workspace.hideChaff();\n      workspace.undo(false);\n      return true;\n    },\n  };\n  ShortcutRegistry.registry.register(undoShortcut);\n\n  const ctrlZ = ShortcutRegistry.registry.createSerializedKey(\n      KeyCodes.Z, [KeyCodes.CTRL]);\n  ShortcutRegistry.registry.addKeyMapping(ctrlZ, undoShortcut.name);\n\n  const altZ =\n      ShortcutRegistry.registry.createSerializedKey(KeyCodes.Z, [KeyCodes.ALT]);\n  ShortcutRegistry.registry.addKeyMapping(altZ, undoShortcut.name);\n\n  const metaZ = ShortcutRegistry.registry.createSerializedKey(\n      KeyCodes.Z, [KeyCodes.META]);\n  ShortcutRegistry.registry.addKeyMapping(metaZ, undoShortcut.name);\n};\nexports.registerUndo = registerUndo;\n\n/**\n * Keyboard shortcut to redo the previous action on ctrl+shift+z, cmd+shift+z,\n * or alt+shift+z.\n * @alias Blockly.ShortcutItems.registerRedo\n */\nconst registerRedo = function() {\n  /** @type {!ShortcutRegistry.KeyboardShortcut} */\n  const redoShortcut = {\n    name: names.REDO,\n    preconditionFn: function(workspace) {\n      return !Gesture.inProgress() && !workspace.options.readOnly;\n    },\n    callback: function(workspace) {\n      // 'z' for undo 'Z' is for redo.\n      workspace.hideChaff();\n      workspace.undo(true);\n      return true;\n    },\n  };\n  ShortcutRegistry.registry.register(redoShortcut);\n\n  const ctrlShiftZ = ShortcutRegistry.registry.createSerializedKey(\n      KeyCodes.Z, [KeyCodes.SHIFT, KeyCodes.CTRL]);\n  ShortcutRegistry.registry.addKeyMapping(ctrlShiftZ, redoShortcut.name);\n\n  const altShiftZ = ShortcutRegistry.registry.createSerializedKey(\n      KeyCodes.Z, [KeyCodes.SHIFT, KeyCodes.ALT]);\n  ShortcutRegistry.registry.addKeyMapping(altShiftZ, redoShortcut.name);\n\n  const metaShiftZ = ShortcutRegistry.registry.createSerializedKey(\n      KeyCodes.Z, [KeyCodes.SHIFT, KeyCodes.META]);\n  ShortcutRegistry.registry.addKeyMapping(metaShiftZ, redoShortcut.name);\n\n  // Ctrl-y is redo in Windows.  Command-y is never valid on Macs.\n  const ctrlY = ShortcutRegistry.registry.createSerializedKey(\n      KeyCodes.Y, [KeyCodes.CTRL]);\n  ShortcutRegistry.registry.addKeyMapping(ctrlY, redoShortcut.name);\n};\nexports.registerRedo = registerRedo;\n\n/**\n * Registers all default keyboard shortcut item. This should be called once per\n * instance of KeyboardShortcutRegistry.\n * @alias Blockly.ShortcutItems.registerDefaultShortcuts\n * @package\n */\nconst registerDefaultShortcuts = function() {\n  registerEscape();\n  registerDelete();\n  registerCopy();\n  registerCut();\n  registerPaste();\n  registerUndo();\n  registerRedo();\n};\nexports.registerDefaultShortcuts = registerDefaultShortcuts;\n\nregisterDefaultShortcuts();\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Class for a finished loading workspace event.\n */\n'use strict';\n\n/**\n * Class for a finished loading workspace event.\n * @class\n */\ngoog.module('Blockly.Events.FinishedLoading');\n\nconst eventUtils = goog.require('Blockly.Events.utils');\nconst registry = goog.require('Blockly.registry');\nconst {Abstract: AbstractEvent} = goog.require('Blockly.Events.Abstract');\n/* eslint-disable-next-line no-unused-vars */\nconst {Workspace} = goog.requireType('Blockly.Workspace');\n\n\n/**\n * Class for a finished loading event.\n * Used to notify the developer when the workspace has finished loading (i.e\n * domToWorkspace).\n * Finished loading events do not record undo or redo.\n * @extends {AbstractEvent}\n * @alias Blockly.Events.FinishedLoading\n */\nclass FinishedLoading extends AbstractEvent {\n  /**\n   * @param {!Workspace=} opt_workspace The workspace that has finished\n   *    loading.  Undefined for a blank event.\n   */\n  constructor(opt_workspace) {\n    super();\n    /**\n     * Whether or not the event is blank (to be populated by fromJson).\n     * @type {boolean}\n     */\n    this.isBlank = typeof opt_workspace === 'undefined';\n\n    /**\n     * The workspace identifier for this event.\n     * @type {string}\n     */\n    this.workspaceId = opt_workspace ? opt_workspace.id : '';\n\n    // Workspace events do not undo or redo.\n    this.recordUndo = false;\n\n    /**\n     * Type of this event.\n     * @type {string}\n     */\n    this.type = eventUtils.FINISHED_LOADING;\n  }\n\n  /**\n   * Encode the event as JSON.\n   * @return {!Object} JSON representation.\n   */\n  toJson() {\n    const json = {\n      'type': this.type,\n    };\n    if (this.group) {\n      json['group'] = this.group;\n    }\n    if (this.workspaceId) {\n      json['workspaceId'] = this.workspaceId;\n    }\n    return json;\n  }\n\n  /**\n   * Decode the JSON event.\n   * @param {!Object} json JSON representation.\n   */\n  fromJson(json) {\n    this.isBlank = false;\n    this.workspaceId = json['workspaceId'];\n    this.group = json['group'];\n  }\n}\n\nregistry.register(\n    registry.Type.EVENT, eventUtils.FINISHED_LOADING, FinishedLoading);\n\nexports.FinishedLoading = FinishedLoading;\n","/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview (Deprecated) Events fired as a result of UI actions in\n * Blockly's editor.\n */\n'use strict';\n\n/**\n * (Deprecated) Events fired as a result of UI actions in\n * Blockly's editor.\n * @class\n */\ngoog.module('Blockly.Events.Ui');\n\nconst eventUtils = goog.require('Blockly.Events.utils');\nconst registry = goog.require('Blockly.registry');\n/* eslint-disable-next-line no-unused-vars */\nconst {Block} = goog.requireType('Blockly.Block');\nconst {UiBase} = goog.require('Blockly.Events.UiBase');\n\n\n/**\n * Class for a UI event.\n * @extends {UiBase}\n * @deprecated December 2020. Instead use a more specific UI event.\n * @alias Blockly.Events.Ui\n */\nclass Ui extends UiBase {\n  /**\n   * @param {?Block=} opt_block The affected block.  Null for UI events\n   *     that do not have an associated block.  Undefined for a blank event.\n   * @param {string=} opt_element One of 'selected', 'comment', 'mutatorOpen',\n   *     etc.\n   * @param {*=} opt_oldValue Previous value of element.\n   * @param {*=} opt_newValue New value of element.\n   */\n  constructor(opt_block, opt_element, opt_oldValue, opt_newValue) {\n    const workspaceId = opt_block ? opt_block.workspace.id : undefined;\n    super(workspaceId);\n\n    this.blockId = opt_block ? opt_block.id : null;\n    this.element = typeof opt_element === 'undefined' ? '' : opt_element;\n    this.oldValue = typeof opt_oldValue === 'undefined' ? '' : opt_oldValue;\n    this.newValue = typeof opt_newValue === 'undefined' ? '' : opt_newValue;\n\n    /**\n     * Type of this event.\n     * @type {string}\n     */\n    this.type = eventUtils.UI;\n  }\n\n  /**\n   * Encode the event as JSON.\n   * @return {!Object} JSON representation.\n   */\n  toJson() {\n    const json = super.toJson();\n    json['element'] = this.element;\n    if (this.newValue !== undefined) {\n      json['newValue'] = this.newValue;\n    }\n    if (this.blockId) {\n      json['blockId'] = this.blockId;\n    }\n    return json;\n  }\n\n  /**\n   * Decode the JSON event.\n   * @param {!Object} json JSON representation.\n   */\n  fromJson(json) {\n    super.fromJson(json);\n    this.element = json['element'];\n    this.newValue = json['newValue'];\n    this.blockId = json['blockId'];\n  }\n}\n\nregistry.register(registry.Type.EVENT, eventUtils.UI, Ui);\n\nexports.Ui = Ui;\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Events fired as a result of bubble open.\n */\n'use strict';\n\n/**\n * Events fired as a result of bubble open.\n * @class\n */\ngoog.module('Blockly.Events.BubbleOpen');\n\nconst eventUtils = goog.require('Blockly.Events.utils');\nconst registry = goog.require('Blockly.registry');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockSvg} = goog.requireType('Blockly.BlockSvg');\nconst {UiBase} = goog.require('Blockly.Events.UiBase');\n\n\n/**\n * Class for a bubble open event.\n * @extends {UiBase}\n * @alias Blockly.Events.BubbleOpen\n */\nclass BubbleOpen extends UiBase {\n  /**\n   * @param {BlockSvg} opt_block The associated block. Undefined for a\n   *    blank event.\n   * @param {boolean=} opt_isOpen Whether the bubble is opening (false if\n   *    closing). Undefined for a blank event.\n   * @param {string=} opt_bubbleType The type of bubble. One of 'mutator',\n   *     'comment'\n   *    or 'warning'. Undefined for a blank event.\n   */\n  constructor(opt_block, opt_isOpen, opt_bubbleType) {\n    const workspaceId = opt_block ? opt_block.workspace.id : undefined;\n    super(workspaceId);\n    this.blockId = opt_block ? opt_block.id : null;\n\n    /**\n     * Whether the bubble is opening (false if closing).\n     * @type {boolean|undefined}\n     */\n    this.isOpen = opt_isOpen;\n\n    /**\n     * The type of bubble. One of 'mutator', 'comment', or 'warning'.\n     * @type {string|undefined}\n     */\n    this.bubbleType = opt_bubbleType;\n\n    /**\n     * Type of this event.\n     * @type {string}\n     */\n    this.type = eventUtils.BUBBLE_OPEN;\n  }\n\n  /**\n   * Encode the event as JSON.\n   * @return {!Object} JSON representation.\n   */\n  toJson() {\n    const json = super.toJson();\n    json['isOpen'] = this.isOpen;\n    json['bubbleType'] = this.bubbleType;\n    json['blockId'] = this.blockId;\n    return json;\n  }\n\n  /**\n   * Decode the JSON event.\n   * @param {!Object} json JSON representation.\n   */\n  fromJson(json) {\n    super.fromJson(json);\n    this.isOpen = json['isOpen'];\n    this.bubbleType = json['bubbleType'];\n    this.blockId = json['blockId'];\n  }\n}\n\nregistry.register(registry.Type.EVENT, eventUtils.BUBBLE_OPEN, BubbleOpen);\n\nexports.BubbleOpen = BubbleOpen;\n","/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Class for comment change event.\n */\n'use strict';\n\n/**\n * Class for comment change event.\n * @class\n */\ngoog.module('Blockly.Events.CommentChange');\n\nconst eventUtils = goog.require('Blockly.Events.utils');\nconst registry = goog.require('Blockly.registry');\nconst {CommentBase} = goog.require('Blockly.Events.CommentBase');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceComment} = goog.requireType('Blockly.WorkspaceComment');\n\n\n/**\n * Class for a comment change event.\n * @extends {CommentBase}\n * @alias Blockly.Events.CommentChange\n */\nclass CommentChange extends CommentBase {\n  /**\n   * @param {!WorkspaceComment=} opt_comment The comment that is being\n   *     changed.  Undefined for a blank event.\n   * @param {string=} opt_oldContents Previous contents of the comment.\n   * @param {string=} opt_newContents New contents of the comment.\n   */\n  constructor(opt_comment, opt_oldContents, opt_newContents) {\n    super(opt_comment);\n\n    /**\n     * Type of this event.\n     * @type {string}\n     */\n    this.type = eventUtils.COMMENT_CHANGE;\n\n    if (!opt_comment) {\n      return;  // Blank event to be populated by fromJson.\n    }\n\n    this.oldContents_ =\n        typeof opt_oldContents === 'undefined' ? '' : opt_oldContents;\n    this.newContents_ =\n        typeof opt_newContents === 'undefined' ? '' : opt_newContents;\n  }\n\n  /**\n   * Encode the event as JSON.\n   * @return {!Object} JSON representation.\n   */\n  toJson() {\n    const json = super.toJson();\n    json['oldContents'] = this.oldContents_;\n    json['newContents'] = this.newContents_;\n    return json;\n  }\n\n  /**\n   * Decode the JSON event.\n   * @param {!Object} json JSON representation.\n   */\n  fromJson(json) {\n    super.fromJson(json);\n    this.oldContents_ = json['oldContents'];\n    this.newContents_ = json['newContents'];\n  }\n\n  /**\n   * Does this event record any change of state?\n   * @return {boolean} False if something changed.\n   */\n  isNull() {\n    return this.oldContents_ === this.newContents_;\n  }\n\n  /**\n   * Run a change event.\n   * @param {boolean} forward True if run forward, false if run backward (undo).\n   */\n  run(forward) {\n    const workspace = this.getEventWorkspace_();\n    const comment = workspace.getCommentById(this.commentId);\n    if (!comment) {\n      console.warn('Can\\'t change non-existent comment: ' + this.commentId);\n      return;\n    }\n    const contents = forward ? this.newContents_ : this.oldContents_;\n\n    comment.setContent(contents);\n  }\n}\n\nregistry.register(\n    registry.Type.EVENT, eventUtils.COMMENT_CHANGE, CommentChange);\n\nexports.CommentChange = CommentChange;\n","/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Class for comment creation event.\n */\n'use strict';\n\n/**\n * Class for comment creation event.\n * @class\n */\ngoog.module('Blockly.Events.CommentCreate');\n\nconst Xml = goog.require('Blockly.Xml');\nconst eventUtils = goog.require('Blockly.Events.utils');\nconst registry = goog.require('Blockly.registry');\nconst {CommentBase} = goog.require('Blockly.Events.CommentBase');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceComment} = goog.requireType('Blockly.WorkspaceComment');\n\n\n/**\n * Class for a comment creation event.\n * @extends {CommentBase}\n * @alias Blockly.Events.CommentCreate\n */\nclass CommentCreate extends CommentBase {\n  /**\n   * @param {!WorkspaceComment=} opt_comment The created comment.\n   *     Undefined for a blank event.\n   */\n  constructor(opt_comment) {\n    super(opt_comment);\n\n    /**\n     * Type of this event.\n     * @type {string}\n     */\n    this.type = eventUtils.COMMENT_CREATE;\n\n    if (!opt_comment) {\n      return;  // Blank event to be populated by fromJson.\n    }\n\n    this.xml = opt_comment.toXmlWithXY();\n  }\n\n  // TODO (#1266): \"Full\" and \"minimal\" serialization.\n  /**\n   * Encode the event as JSON.\n   * @return {!Object} JSON representation.\n   */\n  toJson() {\n    const json = super.toJson();\n    json['xml'] = Xml.domToText(this.xml);\n    return json;\n  }\n\n  /**\n   * Decode the JSON event.\n   * @param {!Object} json JSON representation.\n   */\n  fromJson(json) {\n    super.fromJson(json);\n    this.xml = Xml.textToDom(json['xml']);\n  }\n\n  /**\n   * Run a creation event.\n   * @param {boolean} forward True if run forward, false if run backward (undo).\n   */\n  run(forward) {\n    CommentBase.CommentCreateDeleteHelper(this, forward);\n  }\n}\n\nregistry.register(\n    registry.Type.EVENT, eventUtils.COMMENT_CREATE, CommentCreate);\n\nexports.CommentCreate = CommentCreate;\n","/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Class for comment deletion event.\n */\n'use strict';\n\n/**\n * Class for comment deletion event.\n * @class\n */\ngoog.module('Blockly.Events.CommentDelete');\n\nconst eventUtils = goog.require('Blockly.Events.utils');\nconst registry = goog.require('Blockly.registry');\nconst {CommentBase} = goog.require('Blockly.Events.CommentBase');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceComment} = goog.requireType('Blockly.WorkspaceComment');\n\n\n/**\n * Class for a comment deletion event.\n * @extends {CommentBase}\n * @alias Blockly.Events.CommentDelete\n */\nclass CommentDelete extends CommentBase {\n  /**\n   * @param {!WorkspaceComment=} opt_comment The deleted comment.\n   *     Undefined for a blank event.\n   */\n  constructor(opt_comment) {\n    super(opt_comment);\n\n    /**\n     * Type of this event.\n     * @type {string}\n     */\n    this.type = eventUtils.COMMENT_DELETE;\n\n    if (!opt_comment) {\n      return;  // Blank event to be populated by fromJson.\n    }\n\n    this.xml = opt_comment.toXmlWithXY();\n  }\n\n  // TODO (#1266): \"Full\" and \"minimal\" serialization.\n  /**\n   * Encode the event as JSON.\n   * @return {!Object} JSON representation.\n   */\n  toJson() {\n    const json = super.toJson();\n    return json;\n  }\n\n  /**\n   * Decode the JSON event.\n   * @param {!Object} json JSON representation.\n   */\n  fromJson(json) {\n    super.fromJson(json);\n  }\n\n  /**\n   * Run a creation event.\n   * @param {boolean} forward True if run forward, false if run backward (undo).\n   */\n  run(forward) {\n    CommentBase.CommentCreateDeleteHelper(this, !forward);\n  }\n}\n\nregistry.register(\n    registry.Type.EVENT, eventUtils.COMMENT_DELETE, CommentDelete);\n\nexports.CommentDelete = CommentDelete;\n","/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Events fired as a result of trashcan flyout open and close.\n */\n'use strict';\n\n/**\n * Events fired as a result of trashcan flyout open and close.\n * @class\n */\ngoog.module('Blockly.Events.TrashcanOpen');\n\nconst eventUtils = goog.require('Blockly.Events.utils');\nconst registry = goog.require('Blockly.registry');\nconst {UiBase} = goog.require('Blockly.Events.UiBase');\n\n\n/**\n * Class for a trashcan open event.\n * @extends {UiBase}\n * @alias Blockly.Events.TrashcanOpen\n */\nclass TrashcanOpen extends UiBase {\n  /**\n   * @param {boolean=} opt_isOpen Whether the trashcan flyout is opening (false\n   *     if opening). Undefined for a blank event.\n   * @param {string=} opt_workspaceId The workspace identifier for this event.\n   *    Undefined for a blank event.\n   */\n  constructor(opt_isOpen, opt_workspaceId) {\n    super(opt_workspaceId);\n\n    /**\n     * Whether the trashcan flyout is opening (false if closing).\n     * @type {boolean|undefined}\n     */\n    this.isOpen = opt_isOpen;\n\n    /**\n     * Type of this event.\n     * @type {string}\n     */\n    this.type = eventUtils.TRASHCAN_OPEN;\n  }\n\n  /**\n   * Encode the event as JSON.\n   * @return {!Object} JSON representation.\n   */\n  toJson() {\n    const json = super.toJson();\n    json['isOpen'] = this.isOpen;\n    return json;\n  }\n\n  /**\n   * Decode the JSON event.\n   * @param {!Object} json JSON representation.\n   */\n  fromJson(json) {\n    super.fromJson(json);\n    this.isOpen = json['isOpen'];\n  }\n}\n\nregistry.register(registry.Type.EVENT, eventUtils.TRASHCAN_OPEN, TrashcanOpen);\n\nexports.TrashcanOpen = TrashcanOpen;\n","/**\n * @license\n * Copyright 2016 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Events fired as a result of actions in Blockly's editor.\n */\n'use strict';\n\n/**\n * Events fired as a result of actions in Blockly's editor.\n * @namespace Blockly.Events\n */\ngoog.module('Blockly.Events');\n\nconst deprecation = goog.require('Blockly.utils.deprecation');\nconst eventUtils = goog.require('Blockly.Events.utils');\nconst {Abstract: AbstractEvent} = goog.require('Blockly.Events.Abstract');\nconst {BlockBase} = goog.require('Blockly.Events.BlockBase');\nconst {BlockChange} = goog.require('Blockly.Events.BlockChange');\nconst {BlockCreate} = goog.require('Blockly.Events.BlockCreate');\nconst {BlockDelete} = goog.require('Blockly.Events.BlockDelete');\nconst {BlockDrag} = goog.require('Blockly.Events.BlockDrag');\nconst {BlockMove} = goog.require('Blockly.Events.BlockMove');\nconst {BubbleOpen} = goog.require('Blockly.Events.BubbleOpen');\nconst {Click} = goog.require('Blockly.Events.Click');\nconst {CommentBase} = goog.require('Blockly.Events.CommentBase');\nconst {CommentChange} = goog.require('Blockly.Events.CommentChange');\nconst {CommentCreate} = goog.require('Blockly.Events.CommentCreate');\nconst {CommentDelete} = goog.require('Blockly.Events.CommentDelete');\nconst {CommentMove} = goog.require('Blockly.Events.CommentMove');\nconst {FinishedLoading} = goog.require('Blockly.Events.FinishedLoading');\nconst {MarkerMove} = goog.require('Blockly.Events.MarkerMove');\nconst {Selected} = goog.require('Blockly.Events.Selected');\nconst {ThemeChange} = goog.require('Blockly.Events.ThemeChange');\nconst {ToolboxItemSelect} = goog.require('Blockly.Events.ToolboxItemSelect');\nconst {TrashcanOpen} = goog.require('Blockly.Events.TrashcanOpen');\nconst {UiBase} = goog.require('Blockly.Events.UiBase');\nconst {Ui} = goog.require('Blockly.Events.Ui');\nconst {VarBase} = goog.require('Blockly.Events.VarBase');\nconst {VarCreate} = goog.require('Blockly.Events.VarCreate');\nconst {VarDelete} = goog.require('Blockly.Events.VarDelete');\nconst {VarRename} = goog.require('Blockly.Events.VarRename');\nconst {ViewportChange} = goog.require('Blockly.Events.ViewportChange');\n\n\n// Events.\nexports.Abstract = AbstractEvent;\nexports.BubbleOpen = BubbleOpen;\nexports.BlockBase = BlockBase;\nexports.BlockChange = BlockChange;\nexports.BlockCreate = BlockCreate;\nexports.BlockDelete = BlockDelete;\nexports.BlockDrag = BlockDrag;\nexports.BlockMove = BlockMove;\nexports.Click = Click;\nexports.CommentBase = CommentBase;\nexports.CommentChange = CommentChange;\nexports.CommentCreate = CommentCreate;\nexports.CommentDelete = CommentDelete;\nexports.CommentMove = CommentMove;\nexports.FinishedLoading = FinishedLoading;\nexports.MarkerMove = MarkerMove;\nexports.Selected = Selected;\nexports.ThemeChange = ThemeChange;\nexports.ToolboxItemSelect = ToolboxItemSelect;\nexports.TrashcanOpen = TrashcanOpen;\nexports.Ui = Ui;\nexports.UiBase = UiBase;\nexports.VarBase = VarBase;\nexports.VarCreate = VarCreate;\nexports.VarDelete = VarDelete;\nexports.VarRename = VarRename;\nexports.ViewportChange = ViewportChange;\n\n// Event types.\nexports.BLOCK_CHANGE = eventUtils.BLOCK_CHANGE;\nexports.BLOCK_CREATE = eventUtils.BLOCK_CREATE;\nexports.BLOCK_DELETE = eventUtils.BLOCK_DELETE;\nexports.BLOCK_DRAG = eventUtils.BLOCK_DRAG;\nexports.BLOCK_MOVE = eventUtils.BLOCK_MOVE;\nexports.BUBBLE_OPEN = eventUtils.BUBBLE_OPEN;\nexports.BumpEvent = eventUtils.BumpEvent;\nexports.BUMP_EVENTS = eventUtils.BUMP_EVENTS;\nexports.CHANGE = eventUtils.CHANGE;\nexports.CLICK = eventUtils.CLICK;\nexports.COMMENT_CHANGE = eventUtils.COMMENT_CHANGE;\nexports.COMMENT_CREATE = eventUtils.COMMENT_CREATE;\nexports.COMMENT_DELETE = eventUtils.COMMENT_DELETE;\nexports.COMMENT_MOVE = eventUtils.COMMENT_MOVE;\nexports.CREATE = eventUtils.CREATE;\nexports.DELETE = eventUtils.DELETE;\nexports.FINISHED_LOADING = eventUtils.FINISHED_LOADING;\nexports.MARKER_MOVE = eventUtils.MARKER_MOVE;\nexports.MOVE = eventUtils.MOVE;\nexports.SELECTED = eventUtils.SELECTED;\nexports.THEME_CHANGE = eventUtils.THEME_CHANGE;\nexports.TOOLBOX_ITEM_SELECT = eventUtils.TOOLBOX_ITEM_SELECT;\nexports.TRASHCAN_OPEN = eventUtils.TRASHCAN_OPEN;\nexports.UI = eventUtils.UI;\nexports.VAR_CREATE = eventUtils.VAR_CREATE;\nexports.VAR_DELETE = eventUtils.VAR_DELETE;\nexports.VAR_RENAME = eventUtils.VAR_RENAME;\nexports.VIEWPORT_CHANGE = eventUtils.VIEWPORT_CHANGE;\n\n// Event utils.\nexports.clearPendingUndo = eventUtils.clearPendingUndo;\nexports.disable = eventUtils.disable;\nexports.enable = eventUtils.enable;\nexports.filter = eventUtils.filter;\nexports.fire = eventUtils.fire;\nexports.fromJson = eventUtils.fromJson;\nexports.getDescendantIds = eventUtils.getDescendantIds;\nexports.get = eventUtils.get;\nexports.getGroup = eventUtils.getGroup;\nexports.getRecordUndo = eventUtils.getRecordUndo;\nexports.isEnabled = eventUtils.isEnabled;\nexports.setGroup = eventUtils.setGroup;\nexports.setRecordUndo = eventUtils.setRecordUndo;\nexports.disableOrphans = eventUtils.disableOrphans;\n\nObject.defineProperties(exports, {\n  /**\n   * Sets whether the next event should be added to the undo stack.\n   * @name Blockly.Evenents.recordUndo\n   * @type {boolean}\n   * @deprecated Use Blockly.Events.getRecordUndo() and\n   *     .setRecordUndo().  (September 2021)\n   * @suppress {checkTypes}\n   */\n  recordUndo: {\n    get: function() {\n      deprecation.warn(\n          'Blockly.Events.recordUndo', 'September 2021', 'September 2022',\n          'Blockly.Events.getRecordUndo()');\n      return eventUtils.getRecordUndo();\n    },\n    set: function(record) {\n      deprecation.warn(\n          'Blockly.Events.recordUndo', 'September 2021', 'September 2022',\n          'Blockly.Events.setRecordUndo()');\n      eventUtils.setRecordUndo(record);\n    },\n  },\n});\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Registers default context menu items.\n */\n'use strict';\n\n/**\n * Registers default context menu items.\n * @namespace Blockly.ContextMenuItems\n */\ngoog.module('Blockly.ContextMenuItems');\n\nconst Events = goog.require('Blockly.Events');\nconst clipboard = goog.require('Blockly.clipboard');\nconst dialog = goog.require('Blockly.dialog');\nconst eventUtils = goog.require('Blockly.Events.utils');\nconst idGenerator = goog.require('Blockly.utils.idGenerator');\nconst userAgent = goog.require('Blockly.utils.userAgent');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockSvg} = goog.requireType('Blockly.BlockSvg');\nconst {ContextMenuRegistry} = goog.require('Blockly.ContextMenuRegistry');\nconst {Msg} = goog.require('Blockly.Msg');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceSvg} = goog.requireType('Blockly.WorkspaceSvg');\nconst {inputTypes} = goog.require('Blockly.inputTypes');\n\n\n/**\n * Option to undo previous action.\n * @alias Blockly.ContextMenuItems.registerUndo\n */\nconst registerUndo = function() {\n  /** @type {!ContextMenuRegistry.RegistryItem} */\n  const undoOption = {\n    displayText: function() {\n      return Msg['UNDO'];\n    },\n    preconditionFn: function(/** @type {!ContextMenuRegistry.Scope} */\n                             scope) {\n      if (scope.workspace.getUndoStack().length > 0) {\n        return 'enabled';\n      }\n      return 'disabled';\n    },\n    callback: function(/** @type {!ContextMenuRegistry.Scope} */\n                       scope) {\n      scope.workspace.undo(false);\n    },\n    scopeType: ContextMenuRegistry.ScopeType.WORKSPACE,\n    id: 'undoWorkspace',\n    weight: 1,\n  };\n  ContextMenuRegistry.registry.register(undoOption);\n};\nexports.registerUndo = registerUndo;\n\n/**\n * Option to redo previous action.\n * @alias Blockly.ContextMenuItems.registerRedo\n */\nconst registerRedo = function() {\n  /** @type {!ContextMenuRegistry.RegistryItem} */\n  const redoOption = {\n    displayText: function() {\n      return Msg['REDO'];\n    },\n    preconditionFn: function(/** @type {!ContextMenuRegistry.Scope} */\n                             scope) {\n      if (scope.workspace.getRedoStack().length > 0) {\n        return 'enabled';\n      }\n      return 'disabled';\n    },\n    callback: function(/** @type {!ContextMenuRegistry.Scope} */\n                       scope) {\n      scope.workspace.undo(true);\n    },\n    scopeType: ContextMenuRegistry.ScopeType.WORKSPACE,\n    id: 'redoWorkspace',\n    weight: 2,\n  };\n  ContextMenuRegistry.registry.register(redoOption);\n};\nexports.registerRedo = registerRedo;\n\n/**\n * Option to clean up blocks.\n * @alias Blockly.ContextMenuItems.registerCleanup\n */\nconst registerCleanup = function() {\n  /** @type {!ContextMenuRegistry.RegistryItem} */\n  const cleanOption = {\n    displayText: function() {\n      return Msg['CLEAN_UP'];\n    },\n    preconditionFn: function(/** @type {!ContextMenuRegistry.Scope} */\n                             scope) {\n      if (scope.workspace.isMovable()) {\n        if (scope.workspace.getTopBlocks(false).length > 1) {\n          return 'enabled';\n        }\n        return 'disabled';\n      }\n      return 'hidden';\n    },\n    callback: function(/** @type {!ContextMenuRegistry.Scope} */\n                       scope) {\n      scope.workspace.cleanUp();\n    },\n    scopeType: ContextMenuRegistry.ScopeType.WORKSPACE,\n    id: 'cleanWorkspace',\n    weight: 3,\n  };\n  ContextMenuRegistry.registry.register(cleanOption);\n};\nexports.registerCleanup = registerCleanup;\n\n/**\n * Creates a callback to collapse or expand top blocks.\n * @param {boolean} shouldCollapse Whether a block should collapse.\n * @param {!Array<BlockSvg>} topBlocks Top blocks in the workspace.\n * @private\n */\nconst toggleOption_ = function(shouldCollapse, topBlocks) {\n  const DELAY = 10;\n  let ms = 0;\n  let timeoutCounter = 0;\n  const timeoutFn = function(block) {\n    timeoutCounter--;\n    block.setCollapsed(shouldCollapse);\n    if (timeoutCounter === 0) {\n      Events.setGroup(false);\n    }\n  };\n  Events.setGroup(true);\n  for (let i = 0; i < topBlocks.length; i++) {\n    let block = topBlocks[i];\n    while (block) {\n      timeoutCounter++;\n      setTimeout(timeoutFn.bind(null, block), ms);\n      block = block.getNextBlock();\n      ms += DELAY;\n    }\n  }\n};\n\n/**\n * Option to collapse all blocks.\n * @alias Blockly.ContextMenuItems.registerCollapse\n */\nconst registerCollapse = function() {\n  /** @type {!ContextMenuRegistry.RegistryItem} */\n  const collapseOption = {\n    displayText: function() {\n      return Msg['COLLAPSE_ALL'];\n    },\n    preconditionFn: function(/** @type {!ContextMenuRegistry.Scope} */\n                             scope) {\n      if (scope.workspace.options.collapse) {\n        const topBlocks = scope.workspace.getTopBlocks(false);\n        for (let i = 0; i < topBlocks.length; i++) {\n          let block = topBlocks[i];\n          while (block) {\n            if (!block.isCollapsed()) {\n              return 'enabled';\n            }\n            block = block.getNextBlock();\n          }\n        }\n        return 'disabled';\n      }\n      return 'hidden';\n    },\n    callback: function(/** @type {!ContextMenuRegistry.Scope} */\n                       scope) {\n      toggleOption_(true, scope.workspace.getTopBlocks(true));\n    },\n    scopeType: ContextMenuRegistry.ScopeType.WORKSPACE,\n    id: 'collapseWorkspace',\n    weight: 4,\n  };\n  ContextMenuRegistry.registry.register(collapseOption);\n};\nexports.registerCollapse = registerCollapse;\n\n/**\n * Option to expand all blocks.\n * @alias Blockly.ContextMenuItems.registerExpand\n */\nconst registerExpand = function() {\n  /** @type {!ContextMenuRegistry.RegistryItem} */\n  const expandOption = {\n    displayText: function() {\n      return Msg['EXPAND_ALL'];\n    },\n    preconditionFn: function(/** @type {!ContextMenuRegistry.Scope} */\n                             scope) {\n      if (scope.workspace.options.collapse) {\n        const topBlocks = scope.workspace.getTopBlocks(false);\n        for (let i = 0; i < topBlocks.length; i++) {\n          let block = topBlocks[i];\n          while (block) {\n            if (block.isCollapsed()) {\n              return 'enabled';\n            }\n            block = block.getNextBlock();\n          }\n        }\n        return 'disabled';\n      }\n      return 'hidden';\n    },\n    callback: function(/** @type {!ContextMenuRegistry.Scope} */\n                       scope) {\n      toggleOption_(false, scope.workspace.getTopBlocks(true));\n    },\n    scopeType: ContextMenuRegistry.ScopeType.WORKSPACE,\n    id: 'expandWorkspace',\n    weight: 5,\n  };\n  ContextMenuRegistry.registry.register(expandOption);\n};\nexports.registerExpand = registerExpand;\n\n/**\n * Adds a block and its children to a list of deletable blocks.\n * @param {!BlockSvg} block to delete.\n * @param {!Array<!BlockSvg>} deleteList list of blocks that can be deleted.\n *     This will be\n *    modified in place with the given block and its descendants.\n * @private\n */\nconst addDeletableBlocks_ = function(block, deleteList) {\n  if (block.isDeletable()) {\n    Array.prototype.push.apply(deleteList, block.getDescendants(false));\n  } else {\n    const children = block.getChildren(false);\n    for (let i = 0; i < children.length; i++) {\n      addDeletableBlocks_(children[i], deleteList);\n    }\n  }\n};\n\n/**\n * Constructs a list of blocks that can be deleted in the given workspace.\n * @param {!WorkspaceSvg} workspace to delete all blocks from.\n * @return {!Array<!BlockSvg>} list of blocks to delete.\n * @private\n */\nconst getDeletableBlocks_ = function(workspace) {\n  const deleteList = [];\n  const topBlocks = workspace.getTopBlocks(true);\n  for (let i = 0; i < topBlocks.length; i++) {\n    addDeletableBlocks_(topBlocks[i], deleteList);\n  }\n  return deleteList;\n};\n\n/**\n * Deletes the given blocks. Used to delete all blocks in the workspace.\n * @param {!Array<!BlockSvg>} deleteList list of blocks to delete.\n * @param {string} eventGroup event group ID with which all delete events should\n *     be associated.\n * @private\n */\nconst deleteNext_ = function(deleteList, eventGroup) {\n  const DELAY = 10;\n  eventUtils.setGroup(eventGroup);\n  const block = deleteList.shift();\n  if (block) {\n    if (block.workspace) {\n      block.dispose(false, true);\n      setTimeout(deleteNext_, DELAY, deleteList, eventGroup);\n    } else {\n      deleteNext_(deleteList, eventGroup);\n    }\n  }\n  eventUtils.setGroup(false);\n};\n\n/**\n * Option to delete all blocks.\n * @alias Blockly.ContextMenuItems.registerDeleteAll\n */\nconst registerDeleteAll = function() {\n  /** @type {!ContextMenuRegistry.RegistryItem} */\n  const deleteOption = {\n    displayText: function(/** @type {!ContextMenuRegistry.Scope} */\n                          scope) {\n      if (!scope.workspace) {\n        return;\n      }\n      const deletableBlocksLength = getDeletableBlocks_(scope.workspace).length;\n      if (deletableBlocksLength === 1) {\n        return Msg['DELETE_BLOCK'];\n      } else {\n        return Msg['DELETE_X_BLOCKS'].replace(\n            '%1', String(deletableBlocksLength));\n      }\n    },\n    preconditionFn: function(/** @type {!ContextMenuRegistry.Scope} */\n                             scope) {\n      if (!scope.workspace) {\n        return;\n      }\n      const deletableBlocksLength = getDeletableBlocks_(scope.workspace).length;\n      return deletableBlocksLength > 0 ? 'enabled' : 'disabled';\n    },\n    callback: function(/** @type {!ContextMenuRegistry.Scope} */\n                       scope) {\n      if (!scope.workspace) {\n        return;\n      }\n      scope.workspace.cancelCurrentGesture();\n      const deletableBlocks = getDeletableBlocks_(scope.workspace);\n      const eventGroup = idGenerator.genUid();\n      if (deletableBlocks.length < 2) {\n        deleteNext_(deletableBlocks, eventGroup);\n      } else {\n        dialog.confirm(\n            Msg['DELETE_ALL_BLOCKS'].replace(\n                '%1', String(deletableBlocks.length)),\n            function(ok) {\n              if (ok) {\n                deleteNext_(deletableBlocks, eventGroup);\n              }\n            });\n      }\n    },\n    scopeType: ContextMenuRegistry.ScopeType.WORKSPACE,\n    id: 'workspaceDelete',\n    weight: 6,\n  };\n  ContextMenuRegistry.registry.register(deleteOption);\n};\nexports.registerDeleteAll = registerDeleteAll;\n\n/**\n * Registers all workspace-scoped context menu items.\n * @private\n */\nconst registerWorkspaceOptions_ = function() {\n  registerUndo();\n  registerRedo();\n  registerCleanup();\n  registerCollapse();\n  registerExpand();\n  registerDeleteAll();\n};\n\n/**\n * Option to duplicate a block.\n * @alias Blockly.ContextMenuItems.registerDuplicate\n */\nconst registerDuplicate = function() {\n  /** @type {!ContextMenuRegistry.RegistryItem} */\n  const duplicateOption = {\n    displayText: function() {\n      return Msg['DUPLICATE_BLOCK'];\n    },\n    preconditionFn: function(/** @type {!ContextMenuRegistry.Scope} */\n                             scope) {\n      const block = scope.block;\n      if (!block.isInFlyout && block.isDeletable() && block.isMovable()) {\n        if (block.isDuplicatable()) {\n          return 'enabled';\n        }\n        return 'disabled';\n      }\n      return 'hidden';\n    },\n    callback: function(/** @type {!ContextMenuRegistry.Scope} */\n                       scope) {\n      if (scope.block) {\n        clipboard.duplicate(scope.block);\n      }\n    },\n    scopeType: ContextMenuRegistry.ScopeType.BLOCK,\n    id: 'blockDuplicate',\n    weight: 1,\n  };\n  ContextMenuRegistry.registry.register(duplicateOption);\n};\nexports.registerDuplicate = registerDuplicate;\n\n/**\n * Option to add or remove block-level comment.\n * @alias Blockly.ContextMenuItems.registerComment\n */\nconst registerComment = function() {\n  /** @type {!ContextMenuRegistry.RegistryItem} */\n  const commentOption = {\n    displayText: function(/** @type {!ContextMenuRegistry.Scope} */\n                          scope) {\n      if (scope.block.getCommentIcon()) {\n        // If there's already a comment,  option is to remove.\n        return Msg['REMOVE_COMMENT'];\n      }\n      // If there's no comment yet, option is to add.\n      return Msg['ADD_COMMENT'];\n    },\n    preconditionFn: function(/** @type {!ContextMenuRegistry.Scope} */\n                             scope) {\n      const block = scope.block;\n      // IE doesn't support necessary features for comment editing.\n      if (!userAgent.IE && !block.isInFlyout &&\n          block.workspace.options.comments && !block.isCollapsed() &&\n          block.isEditable()) {\n        return 'enabled';\n      }\n      return 'hidden';\n    },\n    callback: function(/** @type {!ContextMenuRegistry.Scope} */\n                       scope) {\n      const block = scope.block;\n      if (block.getCommentIcon()) {\n        block.setCommentText(null);\n      } else {\n        block.setCommentText('');\n      }\n    },\n    scopeType: ContextMenuRegistry.ScopeType.BLOCK,\n    id: 'blockComment',\n    weight: 2,\n  };\n  ContextMenuRegistry.registry.register(commentOption);\n};\nexports.registerComment = registerComment;\n\n/**\n * Option to inline variables.\n * @alias Blockly.ContextMenuItems.registerInline\n */\nconst registerInline = function() {\n  /** @type {!ContextMenuRegistry.RegistryItem} */\n  const inlineOption = {\n    displayText: function(/** @type {!ContextMenuRegistry.Scope} */\n                          scope) {\n      return (scope.block.getInputsInline()) ? Msg['EXTERNAL_INPUTS'] :\n                                               Msg['INLINE_INPUTS'];\n    },\n    preconditionFn: function(/** @type {!ContextMenuRegistry.Scope} */\n                             scope) {\n      const block = scope.block;\n      if (!block.isInFlyout && block.isMovable() && !block.isCollapsed()) {\n        for (let i = 1; i < block.inputList.length; i++) {\n          // Only display this option if there are two value or dummy inputs\n          // next to each other.\n          if (block.inputList[i - 1].type !== inputTypes.STATEMENT &&\n              block.inputList[i].type !== inputTypes.STATEMENT) {\n            return 'enabled';\n          }\n        }\n      }\n      return 'hidden';\n    },\n    callback: function(/** @type {!ContextMenuRegistry.Scope} */\n                       scope) {\n      scope.block.setInputsInline(!scope.block.getInputsInline());\n    },\n    scopeType: ContextMenuRegistry.ScopeType.BLOCK,\n    id: 'blockInline',\n    weight: 3,\n  };\n  ContextMenuRegistry.registry.register(inlineOption);\n};\nexports.registerInline = registerInline;\n\n/**\n * Option to collapse or expand a block.\n * @alias Blockly.ContextMenuItems.registerCollapseExpandBlock\n */\nconst registerCollapseExpandBlock = function() {\n  /** @type {!ContextMenuRegistry.RegistryItem} */\n  const collapseExpandOption = {\n    displayText: function(/** @type {!ContextMenuRegistry.Scope} */\n                          scope) {\n      return scope.block.isCollapsed() ? Msg['EXPAND_BLOCK'] :\n                                         Msg['COLLAPSE_BLOCK'];\n    },\n    preconditionFn: function(/** @type {!ContextMenuRegistry.Scope} */\n                             scope) {\n      const block = scope.block;\n      if (!block.isInFlyout && block.isMovable() &&\n          block.workspace.options.collapse) {\n        return 'enabled';\n      }\n      return 'hidden';\n    },\n    callback: function(/** @type {!ContextMenuRegistry.Scope} */\n                       scope) {\n      scope.block.setCollapsed(!scope.block.isCollapsed());\n    },\n    scopeType: ContextMenuRegistry.ScopeType.BLOCK,\n    id: 'blockCollapseExpand',\n    weight: 4,\n  };\n  ContextMenuRegistry.registry.register(collapseExpandOption);\n};\nexports.registerCollapseExpandBlock = registerCollapseExpandBlock;\n\n/**\n * Option to disable or enable a block.\n * @alias Blockly.ContextMenuItems.registerDisable\n */\nconst registerDisable = function() {\n  /** @type {!ContextMenuRegistry.RegistryItem} */\n  const disableOption = {\n    displayText: function(/** @type {!ContextMenuRegistry.Scope} */\n                          scope) {\n      return (scope.block.isEnabled()) ? Msg['DISABLE_BLOCK'] :\n                                         Msg['ENABLE_BLOCK'];\n    },\n    preconditionFn: function(/** @type {!ContextMenuRegistry.Scope} */\n                             scope) {\n      const block = scope.block;\n      if (!block.isInFlyout && block.workspace.options.disable &&\n          block.isEditable()) {\n        if (block.getInheritedDisabled()) {\n          return 'disabled';\n        }\n        return 'enabled';\n      }\n      return 'hidden';\n    },\n    callback: function(/** @type {!ContextMenuRegistry.Scope} */\n                       scope) {\n      const block = scope.block;\n      const group = eventUtils.getGroup();\n      if (!group) {\n        eventUtils.setGroup(true);\n      }\n      block.setEnabled(!block.isEnabled());\n      if (!group) {\n        eventUtils.setGroup(false);\n      }\n    },\n    scopeType: ContextMenuRegistry.ScopeType.BLOCK,\n    id: 'blockDisable',\n    weight: 5,\n  };\n  ContextMenuRegistry.registry.register(disableOption);\n};\nexports.registerDisable = registerDisable;\n\n/**\n * Option to delete a block.\n * @alias Blockly.ContextMenuItems.registerDelete\n */\nconst registerDelete = function() {\n  /** @type {!ContextMenuRegistry.RegistryItem} */\n  const deleteOption = {\n    displayText: function(/** @type {!ContextMenuRegistry.Scope} */\n                          scope) {\n      const block = scope.block;\n      // Count the number of blocks that are nested in this block.\n      let descendantCount = block.getDescendants(false).length;\n      const nextBlock = block.getNextBlock();\n      if (nextBlock) {\n        // Blocks in the current stack would survive this block's deletion.\n        descendantCount -= nextBlock.getDescendants(false).length;\n      }\n      return (descendantCount === 1) ?\n          Msg['DELETE_BLOCK'] :\n          Msg['DELETE_X_BLOCKS'].replace('%1', String(descendantCount));\n    },\n    preconditionFn: function(/** @type {!ContextMenuRegistry.Scope} */\n                             scope) {\n      if (!scope.block.isInFlyout && scope.block.isDeletable()) {\n        return 'enabled';\n      }\n      return 'hidden';\n    },\n    callback: function(/** @type {!ContextMenuRegistry.Scope} */\n                       scope) {\n      if (scope.block) {\n        scope.block.checkAndDelete();\n      }\n    },\n    scopeType: ContextMenuRegistry.ScopeType.BLOCK,\n    id: 'blockDelete',\n    weight: 6,\n  };\n  ContextMenuRegistry.registry.register(deleteOption);\n};\nexports.registerDelete = registerDelete;\n\n/**\n * Option to open help for a block.\n * @alias Blockly.ContextMenuItems.registerHelp\n */\nconst registerHelp = function() {\n  /** @type {!ContextMenuRegistry.RegistryItem} */\n  const helpOption = {\n    displayText: function() {\n      return Msg['HELP'];\n    },\n    preconditionFn: function(/** @type {!ContextMenuRegistry.Scope} */\n                             scope) {\n      const block = scope.block;\n      const url = (typeof block.helpUrl === 'function') ? block.helpUrl() :\n                                                          block.helpUrl;\n      if (url) {\n        return 'enabled';\n      }\n      return 'hidden';\n    },\n    callback: function(/** @type {!ContextMenuRegistry.Scope} */\n                       scope) {\n      scope.block.showHelp();\n    },\n    scopeType: ContextMenuRegistry.ScopeType.BLOCK,\n    id: 'blockHelp',\n    weight: 7,\n  };\n  ContextMenuRegistry.registry.register(helpOption);\n};\nexports.registerHelp = registerHelp;\n\n/**\n * Registers all block-scoped context menu items.\n * @private\n */\nconst registerBlockOptions_ = function() {\n  registerDuplicate();\n  registerComment();\n  registerInline();\n  registerCollapseExpandBlock();\n  registerDisable();\n  registerDelete();\n  registerHelp();\n};\n\n/**\n * Registers all default context menu items. This should be called once per\n * instance of ContextMenuRegistry.\n * @package\n * @alias Blockly.ContextMenuItems.registerDefaultOptions\n */\nconst registerDefaultOptions = function() {\n  registerWorkspaceOptions_();\n  registerBlockOptions_();\n};\nexports.registerDefaultOptions = registerDefaultOptions;\n\nregisterDefaultOptions();\n","/**\n * @license\n * Copyright 2013 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Object representing an icon on a block.\n */\n'use strict';\n\n/**\n * Object representing an icon on a block.\n * @class\n */\ngoog.module('Blockly.Icon');\n\nconst browserEvents = goog.require('Blockly.browserEvents');\nconst dom = goog.require('Blockly.utils.dom');\nconst svgMath = goog.require('Blockly.utils.svgMath');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockSvg} = goog.requireType('Blockly.BlockSvg');\n/* eslint-disable-next-line no-unused-vars */\nconst {Bubble} = goog.requireType('Blockly.Bubble');\nconst {Coordinate} = goog.require('Blockly.utils.Coordinate');\nconst {Size} = goog.require('Blockly.utils.Size');\nconst {Svg} = goog.require('Blockly.utils.Svg');\n\n\n/**\n * Class for an icon.\n * @abstract\n * @alias Blockly.Icon\n */\nclass Icon {\n  /**\n   * @param {BlockSvg} block The block associated with this icon.\n   */\n  constructor(block) {\n    /**\n     * The block this icon is attached to.\n     * @type {BlockSvg}\n     * @protected\n     */\n    this.block_ = block;\n\n    /**\n     * The icon SVG group.\n     * @type {?SVGGElement}\n     */\n    this.iconGroup_ = null;\n\n    /**\n     * Whether this icon gets hidden when the block is collapsed.\n     * @type {boolean}\n     */\n    this.collapseHidden = true;\n\n    /**\n     * Height and width of icons.\n     * @const\n     */\n    this.SIZE = 17;\n\n    /**\n     * Bubble UI (if visible).\n     * @type {?Bubble}\n     * @protected\n     */\n    this.bubble_ = null;\n\n    /**\n     * Absolute coordinate of icon's center.\n     * @type {?Coordinate}\n     * @protected\n     */\n    this.iconXY_ = null;\n  }\n\n  /**\n   * Create the icon on the block.\n   */\n  createIcon() {\n    if (this.iconGroup_) {\n      // Icon already exists.\n      return;\n    }\n    /* Here's the markup that will be generated:\n    <g class=\"blocklyIconGroup\">\n      ...\n    </g>\n    */\n    this.iconGroup_ =\n        dom.createSvgElement(Svg.G, {'class': 'blocklyIconGroup'}, null);\n    if (this.block_.isInFlyout) {\n      dom.addClass(\n          /** @type {!Element} */ (this.iconGroup_),\n          'blocklyIconGroupReadonly');\n    }\n    this.drawIcon_(this.iconGroup_);\n\n    this.block_.getSvgRoot().appendChild(this.iconGroup_);\n    browserEvents.conditionalBind(\n        this.iconGroup_, 'mouseup', this, this.iconClick_);\n    this.updateEditable();\n  }\n\n  /**\n   * Dispose of this icon.\n   */\n  dispose() {\n    // Dispose of and unlink the icon.\n    dom.removeNode(this.iconGroup_);\n    this.iconGroup_ = null;\n    // Dispose of and unlink the bubble.\n    this.setVisible(false);\n    this.block_ = null;\n  }\n\n  /**\n   * Add or remove the UI indicating if this icon may be clicked or not.\n   */\n  updateEditable() {\n    // No-op on the base class.\n  }\n\n  /**\n   * Is the associated bubble visible?\n   * @return {boolean} True if the bubble is visible.\n   */\n  isVisible() {\n    return !!this.bubble_;\n  }\n\n  /**\n   * Clicking on the icon toggles if the bubble is visible.\n   * @param {!Event} e Mouse click event.\n   * @protected\n   */\n  iconClick_(e) {\n    if (this.block_.workspace.isDragging()) {\n      // Drag operation is concluding.  Don't open the editor.\n      return;\n    }\n    if (!this.block_.isInFlyout && !browserEvents.isRightButton(e)) {\n      this.setVisible(!this.isVisible());\n    }\n  }\n\n  /**\n   * Change the colour of the associated bubble to match its block.\n   */\n  applyColour() {\n    if (this.isVisible()) {\n      this.bubble_.setColour(this.block_.style.colourPrimary);\n    }\n  }\n\n  /**\n   * Notification that the icon has moved.  Update the arrow accordingly.\n   * @param {!Coordinate} xy Absolute location in workspace coordinates.\n   */\n  setIconLocation(xy) {\n    this.iconXY_ = xy;\n    if (this.isVisible()) {\n      this.bubble_.setAnchorLocation(xy);\n    }\n  }\n\n  /**\n   * Notification that the icon has moved, but we don't really know where.\n   * Recompute the icon's location from scratch.\n   */\n  computeIconLocation() {\n    // Find coordinates for the centre of the icon and update the arrow.\n    const blockXY = this.block_.getRelativeToSurfaceXY();\n    const iconXY = svgMath.getRelativeXY(\n        /** @type {!SVGElement} */ (this.iconGroup_));\n    const newXY = new Coordinate(\n        blockXY.x + iconXY.x + this.SIZE / 2,\n        blockXY.y + iconXY.y + this.SIZE / 2);\n    if (!Coordinate.equals(this.getIconLocation(), newXY)) {\n      this.setIconLocation(newXY);\n    }\n  }\n\n  /**\n   * Returns the center of the block's icon relative to the surface.\n   * @return {?Coordinate} Object with x and y properties in\n   *     workspace coordinates.\n   */\n  getIconLocation() {\n    return this.iconXY_;\n  }\n\n  /**\n   * Get the size of the icon as used for rendering.\n   * This differs from the actual size of the icon, because it bulges slightly\n   * out of its row rather than increasing the height of its row.\n   * @return {!Size} Height and width.\n   */\n  getCorrectedSize() {\n    // TODO (#2562): Remove getCorrectedSize.\n    return new Size(this.SIZE, this.SIZE - 2);\n  }\n\n  /**\n   * Draw the icon.\n   * @param {!Element} _group The icon group.\n   * @protected\n   */\n  drawIcon_(_group) {\n    // No-op on base class.\n  }\n\n  /**\n   * Show or hide the icon.\n   * @param {boolean} _visible True if the icon should be visible.\n   */\n  setVisible(_visible) {\n    // No-op on base class\n  }\n}\n\nexports.Icon = Icon;\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Object representing a mutator dialog.  A mutator allows the\n * user to change the shape of a block using a nested blocks editor.\n */\n'use strict';\n\n/**\n * Object representing a mutator dialog.  A mutator allows the\n * user to change the shape of a block using a nested blocks editor.\n * @class\n */\ngoog.module('Blockly.Mutator');\n\nconst dom = goog.require('Blockly.utils.dom');\nconst eventUtils = goog.require('Blockly.Events.utils');\nconst toolbox = goog.require('Blockly.utils.toolbox');\nconst xml = goog.require('Blockly.utils.xml');\n/* eslint-disable-next-line no-unused-vars */\nconst {Abstract} = goog.requireType('Blockly.Events.Abstract');\nconst {BlockChange} = goog.require('Blockly.Events.BlockChange');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockSvg} = goog.requireType('Blockly.BlockSvg');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlocklyOptions} = goog.requireType('Blockly.BlocklyOptions');\n/* eslint-disable-next-line no-unused-vars */\nconst {Block} = goog.requireType('Blockly.Block');\nconst {Bubble} = goog.require('Blockly.Bubble');\nconst {config} = goog.require('Blockly.config');\n/* eslint-disable-next-line no-unused-vars */\nconst {Connection} = goog.requireType('Blockly.Connection');\n/* eslint-disable-next-line no-unused-vars */\nconst {Coordinate} = goog.requireType('Blockly.utils.Coordinate');\nconst {Icon} = goog.require('Blockly.Icon');\nconst {Options} = goog.require('Blockly.Options');\nconst {Svg} = goog.require('Blockly.utils.Svg');\nconst {WorkspaceSvg} = goog.require('Blockly.WorkspaceSvg');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.Events.BubbleOpen');\n\n\n/**\n * Class for a mutator dialog.\n * @extends {Icon}\n * @alias Blockly.Mutator\n */\nclass Mutator extends Icon {\n  /**\n   * @param {!Array<string>} quarkNames List of names of sub-blocks for flyout.\n   */\n  constructor(quarkNames) {\n    super(null);\n    this.quarkNames_ = quarkNames;\n\n    /**\n     * Workspace in the mutator's bubble.\n     * @type {?WorkspaceSvg}\n     * @private\n     */\n    this.workspace_ = null;\n\n    /**\n     * Width of workspace.\n     * @type {number}\n     * @private\n     */\n    this.workspaceWidth_ = 0;\n\n    /**\n     * Height of workspace.\n     * @type {number}\n     * @private\n     */\n    this.workspaceHeight_ = 0;\n\n    /**\n     * The SVG element that is the parent of the mutator workspace, or null if\n     * not created.\n     * @type {?SVGSVGElement}\n     * @private\n     */\n    this.svgDialog_ = null;\n\n    /**\n     * The root block of the mutator workspace, created by decomposing the\n     * source block.\n     * @type {?BlockSvg}\n     * @private\n     */\n    this.rootBlock_ = null;\n\n    /**\n     * Function registered on the main workspace to update the mutator contents\n     * when the main workspace changes.\n     * @type {?Function}\n     * @private\n     */\n    this.sourceListener_ = null;\n  }\n\n  /**\n   * Set the block this mutator is associated with.\n   * @param {!BlockSvg} block The block associated with this mutator.\n   * @package\n   */\n  setBlock(block) {\n    this.block_ = block;\n  }\n\n  /**\n   * Returns the workspace inside this mutator icon's bubble.\n   * @return {?WorkspaceSvg} The workspace inside this mutator icon's\n   *     bubble or null if the mutator isn't open.\n   * @package\n   */\n  getWorkspace() {\n    return this.workspace_;\n  }\n\n  /**\n   * Draw the mutator icon.\n   * @param {!Element} group The icon group.\n   * @protected\n   */\n  drawIcon_(group) {\n    // Square with rounded corners.\n    dom.createSvgElement(\n        Svg.RECT, {\n          'class': 'blocklyIconShape',\n          'rx': '4',\n          'ry': '4',\n          'height': '16',\n          'width': '16',\n        },\n        group);\n    // Gear teeth.\n    dom.createSvgElement(\n        Svg.PATH, {\n          'class': 'blocklyIconSymbol',\n          'd': 'm4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,' +\n              '0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,' +\n              '-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,' +\n              '-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,' +\n              '-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 ' +\n              '-0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,' +\n              '0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z',\n        },\n        group);\n    // Axle hole.\n    dom.createSvgElement(\n        Svg.CIRCLE,\n        {'class': 'blocklyIconShape', 'r': '2.7', 'cx': '8', 'cy': '8'}, group);\n  }\n\n  /**\n   * Clicking on the icon toggles if the mutator bubble is visible.\n   * Disable if block is uneditable.\n   * @param {!Event} e Mouse click event.\n   * @protected\n   * @override\n   */\n  iconClick_(e) {\n    if (this.block_.isEditable()) {\n      Icon.prototype.iconClick_.call(this, e);\n    }\n  }\n\n  /**\n   * Create the editor for the mutator's bubble.\n   * @return {!SVGElement} The top-level node of the editor.\n   * @private\n   */\n  createEditor_() {\n    /* Create the editor.  Here's the markup that will be generated:\n    <svg>\n      [Workspace]\n    </svg>\n    */\n    this.svgDialog_ = dom.createSvgElement(\n        Svg.SVG, {'x': Bubble.BORDER_WIDTH, 'y': Bubble.BORDER_WIDTH}, null);\n    // Convert the list of names into a list of XML objects for the flyout.\n    let quarkXml;\n    if (this.quarkNames_.length) {\n      quarkXml = xml.createElement('xml');\n      for (let i = 0, quarkName; (quarkName = this.quarkNames_[i]); i++) {\n        const element = xml.createElement('block');\n        element.setAttribute('type', quarkName);\n        quarkXml.appendChild(element);\n      }\n    } else {\n      quarkXml = null;\n    }\n    const workspaceOptions = new Options(\n        /** @type {!BlocklyOptions} */\n        ({\n          // If you want to enable disabling, also remove the\n          // event filter from workspaceChanged_ .\n          'disable': false,\n          'parentWorkspace': this.block_.workspace,\n          'media': this.block_.workspace.options.pathToMedia,\n          'rtl': this.block_.RTL,\n          'horizontalLayout': false,\n          'renderer': this.block_.workspace.options.renderer,\n          'rendererOverrides': this.block_.workspace.options.rendererOverrides,\n        }));\n    workspaceOptions.toolboxPosition =\n        this.block_.RTL ? toolbox.Position.RIGHT : toolbox.Position.LEFT;\n    const hasFlyout = !!quarkXml;\n    if (hasFlyout) {\n      workspaceOptions.languageTree = toolbox.convertToolboxDefToJson(quarkXml);\n    }\n    this.workspace_ = new WorkspaceSvg(workspaceOptions);\n    this.workspace_.isMutator = true;\n    this.workspace_.addChangeListener(eventUtils.disableOrphans);\n\n    // Mutator flyouts go inside the mutator workspace's <g> rather than in\n    // a top level SVG. Instead of handling scale themselves, mutators\n    // inherit scale from the parent workspace.\n    // To fix this, scale needs to be applied at a different level in the DOM.\n    const flyoutSvg = hasFlyout ? this.workspace_.addFlyout(Svg.G) : null;\n    const background = this.workspace_.createDom('blocklyMutatorBackground');\n\n    if (flyoutSvg) {\n      // Insert the flyout after the <rect> but before the block canvas so that\n      // the flyout is underneath in z-order.  This makes blocks layering during\n      // dragging work properly.\n      background.insertBefore(flyoutSvg, this.workspace_.svgBlockCanvas_);\n    }\n    this.svgDialog_.appendChild(background);\n\n    return this.svgDialog_;\n  }\n\n  /**\n   * Add or remove the UI indicating if this icon may be clicked or not.\n   */\n  updateEditable() {\n    super.updateEditable();\n    if (!this.block_.isInFlyout) {\n      if (this.block_.isEditable()) {\n        if (this.iconGroup_) {\n          dom.removeClass(\n              /** @type {!Element} */ (this.iconGroup_),\n              'blocklyIconGroupReadonly');\n        }\n      } else {\n        // Close any mutator bubble.  Icon is not clickable.\n        this.setVisible(false);\n        if (this.iconGroup_) {\n          dom.addClass(\n              /** @type {!Element} */ (this.iconGroup_),\n              'blocklyIconGroupReadonly');\n        }\n      }\n    }\n  }\n\n  /**\n   * Resize the bubble to match the size of the workspace.\n   * @private\n   */\n  resizeBubble_() {\n    const doubleBorderWidth = 2 * Bubble.BORDER_WIDTH;\n    const workspaceSize = this.workspace_.getCanvas().getBBox();\n    let width = workspaceSize.width + workspaceSize.x;\n    let height = workspaceSize.height + doubleBorderWidth * 3;\n    const flyout = this.workspace_.getFlyout();\n    if (flyout) {\n      const flyoutScrollMetrics =\n          flyout.getWorkspace().getMetricsManager().getScrollMetrics();\n      height = Math.max(height, flyoutScrollMetrics.height + 20);\n      width += flyout.getWidth();\n    }\n    if (this.block_.RTL) {\n      width = -workspaceSize.x;\n    }\n    width += doubleBorderWidth * 3;\n    // Only resize if the size difference is significant.  Eliminates\n    // shuddering.\n    if (Math.abs(this.workspaceWidth_ - width) > doubleBorderWidth ||\n        Math.abs(this.workspaceHeight_ - height) > doubleBorderWidth) {\n      // Record some layout information for workspace metrics.\n      this.workspaceWidth_ = width;\n      this.workspaceHeight_ = height;\n      // Resize the bubble.\n      this.bubble_.setBubbleSize(\n          width + doubleBorderWidth, height + doubleBorderWidth);\n      this.svgDialog_.setAttribute('width', this.workspaceWidth_);\n      this.svgDialog_.setAttribute('height', this.workspaceHeight_);\n      this.workspace_.setCachedParentSvgSize(\n          this.workspaceWidth_, this.workspaceHeight_);\n    }\n\n    if (this.block_.RTL) {\n      // Scroll the workspace to always left-align.\n      const translation = 'translate(' + this.workspaceWidth_ + ',0)';\n      this.workspace_.getCanvas().setAttribute('transform', translation);\n    }\n    this.workspace_.resize();\n  }\n\n  /**\n   * A method handler for when the bubble is moved.\n   * @private\n   */\n  onBubbleMove_() {\n    if (this.workspace_) {\n      this.workspace_.recordDragTargets();\n    }\n  }\n\n  /**\n   * Show or hide the mutator bubble.\n   * @param {boolean} visible True if the bubble should be visible.\n   */\n  setVisible(visible) {\n    if (visible === this.isVisible()) {\n      // No change.\n      return;\n    }\n    eventUtils.fire(new (eventUtils.get(eventUtils.BUBBLE_OPEN))(\n        this.block_, visible, 'mutator'));\n    if (visible) {\n      // Create the bubble.\n      this.bubble_ = new Bubble(\n          /** @type {!WorkspaceSvg} */ (this.block_.workspace),\n          this.createEditor_(), this.block_.pathObject.svgPath,\n          /** @type {!Coordinate} */ (this.iconXY_), null, null);\n      // Expose this mutator's block's ID on its top-level SVG group.\n      this.bubble_.setSvgId(this.block_.id);\n      this.bubble_.registerMoveEvent(this.onBubbleMove_.bind(this));\n      const tree = this.workspace_.options.languageTree;\n      const flyout = this.workspace_.getFlyout();\n      if (tree) {\n        flyout.init(this.workspace_);\n        flyout.show(tree);\n      }\n\n      this.rootBlock_ = this.block_.decompose(this.workspace_);\n      const blocks = this.rootBlock_.getDescendants(false);\n      for (let i = 0, child; (child = blocks[i]); i++) {\n        child.render();\n      }\n      // The root block should not be draggable or deletable.\n      this.rootBlock_.setMovable(false);\n      this.rootBlock_.setDeletable(false);\n      let margin;\n      let x;\n      if (flyout) {\n        margin = flyout.CORNER_RADIUS * 2;\n        x = this.rootBlock_.RTL ? flyout.getWidth() + margin : margin;\n      } else {\n        margin = 16;\n        x = margin;\n      }\n      if (this.block_.RTL) {\n        x = -x;\n      }\n      this.rootBlock_.moveBy(x, margin);\n      // Save the initial connections, then listen for further changes.\n      if (this.block_.saveConnections) {\n        const thisRootBlock = this.rootBlock_;\n        this.block_.saveConnections(thisRootBlock);\n        this.sourceListener_ = () => {\n          if (this.block_) {\n            this.block_.saveConnections(thisRootBlock);\n          }\n        };\n        this.block_.workspace.addChangeListener(this.sourceListener_);\n      }\n      this.resizeBubble_();\n      // When the mutator's workspace changes, update the source block.\n      this.workspace_.addChangeListener(this.workspaceChanged_.bind(this));\n      // Update the source block immediately after the bubble becomes visible.\n      this.updateWorkspace_();\n      this.applyColour();\n    } else {\n      // Dispose of the bubble.\n      this.svgDialog_ = null;\n      this.workspace_.dispose();\n      this.workspace_ = null;\n      this.rootBlock_ = null;\n      this.bubble_.dispose();\n      this.bubble_ = null;\n      this.workspaceWidth_ = 0;\n      this.workspaceHeight_ = 0;\n      if (this.sourceListener_) {\n        this.block_.workspace.removeChangeListener(this.sourceListener_);\n        this.sourceListener_ = null;\n      }\n    }\n  }\n\n  /**\n   * Fired whenever a change is made to the mutator's workspace.\n   * @param {!Abstract} e Custom data for event.\n   * @private\n   */\n  workspaceChanged_(e) {\n    if (!(e.isUiEvent ||\n          (e.type === eventUtils.CHANGE &&\n           /** @type {!BlockChange} */ (e).element === 'disabled') ||\n          e.type === eventUtils.CREATE)) {\n      this.updateWorkspace_();\n    }\n  }\n\n  /**\n   * Updates the source block when the mutator's blocks are changed.\n   * Bump down any block that's too high.\n   * @private\n   */\n  updateWorkspace_() {\n    if (!this.workspace_.isDragging()) {\n      const blocks = this.workspace_.getTopBlocks(false);\n      const MARGIN = 20;\n\n      for (let b = 0, block; (block = blocks[b]); b++) {\n        const blockXY = block.getRelativeToSurfaceXY();\n\n        // Bump any block that's above the top back inside.\n        if (blockXY.y < MARGIN) {\n          block.moveBy(0, MARGIN - blockXY.y);\n        }\n        // Bump any block overlapping the flyout back inside.\n        if (block.RTL) {\n          let right = -MARGIN;\n          const flyout = this.workspace_.getFlyout();\n          if (flyout) {\n            right -= flyout.getWidth();\n          }\n          if (blockXY.x > right) {\n            block.moveBy(right - blockXY.x, 0);\n          }\n        } else if (blockXY.x < MARGIN) {\n          block.moveBy(MARGIN - blockXY.x, 0);\n        }\n      }\n    }\n\n    // When the mutator's workspace changes, update the source block.\n    if (this.rootBlock_.workspace === this.workspace_) {\n      const existingGroup = eventUtils.getGroup();\n      if (!existingGroup) {\n        eventUtils.setGroup(true);\n      }\n      const block = /** @type {!BlockSvg} */ (this.block_);\n      const oldExtraState = BlockChange.getExtraBlockState_(block);\n\n      // Switch off rendering while the source block is rebuilt.\n      const savedRendered = block.rendered;\n      // TODO(#4288): We should not be setting the rendered property to false.\n      block.rendered = false;\n\n      // Allow the source block to rebuild itself.\n      block.compose(this.rootBlock_);\n      // Restore rendering and show the changes.\n      block.rendered = savedRendered;\n      // Mutation may have added some elements that need initializing.\n      block.initSvg();\n\n      if (block.rendered) {\n        block.render();\n      }\n\n      const newExtraState = BlockChange.getExtraBlockState_(block);\n      if (oldExtraState !== newExtraState) {\n        eventUtils.fire(new (eventUtils.get(eventUtils.BLOCK_CHANGE))(\n            block, 'mutation', null, oldExtraState, newExtraState));\n        // Ensure that any bump is part of this mutation's event group.\n        const mutationGroup = eventUtils.getGroup();\n        setTimeout(function() {\n          const oldGroup = eventUtils.getGroup();\n          eventUtils.setGroup(mutationGroup);\n          block.bumpNeighbours();\n          eventUtils.setGroup(oldGroup);\n        }, config.bumpDelay);\n      }\n\n      // Don't update the bubble until the drag has ended, to avoid moving\n      // blocks under the cursor.\n      if (!this.workspace_.isDragging()) {\n        this.resizeBubble_();\n      }\n      eventUtils.setGroup(existingGroup);\n    }\n  }\n\n  /**\n   * Dispose of this mutator.\n   */\n  dispose() {\n    this.block_.mutator = null;\n    Icon.prototype.dispose.call(this);\n  }\n\n  /**\n   * Update the styles on all blocks in the mutator.\n   * @public\n   */\n  updateBlockStyle() {\n    const ws = this.workspace_;\n\n    if (ws && ws.getAllBlocks(false)) {\n      const workspaceBlocks = ws.getAllBlocks(false);\n      for (let i = 0, block; (block = workspaceBlocks[i]); i++) {\n        block.setStyle(block.getStyleName());\n      }\n\n      const flyout = ws.getFlyout();\n      if (flyout) {\n        const flyoutBlocks = flyout.workspace_.getAllBlocks(false);\n        for (let i = 0, block; (block = flyoutBlocks[i]); i++) {\n          block.setStyle(block.getStyleName());\n        }\n      }\n    }\n  }\n\n  /**\n   * Reconnect an block to a mutated input.\n   * @param {Connection} connectionChild Connection on child block.\n   * @param {!Block} block Parent block.\n   * @param {string} inputName Name of input on parent block.\n   * @return {boolean} True iff a reconnection was made, false otherwise.\n   */\n  static reconnect(connectionChild, block, inputName) {\n    if (!connectionChild || !connectionChild.getSourceBlock().workspace) {\n      return false;  // No connection or block has been deleted.\n    }\n    const connectionParent = block.getInput(inputName).connection;\n    const currentParent = connectionChild.targetBlock();\n    if ((!currentParent || currentParent === block) &&\n        connectionParent.targetConnection !== connectionChild) {\n      if (connectionParent.isConnected()) {\n        // There's already something connected here.  Get rid of it.\n        connectionParent.disconnect();\n      }\n      connectionParent.connect(connectionChild);\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Get the parent workspace of a workspace that is inside a mutator, taking\n   * into account whether it is a flyout.\n   * @param {WorkspaceSvg} workspace The workspace that is inside a mutator.\n   * @return {?WorkspaceSvg} The mutator's parent workspace or null.\n   * @public\n   */\n  static findParentWs(workspace) {\n    let outerWs = null;\n    if (workspace && workspace.options) {\n      const parent = workspace.options.parentWorkspace;\n      // If we were in a flyout in a mutator, need to go up two levels to find\n      // the actual parent.\n      if (workspace.isFlyout) {\n        if (parent && parent.options) {\n          outerWs = parent.options.parentWorkspace;\n        }\n      } else if (parent) {\n        outerWs = parent;\n      }\n    }\n    return outerWs;\n  }\n}\n\nexports.Mutator = Mutator;\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Object representing a warning.\n */\n'use strict';\n\n/**\n * Object representing a warning.\n * @class\n */\ngoog.module('Blockly.Warning');\n\nconst dom = goog.require('Blockly.utils.dom');\nconst eventUtils = goog.require('Blockly.Events.utils');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockSvg} = goog.requireType('Blockly.BlockSvg');\nconst {Bubble} = goog.require('Blockly.Bubble');\n/* eslint-disable-next-line no-unused-vars */\nconst {Coordinate} = goog.requireType('Blockly.utils.Coordinate');\nconst {Icon} = goog.require('Blockly.Icon');\nconst {Svg} = goog.require('Blockly.utils.Svg');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.Events.BubbleOpen');\n\n\n/**\n * Class for a warning.\n * @extends {Icon}\n * @alias Blockly.Warning\n */\nclass Warning extends Icon {\n  /**\n   * @param {!BlockSvg} block The block associated with this warning.\n   */\n  constructor(block) {\n    super(block);\n    this.createIcon();\n    // The text_ object can contain multiple warnings.\n    this.text_ = Object.create(null);\n\n    /**\n     * The top-level node of the warning text, or null if not created.\n     * @type {?SVGTextElement}\n     * @private\n     */\n    this.paragraphElement_ = null;\n\n    /**\n     * Does this icon get hidden when the block is collapsed?\n     * @type {boolean}\n     */\n    this.collapseHidden = false;\n  }\n\n  /**\n   * Draw the warning icon.\n   * @param {!Element} group The icon group.\n   * @protected\n   */\n  drawIcon_(group) {\n    // Triangle with rounded corners.\n    dom.createSvgElement(\n        Svg.PATH, {\n          'class': 'blocklyIconShape',\n          'd': 'M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z',\n        },\n        group);\n    // Can't use a real '!' text character since different browsers and\n    // operating systems render it differently. Body of exclamation point.\n    dom.createSvgElement(\n        Svg.PATH, {\n          'class': 'blocklyIconSymbol',\n          'd': 'm7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z',\n        },\n        group);\n    // Dot of exclamation point.\n    dom.createSvgElement(\n        Svg.RECT, {\n          'class': 'blocklyIconSymbol',\n          'x': '7',\n          'y': '11',\n          'height': '2',\n          'width': '2',\n        },\n        group);\n  }\n\n  /**\n   * Show or hide the warning bubble.\n   * @param {boolean} visible True if the bubble should be visible.\n   */\n  setVisible(visible) {\n    if (visible === this.isVisible()) {\n      return;\n    }\n    eventUtils.fire(new (eventUtils.get(eventUtils.BUBBLE_OPEN))(\n        this.block_, visible, 'warning'));\n    if (visible) {\n      this.createBubble_();\n    } else {\n      this.disposeBubble_();\n    }\n  }\n\n  /**\n   * Show the bubble.\n   * @private\n   */\n  createBubble_() {\n    this.paragraphElement_ = Bubble.textToDom(this.getText());\n    this.bubble_ = Bubble.createNonEditableBubble(\n        this.paragraphElement_, /** @type {!BlockSvg} */ (this.block_),\n        /** @type {!Coordinate} */ (this.iconXY_));\n    this.applyColour();\n  }\n\n  /**\n   * Dispose of the bubble and references to it.\n   * @private\n   */\n  disposeBubble_() {\n    this.bubble_.dispose();\n    this.bubble_ = null;\n    this.paragraphElement_ = null;\n  }\n\n  /**\n   * Set this warning's text.\n   * @param {string} text Warning text (or '' to delete). This supports\n   *    linebreaks.\n   * @param {string} id An ID for this text entry to be able to maintain\n   *     multiple warnings.\n   */\n  setText(text, id) {\n    if (this.text_[id] === text) {\n      return;\n    }\n    if (text) {\n      this.text_[id] = text;\n    } else {\n      delete this.text_[id];\n    }\n    if (this.isVisible()) {\n      this.setVisible(false);\n      this.setVisible(true);\n    }\n  }\n\n  /**\n   * Get this warning's texts.\n   * @return {string} All texts concatenated into one string.\n   */\n  getText() {\n    const allWarnings = [];\n    for (const id in this.text_) {\n      allWarnings.push(this.text_[id]);\n    }\n    return allWarnings.join('\\n');\n  }\n\n  /**\n   * Dispose of this warning.\n   */\n  dispose() {\n    this.block_.warning = null;\n    Icon.prototype.dispose.call(this);\n  }\n}\n\nexports.Warning = Warning;\n","/**\n * @license\n * Copyright 2011 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Object representing a code comment.\n */\n'use strict';\n\n/**\n * Object representing a code comment.\n * @class\n */\ngoog.module('Blockly.Comment');\n\nconst Css = goog.require('Blockly.Css');\nconst browserEvents = goog.require('Blockly.browserEvents');\nconst dom = goog.require('Blockly.utils.dom');\nconst eventUtils = goog.require('Blockly.Events.utils');\nconst userAgent = goog.require('Blockly.utils.userAgent');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockSvg} = goog.requireType('Blockly.BlockSvg');\n/* eslint-disable-next-line no-unused-vars */\nconst {Block} = goog.requireType('Blockly.Block');\nconst {Bubble} = goog.require('Blockly.Bubble');\n/* eslint-disable-next-line no-unused-vars */\nconst {Coordinate} = goog.requireType('Blockly.utils.Coordinate');\nconst {Icon} = goog.require('Blockly.Icon');\n/* eslint-disable-next-line no-unused-vars */\nconst {Size} = goog.requireType('Blockly.utils.Size');\nconst {Svg} = goog.require('Blockly.utils.Svg');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceSvg} = goog.requireType('Blockly.WorkspaceSvg');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.Events.BlockChange');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.Events.BubbleOpen');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.Warning');\n\n\n/**\n * Class for a comment.\n * @extends {Icon}\n * @alias Blockly.Comment\n */\nclass Comment extends Icon {\n  /**\n   * @param {!BlockSvg} block The block associated with this comment.\n   */\n  constructor(block) {\n    super(block);\n\n    /**\n     * The model for this comment.\n     * @type {!Block.CommentModel}\n     * @private\n     */\n    this.model_ = block.commentModel;\n    // If someone creates the comment directly instead of calling\n    // block.setCommentText we want to make sure the text is non-null;\n    this.model_.text = this.model_.text || '';\n\n    /**\n     * The model's text value at the start of an edit.\n     * Used to tell if an event should be fired at the end of an edit.\n     * @type {?string}\n     * @private\n     */\n    this.cachedText_ = '';\n\n    /**\n     * Mouse up event data.\n     * @type {?browserEvents.Data}\n     * @private\n     */\n    this.onMouseUpWrapper_ = null;\n\n    /**\n     * Wheel event data.\n     * @type {?browserEvents.Data}\n     * @private\n     */\n    this.onWheelWrapper_ = null;\n\n    /**\n     * Change event data.\n     * @type {?browserEvents.Data}\n     * @private\n     */\n    this.onChangeWrapper_ = null;\n\n    /**\n     * Input event data.\n     * @type {?browserEvents.Data}\n     * @private\n     */\n    this.onInputWrapper_ = null;\n\n    /**\n     * The SVG element that contains the text edit area, or null if not created.\n     * @type {?SVGForeignObjectElement}\n     * @private\n     */\n    this.foreignObject_ = null;\n\n    /**\n     * The editable text area, or null if not created.\n     * @type {?Element}\n     * @private\n     */\n    this.textarea_ = null;\n\n    /**\n     * The top-level node of the comment text, or null if not created.\n     * @type {?SVGTextElement}\n     * @private\n     */\n    this.paragraphElement_ = null;\n\n    this.createIcon();\n  }\n\n  /**\n   * Draw the comment icon.\n   * @param {!Element} group The icon group.\n   * @protected\n   */\n  drawIcon_(group) {\n    // Circle.\n    dom.createSvgElement(\n        Svg.CIRCLE,\n        {'class': 'blocklyIconShape', 'r': '8', 'cx': '8', 'cy': '8'}, group);\n    // Can't use a real '?' text character since different browsers and\n    // operating systems render it differently. Body of question mark.\n    dom.createSvgElement(\n        Svg.PATH, {\n          'class': 'blocklyIconSymbol',\n          'd': 'm6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.405' +\n              '0.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25' +\n              '-1.201,0.998 -1.201,1.528 -1.204,2.19z',\n        },\n        group);\n    // Dot of question mark.\n    dom.createSvgElement(\n        Svg.RECT, {\n          'class': 'blocklyIconSymbol',\n          'x': '6.8',\n          'y': '10.78',\n          'height': '2',\n          'width': '2',\n        },\n        group);\n  }\n\n  /**\n   * Create the editor for the comment's bubble.\n   * @return {!SVGElement} The top-level node of the editor.\n   * @private\n   */\n  createEditor_() {\n    /* Create the editor.  Here's the markup that will be generated in\n     * editable mode:\n      <foreignObject x=\"8\" y=\"8\" width=\"164\" height=\"164\">\n        <body xmlns=\"http://www.w3.org/1999/xhtml\" class=\"blocklyMinimalBody\">\n          <textarea xmlns=\"http://www.w3.org/1999/xhtml\"\n              class=\"blocklyCommentTextarea\"\n              style=\"height: 164px; width: 164px;\"></textarea>\n        </body>\n      </foreignObject>\n     * For non-editable mode see Warning.textToDom_.\n     */\n\n    this.foreignObject_ = dom.createSvgElement(\n        Svg.FOREIGNOBJECT, {'x': Bubble.BORDER_WIDTH, 'y': Bubble.BORDER_WIDTH},\n        null);\n\n    const body = document.createElementNS(dom.HTML_NS, 'body');\n    body.setAttribute('xmlns', dom.HTML_NS);\n    body.className = 'blocklyMinimalBody';\n\n    this.textarea_ = document.createElementNS(dom.HTML_NS, 'textarea');\n    const textarea = this.textarea_;\n    textarea.className = 'blocklyCommentTextarea';\n    textarea.setAttribute('dir', this.block_.RTL ? 'RTL' : 'LTR');\n    textarea.value = this.model_.text;\n    this.resizeTextarea_();\n\n    body.appendChild(textarea);\n    this.foreignObject_.appendChild(body);\n\n    // Ideally this would be hooked to the focus event for the comment.\n    // However doing so in Firefox swallows the cursor for unknown reasons.\n    // So this is hooked to mouseup instead.  No big deal.\n    this.onMouseUpWrapper_ = browserEvents.conditionalBind(\n        textarea, 'mouseup', this, this.startEdit_, true, true);\n    // Don't zoom with mousewheel.\n    this.onWheelWrapper_ =\n        browserEvents.conditionalBind(textarea, 'wheel', this, function(e) {\n          e.stopPropagation();\n        });\n    this.onChangeWrapper_ = browserEvents.conditionalBind(\n        textarea, 'change', this,\n        /**\n         * @this {Comment}\n         * @param {Event} _e Unused event parameter.\n         */\n        function(_e) {\n          if (this.cachedText_ !== this.model_.text) {\n            eventUtils.fire(new (eventUtils.get(eventUtils.BLOCK_CHANGE))(\n                this.block_, 'comment', null, this.cachedText_,\n                this.model_.text));\n          }\n        });\n    this.onInputWrapper_ = browserEvents.conditionalBind(\n        textarea, 'input', this,\n        /**\n         * @this {Comment}\n         * @param {Event} _e Unused event parameter.\n         */\n        function(_e) {\n          this.model_.text = textarea.value;\n        });\n\n    setTimeout(textarea.focus.bind(textarea), 0);\n\n    return this.foreignObject_;\n  }\n\n  /**\n   * Add or remove editability of the comment.\n   * @override\n   */\n  updateEditable() {\n    super.updateEditable();\n    if (this.isVisible()) {\n      // Recreate the bubble with the correct UI.\n      this.disposeBubble_();\n      this.createBubble_();\n    }\n  }\n\n  /**\n   * Callback function triggered when the bubble has resized.\n   * Resize the text area accordingly.\n   * @private\n   */\n  onBubbleResize_() {\n    if (!this.isVisible()) {\n      return;\n    }\n    this.model_.size = this.bubble_.getBubbleSize();\n    this.resizeTextarea_();\n  }\n\n  /**\n   * Resizes the text area to match the size defined on the model (which is\n   * the size of the bubble).\n   * @private\n   */\n  resizeTextarea_() {\n    const size = this.model_.size;\n    const doubleBorderWidth = 2 * Bubble.BORDER_WIDTH;\n    const widthMinusBorder = size.width - doubleBorderWidth;\n    const heightMinusBorder = size.height - doubleBorderWidth;\n    this.foreignObject_.setAttribute('width', widthMinusBorder);\n    this.foreignObject_.setAttribute('height', heightMinusBorder);\n    this.textarea_.style.width = (widthMinusBorder - 4) + 'px';\n    this.textarea_.style.height = (heightMinusBorder - 4) + 'px';\n  }\n\n  /**\n   * Show or hide the comment bubble.\n   * @param {boolean} visible True if the bubble should be visible.\n   */\n  setVisible(visible) {\n    if (visible === this.isVisible()) {\n      return;\n    }\n    eventUtils.fire(new (eventUtils.get(eventUtils.BUBBLE_OPEN))(\n        this.block_, visible, 'comment'));\n    this.model_.pinned = visible;\n    if (visible) {\n      this.createBubble_();\n    } else {\n      this.disposeBubble_();\n    }\n  }\n\n  /**\n   * Show the bubble. Handles deciding if it should be editable or not.\n   * @private\n   */\n  createBubble_() {\n    if (!this.block_.isEditable() || userAgent.IE) {\n      // MSIE does not support foreignobject; textareas are impossible.\n      // https://docs.microsoft.com/en-us/openspecs/ie_standards/ms-svg/56e6e04c-7c8c-44dd-8100-bd745ee42034\n      // Always treat comments in IE as uneditable.\n      this.createNonEditableBubble_();\n    } else {\n      this.createEditableBubble_();\n    }\n  }\n\n  /**\n   * Show an editable bubble.\n   * @private\n   */\n  createEditableBubble_() {\n    this.bubble_ = new Bubble(\n        /** @type {!WorkspaceSvg} */ (this.block_.workspace),\n        this.createEditor_(), this.block_.pathObject.svgPath,\n        /** @type {!Coordinate} */ (this.iconXY_), this.model_.size.width,\n        this.model_.size.height);\n    // Expose this comment's block's ID on its top-level SVG group.\n    this.bubble_.setSvgId(this.block_.id);\n    this.bubble_.registerResizeEvent(this.onBubbleResize_.bind(this));\n    this.applyColour();\n  }\n\n  /**\n   * Show a non-editable bubble.\n   * @private\n   * @suppress {checkTypes} Suppress `this` type mismatch.\n   */\n  createNonEditableBubble_() {\n    // TODO (#2917): It would be great if the comment could support line breaks.\n    this.paragraphElement_ = Bubble.textToDom(this.block_.getCommentText());\n    this.bubble_ = Bubble.createNonEditableBubble(\n        this.paragraphElement_, /** @type {!BlockSvg} */ (this.block_),\n        /** @type {!Coordinate} */ (this.iconXY_));\n    this.applyColour();\n  }\n\n  /**\n   * Dispose of the bubble.\n   * @private\n   * @suppress {checkTypes} Suppress `this` type mismatch.\n   */\n  disposeBubble_() {\n    if (this.onMouseUpWrapper_) {\n      browserEvents.unbind(this.onMouseUpWrapper_);\n      this.onMouseUpWrapper_ = null;\n    }\n    if (this.onWheelWrapper_) {\n      browserEvents.unbind(this.onWheelWrapper_);\n      this.onWheelWrapper_ = null;\n    }\n    if (this.onChangeWrapper_) {\n      browserEvents.unbind(this.onChangeWrapper_);\n      this.onChangeWrapper_ = null;\n    }\n    if (this.onInputWrapper_) {\n      browserEvents.unbind(this.onInputWrapper_);\n      this.onInputWrapper_ = null;\n    }\n    this.bubble_.dispose();\n    this.bubble_ = null;\n    this.textarea_ = null;\n    this.foreignObject_ = null;\n    this.paragraphElement_ = null;\n  }\n\n  /**\n   * Callback fired when an edit starts.\n   *\n   * Bring the comment to the top of the stack when clicked on. Also cache the\n   * current text so it can be used to fire a change event.\n   * @param {!Event} _e Mouse up event.\n   * @private\n   */\n  startEdit_(_e) {\n    if (this.bubble_.promote()) {\n      // Since the act of moving this node within the DOM causes a loss of\n      // focus, we need to reapply the focus.\n      this.textarea_.focus();\n    }\n\n    this.cachedText_ = this.model_.text;\n  }\n\n  /**\n   * Get the dimensions of this comment's bubble.\n   * @return {Size} Object with width and height properties.\n   */\n  getBubbleSize() {\n    return this.model_.size;\n  }\n\n  /**\n   * Size this comment's bubble.\n   * @param {number} width Width of the bubble.\n   * @param {number} height Height of the bubble.\n   */\n  setBubbleSize(width, height) {\n    if (this.bubble_) {\n      this.bubble_.setBubbleSize(width, height);\n    } else {\n      this.model_.size.width = width;\n      this.model_.size.height = height;\n    }\n  }\n\n  /**\n   * Update the comment's view to match the model.\n   * @package\n   */\n  updateText() {\n    if (this.textarea_) {\n      this.textarea_.value = this.model_.text;\n    } else if (this.paragraphElement_) {\n      // Non-Editable mode.\n      // TODO (#2917): If 2917 gets added this will probably need to be updated.\n      this.paragraphElement_.firstChild.textContent = this.model_.text;\n    }\n  }\n\n  /**\n   * Dispose of this comment.\n   *\n   * If you want to receive a comment \"delete\" event (newValue: null), then this\n   * should not be called directly. Instead call block.setCommentText(null);\n   */\n  dispose() {\n    this.block_.comment = null;\n    Icon.prototype.dispose.call(this);\n  }\n}\n\n/**\n * CSS for block comment.  See css.js for use.\n */\nCss.register(`\n.blocklyCommentTextarea {\n  background-color: #fef49c;\n  border: 0;\n  display: block;\n  margin: 0;\n  outline: 0;\n  padding: 3px;\n  resize: none;\n  text-overflow: hidden;\n}\n`);\n\nexports.Comment = Comment;\n","/**\n * @license\n * Copyright 2022 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Holds constants that have to do with the sprites that create\n * the trashcan and zoom controls.\n */\n'use strict';\n\n/**\n * Holds constants that have to do with the sprites that create the trashcan\n * and zoom controls.\n */\ngoog.module('Blockly.sprite');\n\n\n/**\n * Contains the path to a single png tat holds the images for the trashcan\n * as well as the zoom controls.\n * @const {!Object}\n * @alias Blockly.sprite.SPRITE\n */\nconst SPRITE = {\n  width: 96,\n  height: 124,\n  url: 'sprites.png',\n};\nexports.SPRITE = SPRITE;\n","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Utility functions for positioning UI elements.\n */\n'use strict';\n\n/**\n * Utility functions for positioning UI elements.\n * @namespace Blockly.uiPosition\n */\ngoog.module('Blockly.uiPosition');\n\nconst toolbox = goog.require('Blockly.utils.toolbox');\n/* eslint-disable-next-line no-unused-vars */\nconst {MetricsManager} = goog.requireType('Blockly.MetricsManager');\nconst {Rect} = goog.require('Blockly.utils.Rect');\nconst {Scrollbar} = goog.require('Blockly.Scrollbar');\n/* eslint-disable-next-line no-unused-vars */\nconst {Size} = goog.requireType('Blockly.utils.Size');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceSvg} = goog.requireType('Blockly.WorkspaceSvg');\n\n\n/**\n * Enum for vertical positioning.\n * @enum {number}\n * @alias Blockly.uiPosition.verticalPosition\n * @package\n */\nconst verticalPosition = {\n  TOP: 0,\n  BOTTOM: 1,\n};\nexports.verticalPosition = verticalPosition;\n\n/**\n * Enum for horizontal positioning.\n * @enum {number}\n * @alias Blockly.uiPosition.horizontalPosition\n * @package\n */\nconst horizontalPosition = {\n  LEFT: 0,\n  RIGHT: 1,\n};\nexports.horizontalPosition = horizontalPosition;\n\n/**\n * An object defining a horizontal and vertical positioning.\n * @typedef {{\n *   horizontal: !horizontalPosition,\n *   vertical: !verticalPosition\n * }}\n * @alias Blockly.uiPosition.Position\n * @package\n */\nlet Position;\nexports.Position = Position;\n\n/**\n * Enum for bump rules to use for dealing with collisions.\n * @enum {number}\n * @alias Blockly.uiPosition.bumpDirection\n * @package\n */\nconst bumpDirection = {\n  UP: 0,\n  DOWN: 1,\n};\nexports.bumpDirection = bumpDirection;\n\n/**\n * Returns a rectangle representing reasonable position for where to place a UI\n * element of the specified size given the restraints and locations of the\n * scrollbars. This method does not take into account any already placed UI\n * elements.\n * @param {!Position} position The starting\n *    horizontal and vertical position.\n * @param {!Size} size the size of the UI element to get a start\n *    position for.\n * @param {number} horizontalPadding The horizontal padding to use.\n * @param {number} verticalPadding The vertical padding to use.\n * @param {!MetricsManager.UiMetrics} metrics The workspace UI metrics.\n * @param {!WorkspaceSvg} workspace The workspace.\n * @return {!Rect} The suggested start position.\n * @alias Blockly.uiPosition.getStartPositionRect\n * @package\n */\nconst getStartPositionRect = function(\n    position, size, horizontalPadding, verticalPadding, metrics, workspace) {\n  // Horizontal positioning.\n  let left = 0;\n  const hasVerticalScrollbar =\n      workspace.scrollbar && workspace.scrollbar.canScrollVertically();\n  if (position.horizontal === horizontalPosition.LEFT) {\n    left = metrics.absoluteMetrics.left + horizontalPadding;\n    if (hasVerticalScrollbar && workspace.RTL) {\n      left += Scrollbar.scrollbarThickness;\n    }\n  } else {  // position.horizontal === horizontalPosition.RIGHT\n    left = metrics.absoluteMetrics.left + metrics.viewMetrics.width -\n        size.width - horizontalPadding;\n    if (hasVerticalScrollbar && !workspace.RTL) {\n      left -= Scrollbar.scrollbarThickness;\n    }\n  }\n  // Vertical positioning.\n  let top = 0;\n  if (position.vertical === verticalPosition.TOP) {\n    top = metrics.absoluteMetrics.top + verticalPadding;\n  } else {  // position.vertical === verticalPosition.BOTTOM\n    top = metrics.absoluteMetrics.top + metrics.viewMetrics.height -\n        size.height - verticalPadding;\n    if (workspace.scrollbar && workspace.scrollbar.canScrollHorizontally()) {\n      // The scrollbars are always positioned on the bottom if they exist.\n      top -= Scrollbar.scrollbarThickness;\n    }\n  }\n  return new Rect(top, top + size.height, left, left + size.width);\n};\nexports.getStartPositionRect = getStartPositionRect;\n\n/**\n * Returns a corner position that is on the opposite side of the workspace from\n * the toolbox.\n * If in horizontal orientation, defaults to the bottom corner. If in vertical\n * orientation, defaults to the right corner.\n * @param {!WorkspaceSvg} workspace The workspace.\n * @param {!MetricsManager.UiMetrics} metrics The workspace metrics.\n * @return {!Position} The suggested corner position.\n * @alias Blockly.uiPosition.getCornerOppositeToolbox\n * @package\n */\nconst getCornerOppositeToolbox = function(workspace, metrics) {\n  const leftCorner =\n      metrics.toolboxMetrics.position !== toolbox.Position.LEFT &&\n      (!workspace.horizontalLayout || workspace.RTL);\n  const topCorner = metrics.toolboxMetrics.position === toolbox.Position.BOTTOM;\n  const hPosition =\n      leftCorner ? horizontalPosition.LEFT : horizontalPosition.RIGHT;\n  const vPosition = topCorner ? verticalPosition.TOP : verticalPosition.BOTTOM;\n  return {horizontal: hPosition, vertical: vPosition};\n};\nexports.getCornerOppositeToolbox = getCornerOppositeToolbox;\n\n/**\n * Returns a position Rect based on a starting position that is bumped\n * so that it doesn't intersect with any of the provided savedPositions. This\n * method does not check that the bumped position is still within bounds.\n * @param {!Rect} startRect The starting position to use.\n * @param {number} margin The margin to use between elements when bumping.\n * @param {!bumpDirection} bumpDir The direction to bump if there is a collision\n *    with an existing UI element.\n * @param {!Array<!Rect>} savedPositions List of rectangles that\n *    represent the positions of UI elements already placed.\n * @return {!Rect} The suggested position rectangle.\n * @alias Blockly.uiPosition.bumpPositionRect\n * @package\n */\nconst bumpPositionRect = function(startRect, margin, bumpDir, savedPositions) {\n  let top = startRect.top;\n  const left = startRect.left;\n  const width = startRect.right - startRect.left;\n  const height = startRect.bottom - startRect.top;\n\n  // Check for collision and bump if needed.\n  let boundingRect = startRect;\n  for (let i = 0; i < savedPositions.length; i++) {\n    const otherEl = savedPositions[i];\n    if (boundingRect.intersects(otherEl)) {\n      if (bumpDir === bumpDirection.UP) {\n        top = otherEl.top - height - margin;\n      } else {  // bumpDir === bumpDirection.DOWN\n        top = otherEl.bottom + margin;\n      }\n      // Recheck other savedPositions\n      boundingRect = new Rect(top, top + height, left, left + width);\n      i = -1;\n    }\n  }\n  return boundingRect;\n};\nexports.bumpPositionRect = bumpPositionRect;\n","/**\n * @license\n * Copyright 2015 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Object representing a zoom icons.\n */\n'use strict';\n\n/**\n * Object representing a zoom icons.\n * @class\n */\ngoog.module('Blockly.ZoomControls');\n\nconst Css = goog.require('Blockly.Css');\nconst Touch = goog.require('Blockly.Touch');\nconst browserEvents = goog.require('Blockly.browserEvents');\nconst dom = goog.require('Blockly.utils.dom');\nconst eventUtils = goog.require('Blockly.Events.utils');\nconst {SPRITE} = goog.require('Blockly.sprite');\nconst uiPosition = goog.require('Blockly.uiPosition');\nconst {ComponentManager} = goog.require('Blockly.ComponentManager');\n/* eslint-disable-next-line no-unused-vars */\nconst {IPositionable} = goog.require('Blockly.IPositionable');\n/* eslint-disable-next-line no-unused-vars */\nconst {MetricsManager} = goog.requireType('Blockly.MetricsManager');\nconst {Rect} = goog.require('Blockly.utils.Rect');\nconst {Size} = goog.require('Blockly.utils.Size');\nconst {Svg} = goog.require('Blockly.utils.Svg');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceSvg} = goog.requireType('Blockly.WorkspaceSvg');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.Events.Click');\n\n\n/**\n * Class for a zoom controls.\n * @implements {IPositionable}\n * @alias Blockly.ZoomControls\n */\nclass ZoomControls {\n  /**\n   * @param {!WorkspaceSvg} workspace The workspace to sit in.\n   */\n  constructor(workspace) {\n    /**\n     * @type {!WorkspaceSvg}\n     * @private\n     */\n    this.workspace_ = workspace;\n\n    /**\n     * The unique id for this component that is used to register with the\n     * ComponentManager.\n     * @type {string}\n     */\n    this.id = 'zoomControls';\n\n    /**\n     * A handle to use to unbind the mouse down event handler for zoom reset\n     *    button. Opaque data returned from browserEvents.conditionalBind.\n     * @type {?browserEvents.Data}\n     * @private\n     */\n    this.onZoomResetWrapper_ = null;\n\n    /**\n     * A handle to use to unbind the mouse down event handler for zoom in\n     * button. Opaque data returned from browserEvents.conditionalBind.\n     * @type {?browserEvents.Data}\n     * @private\n     */\n    this.onZoomInWrapper_ = null;\n\n    /**\n     * A handle to use to unbind the mouse down event handler for zoom out\n     * button. Opaque data returned from browserEvents.conditionalBind.\n     * @type {?browserEvents.Data}\n     * @private\n     */\n    this.onZoomOutWrapper_ = null;\n\n    /**\n     * The zoom in svg <g> element.\n     * @type {SVGGElement}\n     * @private\n     */\n    this.zoomInGroup_ = null;\n\n    /**\n     * The zoom out svg <g> element.\n     * @type {SVGGElement}\n     * @private\n     */\n    this.zoomOutGroup_ = null;\n\n    /**\n     * The zoom reset svg <g> element.\n     * @type {SVGGElement}\n     * @private\n     */\n    this.zoomResetGroup_ = null;\n\n    /**\n     * Width of the zoom controls.\n     * @type {number}\n     * @const\n     * @private\n     */\n    this.WIDTH_ = 32;\n\n    /**\n     * Height of each zoom control.\n     * @type {number}\n     * @const\n     * @private\n     */\n    this.HEIGHT_ = 32;\n\n    /**\n     * Small spacing used between the zoom in and out control, in pixels.\n     * @type {number}\n     * @const\n     * @private\n     */\n    this.SMALL_SPACING_ = 2;\n\n    /**\n     * Large spacing used between the zoom in and reset control, in pixels.\n     * @type {number}\n     * @const\n     * @private\n     */\n    this.LARGE_SPACING_ = 11;\n\n    /**\n     * Distance between zoom controls and bottom or top edge of workspace.\n     * @type {number}\n     * @const\n     * @private\n     */\n    this.MARGIN_VERTICAL_ = 20;\n\n    /**\n     * Distance between zoom controls and right or left edge of workspace.\n     * @type {number}\n     * @private\n     */\n    this.MARGIN_HORIZONTAL_ = 20;\n\n    /**\n     * The SVG group containing the zoom controls.\n     * @type {SVGElement}\n     * @private\n     */\n    this.svgGroup_ = null;\n\n    /**\n     * Left coordinate of the zoom controls.\n     * @type {number}\n     * @private\n     */\n    this.left_ = 0;\n\n    /**\n     * Top coordinate of the zoom controls.\n     * @type {number}\n     * @private\n     */\n    this.top_ = 0;\n\n    /**\n     * Whether this has been initialized.\n     * @type {boolean}\n     * @private\n     */\n    this.initialized_ = false;\n  }\n  /**\n   * Create the zoom controls.\n   * @return {!SVGElement} The zoom controls SVG group.\n   */\n  createDom() {\n    this.svgGroup_ = dom.createSvgElement(Svg.G, {}, null);\n\n    // Each filter/pattern needs a unique ID for the case of multiple Blockly\n    // instances on a page.  Browser behaviour becomes undefined otherwise.\n    // https://neil.fraser.name/news/2015/11/01/\n    const rnd = String(Math.random()).substring(2);\n    this.createZoomOutSvg_(rnd);\n    this.createZoomInSvg_(rnd);\n    if (this.workspace_.isMovable()) {\n      // If we zoom to the center and the workspace isn't movable we could\n      // loose blocks at the edges of the workspace.\n      this.createZoomResetSvg_(rnd);\n    }\n    return this.svgGroup_;\n  }\n  /**\n   * Initializes the zoom controls.\n   */\n  init() {\n    this.workspace_.getComponentManager().addComponent({\n      component: this,\n      weight: 2,\n      capabilities: [ComponentManager.Capability.POSITIONABLE],\n    });\n    this.initialized_ = true;\n  }\n  /**\n   * Disposes of this zoom controls.\n   * Unlink from all DOM elements to prevent memory leaks.\n   */\n  dispose() {\n    this.workspace_.getComponentManager().removeComponent('zoomControls');\n    if (this.svgGroup_) {\n      dom.removeNode(this.svgGroup_);\n    }\n    if (this.onZoomResetWrapper_) {\n      browserEvents.unbind(this.onZoomResetWrapper_);\n    }\n    if (this.onZoomInWrapper_) {\n      browserEvents.unbind(this.onZoomInWrapper_);\n    }\n    if (this.onZoomOutWrapper_) {\n      browserEvents.unbind(this.onZoomOutWrapper_);\n    }\n  }\n  /**\n   * Returns the bounding rectangle of the UI element in pixel units relative to\n   * the Blockly injection div.\n   * @return {?Rect} The UI elements's bounding box. Null if\n   *   bounding box should be ignored by other UI elements.\n   */\n  getBoundingRectangle() {\n    let height = this.SMALL_SPACING_ + 2 * this.HEIGHT_;\n    if (this.zoomResetGroup_) {\n      height += this.LARGE_SPACING_ + this.HEIGHT_;\n    }\n    const bottom = this.top_ + height;\n    const right = this.left_ + this.WIDTH_;\n    return new Rect(this.top_, bottom, this.left_, right);\n  }\n  /**\n   * Positions the zoom controls.\n   * It is positioned in the opposite corner to the corner the\n   * categories/toolbox starts at.\n   * @param {!MetricsManager.UiMetrics} metrics The workspace metrics.\n   * @param {!Array<!Rect>} savedPositions List of rectangles that\n   *     are already on the workspace.\n   */\n  position(metrics, savedPositions) {\n    // Not yet initialized.\n    if (!this.initialized_) {\n      return;\n    }\n\n    const cornerPosition =\n        uiPosition.getCornerOppositeToolbox(this.workspace_, metrics);\n    let height = this.SMALL_SPACING_ + 2 * this.HEIGHT_;\n    if (this.zoomResetGroup_) {\n      height += this.LARGE_SPACING_ + this.HEIGHT_;\n    }\n    const startRect = uiPosition.getStartPositionRect(\n        cornerPosition, new Size(this.WIDTH_, height), this.MARGIN_HORIZONTAL_,\n        this.MARGIN_VERTICAL_, metrics, this.workspace_);\n\n    const verticalPosition = cornerPosition.vertical;\n    const bumpDirection = verticalPosition === uiPosition.verticalPosition.TOP ?\n        uiPosition.bumpDirection.DOWN :\n        uiPosition.bumpDirection.UP;\n    const positionRect = uiPosition.bumpPositionRect(\n        startRect, this.MARGIN_VERTICAL_, bumpDirection, savedPositions);\n\n    if (verticalPosition === uiPosition.verticalPosition.TOP) {\n      const zoomInTranslateY = this.SMALL_SPACING_ + this.HEIGHT_;\n      this.zoomInGroup_.setAttribute(\n          'transform', 'translate(0, ' + zoomInTranslateY + ')');\n      if (this.zoomResetGroup_) {\n        const zoomResetTranslateY =\n            zoomInTranslateY + this.LARGE_SPACING_ + this.HEIGHT_;\n        this.zoomResetGroup_.setAttribute(\n            'transform', 'translate(0, ' + zoomResetTranslateY + ')');\n      }\n    } else {\n      const zoomInTranslateY =\n          this.zoomResetGroup_ ? this.LARGE_SPACING_ + this.HEIGHT_ : 0;\n      this.zoomInGroup_.setAttribute(\n          'transform', 'translate(0, ' + zoomInTranslateY + ')');\n      const zoomOutTranslateY =\n          zoomInTranslateY + this.SMALL_SPACING_ + this.HEIGHT_;\n      this.zoomOutGroup_.setAttribute(\n          'transform', 'translate(0, ' + zoomOutTranslateY + ')');\n    }\n\n    this.top_ = positionRect.top;\n    this.left_ = positionRect.left;\n    this.svgGroup_.setAttribute(\n        'transform', 'translate(' + this.left_ + ',' + this.top_ + ')');\n  }\n  /**\n   * Create the zoom in icon and its event handler.\n   * @param {string} rnd The random string to use as a suffix in the clip path's\n   *     ID.  These IDs must be unique in case there are multiple Blockly\n   *     instances on the same page.\n   * @private\n   */\n  createZoomOutSvg_(rnd) {\n    /* This markup will be generated and added to the .svgGroup_:\n    <g class=\"blocklyZoom\">\n      <clipPath id=\"blocklyZoomoutClipPath837493\">\n        <rect width=\"32\" height=\"32></rect>\n      </clipPath>\n      <image width=\"96\" height=\"124\" x=\"-64\" y=\"-92\"\n    xlink:href=\"media/sprites.png\"\n          clip-path=\"url(#blocklyZoomoutClipPath837493)\"></image>\n    </g>\n    */\n    this.zoomOutGroup_ =\n        dom.createSvgElement(Svg.G, {'class': 'blocklyZoom'}, this.svgGroup_);\n    const clip = dom.createSvgElement(\n        Svg.CLIPPATH, {'id': 'blocklyZoomoutClipPath' + rnd},\n        this.zoomOutGroup_);\n    dom.createSvgElement(\n        Svg.RECT, {\n          'width': 32,\n          'height': 32,\n        },\n        clip);\n    const zoomoutSvg = dom.createSvgElement(\n        Svg.IMAGE, {\n          'width': SPRITE.width,\n          'height': SPRITE.height,\n          'x': -64,\n          'y': -92,\n          'clip-path': 'url(#blocklyZoomoutClipPath' + rnd + ')',\n        },\n        this.zoomOutGroup_);\n    zoomoutSvg.setAttributeNS(\n        dom.XLINK_NS, 'xlink:href',\n        this.workspace_.options.pathToMedia + SPRITE.url);\n\n    // Attach listener.\n    this.onZoomOutWrapper_ = browserEvents.conditionalBind(\n        this.zoomOutGroup_, 'mousedown', null, this.zoom_.bind(this, -1));\n  }\n  /**\n   * Create the zoom out icon and its event handler.\n   * @param {string} rnd The random string to use as a suffix in the clip path's\n   *     ID.  These IDs must be unique in case there are multiple Blockly\n   *     instances on the same page.\n   * @private\n   */\n  createZoomInSvg_(rnd) {\n    /* This markup will be generated and added to the .svgGroup_:\n    <g class=\"blocklyZoom\">\n      <clipPath id=\"blocklyZoominClipPath837493\">\n        <rect width=\"32\" height=\"32\"></rect>\n      </clipPath>\n      <image width=\"96\" height=\"124\" x=\"-32\" y=\"-92\"\n    xlink:href=\"media/sprites.png\"\n          clip-path=\"url(#blocklyZoominClipPath837493)\"></image>\n    </g>\n    */\n    this.zoomInGroup_ =\n        dom.createSvgElement(Svg.G, {'class': 'blocklyZoom'}, this.svgGroup_);\n    const clip = dom.createSvgElement(\n        Svg.CLIPPATH, {'id': 'blocklyZoominClipPath' + rnd}, this.zoomInGroup_);\n    dom.createSvgElement(\n        Svg.RECT, {\n          'width': 32,\n          'height': 32,\n        },\n        clip);\n    const zoominSvg = dom.createSvgElement(\n        Svg.IMAGE, {\n          'width': SPRITE.width,\n          'height': SPRITE.height,\n          'x': -32,\n          'y': -92,\n          'clip-path': 'url(#blocklyZoominClipPath' + rnd + ')',\n        },\n        this.zoomInGroup_);\n    zoominSvg.setAttributeNS(\n        dom.XLINK_NS, 'xlink:href',\n        this.workspace_.options.pathToMedia + SPRITE.url);\n\n    // Attach listener.\n    this.onZoomInWrapper_ = browserEvents.conditionalBind(\n        this.zoomInGroup_, 'mousedown', null, this.zoom_.bind(this, 1));\n  }\n  /**\n   * Handles a mouse down event on the zoom in or zoom out buttons on the\n   *    workspace.\n   * @param {number} amount Amount of zooming. Negative amount values zoom out,\n   *    and positive amount values zoom in.\n   * @param {!Event} e A mouse down event.\n   * @private\n   */\n  zoom_(amount, e) {\n    this.workspace_.markFocused();\n    this.workspace_.zoomCenter(amount);\n    this.fireZoomEvent_();\n    Touch.clearTouchIdentifier();  // Don't block future drags.\n    e.stopPropagation();           // Don't start a workspace scroll.\n    e.preventDefault();            // Stop double-clicking from selecting text.\n  }\n  /**\n   * Create the zoom reset icon and its event handler.\n   * @param {string} rnd The random string to use as a suffix in the clip path's\n   *     ID.  These IDs must be unique in case there are multiple Blockly\n   *     instances on the same page.\n   * @private\n   */\n  createZoomResetSvg_(rnd) {\n    /* This markup will be generated and added to the .svgGroup_:\n    <g class=\"blocklyZoom\">\n      <clipPath id=\"blocklyZoomresetClipPath837493\">\n        <rect width=\"32\" height=\"32\"></rect>\n      </clipPath>\n      <image width=\"96\" height=\"124\" x=\"-32\" y=\"-92\"\n    xlink:href=\"media/sprites.png\"\n          clip-path=\"url(#blocklyZoomresetClipPath837493)\"></image>\n    </g>\n    */\n    this.zoomResetGroup_ =\n        dom.createSvgElement(Svg.G, {'class': 'blocklyZoom'}, this.svgGroup_);\n    const clip = dom.createSvgElement(\n        Svg.CLIPPATH, {'id': 'blocklyZoomresetClipPath' + rnd},\n        this.zoomResetGroup_);\n    dom.createSvgElement(Svg.RECT, {'width': 32, 'height': 32}, clip);\n    const zoomresetSvg = dom.createSvgElement(\n        Svg.IMAGE, {\n          'width': SPRITE.width,\n          'height': SPRITE.height,\n          'y': -92,\n          'clip-path': 'url(#blocklyZoomresetClipPath' + rnd + ')',\n        },\n        this.zoomResetGroup_);\n    zoomresetSvg.setAttributeNS(\n        dom.XLINK_NS, 'xlink:href',\n        this.workspace_.options.pathToMedia + SPRITE.url);\n\n    // Attach event listeners.\n    this.onZoomResetWrapper_ = browserEvents.conditionalBind(\n        this.zoomResetGroup_, 'mousedown', null, this.resetZoom_.bind(this));\n  }\n  /**\n   * Handles a mouse down event on the reset zoom button on the workspace.\n   * @param {!Event} e A mouse down event.\n   * @private\n   */\n  resetZoom_(e) {\n    this.workspace_.markFocused();\n\n    // zoom is passed amount and computes the new scale using the formula:\n    // targetScale = currentScale * Math.pow(speed, amount)\n    const targetScale = this.workspace_.options.zoomOptions.startScale;\n    const currentScale = this.workspace_.scale;\n    const speed = this.workspace_.options.zoomOptions.scaleSpeed;\n    // To compute amount:\n    // amount = log(speed, (targetScale / currentScale))\n    // Math.log computes natural logarithm (ln), to change the base, use\n    // formula: log(base, value) = ln(value) / ln(base)\n    const amount = Math.log(targetScale / currentScale) / Math.log(speed);\n    this.workspace_.beginCanvasTransition();\n    this.workspace_.zoomCenter(amount);\n    this.workspace_.scrollCenter();\n\n    setTimeout(this.workspace_.endCanvasTransition.bind(this.workspace_), 500);\n    this.fireZoomEvent_();\n    Touch.clearTouchIdentifier();  // Don't block future drags.\n    e.stopPropagation();           // Don't start a workspace scroll.\n    e.preventDefault();            // Stop double-clicking from selecting text.\n  }\n  /**\n   * Fires a zoom control UI event.\n   * @private\n   */\n  fireZoomEvent_() {\n    const uiEvent = new (eventUtils.get(eventUtils.CLICK))(\n        null, this.workspace_.id, 'zoom_controls');\n    eventUtils.fire(uiEvent);\n  }\n}\n\n/**\n * CSS for zoom controls.  See css.js for use.\n */\nCss.register(`\n.blocklyZoom>image, .blocklyZoom>svg>image {\n  opacity: .4;\n}\n\n.blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {\n  opacity: .6;\n}\n\n.blocklyZoom>image:active, .blocklyZoom>svg>image:active {\n  opacity: .8;\n}\n`);\n\nexports.ZoomControls = ZoomControls;\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Object representing a code comment on the workspace.\n */\n'use strict';\n\n/**\n * Object representing a code comment on the workspace.\n * @class\n */\ngoog.module('Blockly.WorkspaceComment');\n\nconst eventUtils = goog.require('Blockly.Events.utils');\nconst idGenerator = goog.require('Blockly.utils.idGenerator');\nconst xml = goog.require('Blockly.utils.xml');\nconst {Coordinate} = goog.require('Blockly.utils.Coordinate');\n/* eslint-disable-next-line no-unused-vars */\nconst {CommentMove} = goog.require('Blockly.Events.CommentMove');\n/* eslint-disable-next-line no-unused-vars */\nconst {Workspace} = goog.requireType('Blockly.Workspace');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.Events.CommentChange');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.Events.CommentCreate');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.Events.CommentDelete');\n\n\n/**\n * Class for a workspace comment.\n * @alias Blockly.WorkspaceComment\n */\nclass WorkspaceComment {\n  /**\n   * @param {!Workspace} workspace The block's workspace.\n   * @param {string} content The content of this workspace comment.\n   * @param {number} height Height of the comment.\n   * @param {number} width Width of the comment.\n   * @param {string=} opt_id Optional ID.  Use this ID if provided, otherwise\n   *     create a new ID.\n   */\n  constructor(workspace, content, height, width, opt_id) {\n    /** @type {string} */\n    this.id = (opt_id && !workspace.getCommentById(opt_id)) ?\n        opt_id :\n        idGenerator.genUid();\n\n    workspace.addTopComment(this);\n\n    /**\n     * The comment's position in workspace units.  (0, 0) is at the workspace's\n     * origin; scale does not change this value.\n     * @type {!Coordinate}\n     * @protected\n     */\n    this.xy_ = new Coordinate(0, 0);\n\n    /**\n     * The comment's height in workspace units.  Scale does not change this\n     * value.\n     * @type {number}\n     * @protected\n     */\n    this.height_ = height;\n\n    /**\n     * The comment's width in workspace units.  Scale does not change this\n     * value.\n     * @type {number}\n     * @protected\n     */\n    this.width_ = width;\n\n    /**\n     * @type {!Workspace}\n     */\n    this.workspace = workspace;\n\n    /**\n     * @protected\n     * @type {boolean}\n     */\n    this.RTL = workspace.RTL;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.deletable_ = true;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.movable_ = true;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.editable_ = true;\n\n    /**\n     * @protected\n     * @type {string}\n     */\n    this.content_ = content;\n\n    /**\n     * Whether this comment has been disposed.\n     * @protected\n     * @type {boolean}\n     */\n    this.disposed_ = false;\n\n    /**\n     * @package\n     * @type {boolean}\n     */\n    this.isComment = true;\n\n    WorkspaceComment.fireCreateEvent(this);\n  }\n\n  /**\n   * Dispose of this comment.\n   * @package\n   */\n  dispose() {\n    if (this.disposed_) {\n      return;\n    }\n\n    if (eventUtils.isEnabled()) {\n      eventUtils.fire(new (eventUtils.get(eventUtils.COMMENT_DELETE))(this));\n    }\n\n    // Remove from the list of top comments and the comment database.\n    this.workspace.removeTopComment(this);\n    this.disposed_ = true;\n  }\n\n  // Height, width, x, and y are all stored on even non-rendered comments, to\n  // preserve state if you pass the contents through a headless workspace.\n\n  /**\n   * Get comment height.\n   * @return {number} Comment height.\n   * @package\n   */\n  getHeight() {\n    return this.height_;\n  }\n\n  /**\n   * Set comment height.\n   * @param {number} height Comment height.\n   * @package\n   */\n  setHeight(height) {\n    this.height_ = height;\n  }\n\n  /**\n   * Get comment width.\n   * @return {number} Comment width.\n   * @package\n   */\n  getWidth() {\n    return this.width_;\n  }\n\n  /**\n   * Set comment width.\n   * @param {number} width comment width.\n   * @package\n   */\n  setWidth(width) {\n    this.width_ = width;\n  }\n\n  /**\n   * Get stored location.\n   * @return {!Coordinate} The comment's stored location.\n   *   This is not valid if the comment is currently being dragged.\n   * @package\n   */\n  getXY() {\n    return new Coordinate(this.xy_.x, this.xy_.y);\n  }\n\n  /**\n   * Move a comment by a relative offset.\n   * @param {number} dx Horizontal offset, in workspace units.\n   * @param {number} dy Vertical offset, in workspace units.\n   * @package\n   */\n  moveBy(dx, dy) {\n    const event = /** @type {!CommentMove} */ (\n        new (eventUtils.get(eventUtils.COMMENT_MOVE))(this));\n    this.xy_.translate(dx, dy);\n    event.recordNew();\n    eventUtils.fire(event);\n  }\n\n  /**\n   * Get whether this comment is deletable or not.\n   * @return {boolean} True if deletable.\n   * @package\n   */\n  isDeletable() {\n    return this.deletable_ &&\n        !(this.workspace && this.workspace.options.readOnly);\n  }\n\n  /**\n   * Set whether this comment is deletable or not.\n   * @param {boolean} deletable True if deletable.\n   * @package\n   */\n  setDeletable(deletable) {\n    this.deletable_ = deletable;\n  }\n\n  /**\n   * Get whether this comment is movable or not.\n   * @return {boolean} True if movable.\n   * @package\n   */\n  isMovable() {\n    return this.movable_ &&\n        !(this.workspace && this.workspace.options.readOnly);\n  }\n\n  /**\n   * Set whether this comment is movable or not.\n   * @param {boolean} movable True if movable.\n   * @package\n   */\n  setMovable(movable) {\n    this.movable_ = movable;\n  }\n\n  /**\n   * Get whether this comment is editable or not.\n   * @return {boolean} True if editable.\n   */\n  isEditable() {\n    return this.editable_ &&\n        !(this.workspace && this.workspace.options.readOnly);\n  }\n\n  /**\n   * Set whether this comment is editable or not.\n   * @param {boolean} editable True if editable.\n   */\n  setEditable(editable) {\n    this.editable_ = editable;\n  }\n\n  /**\n   * Returns this comment's text.\n   * @return {string} Comment text.\n   * @package\n   */\n  getContent() {\n    return this.content_;\n  }\n\n  /**\n   * Set this comment's content.\n   * @param {string} content Comment content.\n   * @package\n   */\n  setContent(content) {\n    if (this.content_ !== content) {\n      eventUtils.fire(new (eventUtils.get(eventUtils.COMMENT_CHANGE))(\n          this, this.content_, content));\n      this.content_ = content;\n    }\n  }\n\n  /**\n   * Encode a comment subtree as XML with XY coordinates.\n   * @param {boolean=} opt_noId True if the encoder should skip the comment ID.\n   * @return {!Element} Tree of XML elements.\n   * @package\n   */\n  toXmlWithXY(opt_noId) {\n    const element = this.toXml(opt_noId);\n    element.setAttribute('x', Math.round(this.xy_.x));\n    element.setAttribute('y', Math.round(this.xy_.y));\n    element.setAttribute('h', this.height_);\n    element.setAttribute('w', this.width_);\n    return element;\n  }\n\n  /**\n   * Encode a comment subtree as XML, but don't serialize the XY coordinates.\n   * This method avoids some expensive metrics-related calls that are made in\n   * toXmlWithXY().\n   * @param {boolean=} opt_noId True if the encoder should skip the comment ID.\n   * @return {!Element} Tree of XML elements.\n   * @package\n   */\n  toXml(opt_noId) {\n    const commentElement = xml.createElement('comment');\n    if (!opt_noId) {\n      commentElement.id = this.id;\n    }\n    commentElement.textContent = this.getContent();\n    return commentElement;\n  }\n\n  /**\n   * Fire a create event for the given workspace comment, if comments are\n   * enabled.\n   * @param {!WorkspaceComment} comment The comment that was just created.\n   * @package\n   */\n  static fireCreateEvent(comment) {\n    if (eventUtils.isEnabled()) {\n      const existingGroup = eventUtils.getGroup();\n      if (!existingGroup) {\n        eventUtils.setGroup(true);\n      }\n      try {\n        eventUtils.fire(\n            new (eventUtils.get(eventUtils.COMMENT_CREATE))(comment));\n      } finally {\n        if (!existingGroup) {\n          eventUtils.setGroup(false);\n        }\n      }\n    }\n  }\n\n  /**\n   * Decode an XML comment tag and create a comment on the workspace.\n   * @param {!Element} xmlComment XML comment element.\n   * @param {!Workspace} workspace The workspace.\n   * @return {!WorkspaceComment} The created workspace comment.\n   * @package\n   */\n  static fromXml(xmlComment, workspace) {\n    const info = WorkspaceComment.parseAttributes(xmlComment);\n\n    const comment =\n        new WorkspaceComment(workspace, info.content, info.h, info.w, info.id);\n\n    const commentX = parseInt(xmlComment.getAttribute('x'), 10);\n    const commentY = parseInt(xmlComment.getAttribute('y'), 10);\n    if (!isNaN(commentX) && !isNaN(commentY)) {\n      comment.moveBy(commentX, commentY);\n    }\n\n    WorkspaceComment.fireCreateEvent(comment);\n    return comment;\n  }\n\n  /**\n   * Decode an XML comment tag and return the results in an object.\n   * @param {!Element} xml XML comment element.\n   * @return {{w: number, h: number, x: number, y: number, content: string}} An\n   *     object containing the id, size, position, and comment string.\n   * @package\n   */\n  static parseAttributes(xml) {\n    const xmlH = xml.getAttribute('h');\n    const xmlW = xml.getAttribute('w');\n\n    return {\n      // @type {string}\n      id: xml.getAttribute('id'),\n      // The height of the comment in workspace units, or 100 if not specified.\n      // @type {number}\n      h: xmlH ? parseInt(xmlH, 10) : 100,\n      // The width of the comment in workspace units, or 100 if not specified.\n      // @type {number}\n      w: xmlW ? parseInt(xmlW, 10) : 100,\n      // The x position of the comment in workspace coordinates, or NaN if not\n      // specified in the XML.\n      // @type {number}\n      x: parseInt(xml.getAttribute('x'), 10),\n      // The y position of the comment in workspace coordinates, or NaN if not\n      // specified in the XML.\n      // @type {number}\n      y: parseInt(xml.getAttribute('y'), 10),\n      // @type {string}\n      content: xml.textContent,\n    };\n  }\n}\n\nexports.WorkspaceComment = WorkspaceComment;\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Object representing a code comment on a rendered workspace.\n */\n'use strict';\n\n/**\n * Object representing a code comment on a rendered workspace.\n * @class\n */\ngoog.module('Blockly.WorkspaceCommentSvg');\n\nconst ContextMenu = goog.require('Blockly.ContextMenu');\nconst Css = goog.require('Blockly.Css');\nconst Touch = goog.require('Blockly.Touch');\nconst browserEvents = goog.require('Blockly.browserEvents');\nconst common = goog.require('Blockly.common');\nconst dom = goog.require('Blockly.utils.dom');\nconst eventUtils = goog.require('Blockly.Events.utils');\nconst svgMath = goog.require('Blockly.utils.svgMath');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockDragSurfaceSvg} = goog.requireType('Blockly.BlockDragSurfaceSvg');\n/* eslint-disable-next-line no-unused-vars */\nconst {CommentMove} = goog.require('Blockly.Events.CommentMove');\nconst {Coordinate} = goog.require('Blockly.utils.Coordinate');\n/* eslint-disable-next-line no-unused-vars */\nconst {IBoundedElement} = goog.require('Blockly.IBoundedElement');\n/* eslint-disable-next-line no-unused-vars */\nconst {IBubble} = goog.require('Blockly.IBubble');\n/* eslint-disable-next-line no-unused-vars */\nconst {ICopyable} = goog.require('Blockly.ICopyable');\nconst {Rect} = goog.require('Blockly.utils.Rect');\nconst {Svg} = goog.require('Blockly.utils.Svg');\nconst {WorkspaceComment} = goog.require('Blockly.WorkspaceComment');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceSvg} = goog.requireType('Blockly.WorkspaceSvg');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.Events.CommentCreate');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.Events.CommentDelete');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.Events.Selected');\n\n\n/**\n * Size of the resize icon.\n * @type {number}\n * @const\n */\nconst RESIZE_SIZE = 8;\n\n/**\n * Radius of the border around the comment.\n * @type {number}\n * @const\n */\nconst BORDER_RADIUS = 3;\n\n/**\n * Offset from the foreignobject edge to the textarea edge.\n * @type {number}\n * @const\n */\nconst TEXTAREA_OFFSET = 2;\n\n/**\n * Class for a workspace comment's SVG representation.\n * @extends {WorkspaceComment}\n * @implements {IBoundedElement}\n * @implements {IBubble}\n * @implements {ICopyable}\n * @alias Blockly.WorkspaceCommentSvg\n */\nclass WorkspaceCommentSvg extends WorkspaceComment {\n  /**\n   * @param {!WorkspaceSvg} workspace The block's workspace.\n   * @param {string} content The content of this workspace comment.\n   * @param {number} height Height of the comment.\n   * @param {number} width Width of the comment.\n   * @param {string=} opt_id Optional ID.  Use this ID if provided, otherwise\n   *     create a new ID.\n   */\n  constructor(workspace, content, height, width, opt_id) {\n    super(workspace, content, height, width, opt_id);\n    /**\n     * @type {!WorkspaceSvg}\n     */\n    this.workspace;\n\n    /**\n     * Mouse up event data.\n     * @type {?browserEvents.Data}\n     * @private\n     */\n    this.onMouseUpWrapper_ = null;\n\n    /**\n     * Mouse move event data.\n     * @type {?browserEvents.Data}\n     * @private\n     */\n    this.onMouseMoveWrapper_ = null;\n\n    /**\n     * Whether event handlers have been initialized.\n     * @type {boolean}\n     * @private\n     */\n    this.eventsInit_ = false;\n\n    /**\n     * @type {?Element}\n     * @private\n     */\n    this.textarea_ = null;\n\n    /**\n     * @type {?SVGRectElement}\n     * @private\n     */\n    this.svgRectTarget_ = null;\n\n    /**\n     * @type {?SVGRectElement}\n     * @private\n     */\n    this.svgHandleTarget_ = null;\n\n    /**\n     * @type {?SVGForeignObjectElement}\n     * @private\n     */\n    this.foreignObject_ = null;\n\n    /**\n     * @type {?SVGGElement}\n     * @private\n     */\n    this.resizeGroup_ = null;\n\n    /**\n     * @type {?SVGGElement}\n     * @private\n     */\n    this.deleteGroup_ = null;\n\n    /**\n     * @type {?SVGCircleElement}\n     * @private\n     */\n    this.deleteIconBorder_ = null;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.focused_ = false;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.autoLayout_ = false;\n\n    // Create core elements for the block.\n    /**\n     * @type {!SVGElement}\n     * @private\n     */\n    this.svgGroup_ =\n        dom.createSvgElement(Svg.G, {'class': 'blocklyComment'}, null);\n    this.svgGroup_.translate_ = '';\n\n    this.svgRect_ = dom.createSvgElement(Svg.RECT, {\n      'class': 'blocklyCommentRect',\n      'x': 0,\n      'y': 0,\n      'rx': BORDER_RADIUS,\n      'ry': BORDER_RADIUS,\n    });\n    this.svgGroup_.appendChild(this.svgRect_);\n\n    /**\n     * Whether the comment is rendered onscreen and is a part of the DOM.\n     * @type {boolean}\n     * @private\n     */\n    this.rendered_ = false;\n\n    /**\n     * Whether to move the comment to the drag surface when it is dragged.\n     * True if it should move, false if it should be translated directly.\n     * @type {boolean}\n     * @private\n     */\n    this.useDragSurface_ =\n        svgMath.is3dSupported() && !!workspace.getBlockDragSurface();\n\n    this.render();\n  }\n\n  /**\n   * Dispose of this comment.\n   * @package\n   */\n  dispose() {\n    if (this.disposed_) {\n      return;\n    }\n    // If this comment is being dragged, unlink the mouse events.\n    if (common.getSelected() === this) {\n      this.unselect();\n      this.workspace.cancelCurrentGesture();\n    }\n\n    if (eventUtils.isEnabled()) {\n      eventUtils.fire(new (eventUtils.get(eventUtils.COMMENT_DELETE))(this));\n    }\n\n    dom.removeNode(this.svgGroup_);\n    // Dispose of any rendered components\n    this.disposeInternal_();\n\n    eventUtils.disable();\n    super.dispose();\n    eventUtils.enable();\n  }\n\n  /**\n   * Create and initialize the SVG representation of a workspace comment.\n   * May be called more than once.\n   *\n   * @param {boolean=} opt_noSelect Text inside text area will be selected if\n   *     false\n   *\n   * @package\n   */\n  initSvg(opt_noSelect) {\n    if (!this.workspace.rendered) {\n      throw TypeError('Workspace is headless.');\n    }\n    if (!this.workspace.options.readOnly && !this.eventsInit_) {\n      browserEvents.conditionalBind(\n          /** @type {!SVGRectElement} */ (this.svgRectTarget_), 'mousedown',\n          this, this.pathMouseDown_);\n      browserEvents.conditionalBind(\n          /** @type {!SVGRectElement} */ (this.svgHandleTarget_), 'mousedown',\n          this, this.pathMouseDown_);\n    }\n    this.eventsInit_ = true;\n\n    this.updateMovable();\n    if (!this.getSvgRoot().parentNode) {\n      this.workspace.getBubbleCanvas().appendChild(this.getSvgRoot());\n    }\n\n    if (!opt_noSelect && this.textarea_) {\n      this.textarea_.select();\n    }\n  }\n\n  /**\n   * Handle a mouse-down on an SVG comment.\n   * @param {!Event} e Mouse down event or touch start event.\n   * @private\n   */\n  pathMouseDown_(e) {\n    const gesture = this.workspace.getGesture(e);\n    if (gesture) {\n      gesture.handleBubbleStart(e, this);\n    }\n  }\n\n  /**\n   * Show the context menu for this workspace comment.\n   * @param {!Event} e Mouse event.\n   * @package\n   */\n  showContextMenu(e) {\n    if (this.workspace.options.readOnly) {\n      return;\n    }\n    // Save the current workspace comment in a variable for use in closures.\n    const comment = this;\n    const menuOptions = [];\n\n    if (this.isDeletable() && this.isMovable()) {\n      menuOptions.push(ContextMenu.commentDuplicateOption(comment));\n      menuOptions.push(ContextMenu.commentDeleteOption(comment));\n    }\n\n    ContextMenu.show(e, menuOptions, this.RTL);\n  }\n\n  /**\n   * Select this comment.  Highlight it visually.\n   * @package\n   */\n  select() {\n    if (common.getSelected() === this) {\n      return;\n    }\n    let oldId = null;\n    if (common.getSelected()) {\n      oldId = common.getSelected().id;\n      // Unselect any previously selected block.\n      eventUtils.disable();\n      try {\n        common.getSelected().unselect();\n      } finally {\n        eventUtils.enable();\n      }\n    }\n    const event = new (eventUtils.get(eventUtils.SELECTED))(\n        oldId, this.id, this.workspace.id);\n    eventUtils.fire(event);\n    common.setSelected(this);\n    this.addSelect();\n  }\n\n  /**\n   * Unselect this comment.  Remove its highlighting.\n   * @package\n   */\n  unselect() {\n    if (common.getSelected() !== this) {\n      return;\n    }\n    const event = new (eventUtils.get(eventUtils.SELECTED))(\n        this.id, null, this.workspace.id);\n    eventUtils.fire(event);\n    common.setSelected(null);\n    this.removeSelect();\n    this.blurFocus();\n  }\n\n  /**\n   * Select this comment.  Highlight it visually.\n   * @package\n   */\n  addSelect() {\n    dom.addClass(\n        /** @type {!Element} */ (this.svgGroup_), 'blocklySelected');\n    this.setFocus();\n  }\n\n  /**\n   * Unselect this comment.  Remove its highlighting.\n   * @package\n   */\n  removeSelect() {\n    dom.removeClass(\n        /** @type {!Element} */ (this.svgGroup_), 'blocklySelected');\n    this.blurFocus();\n  }\n\n  /**\n   * Focus this comment.  Highlight it visually.\n   * @package\n   */\n  addFocus() {\n    dom.addClass(\n        /** @type {!Element} */ (this.svgGroup_), 'blocklyFocused');\n  }\n\n  /**\n   * Unfocus this comment.  Remove its highlighting.\n   * @package\n   */\n  removeFocus() {\n    dom.removeClass(\n        /** @type {!Element} */ (this.svgGroup_), 'blocklyFocused');\n  }\n\n  /**\n   * Return the coordinates of the top-left corner of this comment relative to\n   * the drawing surface's origin (0,0), in workspace units.\n   * If the comment is on the workspace, (0, 0) is the origin of the workspace\n   * coordinate system.\n   * This does not change with workspace scale.\n   * @return {!Coordinate} Object with .x and .y properties in\n   *     workspace coordinates.\n   * @package\n   */\n  getRelativeToSurfaceXY() {\n    let x = 0;\n    let y = 0;\n\n    const dragSurfaceGroup = this.useDragSurface_ ?\n        this.workspace.getBlockDragSurface().getGroup() :\n        null;\n\n    let element = this.getSvgRoot();\n    if (element) {\n      do {\n        // Loop through this comment and every parent.\n        const xy = svgMath.getRelativeXY(/** @type {!Element} */ (element));\n        x += xy.x;\n        y += xy.y;\n        // If this element is the current element on the drag surface, include\n        // the translation of the drag surface itself.\n        if (this.useDragSurface_ &&\n            this.workspace.getBlockDragSurface().getCurrentBlock() ===\n                element) {\n          const surfaceTranslation =\n              this.workspace.getBlockDragSurface().getSurfaceTranslation();\n          x += surfaceTranslation.x;\n          y += surfaceTranslation.y;\n        }\n        element = element.parentNode;\n      } while (element && element !== this.workspace.getBubbleCanvas() &&\n               element !== dragSurfaceGroup);\n    }\n    this.xy_ = new Coordinate(x, y);\n    return this.xy_;\n  }\n\n  /**\n   * Move a comment by a relative offset.\n   * @param {number} dx Horizontal offset, in workspace units.\n   * @param {number} dy Vertical offset, in workspace units.\n   * @package\n   */\n  moveBy(dx, dy) {\n    const event = /** @type {!CommentMove} */ (\n        new (eventUtils.get(eventUtils.COMMENT_MOVE))(this));\n    // TODO: Do I need to look up the relative to surface XY position here?\n    const xy = this.getRelativeToSurfaceXY();\n    this.translate(xy.x + dx, xy.y + dy);\n    this.xy_ = new Coordinate(xy.x + dx, xy.y + dy);\n    event.recordNew();\n    eventUtils.fire(event);\n    this.workspace.resizeContents();\n  }\n\n  /**\n   * Transforms a comment by setting the translation on the transform attribute\n   * of the block's SVG.\n   * @param {number} x The x coordinate of the translation in workspace units.\n   * @param {number} y The y coordinate of the translation in workspace units.\n   * @package\n   */\n  translate(x, y) {\n    this.xy_ = new Coordinate(x, y);\n    this.getSvgRoot().setAttribute(\n        'transform', 'translate(' + x + ',' + y + ')');\n  }\n\n  /**\n   * Move this comment to its workspace's drag surface, accounting for\n   * positioning.  Generally should be called at the same time as\n   * setDragging(true).  Does nothing if useDragSurface_ is false.\n   * @package\n   */\n  moveToDragSurface() {\n    if (!this.useDragSurface_) {\n      return;\n    }\n    // The translation for drag surface blocks,\n    // is equal to the current relative-to-surface position,\n    // to keep the position in sync as it move on/off the surface.\n    // This is in workspace coordinates.\n    const xy = this.getRelativeToSurfaceXY();\n    this.clearTransformAttributes_();\n    this.workspace.getBlockDragSurface().translateSurface(xy.x, xy.y);\n    // Execute the move on the top-level SVG component\n    this.workspace.getBlockDragSurface().setBlocksAndShow(this.getSvgRoot());\n  }\n\n  /**\n   * Move this comment during a drag, taking into account whether we are using a\n   * drag surface to translate blocks.\n   * @param {BlockDragSurfaceSvg} dragSurface The surface that carries\n   *     rendered items during a drag, or null if no drag surface is in use.\n   * @param {!Coordinate} newLoc The location to translate to, in\n   *     workspace coordinates.\n   * @package\n   */\n  moveDuringDrag(dragSurface, newLoc) {\n    if (dragSurface) {\n      dragSurface.translateSurface(newLoc.x, newLoc.y);\n    } else {\n      this.svgGroup_.translate_ =\n          'translate(' + newLoc.x + ',' + newLoc.y + ')';\n      this.svgGroup_.setAttribute(\n          'transform', this.svgGroup_.translate_ + this.svgGroup_.skew_);\n    }\n  }\n\n  /**\n   * Move the bubble group to the specified location in workspace coordinates.\n   * @param {number} x The x position to move to.\n   * @param {number} y The y position to move to.\n   * @package\n   */\n  moveTo(x, y) {\n    this.translate(x, y);\n  }\n\n  /**\n   * Clear the comment of transform=\"...\" attributes.\n   * Used when the comment is switching from 3d to 2d transform or vice versa.\n   * @private\n   */\n  clearTransformAttributes_() {\n    this.getSvgRoot().removeAttribute('transform');\n  }\n\n  /**\n   * Returns the coordinates of a bounding box describing the dimensions of this\n   * comment.\n   * Coordinate system: workspace coordinates.\n   * @return {!Rect} Object with coordinates of the bounding box.\n   * @package\n   */\n  getBoundingRectangle() {\n    const blockXY = this.getRelativeToSurfaceXY();\n    const commentBounds = this.getHeightWidth();\n    const top = blockXY.y;\n    const bottom = blockXY.y + commentBounds.height;\n    let left;\n    let right;\n    if (this.RTL) {\n      left = blockXY.x - commentBounds.width;\n      // Add the width of the tab/puzzle piece knob to the x coordinate\n      // since X is the corner of the rectangle, not the whole puzzle piece.\n      right = blockXY.x;\n    } else {\n      // Subtract the width of the tab/puzzle piece knob to the x coordinate\n      // since X is the corner of the rectangle, not the whole puzzle piece.\n      left = blockXY.x;\n      right = blockXY.x + commentBounds.width;\n    }\n    return new Rect(top, bottom, left, right);\n  }\n\n  /**\n   * Add or remove the UI indicating if this comment is movable or not.\n   * @package\n   */\n  updateMovable() {\n    if (this.isMovable()) {\n      dom.addClass(\n          /** @type {!Element} */ (this.svgGroup_), 'blocklyDraggable');\n    } else {\n      dom.removeClass(\n          /** @type {!Element} */ (this.svgGroup_), 'blocklyDraggable');\n    }\n  }\n\n  /**\n   * Set whether this comment is movable or not.\n   * @param {boolean} movable True if movable.\n   * @package\n   */\n  setMovable(movable) {\n    super.setMovable(movable);\n    this.updateMovable();\n  }\n\n  /**\n   * Set whether this comment is editable or not.\n   * @param {boolean} editable True if editable.\n   */\n  setEditable(editable) {\n    super.setEditable(editable);\n    if (this.textarea_) {\n      this.textarea_.readOnly = !editable;\n    }\n  }\n\n  /**\n   * Recursively adds or removes the dragging class to this node and its\n   * children.\n   * @param {boolean} adding True if adding, false if removing.\n   * @package\n   */\n  setDragging(adding) {\n    if (adding) {\n      const group = this.getSvgRoot();\n      group.translate_ = '';\n      group.skew_ = '';\n      dom.addClass(\n          /** @type {!Element} */ (this.svgGroup_), 'blocklyDragging');\n    } else {\n      dom.removeClass(\n          /** @type {!Element} */ (this.svgGroup_), 'blocklyDragging');\n    }\n  }\n\n  /**\n   * Return the root node of the SVG or null if none exists.\n   * @return {!SVGElement} The root SVG node (probably a group).\n   * @package\n   */\n  getSvgRoot() {\n    return this.svgGroup_;\n  }\n\n  /**\n   * Returns this comment's text.\n   * @return {string} Comment text.\n   * @package\n   */\n  getContent() {\n    return this.textarea_ ? this.textarea_.value : this.content_;\n  }\n\n  /**\n   * Set this comment's content.\n   * @param {string} content Comment content.\n   * @package\n   */\n  setContent(content) {\n    super.setContent(content);\n    if (this.textarea_) {\n      this.textarea_.value = content;\n    }\n  }\n\n  /**\n   * Update the cursor over this comment by adding or removing a class.\n   * @param {boolean} enable True if the delete cursor should be shown, false\n   *     otherwise.\n   * @package\n   */\n  setDeleteStyle(enable) {\n    if (enable) {\n      dom.addClass(\n          /** @type {!Element} */ (this.svgGroup_), 'blocklyDraggingDelete');\n    } else {\n      dom.removeClass(\n          /** @type {!Element} */ (this.svgGroup_), 'blocklyDraggingDelete');\n    }\n  }\n\n  /**\n   * Set whether auto-layout of this bubble is enabled.  The first time a bubble\n   * is shown it positions itself to not cover any blocks.  Once a user has\n   * dragged it to reposition, it renders where the user put it.\n   * @param {boolean} _enable True if auto-layout should be enabled, false\n   *     otherwise.\n   * @package\n   */\n  setAutoLayout(_enable) {\n    // NOP for compatibility with the bubble dragger.\n  }\n\n  /**\n   * Encode a comment subtree as XML with XY coordinates.\n   * @param {boolean=} opt_noId True if the encoder should skip the comment ID.\n   * @return {!Element} Tree of XML elements.\n   * @package\n   */\n  toXmlWithXY(opt_noId) {\n    let width;  // Not used in LTR.\n    if (this.workspace.RTL) {\n      // Here be performance dragons: This calls getMetrics().\n      width = this.workspace.getWidth();\n    }\n    const element = this.toXml(opt_noId);\n    const xy = this.getRelativeToSurfaceXY();\n    element.setAttribute(\n        'x', Math.round(this.workspace.RTL ? width - xy.x : xy.x));\n    element.setAttribute('y', Math.round(xy.y));\n    element.setAttribute('h', this.getHeight());\n    element.setAttribute('w', this.getWidth());\n    return element;\n  }\n\n  /**\n   * Encode a comment for copying.\n   * @return {!ICopyable.CopyData} Copy metadata.\n   * @package\n   */\n  toCopyData() {\n    return {\n      saveInfo: this.toXmlWithXY(),\n      source: this.workspace,\n      typeCounts: null,\n    };\n  }\n\n  /**\n   * Returns a bounding box describing the dimensions of this comment.\n   * @return {!{height: number, width: number}} Object with height and width\n   *     properties in workspace units.\n   * @package\n   */\n  getHeightWidth() {\n    return {width: this.getWidth(), height: this.getHeight()};\n  }\n\n  /**\n   * Renders the workspace comment.\n   * @package\n   */\n  render() {\n    if (this.rendered_) {\n      return;\n    }\n\n    const size = this.getHeightWidth();\n\n    // Add text area\n    this.createEditor_();\n    this.svgGroup_.appendChild(this.foreignObject_);\n\n    this.svgHandleTarget_ = dom.createSvgElement(\n        Svg.RECT, {'class': 'blocklyCommentHandleTarget', 'x': 0, 'y': 0});\n    this.svgGroup_.appendChild(this.svgHandleTarget_);\n    this.svgRectTarget_ = dom.createSvgElement(Svg.RECT, {\n      'class': 'blocklyCommentTarget',\n      'x': 0,\n      'y': 0,\n      'rx': BORDER_RADIUS,\n      'ry': BORDER_RADIUS,\n    });\n    this.svgGroup_.appendChild(this.svgRectTarget_);\n\n    // Add the resize icon\n    this.addResizeDom_();\n    if (this.isDeletable()) {\n      // Add the delete icon\n      this.addDeleteDom_();\n    }\n\n    this.setSize_(size.width, size.height);\n\n    // Set the content\n    this.textarea_.value = this.content_;\n\n    this.rendered_ = true;\n\n    if (this.resizeGroup_) {\n      browserEvents.conditionalBind(\n          /** @type {!SVGGElement} */ (this.resizeGroup_), 'mousedown', this,\n          this.resizeMouseDown_);\n    }\n\n    if (this.isDeletable()) {\n      browserEvents.conditionalBind(\n          /** @type {!SVGGElement} */ (this.deleteGroup_), 'mousedown', this,\n          this.deleteMouseDown_);\n      browserEvents.conditionalBind(\n          /** @type {!SVGGElement} */ (this.deleteGroup_), 'mouseout', this,\n          this.deleteMouseOut_);\n      browserEvents.conditionalBind(\n          /** @type {!SVGGElement} */ (this.deleteGroup_), 'mouseup', this,\n          this.deleteMouseUp_);\n    }\n  }\n\n  /**\n   * Create the text area for the comment.\n   * @return {!Element} The top-level node of the editor.\n   * @private\n   */\n  createEditor_() {\n    /* Create the editor.  Here's the markup that will be generated:\n      <foreignObject class=\"blocklyCommentForeignObject\" x=\"0\" y=\"10\"\n      width=\"164\" height=\"164\"> <body xmlns=\"http://www.w3.org/1999/xhtml\"\n      class=\"blocklyMinimalBody\"> <textarea xmlns=\"http://www.w3.org/1999/xhtml\"\n              class=\"blocklyCommentTextarea\"\n              style=\"height: 164px; width: 164px;\"></textarea>\n        </body>\n      </foreignObject>\n    */\n    this.foreignObject_ = dom.createSvgElement(\n        Svg.FOREIGNOBJECT, {\n          'x': 0,\n          'y': WorkspaceCommentSvg.TOP_OFFSET,\n          'class': 'blocklyCommentForeignObject',\n        },\n        null);\n    const body = document.createElementNS(dom.HTML_NS, 'body');\n    body.setAttribute('xmlns', dom.HTML_NS);\n    body.className = 'blocklyMinimalBody';\n    const textarea = document.createElementNS(dom.HTML_NS, 'textarea');\n    textarea.className = 'blocklyCommentTextarea';\n    textarea.setAttribute('dir', this.RTL ? 'RTL' : 'LTR');\n    textarea.readOnly = !this.isEditable();\n    body.appendChild(textarea);\n    this.textarea_ = textarea;\n    this.foreignObject_.appendChild(body);\n    // Don't zoom with mousewheel.\n    browserEvents.conditionalBind(textarea, 'wheel', this, function(e) {\n      e.stopPropagation();\n    });\n    browserEvents.conditionalBind(\n        textarea, 'change', this,\n        /**\n         * @this {WorkspaceCommentSvg}\n         * @param {Event} e Unused event parameter\n         */\n        function(\n            /* eslint-disable no-unused-vars */ e\n            /* eslint-enable no-unused-vars */) {\n          this.setContent(textarea.value);\n        });\n    return this.foreignObject_;\n  }\n\n  /**\n   * Add the resize icon to the DOM\n   * @private\n   */\n  addResizeDom_() {\n    this.resizeGroup_ = dom.createSvgElement(\n        Svg.G, {'class': this.RTL ? 'blocklyResizeSW' : 'blocklyResizeSE'},\n        this.svgGroup_);\n    dom.createSvgElement(\n        Svg.POLYGON,\n        {'points': '0,x x,x x,0'.replace(/x/g, RESIZE_SIZE.toString())},\n        this.resizeGroup_);\n    dom.createSvgElement(\n        Svg.LINE, {\n          'class': 'blocklyResizeLine',\n          'x1': RESIZE_SIZE / 3,\n          'y1': RESIZE_SIZE - 1,\n          'x2': RESIZE_SIZE - 1,\n          'y2': RESIZE_SIZE / 3,\n        },\n        this.resizeGroup_);\n    dom.createSvgElement(\n        Svg.LINE, {\n          'class': 'blocklyResizeLine',\n          'x1': RESIZE_SIZE * 2 / 3,\n          'y1': RESIZE_SIZE - 1,\n          'x2': RESIZE_SIZE - 1,\n          'y2': RESIZE_SIZE * 2 / 3,\n        },\n        this.resizeGroup_);\n  }\n\n  /**\n   * Add the delete icon to the DOM\n   * @private\n   */\n  addDeleteDom_() {\n    this.deleteGroup_ = dom.createSvgElement(\n        Svg.G, {'class': 'blocklyCommentDeleteIcon'}, this.svgGroup_);\n    this.deleteIconBorder_ = dom.createSvgElement(\n        Svg.CIRCLE,\n        {'class': 'blocklyDeleteIconShape', 'r': '7', 'cx': '7.5', 'cy': '7.5'},\n        this.deleteGroup_);\n    // x icon.\n    dom.createSvgElement(\n        Svg.LINE, {\n          'x1': '5',\n          'y1': '10',\n          'x2': '10',\n          'y2': '5',\n          'stroke': '#fff',\n          'stroke-width': '2',\n        },\n        this.deleteGroup_);\n    dom.createSvgElement(\n        Svg.LINE, {\n          'x1': '5',\n          'y1': '5',\n          'x2': '10',\n          'y2': '10',\n          'stroke': '#fff',\n          'stroke-width': '2',\n        },\n        this.deleteGroup_);\n  }\n\n  /**\n   * Handle a mouse-down on comment's resize corner.\n   * @param {!Event} e Mouse down event.\n   * @private\n   */\n  resizeMouseDown_(e) {\n    this.unbindDragEvents_();\n    if (browserEvents.isRightButton(e)) {\n      // No right-click.\n      e.stopPropagation();\n      return;\n    }\n    // Left-click (or middle click)\n    this.workspace.startDrag(\n        e,\n        new Coordinate(\n            this.workspace.RTL ? -this.width_ : this.width_, this.height_));\n\n    this.onMouseUpWrapper_ = browserEvents.conditionalBind(\n        document, 'mouseup', this, this.resizeMouseUp_);\n    this.onMouseMoveWrapper_ = browserEvents.conditionalBind(\n        document, 'mousemove', this, this.resizeMouseMove_);\n    this.workspace.hideChaff();\n    // This event has been handled.  No need to bubble up to the document.\n    e.stopPropagation();\n  }\n\n  /**\n   * Handle a mouse-down on comment's delete icon.\n   * @param {!Event} e Mouse down event.\n   * @private\n   */\n  deleteMouseDown_(e) {\n    // Highlight the delete icon.\n    dom.addClass(\n        /** @type {!Element} */ (this.deleteIconBorder_),\n        'blocklyDeleteIconHighlighted');\n    // This event has been handled.  No need to bubble up to the document.\n    e.stopPropagation();\n  }\n\n  /**\n   * Handle a mouse-out on comment's delete icon.\n   * @param {!Event} _e Mouse out event.\n   * @private\n   */\n  deleteMouseOut_(_e) {\n    // Restore highlight on the delete icon.\n    dom.removeClass(\n        /** @type {!Element} */ (this.deleteIconBorder_),\n        'blocklyDeleteIconHighlighted');\n  }\n\n  /**\n   * Handle a mouse-up on comment's delete icon.\n   * @param {!Event} e Mouse up event.\n   * @private\n   */\n  deleteMouseUp_(e) {\n    // Delete this comment.\n    this.dispose();\n    // This event has been handled.  No need to bubble up to the document.\n    e.stopPropagation();\n  }\n\n  /**\n   * Stop binding to the global mouseup and mousemove events.\n   * @private\n   */\n  unbindDragEvents_() {\n    if (this.onMouseUpWrapper_) {\n      browserEvents.unbind(this.onMouseUpWrapper_);\n      this.onMouseUpWrapper_ = null;\n    }\n    if (this.onMouseMoveWrapper_) {\n      browserEvents.unbind(this.onMouseMoveWrapper_);\n      this.onMouseMoveWrapper_ = null;\n    }\n  }\n\n  /**\n   * Handle a mouse-up event while dragging a comment's border or resize handle.\n   * @param {!Event} _e Mouse up event.\n   * @private\n   */\n  resizeMouseUp_(_e) {\n    Touch.clearTouchIdentifier();\n    this.unbindDragEvents_();\n  }\n\n  /**\n   * Resize this comment to follow the mouse.\n   * @param {!Event} e Mouse move event.\n   * @private\n   */\n  resizeMouseMove_(e) {\n    this.autoLayout_ = false;\n    const newXY = this.workspace.moveDrag(e);\n    this.setSize_(this.RTL ? -newXY.x : newXY.x, newXY.y);\n  }\n\n  /**\n   * Callback function triggered when the comment has resized.\n   * Resize the text area accordingly.\n   * @private\n   */\n  resizeComment_() {\n    const size = this.getHeightWidth();\n    const topOffset = WorkspaceCommentSvg.TOP_OFFSET;\n    const textOffset = TEXTAREA_OFFSET * 2;\n\n    this.foreignObject_.setAttribute('width', size.width);\n    this.foreignObject_.setAttribute('height', size.height - topOffset);\n    if (this.RTL) {\n      this.foreignObject_.setAttribute('x', -size.width);\n    }\n    this.textarea_.style.width = (size.width - textOffset) + 'px';\n    this.textarea_.style.height = (size.height - textOffset - topOffset) + 'px';\n  }\n\n  /**\n   * Set size\n   * @param {number} width width of the container\n   * @param {number} height height of the container\n   * @private\n   */\n  setSize_(width, height) {\n    // Minimum size of a comment.\n    width = Math.max(width, 45);\n    height = Math.max(height, 20 + WorkspaceCommentSvg.TOP_OFFSET);\n    this.width_ = width;\n    this.height_ = height;\n    this.svgRect_.setAttribute('width', width);\n    this.svgRect_.setAttribute('height', height);\n    this.svgRectTarget_.setAttribute('width', width);\n    this.svgRectTarget_.setAttribute('height', height);\n    this.svgHandleTarget_.setAttribute('width', width);\n    this.svgHandleTarget_.setAttribute(\n        'height', WorkspaceCommentSvg.TOP_OFFSET);\n    if (this.RTL) {\n      this.svgRect_.setAttribute('transform', 'scale(-1 1)');\n      this.svgRectTarget_.setAttribute('transform', 'scale(-1 1)');\n    }\n\n    if (this.resizeGroup_) {\n      if (this.RTL) {\n        // Mirror the resize group.\n        this.resizeGroup_.setAttribute(\n            'transform',\n            'translate(' + (-width + RESIZE_SIZE) + ',' +\n                (height - RESIZE_SIZE) + ') scale(-1 1)');\n        this.deleteGroup_.setAttribute(\n            'transform',\n            'translate(' + (-width + RESIZE_SIZE) + ',' + (-RESIZE_SIZE) +\n                ') scale(-1 1)');\n      } else {\n        this.resizeGroup_.setAttribute(\n            'transform',\n            'translate(' + (width - RESIZE_SIZE) + ',' +\n                (height - RESIZE_SIZE) + ')');\n        this.deleteGroup_.setAttribute(\n            'transform',\n            'translate(' + (width - RESIZE_SIZE) + ',' + (-RESIZE_SIZE) + ')');\n      }\n    }\n\n    // Allow the contents to resize.\n    this.resizeComment_();\n  }\n\n  /**\n   * Dispose of any rendered comment components.\n   * @private\n   */\n  disposeInternal_() {\n    this.textarea_ = null;\n    this.foreignObject_ = null;\n    this.svgRectTarget_ = null;\n    this.svgHandleTarget_ = null;\n    this.disposed_ = true;\n  }\n\n  /**\n   * Set the focus on the text area.\n   * @package\n   */\n  setFocus() {\n    const comment = this;\n    this.focused_ = true;\n    // Defer CSS changes.\n    setTimeout(function() {\n      if (comment.disposed_) {\n        return;\n      }\n      comment.textarea_.focus();\n      comment.addFocus();\n      dom.addClass(\n          /** @type {!SVGRectElement} */ (comment.svgRectTarget_),\n          'blocklyCommentTargetFocused');\n      dom.addClass(\n          /** @type {!SVGRectElement} */ (comment.svgHandleTarget_),\n          'blocklyCommentHandleTargetFocused');\n    }, 0);\n  }\n\n  /**\n   * Remove focus from the text area.\n   * @package\n   */\n  blurFocus() {\n    const comment = this;\n    this.focused_ = false;\n    // Defer CSS changes.\n    setTimeout(function() {\n      if (comment.disposed_) {\n        return;\n      }\n\n      comment.textarea_.blur();\n      comment.removeFocus();\n      dom.removeClass(\n          /** @type {!SVGRectElement} */ (comment.svgRectTarget_),\n          'blocklyCommentTargetFocused');\n      dom.removeClass(\n          /** @type {!SVGRectElement} */ (comment.svgHandleTarget_),\n          'blocklyCommentHandleTargetFocused');\n    }, 0);\n  }\n\n  /**\n   * Decode an XML comment tag and create a rendered comment on the workspace.\n   * @param {!Element} xmlComment XML comment element.\n   * @param {!WorkspaceSvg} workspace The workspace.\n   * @param {number=} opt_wsWidth The width of the workspace, which is used to\n   *     position comments correctly in RTL.\n   * @return {!WorkspaceCommentSvg} The created workspace comment.\n   * @package\n   */\n  static fromXmlRendered(xmlComment, workspace, opt_wsWidth) {\n    eventUtils.disable();\n    let comment;\n    try {\n      const info = WorkspaceComment.parseAttributes(xmlComment);\n\n      comment = new WorkspaceCommentSvg(\n          workspace, info.content, info.h, info.w, info.id);\n      if (workspace.rendered) {\n        comment.initSvg(true);\n        comment.render();\n      }\n      // Position the comment correctly, taking into account the width of a\n      // rendered RTL workspace.\n      if (!isNaN(info.x) && !isNaN(info.y)) {\n        if (workspace.RTL) {\n          const wsWidth = opt_wsWidth || workspace.getWidth();\n          comment.moveBy(wsWidth - info.x, info.y);\n        } else {\n          comment.moveBy(info.x, info.y);\n        }\n      }\n    } finally {\n      eventUtils.enable();\n    }\n\n    WorkspaceComment.fireCreateEvent(\n        /** @type {!WorkspaceCommentSvg} */ (comment));\n    return (/** @type {!WorkspaceCommentSvg} */ (comment));\n  }\n}\n\n/**\n * The width and height to use to size a workspace comment when it is first\n * added, before it has been edited by the user.\n * @type {number}\n * @package\n */\nWorkspaceCommentSvg.DEFAULT_SIZE = 100;\n\n/**\n * Offset from the top to make room for a top bar.\n * @type {number}\n * @const\n * @private\n */\nWorkspaceCommentSvg.TOP_OFFSET = 10;\n\n/**\n * CSS for workspace comment.  See css.js for use.\n */\nCss.register(`\n.blocklyCommentForeignObject {\n  position: relative;\n  z-index: 0;\n}\n\n.blocklyCommentRect {\n  fill: #E7DE8E;\n  stroke: #bcA903;\n  stroke-width: 1px;\n}\n\n.blocklyCommentTarget {\n  fill: transparent;\n  stroke: #bcA903;\n}\n\n.blocklyCommentTargetFocused {\n  fill: none;\n}\n\n.blocklyCommentHandleTarget {\n  fill: none;\n}\n\n.blocklyCommentHandleTargetFocused {\n  fill: transparent;\n}\n\n.blocklyFocused>.blocklyCommentRect {\n  fill: #B9B272;\n  stroke: #B9B272;\n}\n\n.blocklySelected>.blocklyCommentTarget {\n  stroke: #fc3;\n  stroke-width: 3px;\n}\n\n.blocklyCommentDeleteIcon {\n  cursor: pointer;\n  fill: #000;\n  display: none;\n}\n\n.blocklySelected > .blocklyCommentDeleteIcon {\n  display: block;\n}\n\n.blocklyDeleteIconShape {\n  fill: #000;\n  stroke: #000;\n  stroke-width: 1px;\n}\n\n.blocklyDeleteIconShape.blocklyDeleteIconHighlighted {\n  stroke: #fc3;\n}\n`);\n\nexports.WorkspaceCommentSvg = WorkspaceCommentSvg;\n","/**\n * @license\n * Copyright 2011 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Object representing a trash can icon.\n */\n'use strict';\n\n/**\n * Object representing a trash can icon.\n * @class\n */\ngoog.module('Blockly.Trashcan');\n\n/* eslint-disable-next-line no-unused-vars */\nconst blocks = goog.requireType('Blockly.serialization.blocks');\nconst browserEvents = goog.require('Blockly.browserEvents');\nconst dom = goog.require('Blockly.utils.dom');\nconst eventUtils = goog.require('Blockly.Events.utils');\nconst registry = goog.require('Blockly.registry');\nconst toolbox = goog.require('Blockly.utils.toolbox');\nconst uiPosition = goog.require('Blockly.uiPosition');\n/* eslint-disable-next-line no-unused-vars */\nconst {Abstract} = goog.requireType('Blockly.Events.Abstract');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockDelete} = goog.requireType('Blockly.Events.BlockDelete');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlocklyOptions} = goog.requireType('Blockly.BlocklyOptions');\nconst {ComponentManager} = goog.require('Blockly.ComponentManager');\nconst {DeleteArea} = goog.require('Blockly.DeleteArea');\n/* eslint-disable-next-line no-unused-vars */\nconst {IAutoHideable} = goog.require('Blockly.IAutoHideable');\n/* eslint-disable-next-line no-unused-vars */\nconst {IDraggable} = goog.requireType('Blockly.IDraggable');\n/* eslint-disable-next-line no-unused-vars */\nconst {IFlyout} = goog.requireType('Blockly.IFlyout');\n/* eslint-disable-next-line no-unused-vars */\nconst {IPositionable} = goog.require('Blockly.IPositionable');\n/* eslint-disable-next-line no-unused-vars */\nconst {MetricsManager} = goog.requireType('Blockly.MetricsManager');\nconst {Options} = goog.require('Blockly.Options');\nconst {Rect} = goog.require('Blockly.utils.Rect');\nconst {Size} = goog.require('Blockly.utils.Size');\nconst {SPRITE} = goog.require('Blockly.sprite');\nconst {Svg} = goog.require('Blockly.utils.Svg');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceSvg} = goog.requireType('Blockly.WorkspaceSvg');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.Events.TrashcanOpen');\n\n\n/**\n * Class for a trash can.\n * @implements {IAutoHideable}\n * @implements {IPositionable}\n * @extends {DeleteArea}\n * @alias Blockly.Trashcan\n */\nclass Trashcan extends DeleteArea {\n  /**\n   * @param {!WorkspaceSvg} workspace The workspace to sit in.\n   */\n  constructor(workspace) {\n    super();\n    /**\n     * The workspace the trashcan sits in.\n     * @type {!WorkspaceSvg}\n     * @private\n     */\n    this.workspace_ = workspace;\n\n    /**\n     * The unique id for this component that is used to register with the\n     * ComponentManager.\n     * @type {string}\n     */\n    this.id = 'trashcan';\n\n    /**\n     * A list of JSON (stored as strings) representing blocks in the trashcan.\n     * @type {!Array<string>}\n     * @private\n     */\n    this.contents_ = [];\n\n    /**\n     * The trashcan flyout.\n     * @type {IFlyout}\n     * @package\n     */\n    this.flyout = null;\n\n    if (this.workspace_.options.maxTrashcanContents <= 0) {\n      return;\n    }\n\n    /**\n     * Current open/close state of the lid.\n     * @type {boolean}\n     */\n    this.isLidOpen = false;\n\n    /**\n     * The minimum openness of the lid. Used to indicate if the trashcan\n     * contains blocks.\n     * @type {number}\n     * @private\n     */\n    this.minOpenness_ = 0;\n\n    /**\n     * The SVG group containing the trash can.\n     * @type {SVGElement}\n     * @private\n     */\n    this.svgGroup_ = null;\n\n    /**\n     * The SVG image element of the trash can lid.\n     * @type {SVGElement}\n     * @private\n     */\n    this.svgLid_ = null;\n\n    /**\n     * Task ID of opening/closing animation.\n     * @type {number}\n     * @private\n     */\n    this.lidTask_ = 0;\n\n    /**\n     * Current state of lid opening (0.0 = closed, 1.0 = open).\n     * @type {number}\n     * @private\n     */\n    this.lidOpen_ = 0;\n\n    /**\n     * Left coordinate of the trash can.\n     * @type {number}\n     * @private\n     */\n    this.left_ = 0;\n\n    /**\n     * Top coordinate of the trash can.\n     * @type {number}\n     * @private\n     */\n    this.top_ = 0;\n\n    /**\n     * Whether this trash can has been initialized.\n     * @type {boolean}\n     * @private\n     */\n    this.initialized_ = false;\n\n    // Create flyout options.\n    const flyoutWorkspaceOptions = new Options(\n        /** @type {!BlocklyOptions} */\n        ({\n          'scrollbars': true,\n          'parentWorkspace': this.workspace_,\n          'rtl': this.workspace_.RTL,\n          'oneBasedIndex': this.workspace_.options.oneBasedIndex,\n          'renderer': this.workspace_.options.renderer,\n          'rendererOverrides': this.workspace_.options.rendererOverrides,\n          'move': {\n            'scrollbars': true,\n          },\n        }));\n    // Create vertical or horizontal flyout.\n    if (this.workspace_.horizontalLayout) {\n      flyoutWorkspaceOptions.toolboxPosition =\n          this.workspace_.toolboxPosition === toolbox.Position.TOP ?\n          toolbox.Position.BOTTOM :\n          toolbox.Position.TOP;\n      const HorizontalFlyout = registry.getClassFromOptions(\n          registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX, this.workspace_.options,\n          true);\n      this.flyout = new HorizontalFlyout(flyoutWorkspaceOptions);\n    } else {\n      flyoutWorkspaceOptions.toolboxPosition =\n          this.workspace_.toolboxPosition === toolbox.Position.RIGHT ?\n          toolbox.Position.LEFT :\n          toolbox.Position.RIGHT;\n      const VerticalFlyout = registry.getClassFromOptions(\n          registry.Type.FLYOUTS_VERTICAL_TOOLBOX, this.workspace_.options,\n          true);\n      this.flyout = new VerticalFlyout(flyoutWorkspaceOptions);\n    }\n    this.workspace_.addChangeListener(this.onDelete_.bind(this));\n  }\n\n  /**\n   * Create the trash can elements.\n   * @return {!SVGElement} The trash can's SVG group.\n   */\n  createDom() {\n    /* Here's the markup that will be generated:\n    <g class=\"blocklyTrash\">\n      <clippath id=\"blocklyTrashBodyClipPath837493\">\n        <rect width=\"47\" height=\"45\" y=\"15\"></rect>\n      </clippath>\n      <image width=\"64\" height=\"92\" y=\"-32\" xlink:href=\"media/sprites.png\"\n          clip-path=\"url(#blocklyTrashBodyClipPath837493)\"></image>\n      <clippath id=\"blocklyTrashLidClipPath837493\">\n        <rect width=\"47\" height=\"15\"></rect>\n      </clippath>\n      <image width=\"84\" height=\"92\" y=\"-32\" xlink:href=\"media/sprites.png\"\n          clip-path=\"url(#blocklyTrashLidClipPath837493)\"></image>\n    </g>\n    */\n    this.svgGroup_ =\n        dom.createSvgElement(Svg.G, {'class': 'blocklyTrash'}, null);\n    let clip;\n    const rnd = String(Math.random()).substring(2);\n    clip = dom.createSvgElement(\n        Svg.CLIPPATH, {'id': 'blocklyTrashBodyClipPath' + rnd}, this.svgGroup_);\n    dom.createSvgElement(\n        Svg.RECT, {'width': WIDTH, 'height': BODY_HEIGHT, 'y': LID_HEIGHT},\n        clip);\n    const body = dom.createSvgElement(\n        Svg.IMAGE, {\n          'width': SPRITE.width,\n          'x': -SPRITE_LEFT,\n          'height': SPRITE.height,\n          'y': -SPRITE_TOP,\n          'clip-path': 'url(#blocklyTrashBodyClipPath' + rnd + ')',\n        },\n        this.svgGroup_);\n    body.setAttributeNS(\n        dom.XLINK_NS, 'xlink:href',\n        this.workspace_.options.pathToMedia + SPRITE.url);\n\n    clip = dom.createSvgElement(\n        Svg.CLIPPATH, {'id': 'blocklyTrashLidClipPath' + rnd}, this.svgGroup_);\n    dom.createSvgElement(\n        Svg.RECT, {'width': WIDTH, 'height': LID_HEIGHT}, clip);\n    this.svgLid_ = dom.createSvgElement(\n        Svg.IMAGE, {\n          'width': SPRITE.width,\n          'x': -SPRITE_LEFT,\n          'height': SPRITE.height,\n          'y': -SPRITE_TOP,\n          'clip-path': 'url(#blocklyTrashLidClipPath' + rnd + ')',\n        },\n        this.svgGroup_);\n    this.svgLid_.setAttributeNS(\n        dom.XLINK_NS, 'xlink:href',\n        this.workspace_.options.pathToMedia + SPRITE.url);\n\n    // bindEventWithChecks_ quashes events too aggressively. See:\n    // https://groups.google.com/forum/#!topic/blockly/QF4yB9Wx00s\n    // Using bindEventWithChecks_ for blocking mousedown causes issue in mobile.\n    // See #4303\n    browserEvents.bind(\n        this.svgGroup_, 'mousedown', this, this.blockMouseDownWhenOpenable_);\n    browserEvents.bind(this.svgGroup_, 'mouseup', this, this.click);\n    // Bind to body instead of this.svgGroup_ so that we don't get lid jitters\n    browserEvents.bind(body, 'mouseover', this, this.mouseOver_);\n    browserEvents.bind(body, 'mouseout', this, this.mouseOut_);\n    this.animateLid_();\n    return this.svgGroup_;\n  }\n\n  /**\n   * Initializes the trash can.\n   */\n  init() {\n    if (this.workspace_.options.maxTrashcanContents > 0) {\n      dom.insertAfter(\n          this.flyout.createDom(Svg.SVG), this.workspace_.getParentSvg());\n      this.flyout.init(this.workspace_);\n    }\n    this.workspace_.getComponentManager().addComponent({\n      component: this,\n      weight: 1,\n      capabilities: [\n        ComponentManager.Capability.AUTOHIDEABLE,\n        ComponentManager.Capability.DELETE_AREA,\n        ComponentManager.Capability.DRAG_TARGET,\n        ComponentManager.Capability.POSITIONABLE,\n      ],\n    });\n    this.initialized_ = true;\n    this.setLidOpen(false);\n  }\n\n  /**\n   * Dispose of this trash can.\n   * Unlink from all DOM elements to prevent memory leaks.\n   * @suppress {checkTypes}\n   */\n  dispose() {\n    this.workspace_.getComponentManager().removeComponent('trashcan');\n    if (this.svgGroup_) {\n      dom.removeNode(this.svgGroup_);\n      this.svgGroup_ = null;\n    }\n    this.svgLid_ = null;\n    this.workspace_ = null;\n    clearTimeout(this.lidTask_);\n  }\n\n  /**\n   * Whether the trashcan has contents.\n   * @return {boolean} True if the trashcan has contents.\n   * @private\n   */\n  hasContents_() {\n    return !!this.contents_.length;\n  }\n\n  /**\n   * Returns true if the trashcan contents-flyout is currently open.\n   * @return {boolean} True if the trashcan contents-flyout is currently open.\n   */\n  contentsIsOpen() {\n    return !!this.flyout && this.flyout.isVisible();\n  }\n\n  /**\n   * Opens the trashcan flyout.\n   */\n  openFlyout() {\n    if (this.contentsIsOpen()) {\n      return;\n    }\n    const contents = this.contents_.map(function(string) {\n      return JSON.parse(string);\n    });\n    this.flyout.show(contents);\n    this.fireUiEvent_(true);\n  }\n\n  /**\n   * Closes the trashcan flyout.\n   */\n  closeFlyout() {\n    if (!this.contentsIsOpen()) {\n      return;\n    }\n    this.flyout.hide();\n    this.fireUiEvent_(false);\n    this.workspace_.recordDragTargets();\n  }\n\n  /**\n   * Hides the component. Called in WorkspaceSvg.hideChaff.\n   * @param {boolean} onlyClosePopups Whether only popups should be closed.\n   *     Flyouts should not be closed if this is true.\n   */\n  autoHide(onlyClosePopups) {\n    // For now the trashcan flyout always autocloses because it overlays the\n    // trashcan UI (no trashcan to click to close it).\n    if (!onlyClosePopups && this.flyout) {\n      this.closeFlyout();\n    }\n  }\n\n  /**\n   * Empties the trashcan's contents. If the contents-flyout is currently open\n   * it will be closed.\n   */\n  emptyContents() {\n    if (!this.hasContents_()) {\n      return;\n    }\n    this.contents_.length = 0;\n    this.setMinOpenness_(0);\n    this.closeFlyout();\n  }\n\n  /**\n   * Positions the trashcan.\n   * It is positioned in the opposite corner to the corner the\n   * categories/toolbox starts at.\n   * @param {!MetricsManager.UiMetrics} metrics The workspace metrics.\n   * @param {!Array<!Rect>} savedPositions List of rectangles that\n   *     are already on the workspace.\n   */\n  position(metrics, savedPositions) {\n    // Not yet initialized.\n    if (!this.initialized_) {\n      return;\n    }\n\n    const cornerPosition =\n        uiPosition.getCornerOppositeToolbox(this.workspace_, metrics);\n\n    const height = BODY_HEIGHT + LID_HEIGHT;\n    const startRect = uiPosition.getStartPositionRect(\n        cornerPosition, new Size(WIDTH, height), MARGIN_HORIZONTAL,\n        MARGIN_VERTICAL, metrics, this.workspace_);\n\n    const verticalPosition = cornerPosition.vertical;\n    const bumpDirection = verticalPosition === uiPosition.verticalPosition.TOP ?\n        uiPosition.bumpDirection.DOWN :\n        uiPosition.bumpDirection.UP;\n    const positionRect = uiPosition.bumpPositionRect(\n        startRect, MARGIN_VERTICAL, bumpDirection, savedPositions);\n\n    this.top_ = positionRect.top;\n    this.left_ = positionRect.left;\n    this.svgGroup_.setAttribute(\n        'transform', 'translate(' + this.left_ + ',' + this.top_ + ')');\n  }\n\n  /**\n   * Returns the bounding rectangle of the UI element in pixel units relative to\n   * the Blockly injection div.\n   * @return {?Rect} The UI elements's bounding box. Null if\n   *   bounding box should be ignored by other UI elements.\n   */\n  getBoundingRectangle() {\n    const bottom = this.top_ + BODY_HEIGHT + LID_HEIGHT;\n    const right = this.left_ + WIDTH;\n    return new Rect(this.top_, bottom, this.left_, right);\n  }\n\n  /**\n   * Returns the bounding rectangle of the drag target area in pixel units\n   * relative to viewport.\n   * @return {?Rect} The component's bounding box. Null if drag\n   *   target area should be ignored.\n   */\n  getClientRect() {\n    if (!this.svgGroup_) {\n      return null;\n    }\n\n    const trashRect = this.svgGroup_.getBoundingClientRect();\n    const top = trashRect.top + SPRITE_TOP - MARGIN_HOTSPOT;\n    const bottom = top + LID_HEIGHT + BODY_HEIGHT + 2 * MARGIN_HOTSPOT;\n    const left = trashRect.left + SPRITE_LEFT - MARGIN_HOTSPOT;\n    const right = left + WIDTH + 2 * MARGIN_HOTSPOT;\n    return new Rect(top, bottom, left, right);\n  }\n\n  /**\n   * Handles when a cursor with a block or bubble is dragged over this drag\n   * target.\n   * @param {!IDraggable} _dragElement The block or bubble currently being\n   *   dragged.\n   * @override\n   */\n  onDragOver(_dragElement) {\n    this.setLidOpen(this.wouldDelete_);\n  }\n\n  /**\n   * Handles when a cursor with a block or bubble exits this drag target.\n   * @param {!IDraggable} _dragElement The block or bubble currently being\n   *   dragged.\n   * @override\n   */\n  onDragExit(_dragElement) {\n    this.setLidOpen(false);\n  }\n\n  /**\n   * Handles when a block or bubble is dropped on this component.\n   * Should not handle delete here.\n   * @param {!IDraggable} _dragElement The block or bubble currently being\n   *   dragged.\n   * @override\n   */\n  onDrop(_dragElement) {\n    setTimeout(this.setLidOpen.bind(this, false), 100);\n  }\n\n  /**\n   * Flip the lid open or shut.\n   * @param {boolean} state True if open.\n   * @package\n   */\n  setLidOpen(state) {\n    if (this.isLidOpen === state) {\n      return;\n    }\n    clearTimeout(this.lidTask_);\n    this.isLidOpen = state;\n    this.animateLid_();\n  }\n\n  /**\n   * Rotate the lid open or closed by one step.  Then wait and recurse.\n   * @private\n   */\n  animateLid_() {\n    const frames = ANIMATION_FRAMES;\n\n    const delta = 1 / (frames + 1);\n    this.lidOpen_ += this.isLidOpen ? delta : -delta;\n    this.lidOpen_ = Math.min(Math.max(this.lidOpen_, this.minOpenness_), 1);\n\n    this.setLidAngle_(this.lidOpen_ * MAX_LID_ANGLE);\n\n    // Linear interpolation between min and max.\n    const opacity = OPACITY_MIN + this.lidOpen_ * (OPACITY_MAX - OPACITY_MIN);\n    this.svgGroup_.style.opacity = opacity;\n\n    if (this.lidOpen_ > this.minOpenness_ && this.lidOpen_ < 1) {\n      this.lidTask_ =\n          setTimeout(this.animateLid_.bind(this), ANIMATION_LENGTH / frames);\n    }\n  }\n\n  /**\n   * Set the angle of the trashcan's lid.\n   * @param {number} lidAngle The angle at which to set the lid.\n   * @private\n   */\n  setLidAngle_(lidAngle) {\n    const openAtRight =\n        this.workspace_.toolboxPosition === toolbox.Position.RIGHT ||\n        (this.workspace_.horizontalLayout && this.workspace_.RTL);\n    this.svgLid_.setAttribute(\n        'transform',\n        'rotate(' + (openAtRight ? -lidAngle : lidAngle) + ',' +\n            (openAtRight ? 4 : WIDTH - 4) + ',' + (LID_HEIGHT - 2) + ')');\n  }\n\n  /**\n   * Sets the minimum openness of the trashcan lid. If the lid is currently\n   * closed, this will update lid's position.\n   * @param {number} newMin The new minimum openness of the lid. Should be\n   *     between 0 and 1.\n   * @private\n   */\n  setMinOpenness_(newMin) {\n    this.minOpenness_ = newMin;\n    if (!this.isLidOpen) {\n      this.setLidAngle_(newMin * MAX_LID_ANGLE);\n    }\n  }\n\n  /**\n   * Flip the lid shut.\n   * Called externally after a drag.\n   */\n  closeLid() {\n    this.setLidOpen(false);\n  }\n\n  /**\n   * Inspect the contents of the trash.\n   */\n  click() {\n    if (!this.hasContents_()) {\n      return;\n    }\n    this.openFlyout();\n  }\n\n  /**\n   * Fires a UI event for trashcan flyout open or close.\n   * @param {boolean} trashcanOpen Whether the flyout is opening.\n   * @private\n   */\n  fireUiEvent_(trashcanOpen) {\n    const uiEvent = new (eventUtils.get(eventUtils.TRASHCAN_OPEN))(\n        trashcanOpen, this.workspace_.id);\n    eventUtils.fire(uiEvent);\n  }\n\n  /**\n   * Prevents a workspace scroll and click event if the trashcan has blocks.\n   * @param {!Event} e A mouse down event.\n   * @private\n   */\n  blockMouseDownWhenOpenable_(e) {\n    if (!this.contentsIsOpen() && this.hasContents_()) {\n      e.stopPropagation();  // Don't start a workspace scroll.\n    }\n  }\n\n  /**\n   * Indicate that the trashcan can be clicked (by opening it) if it has blocks.\n   * @private\n   */\n  mouseOver_() {\n    if (this.hasContents_()) {\n      this.setLidOpen(true);\n    }\n  }\n\n  /**\n   * Close the lid of the trashcan if it was open (Vis. it was indicating it had\n   *    blocks).\n   * @private\n   */\n  mouseOut_() {\n    // No need to do a .hasBlocks check here because if it doesn't the trashcan\n    // won't be open in the first place, and setOpen won't run.\n    this.setLidOpen(false);\n  }\n\n  /**\n   * Handle a BLOCK_DELETE event. Adds deleted blocks oldXml to the content\n   * array.\n   * @param {!Abstract} event Workspace event.\n   * @private\n   */\n  onDelete_(event) {\n    if (this.workspace_.options.maxTrashcanContents <= 0 ||\n        event.type !== eventUtils.BLOCK_DELETE) {\n      return;\n    }\n    const deleteEvent = /** @type {!BlockDelete} */ (event);\n    if (event.type === eventUtils.BLOCK_DELETE && !deleteEvent.wasShadow) {\n      const cleanedJson = this.cleanBlockJson_(deleteEvent.oldJson);\n      if (this.contents_.indexOf(cleanedJson) !== -1) {\n        return;\n      }\n      this.contents_.unshift(cleanedJson);\n      while (this.contents_.length >\n             this.workspace_.options.maxTrashcanContents) {\n        this.contents_.pop();\n      }\n\n      this.setMinOpenness_(HAS_BLOCKS_LID_ANGLE);\n    }\n  }\n\n  /**\n   * Converts JSON representing a block into text that can be stored in the\n   * content array.\n   * @param {!blocks.State} json A JSON representation of\n   *     a block's state.\n   * @return {string} Text representing the JSON, cleaned of all unnecessary\n   *     attributes.\n   * @private\n   */\n  cleanBlockJson_(json) {\n    // Create a deep copy.\n    json = /** @type {!blocks.State} */ (JSON.parse(JSON.stringify(json)));\n\n    /**\n     * Reshape JSON into a nicer format.\n     * @param {!blocks.State} json The JSON to clean.\n     */\n    function cleanRec(json) {\n      if (!json) {\n        return;\n      }\n\n      delete json['id'];\n      delete json['x'];\n      delete json['y'];\n      delete json['enabled'];\n\n      if (json['icons'] && json['icons']['comment']) {\n        const comment = json['icons']['comment'];\n        delete comment['height'];\n        delete comment['width'];\n        delete comment['pinned'];\n      }\n\n      const inputs = json['inputs'];\n      for (const name in inputs) {\n        const input = inputs[name];\n        cleanRec(input['block']);\n        cleanRec(input['shadow']);\n      }\n      if (json['next']) {\n        const next = json['next'];\n        cleanRec(next['block']);\n        cleanRec(next['shadow']);\n      }\n    }\n\n    cleanRec(json);\n    json['kind'] = 'BLOCK';\n    return JSON.stringify(json);\n  }\n}\n\n/**\n * Width of both the trash can and lid images.\n */\nconst WIDTH = 47;\n\n/**\n * Height of the trashcan image (minus lid).\n */\nconst BODY_HEIGHT = 44;\n\n/**\n * Height of the lid image.\n */\nconst LID_HEIGHT = 16;\n\n/**\n * Distance between trashcan and bottom or top edge of workspace.\n */\nconst MARGIN_VERTICAL = 20;\n\n/**\n * Distance between trashcan and right or left edge of workspace.\n */\nconst MARGIN_HORIZONTAL = 20;\n\n/**\n * Extent of hotspot on all sides beyond the size of the image.\n */\nconst MARGIN_HOTSPOT = 10;\n\n/**\n * Location of trashcan in sprite image.\n */\nconst SPRITE_LEFT = 0;\n\n/**\n * Location of trashcan in sprite image.\n */\nconst SPRITE_TOP = 32;\n\n/**\n * The openness of the lid when the trashcan contains blocks.\n *    (0.0 = closed, 1.0 = open)\n */\nconst HAS_BLOCKS_LID_ANGLE = 0.1;\n\n/**\n * The length of the lid open/close animation in milliseconds.\n */\nconst ANIMATION_LENGTH = 80;\n\n/**\n * The number of frames in the animation.\n */\nconst ANIMATION_FRAMES = 4;\n\n/**\n * The minimum (resting) opacity of the trashcan and lid.\n */\nconst OPACITY_MIN = 0.4;\n\n/**\n * The maximum (hovered) opacity of the trashcan and lid.\n */\nconst OPACITY_MAX = 0.8;\n\n/**\n * The maximum angle the trashcan lid can opens to. At the end of the open\n * animation the lid will be open to this angle.\n */\nconst MAX_LID_ANGLE = 45;\n\nexports.Trashcan = Trashcan;\n","/**\n * @license\n * Copyright 2016 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Class for a button in the flyout.\n */\n'use strict';\n\n/**\n * Class for a button in the flyout.\n * @class\n */\ngoog.module('Blockly.FlyoutButton');\n\nconst Css = goog.require('Blockly.Css');\nconst browserEvents = goog.require('Blockly.browserEvents');\nconst dom = goog.require('Blockly.utils.dom');\nconst style = goog.require('Blockly.utils.style');\n/* eslint-disable-next-line no-unused-vars */\nconst toolbox = goog.requireType('Blockly.utils.toolbox');\nconst parsing = goog.require('Blockly.utils.parsing');\nconst {Coordinate} = goog.require('Blockly.utils.Coordinate');\nconst {Svg} = goog.require('Blockly.utils.Svg');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceSvg} = goog.requireType('Blockly.WorkspaceSvg');\n\n\n/**\n * Class for a button or label in the flyout.\n * @alias Blockly.FlyoutButton\n */\nclass FlyoutButton {\n  /**\n   * @param {!WorkspaceSvg} workspace The workspace in which to place this\n   *     button.\n   * @param {!WorkspaceSvg} targetWorkspace The flyout's target workspace.\n   * @param {!toolbox.ButtonOrLabelInfo} json\n   *    The JSON specifying the label/button.\n   * @param {boolean} isLabel Whether this button should be styled as a label.\n   * @package\n   */\n  constructor(workspace, targetWorkspace, json, isLabel) {\n    /**\n     * @type {!WorkspaceSvg}\n     * @private\n     */\n    this.workspace_ = workspace;\n\n    /**\n     * @type {!WorkspaceSvg}\n     * @private\n     */\n    this.targetWorkspace_ = targetWorkspace;\n\n    /**\n     * @type {string}\n     * @private\n     */\n    this.text_ = json['text'];\n\n    /**\n     * @type {!Coordinate}\n     * @private\n     */\n    this.position_ = new Coordinate(0, 0);\n\n    /**\n     * Whether this button should be styled as a label.\n     * Labels behave the same as buttons, but are styled differently.\n     * @type {boolean}\n     * @private\n     */\n    this.isLabel_ = isLabel;\n\n    /**\n     * The key to the function called when this button is clicked.\n     * @type {string}\n     * @private\n     */\n    this.callbackKey_ = json['callbackKey'] ||\n        /* Check the lower case version too to satisfy IE */\n        json['callbackkey'];\n\n    /**\n     * If specified, a CSS class to add to this button.\n     * @type {?string}\n     * @private\n     */\n    this.cssClass_ = json['web-class'] || null;\n\n    /**\n     * Mouse up event data.\n     * @type {?browserEvents.Data}\n     * @private\n     */\n    this.onMouseUpWrapper_ = null;\n\n    /**\n     * The JSON specifying the label / button.\n     * @type {!toolbox.ButtonOrLabelInfo}\n     */\n    this.info = json;\n\n    /**\n     * The width of the button's rect.\n     * @type {number}\n     */\n    this.width = 0;\n\n    /**\n     * The height of the button's rect.\n     * @type {number}\n     */\n    this.height = 0;\n\n    /**\n     * The root SVG group for the button or label.\n     * @type {?SVGGElement}\n     * @private\n     */\n    this.svgGroup_ = null;\n\n    /**\n     * The SVG element with the text of the label or button.\n     * @type {?SVGTextElement}\n     * @private\n     */\n    this.svgText_ = null;\n  }\n\n  /**\n   * Create the button elements.\n   * @return {!SVGElement} The button's SVG group.\n   */\n  createDom() {\n    let cssClass = this.isLabel_ ? 'blocklyFlyoutLabel' : 'blocklyFlyoutButton';\n    if (this.cssClass_) {\n      cssClass += ' ' + this.cssClass_;\n    }\n\n    this.svgGroup_ = dom.createSvgElement(\n        Svg.G, {'class': cssClass}, this.workspace_.getCanvas());\n\n    let shadow;\n    if (!this.isLabel_) {\n      // Shadow rectangle (light source does not mirror in RTL).\n      shadow = dom.createSvgElement(\n          Svg.RECT, {\n            'class': 'blocklyFlyoutButtonShadow',\n            'rx': 4,\n            'ry': 4,\n            'x': 1,\n            'y': 1,\n          },\n          this.svgGroup_);\n    }\n    // Background rectangle.\n    const rect = dom.createSvgElement(\n        Svg.RECT, {\n          'class': this.isLabel_ ? 'blocklyFlyoutLabelBackground' :\n                                   'blocklyFlyoutButtonBackground',\n          'rx': 4,\n          'ry': 4,\n        },\n        this.svgGroup_);\n\n    const svgText = dom.createSvgElement(\n        Svg.TEXT, {\n          'class': this.isLabel_ ? 'blocklyFlyoutLabelText' : 'blocklyText',\n          'x': 0,\n          'y': 0,\n          'text-anchor': 'middle',\n        },\n        this.svgGroup_);\n    let text = parsing.replaceMessageReferences(this.text_);\n    if (this.workspace_.RTL) {\n      // Force text to be RTL by adding an RLM.\n      text += '\\u200F';\n    }\n    svgText.textContent = text;\n    if (this.isLabel_) {\n      this.svgText_ = svgText;\n      this.workspace_.getThemeManager().subscribe(\n          this.svgText_, 'flyoutForegroundColour', 'fill');\n    }\n\n    const fontSize = style.getComputedStyle(svgText, 'fontSize');\n    const fontWeight = style.getComputedStyle(svgText, 'fontWeight');\n    const fontFamily = style.getComputedStyle(svgText, 'fontFamily');\n    this.width = dom.getFastTextWidthWithSizeString(\n        svgText, fontSize, fontWeight, fontFamily);\n    const fontMetrics =\n        dom.measureFontMetrics(text, fontSize, fontWeight, fontFamily);\n    this.height = fontMetrics.height;\n\n    if (!this.isLabel_) {\n      this.width += 2 * FlyoutButton.TEXT_MARGIN_X;\n      this.height += 2 * FlyoutButton.TEXT_MARGIN_Y;\n      shadow.setAttribute('width', this.width);\n      shadow.setAttribute('height', this.height);\n    }\n    rect.setAttribute('width', this.width);\n    rect.setAttribute('height', this.height);\n\n    svgText.setAttribute('x', this.width / 2);\n    svgText.setAttribute(\n        'y', this.height / 2 - fontMetrics.height / 2 + fontMetrics.baseline);\n\n    this.updateTransform_();\n\n    this.onMouseUpWrapper_ = browserEvents.conditionalBind(\n        this.svgGroup_, 'mouseup', this, this.onMouseUp_);\n    return this.svgGroup_;\n  }\n\n  /**\n   * Correctly position the flyout button and make it visible.\n   */\n  show() {\n    this.updateTransform_();\n    this.svgGroup_.setAttribute('display', 'block');\n  }\n\n  /**\n   * Update SVG attributes to match internal state.\n   * @private\n   */\n  updateTransform_() {\n    this.svgGroup_.setAttribute(\n        'transform',\n        'translate(' + this.position_.x + ',' + this.position_.y + ')');\n  }\n\n  /**\n   * Move the button to the given x, y coordinates.\n   * @param {number} x The new x coordinate.\n   * @param {number} y The new y coordinate.\n   */\n  moveTo(x, y) {\n    this.position_.x = x;\n    this.position_.y = y;\n    this.updateTransform_();\n  }\n\n  /**\n   * @return {boolean} Whether or not the button is a label.\n   */\n  isLabel() {\n    return this.isLabel_;\n  }\n\n  /**\n   * Location of the button.\n   * @return {!Coordinate} x, y coordinates.\n   * @package\n   */\n  getPosition() {\n    return this.position_;\n  }\n\n  /**\n   * @return {string} Text of the button.\n   */\n  getButtonText() {\n    return this.text_;\n  }\n\n  /**\n   * Get the button's target workspace.\n   * @return {!WorkspaceSvg} The target workspace of the flyout where this\n   *     button resides.\n   */\n  getTargetWorkspace() {\n    return this.targetWorkspace_;\n  }\n\n  /**\n   * Dispose of this button.\n   */\n  dispose() {\n    if (this.onMouseUpWrapper_) {\n      browserEvents.unbind(this.onMouseUpWrapper_);\n    }\n    if (this.svgGroup_) {\n      dom.removeNode(this.svgGroup_);\n    }\n    if (this.svgText_) {\n      this.workspace_.getThemeManager().unsubscribe(this.svgText_);\n    }\n  }\n\n  /**\n   * Do something when the button is clicked.\n   * @param {!Event} e Mouse up event.\n   * @private\n   */\n  onMouseUp_(e) {\n    const gesture = this.targetWorkspace_.getGesture(e);\n    if (gesture) {\n      gesture.cancel();\n    }\n\n    if (this.isLabel_ && this.callbackKey_) {\n      console.warn(\n          'Labels should not have callbacks. Label text: ' + this.text_);\n    } else if (\n        !this.isLabel_ &&\n        !(this.callbackKey_ &&\n          this.targetWorkspace_.getButtonCallback(this.callbackKey_))) {\n      console.warn('Buttons should have callbacks. Button text: ' + this.text_);\n    } else if (!this.isLabel_) {\n      this.targetWorkspace_.getButtonCallback(this.callbackKey_)(this);\n    }\n  }\n}\n\n/**\n * The horizontal margin around the text in the button.\n */\nFlyoutButton.TEXT_MARGIN_X = 5;\n\n/**\n * The vertical margin around the text in the button.\n */\nFlyoutButton.TEXT_MARGIN_Y = 2;\n\n/**\n * CSS for buttons and labels. See css.js for use.\n */\nCss.register(`\n.blocklyFlyoutButton {\n  fill: #888;\n  cursor: default;\n}\n\n.blocklyFlyoutButtonShadow {\n  fill: #666;\n}\n\n.blocklyFlyoutButton:hover {\n  fill: #aaa;\n}\n\n.blocklyFlyoutLabel {\n  cursor: default;\n}\n\n.blocklyFlyoutLabelBackground {\n  opacity: 0;\n}\n`);\n\nexports.FlyoutButton = FlyoutButton;\n","/**\n * @license\n * Copyright 2016 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Object that defines user-specified options for the workspace.\n */\n'use strict';\n\n/**\n * Object that defines user-specified options for the workspace.\n * @namespace Blockly.BlocklyOptions\n */\ngoog.module('Blockly.BlocklyOptions');\n\n\n/**\n * Blockly options.\n * This interface is further described in\n * `typings/parts/blockly-interfaces.d.ts`.\n * @interface\n * @alias Blockly.BlocklyOptions\n */\nconst BlocklyOptions = function() {};\n\nexports.BlocklyOptions = BlocklyOptions;\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Utility functions for handling procedures.\n */\n'use strict';\n\n/**\n * Utility functions for handling procedures.\n * @namespace Blockly.Procedures\n */\ngoog.module('Blockly.Procedures');\n\nconst Variables = goog.require('Blockly.Variables');\nconst Xml = goog.require('Blockly.Xml');\nconst eventUtils = goog.require('Blockly.Events.utils');\nconst utilsXml = goog.require('Blockly.utils.xml');\n/* eslint-disable-next-line no-unused-vars */\nconst {Abstract} = goog.requireType('Blockly.Events.Abstract');\nconst {Blocks} = goog.require('Blockly.blocks');\n/* eslint-disable-next-line no-unused-vars */\nconst {Block} = goog.requireType('Blockly.Block');\n/* eslint-disable-next-line no-unused-vars */\nconst {BubbleOpen} = goog.requireType('Blockly.Events.BubbleOpen');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockSvg} = goog.requireType('Blockly.BlockSvg');\n/* eslint-disable-next-line no-unused-vars */\nconst {Field} = goog.requireType('Blockly.Field');\nconst {Msg} = goog.require('Blockly.Msg');\nconst {Names} = goog.require('Blockly.Names');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceSvg} = goog.requireType('Blockly.WorkspaceSvg');\nconst {Workspace} = goog.require('Blockly.Workspace');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.Events.BlockChange');\n\n\n/**\n * String for use in the \"custom\" attribute of a category in toolbox XML.\n * This string indicates that the category should be dynamically populated with\n * procedure blocks.\n * See also Blockly.Variables.CATEGORY_NAME and\n * Blockly.VariablesDynamic.CATEGORY_NAME.\n * @const {string}\n * @alias Blockly.Procedures.CATEGORY_NAME\n */\nconst CATEGORY_NAME = 'PROCEDURE';\nexports.CATEGORY_NAME = CATEGORY_NAME;\n\n/**\n * The default argument for a procedures_mutatorarg block.\n * @type {string}\n * @alias Blockly.Procedures.DEFAULT_ARG\n */\nconst DEFAULT_ARG = 'x';\nexports.DEFAULT_ARG = DEFAULT_ARG;\n\n/**\n * Procedure block type.\n * @typedef {{\n *    getProcedureCall: function():string,\n *    renameProcedure: function(string,string),\n *    getProcedureDef: function():!Array\n * }}\n * @alias Blockly.Procedures.ProcedureBlock\n */\nlet ProcedureBlock;\nexports.ProcedureBlock = ProcedureBlock;\n\n/**\n * Find all user-created procedure definitions in a workspace.\n * @param {!Workspace} root Root workspace.\n * @return {!Array<!Array<!Array>>} Pair of arrays, the\n *     first contains procedures without return variables, the second with.\n *     Each procedure is defined by a three-element list of name, parameter\n *     list, and return value boolean.\n * @alias Blockly.Procedures.allProcedures\n */\nconst allProcedures = function(root) {\n  const proceduresNoReturn =\n      root.getBlocksByType('procedures_defnoreturn', false)\n          .map(function(block) {\n            return /** @type {!ProcedureBlock} */ (block).getProcedureDef();\n          });\n  const proceduresReturn =\n      root.getBlocksByType('procedures_defreturn', false).map(function(block) {\n        return /** @type {!ProcedureBlock} */ (block).getProcedureDef();\n      });\n  proceduresNoReturn.sort(procTupleComparator);\n  proceduresReturn.sort(procTupleComparator);\n  return [proceduresNoReturn, proceduresReturn];\n};\nexports.allProcedures = allProcedures;\n\n/**\n * Comparison function for case-insensitive sorting of the first element of\n * a tuple.\n * @param {!Array} ta First tuple.\n * @param {!Array} tb Second tuple.\n * @return {number} -1, 0, or 1 to signify greater than, equality, or less than.\n */\nconst procTupleComparator = function(ta, tb) {\n  return ta[0].localeCompare(tb[0], undefined, {sensitivity: 'base'});\n};\n\n/**\n * Ensure two identically-named procedures don't exist.\n * Take the proposed procedure name, and return a legal name i.e. one that\n * is not empty and doesn't collide with other procedures.\n * @param {string} name Proposed procedure name.\n * @param {!Block} block Block to disambiguate.\n * @return {string} Non-colliding name.\n * @alias Blockly.Procedures.findLegalName\n */\nconst findLegalName = function(name, block) {\n  if (block.isInFlyout) {\n    // Flyouts can have multiple procedures called 'do something'.\n    return name;\n  }\n  name = name || Msg['UNNAMED_KEY'] || 'unnamed';\n  while (!isLegalName(name, block.workspace, block)) {\n    // Collision with another procedure.\n    const r = name.match(/^(.*?)(\\d+)$/);\n    if (!r) {\n      name += '2';\n    } else {\n      name = r[1] + (parseInt(r[2], 10) + 1);\n    }\n  }\n  return name;\n};\nexports.findLegalName = findLegalName;\n\n/**\n * Does this procedure have a legal name?  Illegal names include names of\n * procedures already defined.\n * @param {string} name The questionable name.\n * @param {!Workspace} workspace The workspace to scan for collisions.\n * @param {Block=} opt_exclude Optional block to exclude from\n *     comparisons (one doesn't want to collide with oneself).\n * @return {boolean} True if the name is legal.\n */\nconst isLegalName = function(name, workspace, opt_exclude) {\n  return !isNameUsed(name, workspace, opt_exclude);\n};\n\n/**\n * Return if the given name is already a procedure name.\n * @param {string} name The questionable name.\n * @param {!Workspace} workspace The workspace to scan for collisions.\n * @param {Block=} opt_exclude Optional block to exclude from\n *     comparisons (one doesn't want to collide with oneself).\n * @return {boolean} True if the name is used, otherwise return false.\n * @alias Blockly.Procedures.isNameUsed\n */\nconst isNameUsed = function(name, workspace, opt_exclude) {\n  const blocks = workspace.getAllBlocks(false);\n  // Iterate through every block and check the name.\n  for (let i = 0; i < blocks.length; i++) {\n    if (blocks[i] === opt_exclude) {\n      continue;\n    }\n    // Assume it is a procedure block so we can check.\n    const procedureBlock = /** @type {!ProcedureBlock} */ (blocks[i]);\n    if (procedureBlock.getProcedureDef) {\n      const procName = procedureBlock.getProcedureDef();\n      if (Names.equals(procName[0], name)) {\n        return true;\n      }\n    }\n  }\n  return false;\n};\nexports.isNameUsed = isNameUsed;\n\n/**\n * Rename a procedure.  Called by the editable field.\n * @param {string} name The proposed new name.\n * @return {string} The accepted name.\n * @this {Field}\n * @alias Blockly.Procedures.rename\n */\nconst rename = function(name) {\n  // Strip leading and trailing whitespace.  Beyond this, all names are legal.\n  name = name.trim();\n\n  const legalName = findLegalName(\n      name,\n      /** @type {!Block} */ (this.getSourceBlock()));\n  const oldName = this.getValue();\n  if (oldName !== name && oldName !== legalName) {\n    // Rename any callers.\n    const blocks = this.getSourceBlock().workspace.getAllBlocks(false);\n    for (let i = 0; i < blocks.length; i++) {\n      // Assume it is a procedure so we can check.\n      const procedureBlock = /** @type {!ProcedureBlock} */ (blocks[i]);\n      if (procedureBlock.renameProcedure) {\n        procedureBlock.renameProcedure(\n            /** @type {string} */ (oldName), legalName);\n      }\n    }\n  }\n  return legalName;\n};\nexports.rename = rename;\n\n/**\n * Construct the blocks required by the flyout for the procedure category.\n * @param {!WorkspaceSvg} workspace The workspace containing procedures.\n * @return {!Array<!Element>} Array of XML block elements.\n * @alias Blockly.Procedures.flyoutCategory\n */\nconst flyoutCategory = function(workspace) {\n  const xmlList = [];\n  if (Blocks['procedures_defnoreturn']) {\n    // <block type=\"procedures_defnoreturn\" gap=\"16\">\n    //     <field name=\"NAME\">do something</field>\n    // </block>\n    const block = utilsXml.createElement('block');\n    block.setAttribute('type', 'procedures_defnoreturn');\n    block.setAttribute('gap', 16);\n    const nameField = utilsXml.createElement('field');\n    nameField.setAttribute('name', 'NAME');\n    nameField.appendChild(\n        utilsXml.createTextNode(Msg['PROCEDURES_DEFNORETURN_PROCEDURE']));\n    block.appendChild(nameField);\n    xmlList.push(block);\n  }\n  if (Blocks['procedures_defreturn']) {\n    // <block type=\"procedures_defreturn\" gap=\"16\">\n    //     <field name=\"NAME\">do something</field>\n    // </block>\n    const block = utilsXml.createElement('block');\n    block.setAttribute('type', 'procedures_defreturn');\n    block.setAttribute('gap', 16);\n    const nameField = utilsXml.createElement('field');\n    nameField.setAttribute('name', 'NAME');\n    nameField.appendChild(\n        utilsXml.createTextNode(Msg['PROCEDURES_DEFRETURN_PROCEDURE']));\n    block.appendChild(nameField);\n    xmlList.push(block);\n  }\n  if (Blocks['procedures_ifreturn']) {\n    // <block type=\"procedures_ifreturn\" gap=\"16\"></block>\n    const block = utilsXml.createElement('block');\n    block.setAttribute('type', 'procedures_ifreturn');\n    block.setAttribute('gap', 16);\n    xmlList.push(block);\n  }\n  if (xmlList.length) {\n    // Add slightly larger gap between system blocks and user calls.\n    xmlList[xmlList.length - 1].setAttribute('gap', 24);\n  }\n\n  /**\n   * Add items to xmlList for each listed procedure.\n   * @param {!Array<!Array>} procedureList A list of procedures, each of which\n   *     is defined by a three-element list of name, parameter list, and return\n   *     value boolean.\n   * @param {string} templateName The type of the block to generate.\n   */\n  function populateProcedures(procedureList, templateName) {\n    for (let i = 0; i < procedureList.length; i++) {\n      const name = procedureList[i][0];\n      const args = procedureList[i][1];\n      // <block type=\"procedures_callnoreturn\" gap=\"16\">\n      //   <mutation name=\"do something\">\n      //     <arg name=\"x\"></arg>\n      //   </mutation>\n      // </block>\n      const block = utilsXml.createElement('block');\n      block.setAttribute('type', templateName);\n      block.setAttribute('gap', 16);\n      const mutation = utilsXml.createElement('mutation');\n      mutation.setAttribute('name', name);\n      block.appendChild(mutation);\n      for (let j = 0; j < args.length; j++) {\n        const arg = utilsXml.createElement('arg');\n        arg.setAttribute('name', args[j]);\n        mutation.appendChild(arg);\n      }\n      xmlList.push(block);\n    }\n  }\n\n  const tuple = allProcedures(workspace);\n  populateProcedures(tuple[0], 'procedures_callnoreturn');\n  populateProcedures(tuple[1], 'procedures_callreturn');\n  return xmlList;\n};\nexports.flyoutCategory = flyoutCategory;\n\n/**\n * Updates the procedure mutator's flyout so that the arg block is not a\n * duplicate of another arg.\n * @param {!WorkspaceSvg} workspace The procedure mutator's workspace. This\n *     workspace's flyout is what is being updated.\n */\nconst updateMutatorFlyout = function(workspace) {\n  const usedNames = [];\n  const blocks = workspace.getBlocksByType('procedures_mutatorarg', false);\n  for (let i = 0, block; (block = blocks[i]); i++) {\n    usedNames.push(block.getFieldValue('NAME'));\n  }\n\n  const xmlElement = utilsXml.createElement('xml');\n  const argBlock = utilsXml.createElement('block');\n  argBlock.setAttribute('type', 'procedures_mutatorarg');\n  const nameField = utilsXml.createElement('field');\n  nameField.setAttribute('name', 'NAME');\n  const argValue =\n      Variables.generateUniqueNameFromOptions(DEFAULT_ARG, usedNames);\n  const fieldContent = utilsXml.createTextNode(argValue);\n\n  nameField.appendChild(fieldContent);\n  argBlock.appendChild(nameField);\n  xmlElement.appendChild(argBlock);\n\n  workspace.updateToolbox(xmlElement);\n};\n\n/**\n * Listens for when a procedure mutator is opened. Then it triggers a flyout\n * update and adds a mutator change listener to the mutator workspace.\n * @param {!Abstract} e The event that triggered this listener.\n * @alias Blockly.Procedures.mutatorOpenListener\n * @package\n */\nconst mutatorOpenListener = function(e) {\n  if (e.type !== eventUtils.BUBBLE_OPEN) {\n    return;\n  }\n  const bubbleEvent = /** @type {!BubbleOpen} */ (e);\n  if (!(bubbleEvent.bubbleType === 'mutator' && bubbleEvent.isOpen)) {\n    return;\n  }\n  const workspaceId = /** @type {string} */ (bubbleEvent.workspaceId);\n  const block = /** @type {!BlockSvg} */\n      (Workspace.getById(workspaceId).getBlockById(bubbleEvent.blockId));\n  const type = block.type;\n  if (type !== 'procedures_defnoreturn' && type !== 'procedures_defreturn') {\n    return;\n  }\n  const workspace = /** @type {!WorkspaceSvg} */ (block.mutator.getWorkspace());\n  updateMutatorFlyout(workspace);\n  workspace.addChangeListener(mutatorChangeListener);\n};\nexports.mutatorOpenListener = mutatorOpenListener;\n\n/**\n * Listens for changes in a procedure mutator and triggers flyout updates when\n * necessary.\n * @param {!Abstract} e The event that triggered this listener.\n */\nconst mutatorChangeListener = function(e) {\n  if (e.type !== eventUtils.BLOCK_CREATE &&\n      e.type !== eventUtils.BLOCK_DELETE &&\n      e.type !== eventUtils.BLOCK_CHANGE) {\n    return;\n  }\n  const workspaceId = /** @type {string} */ (e.workspaceId);\n  const workspace = /** @type {!WorkspaceSvg} */\n      (Workspace.getById(workspaceId));\n  updateMutatorFlyout(workspace);\n};\n\n/**\n * Find all the callers of a named procedure.\n * @param {string} name Name of procedure.\n * @param {!Workspace} workspace The workspace to find callers in.\n * @return {!Array<!Block>} Array of caller blocks.\n * @alias Blockly.Procedures.getCallers\n */\nconst getCallers = function(name, workspace) {\n  const callers = [];\n  const blocks = workspace.getAllBlocks(false);\n  // Iterate through every block and check the name.\n  for (let i = 0; i < blocks.length; i++) {\n    // Assume it is a procedure block so we can check.\n    const procedureBlock = /** @type {!ProcedureBlock} */ (blocks[i]);\n    if (procedureBlock.getProcedureCall) {\n      const procName = procedureBlock.getProcedureCall();\n      // Procedure name may be null if the block is only half-built.\n      if (procName && Names.equals(procName, name)) {\n        callers.push(blocks[i]);\n      }\n    }\n  }\n  return callers;\n};\nexports.getCallers = getCallers;\n\n/**\n * When a procedure definition changes its parameters, find and edit all its\n * callers.\n * @param {!Block} defBlock Procedure definition block.\n * @alias Blockly.Procedures.mutateCallers\n */\nconst mutateCallers = function(defBlock) {\n  const oldRecordUndo = eventUtils.getRecordUndo();\n  const procedureBlock = /** @type {!ProcedureBlock} */ (defBlock);\n  const name = procedureBlock.getProcedureDef()[0];\n  const xmlElement = defBlock.mutationToDom(true);\n  const callers = getCallers(name, defBlock.workspace);\n  for (let i = 0, caller; (caller = callers[i]); i++) {\n    const oldMutationDom = caller.mutationToDom();\n    const oldMutation = oldMutationDom && Xml.domToText(oldMutationDom);\n    caller.domToMutation(xmlElement);\n    const newMutationDom = caller.mutationToDom();\n    const newMutation = newMutationDom && Xml.domToText(newMutationDom);\n    if (oldMutation !== newMutation) {\n      // Fire a mutation on every caller block.  But don't record this as an\n      // undo action since it is deterministically tied to the procedure's\n      // definition mutation.\n      eventUtils.setRecordUndo(false);\n      eventUtils.fire(new (eventUtils.get(eventUtils.BLOCK_CHANGE))(\n          caller, 'mutation', null, oldMutation, newMutation));\n      eventUtils.setRecordUndo(oldRecordUndo);\n    }\n  }\n};\nexports.mutateCallers = mutateCallers;\n\n/**\n * Find the definition block for the named procedure.\n * @param {string} name Name of procedure.\n * @param {!Workspace} workspace The workspace to search.\n * @return {?Block} The procedure definition block, or null not found.\n * @alias Blockly.Procedures.getDefinition\n */\nconst getDefinition = function(name, workspace) {\n  // Do not assume procedure is a top block. Some languages allow nested\n  // procedures. Also do not assume it is one of the built-in blocks. Only\n  // rely on getProcedureDef.\n  const blocks = workspace.getAllBlocks(false);\n  for (let i = 0; i < blocks.length; i++) {\n    // Assume it is a procedure block so we can check.\n    const procedureBlock = /** @type {!ProcedureBlock} */ (blocks[i]);\n    if (procedureBlock.getProcedureDef) {\n      const tuple = procedureBlock.getProcedureDef();\n      if (tuple && Names.equals(tuple[0], name)) {\n        return blocks[i];  // Can't use procedureBlock var due to type check.\n      }\n    }\n  }\n  return null;\n};\nexports.getDefinition = getDefinition;\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Utility functions for handling typed variables.\n *\n */\n'use strict';\n\n/**\n * Utility functions for handling typed variables.\n *\n * @namespace Blockly.VariablesDynamic\n */\ngoog.module('Blockly.VariablesDynamic');\n\nconst Variables = goog.require('Blockly.Variables');\nconst xml = goog.require('Blockly.utils.xml');\nconst {Blocks} = goog.require('Blockly.blocks');\nconst {Msg} = goog.require('Blockly.Msg');\nconst {VariableModel} = goog.require('Blockly.VariableModel');\n/* eslint-disable-next-line no-unused-vars */\nconst {Workspace} = goog.requireType('Blockly.Workspace');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceSvg} = goog.requireType('Blockly.WorkspaceSvg');\n\n\n/**\n * String for use in the \"custom\" attribute of a category in toolbox XML.\n * This string indicates that the category should be dynamically populated with\n * variable blocks.\n * See also Blockly.Variables.CATEGORY_NAME and\n * Blockly.Procedures.CATEGORY_NAME.\n * @const {string}\n * @alias Blockly.VariablesDynamic.CATEGORY_NAME\n */\nconst CATEGORY_NAME = 'VARIABLE_DYNAMIC';\nexports.CATEGORY_NAME = CATEGORY_NAME;\n\nconst stringButtonClickHandler = function(button) {\n  Variables.createVariableButtonHandler(\n      button.getTargetWorkspace(), undefined, 'String');\n};\nexports.onCreateVariableButtonClick_String = stringButtonClickHandler;\n\nconst numberButtonClickHandler = function(button) {\n  Variables.createVariableButtonHandler(\n      button.getTargetWorkspace(), undefined, 'Number');\n};\nexports.onCreateVariableButtonClick_Number = numberButtonClickHandler;\n\nconst colourButtonClickHandler = function(button) {\n  Variables.createVariableButtonHandler(\n      button.getTargetWorkspace(), undefined, 'Colour');\n};\nexports.onCreateVariableButtonClick_Colour = colourButtonClickHandler;\n\n/**\n * Construct the elements (blocks and button) required by the flyout for the\n * variable category.\n * @param {!WorkspaceSvg} workspace The workspace containing variables.\n * @return {!Array<!Element>} Array of XML elements.\n * @alias Blockly.VariablesDynamic.flyoutCategory\n */\nconst flyoutCategory = function(workspace) {\n  let xmlList = [];\n  let button = document.createElement('button');\n  button.setAttribute('text', Msg['NEW_STRING_VARIABLE']);\n  button.setAttribute('callbackKey', 'CREATE_VARIABLE_STRING');\n  xmlList.push(button);\n  button = document.createElement('button');\n  button.setAttribute('text', Msg['NEW_NUMBER_VARIABLE']);\n  button.setAttribute('callbackKey', 'CREATE_VARIABLE_NUMBER');\n  xmlList.push(button);\n  button = document.createElement('button');\n  button.setAttribute('text', Msg['NEW_COLOUR_VARIABLE']);\n  button.setAttribute('callbackKey', 'CREATE_VARIABLE_COLOUR');\n  xmlList.push(button);\n\n  workspace.registerButtonCallback(\n      'CREATE_VARIABLE_STRING', stringButtonClickHandler);\n  workspace.registerButtonCallback(\n      'CREATE_VARIABLE_NUMBER', numberButtonClickHandler);\n  workspace.registerButtonCallback(\n      'CREATE_VARIABLE_COLOUR', colourButtonClickHandler);\n\n\n  const blockList = flyoutCategoryBlocks(workspace);\n  xmlList = xmlList.concat(blockList);\n  return xmlList;\n};\nexports.flyoutCategory = flyoutCategory;\n\n/**\n * Construct the blocks required by the flyout for the variable category.\n * @param {!Workspace} workspace The workspace containing variables.\n * @return {!Array<!Element>} Array of XML block elements.\n * @alias Blockly.VariablesDynamic.flyoutCategoryBlocks\n */\nconst flyoutCategoryBlocks = function(workspace) {\n  const variableModelList = workspace.getAllVariables();\n\n  const xmlList = [];\n  if (variableModelList.length > 0) {\n    if (Blocks['variables_set_dynamic']) {\n      const firstVariable = variableModelList[variableModelList.length - 1];\n      const block = xml.createElement('block');\n      block.setAttribute('type', 'variables_set_dynamic');\n      block.setAttribute('gap', 24);\n      block.appendChild(Variables.generateVariableFieldDom(firstVariable));\n      xmlList.push(block);\n    }\n    if (Blocks['variables_get_dynamic']) {\n      variableModelList.sort(VariableModel.compareByName);\n      for (let i = 0, variable; (variable = variableModelList[i]); i++) {\n        const block = xml.createElement('block');\n        block.setAttribute('type', 'variables_get_dynamic');\n        block.setAttribute('gap', 8);\n        block.appendChild(Variables.generateVariableFieldDom(variable));\n        xmlList.push(block);\n      }\n    }\n  }\n  return xmlList;\n};\nexports.flyoutCategoryBlocks = flyoutCategoryBlocks;\n","/**\n * @license\n * Copyright 2011 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The top level namespace used to access the Blockly library.\n */\n'use strict';\n\n/**\n * The top level namespace used to access the Blockly library.\n * @namespace Blockly\n */\ngoog.module('Blockly');\ngoog.module.declareLegacyNamespace();\n\nconst ContextMenu = goog.require('Blockly.ContextMenu');\nconst ContextMenuItems = goog.require('Blockly.ContextMenuItems');\nconst Css = goog.require('Blockly.Css');\nconst Events = goog.require('Blockly.Events');\nconst Extensions = goog.require('Blockly.Extensions');\nconst Procedures = goog.require('Blockly.Procedures');\nconst ShortcutItems = goog.require('Blockly.ShortcutItems');\nconst Themes = goog.require('Blockly.Themes');\nconst Tooltip = goog.require('Blockly.Tooltip');\nconst Touch = goog.require('Blockly.Touch');\nconst Variables = goog.require('Blockly.Variables');\nconst VariablesDynamic = goog.require('Blockly.VariablesDynamic');\nconst WidgetDiv = goog.require('Blockly.WidgetDiv');\nconst Xml = goog.require('Blockly.Xml');\nconst blockAnimations = goog.require('Blockly.blockAnimations');\nconst blockRendering = goog.require('Blockly.blockRendering');\nconst browserEvents = goog.require('Blockly.browserEvents');\nconst bumpObjects = goog.require('Blockly.bumpObjects');\nconst clipboard = goog.require('Blockly.clipboard');\nconst colour = goog.require('Blockly.utils.colour');\nconst common = goog.require('Blockly.common');\nconst constants = goog.require('Blockly.constants');\nconst deprecation = goog.require('Blockly.utils.deprecation');\nconst dialog = goog.require('Blockly.dialog');\nconst dropDownDiv = goog.require('Blockly.dropDownDiv');\nconst fieldRegistry = goog.require('Blockly.fieldRegistry');\nconst geras = goog.require('Blockly.geras');\nconst internalConstants = goog.require('Blockly.internalConstants');\nconst minimalist = goog.require('Blockly.minimalist');\nconst registry = goog.require('Blockly.registry');\nconst serializationBlocks = goog.require('Blockly.serialization.blocks');\nconst serializationExceptions = goog.require('Blockly.serialization.exceptions');\nconst serializationPriorities = goog.require('Blockly.serialization.priorities');\nconst serializationRegistry = goog.require('Blockly.serialization.registry');\nconst serializationVariables = goog.require('Blockly.serialization.variables');\nconst serializationWorkspaces = goog.require('Blockly.serialization.workspaces');\nconst svgMath = goog.require('Blockly.utils.svgMath');\nconst thrasos = goog.require('Blockly.thrasos');\nconst toolbox = goog.require('Blockly.utils.toolbox');\nconst uiPosition = goog.require('Blockly.uiPosition');\nconst utils = goog.require('Blockly.utils');\nconst zelos = goog.require('Blockly.zelos');\nconst {Align, Input} = goog.require('Blockly.Input');\nconst {ASTNode} = goog.require('Blockly.ASTNode');\nconst {BasicCursor} = goog.require('Blockly.BasicCursor');\nconst {BlockDragSurfaceSvg} = goog.require('Blockly.BlockDragSurfaceSvg');\nconst {BlockDragger} = goog.require('Blockly.BlockDragger');\nconst {BlockSvg} = goog.require('Blockly.BlockSvg');\nconst {BlocklyOptions} = goog.require('Blockly.BlocklyOptions');\nconst {Blocks} = goog.require('Blockly.blocks');\nconst {Block} = goog.require('Blockly.Block');\nconst {BubbleDragger} = goog.require('Blockly.BubbleDragger');\nconst {Bubble} = goog.require('Blockly.Bubble');\nconst {CollapsibleToolboxCategory} = goog.require('Blockly.CollapsibleToolboxCategory');\nconst {Comment} = goog.require('Blockly.Comment');\nconst {ComponentManager} = goog.require('Blockly.ComponentManager');\nconst {config} = goog.require('Blockly.config');\nconst {ConnectionChecker} = goog.require('Blockly.ConnectionChecker');\nconst {ConnectionDB} = goog.require('Blockly.ConnectionDB');\nconst {ConnectionType} = goog.require('Blockly.ConnectionType');\nconst {Connection} = goog.require('Blockly.Connection');\nconst {ContextMenuRegistry} = goog.require('Blockly.ContextMenuRegistry');\nconst {Cursor} = goog.require('Blockly.Cursor');\nconst {DeleteArea} = goog.require('Blockly.DeleteArea');\nconst {DragTarget} = goog.require('Blockly.DragTarget');\nconst {FieldAngle} = goog.require('Blockly.FieldAngle');\nconst {FieldCheckbox} = goog.require('Blockly.FieldCheckbox');\nconst {FieldColour} = goog.require('Blockly.FieldColour');\nconst {FieldDropdown} = goog.require('Blockly.FieldDropdown');\nconst {FieldImage} = goog.require('Blockly.FieldImage');\nconst {FieldLabelSerializable} = goog.require('Blockly.FieldLabelSerializable');\nconst {FieldLabel} = goog.require('Blockly.FieldLabel');\nconst {FieldMultilineInput} = goog.require('Blockly.FieldMultilineInput');\nconst {FieldNumber} = goog.require('Blockly.FieldNumber');\nconst {FieldTextInput} = goog.require('Blockly.FieldTextInput');\nconst {FieldVariable} = goog.require('Blockly.FieldVariable');\nconst {Field} = goog.require('Blockly.Field');\nconst {FlyoutButton} = goog.require('Blockly.FlyoutButton');\nconst {FlyoutMetricsManager} = goog.require('Blockly.FlyoutMetricsManager');\nconst {Flyout} = goog.require('Blockly.Flyout');\nconst {Generator} = goog.require('Blockly.Generator');\nconst {Gesture} = goog.require('Blockly.Gesture');\nconst {Grid} = goog.require('Blockly.Grid');\nconst {HorizontalFlyout} = goog.require('Blockly.HorizontalFlyout');\nconst {IASTNodeLocationSvg} = goog.require('Blockly.IASTNodeLocationSvg');\nconst {IASTNodeLocationWithBlock} = goog.require('Blockly.IASTNodeLocationWithBlock');\nconst {IASTNodeLocation} = goog.require('Blockly.IASTNodeLocation');\nconst {IAutoHideable} = goog.require('Blockly.IAutoHideable');\nconst {IBlockDragger} = goog.require('Blockly.IBlockDragger');\nconst {IBoundedElement} = goog.require('Blockly.IBoundedElement');\nconst {IBubble} = goog.require('Blockly.IBubble');\nconst {ICollapsibleToolboxItem} = goog.require('Blockly.ICollapsibleToolboxItem');\nconst {IComponent} = goog.require('Blockly.IComponent');\nconst {IConnectionChecker} = goog.require('Blockly.IConnectionChecker');\nconst {IContextMenu} = goog.require('Blockly.IContextMenu');\nconst {ICopyable} = goog.require('Blockly.ICopyable');\nconst {IDeletable} = goog.require('Blockly.IDeletable');\nconst {IDeleteArea} = goog.require('Blockly.IDeleteArea');\nconst {IDragTarget} = goog.require('Blockly.IDragTarget');\nconst {IDraggable} = goog.require('Blockly.IDraggable');\nconst {IFlyout} = goog.require('Blockly.IFlyout');\nconst {IKeyboardAccessible} = goog.require('Blockly.IKeyboardAccessible');\nconst {IMetricsManager} = goog.require('Blockly.IMetricsManager');\nconst {IMovable} = goog.require('Blockly.IMovable');\nconst {IPositionable} = goog.require('Blockly.IPositionable');\nconst {IRegistrableField} = goog.require('Blockly.IRegistrableField');\nconst {IRegistrable} = goog.require('Blockly.IRegistrable');\nconst {ISelectableToolboxItem} = goog.require('Blockly.ISelectableToolboxItem');\nconst {ISelectable} = goog.require('Blockly.ISelectable');\nconst {ISerializer} = goog.require('Blockly.serialization.ISerializer');\nconst {IStyleable} = goog.require('Blockly.IStyleable');\nconst {IToolboxItem} = goog.require('Blockly.IToolboxItem');\nconst {IToolbox} = goog.require('Blockly.IToolbox');\nconst {Icon} = goog.require('Blockly.Icon');\nconst {InsertionMarkerManager} = goog.require('Blockly.InsertionMarkerManager');\nconst {Marker} = goog.require('Blockly.Marker');\nconst {MarkerManager} = goog.require('Blockly.MarkerManager');\nconst {MenuItem} = goog.require('Blockly.MenuItem');\nconst {Menu} = goog.require('Blockly.Menu');\nconst {MetricsManager} = goog.require('Blockly.MetricsManager');\nconst {Mutator} = goog.require('Blockly.Mutator');\nconst {Msg} = goog.require('Blockly.Msg');\nconst {Names} = goog.require('Blockly.Names');\nconst {Options} = goog.require('Blockly.Options');\nconst {RenderedConnection} = goog.require('Blockly.RenderedConnection');\nconst {ScrollbarPair} = goog.require('Blockly.ScrollbarPair');\nconst {Scrollbar} = goog.require('Blockly.Scrollbar');\nconst {ShortcutRegistry} = goog.require('Blockly.ShortcutRegistry');\nconst {TabNavigateCursor} = goog.require('Blockly.TabNavigateCursor');\nconst {ThemeManager} = goog.require('Blockly.ThemeManager');\nconst {Theme} = goog.require('Blockly.Theme');\nconst {ToolboxCategory} = goog.require('Blockly.ToolboxCategory');\nconst {ToolboxItem} = goog.require('Blockly.ToolboxItem');\nconst {ToolboxSeparator} = goog.require('Blockly.ToolboxSeparator');\nconst {Toolbox} = goog.require('Blockly.Toolbox');\nconst {TouchGesture} = goog.require('Blockly.TouchGesture');\nconst {Trashcan} = goog.require('Blockly.Trashcan');\nconst {VariableMap} = goog.require('Blockly.VariableMap');\nconst {VariableModel} = goog.require('Blockly.VariableModel');\nconst {VerticalFlyout} = goog.require('Blockly.VerticalFlyout');\nconst {Warning} = goog.require('Blockly.Warning');\nconst {WorkspaceAudio} = goog.require('Blockly.WorkspaceAudio');\nconst {WorkspaceCommentSvg} = goog.require('Blockly.WorkspaceCommentSvg');\nconst {WorkspaceComment} = goog.require('Blockly.WorkspaceComment');\nconst {WorkspaceDragSurfaceSvg} = goog.require('Blockly.WorkspaceDragSurfaceSvg');\nconst {WorkspaceDragger} = goog.require('Blockly.WorkspaceDragger');\nconst {WorkspaceSvg, resizeSvgContents} = goog.require('Blockly.WorkspaceSvg');\nconst {Workspace} = goog.require('Blockly.Workspace');\nconst {ZoomControls} = goog.require('Blockly.ZoomControls');\nconst {globalThis} = goog.require('Blockly.utils.global');\nconst {inject} = goog.require('Blockly.inject');\nconst {inputTypes} = goog.require('Blockly.inputTypes');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.Events.BlockCreate');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.Events.FinishedLoading');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.Events.Ui');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.Events.UiBase');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.Events.VarCreate');\n\n\n/**\n * Blockly core version.\n * This constant is overridden by the build script (npm run build) to the value\n * of the version in package.json. This is done by the Closure Compiler in the\n * buildCompressed gulp task.\n * For local builds, you can pass --define='Blockly.VERSION=X.Y.Z' to the\n * compiler to override this constant.\n * @define {string}\n * @alias Blockly.VERSION\n */\nexports.VERSION = 'uncompiled';\n\n/*\n * Top-level functions and properties on the Blockly namespace.\n * These are used only in external code. Do not reference these\n * from internal code as importing from this file can cause circular\n * dependencies. Do not add new functions here. There is probably a better\n * namespace to put new functions on.\n */\n\n/*\n * Aliases for input alignments used in block defintions.\n */\n\n/**\n * @see Blockly.Input.Align.LEFT\n * @alias Blockly.ALIGN_LEFT\n */\nexports.ALIGN_LEFT = Align.LEFT;\n\n/**\n * @see Blockly.Input.Align.CENTRE\n * @alias Blockly.ALIGN_CENTRE\n */\nexports.ALIGN_CENTRE = Align.CENTRE;\n\n/**\n * @see Blockly.Input.Align.RIGHT\n * @alias Blockly.ALIGN_RIGHT\n */\nexports.ALIGN_RIGHT = Align.RIGHT;\n\n/*\n * Aliases for constants used for connection and input types.\n */\n\n/**\n * @see ConnectionType.INPUT_VALUE\n * @alias Blockly.INPUT_VALUE\n */\nexports.INPUT_VALUE = ConnectionType.INPUT_VALUE;\n\n/**\n * @see ConnectionType.OUTPUT_VALUE\n * @alias Blockly.OUTPUT_VALUE\n */\nexports.OUTPUT_VALUE = ConnectionType.OUTPUT_VALUE;\n\n/**\n * @see ConnectionType.NEXT_STATEMENT\n * @alias Blockly.NEXT_STATEMENT\n */\nexports.NEXT_STATEMENT = ConnectionType.NEXT_STATEMENT;\n\n/**\n * @see ConnectionType.PREVIOUS_STATEMENT\n * @alias Blockly.PREVIOUS_STATEMENT\n */\nexports.PREVIOUS_STATEMENT = ConnectionType.PREVIOUS_STATEMENT;\n\n/**\n * @see inputTypes.DUMMY_INPUT\n * @alias Blockly.DUMMY_INPUT\n */\nexports.DUMMY_INPUT = inputTypes.DUMMY;\n\n/**\n * Aliases for toolbox positions.\n */\n\n/**\n * @see toolbox.Position.TOP\n * @alias Blockly.TOOLBOX_AT_TOP\n */\nexports.TOOLBOX_AT_TOP = toolbox.Position.TOP;\n\n/**\n * @see toolbox.Position.BOTTOM\n * @alias Blockly.TOOLBOX_AT_BOTTOM\n */\nexports.TOOLBOX_AT_BOTTOM = toolbox.Position.BOTTOM;\n\n/**\n * @see toolbox.Position.LEFT\n * @alias Blockly.TOOLBOX_AT_LEFT\n */\nexports.TOOLBOX_AT_LEFT = toolbox.Position.LEFT;\n\n/**\n * @see toolbox.Position.RIGHT\n * @alias Blockly.TOOLBOX_AT_RIGHT\n */\nexports.TOOLBOX_AT_RIGHT = toolbox.Position.RIGHT;\n\n/*\n * Other aliased functions.\n */\n\n/**\n * Size the SVG image to completely fill its container. Call this when the view\n * actually changes sizes (e.g. on a window resize/device orientation change).\n * See workspace.resizeContents to resize the workspace when the contents\n * change (e.g. when a block is added or removed).\n * Record the height/width of the SVG image.\n * @param {!WorkspaceSvg} workspace Any workspace in the SVG.\n * @see Blockly.common.svgResize\n * @alias Blockly.svgResize\n */\nexports.svgResize = common.svgResize;\n\n/**\n * Close tooltips, context menus, dropdown selections, etc.\n * @param {boolean=} opt_onlyClosePopups Whether only popups should be closed.\n * @see Blockly.WorkspaceSvg.hideChaff\n * @alias Blockly.hideChaff\n */\nconst hideChaff = function(opt_onlyClosePopups) {\n  /** @type {!WorkspaceSvg} */ (common.getMainWorkspace())\n      .hideChaff(opt_onlyClosePopups);\n};\nexports.hideChaff = hideChaff;\n\n/**\n * Returns the main workspace.  Returns the last used main workspace (based on\n * focus).  Try not to use this function, particularly if there are multiple\n * Blockly instances on a page.\n * @return {!Workspace} The main workspace.\n * @see Blockly.common.getMainWorkspace\n * @alias Blockly.getMainWorkspace\n */\nexports.getMainWorkspace = common.getMainWorkspace;\n\n/**\n * Define blocks from an array of JSON block definitions, as might be generated\n * by the Blockly Developer Tools.\n * @param {!Array<!Object>} jsonArray An array of JSON block definitions.\n * @see Blockly.common.defineBlocksWithJsonArray\n * @alias Blockly.defineBlocksWithJsonArray\n */\nexports.defineBlocksWithJsonArray = common.defineBlocksWithJsonArray;\n\n/**\n * Set the parent container.  This is the container element that the WidgetDiv,\n * dropDownDiv, and Tooltip are rendered into the first time `Blockly.inject`\n * is called.\n * This method is a NOP if called after the first ``Blockly.inject``.\n * @param {!Element} container The container element.\n * @see Blockly.common.setParentContainer\n * @alias Blockly.setParentContainer\n */\nexports.setParentContainer = common.setParentContainer;\n\n/*\n * Aliased functions and properties that used to be on the Blockly namespace.\n * Everything in this section is deprecated. Both external and internal code\n * should avoid using these functions and use the designated replacements.\n * Anything in this section may be removed in a future version of Blockly.\n */\n\n// Add accessors for properties on Blockly that have now been deprecated.\nObject.defineProperties(exports, {\n  /**\n   * Wrapper to window.alert() that app developers may override to\n   * provide alternatives to the modal browser window.\n   * @name Blockly.alert\n   * @type {!function(string, function()=)}\n   * @deprecated Use Blockly.dialog.alert / .setAlert() instead.\n   *     (December 2021)\n   * @suppress {checkTypes}\n   */\n  alert: {\n    set: function(newAlert) {\n      deprecation.warn('Blockly.alert', 'December 2021', 'December 2022');\n      dialog.setAlert(newAlert);\n    },\n    get: function() {\n      deprecation.warn(\n          'Blockly.alert', 'December 2021', 'December 2022',\n          'Blockly.dialog.alert()');\n      return dialog.alert;\n    },\n  },\n  /**\n   * Wrapper to window.confirm() that app developers may override to\n   * provide alternatives to the modal browser window.\n   * @name Blockly.confirm\n   * @type {!function(string, function()=)}\n   * @deprecated Use Blockly.dialog.confirm / .setConfirm() instead.\n   *     (December 2021)\n   * @suppress {checkTypes}\n   */\n  confirm: {\n    set: function(newConfirm) {\n      deprecation.warn('Blockly.confirm', 'December 2021', 'December 2022');\n      dialog.setConfirm(newConfirm);\n    },\n    get: function() {\n      deprecation.warn(\n          'Blockly.confirm', 'December 2021', 'December 2022',\n          'Blockly.dialog.confirm()');\n      return dialog.confirm;\n    },\n  },\n  /**\n   * The main workspace most recently used.\n   * Set by Blockly.WorkspaceSvg.prototype.markFocused\n   * @name Blockly.mainWorkspace\n   * @type {Workspace}\n   * @suppress {checkTypes}\n   */\n  mainWorkspace: {\n    set: function(x) {\n      common.setMainWorkspace(x);\n    },\n    get: function() {\n      return common.getMainWorkspace();\n    },\n  },\n  /**\n   * Wrapper to window.prompt() that app developers may override to\n   * provide alternatives to the modal browser window. Built-in\n   * browser prompts are often used for better text input experience\n   * on mobile device. We strongly recommend testing mobile when\n   * overriding this.\n   * @name Blockly.prompt\n   * @type {!function(string, string, function()=)}\n   * @deprecated Use Blockly.dialog.prompt / .setPrompt() instead.\n   *     (December 2021)\n   * @suppress {checkTypes}\n   */\n  prompt: {\n    set: function(newPrompt) {\n      deprecation.warn('Blockly.prompt', 'December 2021', 'December 2022');\n      dialog.setPrompt(newPrompt);\n    },\n    get: function() {\n      deprecation.warn(\n          'Blockly.prompt', 'December 2021', 'December 2022',\n          'Blockly.dialog.prompt()');\n      return dialog.prompt;\n    },\n  },\n  /**\n   * Currently selected block.\n   * @name Blockly.selected\n   * @type {?ICopyable}\n   * @suppress {checkTypes}\n   */\n  selected: {\n    get: function() {\n      return common.getSelected();\n    },\n    set: function(newSelection) {\n      common.setSelected(newSelection);\n    },\n  },\n  /**\n   * The richness of block colours, regardless of the hue.\n   * Must be in the range of 0 (inclusive) to 1 (exclusive).\n   * @name Blockly.HSV_SATURATION\n   * @type {number}\n   * @suppress {checkTypes}\n   */\n  HSV_SATURATION: {\n    get: function() {\n      return utils.colour.getHsvSaturation();\n    },\n    set: function(newValue) {\n      utils.colour.setHsvSaturation(newValue);\n    },\n  },\n  /**\n   * The intensity of block colours, regardless of the hue.\n   * Must be in the range of 0 (inclusive) to 1 (exclusive).\n   * @name Blockly.HSV_VALUE\n   * @type {number}\n   * @suppress {checkTypes}\n   */\n  HSV_VALUE: {\n    get: function() {\n      return utils.colour.getHsvValue();\n    },\n    set: function(newValue) {\n      utils.colour.setHsvValue(newValue);\n    },\n  },\n});\n\n/**\n * Returns the dimensions of the specified SVG image.\n * @param {!SVGElement} svg SVG image.\n * @return {!Size} Contains width and height properties.\n * @deprecated Use workspace.setCachedParentSvgSize. (2021 March 5)\n * @see Blockly.WorkspaceSvg.setCachedParentSvgSize\n * @alias Blockly.svgSize\n */\nexports.svgSize = svgMath.svgSize;\n\n/**\n * Size the workspace when the contents change.  This also updates\n * scrollbars accordingly.\n * @param {!WorkspaceSvg} workspace The workspace to resize.\n * @deprecated Use workspace.resizeContents. (2021 December)\n * @see Blockly.WorkspaceSvg.resizeContents\n * @alias Blockly.resizeSvgContents\n */\nconst resizeSvgContentsLocal = function(workspace) {\n  deprecation.warn(\n      'Blockly.resizeSvgContents', 'December 2021', 'December 2022',\n      'Blockly.WorkspaceSvg.resizeSvgContents');\n  resizeSvgContents(workspace);\n};\nexports.resizeSvgContents = resizeSvgContentsLocal;\n\n/**\n * Copy a block or workspace comment onto the local clipboard.\n * @param {!ICopyable} toCopy Block or Workspace Comment to be copied.\n * @deprecated Use Blockly.clipboard.copy(). (2021 December)\n * @see Blockly.clipboard.copy\n * @alias Blockly.copy\n */\nconst copy = function(toCopy) {\n  deprecation.warn(\n      'Blockly.copy', 'December 2021', 'December 2022',\n      'Blockly.clipboard.copy');\n  clipboard.copy(toCopy);\n};\nexports.copy = copy;\n\n/**\n * Paste a block or workspace comment on to the main workspace.\n * @return {boolean} True if the paste was successful, false otherwise.\n * @deprecated Use Blockly.clipboard.paste(). (2021 December)\n * @see Blockly.clipboard.paste\n * @alias Blockly.paste\n */\nconst paste = function() {\n  deprecation.warn(\n      'Blockly.paste', 'December 2021', 'December 2022',\n      'Blockly.clipboard.paste');\n  return !!clipboard.paste();\n};\nexports.paste = paste;\n\n/**\n * Duplicate this block and its children, or a workspace comment.\n * @param {!ICopyable} toDuplicate Block or Workspace Comment to be\n *     copied.\n * @deprecated Use Blockly.clipboard.duplicate(). (2021 December)\n * @see Blockly.clipboard.duplicate\n * @alias Blockly.duplicate\n */\nconst duplicate = function(toDuplicate) {\n  deprecation.warn(\n      'Blockly.duplicate', 'December 2021', 'December 2022',\n      'Blockly.clipboard.duplicate');\n  clipboard.duplicate(toDuplicate);\n};\nexports.duplicate = duplicate;\n\n/**\n * Is the given string a number (includes negative and decimals).\n * @param {string} str Input string.\n * @return {boolean} True if number, false otherwise.\n * @deprecated Use Blockly.utils.string.isNumber(str). (2021 December)\n * @see Blockly.utils.string.isNumber\n * @alias Blockly.isNumber\n */\nconst isNumber = function(str) {\n  deprecation.warn(\n      'Blockly.isNumber', 'December 2021', 'December 2022',\n      'Blockly.utils.string.isNumber');\n  return utils.string.isNumber(str);\n};\nexports.isNumber = isNumber;\n\n/**\n * Convert a hue (HSV model) into an RGB hex triplet.\n * @param {number} hue Hue on a colour wheel (0-360).\n * @return {string} RGB code, e.g. '#5ba65b'.\n * @deprecated Use Blockly.utils.colour.hueToHex(). (2021 December)\n * @see Blockly.utils.colour.hueToHex\n * @alias Blockly.hueToHex\n */\nconst hueToHex = function(hue) {\n  deprecation.warn(\n      'Blockly.hueToHex', 'December 2021', 'December 2022',\n      'Blockly.utils.colour.hueToHex');\n  return colour.hueToHex(hue);\n};\nexports.hueToHex = hueToHex;\n\n/**\n * Bind an event handler that should be called regardless of whether it is part\n * of the active touch stream.\n * Use this for events that are not part of a multi-part gesture (e.g.\n * mouseover for tooltips).\n * @param {!EventTarget} node Node upon which to listen.\n * @param {string} name Event name to listen to (e.g. 'mousedown').\n * @param {?Object} thisObject The value of 'this' in the function.\n * @param {!Function} func Function to call when event is triggered.\n * @return {!browserEvents.Data} Opaque data that can be passed to\n *     unbindEvent_.\n * @deprecated Use Blockly.browserEvents.bind(). (December 2021)\n * @see Blockly.browserEvents.bind\n * @alias Blockly.bindEvent_\n */\nconst bindEvent_ = function(node, name, thisObject, func) {\n  deprecation.warn(\n      'Blockly.bindEvent_', 'December 2021', 'December 2022',\n      'Blockly.browserEvents.bind');\n  return browserEvents.bind(node, name, thisObject, func);\n};\nexports.bindEvent_ = bindEvent_;\n\n/**\n * Unbind one or more events event from a function call.\n * @param {!browserEvents.Data} bindData Opaque data from bindEvent_.\n *     This list is emptied during the course of calling this function.\n * @return {!Function} The function call.\n * @deprecated Use Blockly.browserEvents.unbind(). (December 2021)\n * @see browserEvents.unbind\n * @alias Blockly.unbindEvent_\n */\nconst unbindEvent_ = function(bindData) {\n  deprecation.warn(\n      'Blockly.unbindEvent_', 'December 2021', 'December 2022',\n      'Blockly.browserEvents.unbind');\n  return browserEvents.unbind(bindData);\n};\nexports.unbindEvent_ = unbindEvent_;\n\n/**\n * Bind an event handler that can be ignored if it is not part of the active\n * touch stream.\n * Use this for events that either start or continue a multi-part gesture (e.g.\n * mousedown or mousemove, which may be part of a drag or click).\n * @param {!EventTarget} node Node upon which to listen.\n * @param {string} name Event name to listen to (e.g. 'mousedown').\n * @param {?Object} thisObject The value of 'this' in the function.\n * @param {!Function} func Function to call when event is triggered.\n * @param {boolean=} opt_noCaptureIdentifier True if triggering on this event\n *     should not block execution of other event handlers on this touch or\n *     other simultaneous touches.  False by default.\n * @param {boolean=} opt_noPreventDefault True if triggering on this event\n *     should prevent the default handler.  False by default.  If\n *     opt_noPreventDefault is provided, opt_noCaptureIdentifier must also be\n *     provided.\n * @return {!browserEvents.Data} Opaque data that can be passed to\n *     unbindEvent_.\n * @deprecated Use Blockly.browserEvents.conditionalBind(). (December 2021)\n * @see browserEvents.conditionalBind\n * @alias Blockly.bindEventWithChecks_\n */\nconst bindEventWithChecks_ = function(\n    node, name, thisObject, func, opt_noCaptureIdentifier,\n    opt_noPreventDefault) {\n  deprecation.warn(\n      'Blockly.bindEventWithChecks_', 'December 2021', 'December 2022',\n      'Blockly.browserEvents.conditionalBind');\n  return browserEvents.conditionalBind(\n      node, name, thisObject, func, opt_noCaptureIdentifier,\n      opt_noPreventDefault);\n};\nexports.bindEventWithChecks_ = bindEventWithChecks_;\n\n// Aliases to allow external code to access these values for legacy reasons.\nexports.COLLAPSE_CHARS = internalConstants.COLLAPSE_CHARS;\nexports.DRAG_STACK = internalConstants.DRAG_STACK;\nexports.OPPOSITE_TYPE = internalConstants.OPPOSITE_TYPE;\nexports.RENAME_VARIABLE_ID = internalConstants.RENAME_VARIABLE_ID;\nexports.DELETE_VARIABLE_ID = internalConstants.DELETE_VARIABLE_ID;\nexports.COLLAPSED_INPUT_NAME = constants.COLLAPSED_INPUT_NAME;\nexports.COLLAPSED_FIELD_NAME = constants.COLLAPSED_FIELD_NAME;\n\n/**\n * String for use in the \"custom\" attribute of a category in toolbox XML.\n * This string indicates that the category should be dynamically populated with\n * variable blocks.\n * @const {string}\n * @alias Blockly.VARIABLE_CATEGORY_NAME\n */\nexports.VARIABLE_CATEGORY_NAME = Variables.CATEGORY_NAME;\n\n/**\n * String for use in the \"custom\" attribute of a category in toolbox XML.\n * This string indicates that the category should be dynamically populated with\n * variable blocks.\n * @const {string}\n * @alias Blockly.VARIABLE_DYNAMIC_CATEGORY_NAME\n */\nexports.VARIABLE_DYNAMIC_CATEGORY_NAME = VariablesDynamic.CATEGORY_NAME;\n/**\n * String for use in the \"custom\" attribute of a category in toolbox XML.\n * This string indicates that the category should be dynamically populated with\n * procedure blocks.\n * @const {string}\n * @alias Blockly.PROCEDURE_CATEGORY_NAME\n */\nexports.PROCEDURE_CATEGORY_NAME = Procedures.CATEGORY_NAME;\n\n// Re-export submodules that no longer declareLegacyNamespace.\nexports.ASTNode = ASTNode;\nexports.BasicCursor = BasicCursor;\nexports.Block = Block;\nexports.BlocklyOptions = BlocklyOptions;\nexports.BlockDragger = BlockDragger;\nexports.BlockDragSurfaceSvg = BlockDragSurfaceSvg;\nexports.BlockSvg = BlockSvg;\nexports.Blocks = Blocks;\nexports.Bubble = Bubble;\nexports.BubbleDragger = BubbleDragger;\nexports.CollapsibleToolboxCategory = CollapsibleToolboxCategory;\nexports.Comment = Comment;\nexports.ComponentManager = ComponentManager;\nexports.Connection = Connection;\nexports.ConnectionType = ConnectionType;\nexports.ConnectionChecker = ConnectionChecker;\nexports.ConnectionDB = ConnectionDB;\nexports.ContextMenu = ContextMenu;\nexports.ContextMenuItems = ContextMenuItems;\nexports.ContextMenuRegistry = ContextMenuRegistry;\nexports.Css = Css;\nexports.Cursor = Cursor;\nexports.DeleteArea = DeleteArea;\nexports.DragTarget = DragTarget;\nexports.DropDownDiv = dropDownDiv;\nexports.Events = Events;\nexports.Extensions = Extensions;\nexports.Field = Field;\nexports.FieldAngle = FieldAngle;\nexports.FieldCheckbox = FieldCheckbox;\nexports.FieldColour = FieldColour;\nexports.FieldDropdown = FieldDropdown;\nexports.FieldImage = FieldImage;\nexports.FieldLabel = FieldLabel;\nexports.FieldLabelSerializable = FieldLabelSerializable;\nexports.FieldMultilineInput = FieldMultilineInput;\nexports.FieldNumber = FieldNumber;\nexports.FieldTextInput = FieldTextInput;\nexports.FieldVariable = FieldVariable;\nexports.Flyout = Flyout;\nexports.FlyoutButton = FlyoutButton;\nexports.FlyoutMetricsManager = FlyoutMetricsManager;\nexports.Generator = Generator;\nexports.Gesture = Gesture;\nexports.Grid = Grid;\nexports.HorizontalFlyout = HorizontalFlyout;\nexports.IASTNodeLocation = IASTNodeLocation;\nexports.IASTNodeLocationSvg = IASTNodeLocationSvg;\nexports.IASTNodeLocationWithBlock = IASTNodeLocationWithBlock;\nexports.IAutoHideable = IAutoHideable;\nexports.IBlockDragger = IBlockDragger;\nexports.IBoundedElement = IBoundedElement;\nexports.IBubble = IBubble;\nexports.ICollapsibleToolboxItem = ICollapsibleToolboxItem;\nexports.IComponent = IComponent;\nexports.IConnectionChecker = IConnectionChecker;\nexports.IContextMenu = IContextMenu;\nexports.Icon = Icon;\nexports.ICopyable = ICopyable;\nexports.IDeletable = IDeletable;\nexports.IDeleteArea = IDeleteArea;\nexports.IDragTarget = IDragTarget;\nexports.IDraggable = IDraggable;\nexports.IFlyout = IFlyout;\nexports.IKeyboardAccessible = IKeyboardAccessible;\nexports.IMetricsManager = IMetricsManager;\nexports.IMovable = IMovable;\nexports.Input = Input;\nexports.InsertionMarkerManager = InsertionMarkerManager;\nexports.IPositionable = IPositionable;\nexports.IRegistrable = IRegistrable;\nexports.IRegistrableField = IRegistrableField;\nexports.ISelectable = ISelectable;\nexports.ISelectableToolboxItem = ISelectableToolboxItem;\nexports.IStyleable = IStyleable;\nexports.IToolbox = IToolbox;\nexports.IToolboxItem = IToolboxItem;\nexports.Marker = Marker;\nexports.MarkerManager = MarkerManager;\nexports.Menu = Menu;\nexports.MenuItem = MenuItem;\nexports.MetricsManager = MetricsManager;\nexports.Mutator = Mutator;\nexports.Msg = Msg;\nexports.Names = Names;\nexports.Options = Options;\nexports.Procedures = Procedures;\nexports.RenderedConnection = RenderedConnection;\nexports.Scrollbar = Scrollbar;\nexports.ScrollbarPair = ScrollbarPair;\nexports.ShortcutItems = ShortcutItems;\nexports.ShortcutRegistry = ShortcutRegistry;\nexports.TabNavigateCursor = TabNavigateCursor;\nexports.Theme = Theme;\nexports.Themes = Themes;\nexports.ThemeManager = ThemeManager;\nexports.Toolbox = Toolbox;\nexports.ToolboxCategory = ToolboxCategory;\nexports.ToolboxItem = ToolboxItem;\nexports.ToolboxSeparator = ToolboxSeparator;\nexports.Tooltip = Tooltip;\nexports.Touch = Touch;\nexports.TouchGesture = TouchGesture;\nexports.Trashcan = Trashcan;\nexports.VariableMap = VariableMap;\nexports.VariableModel = VariableModel;\nexports.Variables = Variables;\nexports.VariablesDynamic = VariablesDynamic;\nexports.VerticalFlyout = VerticalFlyout;\nexports.Warning = Warning;\nexports.WidgetDiv = WidgetDiv;\nexports.Workspace = Workspace;\nexports.WorkspaceAudio = WorkspaceAudio;\nexports.WorkspaceComment = WorkspaceComment;\nexports.WorkspaceCommentSvg = WorkspaceCommentSvg;\nexports.WorkspaceDragSurfaceSvg = WorkspaceDragSurfaceSvg;\nexports.WorkspaceDragger = WorkspaceDragger;\nexports.WorkspaceSvg = WorkspaceSvg;\nexports.Xml = Xml;\nexports.ZoomControls = ZoomControls;\nexports.blockAnimations = blockAnimations;\nexports.blockRendering = blockRendering;\nexports.browserEvents = browserEvents;\nexports.bumpObjects = bumpObjects;\nexports.clipboard = clipboard;\nexports.common = common;\nexports.config = config;\n/** @deprecated Use Blockly.ConnectionType instead. */\nexports.connectionTypes = ConnectionType;\nexports.constants = constants;\nexports.dialog = dialog;\nexports.fieldRegistry = fieldRegistry;\nexports.geras = geras;\nexports.inject = inject;\nexports.inputTypes = inputTypes;\nexports.minimalist = minimalist;\nexports.registry = registry;\nexports.serialization = {\n  blocks: serializationBlocks,\n  exceptions: serializationExceptions,\n  priorities: serializationPriorities,\n  registry: serializationRegistry,\n  variables: serializationVariables,\n  workspaces: serializationWorkspaces,\n  ISerializer: ISerializer,\n};\nexports.thrasos = thrasos;\nexports.uiPosition = uiPosition;\nexports.utils = utils;\nexports.zelos = zelos;\n\n// If Blockly is compiled with ADVANCED_COMPILATION and/or loaded as a\n// CJS or ES module there will not be a Blockly global variable\n// created.  This can cause problems because a very common way of\n// loading translations is to use a <script> tag to load one of\n// msg/js/*.js, which consists of lines like:\n//\n// Blockly.Msg[\"ADD_COMMENT\"] = \"Add Comment\";\n// Blockly.Msg[\"CLEAN_UP\"] = \"Clean up Blocks\";\n//\n// This obviously only works if Blockly.Msg is the Msg export from the\n// Blockly.Msg module - so make sure it is, but only if there is not\n// yet a Blockly global variable.\nif (!('Blockly' in globalThis)) {\n  globalThis['Blockly'] = {'Msg': Msg};\n}\n\n// Temporary hack to copy accessor properties from exports to the\n// global Blockly object as the routine to copy exports in\n// goog.exportPath_ (see closure/goog/base.js) invoked by\n// declareLegacyNamespace only copies normal data properties, not\n// accessors.  This can be removed once all remaining calls to\n// declareLegacyNamspace have been removed.\n//\n// This is only needed in uncompiled mode (see\n// google/blockly-samples#902); in compiled mode the exports object is\n// already the value of globalThis['Blockly'].\n//\n// Note that this code will still attempt to redefine accessors on a\n// previously-imported copy of the Blockly library if both are\n// imported in uncompiled mode.  This will fail with TypeError as the\n// accessors are nonconfigurable (which is good, as otherwise one\n// accessors on one copy would call get/set functions on the other\n// copy!)\n/* eslint-disable-next-line no-undef */\nif (!COMPILED && typeof globalThis['Blockly'] === 'object' &&\n    globalThis['Blockly'] !== exports) {\n  const descriptors = Object.getOwnPropertyDescriptors(exports);\n  const accessors = {};\n  for (const key in descriptors) {\n    if (descriptors[key].get || descriptors[key].set) {\n      accessors[key] = descriptors[key];\n    }\n  }\n  Object.defineProperties(globalThis['Blockly'], accessors);\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The interface for an AST node location.\n */\n\n'use strict';\n\n/**\n * The interface for an AST node location.\n * @namespace Blockly.IASTNodeLocation\n */\ngoog.module('Blockly.IASTNodeLocation');\n\n/**\n * An AST node location interface.\n * @interface\n * @alias Blockly.IASTNodeLocation\n */\nconst IASTNodeLocation = function() {};\n\nexports.IASTNodeLocation = IASTNodeLocation;\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The interface for an AST node location SVG.\n */\n\n'use strict';\n\n/**\n * The interface for an AST node location SVG.\n * @namespace Blockly.IASTNodeLocationSvg\n */\ngoog.module('Blockly.IASTNodeLocationSvg');\n\n/* eslint-disable-next-line no-unused-vars */\nconst {IASTNodeLocation} = goog.require('Blockly.IASTNodeLocation');\n\n\n/**\n * An AST node location SVG interface.\n * @interface\n * @extends {IASTNodeLocation}\n * @alias Blockly.IASTNodeLocationSvg\n */\nconst IASTNodeLocationSvg = function() {};\n\n/**\n * Add the marker SVG to this node's SVG group.\n * @param {SVGElement} markerSvg The SVG root of the marker to be added to the\n *     SVG group.\n */\nIASTNodeLocationSvg.prototype.setMarkerSvg;\n\n/**\n * Add the cursor SVG to this node's SVG group.\n * @param {SVGElement} cursorSvg The SVG root of the cursor to be added to the\n *     SVG group.\n */\nIASTNodeLocationSvg.prototype.setCursorSvg;\n\nexports.IASTNodeLocationSvg = IASTNodeLocationSvg;\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The interface for an AST node location that has an associated\n * block.\n */\n\n'use strict';\n\n/**\n * The interface for an AST node location that has an associated\n * block.\n * @namespace Blockly.IASTNodeLocationWithBlock\n */\ngoog.module('Blockly.IASTNodeLocationWithBlock');\n\n/* eslint-disable-next-line no-unused-vars */\nconst {Block} = goog.requireType('Blockly.Block');\n/* eslint-disable-next-line no-unused-vars */\nconst {IASTNodeLocation} = goog.require('Blockly.IASTNodeLocation');\n\n\n/**\n * An AST node location that has an associated block.\n * @interface\n * @extends {IASTNodeLocation}\n * @alias Blockly.IASTNodeLocationWithBlock\n */\nconst IASTNodeLocationWithBlock = function() {};\n\n/**\n * Get the source block associated with this node.\n * @return {Block} The source block.\n */\nIASTNodeLocationWithBlock.prototype.getSourceBlock;\n\nexports.IASTNodeLocationWithBlock = IASTNodeLocationWithBlock;\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The interface for a bubble.\n */\n\n'use strict';\n\n/**\n * The interface for a bubble.\n * @namespace Blockly.IBubble\n */\ngoog.module('Blockly.IBubble');\n\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockDragSurfaceSvg} = goog.requireType('Blockly.BlockDragSurfaceSvg');\n/* eslint-disable-next-line no-unused-vars */\nconst {Coordinate} = goog.requireType('Blockly.utils.Coordinate');\n/* eslint-disable-next-line no-unused-vars */\nconst {IContextMenu} = goog.require('Blockly.IContextMenu');\n/* eslint-disable-next-line no-unused-vars */\nconst {IDraggable} = goog.require('Blockly.IDraggable');\n\n\n/**\n * A bubble interface.\n * @interface\n * @extends {IDraggable}\n * @extends {IContextMenu}\n * @alias Blockly.IBubble\n */\nconst IBubble = function() {};\n\n/**\n * Return the coordinates of the top-left corner of this bubble's body relative\n * to the drawing surface's origin (0,0), in workspace units.\n * @return {!Coordinate} Object with .x and .y properties.\n */\nIBubble.prototype.getRelativeToSurfaceXY;\n\n/**\n * Return the root node of the bubble's SVG group.\n * @return {!SVGElement} The root SVG node of the bubble's group.\n */\nIBubble.prototype.getSvgRoot;\n\n/**\n * Set whether auto-layout of this bubble is enabled.  The first time a bubble\n * is shown it positions itself to not cover any blocks.  Once a user has\n * dragged it to reposition, it renders where the user put it.\n * @param {boolean} enable True if auto-layout should be enabled, false\n *     otherwise.\n */\nIBubble.prototype.setAutoLayout;\n\n/**\n * Triggers a move callback if one exists at the end of a drag.\n * @param {boolean} adding True if adding, false if removing.\n */\nIBubble.prototype.setDragging;\n\n/**\n * Move this bubble during a drag, taking into account whether or not there is\n * a drag surface.\n * @param {?BlockDragSurfaceSvg} dragSurface The surface that carries\n *     rendered items during a drag, or null if no drag surface is in use.\n * @param {!Coordinate} newLoc The location to translate to, in\n *     workspace coordinates.\n */\nIBubble.prototype.moveDuringDrag;\n\n/**\n * Move the bubble to the specified location in workspace coordinates.\n * @param {number} x The x position to move to.\n * @param {number} y The y position to move to.\n */\nIBubble.prototype.moveTo;\n\n/**\n * Update the style of this bubble when it is dragged over a delete area.\n * @param {boolean} enable True if the bubble is about to be deleted, false\n *     otherwise.\n */\nIBubble.prototype.setDeleteStyle;\n\n/**\n * Dispose of this bubble.\n */\nIBubble.prototype.dispose;\n\nexports.IBubble = IBubble;\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The interface for a collapsible toolbox item.\n */\n\n'use strict';\n\n/**\n * The interface for a collapsible toolbox item.\n * @namespace Blockly.ICollapsibleToolboxItem\n */\ngoog.module('Blockly.ICollapsibleToolboxItem');\n\n/* eslint-disable-next-line no-unused-vars */\nconst {ISelectableToolboxItem} = goog.require('Blockly.ISelectableToolboxItem');\n/* eslint-disable-next-line no-unused-vars */\nconst {IToolboxItem} = goog.requireType('Blockly.IToolboxItem');\n\n\n/**\n * Interface for an item in the toolbox that can be collapsed.\n * @extends {ISelectableToolboxItem}\n * @interface\n * @alias Blockly.ICollapsibleToolboxItem\n */\nconst ICollapsibleToolboxItem = function() {};\n\n/**\n * Gets any children toolbox items. (ex. Gets the subcategories)\n * @return {!Array<!IToolboxItem>} The child toolbox items.\n */\nICollapsibleToolboxItem.prototype.getChildToolboxItems;\n\n/**\n * Whether the toolbox item is expanded to show its child subcategories.\n * @return {boolean} True if the toolbox item shows its children, false if it\n *     is collapsed.\n * @public\n */\nICollapsibleToolboxItem.prototype.isExpanded;\n\n/**\n * Toggles whether or not the toolbox item is expanded.\n * @public\n */\nICollapsibleToolboxItem.prototype.toggleExpanded;\n\nexports.ICollapsibleToolboxItem = ICollapsibleToolboxItem;\n","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Interface for a workspace component that can be registered with\n * the ComponentManager.\n */\n\n'use strict';\n\n/**\n * Interface for a workspace component that can be registered with\n * the ComponentManager.\n * @namespace Blockly.IComponent\n */\ngoog.module('Blockly.IComponent');\n\n\n/**\n * The interface for a workspace component that can be registered with the\n * ComponentManager.\n * @interface\n * @alias Blockly.IComponent\n */\nconst IComponent = function() {};\n\n/**\n * The unique id for this component that is used to register with the\n * ComponentManager.\n * @type {string}\n */\nIComponent.id;\n\nexports.IComponent = IComponent;\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The interface for an object that encapsulates logic for\n * checking whether a potential connection is safe and valid.\n */\n'use strict';\n\n/**\n * The interface for an object that encapsulates logic for\n * checking whether a potential connection is safe and valid.\n * @namespace Blockly.IConnectionChecker\n */\ngoog.module('Blockly.IConnectionChecker');\n\n/* eslint-disable-next-line no-unused-vars */\nconst {Connection} = goog.requireType('Blockly.Connection');\n/* eslint-disable-next-line no-unused-vars */\nconst {RenderedConnection} = goog.requireType('Blockly.RenderedConnection');\n\n\n/**\n * Class for connection type checking logic.\n * @interface\n * @alias Blockly.IConnectionChecker\n */\nconst IConnectionChecker = function() {};\n\n/**\n * Check whether the current connection can connect with the target\n * connection.\n * @param {Connection} a Connection to check compatibility with.\n * @param {Connection} b Connection to check compatibility with.\n * @param {boolean} isDragging True if the connection is being made by dragging\n *     a block.\n * @param {number=} opt_distance The max allowable distance between the\n *     connections for drag checks.\n * @return {boolean} Whether the connection is legal.\n * @public\n */\nIConnectionChecker.prototype.canConnect;\n\n/**\n * Checks whether the current connection can connect with the target\n * connection, and return an error code if there are problems.\n * @param {Connection} a Connection to check compatibility with.\n * @param {Connection} b Connection to check compatibility with.\n * @param {boolean} isDragging True if the connection is being made by dragging\n *     a block.\n * @param {number=} opt_distance The max allowable distance between the\n *     connections for drag checks.\n * @return {number} Connection.CAN_CONNECT if the connection is legal,\n *    an error code otherwise.\n * @public\n */\nIConnectionChecker.prototype.canConnectWithReason;\n\n/**\n * Helper method that translates a connection error code into a string.\n * @param {number} errorCode The error code.\n * @param {Connection} a One of the two connections being checked.\n * @param {Connection} b The second of the two connections being\n *     checked.\n * @return {string} A developer-readable error string.\n * @public\n */\nIConnectionChecker.prototype.getErrorMessage;\n\n/**\n * Check that connecting the given connections is safe, meaning that it would\n * not break any of Blockly's basic assumptions (e.g. no self connections).\n * @param {Connection} a The first of the connections to check.\n * @param {Connection} b The second of the connections to check.\n * @return {number} An enum with the reason this connection is safe or unsafe.\n * @public\n */\nIConnectionChecker.prototype.doSafetyChecks;\n\n/**\n * Check whether this connection is compatible with another connection with\n * respect to the value type system.  E.g. square_root(\"Hello\") is not\n * compatible.\n * @param {!Connection} a Connection to compare.\n * @param {!Connection} b Connection to compare against.\n * @return {boolean} True if the connections share a type.\n * @public\n */\nIConnectionChecker.prototype.doTypeChecks;\n\n/**\n * Check whether this connection can be made by dragging.\n * @param {!RenderedConnection} a Connection to compare.\n * @param {!RenderedConnection} b Connection to compare against.\n * @param {number} distance The maximum allowable distance between connections.\n * @return {boolean} True if the connection is allowed during a drag.\n * @public\n */\nIConnectionChecker.prototype.doDragChecks;\n\nexports.IConnectionChecker = IConnectionChecker;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The interface for an object that is copyable.\n */\n\n'use strict';\n\n/**\n * The interface for an object that is copyable.\n * @namespace Blockly.ICopyable\n */\ngoog.module('Blockly.ICopyable');\n\n/* eslint-disable-next-line no-unused-vars */\nconst {ISelectable} = goog.require('Blockly.ISelectable');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceSvg} = goog.requireType('Blockly.WorkspaceSvg');\n\n\n/**\n * @extends {ISelectable}\n * @interface\n * @alias Blockly.ICopyable\n */\nconst ICopyable = function() {};\n\n/**\n * Encode for copying.\n * @return {?ICopyable.CopyData} Copy metadata.\n * @package\n */\nICopyable.prototype.toCopyData;\n\n/**\n * Copy Metadata.\n * @typedef {{\n *            saveInfo:(!Object|!Element),\n *            source:WorkspaceSvg,\n *            typeCounts:?Object\n *          }}\n */\nICopyable.CopyData;\n\nexports.ICopyable = ICopyable;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The interface for an object that is deletable.\n */\n\n'use strict';\n\n/**\n * The interface for an object that is deletable.\n * @namespace Blockly.IDeletable\n */\ngoog.module('Blockly.IDeletable');\n\n\n/**\n * The interface for an object that can be deleted.\n * @interface\n * @alias Blockly.IDeletable\n */\nconst IDeletable = function() {};\n\n/**\n * Get whether this object is deletable or not.\n * @return {boolean} True if deletable.\n */\nIDeletable.prototype.isDeletable;\n\nexports.IDeletable = IDeletable;\n","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The interface for a component that has a handler for when a\n * block is dropped on top of it.\n */\n\n'use strict';\n\n/**\n * The interface for a component that has a handler for when a\n * block is dropped on top of it.\n * @namespace Blockly.IDragTarget\n */\ngoog.module('Blockly.IDragTarget');\n\n/* eslint-disable-next-line no-unused-vars */\nconst {IComponent} = goog.require('Blockly.IComponent');\n/* eslint-disable-next-line no-unused-vars */\nconst {IDraggable} = goog.requireType('Blockly.IDraggable');\n/* eslint-disable-next-line no-unused-vars */\nconst {Rect} = goog.requireType('Blockly.utils.Rect');\n\n\n/**\n * Interface for a component with custom behaviour when a block or bubble is\n * dragged over or dropped on top of it.\n * @extends {IComponent}\n * @interface\n * @alias Blockly.IDragTarget\n */\nconst IDragTarget = function() {};\n\n/**\n * Returns the bounding rectangle of the drag target area in pixel units\n * relative to viewport.\n * @return {?Rect} The component's bounding box. Null if drag\n *   target area should be ignored.\n */\nIDragTarget.prototype.getClientRect;\n\n/**\n * Handles when a cursor with a block or bubble enters this drag target.\n * @param {!IDraggable} dragElement The block or bubble currently being\n *   dragged.\n */\nIDragTarget.prototype.onDragEnter;\n\n/**\n * Handles when a cursor with a block or bubble is dragged over this drag\n * target.\n * @param {!IDraggable} dragElement The block or bubble currently being\n *   dragged.\n */\nIDragTarget.prototype.onDragOver;\n\n\n/**\n * Handles when a cursor with a block or bubble exits this drag target.\n * @param {!IDraggable} dragElement The block or bubble currently being\n *   dragged.\n */\nIDragTarget.prototype.onDragExit;\n\n/**\n * Handles when a block or bubble is dropped on this component.\n * Should not handle delete here.\n * @param {!IDraggable} dragElement The block or bubble currently being\n *   dragged.\n */\nIDragTarget.prototype.onDrop;\n\n/**\n * Returns whether the provided block or bubble should not be moved after being\n * dropped on this component. If true, the element will return to where it was\n * when the drag started.\n * @param {!IDraggable} dragElement The block or bubble currently being\n *   dragged.\n * @return {boolean} Whether the block or bubble provided should be returned to\n *     drag start.\n */\nIDragTarget.prototype.shouldPreventMove;\n\nexports.IDragTarget = IDragTarget;\n","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The interface for an object that is draggable.\n */\n\n'use strict';\n\n/**\n * The interface for an object that is draggable.\n * @namespace Blockly.IDraggable\n */\ngoog.module('Blockly.IDraggable');\n\n/* eslint-disable-next-line no-unused-vars */\nconst {IDeletable} = goog.require('Blockly.IDeletable');\n\n\n/**\n * The interface for an object that can be dragged.\n * @extends {IDeletable}\n * @interface\n * @alias Blockly.IDraggable\n */\nconst IDraggable = function() {};\n\nexports.IDraggable = IDraggable;\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The interface for objects that handle keyboard shortcuts.\n */\n\n'use strict';\n\n/**\n * The interface for objects that handle keyboard shortcuts.\n * @namespace Blockly.IKeyboardAccessible\n */\ngoog.module('Blockly.IKeyboardAccessible');\n\n/* eslint-disable-next-line no-unused-vars */\nconst {ShortcutRegistry} = goog.requireType('Blockly.ShortcutRegistry');\n\n\n/**\n * An interface for an object that handles keyboard shortcuts.\n * @interface\n * @alias Blockly.IKeyboardAccessible\n */\nconst IKeyboardAccessible = function() {};\n\n/**\n * Handles the given keyboard shortcut.\n * @param {!ShortcutRegistry.KeyboardShortcut} shortcut The shortcut to be\n *     handled.\n * @return {boolean} True if the shortcut has been handled, false otherwise.\n */\nIKeyboardAccessible.prototype.onShortcut;\n\nexports.IKeyboardAccessible = IKeyboardAccessible;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The interface for an object that is movable.\n */\n\n'use strict';\n\n/**\n * The interface for an object that is movable.\n * @namespace Blockly.IMovable\n */\ngoog.module('Blockly.IMovable');\n\n\n/**\n * The interface for an object that is movable.\n * @interface\n * @alias Blockly.IMovable\n */\nconst IMovable = function() {};\n\n/**\n * Get whether this is movable or not.\n * @return {boolean} True if movable.\n */\nIMovable.prototype.isMovable;\n\nexports.IMovable = IMovable;\n","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The interface for a positionable UI element.\n */\n\n'use strict';\n\n/**\n * The interface for a positionable UI element.\n * @namespace Blockly.IPositionable\n */\ngoog.module('Blockly.IPositionable');\n\n/* eslint-disable-next-line no-unused-vars */\nconst {IComponent} = goog.require('Blockly.IComponent');\n/* eslint-disable-next-line no-unused-vars */\nconst {MetricsManager} = goog.requireType('Blockly.MetricsManager');\n/* eslint-disable-next-line no-unused-vars */\nconst {Rect} = goog.requireType('Blockly.utils.Rect');\n\n\n/**\n * Interface for a component that is positioned on top of the workspace.\n * @extends {IComponent}\n * @interface\n * @alias Blockly.IPositionable\n */\nconst IPositionable = function() {};\n\n/**\n * Positions the element. Called when the window is resized.\n * @param {!MetricsManager.UiMetrics} metrics The workspace metrics.\n * @param {!Array<!Rect>} savedPositions List of rectangles that\n *     are already on the workspace.\n */\nIPositionable.prototype.position;\n\n/**\n * Returns the bounding rectangle of the UI element in pixel units relative to\n * the Blockly injection div.\n * @return {?Rect} The UI elements's bounding box. Null if\n *   bounding box should be ignored by other UI elements.\n */\nIPositionable.prototype.getBoundingRectangle;\n\nexports.IPositionable = IPositionable;\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The interface for a Blockly component that can be registered.\n *    (Ex. Toolbox, Fields, Renderers)\n */\n\n'use strict';\n\n/**\n * The interface for a Blockly component that can be registered.\n *    (Ex. Toolbox, Fields, Renderers)\n * @namespace Blockly.IRegistrable\n */\ngoog.module('Blockly.IRegistrable');\n\n\n/**\n * The interface for a Blockly component that can be registered.\n * @interface\n * @alias Blockly.IRegistrable\n */\nconst IRegistrable = function() {};\n\nexports.IRegistrable = IRegistrable;\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The interface for a Blockly field that can be registered.\n */\n\n'use strict';\n\n/**\n * The interface for a Blockly field that can be registered.\n * @namespace Blockly.IRegistrableField\n */\ngoog.module('Blockly.IRegistrableField');\n\n/* eslint-disable-next-line no-unused-vars */\nconst {Field} = goog.requireType('Blockly.Field');\n\n\n/**\n * A registrable field.\n * Note: We are not using an interface here as we are interested in defining the\n * static methods of a field rather than the instance methods.\n * @typedef {{\n *     fromJson:IRegistrableField.fromJson\n * }}\n * @alias Blockly.IRegistrableField\n */\nconst IRegistrableField = {};\n\n/**\n * @typedef {function(!Object): Field}\n */\nIRegistrableField.fromJson;\n\nexports.IRegistrableField = IRegistrableField;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The interface for an object that is selectable.\n */\n\n'use strict';\n\n/**\n * The interface for an object that is selectable.\n * @namespace Blockly.ISelectable\n */\ngoog.module('Blockly.ISelectable');\n\n// eslint-disable-next-line no-unused-vars\nconst {IDeletable} = goog.require('Blockly.IDeletable');\n// eslint-disable-next-line no-unused-vars\nconst {IMovable} = goog.require('Blockly.IMovable');\n\n\n/**\n * The interface for an object that is selectable.\n * @extends {IDeletable}\n * @extends {IMovable}\n * @interface\n * @alias Blockly.ISelectable\n */\nconst ISelectable = function() {};\n\n/**\n * @type {string}\n */\nISelectable.prototype.id;\n\n/**\n * Select this.  Highlight it visually.\n * @return {void}\n */\nISelectable.prototype.select;\n\n/**\n * Unselect this.  Unhighlight it visually.\n * @return {void}\n */\nISelectable.prototype.unselect;\n\nexports.ISelectable = ISelectable;\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The interface for a selectable toolbox item.\n */\n\n'use strict';\n\n/**\n * The interface for a selectable toolbox item.\n * @namespace Blockly.ISelectableToolboxItem\n */\ngoog.module('Blockly.ISelectableToolboxItem');\n\n/* eslint-disable-next-line no-unused-vars */\nconst toolbox = goog.requireType('Blockly.utils.toolbox');\n/* eslint-disable-next-line no-unused-vars */\nconst {IToolboxItem} = goog.require('Blockly.IToolboxItem');\n\n\n/**\n * Interface for an item in the toolbox that can be selected.\n * @extends {IToolboxItem}\n * @interface\n * @alias Blockly.ISelectableToolboxItem\n */\nconst ISelectableToolboxItem = function() {};\n\n/**\n * Gets the name of the toolbox item. Used for emitting events.\n * @return {string} The name of the toolbox item.\n * @public\n */\nISelectableToolboxItem.prototype.getName;\n\n/**\n * Gets the contents of the toolbox item. These are items that are meant to be\n * displayed in the flyout.\n * @return {!toolbox.FlyoutItemInfoArray|string} The definition\n *     of items to be displayed in the flyout.\n * @public\n */\nISelectableToolboxItem.prototype.getContents;\n\n/**\n * Sets the current toolbox item as selected.\n * @param {boolean} _isSelected True if this category is selected, false\n *     otherwise.\n * @public\n */\nISelectableToolboxItem.prototype.setSelected;\n\n/**\n * Gets the HTML element that is clickable.\n * The parent toolbox element receives clicks. The parent toolbox will add an ID\n * to this element so it can pass the onClick event to the correct toolboxItem.\n * @return {!Element} The HTML element that receives clicks.\n * @public\n */\nISelectableToolboxItem.prototype.getClickTarget;\n\n/**\n * Handles when the toolbox item is clicked.\n * @param {!Event} _e Click event to handle.\n * @public\n */\nISelectableToolboxItem.prototype.onClick;\n\nexports.ISelectableToolboxItem = ISelectableToolboxItem;\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The interface for an object that a style can be added to.\n */\n\n'use strict';\n\n/**\n * The interface for an object that a style can be added to.\n * @namespace Blockly.IStyleable\n */\ngoog.module('Blockly.IStyleable');\n\n\n/**\n * Interface for an object that a style can be added to.\n * @interface\n * @alias Blockly.IStyleable\n */\nconst IStyleable = function() {};\n\n/**\n * Adds a style on the toolbox. Usually used to change the cursor.\n * @param {string} style The name of the class to add.\n */\nIStyleable.prototype.addStyle;\n\n/**\n * Removes a style from the toolbox. Usually used to change the cursor.\n * @param {string} style The name of the class to remove.\n */\nIStyleable.prototype.removeStyle;\n\nexports.IStyleable = IStyleable;\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The interface for a toolbox.\n */\n\n'use strict';\n\n/**\n * The interface for a toolbox.\n * @namespace Blockly.IToolbox\n */\ngoog.module('Blockly.IToolbox');\n\n/* eslint-disable-next-line no-unused-vars */\nconst toolbox = goog.requireType('Blockly.utils.toolbox');\n/* eslint-disable-next-line no-unused-vars */\nconst {IFlyout} = goog.requireType('Blockly.IFlyout');\n/* eslint-disable-next-line no-unused-vars */\nconst {IRegistrable} = goog.require('Blockly.IRegistrable');\n/* eslint-disable-next-line no-unused-vars */\nconst {IToolboxItem} = goog.requireType('Blockly.IToolboxItem');\n/* eslint-disable-next-line no-unused-vars */\nconst {WorkspaceSvg} = goog.requireType('Blockly.WorkspaceSvg');\n\n\n/**\n * Interface for a toolbox.\n * @extends {IRegistrable}\n * @interface\n * @alias Blockly.IToolbox\n */\nconst IToolbox = function() {};\n\n/**\n * Initializes the toolbox.\n * @return {void}\n */\nIToolbox.prototype.init;\n\n/**\n * Fills the toolbox with new toolbox items and removes any old contents.\n * @param {!toolbox.ToolboxInfo} toolboxDef Object holding information\n *     for creating a toolbox.\n */\nIToolbox.prototype.render;\n\n/**\n * Gets the width of the toolbox.\n * @return {number} The width of the toolbox.\n */\nIToolbox.prototype.getWidth;\n\n/**\n * Gets the height of the toolbox.\n * @return {number} The width of the toolbox.\n */\nIToolbox.prototype.getHeight;\n\n/**\n * Gets the toolbox flyout.\n * @return {?IFlyout} The toolbox flyout.\n */\nIToolbox.prototype.getFlyout;\n\n/**\n * Gets the workspace for the toolbox.\n * @return {!WorkspaceSvg} The parent workspace for the toolbox.\n */\nIToolbox.prototype.getWorkspace;\n\n/**\n * Gets whether or not the toolbox is horizontal.\n * @return {boolean} True if the toolbox is horizontal, false if the toolbox is\n *     vertical.\n */\nIToolbox.prototype.isHorizontal;\n\n/**\n * Positions the toolbox based on whether it is a horizontal toolbox and whether\n * the workspace is in rtl.\n * @return {void}\n */\nIToolbox.prototype.position;\n\n/**\n * Handles resizing the toolbox when a toolbox item resizes.\n * @return {void}\n */\nIToolbox.prototype.handleToolboxItemResize;\n\n/**\n * Unhighlights any previously selected item.\n * @return {void}\n */\nIToolbox.prototype.clearSelection;\n\n/**\n * Updates the category colours and background colour of selected categories.\n * @return {void}\n */\nIToolbox.prototype.refreshTheme;\n\n/**\n * Updates the flyout's content without closing it.  Should be used in response\n * to a change in one of the dynamic categories, such as variables or\n * procedures.\n * @return {void}\n */\nIToolbox.prototype.refreshSelection;\n\n/**\n * Sets the visibility of the toolbox.\n * @param {boolean} isVisible True if toolbox should be visible.\n */\nIToolbox.prototype.setVisible;\n\n/**\n * Selects the toolbox item by it's position in the list of toolbox items.\n * @param {number} position The position of the item to select.\n * @return {void}\n */\nIToolbox.prototype.selectItemByPosition;\n\n/**\n * Gets the selected item.\n * @return {?IToolboxItem} The selected item, or null if no item is\n *     currently selected.\n */\nIToolbox.prototype.getSelectedItem;\n\n/**\n * Disposes of this toolbox.\n * @return {void}\n */\nIToolbox.prototype.dispose;\n\nexports.IToolbox = IToolbox;\n","/* eslint-disable */\n;(function(root, factory) {\n  if (typeof define === 'function' && define.amd) { // AMD\n    define(['./blocks_compressed'], factory);\n  } else if (typeof exports === 'object') { // Node.js\n    module.exports = factory(require('./blocks_compressed'));\n  } else { // Browser\n    root.BlocklyBlocks = factory(root.BlocklyBlocks);\n  }\n}(this, function(BlocklyBlocks) {\n/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Blockly blocks module; just a wrapper for blocks_compressed.js.\n */\n\nreturn BlocklyBlocks;\n})); \n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Variable blocks for Blockly.\n * @suppress {checkTypes}\n */\n'use strict';\n\ngoog.module('Blockly.libraryBlocks.variablesDynamic');\n\n/* eslint-disable-next-line no-unused-vars */\nconst AbstractEvent = goog.requireType('Blockly.Events.Abstract');\nconst ContextMenu = goog.require('Blockly.ContextMenu');\nconst Extensions = goog.require('Blockly.Extensions');\nconst Variables = goog.require('Blockly.Variables');\nconst xml = goog.require('Blockly.utils.xml');\n/* eslint-disable-next-line no-unused-vars */\nconst {Block} = goog.requireType('Blockly.Block');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockDefinition} = goog.requireType('Blockly.blocks');\nconst {Msg} = goog.require('Blockly.Msg');\nconst {createBlockDefinitionsFromJsonArray, defineBlocks} = goog.require('Blockly.common');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.FieldLabel');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.FieldVariable');\n\n\n/**\n * A dictionary of the block definitions provided by this module.\n * @type {!Object<string, !BlockDefinition>}\n */\nconst blocks = createBlockDefinitionsFromJsonArray([\n  // Block for variable getter.\n  {\n    'type': 'variables_get_dynamic',\n    'message0': '%1',\n    'args0': [{\n      'type': 'field_variable',\n      'name': 'VAR',\n      'variable': '%{BKY_VARIABLES_DEFAULT_NAME}',\n    }],\n    'output': null,\n    'style': 'variable_dynamic_blocks',\n    'helpUrl': '%{BKY_VARIABLES_GET_HELPURL}',\n    'tooltip': '%{BKY_VARIABLES_GET_TOOLTIP}',\n    'extensions': ['contextMenu_variableDynamicSetterGetter'],\n  },\n  // Block for variable setter.\n  {\n    'type': 'variables_set_dynamic',\n    'message0': '%{BKY_VARIABLES_SET}',\n    'args0': [\n      {\n        'type': 'field_variable',\n        'name': 'VAR',\n        'variable': '%{BKY_VARIABLES_DEFAULT_NAME}',\n      },\n      {\n        'type': 'input_value',\n        'name': 'VALUE',\n      },\n    ],\n    'previousStatement': null,\n    'nextStatement': null,\n    'style': 'variable_dynamic_blocks',\n    'tooltip': '%{BKY_VARIABLES_SET_TOOLTIP}',\n    'helpUrl': '%{BKY_VARIABLES_SET_HELPURL}',\n    'extensions': ['contextMenu_variableDynamicSetterGetter'],\n  },\n]);\nexports.blocks = blocks;\n\n/**\n * Mixin to add context menu items to create getter/setter blocks for this\n * setter/getter.\n * Used by blocks 'variables_set_dynamic' and 'variables_get_dynamic'.\n * @mixin\n * @augments Block\n * @readonly\n */\nconst CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN = {\n  /**\n   * Add menu option to create getter/setter block for this setter/getter.\n   * @param {!Array} options List of menu options to add to.\n   * @this {Block}\n   */\n  customContextMenu: function(options) {\n    // Getter blocks have the option to create a setter block, and vice versa.\n    if (!this.isInFlyout) {\n      let oppositeType;\n      let contextMenuMsg;\n      const id = this.getFieldValue('VAR');\n      const variableModel = this.workspace.getVariableById(id);\n      const varType = variableModel.type;\n      if (this.type === 'variables_get_dynamic') {\n        oppositeType = 'variables_set_dynamic';\n        contextMenuMsg = Msg['VARIABLES_GET_CREATE_SET'];\n      } else {\n        oppositeType = 'variables_get_dynamic';\n        contextMenuMsg = Msg['VARIABLES_SET_CREATE_GET'];\n      }\n\n      const option = {enabled: this.workspace.remainingCapacity() > 0};\n      const name = this.getField('VAR').getText();\n      option.text = contextMenuMsg.replace('%1', name);\n      const xmlField = xml.createElement('field');\n      xmlField.setAttribute('name', 'VAR');\n      xmlField.setAttribute('variabletype', varType);\n      xmlField.appendChild(xml.createTextNode(name));\n      const xmlBlock = xml.createElement('block');\n      xmlBlock.setAttribute('type', oppositeType);\n      xmlBlock.appendChild(xmlField);\n      option.callback = ContextMenu.callbackFactory(this, xmlBlock);\n      options.push(option);\n    } else {\n      if (this.type === 'variables_get_dynamic' ||\n          this.type === 'variables_get_reporter_dynamic') {\n        const renameOption = {\n          text: Msg['RENAME_VARIABLE'],\n          enabled: true,\n          callback: renameOptionCallbackFactory(this),\n        };\n        const name = this.getField('VAR').getText();\n        const deleteOption = {\n          text: Msg['DELETE_VARIABLE'].replace('%1', name),\n          enabled: true,\n          callback: deleteOptionCallbackFactory(this),\n        };\n        options.unshift(renameOption);\n        options.unshift(deleteOption);\n      }\n    }\n  },\n  /**\n   * Called whenever anything on the workspace changes.\n   * Set the connection type for this block.\n   * @param {AbstractEvent} _e Change event.\n   * @this {Block}\n   */\n  onchange: function(_e) {\n    const id = this.getFieldValue('VAR');\n    const variableModel = Variables.getVariable(this.workspace, id);\n    if (this.type === 'variables_get_dynamic') {\n      this.outputConnection.setCheck(variableModel.type);\n    } else {\n      this.getInput('VALUE').connection.setCheck(variableModel.type);\n    }\n  },\n};\n\n/**\n * Factory for callbacks for rename variable dropdown menu option\n * associated with a variable getter block.\n * @param {!Block} block The block with the variable to rename.\n * @return {!function()} A function that renames the variable.\n */\nconst renameOptionCallbackFactory = function(block) {\n  return function() {\n    const workspace = block.workspace;\n    const variable = block.getField('VAR').getVariable();\n    Variables.renameVariable(workspace, variable);\n  };\n};\n\n/**\n * Factory for callbacks for delete variable dropdown menu option\n * associated with a variable getter block.\n * @param {!Block} block The block with the variable to delete.\n * @return {!function()} A function that deletes the variable.\n */\nconst deleteOptionCallbackFactory = function(block) {\n  return function() {\n    const workspace = block.workspace;\n    const variable = block.getField('VAR').getVariable();\n    workspace.deleteVariableById(variable.getId());\n    workspace.refreshToolboxSelection();\n  };\n};\n\nExtensions.registerMixin(\n    'contextMenu_variableDynamicSetterGetter',\n    CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN);\n\n// Register provided blocks.\ndefineBlocks(blocks);\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Variable blocks for Blockly.\n * @suppress {checkTypes}\n */\n'use strict';\n\ngoog.module('Blockly.libraryBlocks.variables');\n\nconst ContextMenu = goog.require('Blockly.ContextMenu');\nconst Extensions = goog.require('Blockly.Extensions');\nconst Variables = goog.require('Blockly.Variables');\nconst xmlUtils = goog.require('Blockly.utils.xml');\n/* eslint-disable-next-line no-unused-vars */\nconst {Block} = goog.requireType('Blockly.Block');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockDefinition} = goog.requireType('Blockly.blocks');\nconst {Msg} = goog.require('Blockly.Msg');\nconst {createBlockDefinitionsFromJsonArray, defineBlocks} = goog.require('Blockly.common');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.FieldLabel');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.FieldVariable');\n\n\n/**\n * A dictionary of the block definitions provided by this module.\n * @type {!Object<string, !BlockDefinition>}\n */\nconst blocks = createBlockDefinitionsFromJsonArray([\n  // Block for variable getter.\n  {\n    'type': 'variables_get',\n    'message0': '%1',\n    'args0': [\n      {\n        'type': 'field_variable',\n        'name': 'VAR',\n        'variable': '%{BKY_VARIABLES_DEFAULT_NAME}',\n      },\n    ],\n    'output': null,\n    'style': 'variable_blocks',\n    'helpUrl': '%{BKY_VARIABLES_GET_HELPURL}',\n    'tooltip': '%{BKY_VARIABLES_GET_TOOLTIP}',\n    'extensions': ['contextMenu_variableSetterGetter'],\n  },\n  // Block for variable setter.\n  {\n    'type': 'variables_set',\n    'message0': '%{BKY_VARIABLES_SET}',\n    'args0': [\n      {\n        'type': 'field_variable',\n        'name': 'VAR',\n        'variable': '%{BKY_VARIABLES_DEFAULT_NAME}',\n      },\n      {\n        'type': 'input_value',\n        'name': 'VALUE',\n      },\n    ],\n    'previousStatement': null,\n    'nextStatement': null,\n    'style': 'variable_blocks',\n    'tooltip': '%{BKY_VARIABLES_SET_TOOLTIP}',\n    'helpUrl': '%{BKY_VARIABLES_SET_HELPURL}',\n    'extensions': ['contextMenu_variableSetterGetter'],\n  },\n]);\nexports.blocks = blocks;\n\n\n/**\n * Mixin to add context menu items to create getter/setter blocks for this\n * setter/getter.\n * Used by blocks 'variables_set' and 'variables_get'.\n * @mixin\n * @augments Block\n * @package\n * @readonly\n */\nconst CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN = {\n  /**\n   * Add menu option to create getter/setter block for this setter/getter.\n   * @param {!Array} options List of menu options to add to.\n   * @this {Block}\n   */\n  customContextMenu: function(options) {\n    if (!this.isInFlyout) {\n      let oppositeType;\n      let contextMenuMsg;\n      // Getter blocks have the option to create a setter block, and vice versa.\n      if (this.type === 'variables_get') {\n        oppositeType = 'variables_set';\n        contextMenuMsg = Msg['VARIABLES_GET_CREATE_SET'];\n      } else {\n        oppositeType = 'variables_get';\n        contextMenuMsg = Msg['VARIABLES_SET_CREATE_GET'];\n      }\n\n      const option = {enabled: this.workspace.remainingCapacity() > 0};\n      const name = this.getField('VAR').getText();\n      option.text = contextMenuMsg.replace('%1', name);\n      const xmlField = xmlUtils.createElement('field');\n      xmlField.setAttribute('name', 'VAR');\n      xmlField.appendChild(xmlUtils.createTextNode(name));\n      const xmlBlock = xmlUtils.createElement('block');\n      xmlBlock.setAttribute('type', oppositeType);\n      xmlBlock.appendChild(xmlField);\n      option.callback = ContextMenu.callbackFactory(this, xmlBlock);\n      options.push(option);\n      // Getter blocks have the option to rename or delete that variable.\n    } else {\n      if (this.type === 'variables_get' ||\n          this.type === 'variables_get_reporter') {\n        const renameOption = {\n          text: Msg['RENAME_VARIABLE'],\n          enabled: true,\n          callback: renameOptionCallbackFactory(this),\n        };\n        const name = this.getField('VAR').getText();\n        const deleteOption = {\n          text: Msg['DELETE_VARIABLE'].replace('%1', name),\n          enabled: true,\n          callback: deleteOptionCallbackFactory(this),\n        };\n        options.unshift(renameOption);\n        options.unshift(deleteOption);\n      }\n    }\n  },\n};\n\n/**\n * Factory for callbacks for rename variable dropdown menu option\n * associated with a variable getter block.\n * @param {!Block} block The block with the variable to rename.\n * @return {!function()} A function that renames the variable.\n */\nconst renameOptionCallbackFactory = function(block) {\n  return function() {\n    const workspace = block.workspace;\n    const variable = block.getField('VAR').getVariable();\n    Variables.renameVariable(workspace, variable);\n  };\n};\n\n/**\n * Factory for callbacks for delete variable dropdown menu option\n * associated with a variable getter block.\n * @param {!Block} block The block with the variable to delete.\n * @return {!function()} A function that deletes the variable.\n */\nconst deleteOptionCallbackFactory = function(block) {\n  return function() {\n    const workspace = block.workspace;\n    const variable = block.getField('VAR').getVariable();\n    workspace.deleteVariableById(variable.getId());\n    workspace.refreshToolboxSelection();\n  };\n};\n\nExtensions.registerMixin(\n    'contextMenu_variableSetterGetter',\n    CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN);\n\n// Register provided blocks.\ndefineBlocks(blocks);\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Text blocks for Blockly.\n * @suppress {checkTypes}\n */\n'use strict';\n\ngoog.module('Blockly.libraryBlocks.texts');\n\nconst Extensions = goog.require('Blockly.Extensions');\nconst {Msg} = goog.require('Blockly.Msg');\n/* eslint-disable-next-line no-unused-vars */\nconst xmlUtils = goog.require('Blockly.utils.xml');\nconst {Align} = goog.require('Blockly.Input');\n/* eslint-disable-next-line no-unused-vars */\nconst {Block} = goog.requireType('Blockly.Block');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockDefinition} = goog.requireType('Blockly.blocks');\nconst {ConnectionType} = goog.require('Blockly.ConnectionType');\nconst {FieldDropdown} = goog.require('Blockly.FieldDropdown');\nconst {FieldImage} = goog.require('Blockly.FieldImage');\nconst {FieldTextInput} = goog.require('Blockly.FieldTextInput');\nconst {Mutator} = goog.require('Blockly.Mutator');\n/* eslint-disable-next-line no-unused-vars */\nconst {Workspace} = goog.requireType('Blockly.Workspace');\nconst {createBlockDefinitionsFromJsonArray, defineBlocks} = goog.require('Blockly.common');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.FieldMultilineInput');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.FieldVariable');\n\n\n/**\n * A dictionary of the block definitions provided by this module.\n * @type {!Object<string, !BlockDefinition>}\n */\nconst blocks = createBlockDefinitionsFromJsonArray([\n  // Block for text value\n  {\n    'type': 'text',\n    'message0': '%1',\n    'args0': [{\n      'type': 'field_input',\n      'name': 'TEXT',\n      'text': '',\n    }],\n    'output': 'String',\n    'style': 'text_blocks',\n    'helpUrl': '%{BKY_TEXT_TEXT_HELPURL}',\n    'tooltip': '%{BKY_TEXT_TEXT_TOOLTIP}',\n    'extensions': [\n      'text_quotes',\n      'parent_tooltip_when_inline',\n    ],\n  },\n  {\n    'type': 'text_multiline',\n    'message0': '%1 %2',\n    'args0': [\n      {\n        'type': 'field_image',\n        'src':\n            'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpP' +\n            'U2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0' +\n            'U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjm' +\n            'RIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z88' +\n            '73zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5luj' +\n            'nYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiD' +\n            'MYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYX' +\n            'fwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4z' +\n            'wA5X2Z9AYnQrEAAAAASUVORK5CYII=',\n        'width': 12,\n        'height': 17,\n        'alt': '\\u00B6',\n      },\n      {\n        'type': 'field_multilinetext',\n        'name': 'TEXT',\n        'text': '',\n      },\n    ],\n    'output': 'String',\n    'style': 'text_blocks',\n    'helpUrl': '%{BKY_TEXT_TEXT_HELPURL}',\n    'tooltip': '%{BKY_TEXT_TEXT_TOOLTIP}',\n    'extensions': [\n      'parent_tooltip_when_inline',\n    ],\n  },\n  {\n    'type': 'text_join',\n    'message0': '',\n    'output': 'String',\n    'style': 'text_blocks',\n    'helpUrl': '%{BKY_TEXT_JOIN_HELPURL}',\n    'tooltip': '%{BKY_TEXT_JOIN_TOOLTIP}',\n    'mutator': 'text_join_mutator',\n\n  },\n  {\n    'type': 'text_create_join_container',\n    'message0': '%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2',\n    'args0': [\n      {\n        'type': 'input_dummy',\n      },\n      {\n        'type': 'input_statement',\n        'name': 'STACK',\n      },\n    ],\n    'style': 'text_blocks',\n    'tooltip': '%{BKY_TEXT_CREATE_JOIN_TOOLTIP}',\n    'enableContextMenu': false,\n  },\n  {\n    'type': 'text_create_join_item',\n    'message0': '%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}',\n    'previousStatement': null,\n    'nextStatement': null,\n    'style': 'text_blocks',\n    'tooltip': '%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}',\n    'enableContextMenu': false,\n  },\n  {\n    'type': 'text_append',\n    'message0': '%{BKY_TEXT_APPEND_TITLE}',\n    'args0': [\n      {\n        'type': 'field_variable',\n        'name': 'VAR',\n        'variable': '%{BKY_TEXT_APPEND_VARIABLE}',\n      },\n      {\n        'type': 'input_value',\n        'name': 'TEXT',\n      },\n    ],\n    'previousStatement': null,\n    'nextStatement': null,\n    'style': 'text_blocks',\n    'extensions': [\n      'text_append_tooltip',\n    ],\n  },\n  {\n    'type': 'text_length',\n    'message0': '%{BKY_TEXT_LENGTH_TITLE}',\n    'args0': [\n      {\n        'type': 'input_value',\n        'name': 'VALUE',\n        'check': ['String', 'Array'],\n      },\n    ],\n    'output': 'Number',\n    'style': 'text_blocks',\n    'tooltip': '%{BKY_TEXT_LENGTH_TOOLTIP}',\n    'helpUrl': '%{BKY_TEXT_LENGTH_HELPURL}',\n  },\n  {\n    'type': 'text_isEmpty',\n    'message0': '%{BKY_TEXT_ISEMPTY_TITLE}',\n    'args0': [\n      {\n        'type': 'input_value',\n        'name': 'VALUE',\n        'check': ['String', 'Array'],\n      },\n    ],\n    'output': 'Boolean',\n    'style': 'text_blocks',\n    'tooltip': '%{BKY_TEXT_ISEMPTY_TOOLTIP}',\n    'helpUrl': '%{BKY_TEXT_ISEMPTY_HELPURL}',\n  },\n  {\n    'type': 'text_indexOf',\n    'message0': '%{BKY_TEXT_INDEXOF_TITLE}',\n    'args0': [\n      {\n        'type': 'input_value',\n        'name': 'VALUE',\n        'check': 'String',\n      },\n      {\n        'type': 'field_dropdown',\n        'name': 'END',\n        'options': [\n          [\n            '%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}',\n            'FIRST',\n          ],\n          [\n            '%{BKY_TEXT_INDEXOF_OPERATOR_LAST}',\n            'LAST',\n          ],\n        ],\n      },\n      {\n        'type': 'input_value',\n        'name': 'FIND',\n        'check': 'String',\n      },\n    ],\n    'output': 'Number',\n    'style': 'text_blocks',\n    'helpUrl': '%{BKY_TEXT_INDEXOF_HELPURL}',\n    'inputsInline': true,\n    'extensions': [\n      'text_indexOf_tooltip',\n    ],\n  },\n  {\n    'type': 'text_charAt',\n    'message0': '%{BKY_TEXT_CHARAT_TITLE}',  // \"in text %1 %2\"\n    'args0': [\n      {\n        'type': 'input_value',\n        'name': 'VALUE',\n        'check': 'String',\n      },\n      {\n        'type': 'field_dropdown',\n        'name': 'WHERE',\n        'options': [\n          ['%{BKY_TEXT_CHARAT_FROM_START}', 'FROM_START'],\n          ['%{BKY_TEXT_CHARAT_FROM_END}', 'FROM_END'],\n          ['%{BKY_TEXT_CHARAT_FIRST}', 'FIRST'],\n          ['%{BKY_TEXT_CHARAT_LAST}', 'LAST'],\n          ['%{BKY_TEXT_CHARAT_RANDOM}', 'RANDOM'],\n        ],\n      },\n    ],\n    'output': 'String',\n    'style': 'text_blocks',\n    'helpUrl': '%{BKY_TEXT_CHARAT_HELPURL}',\n    'inputsInline': true,\n    'mutator': 'text_charAt_mutator',\n  },\n]);\nexports.blocks = blocks;\n\nblocks['text_getSubstring'] = {\n  /**\n   * Block for getting substring.\n   * @this {Block}\n   */\n  init: function() {\n    this['WHERE_OPTIONS_1'] = [\n      [Msg['TEXT_GET_SUBSTRING_START_FROM_START'], 'FROM_START'],\n      [Msg['TEXT_GET_SUBSTRING_START_FROM_END'], 'FROM_END'],\n      [Msg['TEXT_GET_SUBSTRING_START_FIRST'], 'FIRST'],\n    ];\n    this['WHERE_OPTIONS_2'] = [\n      [Msg['TEXT_GET_SUBSTRING_END_FROM_START'], 'FROM_START'],\n      [Msg['TEXT_GET_SUBSTRING_END_FROM_END'], 'FROM_END'],\n      [Msg['TEXT_GET_SUBSTRING_END_LAST'], 'LAST'],\n    ];\n    this.setHelpUrl(Msg['TEXT_GET_SUBSTRING_HELPURL']);\n    this.setStyle('text_blocks');\n    this.appendValueInput('STRING').setCheck('String').appendField(\n        Msg['TEXT_GET_SUBSTRING_INPUT_IN_TEXT']);\n    this.appendDummyInput('AT1');\n    this.appendDummyInput('AT2');\n    if (Msg['TEXT_GET_SUBSTRING_TAIL']) {\n      this.appendDummyInput('TAIL').appendField(Msg['TEXT_GET_SUBSTRING_TAIL']);\n    }\n    this.setInputsInline(true);\n    this.setOutput(true, 'String');\n    this.updateAt_(1, true);\n    this.updateAt_(2, true);\n    this.setTooltip(Msg['TEXT_GET_SUBSTRING_TOOLTIP']);\n  },\n  /**\n   * Create XML to represent whether there are 'AT' inputs.\n   * Backwards compatible serialization implementation.\n   * @return {!Element} XML storage element.\n   * @this {Block}\n   */\n  mutationToDom: function() {\n    const container = xmlUtils.createElement('mutation');\n    const isAt1 = this.getInput('AT1').type === ConnectionType.INPUT_VALUE;\n    container.setAttribute('at1', isAt1);\n    const isAt2 = this.getInput('AT2').type === ConnectionType.INPUT_VALUE;\n    container.setAttribute('at2', isAt2);\n    return container;\n  },\n  /**\n   * Parse XML to restore the 'AT' inputs.\n   * Backwards compatible serialization implementation.\n   * @param {!Element} xmlElement XML storage element.\n   * @this {Block}\n   */\n  domToMutation: function(xmlElement) {\n    const isAt1 = (xmlElement.getAttribute('at1') === 'true');\n    const isAt2 = (xmlElement.getAttribute('at2') === 'true');\n    this.updateAt_(1, isAt1);\n    this.updateAt_(2, isAt2);\n  },\n\n  // This block does not need JSO serialization hooks (saveExtraState and\n  // loadExtraState) because the state of this object is already encoded in the\n  // dropdown values.\n  // XML hooks are kept for backwards compatibility.\n\n  /**\n   * Create or delete an input for a numeric index.\n   * This block has two such inputs, independent of each other.\n   * @param {number} n Specify first or second input (1 or 2).\n   * @param {boolean} isAt True if the input should exist.\n   * @private\n   * @this {Block}\n   */\n  updateAt_: function(n, isAt) {\n    // Create or delete an input for the numeric index.\n    // Destroy old 'AT' and 'ORDINAL' inputs.\n    this.removeInput('AT' + n);\n    this.removeInput('ORDINAL' + n, true);\n    // Create either a value 'AT' input or a dummy input.\n    if (isAt) {\n      this.appendValueInput('AT' + n).setCheck('Number');\n      if (Msg['ORDINAL_NUMBER_SUFFIX']) {\n        this.appendDummyInput('ORDINAL' + n)\n            .appendField(Msg['ORDINAL_NUMBER_SUFFIX']);\n      }\n    } else {\n      this.appendDummyInput('AT' + n);\n    }\n    // Move tail, if present, to end of block.\n    if (n === 2 && Msg['TEXT_GET_SUBSTRING_TAIL']) {\n      this.removeInput('TAIL', true);\n      this.appendDummyInput('TAIL').appendField(Msg['TEXT_GET_SUBSTRING_TAIL']);\n    }\n    const menu = new FieldDropdown(\n        this['WHERE_OPTIONS_' + n],\n        /**\n         * @param {*} value The input value.\n         * @this {FieldDropdown}\n         * @returns {null|undefined} Null if the field has been replaced;\n         *     otherwise undefined.\n         */\n        function(value) {\n          const newAt = (value === 'FROM_START') || (value === 'FROM_END');\n          // The 'isAt' variable is available due to this function being a\n          // closure.\n          if (newAt !== isAt) {\n            const block = this.getSourceBlock();\n            block.updateAt_(n, newAt);\n            // This menu has been destroyed and replaced.\n            // Update the replacement.\n            block.setFieldValue(value, 'WHERE' + n);\n            return null;\n          }\n          return undefined;\n        });\n\n    this.getInput('AT' + n).appendField(menu, 'WHERE' + n);\n    if (n === 1) {\n      this.moveInputBefore('AT1', 'AT2');\n      if (this.getInput('ORDINAL1')) {\n        this.moveInputBefore('ORDINAL1', 'AT2');\n      }\n    }\n  },\n};\n\nblocks['text_changeCase'] = {\n  /**\n   * Block for changing capitalization.\n   * @this {Block}\n   */\n  init: function() {\n    const OPERATORS = [\n      [Msg['TEXT_CHANGECASE_OPERATOR_UPPERCASE'], 'UPPERCASE'],\n      [Msg['TEXT_CHANGECASE_OPERATOR_LOWERCASE'], 'LOWERCASE'],\n      [Msg['TEXT_CHANGECASE_OPERATOR_TITLECASE'], 'TITLECASE'],\n    ];\n    this.setHelpUrl(Msg['TEXT_CHANGECASE_HELPURL']);\n    this.setStyle('text_blocks');\n    this.appendValueInput('TEXT').setCheck('String').appendField(\n        new FieldDropdown(OPERATORS), 'CASE');\n    this.setOutput(true, 'String');\n    this.setTooltip(Msg['TEXT_CHANGECASE_TOOLTIP']);\n  },\n};\n\nblocks['text_trim'] = {\n  /**\n   * Block for trimming spaces.\n   * @this {Block}\n   */\n  init: function() {\n    const OPERATORS = [\n      [Msg['TEXT_TRIM_OPERATOR_BOTH'], 'BOTH'],\n      [Msg['TEXT_TRIM_OPERATOR_LEFT'], 'LEFT'],\n      [Msg['TEXT_TRIM_OPERATOR_RIGHT'], 'RIGHT'],\n    ];\n    this.setHelpUrl(Msg['TEXT_TRIM_HELPURL']);\n    this.setStyle('text_blocks');\n    this.appendValueInput('TEXT').setCheck('String').appendField(\n        new FieldDropdown(OPERATORS), 'MODE');\n    this.setOutput(true, 'String');\n    this.setTooltip(Msg['TEXT_TRIM_TOOLTIP']);\n  },\n};\n\nblocks['text_print'] = {\n  /**\n   * Block for print statement.\n   * @this {Block}\n   */\n  init: function() {\n    this.jsonInit({\n      'message0': Msg['TEXT_PRINT_TITLE'],\n      'args0': [\n        {\n          'type': 'input_value',\n          'name': 'TEXT',\n        },\n      ],\n      'previousStatement': null,\n      'nextStatement': null,\n      'style': 'text_blocks',\n      'tooltip': Msg['TEXT_PRINT_TOOLTIP'],\n      'helpUrl': Msg['TEXT_PRINT_HELPURL'],\n    });\n  },\n};\n\n\n/**\n * Common properties for the text_prompt_ext and text_prompt blocks\n * definitions.\n */\nconst TEXT_PROMPT_COMMON = {\n  /**\n   * Modify this block to have the correct output type.\n   * @param {string} newOp Either 'TEXT' or 'NUMBER'.\n   * @private\n   * @this {Block}\n   */\n  updateType_: function(newOp) {\n    this.outputConnection.setCheck(newOp === 'NUMBER' ? 'Number' : 'String');\n  },\n  /**\n   * Create XML to represent the output type.\n   * Backwards compatible serialization implementation.\n   * @return {!Element} XML storage element.\n   * @this {Block}\n   */\n  mutationToDom: function() {\n    const container = xmlUtils.createElement('mutation');\n    container.setAttribute('type', this.getFieldValue('TYPE'));\n    return container;\n  },\n  /**\n   * Parse XML to restore the output type.\n   * Backwards compatible serialization implementation.\n   * @param {!Element} xmlElement XML storage element.\n   * @this {Block}\n   */\n  domToMutation: function(xmlElement) {\n    this.updateType_(xmlElement.getAttribute('type'));\n  },\n};\n\nblocks['text_prompt_ext'] = {\n  ...TEXT_PROMPT_COMMON,\n  /**\n   * Block for prompt function (external message).\n   * @this {Block}\n   */\n  init: function() {\n    const TYPES = [\n      [Msg['TEXT_PROMPT_TYPE_TEXT'], 'TEXT'],\n      [Msg['TEXT_PROMPT_TYPE_NUMBER'], 'NUMBER'],\n    ];\n    this.setHelpUrl(Msg['TEXT_PROMPT_HELPURL']);\n    this.setStyle('text_blocks');\n    // Assign 'this' to a variable for use in the closures below.\n    const thisBlock = this;\n    const dropdown = new FieldDropdown(TYPES, function(newOp) {\n      thisBlock.updateType_(newOp);\n    });\n    this.appendValueInput('TEXT').appendField(dropdown, 'TYPE');\n    this.setOutput(true, 'String');\n    this.setTooltip(function() {\n      return (thisBlock.getFieldValue('TYPE') === 'TEXT') ?\n          Msg['TEXT_PROMPT_TOOLTIP_TEXT'] :\n          Msg['TEXT_PROMPT_TOOLTIP_NUMBER'];\n    });\n  },\n\n  // This block does not need JSO serialization hooks (saveExtraState and\n  // loadExtraState) because the state of this object is already encoded in the\n  // dropdown values.\n  // XML hooks are kept for backwards compatibility.\n};\n\nblocks['text_prompt'] = {\n  ...TEXT_PROMPT_COMMON,\n  /**\n   * Block for prompt function (internal message).\n   * The 'text_prompt_ext' block is preferred as it is more flexible.\n   * @this {Block}\n   */\n  init: function() {\n    this.mixin(QUOTE_IMAGE_MIXIN);\n    const TYPES = [\n      [Msg['TEXT_PROMPT_TYPE_TEXT'], 'TEXT'],\n      [Msg['TEXT_PROMPT_TYPE_NUMBER'], 'NUMBER'],\n    ];\n\n    // Assign 'this' to a variable for use in the closures below.\n    const thisBlock = this;\n    this.setHelpUrl(Msg['TEXT_PROMPT_HELPURL']);\n    this.setStyle('text_blocks');\n    const dropdown = new FieldDropdown(TYPES, function(newOp) {\n      thisBlock.updateType_(newOp);\n    });\n    this.appendDummyInput()\n        .appendField(dropdown, 'TYPE')\n        .appendField(this.newQuote_(true))\n        .appendField(new FieldTextInput(''), 'TEXT')\n        .appendField(this.newQuote_(false));\n    this.setOutput(true, 'String');\n    this.setTooltip(function() {\n      return (thisBlock.getFieldValue('TYPE') === 'TEXT') ?\n          Msg['TEXT_PROMPT_TOOLTIP_TEXT'] :\n          Msg['TEXT_PROMPT_TOOLTIP_NUMBER'];\n    });\n  },\n};\n\nblocks['text_count'] = {\n  /**\n   * Block for counting how many times one string appears within another string.\n   * @this {Block}\n   */\n  init: function() {\n    this.jsonInit({\n      'message0': Msg['TEXT_COUNT_MESSAGE0'],\n      'args0': [\n        {\n          'type': 'input_value',\n          'name': 'SUB',\n          'check': 'String',\n        },\n        {\n          'type': 'input_value',\n          'name': 'TEXT',\n          'check': 'String',\n        },\n      ],\n      'output': 'Number',\n      'inputsInline': true,\n      'style': 'text_blocks',\n      'tooltip': Msg['TEXT_COUNT_TOOLTIP'],\n      'helpUrl': Msg['TEXT_COUNT_HELPURL'],\n    });\n  },\n};\n\nblocks['text_replace'] = {\n  /**\n   * Block for replacing one string with another in the text.\n   * @this {Block}\n   */\n  init: function() {\n    this.jsonInit({\n      'message0': Msg['TEXT_REPLACE_MESSAGE0'],\n      'args0': [\n        {\n          'type': 'input_value',\n          'name': 'FROM',\n          'check': 'String',\n        },\n        {\n          'type': 'input_value',\n          'name': 'TO',\n          'check': 'String',\n        },\n        {\n          'type': 'input_value',\n          'name': 'TEXT',\n          'check': 'String',\n        },\n      ],\n      'output': 'String',\n      'inputsInline': true,\n      'style': 'text_blocks',\n      'tooltip': Msg['TEXT_REPLACE_TOOLTIP'],\n      'helpUrl': Msg['TEXT_REPLACE_HELPURL'],\n    });\n  },\n};\n\nblocks['text_reverse'] = {\n  /**\n   * Block for reversing a string.\n   * @this {Block}\n   */\n  init: function() {\n    this.jsonInit({\n      'message0': Msg['TEXT_REVERSE_MESSAGE0'],\n      'args0': [\n        {\n          'type': 'input_value',\n          'name': 'TEXT',\n          'check': 'String',\n        },\n      ],\n      'output': 'String',\n      'inputsInline': true,\n      'style': 'text_blocks',\n      'tooltip': Msg['TEXT_REVERSE_TOOLTIP'],\n      'helpUrl': Msg['TEXT_REVERSE_HELPURL'],\n    });\n  },\n};\n\n/**\n * @mixin\n * @package\n * @readonly\n */\nconst QUOTE_IMAGE_MIXIN = {\n  /**\n   * Image data URI of an LTR opening double quote (same as RTL closing double\n   * quote).\n   * @readonly\n   */\n  QUOTE_IMAGE_LEFT_DATAURI:\n      'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAA' +\n      'n0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY' +\n      '1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1' +\n      'HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMf' +\n      'z9AylsaRRgGzvZAAAAAElFTkSuQmCC',\n  /**\n   * Image data URI of an LTR closing double quote (same as RTL opening double\n   * quote).\n   * @readonly\n   */\n  QUOTE_IMAGE_RIGHT_DATAURI:\n      'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAA' +\n      'qUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhg' +\n      'gONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvB' +\n      'O3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5Aos' +\n      'lLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==',\n  /**\n   * Pixel width of QUOTE_IMAGE_LEFT_DATAURI and QUOTE_IMAGE_RIGHT_DATAURI.\n   * @readonly\n   */\n  QUOTE_IMAGE_WIDTH: 12,\n  /**\n   * Pixel height of QUOTE_IMAGE_LEFT_DATAURI and QUOTE_IMAGE_RIGHT_DATAURI.\n   * @readonly\n   */\n  QUOTE_IMAGE_HEIGHT: 12,\n\n  /**\n   * Inserts appropriate quote images before and after the named field.\n   * @param {string} fieldName The name of the field to wrap with quotes.\n   * @this {Block}\n   */\n  quoteField_: function(fieldName) {\n    for (let i = 0, input; (input = this.inputList[i]); i++) {\n      for (let j = 0, field; (field = input.fieldRow[j]); j++) {\n        if (fieldName === field.name) {\n          input.insertFieldAt(j, this.newQuote_(true));\n          input.insertFieldAt(j + 2, this.newQuote_(false));\n          return;\n        }\n      }\n    }\n    console.warn(\n        'field named \"' + fieldName + '\" not found in ' + this.toDevString());\n  },\n\n  /**\n   * A helper function that generates a FieldImage of an opening or\n   * closing double quote. The selected quote will be adapted for RTL blocks.\n   * @param {boolean} open If the image should be open quote (“ in LTR).\n   *                       Otherwise, a closing quote is used (” in LTR).\n   * @return {!FieldImage} The new field.\n   * @this {Block}\n   */\n  newQuote_: function(open) {\n    const isLeft = this.RTL ? !open : open;\n    const dataUri =\n        isLeft ? this.QUOTE_IMAGE_LEFT_DATAURI : this.QUOTE_IMAGE_RIGHT_DATAURI;\n    return new FieldImage(\n        dataUri, this.QUOTE_IMAGE_WIDTH, this.QUOTE_IMAGE_HEIGHT,\n        isLeft ? '\\u201C' : '\\u201D');\n  },\n};\n\n/**\n * Wraps TEXT field with images of double quote characters.\n * @this {Block}\n */\nconst TEXT_QUOTES_EXTENSION = function() {\n  this.mixin(QUOTE_IMAGE_MIXIN);\n  this.quoteField_('TEXT');\n};\n\n/**\n * Mixin for mutator functions in the 'text_join_mutator' extension.\n * @mixin\n * @augments Block\n * @package\n */\nconst TEXT_JOIN_MUTATOR_MIXIN = {\n  /**\n   * Create XML to represent number of text inputs.\n   * Backwards compatible serialization implementation.\n   * @return {!Element} XML storage element.\n   * @this {Block}\n   */\n  mutationToDom: function() {\n    const container = xmlUtils.createElement('mutation');\n    container.setAttribute('items', this.itemCount_);\n    return container;\n  },\n  /**\n   * Parse XML to restore the text inputs.\n   * Backwards compatible serialization implementation.\n   * @param {!Element} xmlElement XML storage element.\n   * @this {Block}\n   */\n  domToMutation: function(xmlElement) {\n    this.itemCount_ = parseInt(xmlElement.getAttribute('items'), 10);\n    this.updateShape_();\n  },\n  /**\n   * Returns the state of this block as a JSON serializable object.\n   * @return {{itemCount: number}} The state of this block, ie the item count.\n   */\n  saveExtraState: function() {\n    return {\n      'itemCount': this.itemCount_,\n    };\n  },\n  /**\n   * Applies the given state to this block.\n   * @param {*} state The state to apply to this block, ie the item count.\n   */\n  loadExtraState: function(state) {\n    this.itemCount_ = state['itemCount'];\n    this.updateShape_();\n  },\n  /**\n   * Populate the mutator's dialog with this block's components.\n   * @param {!Workspace} workspace Mutator's workspace.\n   * @return {!Block} Root block in mutator.\n   * @this {Block}\n   */\n  decompose: function(workspace) {\n    const containerBlock = workspace.newBlock('text_create_join_container');\n    containerBlock.initSvg();\n    let connection = containerBlock.getInput('STACK').connection;\n    for (let i = 0; i < this.itemCount_; i++) {\n      const itemBlock = workspace.newBlock('text_create_join_item');\n      itemBlock.initSvg();\n      connection.connect(itemBlock.previousConnection);\n      connection = itemBlock.nextConnection;\n    }\n    return containerBlock;\n  },\n  /**\n   * Reconfigure this block based on the mutator dialog's components.\n   * @param {!Block} containerBlock Root block in mutator.\n   * @this {Block}\n   */\n  compose: function(containerBlock) {\n    let itemBlock = containerBlock.getInputTargetBlock('STACK');\n    // Count number of inputs.\n    const connections = [];\n    while (itemBlock && !itemBlock.isInsertionMarker()) {\n      connections.push(itemBlock.valueConnection_);\n      itemBlock =\n          itemBlock.nextConnection && itemBlock.nextConnection.targetBlock();\n    }\n    // Disconnect any children that don't belong.\n    for (let i = 0; i < this.itemCount_; i++) {\n      const connection = this.getInput('ADD' + i).connection.targetConnection;\n      if (connection && connections.indexOf(connection) === -1) {\n        connection.disconnect();\n      }\n    }\n    this.itemCount_ = connections.length;\n    this.updateShape_();\n    // Reconnect any child blocks.\n    for (let i = 0; i < this.itemCount_; i++) {\n      Mutator.reconnect(connections[i], this, 'ADD' + i);\n    }\n  },\n  /**\n   * Store pointers to any connected child blocks.\n   * @param {!Block} containerBlock Root block in mutator.\n   * @this {Block}\n   */\n  saveConnections: function(containerBlock) {\n    let itemBlock = containerBlock.getInputTargetBlock('STACK');\n    let i = 0;\n    while (itemBlock) {\n      const input = this.getInput('ADD' + i);\n      itemBlock.valueConnection_ = input && input.connection.targetConnection;\n      itemBlock =\n          itemBlock.nextConnection && itemBlock.nextConnection.targetBlock();\n      i++;\n    }\n  },\n  /**\n   * Modify this block to have the correct number of inputs.\n   * @private\n   * @this {Block}\n   */\n  updateShape_: function() {\n    if (this.itemCount_ && this.getInput('EMPTY')) {\n      this.removeInput('EMPTY');\n    } else if (!this.itemCount_ && !this.getInput('EMPTY')) {\n      this.appendDummyInput('EMPTY')\n          .appendField(this.newQuote_(true))\n          .appendField(this.newQuote_(false));\n    }\n    // Add new inputs.\n    for (let i = 0; i < this.itemCount_; i++) {\n      if (!this.getInput('ADD' + i)) {\n        const input = this.appendValueInput('ADD' + i).setAlign(Align.RIGHT);\n        if (i === 0) {\n          input.appendField(Msg['TEXT_JOIN_TITLE_CREATEWITH']);\n        }\n      }\n    }\n    // Remove deleted inputs.\n    for (let i = this.itemCount_; this.getInput('ADD' + i); i++) {\n      this.removeInput('ADD' + i);\n    }\n  },\n};\n\n/**\n * Performs final setup of a text_join block.\n * @this {Block}\n */\nconst TEXT_JOIN_EXTENSION = function() {\n  // Add the quote mixin for the itemCount_ = 0 case.\n  this.mixin(QUOTE_IMAGE_MIXIN);\n  // Initialize the mutator values.\n  this.itemCount_ = 2;\n  this.updateShape_();\n  // Configure the mutator UI.\n  this.setMutator(new Mutator(['text_create_join_item']));\n};\n\n// Update the tooltip of 'text_append' block to reference the variable.\nExtensions.register(\n    'text_append_tooltip',\n    Extensions.buildTooltipWithFieldText('%{BKY_TEXT_APPEND_TOOLTIP}', 'VAR'));\n\n/**\n * Update the tooltip of 'text_append' block to reference the variable.\n * @this {Block}\n */\nconst TEXT_INDEXOF_TOOLTIP_EXTENSION = function() {\n  // Assign 'this' to a variable for use in the tooltip closure below.\n  const thisBlock = this;\n  this.setTooltip(function() {\n    return Msg['TEXT_INDEXOF_TOOLTIP'].replace(\n        '%1', thisBlock.workspace.options.oneBasedIndex ? '0' : '-1');\n  });\n};\n\n/**\n * Mixin for mutator functions in the 'text_charAt_mutator' extension.\n * @mixin\n * @augments Block\n * @package\n */\nconst TEXT_CHARAT_MUTATOR_MIXIN = {\n  /**\n   * Create XML to represent whether there is an 'AT' input.\n   * Backwards compatible serialization implementation.\n   * @return {!Element} XML storage element.\n   * @this {Block}\n   */\n  mutationToDom: function() {\n    const container = xmlUtils.createElement('mutation');\n    container.setAttribute('at', !!this.isAt_);\n    return container;\n  },\n  /**\n   * Parse XML to restore the 'AT' input.\n   * Backwards compatible serialization implementation.\n   * @param {!Element} xmlElement XML storage element.\n   * @this {Block}\n   */\n  domToMutation: function(xmlElement) {\n    // Note: Until January 2013 this block did not have mutations,\n    // so 'at' defaults to true.\n    const isAt = (xmlElement.getAttribute('at') !== 'false');\n    this.updateAt_(isAt);\n  },\n\n  // This block does not need JSO serialization hooks (saveExtraState and\n  // loadExtraState) because the state of this object is already encoded in the\n  // dropdown values.\n  // XML hooks are kept for backwards compatibility.\n\n  /**\n   * Create or delete an input for the numeric index.\n   * @param {boolean} isAt True if the input should exist.\n   * @private\n   * @this {Block}\n   */\n  updateAt_: function(isAt) {\n    // Destroy old 'AT' and 'ORDINAL' inputs.\n    this.removeInput('AT', true);\n    this.removeInput('ORDINAL', true);\n    // Create either a value 'AT' input or a dummy input.\n    if (isAt) {\n      this.appendValueInput('AT').setCheck('Number');\n      if (Msg['ORDINAL_NUMBER_SUFFIX']) {\n        this.appendDummyInput('ORDINAL').appendField(\n            Msg['ORDINAL_NUMBER_SUFFIX']);\n      }\n    }\n    if (Msg['TEXT_CHARAT_TAIL']) {\n      this.removeInput('TAIL', true);\n      this.appendDummyInput('TAIL').appendField(Msg['TEXT_CHARAT_TAIL']);\n    }\n\n    this.isAt_ = isAt;\n  },\n};\n\n/**\n * Does the initial mutator update of text_charAt and adds the tooltip\n * @this {Block}\n */\nconst TEXT_CHARAT_EXTENSION = function() {\n  const dropdown = this.getField('WHERE');\n  dropdown.setValidator(\n      /**\n       * @param {*} value The input value.\n       * @this {FieldDropdown}\n       */\n      function(value) {\n        const newAt = (value === 'FROM_START') || (value === 'FROM_END');\n        if (newAt !== this.isAt_) {\n          const block = this.getSourceBlock();\n          block.updateAt_(newAt);\n        }\n      });\n  this.updateAt_(true);\n  // Assign 'this' to a variable for use in the tooltip closure below.\n  const thisBlock = this;\n  this.setTooltip(function() {\n    const where = thisBlock.getFieldValue('WHERE');\n    let tooltip = Msg['TEXT_CHARAT_TOOLTIP'];\n    if (where === 'FROM_START' || where === 'FROM_END') {\n      const msg = (where === 'FROM_START') ?\n          Msg['LISTS_INDEX_FROM_START_TOOLTIP'] :\n          Msg['LISTS_INDEX_FROM_END_TOOLTIP'];\n      if (msg) {\n        tooltip += '  ' +\n            msg.replace(\n                '%1', thisBlock.workspace.options.oneBasedIndex ? '#1' : '#0');\n      }\n    }\n    return tooltip;\n  });\n};\n\nExtensions.register('text_indexOf_tooltip', TEXT_INDEXOF_TOOLTIP_EXTENSION);\n\nExtensions.register('text_quotes', TEXT_QUOTES_EXTENSION);\n\nExtensions.registerMutator(\n    'text_join_mutator', TEXT_JOIN_MUTATOR_MIXIN, TEXT_JOIN_EXTENSION);\n\nExtensions.registerMutator(\n    'text_charAt_mutator', TEXT_CHARAT_MUTATOR_MIXIN, TEXT_CHARAT_EXTENSION);\n\n// Register provided blocks.\ndefineBlocks(blocks);\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Procedure blocks for Blockly.\n * @suppress {checkTypes|visibility}\n */\n'use strict';\n\ngoog.module('Blockly.libraryBlocks.procedures');\n\n/* eslint-disable-next-line no-unused-vars */\nconst AbstractEvent = goog.requireType('Blockly.Events.Abstract');\nconst ContextMenu = goog.require('Blockly.ContextMenu');\nconst Events = goog.require('Blockly.Events');\nconst Procedures = goog.require('Blockly.Procedures');\nconst Variables = goog.require('Blockly.Variables');\nconst Xml = goog.require('Blockly.Xml');\nconst xmlUtils = goog.require('Blockly.utils.xml');\nconst {Align} = goog.require('Blockly.Input');\n/* eslint-disable-next-line no-unused-vars */\nconst {Block} = goog.requireType('Blockly.Block');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockDefinition} = goog.requireType('Blockly.blocks');\nconst {config} = goog.require('Blockly.config');\n/* eslint-disable-next-line no-unused-vars */\nconst {FieldCheckbox} = goog.require('Blockly.FieldCheckbox');\nconst {FieldLabel} = goog.require('Blockly.FieldLabel');\nconst {FieldTextInput} = goog.require('Blockly.FieldTextInput');\nconst {Msg} = goog.require('Blockly.Msg');\nconst {Mutator} = goog.require('Blockly.Mutator');\nconst {Names} = goog.require('Blockly.Names');\n/* eslint-disable-next-line no-unused-vars */\nconst {VariableModel} = goog.requireType('Blockly.VariableModel');\n/* eslint-disable-next-line no-unused-vars */\nconst {Workspace} = goog.requireType('Blockly.Workspace');\nconst {defineBlocks} = goog.require('Blockly.common');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.Comment');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.Warning');\n\n\n/**\n * A dictionary of the block definitions provided by this module.\n * @type {!Object<string, !BlockDefinition>}\n */\nconst blocks = {};\nexports.blocks = blocks;\n\n/**\n * Common properties for the procedure_defnoreturn and\n * procedure_defreturn blocks.\n */\nconst PROCEDURE_DEF_COMMON = {\n  /**\n   * Add or remove the statement block from this function definition.\n   * @param {boolean} hasStatements True if a statement block is needed.\n   * @this {Block}\n   */\n  setStatements_: function(hasStatements) {\n    if (this.hasStatements_ === hasStatements) {\n      return;\n    }\n    if (hasStatements) {\n      this.appendStatementInput('STACK').appendField(\n          Msg['PROCEDURES_DEFNORETURN_DO']);\n      if (this.getInput('RETURN')) {\n        this.moveInputBefore('STACK', 'RETURN');\n      }\n    } else {\n      this.removeInput('STACK', true);\n    }\n    this.hasStatements_ = hasStatements;\n  },\n  /**\n   * Update the display of parameters for this procedure definition block.\n   * @private\n   * @this {Block}\n   */\n  updateParams_: function() {\n    // Merge the arguments into a human-readable list.\n    let paramString = '';\n    if (this.arguments_.length) {\n      paramString =\n          Msg['PROCEDURES_BEFORE_PARAMS'] + ' ' + this.arguments_.join(', ');\n    }\n    // The params field is deterministic based on the mutation,\n    // no need to fire a change event.\n    Events.disable();\n    try {\n      this.setFieldValue(paramString, 'PARAMS');\n    } finally {\n      Events.enable();\n    }\n  },\n  /**\n   * Create XML to represent the argument inputs.\n   * Backwards compatible serialization implementation.\n   * @param {boolean=} opt_paramIds If true include the IDs of the parameter\n   *     quarks.  Used by Procedures.mutateCallers for reconnection.\n   * @return {!Element} XML storage element.\n   * @this {Block}\n   */\n  mutationToDom: function(opt_paramIds) {\n    const container = xmlUtils.createElement('mutation');\n    if (opt_paramIds) {\n      container.setAttribute('name', this.getFieldValue('NAME'));\n    }\n    for (let i = 0; i < this.argumentVarModels_.length; i++) {\n      const parameter = xmlUtils.createElement('arg');\n      const argModel = this.argumentVarModels_[i];\n      parameter.setAttribute('name', argModel.name);\n      parameter.setAttribute('varid', argModel.getId());\n      if (opt_paramIds && this.paramIds_) {\n        parameter.setAttribute('paramId', this.paramIds_[i]);\n      }\n      container.appendChild(parameter);\n    }\n\n    // Save whether the statement input is visible.\n    if (!this.hasStatements_) {\n      container.setAttribute('statements', 'false');\n    }\n    return container;\n  },\n  /**\n   * Parse XML to restore the argument inputs.\n   * Backwards compatible serialization implementation.\n   * @param {!Element} xmlElement XML storage element.\n   * @this {Block}\n   */\n  domToMutation: function(xmlElement) {\n    this.arguments_ = [];\n    this.argumentVarModels_ = [];\n    for (let i = 0, childNode; (childNode = xmlElement.childNodes[i]); i++) {\n      if (childNode.nodeName.toLowerCase() === 'arg') {\n        const varName = childNode.getAttribute('name');\n        const varId =\n            childNode.getAttribute('varid') || childNode.getAttribute('varId');\n        this.arguments_.push(varName);\n        const variable = Variables.getOrCreateVariablePackage(\n            this.workspace, varId, varName, '');\n        if (variable !== null) {\n          this.argumentVarModels_.push(variable);\n        } else {\n          console.log(\n              'Failed to create a variable with name ' + varName +\n              ', ignoring.');\n        }\n      }\n    }\n    this.updateParams_();\n    Procedures.mutateCallers(this);\n\n    // Show or hide the statement input.\n    this.setStatements_(xmlElement.getAttribute('statements') !== 'false');\n  },\n  /**\n   * Returns the state of this block as a JSON serializable object.\n   * @return {?{params: (!Array<{name: string, id: string}>|undefined),\n   *     hasStatements: (boolean|undefined)}} The state of this block, eg the\n   *     parameters and statements.\n   */\n  saveExtraState: function() {\n    if (!this.argumentVarModels_.length && this.hasStatements_) {\n      return null;\n    }\n    const state = Object.create(null);\n    if (this.argumentVarModels_.length) {\n      state['params'] = [];\n      for (let i = 0; i < this.argumentVarModels_.length; i++) {\n        state['params'].push({\n          // We don't need to serialize the name, but just in case we decide\n          // to separate params from variables.\n          'name': this.argumentVarModels_[i].name,\n          'id': this.argumentVarModels_[i].getId(),\n        });\n      }\n    }\n    if (!this.hasStatements_) {\n      state['hasStatements'] = false;\n    }\n    return state;\n  },\n  /**\n   * Applies the given state to this block.\n   * @param {*} state The state to apply to this block, eg the parameters and\n   *     statements.\n   */\n  loadExtraState: function(state) {\n    this.arguments_ = [];\n    this.argumentVarModels_ = [];\n    if (state['params']) {\n      for (let i = 0; i < state['params'].length; i++) {\n        const param = state['params'][i];\n        const variable = Variables.getOrCreateVariablePackage(\n            this.workspace, param['id'], param['name'], '');\n        this.arguments_.push(variable.name);\n        this.argumentVarModels_.push(variable);\n      }\n    }\n    this.updateParams_();\n    Procedures.mutateCallers(this);\n    this.setStatements_(state['hasStatements'] === false ? false : true);\n  },\n  /**\n   * Populate the mutator's dialog with this block's components.\n   * @param {!Workspace} workspace Mutator's workspace.\n   * @return {!Block} Root block in mutator.\n   * @this {Block}\n   */\n  decompose: function(workspace) {\n    /*\n     * Creates the following XML:\n     * <block type=\"procedures_mutatorcontainer\">\n     *   <statement name=\"STACK\">\n     *     <block type=\"procedures_mutatorarg\">\n     *       <field name=\"NAME\">arg1_name</field>\n     *       <next>etc...</next>\n     *     </block>\n     *   </statement>\n     * </block>\n     */\n\n    const containerBlockNode = xmlUtils.createElement('block');\n    containerBlockNode.setAttribute('type', 'procedures_mutatorcontainer');\n    const statementNode = xmlUtils.createElement('statement');\n    statementNode.setAttribute('name', 'STACK');\n    containerBlockNode.appendChild(statementNode);\n\n    let node = statementNode;\n    for (let i = 0; i < this.arguments_.length; i++) {\n      const argBlockNode = xmlUtils.createElement('block');\n      argBlockNode.setAttribute('type', 'procedures_mutatorarg');\n      const fieldNode = xmlUtils.createElement('field');\n      fieldNode.setAttribute('name', 'NAME');\n      const argumentName = xmlUtils.createTextNode(this.arguments_[i]);\n      fieldNode.appendChild(argumentName);\n      argBlockNode.appendChild(fieldNode);\n      const nextNode = xmlUtils.createElement('next');\n      argBlockNode.appendChild(nextNode);\n\n      node.appendChild(argBlockNode);\n      node = nextNode;\n    }\n\n    const containerBlock = Xml.domToBlock(containerBlockNode, workspace);\n\n    if (this.type === 'procedures_defreturn') {\n      containerBlock.setFieldValue(this.hasStatements_, 'STATEMENTS');\n    } else {\n      containerBlock.removeInput('STATEMENT_INPUT');\n    }\n\n    // Initialize procedure's callers with blank IDs.\n    Procedures.mutateCallers(this);\n    return containerBlock;\n  },\n  /**\n   * Reconfigure this block based on the mutator dialog's components.\n   * @param {!Block} containerBlock Root block in mutator.\n   * @this {Block}\n   */\n  compose: function(containerBlock) {\n    // Parameter list.\n    this.arguments_ = [];\n    this.paramIds_ = [];\n    this.argumentVarModels_ = [];\n    let paramBlock = containerBlock.getInputTargetBlock('STACK');\n    while (paramBlock && !paramBlock.isInsertionMarker()) {\n      const varName = paramBlock.getFieldValue('NAME');\n      this.arguments_.push(varName);\n      const variable = this.workspace.getVariable(varName, '');\n      this.argumentVarModels_.push(variable);\n\n      this.paramIds_.push(paramBlock.id);\n      paramBlock =\n          paramBlock.nextConnection && paramBlock.nextConnection.targetBlock();\n    }\n    this.updateParams_();\n    Procedures.mutateCallers(this);\n\n    // Show/hide the statement input.\n    let hasStatements = containerBlock.getFieldValue('STATEMENTS');\n    if (hasStatements !== null) {\n      hasStatements = hasStatements === 'TRUE';\n      if (this.hasStatements_ !== hasStatements) {\n        if (hasStatements) {\n          this.setStatements_(true);\n          // Restore the stack, if one was saved.\n          Mutator.reconnect(this.statementConnection_, this, 'STACK');\n          this.statementConnection_ = null;\n        } else {\n          // Save the stack, then disconnect it.\n          const stackConnection = this.getInput('STACK').connection;\n          this.statementConnection_ = stackConnection.targetConnection;\n          if (this.statementConnection_) {\n            const stackBlock = stackConnection.targetBlock();\n            stackBlock.unplug();\n            stackBlock.bumpNeighbours();\n          }\n          this.setStatements_(false);\n        }\n      }\n    }\n  },\n  /**\n   * Return all variables referenced by this block.\n   * @return {!Array<string>} List of variable names.\n   * @this {Block}\n   */\n  getVars: function() {\n    return this.arguments_;\n  },\n  /**\n   * Return all variables referenced by this block.\n   * @return {!Array<!VariableModel>} List of variable models.\n   * @this {Block}\n   */\n  getVarModels: function() {\n    return this.argumentVarModels_;\n  },\n  /**\n   * Notification that a variable is renaming.\n   * If the ID matches one of this block's variables, rename it.\n   * @param {string} oldId ID of variable to rename.\n   * @param {string} newId ID of new variable.  May be the same as oldId, but\n   *     with an updated name.  Guaranteed to be the same type as the old\n   *     variable.\n   * @override\n   * @this {Block}\n   */\n  renameVarById: function(oldId, newId) {\n    const oldVariable = this.workspace.getVariableById(oldId);\n    if (oldVariable.type !== '') {\n      // Procedure arguments always have the empty type.\n      return;\n    }\n    const oldName = oldVariable.name;\n    const newVar = this.workspace.getVariableById(newId);\n\n    let change = false;\n    for (let i = 0; i < this.argumentVarModels_.length; i++) {\n      if (this.argumentVarModels_[i].getId() === oldId) {\n        this.arguments_[i] = newVar.name;\n        this.argumentVarModels_[i] = newVar;\n        change = true;\n      }\n    }\n    if (change) {\n      this.displayRenamedVar_(oldName, newVar.name);\n      Procedures.mutateCallers(this);\n    }\n  },\n  /**\n   * Notification that a variable is renaming but keeping the same ID.  If the\n   * variable is in use on this block, rerender to show the new name.\n   * @param {!VariableModel} variable The variable being renamed.\n   * @package\n   * @override\n   * @this {Block}\n   */\n  updateVarName: function(variable) {\n    const newName = variable.name;\n    let change = false;\n    let oldName;\n    for (let i = 0; i < this.argumentVarModels_.length; i++) {\n      if (this.argumentVarModels_[i].getId() === variable.getId()) {\n        oldName = this.arguments_[i];\n        this.arguments_[i] = newName;\n        change = true;\n      }\n    }\n    if (change) {\n      this.displayRenamedVar_(oldName, newName);\n      Procedures.mutateCallers(this);\n    }\n  },\n  /**\n   * Update the display to reflect a newly renamed argument.\n   * @param {string} oldName The old display name of the argument.\n   * @param {string} newName The new display name of the argument.\n   * @private\n   * @this {Block}\n   */\n  displayRenamedVar_: function(oldName, newName) {\n    this.updateParams_();\n    // Update the mutator's variables if the mutator is open.\n    if (this.mutator && this.mutator.isVisible()) {\n      const blocks = this.mutator.workspace_.getAllBlocks(false);\n      for (let i = 0, block; (block = blocks[i]); i++) {\n        if (block.type === 'procedures_mutatorarg' &&\n            Names.equals(oldName, block.getFieldValue('NAME'))) {\n          block.setFieldValue(newName, 'NAME');\n        }\n      }\n    }\n  },\n  /**\n   * Add custom menu options to this block's context menu.\n   * @param {!Array} options List of menu options to add to.\n   * @this {Block}\n   */\n  customContextMenu: function(options) {\n    if (this.isInFlyout) {\n      return;\n    }\n    // Add option to create caller.\n    const option = {enabled: true};\n    const name = this.getFieldValue('NAME');\n    option.text = Msg['PROCEDURES_CREATE_DO'].replace('%1', name);\n    const xmlMutation = xmlUtils.createElement('mutation');\n    xmlMutation.setAttribute('name', name);\n    for (let i = 0; i < this.arguments_.length; i++) {\n      const xmlArg = xmlUtils.createElement('arg');\n      xmlArg.setAttribute('name', this.arguments_[i]);\n      xmlMutation.appendChild(xmlArg);\n    }\n    const xmlBlock = xmlUtils.createElement('block');\n    xmlBlock.setAttribute('type', this.callType_);\n    xmlBlock.appendChild(xmlMutation);\n    option.callback = ContextMenu.callbackFactory(this, xmlBlock);\n    options.push(option);\n\n    // Add options to create getters for each parameter.\n    if (!this.isCollapsed()) {\n      for (let i = 0; i < this.argumentVarModels_.length; i++) {\n        const argOption = {enabled: true};\n        const argVar = this.argumentVarModels_[i];\n        argOption.text =\n            Msg['VARIABLES_SET_CREATE_GET'].replace('%1', argVar.name);\n\n        const argXmlField = Variables.generateVariableFieldDom(argVar);\n        const argXmlBlock = xmlUtils.createElement('block');\n        argXmlBlock.setAttribute('type', 'variables_get');\n        argXmlBlock.appendChild(argXmlField);\n        argOption.callback = ContextMenu.callbackFactory(this, argXmlBlock);\n        options.push(argOption);\n      }\n    }\n  },\n};\n\nblocks['procedures_defnoreturn'] = {\n  ...PROCEDURE_DEF_COMMON,\n  /**\n   * Block for defining a procedure with no return value.\n   * @this {Block}\n   */\n  init: function() {\n    const initName = Procedures.findLegalName('', this);\n    const nameField = new FieldTextInput(initName, Procedures.rename);\n    nameField.setSpellcheck(false);\n    this.appendDummyInput()\n        .appendField(Msg['PROCEDURES_DEFNORETURN_TITLE'])\n        .appendField(nameField, 'NAME')\n        .appendField('', 'PARAMS');\n    this.setMutator(new Mutator(['procedures_mutatorarg']));\n    if ((this.workspace.options.comments ||\n         (this.workspace.options.parentWorkspace &&\n          this.workspace.options.parentWorkspace.options.comments)) &&\n        Msg['PROCEDURES_DEFNORETURN_COMMENT']) {\n      this.setCommentText(Msg['PROCEDURES_DEFNORETURN_COMMENT']);\n    }\n    this.setStyle('procedure_blocks');\n    this.setTooltip(Msg['PROCEDURES_DEFNORETURN_TOOLTIP']);\n    this.setHelpUrl(Msg['PROCEDURES_DEFNORETURN_HELPURL']);\n    this.arguments_ = [];\n    this.argumentVarModels_ = [];\n    this.setStatements_(true);\n    this.statementConnection_ = null;\n  },\n  /**\n   * Return the signature of this procedure definition.\n   * @return {!Array} Tuple containing three elements:\n   *     - the name of the defined procedure,\n   *     - a list of all its arguments,\n   *     - that it DOES NOT have a return value.\n   * @this {Block}\n   */\n  getProcedureDef: function() {\n    return [this.getFieldValue('NAME'), this.arguments_, false];\n  },\n  callType_: 'procedures_callnoreturn',\n};\n\nblocks['procedures_defreturn'] = {\n  ...PROCEDURE_DEF_COMMON,\n  /**\n   * Block for defining a procedure with a return value.\n   * @this {Block}\n   */\n  init: function() {\n    const initName = Procedures.findLegalName('', this);\n    const nameField = new FieldTextInput(initName, Procedures.rename);\n    nameField.setSpellcheck(false);\n    this.appendDummyInput()\n        .appendField(Msg['PROCEDURES_DEFRETURN_TITLE'])\n        .appendField(nameField, 'NAME')\n        .appendField('', 'PARAMS');\n    this.appendValueInput('RETURN')\n        .setAlign(Align.RIGHT)\n        .appendField(Msg['PROCEDURES_DEFRETURN_RETURN']);\n    this.setMutator(new Mutator(['procedures_mutatorarg']));\n    if ((this.workspace.options.comments ||\n         (this.workspace.options.parentWorkspace &&\n          this.workspace.options.parentWorkspace.options.comments)) &&\n        Msg['PROCEDURES_DEFRETURN_COMMENT']) {\n      this.setCommentText(Msg['PROCEDURES_DEFRETURN_COMMENT']);\n    }\n    this.setStyle('procedure_blocks');\n    this.setTooltip(Msg['PROCEDURES_DEFRETURN_TOOLTIP']);\n    this.setHelpUrl(Msg['PROCEDURES_DEFRETURN_HELPURL']);\n    this.arguments_ = [];\n    this.argumentVarModels_ = [];\n    this.setStatements_(true);\n    this.statementConnection_ = null;\n  },\n  /**\n   * Return the signature of this procedure definition.\n   * @return {!Array} Tuple containing three elements:\n   *     - the name of the defined procedure,\n   *     - a list of all its arguments,\n   *     - that it DOES have a return value.\n   * @this {Block}\n   */\n  getProcedureDef: function() {\n    return [this.getFieldValue('NAME'), this.arguments_, true];\n  },\n  callType_: 'procedures_callreturn',\n};\n\nblocks['procedures_mutatorcontainer'] = {\n  /**\n   * Mutator block for procedure container.\n   * @this {Block}\n   */\n  init: function() {\n    this.appendDummyInput().appendField(\n        Msg['PROCEDURES_MUTATORCONTAINER_TITLE']);\n    this.appendStatementInput('STACK');\n    this.appendDummyInput('STATEMENT_INPUT')\n        .appendField(Msg['PROCEDURES_ALLOW_STATEMENTS'])\n        .appendField(new FieldCheckbox('TRUE'), 'STATEMENTS');\n    this.setStyle('procedure_blocks');\n    this.setTooltip(Msg['PROCEDURES_MUTATORCONTAINER_TOOLTIP']);\n    this.contextMenu = false;\n  },\n};\n\nblocks['procedures_mutatorarg'] = {\n  /**\n   * Mutator block for procedure argument.\n   * @this {Block}\n   */\n  init: function() {\n    const field = new FieldTextInput(Procedures.DEFAULT_ARG, this.validator_);\n    // Hack: override showEditor to do just a little bit more work.\n    // We don't have a good place to hook into the start of a text edit.\n    field.oldShowEditorFn_ = field.showEditor_;\n    /**\n     * @this {FieldTextInput}\n     */\n    const newShowEditorFn = function() {\n      this.createdVariables_ = [];\n      this.oldShowEditorFn_();\n    };\n    field.showEditor_ = newShowEditorFn;\n\n    this.appendDummyInput()\n        .appendField(Msg['PROCEDURES_MUTATORARG_TITLE'])\n        .appendField(field, 'NAME');\n    this.setPreviousStatement(true);\n    this.setNextStatement(true);\n    this.setStyle('procedure_blocks');\n    this.setTooltip(Msg['PROCEDURES_MUTATORARG_TOOLTIP']);\n    this.contextMenu = false;\n\n    // Create the default variable when we drag the block in from the flyout.\n    // Have to do this after installing the field on the block.\n    field.onFinishEditing_ = this.deleteIntermediateVars_;\n    // Create an empty list so onFinishEditing_ has something to look at, even\n    // though the editor was never opened.\n    field.createdVariables_ = [];\n    field.onFinishEditing_('x');\n  },\n\n  /**\n   * Obtain a valid name for the procedure argument. Create a variable if\n   * necessary.\n   * Merge runs of whitespace.  Strip leading and trailing whitespace.\n   * Beyond this, all names are legal.\n   * @param {string} varName User-supplied name.\n   * @return {?string} Valid name, or null if a name was not specified.\n   * @private\n   * @this {FieldTextInput}\n   */\n  validator_: function(varName) {\n    const sourceBlock = this.getSourceBlock();\n    const outerWs = Mutator.findParentWs(sourceBlock.workspace);\n    varName = varName.replace(/[\\s\\xa0]+/g, ' ').replace(/^ | $/g, '');\n    if (!varName) {\n      return null;\n    }\n\n    // Prevents duplicate parameter names in functions\n    const workspace =\n        sourceBlock.workspace.targetWorkspace || sourceBlock.workspace;\n    const blocks = workspace.getAllBlocks(false);\n    const caselessName = varName.toLowerCase();\n    for (let i = 0; i < blocks.length; i++) {\n      if (blocks[i].id === this.getSourceBlock().id) {\n        continue;\n      }\n      // Other blocks values may not be set yet when this is loaded.\n      const otherVar = blocks[i].getFieldValue('NAME');\n      if (otherVar && otherVar.toLowerCase() === caselessName) {\n        return null;\n      }\n    }\n\n    // Don't create variables for arg blocks that\n    // only exist in the mutator's flyout.\n    if (sourceBlock.isInFlyout) {\n      return varName;\n    }\n\n    let model = outerWs.getVariable(varName, '');\n    if (model && model.name !== varName) {\n      // Rename the variable (case change)\n      outerWs.renameVariableById(model.getId(), varName);\n    }\n    if (!model) {\n      model = outerWs.createVariable(varName, '');\n      if (model && this.createdVariables_) {\n        this.createdVariables_.push(model);\n      }\n    }\n    return varName;\n  },\n\n  /**\n   * Called when focusing away from the text field.\n   * Deletes all variables that were created as the user typed their intended\n   * variable name.\n   * @param {string} newText The new variable name.\n   * @private\n   * @this {FieldTextInput}\n   */\n  deleteIntermediateVars_: function(newText) {\n    const outerWs = Mutator.findParentWs(this.getSourceBlock().workspace);\n    if (!outerWs) {\n      return;\n    }\n    for (let i = 0; i < this.createdVariables_.length; i++) {\n      const model = this.createdVariables_[i];\n      if (model.name !== newText) {\n        outerWs.deleteVariableById(model.getId());\n      }\n    }\n  },\n};\n\n/**\n * Common properties for the procedure_callnoreturn and\n * procedure_callreturn blocks.\n */\nconst PROCEDURE_CALL_COMMON = {\n  /**\n   * Returns the name of the procedure this block calls.\n   * @return {string} Procedure name.\n   * @this {Block}\n   */\n  getProcedureCall: function() {\n    // The NAME field is guaranteed to exist, null will never be returned.\n    return /** @type {string} */ (this.getFieldValue('NAME'));\n  },\n  /**\n   * Notification that a procedure is renaming.\n   * If the name matches this block's procedure, rename it.\n   * @param {string} oldName Previous name of procedure.\n   * @param {string} newName Renamed procedure.\n   * @this {Block}\n   */\n  renameProcedure: function(oldName, newName) {\n    if (Names.equals(oldName, this.getProcedureCall())) {\n      this.setFieldValue(newName, 'NAME');\n      const baseMsg = this.outputConnection ?\n          Msg['PROCEDURES_CALLRETURN_TOOLTIP'] :\n          Msg['PROCEDURES_CALLNORETURN_TOOLTIP'];\n      this.setTooltip(baseMsg.replace('%1', newName));\n    }\n  },\n  /**\n   * Notification that the procedure's parameters have changed.\n   * @param {!Array<string>} paramNames New param names, e.g. ['x', 'y', 'z'].\n   * @param {!Array<string>} paramIds IDs of params (consistent for each\n   *     parameter through the life of a mutator, regardless of param renaming),\n   *     e.g. ['piua', 'f8b_', 'oi.o'].\n   * @private\n   * @this {Block}\n   */\n  setProcedureParameters_: function(paramNames, paramIds) {\n    // Data structures:\n    // this.arguments = ['x', 'y']\n    //     Existing param names.\n    // this.quarkConnections_ {piua: null, f8b_: Connection}\n    //     Look-up of paramIds to connections plugged into the call block.\n    // this.quarkIds_ = ['piua', 'f8b_']\n    //     Existing param IDs.\n    // Note that quarkConnections_ may include IDs that no longer exist, but\n    // which might reappear if a param is reattached in the mutator.\n    const defBlock =\n        Procedures.getDefinition(this.getProcedureCall(), this.workspace);\n    const mutatorOpen =\n        defBlock && defBlock.mutator && defBlock.mutator.isVisible();\n    if (!mutatorOpen) {\n      this.quarkConnections_ = {};\n      this.quarkIds_ = null;\n    } else {\n      // fix #6091 - this call could cause an error when outside if-else\n      // expanding block while mutating prevents another error (ancient fix)\n      this.setCollapsed(false);\n    }\n    // Test arguments (arrays of strings) for changes. '\\n' is not a valid\n    // argument name character, so it is a valid delimiter here.\n    if (paramNames.join('\\n') === this.arguments_.join('\\n')) {\n      // No change.\n      this.quarkIds_ = paramIds;\n      return;\n    }\n    if (paramIds.length !== paramNames.length) {\n      throw RangeError('paramNames and paramIds must be the same length.');\n    }\n    if (!this.quarkIds_) {\n      // Initialize tracking for this block.\n      this.quarkConnections_ = {};\n      this.quarkIds_ = [];\n    }\n    // Switch off rendering while the block is rebuilt.\n    const savedRendered = this.rendered;\n    this.rendered = false;\n    // Update the quarkConnections_ with existing connections.\n    for (let i = 0; i < this.arguments_.length; i++) {\n      const input = this.getInput('ARG' + i);\n      if (input) {\n        const connection = input.connection.targetConnection;\n        this.quarkConnections_[this.quarkIds_[i]] = connection;\n        if (mutatorOpen && connection &&\n            paramIds.indexOf(this.quarkIds_[i]) === -1) {\n          // This connection should no longer be attached to this block.\n          connection.disconnect();\n          connection.getSourceBlock().bumpNeighbours();\n        }\n      }\n    }\n    // Rebuild the block's arguments.\n    this.arguments_ = [].concat(paramNames);\n    // And rebuild the argument model list.\n    this.argumentVarModels_ = [];\n    for (let i = 0; i < this.arguments_.length; i++) {\n      const variable = Variables.getOrCreateVariablePackage(\n          this.workspace, null, this.arguments_[i], '');\n      this.argumentVarModels_.push(variable);\n    }\n\n    this.updateShape_();\n    this.quarkIds_ = paramIds;\n    // Reconnect any child blocks.\n    if (this.quarkIds_) {\n      for (let i = 0; i < this.arguments_.length; i++) {\n        const quarkId = this.quarkIds_[i];\n        if (quarkId in this.quarkConnections_) {\n          const connection = this.quarkConnections_[quarkId];\n          if (!Mutator.reconnect(connection, this, 'ARG' + i)) {\n            // Block no longer exists or has been attached elsewhere.\n            delete this.quarkConnections_[quarkId];\n          }\n        }\n      }\n    }\n    // Restore rendering and show the changes.\n    this.rendered = savedRendered;\n    if (this.rendered) {\n      this.render();\n    }\n  },\n  /**\n   * Modify this block to have the correct number of arguments.\n   * @private\n   * @this {Block}\n   */\n  updateShape_: function() {\n    for (let i = 0; i < this.arguments_.length; i++) {\n      const argField = this.getField('ARGNAME' + i);\n      if (argField) {\n        // Ensure argument name is up to date.\n        // The argument name field is deterministic based on the mutation,\n        // no need to fire a change event.\n        Events.disable();\n        try {\n          argField.setValue(this.arguments_[i]);\n        } finally {\n          Events.enable();\n        }\n      } else {\n        // Add new input.\n        const newField = new FieldLabel(this.arguments_[i]);\n        const input = this.appendValueInput('ARG' + i)\n                          .setAlign(Align.RIGHT)\n                          .appendField(newField, 'ARGNAME' + i);\n        input.init();\n      }\n    }\n    // Remove deleted inputs.\n    for (let i = this.arguments_.length; this.getInput('ARG' + i); i++) {\n      this.removeInput('ARG' + i);\n    }\n    // Add 'with:' if there are parameters, remove otherwise.\n    const topRow = this.getInput('TOPROW');\n    if (topRow) {\n      if (this.arguments_.length) {\n        if (!this.getField('WITH')) {\n          topRow.appendField(Msg['PROCEDURES_CALL_BEFORE_PARAMS'], 'WITH');\n          topRow.init();\n        }\n      } else {\n        if (this.getField('WITH')) {\n          topRow.removeField('WITH');\n        }\n      }\n    }\n  },\n  /**\n   * Create XML to represent the (non-editable) name and arguments.\n   * Backwards compatible serialization implementation.\n   * @return {!Element} XML storage element.\n   * @this {Block}\n   */\n  mutationToDom: function() {\n    const container = xmlUtils.createElement('mutation');\n    container.setAttribute('name', this.getProcedureCall());\n    for (let i = 0; i < this.arguments_.length; i++) {\n      const parameter = xmlUtils.createElement('arg');\n      parameter.setAttribute('name', this.arguments_[i]);\n      container.appendChild(parameter);\n    }\n    return container;\n  },\n  /**\n   * Parse XML to restore the (non-editable) name and parameters.\n   * Backwards compatible serialization implementation.\n   * @param {!Element} xmlElement XML storage element.\n   * @this {Block}\n   */\n  domToMutation: function(xmlElement) {\n    const name = xmlElement.getAttribute('name');\n    this.renameProcedure(this.getProcedureCall(), name);\n    const args = [];\n    const paramIds = [];\n    for (let i = 0, childNode; (childNode = xmlElement.childNodes[i]); i++) {\n      if (childNode.nodeName.toLowerCase() === 'arg') {\n        args.push(childNode.getAttribute('name'));\n        paramIds.push(childNode.getAttribute('paramId'));\n      }\n    }\n    this.setProcedureParameters_(args, paramIds);\n  },\n  /**\n   * Returns the state of this block as a JSON serializable object.\n   * @return {{name: string, params:(!Array<string>|undefined)}} The state of\n   *     this block, ie the params and procedure name.\n   */\n  saveExtraState: function() {\n    const state = Object.create(null);\n    state['name'] = this.getProcedureCall();\n    if (this.arguments_.length) {\n      state['params'] = this.arguments_;\n    }\n    return state;\n  },\n  /**\n   * Applies the given state to this block.\n   * @param {*} state The state to apply to this block, ie the params and\n   *     procedure name.\n   */\n  loadExtraState: function(state) {\n    this.renameProcedure(this.getProcedureCall(), state['name']);\n    const params = state['params'];\n    if (params) {\n      const ids = [];\n      ids.length = params.length;\n      ids.fill(null);\n      this.setProcedureParameters_(params, ids);\n    }\n  },\n  /**\n   * Return all variables referenced by this block.\n   * @return {!Array<string>} List of variable names.\n   * @this {Block}\n   */\n  getVars: function() {\n    return this.arguments_;\n  },\n  /**\n   * Return all variables referenced by this block.\n   * @return {!Array<!VariableModel>} List of variable models.\n   * @this {Block}\n   */\n  getVarModels: function() {\n    return this.argumentVarModels_;\n  },\n  /**\n   * Procedure calls cannot exist without the corresponding procedure\n   * definition.  Enforce this link whenever an event is fired.\n   * @param {!AbstractEvent} event Change event.\n   * @this {Block}\n   */\n  onchange: function(event) {\n    if (!this.workspace || this.workspace.isFlyout) {\n      // Block is deleted or is in a flyout.\n      return;\n    }\n    if (!event.recordUndo) {\n      // Events not generated by user. Skip handling.\n      return;\n    }\n    if (event.type === Events.BLOCK_CREATE &&\n        event.ids.indexOf(this.id) !== -1) {\n      // Look for the case where a procedure call was created (usually through\n      // paste) and there is no matching definition.  In this case, create\n      // an empty definition block with the correct signature.\n      const name = this.getProcedureCall();\n      let def = Procedures.getDefinition(name, this.workspace);\n      if (def &&\n          (def.type !== this.defType_ ||\n           JSON.stringify(def.getVars()) !== JSON.stringify(this.arguments_))) {\n        // The signatures don't match.\n        def = null;\n      }\n      if (!def) {\n        Events.setGroup(event.group);\n        /**\n         * Create matching definition block.\n         * <xml xmlns=\"https://developers.google.com/blockly/xml\">\n         *   <block type=\"procedures_defreturn\" x=\"10\" y=\"20\">\n         *     <mutation name=\"test\">\n         *       <arg name=\"x\"></arg>\n         *     </mutation>\n         *     <field name=\"NAME\">test</field>\n         *   </block>\n         * </xml>\n         */\n        const xml = xmlUtils.createElement('xml');\n        const block = xmlUtils.createElement('block');\n        block.setAttribute('type', this.defType_);\n        const xy = this.getRelativeToSurfaceXY();\n        const x = xy.x + config.snapRadius * (this.RTL ? -1 : 1);\n        const y = xy.y + config.snapRadius * 2;\n        block.setAttribute('x', x);\n        block.setAttribute('y', y);\n        const mutation = this.mutationToDom();\n        block.appendChild(mutation);\n        const field = xmlUtils.createElement('field');\n        field.setAttribute('name', 'NAME');\n        const callName = this.getProcedureCall();\n        const newName = Procedures.findLegalName(callName, this);\n        if (callName !== newName) {\n          this.renameProcedure(callName, newName);\n        }\n        field.appendChild(xmlUtils.createTextNode(callName));\n        block.appendChild(field);\n        xml.appendChild(block);\n        Xml.domToWorkspace(xml, this.workspace);\n        Events.setGroup(false);\n      }\n    } else if (event.type === Events.BLOCK_DELETE) {\n      // Look for the case where a procedure definition has been deleted,\n      // leaving this block (a procedure call) orphaned.  In this case, delete\n      // the orphan.\n      const name = this.getProcedureCall();\n      const def = Procedures.getDefinition(name, this.workspace);\n      if (!def) {\n        Events.setGroup(event.group);\n        this.dispose(true);\n        Events.setGroup(false);\n      }\n    } else if (event.type === Events.CHANGE && event.element === 'disabled') {\n      const name = this.getProcedureCall();\n      const def = Procedures.getDefinition(name, this.workspace);\n      if (def && def.id === event.blockId) {\n        // in most cases the old group should be ''\n        const oldGroup = Events.getGroup();\n        if (oldGroup) {\n          // This should only be possible programmatically and may indicate a\n          // problem with event grouping. If you see this message please\n          // investigate. If the use ends up being valid we may need to reorder\n          // events in the undo stack.\n          console.log(\n              'Saw an existing group while responding to a definition change');\n        }\n        Events.setGroup(event.group);\n        if (event.newValue) {\n          this.previousEnabledState_ = this.isEnabled();\n          this.setEnabled(false);\n        } else {\n          this.setEnabled(this.previousEnabledState_);\n        }\n        Events.setGroup(oldGroup);\n      }\n    }\n  },\n  /**\n   * Add menu option to find the definition block for this call.\n   * @param {!Array} options List of menu options to add to.\n   * @this {Block}\n   */\n  customContextMenu: function(options) {\n    if (!this.workspace.isMovable()) {\n      // If we center on the block and the workspace isn't movable we could\n      // loose blocks at the edges of the workspace.\n      return;\n    }\n\n    const option = {enabled: true};\n    option.text = Msg['PROCEDURES_HIGHLIGHT_DEF'];\n    const name = this.getProcedureCall();\n    const workspace = this.workspace;\n    option.callback = function() {\n      const def = Procedures.getDefinition(name, workspace);\n      if (def) {\n        workspace.centerOnBlock(def.id);\n        def.select();\n      }\n    };\n    options.push(option);\n  },\n};\n\nblocks['procedures_callnoreturn'] = {\n  ...PROCEDURE_CALL_COMMON,\n  /**\n   * Block for calling a procedure with no return value.\n   * @this {Block}\n   */\n  init: function() {\n    this.appendDummyInput('TOPROW').appendField('', 'NAME');\n    this.setPreviousStatement(true);\n    this.setNextStatement(true);\n    this.setStyle('procedure_blocks');\n    // Tooltip is set in renameProcedure.\n    this.setHelpUrl(Msg['PROCEDURES_CALLNORETURN_HELPURL']);\n    this.arguments_ = [];\n    this.argumentVarModels_ = [];\n    this.quarkConnections_ = {};\n    this.quarkIds_ = null;\n    this.previousEnabledState_ = true;\n  },\n\n  defType_: 'procedures_defnoreturn',\n};\n\nblocks['procedures_callreturn'] = {\n  ...PROCEDURE_CALL_COMMON,\n  /**\n   * Block for calling a procedure with a return value.\n   * @this {Block}\n   */\n  init: function() {\n    this.appendDummyInput('TOPROW').appendField('', 'NAME');\n    this.setOutput(true);\n    this.setStyle('procedure_blocks');\n    // Tooltip is set in domToMutation.\n    this.setHelpUrl(Msg['PROCEDURES_CALLRETURN_HELPURL']);\n    this.arguments_ = [];\n    this.argumentVarModels_ = [];\n    this.quarkConnections_ = {};\n    this.quarkIds_ = null;\n    this.previousEnabledState_ = true;\n  },\n\n  defType_: 'procedures_defreturn',\n};\n\nblocks['procedures_ifreturn'] = {\n  /**\n   * Block for conditionally returning a value from a procedure.\n   * @this {Block}\n   */\n  init: function() {\n    this.appendValueInput('CONDITION')\n        .setCheck('Boolean')\n        .appendField(Msg['CONTROLS_IF_MSG_IF']);\n    this.appendValueInput('VALUE').appendField(\n        Msg['PROCEDURES_DEFRETURN_RETURN']);\n    this.setInputsInline(true);\n    this.setPreviousStatement(true);\n    this.setNextStatement(true);\n    this.setStyle('procedure_blocks');\n    this.setTooltip(Msg['PROCEDURES_IFRETURN_TOOLTIP']);\n    this.setHelpUrl(Msg['PROCEDURES_IFRETURN_HELPURL']);\n    this.hasReturnValue_ = true;\n  },\n  /**\n   * Create XML to represent whether this block has a return value.\n   * @return {!Element} XML storage element.\n   * @this {Block}\n   */\n  mutationToDom: function() {\n    const container = xmlUtils.createElement('mutation');\n    container.setAttribute('value', Number(this.hasReturnValue_));\n    return container;\n  },\n  /**\n   * Parse XML to restore whether this block has a return value.\n   * @param {!Element} xmlElement XML storage element.\n   * @this {Block}\n   */\n  domToMutation: function(xmlElement) {\n    const value = xmlElement.getAttribute('value');\n    this.hasReturnValue_ = (value === '1');\n    if (!this.hasReturnValue_) {\n      this.removeInput('VALUE');\n      this.appendDummyInput('VALUE').appendField(\n          Msg['PROCEDURES_DEFRETURN_RETURN']);\n    }\n  },\n\n  // This block does not need JSO serialization hooks (saveExtraState and\n  // loadExtraState) because the state of this block is already encoded in the\n  // block's position in the workspace.\n  // XML hooks are kept for backwards compatibility.\n\n  /**\n   * Called whenever anything on the workspace changes.\n   * Add warning if this flow block is not nested inside a loop.\n   * @param {!AbstractEvent} e Move event.\n   * @this {Block}\n   */\n  onchange: function(e) {\n    if (this.workspace.isDragging && this.workspace.isDragging() ||\n        e.type !== Events.BLOCK_MOVE) {\n      return;  // Don't change state at the start of a drag.\n    }\n    let legal = false;\n    // Is the block nested in a procedure?\n    let block = this;\n    do {\n      if (this.FUNCTION_TYPES.indexOf(block.type) !== -1) {\n        legal = true;\n        break;\n      }\n      block = block.getSurroundParent();\n    } while (block);\n    if (legal) {\n      // If needed, toggle whether this block has a return value.\n      if (block.type === 'procedures_defnoreturn' && this.hasReturnValue_) {\n        this.removeInput('VALUE');\n        this.appendDummyInput('VALUE').appendField(\n            Msg['PROCEDURES_DEFRETURN_RETURN']);\n        this.hasReturnValue_ = false;\n      } else if (\n          block.type === 'procedures_defreturn' && !this.hasReturnValue_) {\n        this.removeInput('VALUE');\n        this.appendValueInput('VALUE').appendField(\n            Msg['PROCEDURES_DEFRETURN_RETURN']);\n        this.hasReturnValue_ = true;\n      }\n      this.setWarningText(null);\n    } else {\n      this.setWarningText(Msg['PROCEDURES_IFRETURN_WARNING']);\n    }\n    if (!this.isInFlyout) {\n      const group = Events.getGroup();\n      // Makes it so the move and the disable event get undone together.\n      Events.setGroup(e.group);\n      this.setEnabled(legal);\n      Events.setGroup(group);\n    }\n  },\n  /**\n   * List of block types that are functions and thus do not need warnings.\n   * To add a new function type add this to your code:\n   * Blocks['procedures_ifreturn'].FUNCTION_TYPES.push('custom_func');\n   */\n  FUNCTION_TYPES: ['procedures_defnoreturn', 'procedures_defreturn'],\n};\n\n// Register provided blocks.\ndefineBlocks(blocks);\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Math blocks for Blockly.\n * @suppress {checkTypes}\n */\n'use strict';\n\ngoog.module('Blockly.libraryBlocks.math');\n\nconst Extensions = goog.require('Blockly.Extensions');\n// N.B.: Blockly.FieldDropdown needed for type AND side-effects.\n/* eslint-disable-next-line no-unused-vars */\nconst FieldDropdown = goog.require('Blockly.FieldDropdown');\nconst xmlUtils = goog.require('Blockly.utils.xml');\n/* eslint-disable-next-line no-unused-vars */\nconst {Block} = goog.requireType('Blockly.Block');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockDefinition} = goog.requireType('Blockly.blocks');\nconst {createBlockDefinitionsFromJsonArray, defineBlocks} = goog.require('Blockly.common');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.FieldLabel');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.FieldNumber');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.FieldVariable');\n\n\n/**\n * A dictionary of the block definitions provided by this module.\n * @type {!Object<string, !BlockDefinition>}\n */\nconst blocks = createBlockDefinitionsFromJsonArray([\n  // Block for numeric value.\n  {\n    'type': 'math_number',\n    'message0': '%1',\n    'args0': [{\n      'type': 'field_number',\n      'name': 'NUM',\n      'value': 0,\n    }],\n    'output': 'Number',\n    'helpUrl': '%{BKY_MATH_NUMBER_HELPURL}',\n    'style': 'math_blocks',\n    'tooltip': '%{BKY_MATH_NUMBER_TOOLTIP}',\n    'extensions': ['parent_tooltip_when_inline'],\n  },\n\n  // Block for basic arithmetic operator.\n  {\n    'type': 'math_arithmetic',\n    'message0': '%1 %2 %3',\n    'args0': [\n      {\n        'type': 'input_value',\n        'name': 'A',\n        'check': 'Number',\n      },\n      {\n        'type': 'field_dropdown',\n        'name': 'OP',\n        'options': [\n          ['%{BKY_MATH_ADDITION_SYMBOL}', 'ADD'],\n          ['%{BKY_MATH_SUBTRACTION_SYMBOL}', 'MINUS'],\n          ['%{BKY_MATH_MULTIPLICATION_SYMBOL}', 'MULTIPLY'],\n          ['%{BKY_MATH_DIVISION_SYMBOL}', 'DIVIDE'],\n          ['%{BKY_MATH_POWER_SYMBOL}', 'POWER'],\n        ],\n      },\n      {\n        'type': 'input_value',\n        'name': 'B',\n        'check': 'Number',\n      },\n    ],\n    'inputsInline': true,\n    'output': 'Number',\n    'style': 'math_blocks',\n    'helpUrl': '%{BKY_MATH_ARITHMETIC_HELPURL}',\n    'extensions': ['math_op_tooltip'],\n  },\n\n  // Block for advanced math operators with single operand.\n  {\n    'type': 'math_single',\n    'message0': '%1 %2',\n    'args0': [\n      {\n        'type': 'field_dropdown',\n        'name': 'OP',\n        'options': [\n          ['%{BKY_MATH_SINGLE_OP_ROOT}', 'ROOT'],\n          ['%{BKY_MATH_SINGLE_OP_ABSOLUTE}', 'ABS'],\n          ['-', 'NEG'],\n          ['ln', 'LN'],\n          ['log10', 'LOG10'],\n          ['e^', 'EXP'],\n          ['10^', 'POW10'],\n        ],\n      },\n      {\n        'type': 'input_value',\n        'name': 'NUM',\n        'check': 'Number',\n      },\n    ],\n    'output': 'Number',\n    'style': 'math_blocks',\n    'helpUrl': '%{BKY_MATH_SINGLE_HELPURL}',\n    'extensions': ['math_op_tooltip'],\n  },\n\n  // Block for trigonometry operators.\n  {\n    'type': 'math_trig',\n    'message0': '%1 %2',\n    'args0': [\n      {\n        'type': 'field_dropdown',\n        'name': 'OP',\n        'options': [\n          ['%{BKY_MATH_TRIG_SIN}', 'SIN'],\n          ['%{BKY_MATH_TRIG_COS}', 'COS'],\n          ['%{BKY_MATH_TRIG_TAN}', 'TAN'],\n          ['%{BKY_MATH_TRIG_ASIN}', 'ASIN'],\n          ['%{BKY_MATH_TRIG_ACOS}', 'ACOS'],\n          ['%{BKY_MATH_TRIG_ATAN}', 'ATAN'],\n        ],\n      },\n      {\n        'type': 'input_value',\n        'name': 'NUM',\n        'check': 'Number',\n      },\n    ],\n    'output': 'Number',\n    'style': 'math_blocks',\n    'helpUrl': '%{BKY_MATH_TRIG_HELPURL}',\n    'extensions': ['math_op_tooltip'],\n  },\n\n  // Block for constants: PI, E, the Golden Ratio, sqrt(2), 1/sqrt(2), INFINITY.\n  {\n    'type': 'math_constant',\n    'message0': '%1',\n    'args0': [\n      {\n        'type': 'field_dropdown',\n        'name': 'CONSTANT',\n        'options': [\n          ['\\u03c0', 'PI'],\n          ['e', 'E'],\n          ['\\u03c6', 'GOLDEN_RATIO'],\n          ['sqrt(2)', 'SQRT2'],\n          ['sqrt(\\u00bd)', 'SQRT1_2'],\n          ['\\u221e', 'INFINITY'],\n        ],\n      },\n    ],\n    'output': 'Number',\n    'style': 'math_blocks',\n    'tooltip': '%{BKY_MATH_CONSTANT_TOOLTIP}',\n    'helpUrl': '%{BKY_MATH_CONSTANT_HELPURL}',\n  },\n\n  // Block for checking if a number is even, odd, prime, whole, positive,\n  // negative or if it is divisible by certain number.\n  {\n    'type': 'math_number_property',\n    'message0': '%1 %2',\n    'args0': [\n      {\n        'type': 'input_value',\n        'name': 'NUMBER_TO_CHECK',\n        'check': 'Number',\n      },\n      {\n        'type': 'field_dropdown',\n        'name': 'PROPERTY',\n        'options': [\n          ['%{BKY_MATH_IS_EVEN}', 'EVEN'],\n          ['%{BKY_MATH_IS_ODD}', 'ODD'],\n          ['%{BKY_MATH_IS_PRIME}', 'PRIME'],\n          ['%{BKY_MATH_IS_WHOLE}', 'WHOLE'],\n          ['%{BKY_MATH_IS_POSITIVE}', 'POSITIVE'],\n          ['%{BKY_MATH_IS_NEGATIVE}', 'NEGATIVE'],\n          ['%{BKY_MATH_IS_DIVISIBLE_BY}', 'DIVISIBLE_BY'],\n        ],\n      },\n    ],\n    'inputsInline': true,\n    'output': 'Boolean',\n    'style': 'math_blocks',\n    'tooltip': '%{BKY_MATH_IS_TOOLTIP}',\n    'mutator': 'math_is_divisibleby_mutator',\n  },\n\n  // Block for adding to a variable in place.\n  {\n    'type': 'math_change',\n    'message0': '%{BKY_MATH_CHANGE_TITLE}',\n    'args0': [\n      {\n        'type': 'field_variable',\n        'name': 'VAR',\n        'variable': '%{BKY_MATH_CHANGE_TITLE_ITEM}',\n      },\n      {\n        'type': 'input_value',\n        'name': 'DELTA',\n        'check': 'Number',\n      },\n    ],\n    'previousStatement': null,\n    'nextStatement': null,\n    'style': 'variable_blocks',\n    'helpUrl': '%{BKY_MATH_CHANGE_HELPURL}',\n    'extensions': ['math_change_tooltip'],\n  },\n\n  // Block for rounding functions.\n  {\n    'type': 'math_round',\n    'message0': '%1 %2',\n    'args0': [\n      {\n        'type': 'field_dropdown',\n        'name': 'OP',\n        'options': [\n          ['%{BKY_MATH_ROUND_OPERATOR_ROUND}', 'ROUND'],\n          ['%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}', 'ROUNDUP'],\n          ['%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}', 'ROUNDDOWN'],\n        ],\n      },\n      {\n        'type': 'input_value',\n        'name': 'NUM',\n        'check': 'Number',\n      },\n    ],\n    'output': 'Number',\n    'style': 'math_blocks',\n    'helpUrl': '%{BKY_MATH_ROUND_HELPURL}',\n    'tooltip': '%{BKY_MATH_ROUND_TOOLTIP}',\n  },\n\n  // Block for evaluating a list of numbers to return sum, average, min, max,\n  // etc.  Some functions also work on text (min, max, mode, median).\n  {\n    'type': 'math_on_list',\n    'message0': '%1 %2',\n    'args0': [\n      {\n        'type': 'field_dropdown',\n        'name': 'OP',\n        'options': [\n          ['%{BKY_MATH_ONLIST_OPERATOR_SUM}', 'SUM'],\n          ['%{BKY_MATH_ONLIST_OPERATOR_MIN}', 'MIN'],\n          ['%{BKY_MATH_ONLIST_OPERATOR_MAX}', 'MAX'],\n          ['%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}', 'AVERAGE'],\n          ['%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}', 'MEDIAN'],\n          ['%{BKY_MATH_ONLIST_OPERATOR_MODE}', 'MODE'],\n          ['%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}', 'STD_DEV'],\n          ['%{BKY_MATH_ONLIST_OPERATOR_RANDOM}', 'RANDOM'],\n        ],\n      },\n      {\n        'type': 'input_value',\n        'name': 'LIST',\n        'check': 'Array',\n      },\n    ],\n    'output': 'Number',\n    'style': 'math_blocks',\n    'helpUrl': '%{BKY_MATH_ONLIST_HELPURL}',\n    'mutator': 'math_modes_of_list_mutator',\n    'extensions': ['math_op_tooltip'],\n  },\n\n  // Block for remainder of a division.\n  {\n    'type': 'math_modulo',\n    'message0': '%{BKY_MATH_MODULO_TITLE}',\n    'args0': [\n      {\n        'type': 'input_value',\n        'name': 'DIVIDEND',\n        'check': 'Number',\n      },\n      {\n        'type': 'input_value',\n        'name': 'DIVISOR',\n        'check': 'Number',\n      },\n    ],\n    'inputsInline': true,\n    'output': 'Number',\n    'style': 'math_blocks',\n    'tooltip': '%{BKY_MATH_MODULO_TOOLTIP}',\n    'helpUrl': '%{BKY_MATH_MODULO_HELPURL}',\n  },\n\n  // Block for constraining a number between two limits.\n  {\n    'type': 'math_constrain',\n    'message0': '%{BKY_MATH_CONSTRAIN_TITLE}',\n    'args0': [\n      {\n        'type': 'input_value',\n        'name': 'VALUE',\n        'check': 'Number',\n      },\n      {\n        'type': 'input_value',\n        'name': 'LOW',\n        'check': 'Number',\n      },\n      {\n        'type': 'input_value',\n        'name': 'HIGH',\n        'check': 'Number',\n      },\n    ],\n    'inputsInline': true,\n    'output': 'Number',\n    'style': 'math_blocks',\n    'tooltip': '%{BKY_MATH_CONSTRAIN_TOOLTIP}',\n    'helpUrl': '%{BKY_MATH_CONSTRAIN_HELPURL}',\n  },\n\n  // Block for random integer between [X] and [Y].\n  {\n    'type': 'math_random_int',\n    'message0': '%{BKY_MATH_RANDOM_INT_TITLE}',\n    'args0': [\n      {\n        'type': 'input_value',\n        'name': 'FROM',\n        'check': 'Number',\n      },\n      {\n        'type': 'input_value',\n        'name': 'TO',\n        'check': 'Number',\n      },\n    ],\n    'inputsInline': true,\n    'output': 'Number',\n    'style': 'math_blocks',\n    'tooltip': '%{BKY_MATH_RANDOM_INT_TOOLTIP}',\n    'helpUrl': '%{BKY_MATH_RANDOM_INT_HELPURL}',\n  },\n\n  // Block for random integer between [X] and [Y].\n  {\n    'type': 'math_random_float',\n    'message0': '%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}',\n    'output': 'Number',\n    'style': 'math_blocks',\n    'tooltip': '%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}',\n    'helpUrl': '%{BKY_MATH_RANDOM_FLOAT_HELPURL}',\n  },\n\n  // Block for calculating atan2 of [X] and [Y].\n  {\n    'type': 'math_atan2',\n    'message0': '%{BKY_MATH_ATAN2_TITLE}',\n    'args0': [\n      {\n        'type': 'input_value',\n        'name': 'X',\n        'check': 'Number',\n      },\n      {\n        'type': 'input_value',\n        'name': 'Y',\n        'check': 'Number',\n      },\n    ],\n    'inputsInline': true,\n    'output': 'Number',\n    'style': 'math_blocks',\n    'tooltip': '%{BKY_MATH_ATAN2_TOOLTIP}',\n    'helpUrl': '%{BKY_MATH_ATAN2_HELPURL}',\n  },\n]);\nexports.blocks = blocks;\n\n/**\n * Mapping of math block OP value to tooltip message for blocks\n * math_arithmetic, math_simple, math_trig, and math_on_lists.\n * @see {Extensions#buildTooltipForDropdown}\n * @package\n * @readonly\n */\nconst TOOLTIPS_BY_OP = {\n  // math_arithmetic\n  'ADD': '%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}',\n  'MINUS': '%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}',\n  'MULTIPLY': '%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}',\n  'DIVIDE': '%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}',\n  'POWER': '%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}',\n\n  // math_simple\n  'ROOT': '%{BKY_MATH_SINGLE_TOOLTIP_ROOT}',\n  'ABS': '%{BKY_MATH_SINGLE_TOOLTIP_ABS}',\n  'NEG': '%{BKY_MATH_SINGLE_TOOLTIP_NEG}',\n  'LN': '%{BKY_MATH_SINGLE_TOOLTIP_LN}',\n  'LOG10': '%{BKY_MATH_SINGLE_TOOLTIP_LOG10}',\n  'EXP': '%{BKY_MATH_SINGLE_TOOLTIP_EXP}',\n  'POW10': '%{BKY_MATH_SINGLE_TOOLTIP_POW10}',\n\n  // math_trig\n  'SIN': '%{BKY_MATH_TRIG_TOOLTIP_SIN}',\n  'COS': '%{BKY_MATH_TRIG_TOOLTIP_COS}',\n  'TAN': '%{BKY_MATH_TRIG_TOOLTIP_TAN}',\n  'ASIN': '%{BKY_MATH_TRIG_TOOLTIP_ASIN}',\n  'ACOS': '%{BKY_MATH_TRIG_TOOLTIP_ACOS}',\n  'ATAN': '%{BKY_MATH_TRIG_TOOLTIP_ATAN}',\n\n  // math_on_lists\n  'SUM': '%{BKY_MATH_ONLIST_TOOLTIP_SUM}',\n  'MIN': '%{BKY_MATH_ONLIST_TOOLTIP_MIN}',\n  'MAX': '%{BKY_MATH_ONLIST_TOOLTIP_MAX}',\n  'AVERAGE': '%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}',\n  'MEDIAN': '%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}',\n  'MODE': '%{BKY_MATH_ONLIST_TOOLTIP_MODE}',\n  'STD_DEV': '%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}',\n  'RANDOM': '%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}',\n};\n\nExtensions.register(\n    'math_op_tooltip',\n    Extensions.buildTooltipForDropdown('OP', TOOLTIPS_BY_OP));\n\n\n/**\n * Mixin for mutator functions in the 'math_is_divisibleby_mutator'\n * extension.\n * @mixin\n * @augments Block\n * @package\n */\nconst IS_DIVISIBLEBY_MUTATOR_MIXIN = {\n  /**\n   * Create XML to represent whether the 'divisorInput' should be present.\n   * Backwards compatible serialization implementation.\n   * @return {!Element} XML storage element.\n   * @this {Block}\n   */\n  mutationToDom: function() {\n    const container = xmlUtils.createElement('mutation');\n    const divisorInput = (this.getFieldValue('PROPERTY') === 'DIVISIBLE_BY');\n    container.setAttribute('divisor_input', divisorInput);\n    return container;\n  },\n  /**\n   * Parse XML to restore the 'divisorInput'.\n   * Backwards compatible serialization implementation.\n   * @param {!Element} xmlElement XML storage element.\n   * @this {Block}\n   */\n  domToMutation: function(xmlElement) {\n    const divisorInput = (xmlElement.getAttribute('divisor_input') === 'true');\n    this.updateShape_(divisorInput);\n  },\n\n  // This block does not need JSO serialization hooks (saveExtraState and\n  // loadExtraState) because the state of this object is already encoded in the\n  // dropdown values.\n  // XML hooks are kept for backwards compatibility.\n\n  /**\n   * Modify this block to have (or not have) an input for 'is divisible by'.\n   * @param {boolean} divisorInput True if this block has a divisor input.\n   * @private\n   * @this {Block}\n   */\n  updateShape_: function(divisorInput) {\n    // Add or remove a Value Input.\n    const inputExists = this.getInput('DIVISOR');\n    if (divisorInput) {\n      if (!inputExists) {\n        this.appendValueInput('DIVISOR').setCheck('Number');\n      }\n    } else if (inputExists) {\n      this.removeInput('DIVISOR');\n    }\n  },\n};\n\n/**\n * 'math_is_divisibleby_mutator' extension to the 'math_property' block that\n * can update the block shape (add/remove divisor input) based on whether\n * property is \"divisible by\".\n * @this {Block}\n * @package\n */\nconst IS_DIVISIBLE_MUTATOR_EXTENSION = function() {\n  this.getField('PROPERTY')\n      .setValidator(\n          /**\n           * @this {FieldDropdown}\n           * @param {*} option The selected dropdown option.\n           */\n          function(option) {\n            const divisorInput = (option === 'DIVISIBLE_BY');\n            this.getSourceBlock().updateShape_(divisorInput);\n          });\n};\n\nExtensions.registerMutator(\n    'math_is_divisibleby_mutator', IS_DIVISIBLEBY_MUTATOR_MIXIN,\n    IS_DIVISIBLE_MUTATOR_EXTENSION);\n\n// Update the tooltip of 'math_change' block to reference the variable.\nExtensions.register(\n    'math_change_tooltip',\n    Extensions.buildTooltipWithFieldText('%{BKY_MATH_CHANGE_TOOLTIP}', 'VAR'));\n\n/**\n * Mixin with mutator methods to support alternate output based if the\n * 'math_on_list' block uses the 'MODE' operation.\n * @mixin\n * @augments Block\n * @package\n * @readonly\n */\nconst LIST_MODES_MUTATOR_MIXIN = {\n  /**\n   * Modify this block to have the correct output type.\n   * @param {string} newOp Either 'MODE' or some op than returns a number.\n   * @private\n   * @this {Block}\n   */\n  updateType_: function(newOp) {\n    if (newOp === 'MODE') {\n      this.outputConnection.setCheck('Array');\n    } else {\n      this.outputConnection.setCheck('Number');\n    }\n  },\n  /**\n   * Create XML to represent the output type.\n   * Backwards compatible serialization implementation.\n   * @return {!Element} XML storage element.\n   * @this {Block}\n   */\n  mutationToDom: function() {\n    const container = xmlUtils.createElement('mutation');\n    container.setAttribute('op', this.getFieldValue('OP'));\n    return container;\n  },\n  /**\n   * Parse XML to restore the output type.\n   * Backwards compatible serialization implementation.\n   * @param {!Element} xmlElement XML storage element.\n   * @this {Block}\n   */\n  domToMutation: function(xmlElement) {\n    this.updateType_(xmlElement.getAttribute('op'));\n  },\n\n  // This block does not need JSO serialization hooks (saveExtraState and\n  // loadExtraState) because the state of this object is already encoded in the\n  // dropdown values.\n  // XML hooks are kept for backwards compatibility.\n};\n\n/**\n * Extension to 'math_on_list' blocks that allows support of\n * modes operation (outputs a list of numbers).\n * @this {Block}\n * @package\n */\nconst LIST_MODES_MUTATOR_EXTENSION = function() {\n  this.getField('OP').setValidator(function(newOp) {\n    this.updateType_(newOp);\n  }.bind(this));\n};\n\nExtensions.registerMutator(\n    'math_modes_of_list_mutator', LIST_MODES_MUTATOR_MIXIN,\n    LIST_MODES_MUTATOR_EXTENSION);\n\n// Register provided blocks.\ndefineBlocks(blocks);\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Loop blocks for Blockly.\n * @suppress {checkTypes}\n */\n'use strict';\n\ngoog.module('Blockly.libraryBlocks.loops');\n\n/* eslint-disable-next-line no-unused-vars */\nconst AbstractEvent = goog.requireType('Blockly.Events.Abstract');\nconst ContextMenu = goog.require('Blockly.ContextMenu');\nconst Events = goog.require('Blockly.Events');\nconst Extensions = goog.require('Blockly.Extensions');\nconst Variables = goog.require('Blockly.Variables');\nconst xmlUtils = goog.require('Blockly.utils.xml');\n/* eslint-disable-next-line no-unused-vars */\nconst {Block} = goog.requireType('Blockly.Block');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockDefinition} = goog.requireType('Blockly.blocks');\nconst {Msg} = goog.require('Blockly.Msg');\nconst {createBlockDefinitionsFromJsonArray, defineBlocks} = goog.require('Blockly.common');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.FieldDropdown');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.FieldLabel');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.FieldNumber');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.FieldVariable');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.Warning');\n\n\n/**\n * A dictionary of the block definitions provided by this module.\n * @type {!Object<string, !BlockDefinition>}\n */\nconst blocks = createBlockDefinitionsFromJsonArray([\n  // Block for repeat n times (external number).\n  {\n    'type': 'controls_repeat_ext',\n    'message0': '%{BKY_CONTROLS_REPEAT_TITLE}',\n    'args0': [{\n      'type': 'input_value',\n      'name': 'TIMES',\n      'check': 'Number',\n    }],\n    'message1': '%{BKY_CONTROLS_REPEAT_INPUT_DO} %1',\n    'args1': [{\n      'type': 'input_statement',\n      'name': 'DO',\n    }],\n    'previousStatement': null,\n    'nextStatement': null,\n    'style': 'loop_blocks',\n    'tooltip': '%{BKY_CONTROLS_REPEAT_TOOLTIP}',\n    'helpUrl': '%{BKY_CONTROLS_REPEAT_HELPURL}',\n  },\n  // Block for repeat n times (internal number).\n  // The 'controls_repeat_ext' block is preferred as it is more flexible.\n  {\n    'type': 'controls_repeat',\n    'message0': '%{BKY_CONTROLS_REPEAT_TITLE}',\n    'args0': [{\n      'type': 'field_number',\n      'name': 'TIMES',\n      'value': 10,\n      'min': 0,\n      'precision': 1,\n    }],\n    'message1': '%{BKY_CONTROLS_REPEAT_INPUT_DO} %1',\n    'args1': [{\n      'type': 'input_statement',\n      'name': 'DO',\n    }],\n    'previousStatement': null,\n    'nextStatement': null,\n    'style': 'loop_blocks',\n    'tooltip': '%{BKY_CONTROLS_REPEAT_TOOLTIP}',\n    'helpUrl': '%{BKY_CONTROLS_REPEAT_HELPURL}',\n  },\n  // Block for 'do while/until' loop.\n  {\n    'type': 'controls_whileUntil',\n    'message0': '%1 %2',\n    'args0': [\n      {\n        'type': 'field_dropdown',\n        'name': 'MODE',\n        'options': [\n          ['%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}', 'WHILE'],\n          ['%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}', 'UNTIL'],\n        ],\n      },\n      {\n        'type': 'input_value',\n        'name': 'BOOL',\n        'check': 'Boolean',\n      },\n    ],\n    'message1': '%{BKY_CONTROLS_REPEAT_INPUT_DO} %1',\n    'args1': [{\n      'type': 'input_statement',\n      'name': 'DO',\n    }],\n    'previousStatement': null,\n    'nextStatement': null,\n    'style': 'loop_blocks',\n    'helpUrl': '%{BKY_CONTROLS_WHILEUNTIL_HELPURL}',\n    'extensions': ['controls_whileUntil_tooltip'],\n  },\n  // Block for 'for' loop.\n  {\n    'type': 'controls_for',\n    'message0': '%{BKY_CONTROLS_FOR_TITLE}',\n    'args0': [\n      {\n        'type': 'field_variable',\n        'name': 'VAR',\n        'variable': null,\n      },\n      {\n        'type': 'input_value',\n        'name': 'FROM',\n        'check': 'Number',\n        'align': 'RIGHT',\n      },\n      {\n        'type': 'input_value',\n        'name': 'TO',\n        'check': 'Number',\n        'align': 'RIGHT',\n      },\n      {\n        'type': 'input_value',\n        'name': 'BY',\n        'check': 'Number',\n        'align': 'RIGHT',\n      },\n    ],\n    'message1': '%{BKY_CONTROLS_REPEAT_INPUT_DO} %1',\n    'args1': [{\n      'type': 'input_statement',\n      'name': 'DO',\n    }],\n    'inputsInline': true,\n    'previousStatement': null,\n    'nextStatement': null,\n    'style': 'loop_blocks',\n    'helpUrl': '%{BKY_CONTROLS_FOR_HELPURL}',\n    'extensions': [\n      'contextMenu_newGetVariableBlock',\n      'controls_for_tooltip',\n    ],\n  },\n  // Block for 'for each' loop.\n  {\n    'type': 'controls_forEach',\n    'message0': '%{BKY_CONTROLS_FOREACH_TITLE}',\n    'args0': [\n      {\n        'type': 'field_variable',\n        'name': 'VAR',\n        'variable': null,\n      },\n      {\n        'type': 'input_value',\n        'name': 'LIST',\n        'check': 'Array',\n      },\n    ],\n    'message1': '%{BKY_CONTROLS_REPEAT_INPUT_DO} %1',\n    'args1': [{\n      'type': 'input_statement',\n      'name': 'DO',\n    }],\n    'previousStatement': null,\n    'nextStatement': null,\n    'style': 'loop_blocks',\n    'helpUrl': '%{BKY_CONTROLS_FOREACH_HELPURL}',\n    'extensions': [\n      'contextMenu_newGetVariableBlock',\n      'controls_forEach_tooltip',\n    ],\n  },\n  // Block for flow statements: continue, break.\n  {\n    'type': 'controls_flow_statements',\n    'message0': '%1',\n    'args0': [{\n      'type': 'field_dropdown',\n      'name': 'FLOW',\n      'options': [\n        ['%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}', 'BREAK'],\n        ['%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}', 'CONTINUE'],\n      ],\n    }],\n    'previousStatement': null,\n    'style': 'loop_blocks',\n    'helpUrl': '%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}',\n    'suppressPrefixSuffix': true,\n    'extensions': [\n      'controls_flow_tooltip',\n      'controls_flow_in_loop_check',\n    ],\n  },\n]);\nexports.blocks = blocks;\n\n/**\n * Tooltips for the 'controls_whileUntil' block, keyed by MODE value.\n * @see {Extensions#buildTooltipForDropdown}\n * @readonly\n */\nconst WHILE_UNTIL_TOOLTIPS = {\n  'WHILE': '%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}',\n  'UNTIL': '%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}',\n};\n\nExtensions.register(\n    'controls_whileUntil_tooltip',\n    Extensions.buildTooltipForDropdown('MODE', WHILE_UNTIL_TOOLTIPS));\n\n/**\n * Tooltips for the 'controls_flow_statements' block, keyed by FLOW value.\n * @see {Extensions#buildTooltipForDropdown}\n * @readonly\n */\nconst BREAK_CONTINUE_TOOLTIPS = {\n  'BREAK': '%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}',\n  'CONTINUE': '%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}',\n};\n\nExtensions.register(\n    'controls_flow_tooltip',\n    Extensions.buildTooltipForDropdown('FLOW', BREAK_CONTINUE_TOOLTIPS));\n\n/**\n * Mixin to add a context menu item to create a 'variables_get' block.\n * Used by blocks 'controls_for' and 'controls_forEach'.\n * @mixin\n * @augments Block\n * @package\n * @readonly\n */\nconst CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN = {\n  /**\n   * Add context menu option to create getter block for the loop's variable.\n   * (customContextMenu support limited to web BlockSvg.)\n   * @param {!Array} options List of menu options to add to.\n   * @this {Block}\n   */\n  customContextMenu: function(options) {\n    if (this.isInFlyout) {\n      return;\n    }\n    const variable = this.getField('VAR').getVariable();\n    const varName = variable.name;\n    if (!this.isCollapsed() && varName !== null) {\n      const option = {enabled: true};\n      option.text = Msg['VARIABLES_SET_CREATE_GET'].replace('%1', varName);\n      const xmlField = Variables.generateVariableFieldDom(variable);\n      const xmlBlock = xmlUtils.createElement('block');\n      xmlBlock.setAttribute('type', 'variables_get');\n      xmlBlock.appendChild(xmlField);\n      option.callback = ContextMenu.callbackFactory(this, xmlBlock);\n      options.push(option);\n    }\n  },\n};\n\nExtensions.registerMixin(\n    'contextMenu_newGetVariableBlock',\n    CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN);\n\nExtensions.register(\n    'controls_for_tooltip',\n    Extensions.buildTooltipWithFieldText('%{BKY_CONTROLS_FOR_TOOLTIP}', 'VAR'));\n\nExtensions.register(\n    'controls_forEach_tooltip',\n    Extensions.buildTooltipWithFieldText(\n        '%{BKY_CONTROLS_FOREACH_TOOLTIP}', 'VAR'));\n\n/**\n * List of block types that are loops and thus do not need warnings.\n * To add a new loop type add this to your code:\n *\n * // If using the Blockly npm package and es6 import syntax:\n * import {loopTypes} from 'blockly/blocks';\n * loopTypes.add('custom_loop');\n *\n * // Else if using Closure Compiler and goog.modules:\n * const {loopTypes} = goog.require('Blockly.libraryBlocks.loops');\n * loopTypes.add('custom_loop');\n *\n * // Else if using blockly_compressed + blockss_compressed.js in browser:\n * Blockly.libraryBlocks.loopTypes.add('custom_loop');\n *\n * @type {!Set<string>}\n */\nconst loopTypes = new Set([\n  'controls_repeat',\n  'controls_repeat_ext',\n  'controls_forEach',\n  'controls_for',\n  'controls_whileUntil',\n]);\nexports.loopTypes = loopTypes;\n\n/**\n * This mixin adds a check to make sure the 'controls_flow_statements' block\n * is contained in a loop. Otherwise a warning is added to the block.\n * @mixin\n * @augments Block\n * @public\n * @readonly\n */\nconst CONTROL_FLOW_IN_LOOP_CHECK_MIXIN = {\n  /**\n   * Is this block enclosed (at any level) by a loop?\n   * @return {Block} The nearest surrounding loop, or null if none.\n   * @this {Block}\n   */\n  getSurroundLoop: function() {\n    let block = this;\n    do {\n      if (loopTypes.has(block.type)) {\n        return block;\n      }\n      block = block.getSurroundParent();\n    } while (block);\n    return null;\n  },\n\n  /**\n   * Called whenever anything on the workspace changes.\n   * Add warning if this flow block is not nested inside a loop.\n   * @param {!AbstractEvent} e Move event.\n   * @this {Block}\n   */\n  onchange: function(e) {\n    // Don't change state if:\n    //   * It's at the start of a drag.\n    //   * It's not a move event.\n    if (!this.workspace.isDragging || this.workspace.isDragging() ||\n        e.type !== Events.BLOCK_MOVE) {\n      return;\n    }\n    const enabled = this.getSurroundLoop(this);\n    this.setWarningText(\n        enabled ? null : Msg['CONTROLS_FLOW_STATEMENTS_WARNING']);\n    if (!this.isInFlyout) {\n      const group = Events.getGroup();\n      // Makes it so the move and the disable event get undone together.\n      Events.setGroup(e.group);\n      this.setEnabled(enabled);\n      Events.setGroup(group);\n    }\n  },\n};\n\nExtensions.registerMixin(\n    'controls_flow_in_loop_check', CONTROL_FLOW_IN_LOOP_CHECK_MIXIN);\n\n// Register provided blocks.\ndefineBlocks(blocks);\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Logic blocks for Blockly.\n * @suppress {checkTypes}\n */\n'use strict';\n\ngoog.module('Blockly.libraryBlocks.logic');\n\n/* eslint-disable-next-line no-unused-vars */\nconst AbstractEvent = goog.requireType('Blockly.Events.Abstract');\nconst Events = goog.require('Blockly.Events');\nconst Extensions = goog.require('Blockly.Extensions');\nconst xmlUtils = goog.require('Blockly.utils.xml');\n/* eslint-disable-next-line no-unused-vars */\nconst {Block} = goog.requireType('Blockly.Block');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockDefinition} = goog.requireType('Blockly.blocks');\nconst {Msg} = goog.require('Blockly.Msg');\nconst {Mutator} = goog.require('Blockly.Mutator');\n/* eslint-disable-next-line no-unused-vars */\nconst {RenderedConnection} = goog.requireType('Blockly.RenderedConnection');\n/* eslint-disable-next-line no-unused-vars */\nconst {Workspace} = goog.requireType('Blockly.Workspace');\nconst {createBlockDefinitionsFromJsonArray, defineBlocks} = goog.require('Blockly.common');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.FieldDropdown');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.FieldLabel');\n\n\n/**\n * A dictionary of the block definitions provided by this module.\n * @type {!Object<string, !BlockDefinition>}\n */\nconst blocks = createBlockDefinitionsFromJsonArray([\n  // Block for boolean data type: true and false.\n  {\n    'type': 'logic_boolean',\n    'message0': '%1',\n    'args0': [\n      {\n        'type': 'field_dropdown',\n        'name': 'BOOL',\n        'options': [\n          ['%{BKY_LOGIC_BOOLEAN_TRUE}', 'TRUE'],\n          ['%{BKY_LOGIC_BOOLEAN_FALSE}', 'FALSE'],\n        ],\n      },\n    ],\n    'output': 'Boolean',\n    'style': 'logic_blocks',\n    'tooltip': '%{BKY_LOGIC_BOOLEAN_TOOLTIP}',\n    'helpUrl': '%{BKY_LOGIC_BOOLEAN_HELPURL}',\n  },\n  // Block for if/elseif/else condition.\n  {\n    'type': 'controls_if',\n    'message0': '%{BKY_CONTROLS_IF_MSG_IF} %1',\n    'args0': [\n      {\n        'type': 'input_value',\n        'name': 'IF0',\n        'check': 'Boolean',\n      },\n    ],\n    'message1': '%{BKY_CONTROLS_IF_MSG_THEN} %1',\n    'args1': [\n      {\n        'type': 'input_statement',\n        'name': 'DO0',\n      },\n    ],\n    'previousStatement': null,\n    'nextStatement': null,\n    'style': 'logic_blocks',\n    'helpUrl': '%{BKY_CONTROLS_IF_HELPURL}',\n    'suppressPrefixSuffix': true,\n    'mutator': 'controls_if_mutator',\n    'extensions': ['controls_if_tooltip'],\n  },\n  // If/else block that does not use a mutator.\n  {\n    'type': 'controls_ifelse',\n    'message0': '%{BKY_CONTROLS_IF_MSG_IF} %1',\n    'args0': [\n      {\n        'type': 'input_value',\n        'name': 'IF0',\n        'check': 'Boolean',\n      },\n    ],\n    'message1': '%{BKY_CONTROLS_IF_MSG_THEN} %1',\n    'args1': [\n      {\n        'type': 'input_statement',\n        'name': 'DO0',\n      },\n    ],\n    'message2': '%{BKY_CONTROLS_IF_MSG_ELSE} %1',\n    'args2': [\n      {\n        'type': 'input_statement',\n        'name': 'ELSE',\n      },\n    ],\n    'previousStatement': null,\n    'nextStatement': null,\n    'style': 'logic_blocks',\n    'tooltip': '%{BKYCONTROLS_IF_TOOLTIP_2}',\n    'helpUrl': '%{BKY_CONTROLS_IF_HELPURL}',\n    'suppressPrefixSuffix': true,\n    'extensions': ['controls_if_tooltip'],\n  },\n  // Block for comparison operator.\n  {\n    'type': 'logic_compare',\n    'message0': '%1 %2 %3',\n    'args0': [\n      {\n        'type': 'input_value',\n        'name': 'A',\n      },\n      {\n        'type': 'field_dropdown',\n        'name': 'OP',\n        'options': [\n          ['=', 'EQ'],\n          ['\\u2260', 'NEQ'],\n          ['\\u200F<', 'LT'],\n          ['\\u200F\\u2264', 'LTE'],\n          ['\\u200F>', 'GT'],\n          ['\\u200F\\u2265', 'GTE'],\n        ],\n      },\n      {\n        'type': 'input_value',\n        'name': 'B',\n      },\n    ],\n    'inputsInline': true,\n    'output': 'Boolean',\n    'style': 'logic_blocks',\n    'helpUrl': '%{BKY_LOGIC_COMPARE_HELPURL}',\n    'extensions': ['logic_compare', 'logic_op_tooltip'],\n  },\n  // Block for logical operations: 'and', 'or'.\n  {\n    'type': 'logic_operation',\n    'message0': '%1 %2 %3',\n    'args0': [\n      {\n        'type': 'input_value',\n        'name': 'A',\n        'check': 'Boolean',\n      },\n      {\n        'type': 'field_dropdown',\n        'name': 'OP',\n        'options': [\n          ['%{BKY_LOGIC_OPERATION_AND}', 'AND'],\n          ['%{BKY_LOGIC_OPERATION_OR}', 'OR'],\n        ],\n      },\n      {\n        'type': 'input_value',\n        'name': 'B',\n        'check': 'Boolean',\n      },\n    ],\n    'inputsInline': true,\n    'output': 'Boolean',\n    'style': 'logic_blocks',\n    'helpUrl': '%{BKY_LOGIC_OPERATION_HELPURL}',\n    'extensions': ['logic_op_tooltip'],\n  },\n  // Block for negation.\n  {\n    'type': 'logic_negate',\n    'message0': '%{BKY_LOGIC_NEGATE_TITLE}',\n    'args0': [\n      {\n        'type': 'input_value',\n        'name': 'BOOL',\n        'check': 'Boolean',\n      },\n    ],\n    'output': 'Boolean',\n    'style': 'logic_blocks',\n    'tooltip': '%{BKY_LOGIC_NEGATE_TOOLTIP}',\n    'helpUrl': '%{BKY_LOGIC_NEGATE_HELPURL}',\n  },\n  // Block for null data type.\n  {\n    'type': 'logic_null',\n    'message0': '%{BKY_LOGIC_NULL}',\n    'output': null,\n    'style': 'logic_blocks',\n    'tooltip': '%{BKY_LOGIC_NULL_TOOLTIP}',\n    'helpUrl': '%{BKY_LOGIC_NULL_HELPURL}',\n  },\n  // Block for ternary operator.\n  {\n    'type': 'logic_ternary',\n    'message0': '%{BKY_LOGIC_TERNARY_CONDITION} %1',\n    'args0': [\n      {\n        'type': 'input_value',\n        'name': 'IF',\n        'check': 'Boolean',\n      },\n    ],\n    'message1': '%{BKY_LOGIC_TERNARY_IF_TRUE} %1',\n    'args1': [\n      {\n        'type': 'input_value',\n        'name': 'THEN',\n      },\n    ],\n    'message2': '%{BKY_LOGIC_TERNARY_IF_FALSE} %1',\n    'args2': [\n      {\n        'type': 'input_value',\n        'name': 'ELSE',\n      },\n    ],\n    'output': null,\n    'style': 'logic_blocks',\n    'tooltip': '%{BKY_LOGIC_TERNARY_TOOLTIP}',\n    'helpUrl': '%{BKY_LOGIC_TERNARY_HELPURL}',\n    'extensions': ['logic_ternary'],\n  },\n  // Block representing the if statement in the controls_if mutator.\n  {\n    'type': 'controls_if_if',\n    'message0': '%{BKY_CONTROLS_IF_IF_TITLE_IF}',\n    'nextStatement': null,\n    'enableContextMenu': false,\n    'style': 'logic_blocks',\n    'tooltip': '%{BKY_CONTROLS_IF_IF_TOOLTIP}',\n  },\n  // Block representing the else-if statement in the controls_if mutator.\n  {\n    'type': 'controls_if_elseif',\n    'message0': '%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}',\n    'previousStatement': null,\n    'nextStatement': null,\n    'enableContextMenu': false,\n    'style': 'logic_blocks',\n    'tooltip': '%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}',\n  },\n  // Block representing the else statement in the controls_if mutator.\n  {\n    'type': 'controls_if_else',\n    'message0': '%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}',\n    'previousStatement': null,\n    'enableContextMenu': false,\n    'style': 'logic_blocks',\n    'tooltip': '%{BKY_CONTROLS_IF_ELSE_TOOLTIP}',\n  },\n]);\nexports.blocks = blocks;\n\n/**\n * Tooltip text, keyed by block OP value. Used by logic_compare and\n * logic_operation blocks.\n * @see {Extensions#buildTooltipForDropdown}\n * @readonly\n */\nconst TOOLTIPS_BY_OP = {\n  // logic_compare\n  'EQ': '%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}',\n  'NEQ': '%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}',\n  'LT': '%{BKY_LOGIC_COMPARE_TOOLTIP_LT}',\n  'LTE': '%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}',\n  'GT': '%{BKY_LOGIC_COMPARE_TOOLTIP_GT}',\n  'GTE': '%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}',\n\n  // logic_operation\n  'AND': '%{BKY_LOGIC_OPERATION_TOOLTIP_AND}',\n  'OR': '%{BKY_LOGIC_OPERATION_TOOLTIP_OR}',\n};\n\nExtensions.register(\n    'logic_op_tooltip',\n    Extensions.buildTooltipForDropdown('OP', TOOLTIPS_BY_OP));\n\n/**\n * Mutator methods added to controls_if blocks.\n * @mixin\n * @augments Block\n * @readonly\n */\nconst CONTROLS_IF_MUTATOR_MIXIN = {\n  elseifCount_: 0,\n  elseCount_: 0,\n\n  /**\n   * Create XML to represent the number of else-if and else inputs.\n   * Backwards compatible serialization implementation.\n   * @return {Element} XML storage element.\n   * @this {Block}\n   */\n  mutationToDom: function() {\n    if (!this.elseifCount_ && !this.elseCount_) {\n      return null;\n    }\n    const container = xmlUtils.createElement('mutation');\n    if (this.elseifCount_) {\n      container.setAttribute('elseif', this.elseifCount_);\n    }\n    if (this.elseCount_) {\n      container.setAttribute('else', 1);\n    }\n    return container;\n  },\n  /**\n   * Parse XML to restore the else-if and else inputs.\n   * Backwards compatible serialization implementation.\n   * @param {!Element} xmlElement XML storage element.\n   * @this {Block}\n   */\n  domToMutation: function(xmlElement) {\n    this.elseifCount_ = parseInt(xmlElement.getAttribute('elseif'), 10) || 0;\n    this.elseCount_ = parseInt(xmlElement.getAttribute('else'), 10) || 0;\n    this.rebuildShape_();\n  },\n  /**\n   * Returns the state of this block as a JSON serializable object.\n   * @return {?{elseIfCount: (number|undefined), haseElse: (boolean|undefined)}}\n   *     The state of this block, ie the else if count and else state.\n   */\n  saveExtraState: function() {\n    if (!this.elseifCount_ && !this.elseCount_) {\n      return null;\n    }\n    const state = Object.create(null);\n    if (this.elseifCount_) {\n      state['elseIfCount'] = this.elseifCount_;\n    }\n    if (this.elseCount_) {\n      state['hasElse'] = true;\n    }\n    return state;\n  },\n  /**\n   * Applies the given state to this block.\n   * @param {*} state The state to apply to this block, ie the else if count and\n   *     else state.\n   */\n  loadExtraState: function(state) {\n    this.elseifCount_ = state['elseIfCount'] || 0;\n    this.elseCount_ = state['hasElse'] ? 1 : 0;\n    this.updateShape_();\n  },\n  /**\n   * Populate the mutator's dialog with this block's components.\n   * @param {!Workspace} workspace Mutator's workspace.\n   * @return {!Block} Root block in mutator.\n   * @this {Block}\n   */\n  decompose: function(workspace) {\n    const containerBlock = workspace.newBlock('controls_if_if');\n    containerBlock.initSvg();\n    let connection = containerBlock.nextConnection;\n    for (let i = 1; i <= this.elseifCount_; i++) {\n      const elseifBlock = workspace.newBlock('controls_if_elseif');\n      elseifBlock.initSvg();\n      connection.connect(elseifBlock.previousConnection);\n      connection = elseifBlock.nextConnection;\n    }\n    if (this.elseCount_) {\n      const elseBlock = workspace.newBlock('controls_if_else');\n      elseBlock.initSvg();\n      connection.connect(elseBlock.previousConnection);\n    }\n    return containerBlock;\n  },\n  /**\n   * Reconfigure this block based on the mutator dialog's components.\n   * @param {!Block} containerBlock Root block in mutator.\n   * @this {Block}\n   */\n  compose: function(containerBlock) {\n    let clauseBlock = containerBlock.nextConnection.targetBlock();\n    // Count number of inputs.\n    this.elseifCount_ = 0;\n    this.elseCount_ = 0;\n    const valueConnections = [null];\n    const statementConnections = [null];\n    let elseStatementConnection = null;\n    while (clauseBlock && !clauseBlock.isInsertionMarker()) {\n      switch (clauseBlock.type) {\n        case 'controls_if_elseif':\n          this.elseifCount_++;\n          valueConnections.push(clauseBlock.valueConnection_);\n          statementConnections.push(clauseBlock.statementConnection_);\n          break;\n        case 'controls_if_else':\n          this.elseCount_++;\n          elseStatementConnection = clauseBlock.statementConnection_;\n          break;\n        default:\n          throw TypeError('Unknown block type: ' + clauseBlock.type);\n      }\n      clauseBlock = clauseBlock.nextConnection &&\n          clauseBlock.nextConnection.targetBlock();\n    }\n    this.updateShape_();\n    // Reconnect any child blocks.\n    this.reconnectChildBlocks_(\n        valueConnections, statementConnections, elseStatementConnection);\n  },\n  /**\n   * Store pointers to any connected child blocks.\n   * @param {!Block} containerBlock Root block in mutator.\n   * @this {Block}\n   */\n  saveConnections: function(containerBlock) {\n    let clauseBlock = containerBlock.nextConnection.targetBlock();\n    let i = 1;\n    while (clauseBlock) {\n      switch (clauseBlock.type) {\n        case 'controls_if_elseif': {\n          const inputIf = this.getInput('IF' + i);\n          const inputDo = this.getInput('DO' + i);\n          clauseBlock.valueConnection_ =\n              inputIf && inputIf.connection.targetConnection;\n          clauseBlock.statementConnection_ =\n              inputDo && inputDo.connection.targetConnection;\n          i++;\n          break;\n        }\n        case 'controls_if_else': {\n          const inputDo = this.getInput('ELSE');\n          clauseBlock.statementConnection_ =\n              inputDo && inputDo.connection.targetConnection;\n          break;\n        }\n        default:\n          throw TypeError('Unknown block type: ' + clauseBlock.type);\n      }\n      clauseBlock = clauseBlock.nextConnection &&\n          clauseBlock.nextConnection.targetBlock();\n    }\n  },\n  /**\n   * Reconstructs the block with all child blocks attached.\n   * @this {Block}\n   */\n  rebuildShape_: function() {\n    const valueConnections = [null];\n    const statementConnections = [null];\n    let elseStatementConnection = null;\n\n    if (this.getInput('ELSE')) {\n      elseStatementConnection =\n          this.getInput('ELSE').connection.targetConnection;\n    }\n    for (let i = 1; this.getInput('IF' + i); i++) {\n      const inputIf = this.getInput('IF' + i);\n      const inputDo = this.getInput('DO' + i);\n      valueConnections.push(inputIf.connection.targetConnection);\n      statementConnections.push(inputDo.connection.targetConnection);\n    }\n    this.updateShape_();\n    this.reconnectChildBlocks_(\n        valueConnections, statementConnections, elseStatementConnection);\n  },\n  /**\n   * Modify this block to have the correct number of inputs.\n   * @this {Block}\n   * @private\n   */\n  updateShape_: function() {\n    // Delete everything.\n    if (this.getInput('ELSE')) {\n      this.removeInput('ELSE');\n    }\n    for (let i = 1; this.getInput('IF' + i); i++) {\n      this.removeInput('IF' + i);\n      this.removeInput('DO' + i);\n    }\n    // Rebuild block.\n    for (let i = 1; i <= this.elseifCount_; i++) {\n      this.appendValueInput('IF' + i).setCheck('Boolean').appendField(\n          Msg['CONTROLS_IF_MSG_ELSEIF']);\n      this.appendStatementInput('DO' + i).appendField(\n          Msg['CONTROLS_IF_MSG_THEN']);\n    }\n    if (this.elseCount_) {\n      this.appendStatementInput('ELSE').appendField(\n          Msg['CONTROLS_IF_MSG_ELSE']);\n    }\n  },\n  /**\n   * Reconnects child blocks.\n   * @param {!Array<?RenderedConnection>} valueConnections List of\n   * value connections for 'if' input.\n   * @param {!Array<?RenderedConnection>} statementConnections List of\n   * statement connections for 'do' input.\n   * @param {?RenderedConnection} elseStatementConnection Statement\n   * connection for else input.\n   * @this {Block}\n   */\n  reconnectChildBlocks_: function(\n      valueConnections, statementConnections, elseStatementConnection) {\n    for (let i = 1; i <= this.elseifCount_; i++) {\n      Mutator.reconnect(valueConnections[i], this, 'IF' + i);\n      Mutator.reconnect(statementConnections[i], this, 'DO' + i);\n    }\n    Mutator.reconnect(elseStatementConnection, this, 'ELSE');\n  },\n};\n\nExtensions.registerMutator(\n    'controls_if_mutator', CONTROLS_IF_MUTATOR_MIXIN, null,\n    ['controls_if_elseif', 'controls_if_else']);\n/**\n * \"controls_if\" extension function. Adds mutator, shape updating methods, and\n * dynamic tooltip to \"controls_if\" blocks.\n * @this {Block}\n */\nconst CONTROLS_IF_TOOLTIP_EXTENSION = function() {\n  this.setTooltip(function() {\n    if (!this.elseifCount_ && !this.elseCount_) {\n      return Msg['CONTROLS_IF_TOOLTIP_1'];\n    } else if (!this.elseifCount_ && this.elseCount_) {\n      return Msg['CONTROLS_IF_TOOLTIP_2'];\n    } else if (this.elseifCount_ && !this.elseCount_) {\n      return Msg['CONTROLS_IF_TOOLTIP_3'];\n    } else if (this.elseifCount_ && this.elseCount_) {\n      return Msg['CONTROLS_IF_TOOLTIP_4'];\n    }\n    return '';\n  }.bind(this));\n};\n\nExtensions.register('controls_if_tooltip', CONTROLS_IF_TOOLTIP_EXTENSION);\n\n/**\n * Adds dynamic type validation for the left and right sides of a logic_compare\n * block.\n * @mixin\n * @augments Block\n * @readonly\n */\nconst LOGIC_COMPARE_ONCHANGE_MIXIN = {\n  /**\n   * Called whenever anything on the workspace changes.\n   * Prevent mismatched types from being compared.\n   * @param {!AbstractEvent} e Change event.\n   * @this {Block}\n   */\n  onchange: function(e) {\n    if (!this.prevBlocks_) {\n      this.prevBlocks_ = [null, null];\n    }\n\n    const blockA = this.getInputTargetBlock('A');\n    const blockB = this.getInputTargetBlock('B');\n    // Disconnect blocks that existed prior to this change if they don't match.\n    if (blockA && blockB &&\n        !this.workspace.connectionChecker.doTypeChecks(\n            blockA.outputConnection, blockB.outputConnection)) {\n      // Mismatch between two inputs.  Revert the block connections,\n      // bumping away the newly connected block(s).\n      Events.setGroup(e.group);\n      const prevA = this.prevBlocks_[0];\n      if (prevA !== blockA) {\n        blockA.unplug();\n        if (prevA && !prevA.isDisposed() && !prevA.isShadow()) {\n          // The shadow block is automatically replaced during unplug().\n          this.getInput('A').connection.connect(prevA.outputConnection);\n        }\n      }\n      const prevB = this.prevBlocks_[1];\n      if (prevB !== blockB) {\n        blockB.unplug();\n        if (prevB && !prevB.isDisposed() && !prevB.isShadow()) {\n          // The shadow block is automatically replaced during unplug().\n          this.getInput('B').connection.connect(prevB.outputConnection);\n        }\n      }\n      this.bumpNeighbours();\n      Events.setGroup(false);\n    }\n    this.prevBlocks_[0] = this.getInputTargetBlock('A');\n    this.prevBlocks_[1] = this.getInputTargetBlock('B');\n  },\n};\n\n/**\n * \"logic_compare\" extension function. Adds type left and right side type\n * checking to \"logic_compare\" blocks.\n * @this {Block}\n * @readonly\n */\nconst LOGIC_COMPARE_EXTENSION = function() {\n  // Add onchange handler to ensure types are compatible.\n  this.mixin(LOGIC_COMPARE_ONCHANGE_MIXIN);\n};\n\nExtensions.register('logic_compare', LOGIC_COMPARE_EXTENSION);\n\n/**\n * Adds type coordination between inputs and output.\n * @mixin\n * @augments Block\n * @readonly\n */\nconst LOGIC_TERNARY_ONCHANGE_MIXIN = {\n  prevParentConnection_: null,\n\n  /**\n   * Called whenever anything on the workspace changes.\n   * Prevent mismatched types.\n   * @param {!AbstractEvent} e Change event.\n   * @this {Block}\n   */\n  onchange: function(e) {\n    const blockA = this.getInputTargetBlock('THEN');\n    const blockB = this.getInputTargetBlock('ELSE');\n    const parentConnection = this.outputConnection.targetConnection;\n    // Disconnect blocks that existed prior to this change if they don't match.\n    if ((blockA || blockB) && parentConnection) {\n      for (let i = 0; i < 2; i++) {\n        const block = (i === 1) ? blockA : blockB;\n        if (block &&\n            !block.workspace.connectionChecker.doTypeChecks(\n                block.outputConnection, parentConnection)) {\n          // Ensure that any disconnections are grouped with the causing event.\n          Events.setGroup(e.group);\n          if (parentConnection === this.prevParentConnection_) {\n            this.unplug();\n            parentConnection.getSourceBlock().bumpNeighbours();\n          } else {\n            block.unplug();\n            block.bumpNeighbours();\n          }\n          Events.setGroup(false);\n        }\n      }\n    }\n    this.prevParentConnection_ = parentConnection;\n  },\n};\n\nExtensions.registerMixin('logic_ternary', LOGIC_TERNARY_ONCHANGE_MIXIN);\n\n// Register provided blocks.\ndefineBlocks(blocks);\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview List blocks for Blockly.\n * @suppress {checkTypes}\n */\n'use strict';\n\ngoog.module('Blockly.libraryBlocks.lists');\n\nconst xmlUtils = goog.require('Blockly.utils.xml');\nconst {Align} = goog.require('Blockly.Input');\n/* eslint-disable-next-line no-unused-vars */\nconst {Block} = goog.requireType('Blockly.Block');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockDefinition} = goog.requireType('Blockly.blocks');\nconst {ConnectionType} = goog.require('Blockly.ConnectionType');\nconst {FieldDropdown} = goog.require('Blockly.FieldDropdown');\nconst {Msg} = goog.require('Blockly.Msg');\nconst {Mutator} = goog.require('Blockly.Mutator');\n/* eslint-disable-next-line no-unused-vars */\nconst {Workspace} = goog.requireType('Blockly.Workspace');\nconst {createBlockDefinitionsFromJsonArray, defineBlocks} = goog.require('Blockly.common');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.FieldDropdown');\n\n\n/**\n * A dictionary of the block definitions provided by this module.\n * @type {!Object<string, !BlockDefinition>}\n */\nconst blocks = createBlockDefinitionsFromJsonArray([\n  // Block for creating an empty list\n  // The 'list_create_with' block is preferred as it is more flexible.\n  // <block type=\"lists_create_with\">\n  //   <mutation items=\"0\"></mutation>\n  // </block>\n  {\n    'type': 'lists_create_empty',\n    'message0': '%{BKY_LISTS_CREATE_EMPTY_TITLE}',\n    'output': 'Array',\n    'style': 'list_blocks',\n    'tooltip': '%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}',\n    'helpUrl': '%{BKY_LISTS_CREATE_EMPTY_HELPURL}',\n  },\n  // Block for creating a list with one element repeated.\n  {\n    'type': 'lists_repeat',\n    'message0': '%{BKY_LISTS_REPEAT_TITLE}',\n    'args0': [\n      {\n        'type': 'input_value',\n        'name': 'ITEM',\n      },\n      {\n        'type': 'input_value',\n        'name': 'NUM',\n        'check': 'Number',\n      },\n    ],\n    'output': 'Array',\n    'style': 'list_blocks',\n    'tooltip': '%{BKY_LISTS_REPEAT_TOOLTIP}',\n    'helpUrl': '%{BKY_LISTS_REPEAT_HELPURL}',\n  },\n  // Block for reversing a list.\n  {\n    'type': 'lists_reverse',\n    'message0': '%{BKY_LISTS_REVERSE_MESSAGE0}',\n    'args0': [\n      {\n        'type': 'input_value',\n        'name': 'LIST',\n        'check': 'Array',\n      },\n    ],\n    'output': 'Array',\n    'inputsInline': true,\n    'style': 'list_blocks',\n    'tooltip': '%{BKY_LISTS_REVERSE_TOOLTIP}',\n    'helpUrl': '%{BKY_LISTS_REVERSE_HELPURL}',\n  },\n  // Block for checking if a list is empty\n  {\n    'type': 'lists_isEmpty',\n    'message0': '%{BKY_LISTS_ISEMPTY_TITLE}',\n    'args0': [\n      {\n        'type': 'input_value',\n        'name': 'VALUE',\n        'check': ['String', 'Array'],\n      },\n    ],\n    'output': 'Boolean',\n    'style': 'list_blocks',\n    'tooltip': '%{BKY_LISTS_ISEMPTY_TOOLTIP}',\n    'helpUrl': '%{BKY_LISTS_ISEMPTY_HELPURL}',\n  },\n  // Block for getting the list length\n  {\n    'type': 'lists_length',\n    'message0': '%{BKY_LISTS_LENGTH_TITLE}',\n    'args0': [\n      {\n        'type': 'input_value',\n        'name': 'VALUE',\n        'check': ['String', 'Array'],\n      },\n    ],\n    'output': 'Number',\n    'style': 'list_blocks',\n    'tooltip': '%{BKY_LISTS_LENGTH_TOOLTIP}',\n    'helpUrl': '%{BKY_LISTS_LENGTH_HELPURL}',\n  },\n]);\nexports.blocks = blocks;\n\nblocks['lists_create_with'] = {\n  /**\n   * Block for creating a list with any number of elements of any type.\n   * @this {Block}\n   */\n  init: function() {\n    this.setHelpUrl(Msg['LISTS_CREATE_WITH_HELPURL']);\n    this.setStyle('list_blocks');\n    this.itemCount_ = 3;\n    this.updateShape_();\n    this.setOutput(true, 'Array');\n    this.setMutator(new Mutator(['lists_create_with_item']));\n    this.setTooltip(Msg['LISTS_CREATE_WITH_TOOLTIP']);\n  },\n  /**\n   * Create XML to represent list inputs.\n   * Backwards compatible serialization implementation.\n   * @return {!Element} XML storage element.\n   * @this {Block}\n   */\n  mutationToDom: function() {\n    const container = xmlUtils.createElement('mutation');\n    container.setAttribute('items', this.itemCount_);\n    return container;\n  },\n  /**\n   * Parse XML to restore the list inputs.\n   * Backwards compatible serialization implementation.\n   * @param {!Element} xmlElement XML storage element.\n   * @this {Block}\n   */\n  domToMutation: function(xmlElement) {\n    this.itemCount_ = parseInt(xmlElement.getAttribute('items'), 10);\n    this.updateShape_();\n  },\n  /**\n   * Returns the state of this block as a JSON serializable object.\n   * @return {{itemCount: number}} The state of this block, ie the item count.\n   */\n  saveExtraState: function() {\n    return {\n      'itemCount': this.itemCount_,\n    };\n  },\n  /**\n   * Applies the given state to this block.\n   * @param {*} state The state to apply to this block, ie the item count.\n   */\n  loadExtraState: function(state) {\n    this.itemCount_ = state['itemCount'];\n    this.updateShape_();\n  },\n  /**\n   * Populate the mutator's dialog with this block's components.\n   * @param {!Workspace} workspace Mutator's workspace.\n   * @return {!Block} Root block in mutator.\n   * @this {Block}\n   */\n  decompose: function(workspace) {\n    const containerBlock = workspace.newBlock('lists_create_with_container');\n    containerBlock.initSvg();\n    let connection = containerBlock.getInput('STACK').connection;\n    for (let i = 0; i < this.itemCount_; i++) {\n      const itemBlock = workspace.newBlock('lists_create_with_item');\n      itemBlock.initSvg();\n      connection.connect(itemBlock.previousConnection);\n      connection = itemBlock.nextConnection;\n    }\n    return containerBlock;\n  },\n  /**\n   * Reconfigure this block based on the mutator dialog's components.\n   * @param {!Block} containerBlock Root block in mutator.\n   * @this {Block}\n   */\n  compose: function(containerBlock) {\n    let itemBlock = containerBlock.getInputTargetBlock('STACK');\n    // Count number of inputs.\n    const connections = [];\n    while (itemBlock && !itemBlock.isInsertionMarker()) {\n      connections.push(itemBlock.valueConnection_);\n      itemBlock =\n          itemBlock.nextConnection && itemBlock.nextConnection.targetBlock();\n    }\n    // Disconnect any children that don't belong.\n    for (let i = 0; i < this.itemCount_; i++) {\n      const connection = this.getInput('ADD' + i).connection.targetConnection;\n      if (connection && connections.indexOf(connection) === -1) {\n        connection.disconnect();\n      }\n    }\n    this.itemCount_ = connections.length;\n    this.updateShape_();\n    // Reconnect any child blocks.\n    for (let i = 0; i < this.itemCount_; i++) {\n      Mutator.reconnect(connections[i], this, 'ADD' + i);\n    }\n  },\n  /**\n   * Store pointers to any connected child blocks.\n   * @param {!Block} containerBlock Root block in mutator.\n   * @this {Block}\n   */\n  saveConnections: function(containerBlock) {\n    let itemBlock = containerBlock.getInputTargetBlock('STACK');\n    let i = 0;\n    while (itemBlock) {\n      const input = this.getInput('ADD' + i);\n      itemBlock.valueConnection_ = input && input.connection.targetConnection;\n      itemBlock =\n          itemBlock.nextConnection && itemBlock.nextConnection.targetBlock();\n      i++;\n    }\n  },\n  /**\n   * Modify this block to have the correct number of inputs.\n   * @private\n   * @this {Block}\n   */\n  updateShape_: function() {\n    if (this.itemCount_ && this.getInput('EMPTY')) {\n      this.removeInput('EMPTY');\n    } else if (!this.itemCount_ && !this.getInput('EMPTY')) {\n      this.appendDummyInput('EMPTY').appendField(\n          Msg['LISTS_CREATE_EMPTY_TITLE']);\n    }\n    // Add new inputs.\n    for (let i = 0; i < this.itemCount_; i++) {\n      if (!this.getInput('ADD' + i)) {\n        const input = this.appendValueInput('ADD' + i).setAlign(Align.RIGHT);\n        if (i === 0) {\n          input.appendField(Msg['LISTS_CREATE_WITH_INPUT_WITH']);\n        }\n      }\n    }\n    // Remove deleted inputs.\n    for (let i = this.itemCount_; this.getInput('ADD' + i); i++) {\n      this.removeInput('ADD' + i);\n    }\n  },\n};\n\nblocks['lists_create_with_container'] = {\n  /**\n   * Mutator block for list container.\n   * @this {Block}\n   */\n  init: function() {\n    this.setStyle('list_blocks');\n    this.appendDummyInput().appendField(\n        Msg['LISTS_CREATE_WITH_CONTAINER_TITLE_ADD']);\n    this.appendStatementInput('STACK');\n    this.setTooltip(Msg['LISTS_CREATE_WITH_CONTAINER_TOOLTIP']);\n    this.contextMenu = false;\n  },\n};\n\nblocks['lists_create_with_item'] = {\n  /**\n   * Mutator block for adding items.\n   * @this {Block}\n   */\n  init: function() {\n    this.setStyle('list_blocks');\n    this.appendDummyInput().appendField(Msg['LISTS_CREATE_WITH_ITEM_TITLE']);\n    this.setPreviousStatement(true);\n    this.setNextStatement(true);\n    this.setTooltip(Msg['LISTS_CREATE_WITH_ITEM_TOOLTIP']);\n    this.contextMenu = false;\n  },\n};\n\nblocks['lists_indexOf'] = {\n  /**\n   * Block for finding an item in the list.\n   * @this {Block}\n   */\n  init: function() {\n    const OPERATORS = [\n      [Msg['LISTS_INDEX_OF_FIRST'], 'FIRST'],\n      [Msg['LISTS_INDEX_OF_LAST'], 'LAST'],\n    ];\n    this.setHelpUrl(Msg['LISTS_INDEX_OF_HELPURL']);\n    this.setStyle('list_blocks');\n    this.setOutput(true, 'Number');\n    this.appendValueInput('VALUE').setCheck('Array').appendField(\n        Msg['LISTS_INDEX_OF_INPUT_IN_LIST']);\n    this.appendValueInput('FIND').appendField(\n        new FieldDropdown(OPERATORS), 'END');\n    this.setInputsInline(true);\n    // Assign 'this' to a variable for use in the tooltip closure below.\n    const thisBlock = this;\n    this.setTooltip(function() {\n      return Msg['LISTS_INDEX_OF_TOOLTIP'].replace(\n          '%1', thisBlock.workspace.options.oneBasedIndex ? '0' : '-1');\n    });\n  },\n};\n\nblocks['lists_getIndex'] = {\n  /**\n   * Block for getting element at index.\n   * @this {Block}\n   */\n  init: function() {\n    const MODE = [\n      [Msg['LISTS_GET_INDEX_GET'], 'GET'],\n      [Msg['LISTS_GET_INDEX_GET_REMOVE'], 'GET_REMOVE'],\n      [Msg['LISTS_GET_INDEX_REMOVE'], 'REMOVE'],\n    ];\n    this.WHERE_OPTIONS = [\n      [Msg['LISTS_GET_INDEX_FROM_START'], 'FROM_START'],\n      [Msg['LISTS_GET_INDEX_FROM_END'], 'FROM_END'],\n      [Msg['LISTS_GET_INDEX_FIRST'], 'FIRST'],\n      [Msg['LISTS_GET_INDEX_LAST'], 'LAST'],\n      [Msg['LISTS_GET_INDEX_RANDOM'], 'RANDOM'],\n    ];\n    this.setHelpUrl(Msg['LISTS_GET_INDEX_HELPURL']);\n    this.setStyle('list_blocks');\n    const modeMenu = new FieldDropdown(\n        MODE,\n        /**\n         * @param {*} value The input value.\n         * @this {FieldDropdown}\n         */\n        function(value) {\n          const isStatement = (value === 'REMOVE');\n          this.getSourceBlock().updateStatement_(isStatement);\n        });\n    this.appendValueInput('VALUE').setCheck('Array').appendField(\n        Msg['LISTS_GET_INDEX_INPUT_IN_LIST']);\n    this.appendDummyInput()\n        .appendField(modeMenu, 'MODE')\n        .appendField('', 'SPACE');\n    this.appendDummyInput('AT');\n    if (Msg['LISTS_GET_INDEX_TAIL']) {\n      this.appendDummyInput('TAIL').appendField(Msg['LISTS_GET_INDEX_TAIL']);\n    }\n    this.setInputsInline(true);\n    this.setOutput(true);\n    this.updateAt_(true);\n    // Assign 'this' to a variable for use in the tooltip closure below.\n    const thisBlock = this;\n    this.setTooltip(function() {\n      const mode = thisBlock.getFieldValue('MODE');\n      const where = thisBlock.getFieldValue('WHERE');\n      let tooltip = '';\n      switch (mode + ' ' + where) {\n        case 'GET FROM_START':\n        case 'GET FROM_END':\n          tooltip = Msg['LISTS_GET_INDEX_TOOLTIP_GET_FROM'];\n          break;\n        case 'GET FIRST':\n          tooltip = Msg['LISTS_GET_INDEX_TOOLTIP_GET_FIRST'];\n          break;\n        case 'GET LAST':\n          tooltip = Msg['LISTS_GET_INDEX_TOOLTIP_GET_LAST'];\n          break;\n        case 'GET RANDOM':\n          tooltip = Msg['LISTS_GET_INDEX_TOOLTIP_GET_RANDOM'];\n          break;\n        case 'GET_REMOVE FROM_START':\n        case 'GET_REMOVE FROM_END':\n          tooltip = Msg['LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM'];\n          break;\n        case 'GET_REMOVE FIRST':\n          tooltip = Msg['LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST'];\n          break;\n        case 'GET_REMOVE LAST':\n          tooltip = Msg['LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST'];\n          break;\n        case 'GET_REMOVE RANDOM':\n          tooltip = Msg['LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM'];\n          break;\n        case 'REMOVE FROM_START':\n        case 'REMOVE FROM_END':\n          tooltip = Msg['LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM'];\n          break;\n        case 'REMOVE FIRST':\n          tooltip = Msg['LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST'];\n          break;\n        case 'REMOVE LAST':\n          tooltip = Msg['LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST'];\n          break;\n        case 'REMOVE RANDOM':\n          tooltip = Msg['LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM'];\n          break;\n      }\n      if (where === 'FROM_START' || where === 'FROM_END') {\n        const msg = (where === 'FROM_START') ?\n            Msg['LISTS_INDEX_FROM_START_TOOLTIP'] :\n            Msg['LISTS_INDEX_FROM_END_TOOLTIP'];\n        tooltip += '  ' +\n            msg.replace(\n                '%1', thisBlock.workspace.options.oneBasedIndex ? '#1' : '#0');\n      }\n      return tooltip;\n    });\n  },\n  /**\n   * Create XML to represent whether the block is a statement or a value.\n   * Also represent whether there is an 'AT' input.\n   * @return {!Element} XML storage element.\n   * @this {Block}\n   */\n  mutationToDom: function() {\n    const container = xmlUtils.createElement('mutation');\n    const isStatement = !this.outputConnection;\n    container.setAttribute('statement', isStatement);\n    const isAt = this.getInput('AT').type === ConnectionType.INPUT_VALUE;\n    container.setAttribute('at', isAt);\n    return container;\n  },\n  /**\n   * Parse XML to restore the 'AT' input.\n   * @param {!Element} xmlElement XML storage element.\n   * @this {Block}\n   */\n  domToMutation: function(xmlElement) {\n    // Note: Until January 2013 this block did not have mutations,\n    // so 'statement' defaults to false and 'at' defaults to true.\n    const isStatement = (xmlElement.getAttribute('statement') === 'true');\n    this.updateStatement_(isStatement);\n    const isAt = (xmlElement.getAttribute('at') !== 'false');\n    this.updateAt_(isAt);\n  },\n\n  // This block does not need JSO serialization hooks (saveExtraState and\n  // loadExtraState) because the state of this object is already encoded in the\n  // dropdown values.\n  // XML hooks are kept for backwards compatibility.\n\n  /**\n   * Switch between a value block and a statement block.\n   * @param {boolean} newStatement True if the block should be a statement.\n   *     False if the block should be a value.\n   * @private\n   * @this {Block}\n   */\n  updateStatement_: function(newStatement) {\n    const oldStatement = !this.outputConnection;\n    if (newStatement !== oldStatement) {\n      this.unplug(true, true);\n      if (newStatement) {\n        this.setOutput(false);\n        this.setPreviousStatement(true);\n        this.setNextStatement(true);\n      } else {\n        this.setPreviousStatement(false);\n        this.setNextStatement(false);\n        this.setOutput(true);\n      }\n    }\n  },\n  /**\n   * Create or delete an input for the numeric index.\n   * @param {boolean} isAt True if the input should exist.\n   * @private\n   * @this {Block}\n   */\n  updateAt_: function(isAt) {\n    // Destroy old 'AT' and 'ORDINAL' inputs.\n    this.removeInput('AT');\n    this.removeInput('ORDINAL', true);\n    // Create either a value 'AT' input or a dummy input.\n    if (isAt) {\n      this.appendValueInput('AT').setCheck('Number');\n      if (Msg['ORDINAL_NUMBER_SUFFIX']) {\n        this.appendDummyInput('ORDINAL').appendField(\n            Msg['ORDINAL_NUMBER_SUFFIX']);\n      }\n    } else {\n      this.appendDummyInput('AT');\n    }\n    const menu = new FieldDropdown(\n        this.WHERE_OPTIONS,\n        /**\n         * @param {*} value The input value.\n         * @this {FieldDropdown}\n         * @returns {null|undefined} Null if the field has been replaced;\n         *     otherwise undefined.\n         */\n        function(value) {\n          const newAt = (value === 'FROM_START') || (value === 'FROM_END');\n          // The 'isAt' variable is available due to this function being a\n          // closure.\n          if (newAt !== isAt) {\n            const block = this.getSourceBlock();\n            block.updateAt_(newAt);\n            // This menu has been destroyed and replaced.  Update the\n            // replacement.\n            block.setFieldValue(value, 'WHERE');\n            return null;\n          }\n          return undefined;\n        });\n    this.getInput('AT').appendField(menu, 'WHERE');\n    if (Msg['LISTS_GET_INDEX_TAIL']) {\n      this.moveInputBefore('TAIL', null);\n    }\n  },\n};\n\nblocks['lists_setIndex'] = {\n  /**\n   * Block for setting the element at index.\n   * @this {Block}\n   */\n  init: function() {\n    const MODE = [\n      [Msg['LISTS_SET_INDEX_SET'], 'SET'],\n      [Msg['LISTS_SET_INDEX_INSERT'], 'INSERT'],\n    ];\n    this.WHERE_OPTIONS = [\n      [Msg['LISTS_GET_INDEX_FROM_START'], 'FROM_START'],\n      [Msg['LISTS_GET_INDEX_FROM_END'], 'FROM_END'],\n      [Msg['LISTS_GET_INDEX_FIRST'], 'FIRST'],\n      [Msg['LISTS_GET_INDEX_LAST'], 'LAST'],\n      [Msg['LISTS_GET_INDEX_RANDOM'], 'RANDOM'],\n    ];\n    this.setHelpUrl(Msg['LISTS_SET_INDEX_HELPURL']);\n    this.setStyle('list_blocks');\n    this.appendValueInput('LIST').setCheck('Array').appendField(\n        Msg['LISTS_SET_INDEX_INPUT_IN_LIST']);\n    this.appendDummyInput()\n        .appendField(new FieldDropdown(MODE), 'MODE')\n        .appendField('', 'SPACE');\n    this.appendDummyInput('AT');\n    this.appendValueInput('TO').appendField(Msg['LISTS_SET_INDEX_INPUT_TO']);\n    this.setInputsInline(true);\n    this.setPreviousStatement(true);\n    this.setNextStatement(true);\n    this.setTooltip(Msg['LISTS_SET_INDEX_TOOLTIP']);\n    this.updateAt_(true);\n    // Assign 'this' to a variable for use in the tooltip closure below.\n    const thisBlock = this;\n    this.setTooltip(function() {\n      const mode = thisBlock.getFieldValue('MODE');\n      const where = thisBlock.getFieldValue('WHERE');\n      let tooltip = '';\n      switch (mode + ' ' + where) {\n        case 'SET FROM_START':\n        case 'SET FROM_END':\n          tooltip = Msg['LISTS_SET_INDEX_TOOLTIP_SET_FROM'];\n          break;\n        case 'SET FIRST':\n          tooltip = Msg['LISTS_SET_INDEX_TOOLTIP_SET_FIRST'];\n          break;\n        case 'SET LAST':\n          tooltip = Msg['LISTS_SET_INDEX_TOOLTIP_SET_LAST'];\n          break;\n        case 'SET RANDOM':\n          tooltip = Msg['LISTS_SET_INDEX_TOOLTIP_SET_RANDOM'];\n          break;\n        case 'INSERT FROM_START':\n        case 'INSERT FROM_END':\n          tooltip = Msg['LISTS_SET_INDEX_TOOLTIP_INSERT_FROM'];\n          break;\n        case 'INSERT FIRST':\n          tooltip = Msg['LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST'];\n          break;\n        case 'INSERT LAST':\n          tooltip = Msg['LISTS_SET_INDEX_TOOLTIP_INSERT_LAST'];\n          break;\n        case 'INSERT RANDOM':\n          tooltip = Msg['LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM'];\n          break;\n      }\n      if (where === 'FROM_START' || where === 'FROM_END') {\n        tooltip += '  ' +\n            Msg['LISTS_INDEX_FROM_START_TOOLTIP'].replace(\n                '%1', thisBlock.workspace.options.oneBasedIndex ? '#1' : '#0');\n      }\n      return tooltip;\n    });\n  },\n  /**\n   * Create XML to represent whether there is an 'AT' input.\n   * @return {!Element} XML storage element.\n   * @this {Block}\n   */\n  mutationToDom: function() {\n    const container = xmlUtils.createElement('mutation');\n    const isAt = this.getInput('AT').type === ConnectionType.INPUT_VALUE;\n    container.setAttribute('at', isAt);\n    return container;\n  },\n  /**\n   * Parse XML to restore the 'AT' input.\n   * @param {!Element} xmlElement XML storage element.\n   * @this {Block}\n   */\n  domToMutation: function(xmlElement) {\n    // Note: Until January 2013 this block did not have mutations,\n    // so 'at' defaults to true.\n    const isAt = (xmlElement.getAttribute('at') !== 'false');\n    this.updateAt_(isAt);\n  },\n\n  // This block does not need JSO serialization hooks (saveExtraState and\n  // loadExtraState) because the state of this object is already encoded in the\n  // dropdown values.\n  // XML hooks are kept for backwards compatibility.\n\n  /**\n   * Create or delete an input for the numeric index.\n   * @param {boolean} isAt True if the input should exist.\n   * @private\n   * @this {Block}\n   */\n  updateAt_: function(isAt) {\n    // Destroy old 'AT' and 'ORDINAL' input.\n    this.removeInput('AT');\n    this.removeInput('ORDINAL', true);\n    // Create either a value 'AT' input or a dummy input.\n    if (isAt) {\n      this.appendValueInput('AT').setCheck('Number');\n      if (Msg['ORDINAL_NUMBER_SUFFIX']) {\n        this.appendDummyInput('ORDINAL').appendField(\n            Msg['ORDINAL_NUMBER_SUFFIX']);\n      }\n    } else {\n      this.appendDummyInput('AT');\n    }\n    const menu = new FieldDropdown(\n        this.WHERE_OPTIONS,\n        /**\n         * @param {*} value The input value.\n         * @this {FieldDropdown}\n         * @returns {null|undefined} Null if the field has been replaced;\n         *     otherwise undefined.\n         */\n        function(value) {\n          const newAt = (value === 'FROM_START') || (value === 'FROM_END');\n          // The 'isAt' variable is available due to this function being a\n          // closure.\n          if (newAt !== isAt) {\n            const block = this.getSourceBlock();\n            block.updateAt_(newAt);\n            // This menu has been destroyed and replaced.  Update the\n            // replacement.\n            block.setFieldValue(value, 'WHERE');\n            return null;\n          }\n          return undefined;\n        });\n    this.moveInputBefore('AT', 'TO');\n    if (this.getInput('ORDINAL')) {\n      this.moveInputBefore('ORDINAL', 'TO');\n    }\n\n    this.getInput('AT').appendField(menu, 'WHERE');\n  },\n};\n\nblocks['lists_getSublist'] = {\n  /**\n   * Block for getting sublist.\n   * @this {Block}\n   */\n  init: function() {\n    this['WHERE_OPTIONS_1'] = [\n      [Msg['LISTS_GET_SUBLIST_START_FROM_START'], 'FROM_START'],\n      [Msg['LISTS_GET_SUBLIST_START_FROM_END'], 'FROM_END'],\n      [Msg['LISTS_GET_SUBLIST_START_FIRST'], 'FIRST'],\n    ];\n    this['WHERE_OPTIONS_2'] = [\n      [Msg['LISTS_GET_SUBLIST_END_FROM_START'], 'FROM_START'],\n      [Msg['LISTS_GET_SUBLIST_END_FROM_END'], 'FROM_END'],\n      [Msg['LISTS_GET_SUBLIST_END_LAST'], 'LAST'],\n    ];\n    this.setHelpUrl(Msg['LISTS_GET_SUBLIST_HELPURL']);\n    this.setStyle('list_blocks');\n    this.appendValueInput('LIST').setCheck('Array').appendField(\n        Msg['LISTS_GET_SUBLIST_INPUT_IN_LIST']);\n    this.appendDummyInput('AT1');\n    this.appendDummyInput('AT2');\n    if (Msg['LISTS_GET_SUBLIST_TAIL']) {\n      this.appendDummyInput('TAIL').appendField(Msg['LISTS_GET_SUBLIST_TAIL']);\n    }\n    this.setInputsInline(true);\n    this.setOutput(true, 'Array');\n    this.updateAt_(1, true);\n    this.updateAt_(2, true);\n    this.setTooltip(Msg['LISTS_GET_SUBLIST_TOOLTIP']);\n  },\n  /**\n   * Create XML to represent whether there are 'AT' inputs.\n   * @return {!Element} XML storage element.\n   * @this {Block}\n   */\n  mutationToDom: function() {\n    const container = xmlUtils.createElement('mutation');\n    const isAt1 = this.getInput('AT1').type === ConnectionType.INPUT_VALUE;\n    container.setAttribute('at1', isAt1);\n    const isAt2 = this.getInput('AT2').type === ConnectionType.INPUT_VALUE;\n    container.setAttribute('at2', isAt2);\n    return container;\n  },\n  /**\n   * Parse XML to restore the 'AT' inputs.\n   * @param {!Element} xmlElement XML storage element.\n   * @this {Block}\n   */\n  domToMutation: function(xmlElement) {\n    const isAt1 = (xmlElement.getAttribute('at1') === 'true');\n    const isAt2 = (xmlElement.getAttribute('at2') === 'true');\n    this.updateAt_(1, isAt1);\n    this.updateAt_(2, isAt2);\n  },\n\n  // This block does not need JSO serialization hooks (saveExtraState and\n  // loadExtraState) because the state of this object is already encoded in the\n  // dropdown values.\n  // XML hooks are kept for backwards compatibility.\n\n  /**\n   * Create or delete an input for a numeric index.\n   * This block has two such inputs, independent of each other.\n   * @param {number} n Specify first or second input (1 or 2).\n   * @param {boolean} isAt True if the input should exist.\n   * @private\n   * @this {Block}\n   */\n  updateAt_: function(n, isAt) {\n    // Create or delete an input for the numeric index.\n    // Destroy old 'AT' and 'ORDINAL' inputs.\n    this.removeInput('AT' + n);\n    this.removeInput('ORDINAL' + n, true);\n    // Create either a value 'AT' input or a dummy input.\n    if (isAt) {\n      this.appendValueInput('AT' + n).setCheck('Number');\n      if (Msg['ORDINAL_NUMBER_SUFFIX']) {\n        this.appendDummyInput('ORDINAL' + n)\n            .appendField(Msg['ORDINAL_NUMBER_SUFFIX']);\n      }\n    } else {\n      this.appendDummyInput('AT' + n);\n    }\n    const menu = new FieldDropdown(\n        this['WHERE_OPTIONS_' + n],\n        /**\n         * @param {*} value The input value.\n         * @this {FieldDropdown}\n         * @returns {null|undefined} Null if the field has been replaced;\n         *     otherwise undefined.\n         */\n        function(value) {\n          const newAt = (value === 'FROM_START') || (value === 'FROM_END');\n          // The 'isAt' variable is available due to this function being a\n          // closure.\n          if (newAt !== isAt) {\n            const block = this.getSourceBlock();\n            block.updateAt_(n, newAt);\n            // This menu has been destroyed and replaced.\n            // Update the replacement.\n            block.setFieldValue(value, 'WHERE' + n);\n            return null;\n          }\n        });\n    this.getInput('AT' + n).appendField(menu, 'WHERE' + n);\n    if (n === 1) {\n      this.moveInputBefore('AT1', 'AT2');\n      if (this.getInput('ORDINAL1')) {\n        this.moveInputBefore('ORDINAL1', 'AT2');\n      }\n    }\n    if (Msg['LISTS_GET_SUBLIST_TAIL']) {\n      this.moveInputBefore('TAIL', null);\n    }\n  },\n};\n\nblocks['lists_sort'] = {\n  /**\n   * Block for sorting a list.\n   * @this {Block}\n   */\n  init: function() {\n    this.jsonInit({\n      'message0': Msg['LISTS_SORT_TITLE'],\n      'args0': [\n        {\n          'type': 'field_dropdown',\n          'name': 'TYPE',\n          'options': [\n            [Msg['LISTS_SORT_TYPE_NUMERIC'], 'NUMERIC'],\n            [Msg['LISTS_SORT_TYPE_TEXT'], 'TEXT'],\n            [Msg['LISTS_SORT_TYPE_IGNORECASE'], 'IGNORE_CASE'],\n          ],\n        },\n        {\n          'type': 'field_dropdown',\n          'name': 'DIRECTION',\n          'options': [\n            [Msg['LISTS_SORT_ORDER_ASCENDING'], '1'],\n            [Msg['LISTS_SORT_ORDER_DESCENDING'], '-1'],\n          ],\n        },\n        {\n          'type': 'input_value',\n          'name': 'LIST',\n          'check': 'Array',\n        },\n      ],\n      'output': 'Array',\n      'style': 'list_blocks',\n      'tooltip': Msg['LISTS_SORT_TOOLTIP'],\n      'helpUrl': Msg['LISTS_SORT_HELPURL'],\n    });\n  },\n};\n\nblocks['lists_split'] = {\n  /**\n   * Block for splitting text into a list, or joining a list into text.\n   * @this {Block}\n   */\n  init: function() {\n    // Assign 'this' to a variable for use in the closures below.\n    const thisBlock = this;\n    const dropdown = new FieldDropdown(\n        [\n          [Msg['LISTS_SPLIT_LIST_FROM_TEXT'], 'SPLIT'],\n          [Msg['LISTS_SPLIT_TEXT_FROM_LIST'], 'JOIN'],\n        ],\n        function(newMode) {\n          thisBlock.updateType_(newMode);\n        });\n    this.setHelpUrl(Msg['LISTS_SPLIT_HELPURL']);\n    this.setStyle('list_blocks');\n    this.appendValueInput('INPUT').setCheck('String').appendField(\n        dropdown, 'MODE');\n    this.appendValueInput('DELIM').setCheck('String').appendField(\n        Msg['LISTS_SPLIT_WITH_DELIMITER']);\n    this.setInputsInline(true);\n    this.setOutput(true, 'Array');\n    this.setTooltip(function() {\n      const mode = thisBlock.getFieldValue('MODE');\n      if (mode === 'SPLIT') {\n        return Msg['LISTS_SPLIT_TOOLTIP_SPLIT'];\n      } else if (mode === 'JOIN') {\n        return Msg['LISTS_SPLIT_TOOLTIP_JOIN'];\n      }\n      throw Error('Unknown mode: ' + mode);\n    });\n  },\n  /**\n   * Modify this block to have the correct input and output types.\n   * @param {string} newMode Either 'SPLIT' or 'JOIN'.\n   * @private\n   * @this {Block}\n   */\n  updateType_: function(newMode) {\n    const mode = this.getFieldValue('MODE');\n    if (mode !== newMode) {\n      const inputConnection = this.getInput('INPUT').connection;\n      inputConnection.setShadowDom(null);\n      const inputBlock = inputConnection.targetBlock();\n      if (inputBlock) {\n        inputConnection.disconnect();\n        if (inputBlock.isShadow()) {\n          inputBlock.dispose();\n        } else {\n          this.bumpNeighbours();\n        }\n      }\n    }\n    if (newMode === 'SPLIT') {\n      this.outputConnection.setCheck('Array');\n      this.getInput('INPUT').setCheck('String');\n    } else {\n      this.outputConnection.setCheck('String');\n      this.getInput('INPUT').setCheck('Array');\n    }\n  },\n  /**\n   * Create XML to represent the input and output types.\n   * @return {!Element} XML storage element.\n   * @this {Block}\n   */\n  mutationToDom: function() {\n    const container = xmlUtils.createElement('mutation');\n    container.setAttribute('mode', this.getFieldValue('MODE'));\n    return container;\n  },\n  /**\n   * Parse XML to restore the input and output types.\n   * @param {!Element} xmlElement XML storage element.\n   * @this {Block}\n   */\n  domToMutation: function(xmlElement) {\n    this.updateType_(xmlElement.getAttribute('mode'));\n  },\n\n  // This block does not need JSO serialization hooks (saveExtraState and\n  // loadExtraState) because the state of this object is already encoded in the\n  // dropdown values.\n  // XML hooks are kept for backwards compatibility.\n};\n\n// Register provided blocks.\ndefineBlocks(blocks);\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Colour blocks for Blockly.\n */\n'use strict';\n\ngoog.module('Blockly.libraryBlocks.colour');\n\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockDefinition} = goog.requireType('Blockly.blocks');\nconst {createBlockDefinitionsFromJsonArray, defineBlocks} = goog.require('Blockly.common');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.FieldColour');\n\n\n/**\n * A dictionary of the block definitions provided by this module.\n * @type {!Object<string, !BlockDefinition>}\n */\nconst blocks = createBlockDefinitionsFromJsonArray([\n  // Block for colour picker.\n  {\n    'type': 'colour_picker',\n    'message0': '%1',\n    'args0': [\n      {\n        'type': 'field_colour',\n        'name': 'COLOUR',\n        'colour': '#ff0000',\n      },\n    ],\n    'output': 'Colour',\n    'helpUrl': '%{BKY_COLOUR_PICKER_HELPURL}',\n    'style': 'colour_blocks',\n    'tooltip': '%{BKY_COLOUR_PICKER_TOOLTIP}',\n    'extensions': ['parent_tooltip_when_inline'],\n  },\n\n  // Block for random colour.\n  {\n    'type': 'colour_random',\n    'message0': '%{BKY_COLOUR_RANDOM_TITLE}',\n    'output': 'Colour',\n    'helpUrl': '%{BKY_COLOUR_RANDOM_HELPURL}',\n    'style': 'colour_blocks',\n    'tooltip': '%{BKY_COLOUR_RANDOM_TOOLTIP}',\n  },\n\n  // Block for composing a colour from RGB components.\n  {\n    'type': 'colour_rgb',\n    'message0':\n        '%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3',\n    'args0': [\n      {\n        'type': 'input_value',\n        'name': 'RED',\n        'check': 'Number',\n        'align': 'RIGHT',\n      },\n      {\n        'type': 'input_value',\n        'name': 'GREEN',\n        'check': 'Number',\n        'align': 'RIGHT',\n      },\n      {\n        'type': 'input_value',\n        'name': 'BLUE',\n        'check': 'Number',\n        'align': 'RIGHT',\n      },\n    ],\n    'output': 'Colour',\n    'helpUrl': '%{BKY_COLOUR_RGB_HELPURL}',\n    'style': 'colour_blocks',\n    'tooltip': '%{BKY_COLOUR_RGB_TOOLTIP}',\n  },\n\n  // Block for blending two colours together.\n  {\n    'type': 'colour_blend',\n    'message0': '%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} ' +\n        '%1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3',\n    'args0': [\n      {\n        'type': 'input_value',\n        'name': 'COLOUR1',\n        'check': 'Colour',\n        'align': 'RIGHT',\n      },\n      {\n        'type': 'input_value',\n        'name': 'COLOUR2',\n        'check': 'Colour',\n        'align': 'RIGHT',\n      },\n      {\n        'type': 'input_value',\n        'name': 'RATIO',\n        'check': 'Number',\n        'align': 'RIGHT',\n      },\n    ],\n    'output': 'Colour',\n    'helpUrl': '%{BKY_COLOUR_BLEND_HELPURL}',\n    'style': 'colour_blocks',\n    'tooltip': '%{BKY_COLOUR_BLEND_TOOLTIP}',\n  },\n]);\nexports.blocks = blocks;\n\n// Register provided blocks.\ndefineBlocks(blocks);\n","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview All the blocks.  (Entry point for blocks_compressed.js.)\n * @suppress {extraRequire}\n */\n'use strict';\n\ngoog.module('Blockly.libraryBlocks');\ngoog.module.declareLegacyNamespace();\n\nconst colour = goog.require('Blockly.libraryBlocks.colour');\nconst lists = goog.require('Blockly.libraryBlocks.lists');\nconst logic = goog.require('Blockly.libraryBlocks.logic');\nconst loops = goog.require('Blockly.libraryBlocks.loops');\nconst math = goog.require('Blockly.libraryBlocks.math');\nconst procedures = goog.require('Blockly.libraryBlocks.procedures');\nconst texts = goog.require('Blockly.libraryBlocks.texts');\nconst variables = goog.require('Blockly.libraryBlocks.variables');\nconst variablesDynamic = goog.require('Blockly.libraryBlocks.variablesDynamic');\n/* eslint-disable-next-line no-unused-vars */\nconst {BlockDefinition} = goog.requireType('Blockly.blocks');\n\n\nexports.colour = colour;\nexports.lists = lists;\nexports.logic = logic;\nexports.loops = loops;\nexports.math = math;\nexports.procedures = procedures;\nexports.texts = texts;\nexports.variables = variables;\nexports.variablesDynamic = variablesDynamic;\n\n/**\n * A dictionary of the block definitions provided by all the\n * Blockly.libraryBlocks.* modules.\n * @type {!Object<string, !BlockDefinition>}\n */\nconst blocks = Object.assign(\n    {}, colour.blocks, lists.blocks, logic.blocks, loops.blocks, math.blocks,\n    procedures.blocks, variables.blocks, variablesDynamic.blocks);\nexports.blocks = blocks;\n","/* eslint-disable */\n;(function(root, factory) {\n  if (typeof define === 'function' && define.amd) { // AMD\n    define(['./core-browser', './msg/en', './blocks', './javascript'], factory);\n  } else if (typeof exports === 'object') { // Node.js\n    module.exports = factory(require('./core-browser'), require('./msg/en'), require('./blocks'), require('./javascript'));\n  } else { // Browser\n    root.Blockly = factory(root.Blockly, root.En, root.BlocklyBlocks, root.BlocklyJS);\n  }\n}(this, function(Blockly, En, BlocklyBlocks, BlocklyJS) {\n/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Blockly module for the browser. This includes Blockly core\n * and built in blocks, the JavaScript code generator and the English block\n * localization files.\n */\n\n/* eslint-disable */\n'use strict';\n\n// Include the EN Locale by default.\nBlockly.setLocale(En);\n\nreturn Blockly;\n})); \n","/* eslint-disable */\n;(function(root, factory) {\n  if (typeof define === 'function' && define.amd) { // AMD\n    define(['./blockly'], factory);\n  } else if (typeof exports === 'object') { // Node.js\n    module.exports = factory(require('./blockly'));\n  } else { // Browser\n    root.Blockly = factory(root.Blockly);\n  }\n}(this, function(Blockly) {\n/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Blockly core module for the browser. It includes blockly.js\n *               and adds a helper method for setting the locale.\n */\n\n/* eslint-disable */\n'use strict';\n\n// Add a helper method to set the Blockly locale.\nBlockly.setLocale = function (locale) {\n  Object.keys(locale).forEach(function (k) {\n    Blockly.Msg[k] = locale[k];\n  });\n};\n\nreturn Blockly;\n})); \n","/* eslint-disable */\n;(function(root, factory) {\n  if (typeof define === 'function' && define.amd) { // AMD\n    define(['./browser'], factory);\n  } else if (typeof exports === 'object') { // Node.js\n    module.exports = factory(require('./node'));\n  } else { // Browser\n    root.Blockly = factory(root.Blockly);\n  }\n}(this, function(Blockly) {\n/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Blockly module; this is a wrapper which selects\n *     either browser.js or node.js, depending on which environment we\n *     are running in.\n */\n\nreturn Blockly;\n})); \n","/* eslint-disable */\n;(function(root, factory) {\n  if (typeof define === 'function' && define.amd) { // AMD\n    define(['./core', './javascript_compressed.js'], factory);\n  } else if (typeof exports === 'object') { // Node.js\n    module.exports = factory(require('./core'), require('./javascript_compressed.js'));\n  } else { // Browser\n    root.BlocklyJavaScript = factory(root.Blockly, root.BlocklyJavaScript);\n  }\n}(this, function(Blockly, BlocklyJavaScript) {\n/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview JavaScript Generator module; just a wrapper for\n *     javascript_compressed.js.\n */\n\nreturn BlocklyJavaScript;\n})); \n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Helper functions for generating JavaScript for blocks.\n * @suppress {checkTypes|globalThis}\n */\n'use strict';\n\ngoog.module('Blockly.JavaScript');\ngoog.module.declareLegacyNamespace();\n\nconst Variables = goog.require('Blockly.Variables');\nconst objectUtils = goog.require('Blockly.utils.object');\nconst stringUtils = goog.require('Blockly.utils.string');\nconst {Block} = goog.requireType('Blockly.Block');\nconst {Generator} = goog.require('Blockly.Generator');\nconst {globalThis} = goog.require('Blockly.utils.global');\nconst {inputTypes} = goog.require('Blockly.inputTypes');\nconst {Names, NameType} = goog.require('Blockly.Names');\nconst {Workspace} = goog.requireType('Blockly.Workspace');\n\n\n/**\n * JavaScript code generator.\n * @type {!Generator}\n */\nconst JavaScript = new Generator('JavaScript');\n\n/**\n * List of illegal variable names.\n * This is not intended to be a security feature.  Blockly is 100% client-side,\n * so bypassing this list is trivial.  This is intended to prevent users from\n * accidentally clobbering a built-in object or function.\n */\nJavaScript.addReservedWords(\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Lexical_grammar#Keywords\n    'break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,' +\n    'enum,' +\n    'implements,interface,let,package,private,protected,public,static,' +\n    'await,' +\n    'null,true,false,' +\n    // Magic variable.\n    'arguments,' +\n    // Everything in the current environment (835 items in Chrome, 104 in Node).\n    Object.getOwnPropertyNames(globalThis).join(','));\n\n/**\n * Order of operation ENUMs.\n * https://developer.mozilla.org/en/JavaScript/Reference/Operators/Operator_Precedence\n */\nJavaScript.ORDER_ATOMIC = 0;            // 0 \"\" ...\nJavaScript.ORDER_NEW = 1.1;             // new\nJavaScript.ORDER_MEMBER = 1.2;          // . []\nJavaScript.ORDER_FUNCTION_CALL = 2;     // ()\nJavaScript.ORDER_INCREMENT = 3;         // ++\nJavaScript.ORDER_DECREMENT = 3;         // --\nJavaScript.ORDER_BITWISE_NOT = 4.1;     // ~\nJavaScript.ORDER_UNARY_PLUS = 4.2;      // +\nJavaScript.ORDER_UNARY_NEGATION = 4.3;  // -\nJavaScript.ORDER_LOGICAL_NOT = 4.4;     // !\nJavaScript.ORDER_TYPEOF = 4.5;          // typeof\nJavaScript.ORDER_VOID = 4.6;            // void\nJavaScript.ORDER_DELETE = 4.7;          // delete\nJavaScript.ORDER_AWAIT = 4.8;           // await\nJavaScript.ORDER_EXPONENTIATION = 5.0;  // **\nJavaScript.ORDER_MULTIPLICATION = 5.1;  // *\nJavaScript.ORDER_DIVISION = 5.2;        // /\nJavaScript.ORDER_MODULUS = 5.3;         // %\nJavaScript.ORDER_SUBTRACTION = 6.1;     // -\nJavaScript.ORDER_ADDITION = 6.2;        // +\nJavaScript.ORDER_BITWISE_SHIFT = 7;     // << >> >>>\nJavaScript.ORDER_RELATIONAL = 8;        // < <= > >=\nJavaScript.ORDER_IN = 8;                // in\nJavaScript.ORDER_INSTANCEOF = 8;        // instanceof\nJavaScript.ORDER_EQUALITY = 9;          // == != === !==\nJavaScript.ORDER_BITWISE_AND = 10;      // &\nJavaScript.ORDER_BITWISE_XOR = 11;      // ^\nJavaScript.ORDER_BITWISE_OR = 12;       // |\nJavaScript.ORDER_LOGICAL_AND = 13;      // &&\nJavaScript.ORDER_LOGICAL_OR = 14;       // ||\nJavaScript.ORDER_CONDITIONAL = 15;      // ?:\nJavaScript.ORDER_ASSIGNMENT = 16;       // = += -= **= *= /= %= <<= >>= ...\nJavaScript.ORDER_YIELD = 17;            // yield\nJavaScript.ORDER_COMMA = 18;            // ,\nJavaScript.ORDER_NONE = 99;             // (...)\n\n/**\n * List of outer-inner pairings that do NOT require parentheses.\n * @type {!Array<!Array<number>>}\n */\nJavaScript.ORDER_OVERRIDES = [\n  // (foo()).bar -> foo().bar\n  // (foo())[0] -> foo()[0]\n  [JavaScript.ORDER_FUNCTION_CALL, JavaScript.ORDER_MEMBER],\n  // (foo())() -> foo()()\n  [JavaScript.ORDER_FUNCTION_CALL, JavaScript.ORDER_FUNCTION_CALL],\n  // (foo.bar).baz -> foo.bar.baz\n  // (foo.bar)[0] -> foo.bar[0]\n  // (foo[0]).bar -> foo[0].bar\n  // (foo[0])[1] -> foo[0][1]\n  [JavaScript.ORDER_MEMBER, JavaScript.ORDER_MEMBER],\n  // (foo.bar)() -> foo.bar()\n  // (foo[0])() -> foo[0]()\n  [JavaScript.ORDER_MEMBER, JavaScript.ORDER_FUNCTION_CALL],\n\n  // !(!foo) -> !!foo\n  [JavaScript.ORDER_LOGICAL_NOT, JavaScript.ORDER_LOGICAL_NOT],\n  // a * (b * c) -> a * b * c\n  [JavaScript.ORDER_MULTIPLICATION, JavaScript.ORDER_MULTIPLICATION],\n  // a + (b + c) -> a + b + c\n  [JavaScript.ORDER_ADDITION, JavaScript.ORDER_ADDITION],\n  // a && (b && c) -> a && b && c\n  [JavaScript.ORDER_LOGICAL_AND, JavaScript.ORDER_LOGICAL_AND],\n  // a || (b || c) -> a || b || c\n  [JavaScript.ORDER_LOGICAL_OR, JavaScript.ORDER_LOGICAL_OR]\n];\n\n/**\n * Whether the init method has been called.\n * @type {?boolean}\n */\nJavaScript.isInitialized = false;\n\n/**\n * Initialise the database of variable names.\n * @param {!Workspace} workspace Workspace to generate code from.\n */\nJavaScript.init = function(workspace) {\n  // Call Blockly.Generator's init.\n  Object.getPrototypeOf(this).init.call(this);\n\n  if (!this.nameDB_) {\n    this.nameDB_ = new Names(this.RESERVED_WORDS_);\n  } else {\n    this.nameDB_.reset();\n  }\n\n  this.nameDB_.setVariableMap(workspace.getVariableMap());\n  this.nameDB_.populateVariables(workspace);\n  this.nameDB_.populateProcedures(workspace);\n\n  const defvars = [];\n  // Add developer variables (not created or named by the user).\n  const devVarList = Variables.allDeveloperVariables(workspace);\n  for (let i = 0; i < devVarList.length; i++) {\n    defvars.push(\n        this.nameDB_.getName(devVarList[i], NameType.DEVELOPER_VARIABLE));\n  }\n\n  // Add user variables, but only ones that are being used.\n  const variables = Variables.allUsedVarModels(workspace);\n  for (let i = 0; i < variables.length; i++) {\n    defvars.push(this.nameDB_.getName(variables[i].getId(), NameType.VARIABLE));\n  }\n\n  // Declare all of the variables.\n  if (defvars.length) {\n    this.definitions_['variables'] = 'var ' + defvars.join(', ') + ';';\n  }\n  this.isInitialized = true;\n};\n\n/**\n * Prepend the generated code with the variable definitions.\n * @param {string} code Generated code.\n * @return {string} Completed code.\n */\nJavaScript.finish = function(code) {\n  // Convert the definitions dictionary into a list.\n  const definitions = objectUtils.values(this.definitions_);\n  // Call Blockly.Generator's finish.\n  code = Object.getPrototypeOf(this).finish.call(this, code);\n  this.isInitialized = false;\n\n  this.nameDB_.reset();\n  return definitions.join('\\n\\n') + '\\n\\n\\n' + code;\n};\n\n/**\n * Naked values are top-level blocks with outputs that aren't plugged into\n * anything.  A trailing semicolon is needed to make this legal.\n * @param {string} line Line of generated code.\n * @return {string} Legal line of code.\n */\nJavaScript.scrubNakedValue = function(line) {\n  return line + ';\\n';\n};\n\n/**\n * Encode a string as a properly escaped JavaScript string, complete with\n * quotes.\n * @param {string} string Text to encode.\n * @return {string} JavaScript string.\n * @protected\n */\nJavaScript.quote_ = function(string) {\n  // Can't use goog.string.quote since Google's style guide recommends\n  // JS string literals use single quotes.\n  string = string.replace(/\\\\/g, '\\\\\\\\')\n               .replace(/\\n/g, '\\\\\\n')\n               .replace(/'/g, '\\\\\\'');\n  return '\\'' + string + '\\'';\n};\n\n/**\n * Encode a string as a properly escaped multiline JavaScript string, complete\n * with quotes.\n * @param {string} string Text to encode.\n * @return {string} JavaScript string.\n * @protected\n */\nJavaScript.multiline_quote_ = function(string) {\n  // Can't use goog.string.quote since Google's style guide recommends\n  // JS string literals use single quotes.\n  const lines = string.split(/\\n/g).map(this.quote_);\n  return lines.join(' + \\'\\\\n\\' +\\n');\n};\n\n/**\n * Common tasks for generating JavaScript from blocks.\n * Handles comments for the specified block and any connected value blocks.\n * Calls any statements following this block.\n * @param {!Block} block The current block.\n * @param {string} code The JavaScript code created for this block.\n * @param {boolean=} opt_thisOnly True to generate code for only this statement.\n * @return {string} JavaScript code with comments and subsequent blocks added.\n * @protected\n */\nJavaScript.scrub_ = function(block, code, opt_thisOnly) {\n  let commentCode = '';\n  // Only collect comments for blocks that aren't inline.\n  if (!block.outputConnection || !block.outputConnection.targetConnection) {\n    // Collect comment for this block.\n    let comment = block.getCommentText();\n    if (comment) {\n      comment = stringUtils.wrap(comment, this.COMMENT_WRAP - 3);\n      commentCode += this.prefixLines(comment + '\\n', '// ');\n    }\n    // Collect comments for all value arguments.\n    // Don't collect comments for nested statements.\n    for (let i = 0; i < block.inputList.length; i++) {\n      if (block.inputList[i].type === inputTypes.VALUE) {\n        const childBlock = block.inputList[i].connection.targetBlock();\n        if (childBlock) {\n          comment = this.allNestedComments(childBlock);\n          if (comment) {\n            commentCode += this.prefixLines(comment, '// ');\n          }\n        }\n      }\n    }\n  }\n  const nextBlock = block.nextConnection && block.nextConnection.targetBlock();\n  const nextCode = opt_thisOnly ? '' : this.blockToCode(nextBlock);\n  return commentCode + code + nextCode;\n};\n\n/**\n * Gets a property and adjusts the value while taking into account indexing.\n * @param {!Block} block The block.\n * @param {string} atId The property ID of the element to get.\n * @param {number=} opt_delta Value to add.\n * @param {boolean=} opt_negate Whether to negate the value.\n * @param {number=} opt_order The highest order acting on this value.\n * @return {string|number}\n */\nJavaScript.getAdjusted = function(\n    block, atId, opt_delta, opt_negate, opt_order) {\n  let delta = opt_delta || 0;\n  let order = opt_order || this.ORDER_NONE;\n  if (block.workspace.options.oneBasedIndex) {\n    delta--;\n  }\n  const defaultAtIndex = block.workspace.options.oneBasedIndex ? '1' : '0';\n\n  let innerOrder;\n  let outerOrder = order;\n  if (delta > 0) {\n    outerOrder = this.ORDER_ADDITION;\n    innerOrder = this.ORDER_ADDITION;\n  } else if (delta < 0) {\n    outerOrder = this.ORDER_SUBTRACTION;\n    innerOrder = this.ORDER_SUBTRACTION;\n  } else if (opt_negate) {\n    outerOrder = this.ORDER_UNARY_NEGATION;\n    innerOrder = this.ORDER_UNARY_NEGATION;\n  }\n\n  let at = this.valueToCode(block, atId, outerOrder) || defaultAtIndex;\n\n  if (stringUtils.isNumber(at)) {\n    // If the index is a naked number, adjust it right now.\n    at = Number(at) + delta;\n    if (opt_negate) {\n      at = -at;\n    }\n  } else {\n    // If the index is dynamic, adjust it in code.\n    if (delta > 0) {\n      at = at + ' + ' + delta;\n    } else if (delta < 0) {\n      at = at + ' - ' + -delta;\n    }\n    if (opt_negate) {\n      if (delta) {\n        at = '-(' + at + ')';\n      } else {\n        at = '-' + at;\n      }\n    }\n    innerOrder = Math.floor(innerOrder);\n    order = Math.floor(order);\n    if (innerOrder && order >= innerOrder) {\n      at = '(' + at + ')';\n    }\n  }\n  return at;\n};\n\nexports = JavaScript;\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Generating JavaScript for variable blocks.\n */\n'use strict';\n\ngoog.module('Blockly.JavaScript.variables');\n\nconst JavaScript = goog.require('Blockly.JavaScript');\nconst {NameType} = goog.require('Blockly.Names');\n\n\nJavaScript['variables_get'] = function(block) {\n  // Variable getter.\n  const code = JavaScript.nameDB_.getName(block.getFieldValue('VAR'),\n      NameType.VARIABLE);\n  return [code, JavaScript.ORDER_ATOMIC];\n};\n\nJavaScript['variables_set'] = function(block) {\n  // Variable setter.\n  const argument0 = JavaScript.valueToCode(\n                        block, 'VALUE', JavaScript.ORDER_ASSIGNMENT) || '0';\n  const varName = JavaScript.nameDB_.getName(\n      block.getFieldValue('VAR'), NameType.VARIABLE);\n  return varName + ' = ' + argument0 + ';\\n';\n};\n","/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Generating JavaScript for dynamic variable blocks.\n */\n'use strict';\n\ngoog.module('Blockly.JavaScript.variablesDynamic');\n\nconst JavaScript = goog.require('Blockly.JavaScript');\n/** @suppress {extraRequire} */\ngoog.require('Blockly.JavaScript.variables');\n\n\n// JavaScript is dynamically typed.\nJavaScript['variables_get_dynamic'] = JavaScript['variables_get'];\nJavaScript['variables_set_dynamic'] = JavaScript['variables_set'];\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Generating JavaScript for text blocks.\n */\n'use strict';\n\ngoog.module('Blockly.JavaScript.texts');\n\nconst JavaScript = goog.require('Blockly.JavaScript');\nconst {NameType} = goog.require('Blockly.Names');\n\n\n/**\n * Regular expression to detect a single-quoted string literal.\n */\nconst strRegExp = /^\\s*'([^']|\\\\')*'\\s*$/;\n\n/**\n * Enclose the provided value in 'String(...)' function.\n * Leave string literals alone.\n * @param {string} value Code evaluating to a value.\n * @return {Array<string|number>} Array containing code evaluating to a string\n *     and the order of the returned code.[string, number]\n */\nconst forceString = function(value) {\n  if (strRegExp.test(value)) {\n    return [value, JavaScript.ORDER_ATOMIC];\n  }\n  return ['String(' + value + ')', JavaScript.ORDER_FUNCTION_CALL];\n};\n\n/**\n * Returns an expression calculating the index into a string.\n * @param {string} stringName Name of the string, used to calculate length.\n * @param {string} where The method of indexing, selected by dropdown in Blockly\n * @param {string=} opt_at The optional offset when indexing from start/end.\n * @return {string|undefined} Index expression.\n */\nconst getSubstringIndex = function(stringName, where, opt_at) {\n  if (where === 'FIRST') {\n    return '0';\n  } else if (where === 'FROM_END') {\n    return stringName + '.length - 1 - ' + opt_at;\n  } else if (where === 'LAST') {\n    return stringName + '.length - 1';\n  } else {\n    return opt_at;\n  }\n};\n\nJavaScript['text'] = function(block) {\n  // Text value.\n  const code = JavaScript.quote_(block.getFieldValue('TEXT'));\n  return [code, JavaScript.ORDER_ATOMIC];\n};\n\nJavaScript['text_multiline'] = function(block) {\n  // Text value.\n  const code = JavaScript.multiline_quote_(block.getFieldValue('TEXT'));\n  const order = code.indexOf('+') !== -1 ? JavaScript.ORDER_ADDITION :\n      JavaScript.ORDER_ATOMIC;\n  return [code, order];\n};\n\nJavaScript['text_join'] = function(block) {\n  // Create a string made up of any number of elements of any type.\n  switch (block.itemCount_) {\n    case 0:\n      return [\"''\", JavaScript.ORDER_ATOMIC];\n    case 1: {\n      const element = JavaScript.valueToCode(block, 'ADD0',\n          JavaScript.ORDER_NONE) || \"''\";\n      const codeAndOrder = forceString(element);\n      return codeAndOrder;\n    }\n    case 2: {\n      const element0 = JavaScript.valueToCode(block, 'ADD0',\n          JavaScript.ORDER_NONE) || \"''\";\n      const element1 = JavaScript.valueToCode(block, 'ADD1',\n          JavaScript.ORDER_NONE) || \"''\";\n      const code = forceString(element0)[0] +\n          ' + ' + forceString(element1)[0];\n      return [code, JavaScript.ORDER_ADDITION];\n    }\n    default: {\n      const elements = new Array(block.itemCount_);\n      for (let i = 0; i < block.itemCount_; i++) {\n        elements[i] = JavaScript.valueToCode(block, 'ADD' + i,\n            JavaScript.ORDER_NONE) || \"''\";\n      }\n      const code = '[' + elements.join(',') + '].join(\\'\\')';\n      return [code, JavaScript.ORDER_FUNCTION_CALL];\n    }\n  }\n};\n\nJavaScript['text_append'] = function(block) {\n  // Append to a variable in place.\n  const varName = JavaScript.nameDB_.getName(\n      block.getFieldValue('VAR'), NameType.VARIABLE);\n  const value = JavaScript.valueToCode(block, 'TEXT',\n      JavaScript.ORDER_NONE) || \"''\";\n  const code = varName + ' += ' +\n      forceString(value)[0] + ';\\n';\n  return code;\n};\n\nJavaScript['text_length'] = function(block) {\n  // String or array length.\n  const text = JavaScript.valueToCode(block, 'VALUE',\n      JavaScript.ORDER_MEMBER) || \"''\";\n  return [text + '.length', JavaScript.ORDER_MEMBER];\n};\n\nJavaScript['text_isEmpty'] = function(block) {\n  // Is the string null or array empty?\n  const text = JavaScript.valueToCode(block, 'VALUE',\n      JavaScript.ORDER_MEMBER) || \"''\";\n  return ['!' + text + '.length', JavaScript.ORDER_LOGICAL_NOT];\n};\n\nJavaScript['text_indexOf'] = function(block) {\n  // Search the text for a substring.\n  const operator = block.getFieldValue('END') === 'FIRST' ?\n      'indexOf' : 'lastIndexOf';\n  const substring = JavaScript.valueToCode(block, 'FIND',\n      JavaScript.ORDER_NONE) || \"''\";\n  const text = JavaScript.valueToCode(block, 'VALUE',\n      JavaScript.ORDER_MEMBER) || \"''\";\n  const code = text + '.' + operator + '(' + substring + ')';\n  // Adjust index if using one-based indices.\n  if (block.workspace.options.oneBasedIndex) {\n    return [code + ' + 1', JavaScript.ORDER_ADDITION];\n  }\n  return [code, JavaScript.ORDER_FUNCTION_CALL];\n};\n\nJavaScript['text_charAt'] = function(block) {\n  // Get letter at index.\n  // Note: Until January 2013 this block did not have the WHERE input.\n  const where = block.getFieldValue('WHERE') || 'FROM_START';\n  const textOrder = (where === 'RANDOM') ? JavaScript.ORDER_NONE :\n      JavaScript.ORDER_MEMBER;\n  const text = JavaScript.valueToCode(block, 'VALUE', textOrder) || \"''\";\n  switch (where) {\n    case 'FIRST': {\n      const code = text + '.charAt(0)';\n      return [code, JavaScript.ORDER_FUNCTION_CALL];\n    }\n    case 'LAST': {\n      const code = text + '.slice(-1)';\n      return [code, JavaScript.ORDER_FUNCTION_CALL];\n    }\n    case 'FROM_START': {\n      const at = JavaScript.getAdjusted(block, 'AT');\n      // Adjust index if using one-based indices.\n      const code = text + '.charAt(' + at + ')';\n      return [code, JavaScript.ORDER_FUNCTION_CALL];\n    }\n    case 'FROM_END': {\n      const at = JavaScript.getAdjusted(block, 'AT', 1, true);\n      const code = text + '.slice(' + at + ').charAt(0)';\n      return [code, JavaScript.ORDER_FUNCTION_CALL];\n    }\n    case 'RANDOM': {\n      const functionName = JavaScript.provideFunction_('textRandomLetter', `\nfunction ${JavaScript.FUNCTION_NAME_PLACEHOLDER_}(text) {\n  var x = Math.floor(Math.random() * text.length);\n  return text[x];\n}\n`);\n      const code = functionName + '(' + text + ')';\n      return [code, JavaScript.ORDER_FUNCTION_CALL];\n    }\n  }\n  throw Error('Unhandled option (text_charAt).');\n};\n\nJavaScript['text_getSubstring'] = function(block) {\n  // Get substring.\n  const where1 = block.getFieldValue('WHERE1');\n  const where2 = block.getFieldValue('WHERE2');\n  const requiresLengthCall = (where1 !== 'FROM_END' && where1 !== 'LAST' &&\n      where2 !== 'FROM_END' && where2 !== 'LAST');\n  const textOrder = requiresLengthCall ? JavaScript.ORDER_MEMBER :\n      JavaScript.ORDER_NONE;\n  const text = JavaScript.valueToCode(block, 'STRING', textOrder) || \"''\";\n  let code;\n  if (where1 === 'FIRST' && where2 === 'LAST') {\n    code = text;\n    return [code, JavaScript.ORDER_NONE];\n  } else if (text.match(/^'?\\w+'?$/) || requiresLengthCall) {\n    // If the text is a variable or literal or doesn't require a call for\n    // length, don't generate a helper function.\n    let at1;\n    switch (where1) {\n      case 'FROM_START':\n        at1 = JavaScript.getAdjusted(block, 'AT1');\n        break;\n      case 'FROM_END':\n        at1 = JavaScript.getAdjusted(block, 'AT1', 1, false,\n            JavaScript.ORDER_SUBTRACTION);\n        at1 = text + '.length - ' + at1;\n        break;\n      case 'FIRST':\n        at1 = '0';\n        break;\n      default:\n        throw Error('Unhandled option (text_getSubstring).');\n    }\n    let at2;\n    switch (where2) {\n      case 'FROM_START':\n        at2 = JavaScript.getAdjusted(block, 'AT2', 1);\n        break;\n      case 'FROM_END':\n        at2 = JavaScript.getAdjusted(block, 'AT2', 0, false,\n            JavaScript.ORDER_SUBTRACTION);\n        at2 = text + '.length - ' + at2;\n        break;\n      case 'LAST':\n        at2 = text + '.length';\n        break;\n      default:\n        throw Error('Unhandled option (text_getSubstring).');\n    }\n    code = text + '.slice(' + at1 + ', ' + at2 + ')';\n  } else {\n    const at1 = JavaScript.getAdjusted(block, 'AT1');\n    const at2 = JavaScript.getAdjusted(block, 'AT2');\n    const wherePascalCase = {'FIRST': 'First', 'LAST': 'Last',\n      'FROM_START': 'FromStart', 'FROM_END': 'FromEnd'};\n    // The value for 'FROM_END' and'FROM_START' depends on `at` so\n    // we add it as a parameter.\n    const at1Param =\n        (where1 === 'FROM_END' || where1 === 'FROM_START') ? ', at1' : '';\n    const at2Param =\n        (where2 === 'FROM_END' || where2 === 'FROM_START') ? ', at2' : '';\n    const functionName = JavaScript.provideFunction_(\n        'subsequence' + wherePascalCase[where1] + wherePascalCase[where2], `\nfunction ${JavaScript.FUNCTION_NAME_PLACEHOLDER_}(sequence${at1Param}${at2Param}) {\n  var start = ${getSubstringIndex('sequence', where1, 'at1')};\n  var end = ${getSubstringIndex('sequence', where2, 'at2')} + 1;\n  return sequence.slice(start, end);\n}\n`);\n    code = functionName + '(' + text +\n        // The value for 'FROM_END' and 'FROM_START' depends on `at` so we\n        // pass it.\n        ((where1 === 'FROM_END' || where1 === 'FROM_START') ? ', ' + at1 : '') +\n        ((where2 === 'FROM_END' || where2 === 'FROM_START') ? ', ' + at2 : '') +\n        ')';\n  }\n  return [code, JavaScript.ORDER_FUNCTION_CALL];\n};\n\nJavaScript['text_changeCase'] = function(block) {\n  // Change capitalization.\n  const OPERATORS = {\n    'UPPERCASE': '.toUpperCase()',\n    'LOWERCASE': '.toLowerCase()',\n    'TITLECASE': null,\n  };\n  const operator = OPERATORS[block.getFieldValue('CASE')];\n  const textOrder = operator ? JavaScript.ORDER_MEMBER : JavaScript.ORDER_NONE;\n  const text = JavaScript.valueToCode(block, 'TEXT', textOrder) || \"''\";\n  let code;\n  if (operator) {\n    // Upper and lower case are functions built into JavaScript.\n    code = text + operator;\n  } else {\n    // Title case is not a native JavaScript function.  Define one.\n    const functionName = JavaScript.provideFunction_('textToTitleCase', `\nfunction ${JavaScript.FUNCTION_NAME_PLACEHOLDER_}(str) {\n  return str.replace(/\\\\S+/g,\n      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});\n}\n`);\n    code = functionName + '(' + text + ')';\n  }\n  return [code, JavaScript.ORDER_FUNCTION_CALL];\n};\n\nJavaScript['text_trim'] = function(block) {\n  // Trim spaces.\n  const OPERATORS = {\n    'LEFT': \".replace(/^[\\\\s\\\\xa0]+/, '')\",\n    'RIGHT': \".replace(/[\\\\s\\\\xa0]+$/, '')\",\n    'BOTH': '.trim()',\n  };\n  const operator = OPERATORS[block.getFieldValue('MODE')];\n  const text = JavaScript.valueToCode(block, 'TEXT',\n      JavaScript.ORDER_MEMBER) || \"''\";\n  return [text + operator, JavaScript.ORDER_FUNCTION_CALL];\n};\n\nJavaScript['text_print'] = function(block) {\n  // Print statement.\n  const msg = JavaScript.valueToCode(block, 'TEXT',\n      JavaScript.ORDER_NONE) || \"''\";\n  return 'window.alert(' + msg + ');\\n';\n};\n\nJavaScript['text_prompt_ext'] = function(block) {\n  // Prompt function.\n  let msg;\n  if (block.getField('TEXT')) {\n    // Internal message.\n    msg = JavaScript.quote_(block.getFieldValue('TEXT'));\n  } else {\n    // External message.\n    msg = JavaScript.valueToCode(block, 'TEXT', JavaScript.ORDER_NONE) || \"''\";\n  }\n  let code = 'window.prompt(' + msg + ')';\n  const toNumber = block.getFieldValue('TYPE') === 'NUMBER';\n  if (toNumber) {\n    code = 'Number(' + code + ')';\n  }\n  return [code, JavaScript.ORDER_FUNCTION_CALL];\n};\n\nJavaScript['text_prompt'] = JavaScript['text_prompt_ext'];\n\nJavaScript['text_count'] = function(block) {\n  const text = JavaScript.valueToCode(block, 'TEXT',\n      JavaScript.ORDER_NONE) || \"''\";\n  const sub = JavaScript.valueToCode(block, 'SUB',\n      JavaScript.ORDER_NONE) || \"''\";\n  const functionName = JavaScript.provideFunction_('textCount', `\nfunction ${JavaScript.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle) {\n  if (needle.length === 0) {\n    return haystack.length + 1;\n  } else {\n    return haystack.split(needle).length - 1;\n  }\n}\n`);\n  const code = functionName + '(' + text + ', ' + sub + ')';\n  return [code, JavaScript.ORDER_FUNCTION_CALL];\n};\n\nJavaScript['text_replace'] = function(block) {\n  const text = JavaScript.valueToCode(block, 'TEXT',\n      JavaScript.ORDER_NONE) || \"''\";\n  const from = JavaScript.valueToCode(block, 'FROM',\n      JavaScript.ORDER_NONE) || \"''\";\n  const to = JavaScript.valueToCode(block, 'TO', JavaScript.ORDER_NONE) || \"''\";\n  // The regex escaping code below is taken from the implementation of\n  // goog.string.regExpEscape.\n  const functionName = JavaScript.provideFunction_('textReplace', `\nfunction ${JavaScript.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle, replacement) {\n  needle = needle.replace(/([-()\\\\[\\\\]{}+?*.$\\\\^|,:#<!\\\\\\\\])/g, '\\\\\\\\$1')\n                 .replace(/\\\\x08/g, '\\\\\\\\x08');\n  return haystack.replace(new RegExp(needle, \\'g\\'), replacement);\n}\n`);\n  const code = functionName + '(' + text + ', ' + from + ', ' + to + ')';\n  return [code, JavaScript.ORDER_FUNCTION_CALL];\n};\n\nJavaScript['text_reverse'] = function(block) {\n  const text = JavaScript.valueToCode(block, 'TEXT',\n      JavaScript.ORDER_MEMBER) || \"''\";\n  const code = text + \".split('').reverse().join('')\";\n  return [code, JavaScript.ORDER_FUNCTION_CALL];\n};\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Generating JavaScript for procedure blocks.\n */\n'use strict';\n\ngoog.module('Blockly.JavaScript.procedures');\n\nconst JavaScript = goog.require('Blockly.JavaScript');\nconst {NameType} = goog.require('Blockly.Names');\n\n\nJavaScript['procedures_defreturn'] = function(block) {\n  // Define a procedure with a return value.\n  const funcName = JavaScript.nameDB_.getName(\n      block.getFieldValue('NAME'), NameType.PROCEDURE);\n  let xfix1 = '';\n  if (JavaScript.STATEMENT_PREFIX) {\n    xfix1 += JavaScript.injectId(JavaScript.STATEMENT_PREFIX, block);\n  }\n  if (JavaScript.STATEMENT_SUFFIX) {\n    xfix1 += JavaScript.injectId(JavaScript.STATEMENT_SUFFIX, block);\n  }\n  if (xfix1) {\n    xfix1 = JavaScript.prefixLines(xfix1, JavaScript.INDENT);\n  }\n  let loopTrap = '';\n  if (JavaScript.INFINITE_LOOP_TRAP) {\n    loopTrap = JavaScript.prefixLines(\n        JavaScript.injectId(JavaScript.INFINITE_LOOP_TRAP, block),\n        JavaScript.INDENT);\n  }\n  const branch = JavaScript.statementToCode(block, 'STACK');\n  let returnValue =\n      JavaScript.valueToCode(block, 'RETURN', JavaScript.ORDER_NONE) || '';\n  let xfix2 = '';\n  if (branch && returnValue) {\n    // After executing the function body, revisit this block for the return.\n    xfix2 = xfix1;\n  }\n  if (returnValue) {\n    returnValue = JavaScript.INDENT + 'return ' + returnValue + ';\\n';\n  }\n  const args = [];\n  const variables = block.getVars();\n  for (let i = 0; i < variables.length; i++) {\n    args[i] = JavaScript.nameDB_.getName(variables[i], NameType.VARIABLE);\n  }\n  let code = 'function ' + funcName + '(' + args.join(', ') + ') {\\n' + xfix1 +\n      loopTrap + branch + xfix2 + returnValue + '}';\n  code = JavaScript.scrub_(block, code);\n  // Add % so as not to collide with helper functions in definitions list.\n  JavaScript.definitions_['%' + funcName] = code;\n  return null;\n};\n\n// Defining a procedure without a return value uses the same generator as\n// a procedure with a return value.\nJavaScript['procedures_defnoreturn'] = JavaScript['procedures_defreturn'];\n\nJavaScript['procedures_callreturn'] = function(block) {\n  // Call a procedure with a return value.\n  const funcName = JavaScript.nameDB_.getName(\n      block.getFieldValue('NAME'), NameType.PROCEDURE);\n  const args = [];\n  const variables = block.getVars();\n  for (let i = 0; i < variables.length; i++) {\n    args[i] = JavaScript.valueToCode(block, 'ARG' + i, JavaScript.ORDER_NONE) ||\n        'null';\n  }\n  const code = funcName + '(' + args.join(', ') + ')';\n  return [code, JavaScript.ORDER_FUNCTION_CALL];\n};\n\nJavaScript['procedures_callnoreturn'] = function(block) {\n  // Call a procedure with no return value.\n  // Generated code is for a function call as a statement is the same as a\n  // function call as a value, with the addition of line ending.\n  const tuple = JavaScript['procedures_callreturn'](block);\n  return tuple[0] + ';\\n';\n};\n\nJavaScript['procedures_ifreturn'] = function(block) {\n  // Conditionally return value from a procedure.\n  const condition =\n      JavaScript.valueToCode(block, 'CONDITION', JavaScript.ORDER_NONE) ||\n      'false';\n  let code = 'if (' + condition + ') {\\n';\n  if (JavaScript.STATEMENT_SUFFIX) {\n    // Inject any statement suffix here since the regular one at the end\n    // will not get executed if the return is triggered.\n    code += JavaScript.prefixLines(\n        JavaScript.injectId(JavaScript.STATEMENT_SUFFIX, block),\n        JavaScript.INDENT);\n  }\n  if (block.hasReturnValue_) {\n    const value =\n        JavaScript.valueToCode(block, 'VALUE', JavaScript.ORDER_NONE) || 'null';\n    code += JavaScript.INDENT + 'return ' + value + ';\\n';\n  } else {\n    code += JavaScript.INDENT + 'return;\\n';\n  }\n  code += '}\\n';\n  return code;\n};\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Generating JavaScript for math blocks.\n * @suppress {missingRequire}\n */\n'use strict';\n\ngoog.module('Blockly.JavaScript.math');\n\nconst JavaScript = goog.require('Blockly.JavaScript');\nconst {NameType} = goog.require('Blockly.Names');\n\n\nJavaScript['math_number'] = function(block) {\n  // Numeric value.\n  const code = Number(block.getFieldValue('NUM'));\n  const order = code >= 0 ? JavaScript.ORDER_ATOMIC :\n              JavaScript.ORDER_UNARY_NEGATION;\n  return [code, order];\n};\n\nJavaScript['math_arithmetic'] = function(block) {\n  // Basic arithmetic operators, and power.\n  const OPERATORS = {\n    'ADD': [' + ', JavaScript.ORDER_ADDITION],\n    'MINUS': [' - ', JavaScript.ORDER_SUBTRACTION],\n    'MULTIPLY': [' * ', JavaScript.ORDER_MULTIPLICATION],\n    'DIVIDE': [' / ', JavaScript.ORDER_DIVISION],\n    'POWER': [null, JavaScript.ORDER_NONE],  // Handle power separately.\n  };\n  const tuple = OPERATORS[block.getFieldValue('OP')];\n  const operator = tuple[0];\n  const order = tuple[1];\n  const argument0 = JavaScript.valueToCode(block, 'A', order) || '0';\n  const argument1 = JavaScript.valueToCode(block, 'B', order) || '0';\n  let code;\n  // Power in JavaScript requires a special case since it has no operator.\n  if (!operator) {\n    code = 'Math.pow(' + argument0 + ', ' + argument1 + ')';\n    return [code, JavaScript.ORDER_FUNCTION_CALL];\n  }\n  code = argument0 + operator + argument1;\n  return [code, order];\n};\n\nJavaScript['math_single'] = function(block) {\n  // Math operators with single operand.\n  const operator = block.getFieldValue('OP');\n  let code;\n  let arg;\n  if (operator === 'NEG') {\n    // Negation is a special case given its different operator precedence.\n    arg = JavaScript.valueToCode(block, 'NUM',\n        JavaScript.ORDER_UNARY_NEGATION) || '0';\n    if (arg[0] === '-') {\n      // --3 is not legal in JS.\n      arg = ' ' + arg;\n    }\n    code = '-' + arg;\n    return [code, JavaScript.ORDER_UNARY_NEGATION];\n  }\n  if (operator === 'SIN' || operator === 'COS' || operator === 'TAN') {\n    arg = JavaScript.valueToCode(block, 'NUM',\n        JavaScript.ORDER_DIVISION) || '0';\n  } else {\n    arg = JavaScript.valueToCode(block, 'NUM',\n        JavaScript.ORDER_NONE) || '0';\n  }\n  // First, handle cases which generate values that don't need parentheses\n  // wrapping the code.\n  switch (operator) {\n    case 'ABS':\n      code = 'Math.abs(' + arg + ')';\n      break;\n    case 'ROOT':\n      code = 'Math.sqrt(' + arg + ')';\n      break;\n    case 'LN':\n      code = 'Math.log(' + arg + ')';\n      break;\n    case 'EXP':\n      code = 'Math.exp(' + arg + ')';\n      break;\n    case 'POW10':\n      code = 'Math.pow(10,' + arg + ')';\n      break;\n    case 'ROUND':\n      code = 'Math.round(' + arg + ')';\n      break;\n    case 'ROUNDUP':\n      code = 'Math.ceil(' + arg + ')';\n      break;\n    case 'ROUNDDOWN':\n      code = 'Math.floor(' + arg + ')';\n      break;\n    case 'SIN':\n      code = 'Math.sin(' + arg + ' / 180 * Math.PI)';\n      break;\n    case 'COS':\n      code = 'Math.cos(' + arg + ' / 180 * Math.PI)';\n      break;\n    case 'TAN':\n      code = 'Math.tan(' + arg + ' / 180 * Math.PI)';\n      break;\n  }\n  if (code) {\n    return [code, JavaScript.ORDER_FUNCTION_CALL];\n  }\n  // Second, handle cases which generate values that may need parentheses\n  // wrapping the code.\n  switch (operator) {\n    case 'LOG10':\n      code = 'Math.log(' + arg + ') / Math.log(10)';\n      break;\n    case 'ASIN':\n      code = 'Math.asin(' + arg + ') / Math.PI * 180';\n      break;\n    case 'ACOS':\n      code = 'Math.acos(' + arg + ') / Math.PI * 180';\n      break;\n    case 'ATAN':\n      code = 'Math.atan(' + arg + ') / Math.PI * 180';\n      break;\n    default:\n      throw Error('Unknown math operator: ' + operator);\n  }\n  return [code, JavaScript.ORDER_DIVISION];\n};\n\nJavaScript['math_constant'] = function(block) {\n  // Constants: PI, E, the Golden Ratio, sqrt(2), 1/sqrt(2), INFINITY.\n  const CONSTANTS = {\n    'PI': ['Math.PI', JavaScript.ORDER_MEMBER],\n    'E': ['Math.E', JavaScript.ORDER_MEMBER],\n    'GOLDEN_RATIO': ['(1 + Math.sqrt(5)) / 2', JavaScript.ORDER_DIVISION],\n    'SQRT2': ['Math.SQRT2', JavaScript.ORDER_MEMBER],\n    'SQRT1_2': ['Math.SQRT1_2', JavaScript.ORDER_MEMBER],\n    'INFINITY': ['Infinity', JavaScript.ORDER_ATOMIC],\n  };\n  return CONSTANTS[block.getFieldValue('CONSTANT')];\n};\n\nJavaScript['math_number_property'] = function(block) {\n  // Check if a number is even, odd, prime, whole, positive, or negative\n  // or if it is divisible by certain number. Returns true or false.\n  const PROPERTIES = {\n    'EVEN': [' % 2 === 0', JavaScript.ORDER_MODULUS, JavaScript.ORDER_EQUALITY],\n    'ODD': [' % 2 === 1', JavaScript.ORDER_MODULUS, JavaScript.ORDER_EQUALITY],\n    'WHOLE': [' % 1 === 0', JavaScript.ORDER_MODULUS,\n        JavaScript.ORDER_EQUALITY],\n    'POSITIVE': [' > 0', JavaScript.ORDER_RELATIONAL,\n        JavaScript.ORDER_RELATIONAL],\n    'NEGATIVE': [' < 0', JavaScript.ORDER_RELATIONAL,\n        JavaScript.ORDER_RELATIONAL],\n    'DIVISIBLE_BY': [null, JavaScript.ORDER_MODULUS, JavaScript.ORDER_EQUALITY],\n    'PRIME': [null, JavaScript.ORDER_NONE, JavaScript.ORDER_FUNCTION_CALL],\n  };\n  const dropdownProperty = block.getFieldValue('PROPERTY');\n  const [suffix, inputOrder, outputOrder] = PROPERTIES[dropdownProperty];\n  const numberToCheck = JavaScript.valueToCode(block, 'NUMBER_TO_CHECK',\n      inputOrder) || '0';\n  let code;\n  if (dropdownProperty === 'PRIME') {\n    // Prime is a special case as it is not a one-liner test.\n    const functionName = JavaScript.provideFunction_('mathIsPrime', `\nfunction ${JavaScript.FUNCTION_NAME_PLACEHOLDER_}(n) {\n  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods\n  if (n == 2 || n == 3) {\n    return true;\n  }\n  // False if n is NaN, negative, is 1, or not whole.\n  // And false if n is divisible by 2 or 3.\n  if (isNaN(n) || n <= 1 || n % 1 !== 0 || n % 2 === 0 || n % 3 === 0) {\n    return false;\n  }\n  // Check all the numbers of form 6k +/- 1, up to sqrt(n).\n  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {\n    if (n % (x - 1) === 0 || n % (x + 1) === 0) {\n      return false;\n    }\n  }\n  return true;\n}\n`);\n    code = functionName + '(' + numberToCheck + ')';\n  } else if (dropdownProperty === 'DIVISIBLE_BY') {\n    const divisor = JavaScript.valueToCode(block, 'DIVISOR',\n        JavaScript.ORDER_MODULUS) || '0';\n    code = numberToCheck + ' % ' + divisor + ' === 0';\n  } else {\n    code = numberToCheck + suffix;\n  }\n  return [code, outputOrder];\n};\n\nJavaScript['math_change'] = function(block) {\n  // Add to a variable in place.\n  const argument0 = JavaScript.valueToCode(block, 'DELTA',\n      JavaScript.ORDER_ADDITION) || '0';\n  const varName = JavaScript.nameDB_.getName(\n      block.getFieldValue('VAR'), NameType.VARIABLE);\n  return varName + ' = (typeof ' + varName + ' === \\'number\\' ? ' + varName +\n      ' : 0) + ' + argument0 + ';\\n';\n};\n\n// Rounding functions have a single operand.\nJavaScript['math_round'] = JavaScript['math_single'];\n// Trigonometry functions have a single operand.\nJavaScript['math_trig'] = JavaScript['math_single'];\n\nJavaScript['math_on_list'] = function(block) {\n  // Math functions for lists.\n  const func = block.getFieldValue('OP');\n  let list;\n  let code;\n  switch (func) {\n    case 'SUM':\n      list = JavaScript.valueToCode(block, 'LIST',\n          JavaScript.ORDER_MEMBER) || '[]';\n      code = list + '.reduce(function(x, y) {return x + y;})';\n      break;\n    case 'MIN':\n      list = JavaScript.valueToCode(block, 'LIST',\n          JavaScript.ORDER_NONE) || '[]';\n      code = 'Math.min.apply(null, ' + list + ')';\n      break;\n    case 'MAX':\n      list = JavaScript.valueToCode(block, 'LIST',\n          JavaScript.ORDER_NONE) || '[]';\n      code = 'Math.max.apply(null, ' + list + ')';\n      break;\n    case 'AVERAGE': {\n      // mathMean([null,null,1,3]) === 2.0.\n      const functionName = JavaScript.provideFunction_('mathMean', `\nfunction ${JavaScript.FUNCTION_NAME_PLACEHOLDER_}(myList) {\n  return myList.reduce(function(x, y) {return x + y;}) / myList.length;\n}\n`);\n      list = JavaScript.valueToCode(block, 'LIST',\n          JavaScript.ORDER_NONE) || '[]';\n      code = functionName + '(' + list + ')';\n      break;\n    }\n    case 'MEDIAN': {\n      // mathMedian([null,null,1,3]) === 2.0.\n      const functionName = JavaScript.provideFunction_('mathMedian', `\nfunction ${JavaScript.FUNCTION_NAME_PLACEHOLDER_}(myList) {\n  var localList = myList.filter(function (x) {return typeof x === \\'number\\';});\n  if (!localList.length) return null;\n  localList.sort(function(a, b) {return b - a;});\n  if (localList.length % 2 === 0) {\n    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;\n  } else {\n    return localList[(localList.length - 1) / 2];\n  }\n}\n`);\n      list = JavaScript.valueToCode(block, 'LIST',\n          JavaScript.ORDER_NONE) || '[]';\n      code = functionName + '(' + list + ')';\n      break;\n    }\n    case 'MODE': {\n      // As a list of numbers can contain more than one mode,\n      // the returned result is provided as an array.\n      // Mode of [3, 'x', 'x', 1, 1, 2, '3'] -> ['x', 1].\n      const functionName = JavaScript.provideFunction_('mathModes', `\nfunction ${JavaScript.FUNCTION_NAME_PLACEHOLDER_}(values) {\n  var modes = [];\n  var counts = [];\n  var maxCount = 0;\n  for (var i = 0; i < values.length; i++) {\n    var value = values[i];\n    var found = false;\n    var thisCount;\n    for (var j = 0; j < counts.length; j++) {\n      if (counts[j][0] === value) {\n        thisCount = ++counts[j][1];\n        found = true;\n        break;\n      }\n    }\n    if (!found) {\n      counts.push([value, 1]);\n      thisCount = 1;\n    }\n    maxCount = Math.max(thisCount, maxCount);\n  }\n  for (var j = 0; j < counts.length; j++) {\n    if (counts[j][1] === maxCount) {\n        modes.push(counts[j][0]);\n    }\n  }\n  return modes;\n}\n`);\n      list = JavaScript.valueToCode(block, 'LIST',\n          JavaScript.ORDER_NONE) || '[]';\n      code = functionName + '(' + list + ')';\n      break;\n    }\n    case 'STD_DEV': {\n      const functionName = JavaScript.provideFunction_('mathStandardDeviation', `\nfunction ${JavaScript.FUNCTION_NAME_PLACEHOLDER_}(numbers) {\n  var n = numbers.length;\n  if (!n) return null;\n  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;\n  var variance = 0;\n  for (var j = 0; j < n; j++) {\n    variance += Math.pow(numbers[j] - mean, 2);\n  }\n  variance = variance / n;\n  return Math.sqrt(variance);\n}\n`);\n      list = JavaScript.valueToCode(block, 'LIST',\n          JavaScript.ORDER_NONE) || '[]';\n      code = functionName + '(' + list + ')';\n      break;\n    }\n    case 'RANDOM': {\n      const functionName = JavaScript.provideFunction_('mathRandomList', `\nfunction ${JavaScript.FUNCTION_NAME_PLACEHOLDER_}(list) {\n  var x = Math.floor(Math.random() * list.length);\n  return list[x];\n}\n`);\n      list = JavaScript.valueToCode(block, 'LIST',\n          JavaScript.ORDER_NONE) || '[]';\n      code = functionName + '(' + list + ')';\n      break;\n    }\n    default:\n      throw Error('Unknown operator: ' + func);\n  }\n  return [code, JavaScript.ORDER_FUNCTION_CALL];\n};\n\nJavaScript['math_modulo'] = function(block) {\n  // Remainder computation.\n  const argument0 = JavaScript.valueToCode(block, 'DIVIDEND',\n      JavaScript.ORDER_MODULUS) || '0';\n  const argument1 = JavaScript.valueToCode(block, 'DIVISOR',\n      JavaScript.ORDER_MODULUS) || '0';\n  const code = argument0 + ' % ' + argument1;\n  return [code, JavaScript.ORDER_MODULUS];\n};\n\nJavaScript['math_constrain'] = function(block) {\n  // Constrain a number between two limits.\n  const argument0 = JavaScript.valueToCode(block, 'VALUE',\n      JavaScript.ORDER_NONE) || '0';\n  const argument1 = JavaScript.valueToCode(block, 'LOW',\n      JavaScript.ORDER_NONE) || '0';\n  const argument2 = JavaScript.valueToCode(block, 'HIGH',\n      JavaScript.ORDER_NONE) || 'Infinity';\n  const code = 'Math.min(Math.max(' + argument0 + ', ' + argument1 + '), ' +\n      argument2 + ')';\n  return [code, JavaScript.ORDER_FUNCTION_CALL];\n};\n\nJavaScript['math_random_int'] = function(block) {\n  // Random integer between [X] and [Y].\n  const argument0 = JavaScript.valueToCode(block, 'FROM',\n      JavaScript.ORDER_NONE) || '0';\n  const argument1 = JavaScript.valueToCode(block, 'TO',\n      JavaScript.ORDER_NONE) || '0';\n  const functionName = JavaScript.provideFunction_('mathRandomInt', `\nfunction ${JavaScript.FUNCTION_NAME_PLACEHOLDER_}(a, b) {\n  if (a > b) {\n    // Swap a and b to ensure a is smaller.\n    var c = a;\n    a = b;\n    b = c;\n  }\n  return Math.floor(Math.random() * (b - a + 1) + a);\n}\n`);\n  const code = functionName + '(' + argument0 + ', ' + argument1 + ')';\n  return [code, JavaScript.ORDER_FUNCTION_CALL];\n};\n\nJavaScript['math_random_float'] = function(block) {\n  // Random fraction between 0 and 1.\n  return ['Math.random()', JavaScript.ORDER_FUNCTION_CALL];\n};\n\nJavaScript['math_atan2'] = function(block) {\n  // Arctangent of point (X, Y) in degrees from -180 to 180.\n  const argument0 = JavaScript.valueToCode(block, 'X',\n      JavaScript.ORDER_NONE) || '0';\n  const argument1 = JavaScript.valueToCode(block, 'Y',\n      JavaScript.ORDER_NONE) || '0';\n  return ['Math.atan2(' + argument1 + ', ' + argument0 + ') / Math.PI * 180',\n      JavaScript.ORDER_DIVISION];\n};\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Generating JavaScript for loop blocks.\n */\n'use strict';\n\ngoog.module('Blockly.JavaScript.loops');\n\nconst stringUtils = goog.require('Blockly.utils.string');\nconst JavaScript = goog.require('Blockly.JavaScript');\nconst {NameType} = goog.require('Blockly.Names');\n\n\nJavaScript['controls_repeat_ext'] = function(block) {\n  // Repeat n times.\n  let repeats;\n  if (block.getField('TIMES')) {\n    // Internal number.\n    repeats = String(Number(block.getFieldValue('TIMES')));\n  } else {\n    // External number.\n    repeats =\n        JavaScript.valueToCode(block, 'TIMES', JavaScript.ORDER_ASSIGNMENT) ||\n        '0';\n  }\n  let branch = JavaScript.statementToCode(block, 'DO');\n  branch = JavaScript.addLoopTrap(branch, block);\n  let code = '';\n  const loopVar =\n      JavaScript.nameDB_.getDistinctName('count', NameType.VARIABLE);\n  let endVar = repeats;\n  if (!repeats.match(/^\\w+$/) && !stringUtils.isNumber(repeats)) {\n    endVar =\n        JavaScript.nameDB_.getDistinctName('repeat_end', NameType.VARIABLE);\n    code += 'var ' + endVar + ' = ' + repeats + ';\\n';\n  }\n  code += 'for (var ' + loopVar + ' = 0; ' + loopVar + ' < ' + endVar + '; ' +\n      loopVar + '++) {\\n' + branch + '}\\n';\n  return code;\n};\n\nJavaScript['controls_repeat'] = JavaScript['controls_repeat_ext'];\n\nJavaScript['controls_whileUntil'] = function(block) {\n  // Do while/until loop.\n  const until = block.getFieldValue('MODE') === 'UNTIL';\n  let argument0 =\n      JavaScript.valueToCode(\n          block, 'BOOL',\n          until ? JavaScript.ORDER_LOGICAL_NOT : JavaScript.ORDER_NONE) ||\n      'false';\n  let branch = JavaScript.statementToCode(block, 'DO');\n  branch = JavaScript.addLoopTrap(branch, block);\n  if (until) {\n    argument0 = '!' + argument0;\n  }\n  return 'while (' + argument0 + ') {\\n' + branch + '}\\n';\n};\n\nJavaScript['controls_for'] = function(block) {\n  // For loop.\n  const variable0 =\n      JavaScript.nameDB_.getName(block.getFieldValue('VAR'), NameType.VARIABLE);\n  const argument0 =\n      JavaScript.valueToCode(block, 'FROM', JavaScript.ORDER_ASSIGNMENT) || '0';\n  const argument1 =\n      JavaScript.valueToCode(block, 'TO', JavaScript.ORDER_ASSIGNMENT) || '0';\n  const increment =\n      JavaScript.valueToCode(block, 'BY', JavaScript.ORDER_ASSIGNMENT) || '1';\n  let branch = JavaScript.statementToCode(block, 'DO');\n  branch = JavaScript.addLoopTrap(branch, block);\n  let code;\n  if (stringUtils.isNumber(argument0) && stringUtils.isNumber(argument1) &&\n      stringUtils.isNumber(increment)) {\n    // All arguments are simple numbers.\n    const up = Number(argument0) <= Number(argument1);\n    code = 'for (' + variable0 + ' = ' + argument0 + '; ' + variable0 +\n        (up ? ' <= ' : ' >= ') + argument1 + '; ' + variable0;\n    const step = Math.abs(Number(increment));\n    if (step === 1) {\n      code += up ? '++' : '--';\n    } else {\n      code += (up ? ' += ' : ' -= ') + step;\n    }\n    code += ') {\\n' + branch + '}\\n';\n  } else {\n    code = '';\n    // Cache non-trivial values to variables to prevent repeated look-ups.\n    let startVar = argument0;\n    if (!argument0.match(/^\\w+$/) && !stringUtils.isNumber(argument0)) {\n      startVar = JavaScript.nameDB_.getDistinctName(\n          variable0 + '_start', NameType.VARIABLE);\n      code += 'var ' + startVar + ' = ' + argument0 + ';\\n';\n    }\n    let endVar = argument1;\n    if (!argument1.match(/^\\w+$/) && !stringUtils.isNumber(argument1)) {\n      endVar = JavaScript.nameDB_.getDistinctName(\n          variable0 + '_end', NameType.VARIABLE);\n      code += 'var ' + endVar + ' = ' + argument1 + ';\\n';\n    }\n    // Determine loop direction at start, in case one of the bounds\n    // changes during loop execution.\n    const incVar = JavaScript.nameDB_.getDistinctName(\n        variable0 + '_inc', NameType.VARIABLE);\n    code += 'var ' + incVar + ' = ';\n    if (stringUtils.isNumber(increment)) {\n      code += Math.abs(increment) + ';\\n';\n    } else {\n      code += 'Math.abs(' + increment + ');\\n';\n    }\n    code += 'if (' + startVar + ' > ' + endVar + ') {\\n';\n    code += JavaScript.INDENT + incVar + ' = -' + incVar + ';\\n';\n    code += '}\\n';\n    code += 'for (' + variable0 + ' = ' + startVar + '; ' + incVar +\n        ' >= 0 ? ' + variable0 + ' <= ' + endVar + ' : ' + variable0 +\n        ' >= ' + endVar + '; ' + variable0 + ' += ' + incVar + ') {\\n' +\n        branch + '}\\n';\n  }\n  return code;\n};\n\nJavaScript['controls_forEach'] = function(block) {\n  // For each loop.\n  const variable0 =\n      JavaScript.nameDB_.getName(block.getFieldValue('VAR'), NameType.VARIABLE);\n  const argument0 =\n      JavaScript.valueToCode(block, 'LIST', JavaScript.ORDER_ASSIGNMENT) ||\n      '[]';\n  let branch = JavaScript.statementToCode(block, 'DO');\n  branch = JavaScript.addLoopTrap(branch, block);\n  let code = '';\n  // Cache non-trivial values to variables to prevent repeated look-ups.\n  let listVar = argument0;\n  if (!argument0.match(/^\\w+$/)) {\n    listVar = JavaScript.nameDB_.getDistinctName(\n        variable0 + '_list', NameType.VARIABLE);\n    code += 'var ' + listVar + ' = ' + argument0 + ';\\n';\n  }\n  const indexVar = JavaScript.nameDB_.getDistinctName(\n      variable0 + '_index', NameType.VARIABLE);\n  branch = JavaScript.INDENT + variable0 + ' = ' + listVar + '[' + indexVar +\n      '];\\n' + branch;\n  code += 'for (var ' + indexVar + ' in ' + listVar + ') {\\n' + branch + '}\\n';\n  return code;\n};\n\nJavaScript['controls_flow_statements'] = function(block) {\n  // Flow statements: continue, break.\n  let xfix = '';\n  if (JavaScript.STATEMENT_PREFIX) {\n    // Automatic prefix insertion is switched off for this block.  Add manually.\n    xfix += JavaScript.injectId(JavaScript.STATEMENT_PREFIX, block);\n  }\n  if (JavaScript.STATEMENT_SUFFIX) {\n    // Inject any statement suffix here since the regular one at the end\n    // will not get executed if the break/continue is triggered.\n    xfix += JavaScript.injectId(JavaScript.STATEMENT_SUFFIX, block);\n  }\n  if (JavaScript.STATEMENT_PREFIX) {\n    const loop = block.getSurroundLoop();\n    if (loop && !loop.suppressPrefixSuffix) {\n      // Inject loop's statement prefix here since the regular one at the end\n      // of the loop will not get executed if 'continue' is triggered.\n      // In the case of 'break', a prefix is needed due to the loop's suffix.\n      xfix += JavaScript.injectId(JavaScript.STATEMENT_PREFIX, loop);\n    }\n  }\n  switch (block.getFieldValue('FLOW')) {\n    case 'BREAK':\n      return xfix + 'break;\\n';\n    case 'CONTINUE':\n      return xfix + 'continue;\\n';\n  }\n  throw Error('Unknown flow statement.');\n};\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Generating JavaScript for logic blocks.\n */\n'use strict';\n\ngoog.module('Blockly.JavaScript.logic');\n\nconst JavaScript = goog.require('Blockly.JavaScript');\n\n\nJavaScript['controls_if'] = function(block) {\n  // If/elseif/else condition.\n  let n = 0;\n  let code = '';\n  if (JavaScript.STATEMENT_PREFIX) {\n    // Automatic prefix insertion is switched off for this block.  Add manually.\n    code += JavaScript.injectId(JavaScript.STATEMENT_PREFIX, block);\n  }\n  do {\n    const conditionCode =\n        JavaScript.valueToCode(block, 'IF' + n, JavaScript.ORDER_NONE) ||\n        'false';\n    let branchCode = JavaScript.statementToCode(block, 'DO' + n);\n    if (JavaScript.STATEMENT_SUFFIX) {\n      branchCode = JavaScript.prefixLines(\n                       JavaScript.injectId(JavaScript.STATEMENT_SUFFIX, block),\n                       JavaScript.INDENT) +\n          branchCode;\n    }\n    code += (n > 0 ? ' else ' : '') + 'if (' + conditionCode + ') {\\n' +\n        branchCode + '}';\n    n++;\n  } while (block.getInput('IF' + n));\n\n  if (block.getInput('ELSE') || JavaScript.STATEMENT_SUFFIX) {\n    let branchCode = JavaScript.statementToCode(block, 'ELSE');\n    if (JavaScript.STATEMENT_SUFFIX) {\n      branchCode = JavaScript.prefixLines(\n                       JavaScript.injectId(JavaScript.STATEMENT_SUFFIX, block),\n                       JavaScript.INDENT) +\n          branchCode;\n    }\n    code += ' else {\\n' + branchCode + '}';\n  }\n  return code + '\\n';\n};\n\nJavaScript['controls_ifelse'] = JavaScript['controls_if'];\n\nJavaScript['logic_compare'] = function(block) {\n  // Comparison operator.\n  const OPERATORS =\n      {'EQ': '==', 'NEQ': '!=', 'LT': '<', 'LTE': '<=', 'GT': '>', 'GTE': '>='};\n  const operator = OPERATORS[block.getFieldValue('OP')];\n  const order = (operator === '==' || operator === '!=') ?\n      JavaScript.ORDER_EQUALITY :\n      JavaScript.ORDER_RELATIONAL;\n  const argument0 = JavaScript.valueToCode(block, 'A', order) || '0';\n  const argument1 = JavaScript.valueToCode(block, 'B', order) || '0';\n  const code = argument0 + ' ' + operator + ' ' + argument1;\n  return [code, order];\n};\n\nJavaScript['logic_operation'] = function(block) {\n  // Operations 'and', 'or'.\n  const operator = (block.getFieldValue('OP') === 'AND') ? '&&' : '||';\n  const order = (operator === '&&') ? JavaScript.ORDER_LOGICAL_AND :\n                                      JavaScript.ORDER_LOGICAL_OR;\n  let argument0 = JavaScript.valueToCode(block, 'A', order);\n  let argument1 = JavaScript.valueToCode(block, 'B', order);\n  if (!argument0 && !argument1) {\n    // If there are no arguments, then the return value is false.\n    argument0 = 'false';\n    argument1 = 'false';\n  } else {\n    // Single missing arguments have no effect on the return value.\n    const defaultArgument = (operator === '&&') ? 'true' : 'false';\n    if (!argument0) {\n      argument0 = defaultArgument;\n    }\n    if (!argument1) {\n      argument1 = defaultArgument;\n    }\n  }\n  const code = argument0 + ' ' + operator + ' ' + argument1;\n  return [code, order];\n};\n\nJavaScript['logic_negate'] = function(block) {\n  // Negation.\n  const order = JavaScript.ORDER_LOGICAL_NOT;\n  const argument0 = JavaScript.valueToCode(block, 'BOOL', order) || 'true';\n  const code = '!' + argument0;\n  return [code, order];\n};\n\nJavaScript['logic_boolean'] = function(block) {\n  // Boolean values true and false.\n  const code = (block.getFieldValue('BOOL') === 'TRUE') ? 'true' : 'false';\n  return [code, JavaScript.ORDER_ATOMIC];\n};\n\nJavaScript['logic_null'] = function(block) {\n  // Null data type.\n  return ['null', JavaScript.ORDER_ATOMIC];\n};\n\nJavaScript['logic_ternary'] = function(block) {\n  // Ternary operator.\n  const value_if =\n      JavaScript.valueToCode(block, 'IF', JavaScript.ORDER_CONDITIONAL) ||\n      'false';\n  const value_then =\n      JavaScript.valueToCode(block, 'THEN', JavaScript.ORDER_CONDITIONAL) ||\n      'null';\n  const value_else =\n      JavaScript.valueToCode(block, 'ELSE', JavaScript.ORDER_CONDITIONAL) ||\n      'null';\n  const code = value_if + ' ? ' + value_then + ' : ' + value_else;\n  return [code, JavaScript.ORDER_CONDITIONAL];\n};\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Generating JavaScript for list blocks.\n * @suppress {missingRequire}\n */\n'use strict';\n\ngoog.module('Blockly.JavaScript.lists');\n\nconst JavaScript = goog.require('Blockly.JavaScript');\nconst {NameType} = goog.require('Blockly.Names');\n\n\nJavaScript['lists_create_empty'] = function(block) {\n  // Create an empty list.\n  return ['[]', JavaScript.ORDER_ATOMIC];\n};\n\nJavaScript['lists_create_with'] = function(block) {\n  // Create a list with any number of elements of any type.\n  const elements = new Array(block.itemCount_);\n  for (let i = 0; i < block.itemCount_; i++) {\n    elements[i] =\n        JavaScript.valueToCode(block, 'ADD' + i, JavaScript.ORDER_NONE) ||\n        'null';\n  }\n  const code = '[' + elements.join(', ') + ']';\n  return [code, JavaScript.ORDER_ATOMIC];\n};\n\nJavaScript['lists_repeat'] = function(block) {\n  // Create a list with one element repeated.\n  const functionName = JavaScript.provideFunction_('listsRepeat', `\nfunction ${JavaScript.FUNCTION_NAME_PLACEHOLDER_}(value, n) {\n  var array = [];\n  for (var i = 0; i < n; i++) {\n    array[i] = value;\n  }\n  return array;\n}\n`);\n  const element =\n      JavaScript.valueToCode(block, 'ITEM', JavaScript.ORDER_NONE) || 'null';\n  const repeatCount =\n      JavaScript.valueToCode(block, 'NUM', JavaScript.ORDER_NONE) || '0';\n  const code = functionName + '(' + element + ', ' + repeatCount + ')';\n  return [code, JavaScript.ORDER_FUNCTION_CALL];\n};\n\nJavaScript['lists_length'] = function(block) {\n  // String or array length.\n  const list =\n      JavaScript.valueToCode(block, 'VALUE', JavaScript.ORDER_MEMBER) || '[]';\n  return [list + '.length', JavaScript.ORDER_MEMBER];\n};\n\nJavaScript['lists_isEmpty'] = function(block) {\n  // Is the string null or array empty?\n  const list =\n      JavaScript.valueToCode(block, 'VALUE', JavaScript.ORDER_MEMBER) || '[]';\n  return ['!' + list + '.length', JavaScript.ORDER_LOGICAL_NOT];\n};\n\nJavaScript['lists_indexOf'] = function(block) {\n  // Find an item in the list.\n  const operator =\n      block.getFieldValue('END') === 'FIRST' ? 'indexOf' : 'lastIndexOf';\n  const item =\n      JavaScript.valueToCode(block, 'FIND', JavaScript.ORDER_NONE) || \"''\";\n  const list =\n      JavaScript.valueToCode(block, 'VALUE', JavaScript.ORDER_MEMBER) || '[]';\n  const code = list + '.' + operator + '(' + item + ')';\n  if (block.workspace.options.oneBasedIndex) {\n    return [code + ' + 1', JavaScript.ORDER_ADDITION];\n  }\n  return [code, JavaScript.ORDER_FUNCTION_CALL];\n};\n\nJavaScript['lists_getIndex'] = function(block) {\n  // Get element at index.\n  // Note: Until January 2013 this block did not have MODE or WHERE inputs.\n  const mode = block.getFieldValue('MODE') || 'GET';\n  const where = block.getFieldValue('WHERE') || 'FROM_START';\n  const listOrder =\n      (where === 'RANDOM') ? JavaScript.ORDER_NONE : JavaScript.ORDER_MEMBER;\n  const list = JavaScript.valueToCode(block, 'VALUE', listOrder) || '[]';\n\n  switch (where) {\n    case ('FIRST'):\n      if (mode === 'GET') {\n        const code = list + '[0]';\n        return [code, JavaScript.ORDER_MEMBER];\n      } else if (mode === 'GET_REMOVE') {\n        const code = list + '.shift()';\n        return [code, JavaScript.ORDER_MEMBER];\n      } else if (mode === 'REMOVE') {\n        return list + '.shift();\\n';\n      }\n      break;\n    case ('LAST'):\n      if (mode === 'GET') {\n        const code = list + '.slice(-1)[0]';\n        return [code, JavaScript.ORDER_MEMBER];\n      } else if (mode === 'GET_REMOVE') {\n        const code = list + '.pop()';\n        return [code, JavaScript.ORDER_MEMBER];\n      } else if (mode === 'REMOVE') {\n        return list + '.pop();\\n';\n      }\n      break;\n    case ('FROM_START'): {\n      const at = JavaScript.getAdjusted(block, 'AT');\n      if (mode === 'GET') {\n        const code = list + '[' + at + ']';\n        return [code, JavaScript.ORDER_MEMBER];\n      } else if (mode === 'GET_REMOVE') {\n        const code = list + '.splice(' + at + ', 1)[0]';\n        return [code, JavaScript.ORDER_FUNCTION_CALL];\n      } else if (mode === 'REMOVE') {\n        return list + '.splice(' + at + ', 1);\\n';\n      }\n      break;\n    }\n    case ('FROM_END'): {\n      const at = JavaScript.getAdjusted(block, 'AT', 1, true);\n      if (mode === 'GET') {\n        const code = list + '.slice(' + at + ')[0]';\n        return [code, JavaScript.ORDER_FUNCTION_CALL];\n      } else if (mode === 'GET_REMOVE') {\n        const code = list + '.splice(' + at + ', 1)[0]';\n        return [code, JavaScript.ORDER_FUNCTION_CALL];\n      } else if (mode === 'REMOVE') {\n        return list + '.splice(' + at + ', 1);';\n      }\n      break;\n    }\n    case ('RANDOM'): {\n      const functionName = JavaScript.provideFunction_('listsGetRandomItem', `\nfunction ${JavaScript.FUNCTION_NAME_PLACEHOLDER_}(list, remove) {\n  var x = Math.floor(Math.random() * list.length);\n  if (remove) {\n    return list.splice(x, 1)[0];\n  } else {\n    return list[x];\n  }\n}\n`);\n      const code = functionName + '(' + list + ', ' + (mode !== 'GET') + ')';\n      if (mode === 'GET' || mode === 'GET_REMOVE') {\n        return [code, JavaScript.ORDER_FUNCTION_CALL];\n      } else if (mode === 'REMOVE') {\n        return code + ';\\n';\n      }\n      break;\n    }\n  }\n  throw Error('Unhandled combination (lists_getIndex).');\n};\n\nJavaScript['lists_setIndex'] = function(block) {\n  // Set element at index.\n  // Note: Until February 2013 this block did not have MODE or WHERE inputs.\n  let list =\n      JavaScript.valueToCode(block, 'LIST', JavaScript.ORDER_MEMBER) || '[]';\n  const mode = block.getFieldValue('MODE') || 'GET';\n  const where = block.getFieldValue('WHERE') || 'FROM_START';\n  const value =\n      JavaScript.valueToCode(block, 'TO', JavaScript.ORDER_ASSIGNMENT) ||\n      'null';\n  // Cache non-trivial values to variables to prevent repeated look-ups.\n  // Closure, which accesses and modifies 'list'.\n  function cacheList() {\n    if (list.match(/^\\w+$/)) {\n      return '';\n    }\n    const listVar =\n        JavaScript.nameDB_.getDistinctName('tmpList', NameType.VARIABLE);\n    const code = 'var ' + listVar + ' = ' + list + ';\\n';\n    list = listVar;\n    return code;\n  }\n  switch (where) {\n    case ('FIRST'):\n      if (mode === 'SET') {\n        return list + '[0] = ' + value + ';\\n';\n      } else if (mode === 'INSERT') {\n        return list + '.unshift(' + value + ');\\n';\n      }\n      break;\n    case ('LAST'):\n      if (mode === 'SET') {\n        let code = cacheList();\n        code += list + '[' + list + '.length - 1] = ' + value + ';\\n';\n        return code;\n      } else if (mode === 'INSERT') {\n        return list + '.push(' + value + ');\\n';\n      }\n      break;\n    case ('FROM_START'): {\n      const at = JavaScript.getAdjusted(block, 'AT');\n      if (mode === 'SET') {\n        return list + '[' + at + '] = ' + value + ';\\n';\n      } else if (mode === 'INSERT') {\n        return list + '.splice(' + at + ', 0, ' + value + ');\\n';\n      }\n      break;\n    }\n    case ('FROM_END'): {\n      const at = JavaScript.getAdjusted(\n          block, 'AT', 1, false, JavaScript.ORDER_SUBTRACTION);\n      let code = cacheList();\n      if (mode === 'SET') {\n        code += list + '[' + list + '.length - ' + at + '] = ' + value + ';\\n';\n        return code;\n      } else if (mode === 'INSERT') {\n        code += list + '.splice(' + list + '.length - ' + at + ', 0, ' + value +\n            ');\\n';\n        return code;\n      }\n      break;\n    }\n    case ('RANDOM'): {\n      let code = cacheList();\n      const xVar =\n          JavaScript.nameDB_.getDistinctName('tmpX', NameType.VARIABLE);\n      code += 'var ' + xVar + ' = Math.floor(Math.random() * ' + list +\n          '.length);\\n';\n      if (mode === 'SET') {\n        code += list + '[' + xVar + '] = ' + value + ';\\n';\n        return code;\n      } else if (mode === 'INSERT') {\n        code += list + '.splice(' + xVar + ', 0, ' + value + ');\\n';\n        return code;\n      }\n      break;\n    }\n  }\n  throw Error('Unhandled combination (lists_setIndex).');\n};\n\n/**\n * Returns an expression calculating the index into a list.\n * @param {string} listName Name of the list, used to calculate length.\n * @param {string} where The method of indexing, selected by dropdown in Blockly\n * @param {string=} opt_at The optional offset when indexing from start/end.\n * @return {string|undefined} Index expression.\n */\nconst getSubstringIndex = function(listName, where, opt_at) {\n  if (where === 'FIRST') {\n    return '0';\n  } else if (where === 'FROM_END') {\n    return listName + '.length - 1 - ' + opt_at;\n  } else if (where === 'LAST') {\n    return listName + '.length - 1';\n  } else {\n    return opt_at;\n  }\n};\n\nJavaScript['lists_getSublist'] = function(block) {\n  // Get sublist.\n  const list =\n      JavaScript.valueToCode(block, 'LIST', JavaScript.ORDER_MEMBER) || '[]';\n  const where1 = block.getFieldValue('WHERE1');\n  const where2 = block.getFieldValue('WHERE2');\n  let code;\n  if (where1 === 'FIRST' && where2 === 'LAST') {\n    code = list + '.slice(0)';\n  } else if (\n      list.match(/^\\w+$/) ||\n      (where1 !== 'FROM_END' && where2 === 'FROM_START')) {\n    // If the list is a variable or doesn't require a call for length, don't\n    // generate a helper function.\n    let at1;\n    switch (where1) {\n      case 'FROM_START':\n        at1 = JavaScript.getAdjusted(block, 'AT1');\n        break;\n      case 'FROM_END':\n        at1 = JavaScript.getAdjusted(\n            block, 'AT1', 1, false, JavaScript.ORDER_SUBTRACTION);\n        at1 = list + '.length - ' + at1;\n        break;\n      case 'FIRST':\n        at1 = '0';\n        break;\n      default:\n        throw Error('Unhandled option (lists_getSublist).');\n    }\n    let at2;\n    switch (where2) {\n      case 'FROM_START':\n        at2 = JavaScript.getAdjusted(block, 'AT2', 1);\n        break;\n      case 'FROM_END':\n        at2 = JavaScript.getAdjusted(\n            block, 'AT2', 0, false, JavaScript.ORDER_SUBTRACTION);\n        at2 = list + '.length - ' + at2;\n        break;\n      case 'LAST':\n        at2 = list + '.length';\n        break;\n      default:\n        throw Error('Unhandled option (lists_getSublist).');\n    }\n    code = list + '.slice(' + at1 + ', ' + at2 + ')';\n  } else {\n    const at1 = JavaScript.getAdjusted(block, 'AT1');\n    const at2 = JavaScript.getAdjusted(block, 'AT2');\n    const wherePascalCase = {\n      'FIRST': 'First',\n      'LAST': 'Last',\n      'FROM_START': 'FromStart',\n      'FROM_END': 'FromEnd',\n    };\n    // The value for 'FROM_END' and'FROM_START' depends on `at` so\n    // we add it as a parameter.\n    const at1Param =\n        (where1 === 'FROM_END' || where1 === 'FROM_START') ? ', at1' : '';\n    const at2Param =\n        (where2 === 'FROM_END' || where2 === 'FROM_START') ? ', at2' : '';\n    const functionName = JavaScript.provideFunction_(\n        'subsequence' + wherePascalCase[where1] + wherePascalCase[where2], `\nfunction ${JavaScript.FUNCTION_NAME_PLACEHOLDER_}(sequence${at1Param}${at2Param}) {\n  var start = ${getSubstringIndex('sequence', where1, 'at1')};\n  var end = ${getSubstringIndex('sequence', where2, 'at2')} + 1;\n  return sequence.slice(start, end);\n}\n`);\n    code = functionName + '(' + list +\n        // The value for 'FROM_END' and 'FROM_START' depends on `at` so we\n        // pass it.\n        ((where1 === 'FROM_END' || where1 === 'FROM_START') ? ', ' + at1 : '') +\n        ((where2 === 'FROM_END' || where2 === 'FROM_START') ? ', ' + at2 : '') +\n        ')';\n  }\n  return [code, JavaScript.ORDER_FUNCTION_CALL];\n};\n\nJavaScript['lists_sort'] = function(block) {\n  // Block for sorting a list.\n  const list =\n      JavaScript.valueToCode(block, 'LIST', JavaScript.ORDER_FUNCTION_CALL) ||\n      '[]';\n  const direction = block.getFieldValue('DIRECTION') === '1' ? 1 : -1;\n  const type = block.getFieldValue('TYPE');\n  const getCompareFunctionName =\n      JavaScript.provideFunction_('listsGetSortCompare', `\nfunction ${JavaScript.FUNCTION_NAME_PLACEHOLDER_}(type, direction) {\n  var compareFuncs = {\n    'NUMERIC': function(a, b) {\n        return Number(a) - Number(b); },\n    'TEXT': function(a, b) {\n        return a.toString() > b.toString() ? 1 : -1; },\n    'IGNORE_CASE': function(a, b) {\n        return a.toString().toLowerCase() > b.toString().toLowerCase() ? 1 : -1; },\n  };\n  var compare = compareFuncs[type];\n  return function(a, b) { return compare(a, b) * direction; };\n}\n      `);\n  return [\n    list + '.slice().sort(' + getCompareFunctionName + '(\"' + type + '\", ' +\n        direction + '))',\n    JavaScript.ORDER_FUNCTION_CALL\n  ];\n};\n\nJavaScript['lists_split'] = function(block) {\n  // Block for splitting text into a list, or joining a list into text.\n  let input = JavaScript.valueToCode(block, 'INPUT', JavaScript.ORDER_MEMBER);\n  const delimiter =\n      JavaScript.valueToCode(block, 'DELIM', JavaScript.ORDER_NONE) || \"''\";\n  const mode = block.getFieldValue('MODE');\n  let functionName;\n  if (mode === 'SPLIT') {\n    if (!input) {\n      input = \"''\";\n    }\n    functionName = 'split';\n  } else if (mode === 'JOIN') {\n    if (!input) {\n      input = '[]';\n    }\n    functionName = 'join';\n  } else {\n    throw Error('Unknown mode: ' + mode);\n  }\n  const code = input + '.' + functionName + '(' + delimiter + ')';\n  return [code, JavaScript.ORDER_FUNCTION_CALL];\n};\n\nJavaScript['lists_reverse'] = function(block) {\n  // Block for reversing a list.\n  const list =\n      JavaScript.valueToCode(block, 'LIST', JavaScript.ORDER_FUNCTION_CALL) ||\n      '[]';\n  const code = list + '.slice().reverse()';\n  return [code, JavaScript.ORDER_FUNCTION_CALL];\n};\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Generating JavaScript for colour blocks.\n */\n'use strict';\n\ngoog.module('Blockly.JavaScript.colour');\n\nconst JavaScript = goog.require('Blockly.JavaScript');\n\n\nJavaScript['colour_picker'] = function(block) {\n  // Colour picker.\n  const code = JavaScript.quote_(block.getFieldValue('COLOUR'));\n  return [code, JavaScript.ORDER_ATOMIC];\n};\n\nJavaScript['colour_random'] = function(block) {\n  // Generate a random colour.\n  const functionName = JavaScript.provideFunction_('colourRandom', `\nfunction ${JavaScript.FUNCTION_NAME_PLACEHOLDER_}() {\n  var num = Math.floor(Math.random() * Math.pow(2, 24));\n  return '#' + ('00000' + num.toString(16)).substr(-6);\n}\n`);\n  const code = functionName + '()';\n  return [code, JavaScript.ORDER_FUNCTION_CALL];\n};\n\nJavaScript['colour_rgb'] = function(block) {\n  // Compose a colour from RGB components expressed as percentages.\n  const red = JavaScript.valueToCode(block, 'RED', JavaScript.ORDER_NONE) || 0;\n  const green =\n      JavaScript.valueToCode(block, 'GREEN', JavaScript.ORDER_NONE) || 0;\n  const blue =\n      JavaScript.valueToCode(block, 'BLUE', JavaScript.ORDER_NONE) || 0;\n  const functionName = JavaScript.provideFunction_('colourRgb', `\nfunction ${JavaScript.FUNCTION_NAME_PLACEHOLDER_}(r, g, b) {\n  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;\n  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;\n  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;\n  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);\n  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);\n  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);\n  return '#' + r + g + b;\n}\n`);\n  const code = functionName + '(' + red + ', ' + green + ', ' + blue + ')';\n  return [code, JavaScript.ORDER_FUNCTION_CALL];\n};\n\nJavaScript['colour_blend'] = function(block) {\n  // Blend two colours together.\n  const c1 = JavaScript.valueToCode(block, 'COLOUR1', JavaScript.ORDER_NONE) ||\n      \"'#000000'\";\n  const c2 = JavaScript.valueToCode(block, 'COLOUR2', JavaScript.ORDER_NONE) ||\n      \"'#000000'\";\n  const ratio =\n      JavaScript.valueToCode(block, 'RATIO', JavaScript.ORDER_NONE) || 0.5;\n  const functionName = JavaScript.provideFunction_('colourBlend', `\nfunction ${JavaScript.FUNCTION_NAME_PLACEHOLDER_}(c1, c2, ratio) {\n  ratio = Math.max(Math.min(Number(ratio), 1), 0);\n  var r1 = parseInt(c1.substring(1, 3), 16);\n  var g1 = parseInt(c1.substring(3, 5), 16);\n  var b1 = parseInt(c1.substring(5, 7), 16);\n  var r2 = parseInt(c2.substring(1, 3), 16);\n  var g2 = parseInt(c2.substring(3, 5), 16);\n  var b2 = parseInt(c2.substring(5, 7), 16);\n  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);\n  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);\n  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);\n  r = ('0' + (r || 0).toString(16)).slice(-2);\n  g = ('0' + (g || 0).toString(16)).slice(-2);\n  b = ('0' + (b || 0).toString(16)).slice(-2);\n  return '#' + r + g + b;\n}\n`);\n  const code = functionName + '(' + c1 + ', ' + c2 + ', ' + ratio + ')';\n  return [code, JavaScript.ORDER_FUNCTION_CALL];\n};\n","/* eslint-disable */\n;(function(root, factory) {\n  if (typeof define === 'function' && define.amd) { // AMD\n    define(['../core'], factory);\n  } else if (typeof exports === 'object') { // Node.js\n    module.exports = factory(require('../core'));\n  } else { // Browser\n    root.Blockly.Msg = factory(root.Blockly);\n  }\n}(this, function(Blockly) {\n\n      var Blockly = {};Blockly.Msg={};// This file was automatically generated.  Do not modify.\n\n'use strict';\n\nBlockly.Msg[\"ADD_COMMENT\"] = \"Add Comment\";\nBlockly.Msg[\"CANNOT_DELETE_VARIABLE_PROCEDURE\"] = \"Can't delete the variable '%1' because it's part of the definition of the function '%2'\";\nBlockly.Msg[\"CHANGE_VALUE_TITLE\"] = \"Change value:\";\nBlockly.Msg[\"CLEAN_UP\"] = \"Clean up Blocks\";\nBlockly.Msg[\"COLLAPSED_WARNINGS_WARNING\"] = \"Collapsed blocks contain warnings.\";\nBlockly.Msg[\"COLLAPSE_ALL\"] = \"Collapse Blocks\";\nBlockly.Msg[\"COLLAPSE_BLOCK\"] = \"Collapse Block\";\nBlockly.Msg[\"COLOUR_BLEND_COLOUR1\"] = \"colour 1\";\nBlockly.Msg[\"COLOUR_BLEND_COLOUR2\"] = \"colour 2\";\nBlockly.Msg[\"COLOUR_BLEND_HELPURL\"] = \"https://meyerweb.com/eric/tools/color-blend/#:::rgbp\";\nBlockly.Msg[\"COLOUR_BLEND_RATIO\"] = \"ratio\";\nBlockly.Msg[\"COLOUR_BLEND_TITLE\"] = \"blend\";\nBlockly.Msg[\"COLOUR_BLEND_TOOLTIP\"] = \"Blends two colours together with a given ratio (0.0 - 1.0).\";\nBlockly.Msg[\"COLOUR_PICKER_HELPURL\"] = \"https://en.wikipedia.org/wiki/Color\";\nBlockly.Msg[\"COLOUR_PICKER_TOOLTIP\"] = \"Choose a colour from the palette.\";\nBlockly.Msg[\"COLOUR_RANDOM_HELPURL\"] = \"http://randomcolour.com\";\nBlockly.Msg[\"COLOUR_RANDOM_TITLE\"] = \"random colour\";\nBlockly.Msg[\"COLOUR_RANDOM_TOOLTIP\"] = \"Choose a colour at random.\";\nBlockly.Msg[\"COLOUR_RGB_BLUE\"] = \"blue\";\nBlockly.Msg[\"COLOUR_RGB_GREEN\"] = \"green\";\nBlockly.Msg[\"COLOUR_RGB_HELPURL\"] = \"https://www.december.com/html/spec/colorpercompact.html\";\nBlockly.Msg[\"COLOUR_RGB_RED\"] = \"red\";\nBlockly.Msg[\"COLOUR_RGB_TITLE\"] = \"colour with\";\nBlockly.Msg[\"COLOUR_RGB_TOOLTIP\"] = \"Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.\";\nBlockly.Msg[\"CONTROLS_FLOW_STATEMENTS_HELPURL\"] = \"https://github.com/google/blockly/wiki/Loops#loop-termination-blocks\";\nBlockly.Msg[\"CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK\"] = \"break out of loop\";\nBlockly.Msg[\"CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE\"] = \"continue with next iteration of loop\";\nBlockly.Msg[\"CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK\"] = \"Break out of the containing loop.\";\nBlockly.Msg[\"CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE\"] = \"Skip the rest of this loop, and continue with the next iteration.\";\nBlockly.Msg[\"CONTROLS_FLOW_STATEMENTS_WARNING\"] = \"Warning: This block may only be used within a loop.\";\nBlockly.Msg[\"CONTROLS_FOREACH_HELPURL\"] = \"https://github.com/google/blockly/wiki/Loops#for-each\";\nBlockly.Msg[\"CONTROLS_FOREACH_TITLE\"] = \"for each item %1 in list %2\";\nBlockly.Msg[\"CONTROLS_FOREACH_TOOLTIP\"] = \"For each item in a list, set the variable '%1' to the item, and then do some statements.\";\nBlockly.Msg[\"CONTROLS_FOR_HELPURL\"] = \"https://github.com/google/blockly/wiki/Loops#count-with\";\nBlockly.Msg[\"CONTROLS_FOR_TITLE\"] = \"count with %1 from %2 to %3 by %4\";\nBlockly.Msg[\"CONTROLS_FOR_TOOLTIP\"] = \"Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.\";\nBlockly.Msg[\"CONTROLS_IF_ELSEIF_TOOLTIP\"] = \"Add a condition to the if block.\";\nBlockly.Msg[\"CONTROLS_IF_ELSE_TOOLTIP\"] = \"Add a final, catch-all condition to the if block.\";\nBlockly.Msg[\"CONTROLS_IF_HELPURL\"] = \"https://github.com/google/blockly/wiki/IfElse\";\nBlockly.Msg[\"CONTROLS_IF_IF_TOOLTIP\"] = \"Add, remove, or reorder sections to reconfigure this if block.\";\nBlockly.Msg[\"CONTROLS_IF_MSG_ELSE\"] = \"else\";\nBlockly.Msg[\"CONTROLS_IF_MSG_ELSEIF\"] = \"else if\";\nBlockly.Msg[\"CONTROLS_IF_MSG_IF\"] = \"if\";\nBlockly.Msg[\"CONTROLS_IF_TOOLTIP_1\"] = \"If a value is true, then do some statements.\";\nBlockly.Msg[\"CONTROLS_IF_TOOLTIP_2\"] = \"If a value is true, then do the first block of statements. Otherwise, do the second block of statements.\";\nBlockly.Msg[\"CONTROLS_IF_TOOLTIP_3\"] = \"If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.\";\nBlockly.Msg[\"CONTROLS_IF_TOOLTIP_4\"] = \"If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.\";\nBlockly.Msg[\"CONTROLS_REPEAT_HELPURL\"] = \"https://en.wikipedia.org/wiki/For_loop\";\nBlockly.Msg[\"CONTROLS_REPEAT_INPUT_DO\"] = \"do\";\nBlockly.Msg[\"CONTROLS_REPEAT_TITLE\"] = \"repeat %1 times\";\nBlockly.Msg[\"CONTROLS_REPEAT_TOOLTIP\"] = \"Do some statements several times.\";\nBlockly.Msg[\"CONTROLS_WHILEUNTIL_HELPURL\"] = \"https://github.com/google/blockly/wiki/Loops#repeat\";\nBlockly.Msg[\"CONTROLS_WHILEUNTIL_OPERATOR_UNTIL\"] = \"repeat until\";\nBlockly.Msg[\"CONTROLS_WHILEUNTIL_OPERATOR_WHILE\"] = \"repeat while\";\nBlockly.Msg[\"CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL\"] = \"While a value is false, then do some statements.\";\nBlockly.Msg[\"CONTROLS_WHILEUNTIL_TOOLTIP_WHILE\"] = \"While a value is true, then do some statements.\";\nBlockly.Msg[\"DELETE_ALL_BLOCKS\"] = \"Delete all %1 blocks?\";\nBlockly.Msg[\"DELETE_BLOCK\"] = \"Delete Block\";\nBlockly.Msg[\"DELETE_VARIABLE\"] = \"Delete the '%1' variable\";\nBlockly.Msg[\"DELETE_VARIABLE_CONFIRMATION\"] = \"Delete %1 uses of the '%2' variable?\";\nBlockly.Msg[\"DELETE_X_BLOCKS\"] = \"Delete %1 Blocks\";\nBlockly.Msg[\"DIALOG_CANCEL\"] = \"Cancel\";\nBlockly.Msg[\"DIALOG_OK\"] = \"OK\";\nBlockly.Msg[\"DISABLE_BLOCK\"] = \"Disable Block\";\nBlockly.Msg[\"DUPLICATE_BLOCK\"] = \"Duplicate\";\nBlockly.Msg[\"DUPLICATE_COMMENT\"] = \"Duplicate Comment\";\nBlockly.Msg[\"ENABLE_BLOCK\"] = \"Enable Block\";\nBlockly.Msg[\"EXPAND_ALL\"] = \"Expand Blocks\";\nBlockly.Msg[\"EXPAND_BLOCK\"] = \"Expand Block\";\nBlockly.Msg[\"EXTERNAL_INPUTS\"] = \"External Inputs\";\nBlockly.Msg[\"HELP\"] = \"Help\";\nBlockly.Msg[\"INLINE_INPUTS\"] = \"Inline Inputs\";\nBlockly.Msg[\"LISTS_CREATE_EMPTY_HELPURL\"] = \"https://github.com/google/blockly/wiki/Lists#create-empty-list\";\nBlockly.Msg[\"LISTS_CREATE_EMPTY_TITLE\"] = \"create empty list\";\nBlockly.Msg[\"LISTS_CREATE_EMPTY_TOOLTIP\"] = \"Returns a list, of length 0, containing no data records\";\nBlockly.Msg[\"LISTS_CREATE_WITH_CONTAINER_TITLE_ADD\"] = \"list\";\nBlockly.Msg[\"LISTS_CREATE_WITH_CONTAINER_TOOLTIP\"] = \"Add, remove, or reorder sections to reconfigure this list block.\";\nBlockly.Msg[\"LISTS_CREATE_WITH_HELPURL\"] = \"https://github.com/google/blockly/wiki/Lists#create-list-with\";\nBlockly.Msg[\"LISTS_CREATE_WITH_INPUT_WITH\"] = \"create list with\";\nBlockly.Msg[\"LISTS_CREATE_WITH_ITEM_TOOLTIP\"] = \"Add an item to the list.\";\nBlockly.Msg[\"LISTS_CREATE_WITH_TOOLTIP\"] = \"Create a list with any number of items.\";\nBlockly.Msg[\"LISTS_GET_INDEX_FIRST\"] = \"first\";\nBlockly.Msg[\"LISTS_GET_INDEX_FROM_END\"] = \"# from end\";\nBlockly.Msg[\"LISTS_GET_INDEX_FROM_START\"] = \"#\";\nBlockly.Msg[\"LISTS_GET_INDEX_GET\"] = \"get\";\nBlockly.Msg[\"LISTS_GET_INDEX_GET_REMOVE\"] = \"get and remove\";\nBlockly.Msg[\"LISTS_GET_INDEX_LAST\"] = \"last\";\nBlockly.Msg[\"LISTS_GET_INDEX_RANDOM\"] = \"random\";\nBlockly.Msg[\"LISTS_GET_INDEX_REMOVE\"] = \"remove\";\nBlockly.Msg[\"LISTS_GET_INDEX_TAIL\"] = \"\";\nBlockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_GET_FIRST\"] = \"Returns the first item in a list.\";\nBlockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_GET_FROM\"] = \"Returns the item at the specified position in a list.\";\nBlockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_GET_LAST\"] = \"Returns the last item in a list.\";\nBlockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_GET_RANDOM\"] = \"Returns a random item in a list.\";\nBlockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST\"] = \"Removes and returns the first item in a list.\";\nBlockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM\"] = \"Removes and returns the item at the specified position in a list.\";\nBlockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST\"] = \"Removes and returns the last item in a list.\";\nBlockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM\"] = \"Removes and returns a random item in a list.\";\nBlockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST\"] = \"Removes the first item in a list.\";\nBlockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM\"] = \"Removes the item at the specified position in a list.\";\nBlockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST\"] = \"Removes the last item in a list.\";\nBlockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM\"] = \"Removes a random item in a list.\";\nBlockly.Msg[\"LISTS_GET_SUBLIST_END_FROM_END\"] = \"to # from end\";\nBlockly.Msg[\"LISTS_GET_SUBLIST_END_FROM_START\"] = \"to #\";\nBlockly.Msg[\"LISTS_GET_SUBLIST_END_LAST\"] = \"to last\";\nBlockly.Msg[\"LISTS_GET_SUBLIST_HELPURL\"] = \"https://github.com/google/blockly/wiki/Lists#getting-a-sublist\";\nBlockly.Msg[\"LISTS_GET_SUBLIST_START_FIRST\"] = \"get sub-list from first\";\nBlockly.Msg[\"LISTS_GET_SUBLIST_START_FROM_END\"] = \"get sub-list from # from end\";\nBlockly.Msg[\"LISTS_GET_SUBLIST_START_FROM_START\"] = \"get sub-list from #\";\nBlockly.Msg[\"LISTS_GET_SUBLIST_TAIL\"] = \"\";\nBlockly.Msg[\"LISTS_GET_SUBLIST_TOOLTIP\"] = \"Creates a copy of the specified portion of a list.\";\nBlockly.Msg[\"LISTS_INDEX_FROM_END_TOOLTIP\"] = \"%1 is the last item.\";\nBlockly.Msg[\"LISTS_INDEX_FROM_START_TOOLTIP\"] = \"%1 is the first item.\";\nBlockly.Msg[\"LISTS_INDEX_OF_FIRST\"] = \"find first occurrence of item\";\nBlockly.Msg[\"LISTS_INDEX_OF_HELPURL\"] = \"https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list\";\nBlockly.Msg[\"LISTS_INDEX_OF_LAST\"] = \"find last occurrence of item\";\nBlockly.Msg[\"LISTS_INDEX_OF_TOOLTIP\"] = \"Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.\";\nBlockly.Msg[\"LISTS_INLIST\"] = \"in list\";\nBlockly.Msg[\"LISTS_ISEMPTY_HELPURL\"] = \"https://github.com/google/blockly/wiki/Lists#is-empty\";\nBlockly.Msg[\"LISTS_ISEMPTY_TITLE\"] = \"%1 is empty\";\nBlockly.Msg[\"LISTS_ISEMPTY_TOOLTIP\"] = \"Returns true if the list is empty.\";\nBlockly.Msg[\"LISTS_LENGTH_HELPURL\"] = \"https://github.com/google/blockly/wiki/Lists#length-of\";\nBlockly.Msg[\"LISTS_LENGTH_TITLE\"] = \"length of %1\";\nBlockly.Msg[\"LISTS_LENGTH_TOOLTIP\"] = \"Returns the length of a list.\";\nBlockly.Msg[\"LISTS_REPEAT_HELPURL\"] = \"https://github.com/google/blockly/wiki/Lists#create-list-with\";\nBlockly.Msg[\"LISTS_REPEAT_TITLE\"] = \"create list with item %1 repeated %2 times\";\nBlockly.Msg[\"LISTS_REPEAT_TOOLTIP\"] = \"Creates a list consisting of the given value repeated the specified number of times.\";\nBlockly.Msg[\"LISTS_REVERSE_HELPURL\"] = \"https://github.com/google/blockly/wiki/Lists#reversing-a-list\";\nBlockly.Msg[\"LISTS_REVERSE_MESSAGE0\"] = \"reverse %1\";\nBlockly.Msg[\"LISTS_REVERSE_TOOLTIP\"] = \"Reverse a copy of a list.\";\nBlockly.Msg[\"LISTS_SET_INDEX_HELPURL\"] = \"https://github.com/google/blockly/wiki/Lists#in-list--set\";\nBlockly.Msg[\"LISTS_SET_INDEX_INPUT_TO\"] = \"as\";\nBlockly.Msg[\"LISTS_SET_INDEX_INSERT\"] = \"insert at\";\nBlockly.Msg[\"LISTS_SET_INDEX_SET\"] = \"set\";\nBlockly.Msg[\"LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST\"] = \"Inserts the item at the start of a list.\";\nBlockly.Msg[\"LISTS_SET_INDEX_TOOLTIP_INSERT_FROM\"] = \"Inserts the item at the specified position in a list.\";\nBlockly.Msg[\"LISTS_SET_INDEX_TOOLTIP_INSERT_LAST\"] = \"Append the item to the end of a list.\";\nBlockly.Msg[\"LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM\"] = \"Inserts the item randomly in a list.\";\nBlockly.Msg[\"LISTS_SET_INDEX_TOOLTIP_SET_FIRST\"] = \"Sets the first item in a list.\";\nBlockly.Msg[\"LISTS_SET_INDEX_TOOLTIP_SET_FROM\"] = \"Sets the item at the specified position in a list.\";\nBlockly.Msg[\"LISTS_SET_INDEX_TOOLTIP_SET_LAST\"] = \"Sets the last item in a list.\";\nBlockly.Msg[\"LISTS_SET_INDEX_TOOLTIP_SET_RANDOM\"] = \"Sets a random item in a list.\";\nBlockly.Msg[\"LISTS_SORT_HELPURL\"] = \"https://github.com/google/blockly/wiki/Lists#sorting-a-list\";\nBlockly.Msg[\"LISTS_SORT_ORDER_ASCENDING\"] = \"ascending\";\nBlockly.Msg[\"LISTS_SORT_ORDER_DESCENDING\"] = \"descending\";\nBlockly.Msg[\"LISTS_SORT_TITLE\"] = \"sort %1 %2 %3\";\nBlockly.Msg[\"LISTS_SORT_TOOLTIP\"] = \"Sort a copy of a list.\";\nBlockly.Msg[\"LISTS_SORT_TYPE_IGNORECASE\"] = \"alphabetic, ignore case\";\nBlockly.Msg[\"LISTS_SORT_TYPE_NUMERIC\"] = \"numeric\";\nBlockly.Msg[\"LISTS_SORT_TYPE_TEXT\"] = \"alphabetic\";\nBlockly.Msg[\"LISTS_SPLIT_HELPURL\"] = \"https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists\";\nBlockly.Msg[\"LISTS_SPLIT_LIST_FROM_TEXT\"] = \"make list from text\";\nBlockly.Msg[\"LISTS_SPLIT_TEXT_FROM_LIST\"] = \"make text from list\";\nBlockly.Msg[\"LISTS_SPLIT_TOOLTIP_JOIN\"] = \"Join a list of texts into one text, separated by a delimiter.\";\nBlockly.Msg[\"LISTS_SPLIT_TOOLTIP_SPLIT\"] = \"Split text into a list of texts, breaking at each delimiter.\";\nBlockly.Msg[\"LISTS_SPLIT_WITH_DELIMITER\"] = \"with delimiter\";\nBlockly.Msg[\"LOGIC_BOOLEAN_FALSE\"] = \"false\";\nBlockly.Msg[\"LOGIC_BOOLEAN_HELPURL\"] = \"https://github.com/google/blockly/wiki/Logic#values\";\nBlockly.Msg[\"LOGIC_BOOLEAN_TOOLTIP\"] = \"Returns either true or false.\";\nBlockly.Msg[\"LOGIC_BOOLEAN_TRUE\"] = \"true\";\nBlockly.Msg[\"LOGIC_COMPARE_HELPURL\"] = \"https://en.wikipedia.org/wiki/Inequality_(mathematics)\";\nBlockly.Msg[\"LOGIC_COMPARE_TOOLTIP_EQ\"] = \"Return true if both inputs equal each other.\";\nBlockly.Msg[\"LOGIC_COMPARE_TOOLTIP_GT\"] = \"Return true if the first input is greater than the second input.\";\nBlockly.Msg[\"LOGIC_COMPARE_TOOLTIP_GTE\"] = \"Return true if the first input is greater than or equal to the second input.\";\nBlockly.Msg[\"LOGIC_COMPARE_TOOLTIP_LT\"] = \"Return true if the first input is smaller than the second input.\";\nBlockly.Msg[\"LOGIC_COMPARE_TOOLTIP_LTE\"] = \"Return true if the first input is smaller than or equal to the second input.\";\nBlockly.Msg[\"LOGIC_COMPARE_TOOLTIP_NEQ\"] = \"Return true if both inputs are not equal to each other.\";\nBlockly.Msg[\"LOGIC_NEGATE_HELPURL\"] = \"https://github.com/google/blockly/wiki/Logic#not\";\nBlockly.Msg[\"LOGIC_NEGATE_TITLE\"] = \"not %1\";\nBlockly.Msg[\"LOGIC_NEGATE_TOOLTIP\"] = \"Returns true if the input is false. Returns false if the input is true.\";\nBlockly.Msg[\"LOGIC_NULL\"] = \"null\";\nBlockly.Msg[\"LOGIC_NULL_HELPURL\"] = \"https://en.wikipedia.org/wiki/Nullable_type\";\nBlockly.Msg[\"LOGIC_NULL_TOOLTIP\"] = \"Returns null.\";\nBlockly.Msg[\"LOGIC_OPERATION_AND\"] = \"and\";\nBlockly.Msg[\"LOGIC_OPERATION_HELPURL\"] = \"https://github.com/google/blockly/wiki/Logic#logical-operations\";\nBlockly.Msg[\"LOGIC_OPERATION_OR\"] = \"or\";\nBlockly.Msg[\"LOGIC_OPERATION_TOOLTIP_AND\"] = \"Return true if both inputs are true.\";\nBlockly.Msg[\"LOGIC_OPERATION_TOOLTIP_OR\"] = \"Return true if at least one of the inputs is true.\";\nBlockly.Msg[\"LOGIC_TERNARY_CONDITION\"] = \"test\";\nBlockly.Msg[\"LOGIC_TERNARY_HELPURL\"] = \"https://en.wikipedia.org/wiki/%3F:\";\nBlockly.Msg[\"LOGIC_TERNARY_IF_FALSE\"] = \"if false\";\nBlockly.Msg[\"LOGIC_TERNARY_IF_TRUE\"] = \"if true\";\nBlockly.Msg[\"LOGIC_TERNARY_TOOLTIP\"] = \"Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.\";\nBlockly.Msg[\"MATH_ADDITION_SYMBOL\"] = \"+\";\nBlockly.Msg[\"MATH_ARITHMETIC_HELPURL\"] = \"https://en.wikipedia.org/wiki/Arithmetic\";\nBlockly.Msg[\"MATH_ARITHMETIC_TOOLTIP_ADD\"] = \"Return the sum of the two numbers.\";\nBlockly.Msg[\"MATH_ARITHMETIC_TOOLTIP_DIVIDE\"] = \"Return the quotient of the two numbers.\";\nBlockly.Msg[\"MATH_ARITHMETIC_TOOLTIP_MINUS\"] = \"Return the difference of the two numbers.\";\nBlockly.Msg[\"MATH_ARITHMETIC_TOOLTIP_MULTIPLY\"] = \"Return the product of the two numbers.\";\nBlockly.Msg[\"MATH_ARITHMETIC_TOOLTIP_POWER\"] = \"Return the first number raised to the power of the second number.\";\nBlockly.Msg[\"MATH_ATAN2_HELPURL\"] = \"https://en.wikipedia.org/wiki/Atan2\";\nBlockly.Msg[\"MATH_ATAN2_TITLE\"] = \"atan2 of X:%1 Y:%2\";\nBlockly.Msg[\"MATH_ATAN2_TOOLTIP\"] = \"Return the arctangent of point (X, Y) in degrees from -180 to 180.\";\nBlockly.Msg[\"MATH_CHANGE_HELPURL\"] = \"https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter\";\nBlockly.Msg[\"MATH_CHANGE_TITLE\"] = \"change %1 by %2\";\nBlockly.Msg[\"MATH_CHANGE_TOOLTIP\"] = \"Add a number to variable '%1'.\";\nBlockly.Msg[\"MATH_CONSTANT_HELPURL\"] = \"https://en.wikipedia.org/wiki/Mathematical_constant\";\nBlockly.Msg[\"MATH_CONSTANT_TOOLTIP\"] = \"Return one of the common constants: π (3.141…), e (2.718…), φ (1.618…), sqrt(2) (1.414…), sqrt(½) (0.707…), or ∞ (infinity).\";\nBlockly.Msg[\"MATH_CONSTRAIN_HELPURL\"] = \"https://en.wikipedia.org/wiki/Clamping_(graphics)\";\nBlockly.Msg[\"MATH_CONSTRAIN_TITLE\"] = \"constrain %1 low %2 high %3\";\nBlockly.Msg[\"MATH_CONSTRAIN_TOOLTIP\"] = \"Constrain a number to be between the specified limits (inclusive).\";\nBlockly.Msg[\"MATH_DIVISION_SYMBOL\"] = \"÷\";\nBlockly.Msg[\"MATH_IS_DIVISIBLE_BY\"] = \"is divisible by\";\nBlockly.Msg[\"MATH_IS_EVEN\"] = \"is even\";\nBlockly.Msg[\"MATH_IS_NEGATIVE\"] = \"is negative\";\nBlockly.Msg[\"MATH_IS_ODD\"] = \"is odd\";\nBlockly.Msg[\"MATH_IS_POSITIVE\"] = \"is positive\";\nBlockly.Msg[\"MATH_IS_PRIME\"] = \"is prime\";\nBlockly.Msg[\"MATH_IS_TOOLTIP\"] = \"Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.\";\nBlockly.Msg[\"MATH_IS_WHOLE\"] = \"is whole\";\nBlockly.Msg[\"MATH_MODULO_HELPURL\"] = \"https://en.wikipedia.org/wiki/Modulo_operation\";\nBlockly.Msg[\"MATH_MODULO_TITLE\"] = \"remainder of %1 ÷ %2\";\nBlockly.Msg[\"MATH_MODULO_TOOLTIP\"] = \"Return the remainder from dividing the two numbers.\";\nBlockly.Msg[\"MATH_MULTIPLICATION_SYMBOL\"] = \"×\";\nBlockly.Msg[\"MATH_NUMBER_HELPURL\"] = \"https://en.wikipedia.org/wiki/Number\";\nBlockly.Msg[\"MATH_NUMBER_TOOLTIP\"] = \"A number.\";\nBlockly.Msg[\"MATH_ONLIST_HELPURL\"] = \"\";\nBlockly.Msg[\"MATH_ONLIST_OPERATOR_AVERAGE\"] = \"average of list\";\nBlockly.Msg[\"MATH_ONLIST_OPERATOR_MAX\"] = \"max of list\";\nBlockly.Msg[\"MATH_ONLIST_OPERATOR_MEDIAN\"] = \"median of list\";\nBlockly.Msg[\"MATH_ONLIST_OPERATOR_MIN\"] = \"min of list\";\nBlockly.Msg[\"MATH_ONLIST_OPERATOR_MODE\"] = \"modes of list\";\nBlockly.Msg[\"MATH_ONLIST_OPERATOR_RANDOM\"] = \"random item of list\";\nBlockly.Msg[\"MATH_ONLIST_OPERATOR_STD_DEV\"] = \"standard deviation of list\";\nBlockly.Msg[\"MATH_ONLIST_OPERATOR_SUM\"] = \"sum of list\";\nBlockly.Msg[\"MATH_ONLIST_TOOLTIP_AVERAGE\"] = \"Return the average (arithmetic mean) of the numeric values in the list.\";\nBlockly.Msg[\"MATH_ONLIST_TOOLTIP_MAX\"] = \"Return the largest number in the list.\";\nBlockly.Msg[\"MATH_ONLIST_TOOLTIP_MEDIAN\"] = \"Return the median number in the list.\";\nBlockly.Msg[\"MATH_ONLIST_TOOLTIP_MIN\"] = \"Return the smallest number in the list.\";\nBlockly.Msg[\"MATH_ONLIST_TOOLTIP_MODE\"] = \"Return a list of the most common item(s) in the list.\";\nBlockly.Msg[\"MATH_ONLIST_TOOLTIP_RANDOM\"] = \"Return a random element from the list.\";\nBlockly.Msg[\"MATH_ONLIST_TOOLTIP_STD_DEV\"] = \"Return the standard deviation of the list.\";\nBlockly.Msg[\"MATH_ONLIST_TOOLTIP_SUM\"] = \"Return the sum of all the numbers in the list.\";\nBlockly.Msg[\"MATH_POWER_SYMBOL\"] = \"^\";\nBlockly.Msg[\"MATH_RANDOM_FLOAT_HELPURL\"] = \"https://en.wikipedia.org/wiki/Random_number_generation\";\nBlockly.Msg[\"MATH_RANDOM_FLOAT_TITLE_RANDOM\"] = \"random fraction\";\nBlockly.Msg[\"MATH_RANDOM_FLOAT_TOOLTIP\"] = \"Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).\";\nBlockly.Msg[\"MATH_RANDOM_INT_HELPURL\"] = \"https://en.wikipedia.org/wiki/Random_number_generation\";\nBlockly.Msg[\"MATH_RANDOM_INT_TITLE\"] = \"random integer from %1 to %2\";\nBlockly.Msg[\"MATH_RANDOM_INT_TOOLTIP\"] = \"Return a random integer between the two specified limits, inclusive.\";\nBlockly.Msg[\"MATH_ROUND_HELPURL\"] = \"https://en.wikipedia.org/wiki/Rounding\";\nBlockly.Msg[\"MATH_ROUND_OPERATOR_ROUND\"] = \"round\";\nBlockly.Msg[\"MATH_ROUND_OPERATOR_ROUNDDOWN\"] = \"round down\";\nBlockly.Msg[\"MATH_ROUND_OPERATOR_ROUNDUP\"] = \"round up\";\nBlockly.Msg[\"MATH_ROUND_TOOLTIP\"] = \"Round a number up or down.\";\nBlockly.Msg[\"MATH_SINGLE_HELPURL\"] = \"https://en.wikipedia.org/wiki/Square_root\";\nBlockly.Msg[\"MATH_SINGLE_OP_ABSOLUTE\"] = \"absolute\";\nBlockly.Msg[\"MATH_SINGLE_OP_ROOT\"] = \"square root\";\nBlockly.Msg[\"MATH_SINGLE_TOOLTIP_ABS\"] = \"Return the absolute value of a number.\";\nBlockly.Msg[\"MATH_SINGLE_TOOLTIP_EXP\"] = \"Return e to the power of a number.\";\nBlockly.Msg[\"MATH_SINGLE_TOOLTIP_LN\"] = \"Return the natural logarithm of a number.\";\nBlockly.Msg[\"MATH_SINGLE_TOOLTIP_LOG10\"] = \"Return the base 10 logarithm of a number.\";\nBlockly.Msg[\"MATH_SINGLE_TOOLTIP_NEG\"] = \"Return the negation of a number.\";\nBlockly.Msg[\"MATH_SINGLE_TOOLTIP_POW10\"] = \"Return 10 to the power of a number.\";\nBlockly.Msg[\"MATH_SINGLE_TOOLTIP_ROOT\"] = \"Return the square root of a number.\";\nBlockly.Msg[\"MATH_SUBTRACTION_SYMBOL\"] = \"-\";\nBlockly.Msg[\"MATH_TRIG_ACOS\"] = \"acos\";\nBlockly.Msg[\"MATH_TRIG_ASIN\"] = \"asin\";\nBlockly.Msg[\"MATH_TRIG_ATAN\"] = \"atan\";\nBlockly.Msg[\"MATH_TRIG_COS\"] = \"cos\";\nBlockly.Msg[\"MATH_TRIG_HELPURL\"] = \"https://en.wikipedia.org/wiki/Trigonometric_functions\";\nBlockly.Msg[\"MATH_TRIG_SIN\"] = \"sin\";\nBlockly.Msg[\"MATH_TRIG_TAN\"] = \"tan\";\nBlockly.Msg[\"MATH_TRIG_TOOLTIP_ACOS\"] = \"Return the arccosine of a number.\";\nBlockly.Msg[\"MATH_TRIG_TOOLTIP_ASIN\"] = \"Return the arcsine of a number.\";\nBlockly.Msg[\"MATH_TRIG_TOOLTIP_ATAN\"] = \"Return the arctangent of a number.\";\nBlockly.Msg[\"MATH_TRIG_TOOLTIP_COS\"] = \"Return the cosine of a degree (not radian).\";\nBlockly.Msg[\"MATH_TRIG_TOOLTIP_SIN\"] = \"Return the sine of a degree (not radian).\";\nBlockly.Msg[\"MATH_TRIG_TOOLTIP_TAN\"] = \"Return the tangent of a degree (not radian).\";\nBlockly.Msg[\"NEW_COLOUR_VARIABLE\"] = \"Create colour variable...\";\nBlockly.Msg[\"NEW_NUMBER_VARIABLE\"] = \"Create number variable...\";\nBlockly.Msg[\"NEW_STRING_VARIABLE\"] = \"Create string variable...\";\nBlockly.Msg[\"NEW_VARIABLE\"] = \"Create variable...\";\nBlockly.Msg[\"NEW_VARIABLE_TITLE\"] = \"New variable name:\";\nBlockly.Msg[\"NEW_VARIABLE_TYPE_TITLE\"] = \"New variable type:\";\nBlockly.Msg[\"ORDINAL_NUMBER_SUFFIX\"] = \"\";\nBlockly.Msg[\"PROCEDURES_ALLOW_STATEMENTS\"] = \"allow statements\";\nBlockly.Msg[\"PROCEDURES_BEFORE_PARAMS\"] = \"with:\";\nBlockly.Msg[\"PROCEDURES_CALLNORETURN_HELPURL\"] = \"https://en.wikipedia.org/wiki/Subroutine\";\nBlockly.Msg[\"PROCEDURES_CALLNORETURN_TOOLTIP\"] = \"Run the user-defined function '%1'.\";\nBlockly.Msg[\"PROCEDURES_CALLRETURN_HELPURL\"] = \"https://en.wikipedia.org/wiki/Subroutine\";\nBlockly.Msg[\"PROCEDURES_CALLRETURN_TOOLTIP\"] = \"Run the user-defined function '%1' and use its output.\";\nBlockly.Msg[\"PROCEDURES_CALL_BEFORE_PARAMS\"] = \"with:\";\nBlockly.Msg[\"PROCEDURES_CREATE_DO\"] = \"Create '%1'\";\nBlockly.Msg[\"PROCEDURES_DEFNORETURN_COMMENT\"] = \"Describe this function...\";\nBlockly.Msg[\"PROCEDURES_DEFNORETURN_DO\"] = \"\";\nBlockly.Msg[\"PROCEDURES_DEFNORETURN_HELPURL\"] = \"https://en.wikipedia.org/wiki/Subroutine\";\nBlockly.Msg[\"PROCEDURES_DEFNORETURN_PROCEDURE\"] = \"do something\";\nBlockly.Msg[\"PROCEDURES_DEFNORETURN_TITLE\"] = \"to\";\nBlockly.Msg[\"PROCEDURES_DEFNORETURN_TOOLTIP\"] = \"Creates a function with no output.\";\nBlockly.Msg[\"PROCEDURES_DEFRETURN_HELPURL\"] = \"https://en.wikipedia.org/wiki/Subroutine\";\nBlockly.Msg[\"PROCEDURES_DEFRETURN_RETURN\"] = \"return\";\nBlockly.Msg[\"PROCEDURES_DEFRETURN_TOOLTIP\"] = \"Creates a function with an output.\";\nBlockly.Msg[\"PROCEDURES_DEF_DUPLICATE_WARNING\"] = \"Warning: This function has duplicate parameters.\";\nBlockly.Msg[\"PROCEDURES_HIGHLIGHT_DEF\"] = \"Highlight function definition\";\nBlockly.Msg[\"PROCEDURES_IFRETURN_HELPURL\"] = \"http://c2.com/cgi/wiki?GuardClause\";\nBlockly.Msg[\"PROCEDURES_IFRETURN_TOOLTIP\"] = \"If a value is true, then return a second value.\";\nBlockly.Msg[\"PROCEDURES_IFRETURN_WARNING\"] = \"Warning: This block may be used only within a function definition.\";\nBlockly.Msg[\"PROCEDURES_MUTATORARG_TITLE\"] = \"input name:\";\nBlockly.Msg[\"PROCEDURES_MUTATORARG_TOOLTIP\"] = \"Add an input to the function.\";\nBlockly.Msg[\"PROCEDURES_MUTATORCONTAINER_TITLE\"] = \"inputs\";\nBlockly.Msg[\"PROCEDURES_MUTATORCONTAINER_TOOLTIP\"] = \"Add, remove, or reorder inputs to this function.\";\nBlockly.Msg[\"REDO\"] = \"Redo\";\nBlockly.Msg[\"REMOVE_COMMENT\"] = \"Remove Comment\";\nBlockly.Msg[\"RENAME_VARIABLE\"] = \"Rename variable...\";\nBlockly.Msg[\"RENAME_VARIABLE_TITLE\"] = \"Rename all '%1' variables to:\";\nBlockly.Msg[\"TEXT_APPEND_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#text-modification\";\nBlockly.Msg[\"TEXT_APPEND_TITLE\"] = \"to %1 append text %2\";\nBlockly.Msg[\"TEXT_APPEND_TOOLTIP\"] = \"Append some text to variable '%1'.\";\nBlockly.Msg[\"TEXT_CHANGECASE_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#adjusting-text-case\";\nBlockly.Msg[\"TEXT_CHANGECASE_OPERATOR_LOWERCASE\"] = \"to lower case\";\nBlockly.Msg[\"TEXT_CHANGECASE_OPERATOR_TITLECASE\"] = \"to Title Case\";\nBlockly.Msg[\"TEXT_CHANGECASE_OPERATOR_UPPERCASE\"] = \"to UPPER CASE\";\nBlockly.Msg[\"TEXT_CHANGECASE_TOOLTIP\"] = \"Return a copy of the text in a different case.\";\nBlockly.Msg[\"TEXT_CHARAT_FIRST\"] = \"get first letter\";\nBlockly.Msg[\"TEXT_CHARAT_FROM_END\"] = \"get letter # from end\";\nBlockly.Msg[\"TEXT_CHARAT_FROM_START\"] = \"get letter #\";\nBlockly.Msg[\"TEXT_CHARAT_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#extracting-text\";\nBlockly.Msg[\"TEXT_CHARAT_LAST\"] = \"get last letter\";\nBlockly.Msg[\"TEXT_CHARAT_RANDOM\"] = \"get random letter\";\nBlockly.Msg[\"TEXT_CHARAT_TAIL\"] = \"\";\nBlockly.Msg[\"TEXT_CHARAT_TITLE\"] = \"in text %1 %2\";\nBlockly.Msg[\"TEXT_CHARAT_TOOLTIP\"] = \"Returns the letter at the specified position.\";\nBlockly.Msg[\"TEXT_COUNT_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#counting-substrings\";\nBlockly.Msg[\"TEXT_COUNT_MESSAGE0\"] = \"count %1 in %2\";\nBlockly.Msg[\"TEXT_COUNT_TOOLTIP\"] = \"Count how many times some text occurs within some other text.\";\nBlockly.Msg[\"TEXT_CREATE_JOIN_ITEM_TOOLTIP\"] = \"Add an item to the text.\";\nBlockly.Msg[\"TEXT_CREATE_JOIN_TITLE_JOIN\"] = \"join\";\nBlockly.Msg[\"TEXT_CREATE_JOIN_TOOLTIP\"] = \"Add, remove, or reorder sections to reconfigure this text block.\";\nBlockly.Msg[\"TEXT_GET_SUBSTRING_END_FROM_END\"] = \"to letter # from end\";\nBlockly.Msg[\"TEXT_GET_SUBSTRING_END_FROM_START\"] = \"to letter #\";\nBlockly.Msg[\"TEXT_GET_SUBSTRING_END_LAST\"] = \"to last letter\";\nBlockly.Msg[\"TEXT_GET_SUBSTRING_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text\";\nBlockly.Msg[\"TEXT_GET_SUBSTRING_INPUT_IN_TEXT\"] = \"in text\";\nBlockly.Msg[\"TEXT_GET_SUBSTRING_START_FIRST\"] = \"get substring from first letter\";\nBlockly.Msg[\"TEXT_GET_SUBSTRING_START_FROM_END\"] = \"get substring from letter # from end\";\nBlockly.Msg[\"TEXT_GET_SUBSTRING_START_FROM_START\"] = \"get substring from letter #\";\nBlockly.Msg[\"TEXT_GET_SUBSTRING_TAIL\"] = \"\";\nBlockly.Msg[\"TEXT_GET_SUBSTRING_TOOLTIP\"] = \"Returns a specified portion of the text.\";\nBlockly.Msg[\"TEXT_INDEXOF_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#finding-text\";\nBlockly.Msg[\"TEXT_INDEXOF_OPERATOR_FIRST\"] = \"find first occurrence of text\";\nBlockly.Msg[\"TEXT_INDEXOF_OPERATOR_LAST\"] = \"find last occurrence of text\";\nBlockly.Msg[\"TEXT_INDEXOF_TITLE\"] = \"in text %1 %2 %3\";\nBlockly.Msg[\"TEXT_INDEXOF_TOOLTIP\"] = \"Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.\";\nBlockly.Msg[\"TEXT_ISEMPTY_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#checking-for-empty-text\";\nBlockly.Msg[\"TEXT_ISEMPTY_TITLE\"] = \"%1 is empty\";\nBlockly.Msg[\"TEXT_ISEMPTY_TOOLTIP\"] = \"Returns true if the provided text is empty.\";\nBlockly.Msg[\"TEXT_JOIN_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#text-creation\";\nBlockly.Msg[\"TEXT_JOIN_TITLE_CREATEWITH\"] = \"create text with\";\nBlockly.Msg[\"TEXT_JOIN_TOOLTIP\"] = \"Create a piece of text by joining together any number of items.\";\nBlockly.Msg[\"TEXT_LENGTH_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#text-modification\";\nBlockly.Msg[\"TEXT_LENGTH_TITLE\"] = \"length of %1\";\nBlockly.Msg[\"TEXT_LENGTH_TOOLTIP\"] = \"Returns the number of letters (including spaces) in the provided text.\";\nBlockly.Msg[\"TEXT_PRINT_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#printing-text\";\nBlockly.Msg[\"TEXT_PRINT_TITLE\"] = \"print %1\";\nBlockly.Msg[\"TEXT_PRINT_TOOLTIP\"] = \"Print the specified text, number or other value.\";\nBlockly.Msg[\"TEXT_PROMPT_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#getting-input-from-the-user\";\nBlockly.Msg[\"TEXT_PROMPT_TOOLTIP_NUMBER\"] = \"Prompt for user for a number.\";\nBlockly.Msg[\"TEXT_PROMPT_TOOLTIP_TEXT\"] = \"Prompt for user for some text.\";\nBlockly.Msg[\"TEXT_PROMPT_TYPE_NUMBER\"] = \"prompt for number with message\";\nBlockly.Msg[\"TEXT_PROMPT_TYPE_TEXT\"] = \"prompt for text with message\";\nBlockly.Msg[\"TEXT_REPLACE_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#replacing-substrings\";\nBlockly.Msg[\"TEXT_REPLACE_MESSAGE0\"] = \"replace %1 with %2 in %3\";\nBlockly.Msg[\"TEXT_REPLACE_TOOLTIP\"] = \"Replace all occurances of some text within some other text.\";\nBlockly.Msg[\"TEXT_REVERSE_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#reversing-text\";\nBlockly.Msg[\"TEXT_REVERSE_MESSAGE0\"] = \"reverse %1\";\nBlockly.Msg[\"TEXT_REVERSE_TOOLTIP\"] = \"Reverses the order of the characters in the text.\";\nBlockly.Msg[\"TEXT_TEXT_HELPURL\"] = \"https://en.wikipedia.org/wiki/String_(computer_science)\";\nBlockly.Msg[\"TEXT_TEXT_TOOLTIP\"] = \"A letter, word, or line of text.\";\nBlockly.Msg[\"TEXT_TRIM_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#trimming-removing-spaces\";\nBlockly.Msg[\"TEXT_TRIM_OPERATOR_BOTH\"] = \"trim spaces from both sides of\";\nBlockly.Msg[\"TEXT_TRIM_OPERATOR_LEFT\"] = \"trim spaces from left side of\";\nBlockly.Msg[\"TEXT_TRIM_OPERATOR_RIGHT\"] = \"trim spaces from right side of\";\nBlockly.Msg[\"TEXT_TRIM_TOOLTIP\"] = \"Return a copy of the text with spaces removed from one or both ends.\";\nBlockly.Msg[\"TODAY\"] = \"Today\";\nBlockly.Msg[\"UNDO\"] = \"Undo\";\nBlockly.Msg[\"UNNAMED_KEY\"] = \"unnamed\";\nBlockly.Msg[\"VARIABLES_DEFAULT_NAME\"] = \"item\";\nBlockly.Msg[\"VARIABLES_GET_CREATE_SET\"] = \"Create 'set %1'\";\nBlockly.Msg[\"VARIABLES_GET_HELPURL\"] = \"https://github.com/google/blockly/wiki/Variables#get\";\nBlockly.Msg[\"VARIABLES_GET_TOOLTIP\"] = \"Returns the value of this variable.\";\nBlockly.Msg[\"VARIABLES_SET\"] = \"set %1 to %2\";\nBlockly.Msg[\"VARIABLES_SET_CREATE_GET\"] = \"Create 'get %1'\";\nBlockly.Msg[\"VARIABLES_SET_HELPURL\"] = \"https://github.com/google/blockly/wiki/Variables#set\";\nBlockly.Msg[\"VARIABLES_SET_TOOLTIP\"] = \"Sets this variable to be equal to the input.\";\nBlockly.Msg[\"VARIABLE_ALREADY_EXISTS\"] = \"A variable named '%1' already exists.\";\nBlockly.Msg[\"VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE\"] = \"A variable named '%1' already exists for another type: '%2'.\";\nBlockly.Msg[\"WORKSPACE_ARIA_LABEL\"] = \"Blockly Workspace\";\nBlockly.Msg[\"WORKSPACE_COMMENT_DEFAULT_TEXT\"] = \"Say something...\";\nBlockly.Msg[\"CONTROLS_FOREACH_INPUT_DO\"] = Blockly.Msg[\"CONTROLS_REPEAT_INPUT_DO\"];\nBlockly.Msg[\"CONTROLS_FOR_INPUT_DO\"] = Blockly.Msg[\"CONTROLS_REPEAT_INPUT_DO\"];\nBlockly.Msg[\"CONTROLS_IF_ELSEIF_TITLE_ELSEIF\"] = Blockly.Msg[\"CONTROLS_IF_MSG_ELSEIF\"];\nBlockly.Msg[\"CONTROLS_IF_ELSE_TITLE_ELSE\"] = Blockly.Msg[\"CONTROLS_IF_MSG_ELSE\"];\nBlockly.Msg[\"CONTROLS_IF_IF_TITLE_IF\"] = Blockly.Msg[\"CONTROLS_IF_MSG_IF\"];\nBlockly.Msg[\"CONTROLS_IF_MSG_THEN\"] = Blockly.Msg[\"CONTROLS_REPEAT_INPUT_DO\"];\nBlockly.Msg[\"CONTROLS_WHILEUNTIL_INPUT_DO\"] = Blockly.Msg[\"CONTROLS_REPEAT_INPUT_DO\"];\nBlockly.Msg[\"LISTS_CREATE_WITH_ITEM_TITLE\"] = Blockly.Msg[\"VARIABLES_DEFAULT_NAME\"];\nBlockly.Msg[\"LISTS_GET_INDEX_HELPURL\"] = Blockly.Msg[\"LISTS_INDEX_OF_HELPURL\"];\nBlockly.Msg[\"LISTS_GET_INDEX_INPUT_IN_LIST\"] = Blockly.Msg[\"LISTS_INLIST\"];\nBlockly.Msg[\"LISTS_GET_SUBLIST_INPUT_IN_LIST\"] = Blockly.Msg[\"LISTS_INLIST\"];\nBlockly.Msg[\"LISTS_INDEX_OF_INPUT_IN_LIST\"] = Blockly.Msg[\"LISTS_INLIST\"];\nBlockly.Msg[\"LISTS_SET_INDEX_INPUT_IN_LIST\"] = Blockly.Msg[\"LISTS_INLIST\"];\nBlockly.Msg[\"MATH_CHANGE_TITLE_ITEM\"] = Blockly.Msg[\"VARIABLES_DEFAULT_NAME\"];\nBlockly.Msg[\"PROCEDURES_DEFRETURN_COMMENT\"] = Blockly.Msg[\"PROCEDURES_DEFNORETURN_COMMENT\"];\nBlockly.Msg[\"PROCEDURES_DEFRETURN_DO\"] = Blockly.Msg[\"PROCEDURES_DEFNORETURN_DO\"];\nBlockly.Msg[\"PROCEDURES_DEFRETURN_PROCEDURE\"] = Blockly.Msg[\"PROCEDURES_DEFNORETURN_PROCEDURE\"];\nBlockly.Msg[\"PROCEDURES_DEFRETURN_TITLE\"] = Blockly.Msg[\"PROCEDURES_DEFNORETURN_TITLE\"];\nBlockly.Msg[\"TEXT_APPEND_VARIABLE\"] = Blockly.Msg[\"VARIABLES_DEFAULT_NAME\"];\nBlockly.Msg[\"TEXT_CREATE_JOIN_ITEM_TITLE_ITEM\"] = Blockly.Msg[\"VARIABLES_DEFAULT_NAME\"];\n\nBlockly.Msg[\"MATH_HUE\"] = \"230\";\nBlockly.Msg[\"LOOPS_HUE\"] = \"120\";\nBlockly.Msg[\"LISTS_HUE\"] = \"260\";\nBlockly.Msg[\"LOGIC_HUE\"] = \"210\";\nBlockly.Msg[\"VARIABLES_HUE\"] = \"330\";\nBlockly.Msg[\"TEXTS_HUE\"] = \"160\";\nBlockly.Msg[\"PROCEDURES_HUE\"] = \"290\";\nBlockly.Msg[\"COLOUR_HUE\"] = \"20\";\nBlockly.Msg[\"VARIABLES_DYNAMIC_HUE\"] = \"310\";\nreturn Blockly.Msg;\n})); \n","/*!\n  Copyright (c) 2015 Jed Watson.\n  Based on code that is Copyright 2013-2015, Facebook, Inc.\n  All rights reserved.\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar canUseDOM = !!(\n\t\ttypeof window !== 'undefined' &&\n\t\twindow.document &&\n\t\twindow.document.createElement\n\t);\n\n\tvar ExecutionEnvironment = {\n\n\t\tcanUseDOM: canUseDOM,\n\n\t\tcanUseWorkers: typeof Worker !== 'undefined',\n\n\t\tcanUseEventListeners:\n\t\t\tcanUseDOM && !!(window.addEventListener || window.attachEvent),\n\n\t\tcanUseViewport: canUseDOM && !!window.screen\n\n\t};\n\n\tif (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\tdefine(function () {\n\t\t\treturn ExecutionEnvironment;\n\t\t});\n\t} else if (typeof module !== 'undefined' && module.exports) {\n\t\tmodule.exports = ExecutionEnvironment;\n\t} else {\n\t\twindow.ExecutionEnvironment = ExecutionEnvironment;\n\t}\n\n}());\n","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bigint: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","/** @license React v17.0.2\n * react-dom.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n/*\n Modernizr 3.0.0pre (Custom Build) | MIT\n*/\n'use strict';var aa=require(\"react\"),m=require(\"object-assign\"),r=require(\"scheduler\");function y(a){for(var b=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+a,c=1;c<arguments.length;c++)b+=\"&args[]=\"+encodeURIComponent(arguments[c]);return\"Minified React error #\"+a+\"; visit \"+b+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\"}if(!aa)throw Error(y(227));var ba=new Set,ca={};function da(a,b){ea(a,b);ea(a+\"Capture\",b)}\nfunction ea(a,b){ca[a]=b;for(a=0;a<b.length;a++)ba.add(b[a])}\nvar fa=!(\"undefined\"===typeof window||\"undefined\"===typeof window.document||\"undefined\"===typeof window.document.createElement),ha=/^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$/,ia=Object.prototype.hasOwnProperty,\nja={},ka={};function la(a){if(ia.call(ka,a))return!0;if(ia.call(ja,a))return!1;if(ha.test(a))return ka[a]=!0;ja[a]=!0;return!1}function ma(a,b,c,d){if(null!==c&&0===c.type)return!1;switch(typeof b){case \"function\":case \"symbol\":return!0;case \"boolean\":if(d)return!1;if(null!==c)return!c.acceptsBooleans;a=a.toLowerCase().slice(0,5);return\"data-\"!==a&&\"aria-\"!==a;default:return!1}}\nfunction na(a,b,c,d){if(null===b||\"undefined\"===typeof b||ma(a,b,c,d))return!0;if(d)return!1;if(null!==c)switch(c.type){case 3:return!b;case 4:return!1===b;case 5:return isNaN(b);case 6:return isNaN(b)||1>b}return!1}function B(a,b,c,d,e,f,g){this.acceptsBooleans=2===b||3===b||4===b;this.attributeName=d;this.attributeNamespace=e;this.mustUseProperty=c;this.propertyName=a;this.type=b;this.sanitizeURL=f;this.removeEmptyString=g}var D={};\n\"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style\".split(\" \").forEach(function(a){D[a]=new B(a,0,!1,a,null,!1,!1)});[[\"acceptCharset\",\"accept-charset\"],[\"className\",\"class\"],[\"htmlFor\",\"for\"],[\"httpEquiv\",\"http-equiv\"]].forEach(function(a){var b=a[0];D[b]=new B(b,1,!1,a[1],null,!1,!1)});[\"contentEditable\",\"draggable\",\"spellCheck\",\"value\"].forEach(function(a){D[a]=new B(a,2,!1,a.toLowerCase(),null,!1,!1)});\n[\"autoReverse\",\"externalResourcesRequired\",\"focusable\",\"preserveAlpha\"].forEach(function(a){D[a]=new B(a,2,!1,a,null,!1,!1)});\"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope\".split(\" \").forEach(function(a){D[a]=new B(a,3,!1,a.toLowerCase(),null,!1,!1)});\n[\"checked\",\"multiple\",\"muted\",\"selected\"].forEach(function(a){D[a]=new B(a,3,!0,a,null,!1,!1)});[\"capture\",\"download\"].forEach(function(a){D[a]=new B(a,4,!1,a,null,!1,!1)});[\"cols\",\"rows\",\"size\",\"span\"].forEach(function(a){D[a]=new B(a,6,!1,a,null,!1,!1)});[\"rowSpan\",\"start\"].forEach(function(a){D[a]=new B(a,5,!1,a.toLowerCase(),null,!1,!1)});var oa=/[\\-:]([a-z])/g;function pa(a){return a[1].toUpperCase()}\n\"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height\".split(\" \").forEach(function(a){var b=a.replace(oa,\npa);D[b]=new B(b,1,!1,a,null,!1,!1)});\"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type\".split(\" \").forEach(function(a){var b=a.replace(oa,pa);D[b]=new B(b,1,!1,a,\"http://www.w3.org/1999/xlink\",!1,!1)});[\"xml:base\",\"xml:lang\",\"xml:space\"].forEach(function(a){var b=a.replace(oa,pa);D[b]=new B(b,1,!1,a,\"http://www.w3.org/XML/1998/namespace\",!1,!1)});[\"tabIndex\",\"crossOrigin\"].forEach(function(a){D[a]=new B(a,1,!1,a.toLowerCase(),null,!1,!1)});\nD.xlinkHref=new B(\"xlinkHref\",1,!1,\"xlink:href\",\"http://www.w3.org/1999/xlink\",!0,!1);[\"src\",\"href\",\"action\",\"formAction\"].forEach(function(a){D[a]=new B(a,1,!1,a.toLowerCase(),null,!0,!0)});\nfunction qa(a,b,c,d){var e=D.hasOwnProperty(b)?D[b]:null;var f=null!==e?0===e.type:d?!1:!(2<b.length)||\"o\"!==b[0]&&\"O\"!==b[0]||\"n\"!==b[1]&&\"N\"!==b[1]?!1:!0;f||(na(b,c,e,d)&&(c=null),d||null===e?la(b)&&(null===c?a.removeAttribute(b):a.setAttribute(b,\"\"+c)):e.mustUseProperty?a[e.propertyName]=null===c?3===e.type?!1:\"\":c:(b=e.attributeName,d=e.attributeNamespace,null===c?a.removeAttribute(b):(e=e.type,c=3===e||4===e&&!0===c?\"\":\"\"+c,d?a.setAttributeNS(d,b,c):a.setAttribute(b,c))))}\nvar ra=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,sa=60103,ta=60106,ua=60107,wa=60108,xa=60114,ya=60109,za=60110,Aa=60112,Ba=60113,Ca=60120,Da=60115,Ea=60116,Fa=60121,Ga=60128,Ha=60129,Ia=60130,Ja=60131;\nif(\"function\"===typeof Symbol&&Symbol.for){var E=Symbol.for;sa=E(\"react.element\");ta=E(\"react.portal\");ua=E(\"react.fragment\");wa=E(\"react.strict_mode\");xa=E(\"react.profiler\");ya=E(\"react.provider\");za=E(\"react.context\");Aa=E(\"react.forward_ref\");Ba=E(\"react.suspense\");Ca=E(\"react.suspense_list\");Da=E(\"react.memo\");Ea=E(\"react.lazy\");Fa=E(\"react.block\");E(\"react.scope\");Ga=E(\"react.opaque.id\");Ha=E(\"react.debug_trace_mode\");Ia=E(\"react.offscreen\");Ja=E(\"react.legacy_hidden\")}\nvar Ka=\"function\"===typeof Symbol&&Symbol.iterator;function La(a){if(null===a||\"object\"!==typeof a)return null;a=Ka&&a[Ka]||a[\"@@iterator\"];return\"function\"===typeof a?a:null}var Ma;function Na(a){if(void 0===Ma)try{throw Error();}catch(c){var b=c.stack.trim().match(/\\n( *(at )?)/);Ma=b&&b[1]||\"\"}return\"\\n\"+Ma+a}var Oa=!1;\nfunction Pa(a,b){if(!a||Oa)return\"\";Oa=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(b)if(b=function(){throw Error();},Object.defineProperty(b.prototype,\"props\",{set:function(){throw Error();}}),\"object\"===typeof Reflect&&Reflect.construct){try{Reflect.construct(b,[])}catch(k){var d=k}Reflect.construct(a,[],b)}else{try{b.call()}catch(k){d=k}a.call(b.prototype)}else{try{throw Error();}catch(k){d=k}a()}}catch(k){if(k&&d&&\"string\"===typeof k.stack){for(var e=k.stack.split(\"\\n\"),\nf=d.stack.split(\"\\n\"),g=e.length-1,h=f.length-1;1<=g&&0<=h&&e[g]!==f[h];)h--;for(;1<=g&&0<=h;g--,h--)if(e[g]!==f[h]){if(1!==g||1!==h){do if(g--,h--,0>h||e[g]!==f[h])return\"\\n\"+e[g].replace(\" at new \",\" at \");while(1<=g&&0<=h)}break}}}finally{Oa=!1,Error.prepareStackTrace=c}return(a=a?a.displayName||a.name:\"\")?Na(a):\"\"}\nfunction Qa(a){switch(a.tag){case 5:return Na(a.type);case 16:return Na(\"Lazy\");case 13:return Na(\"Suspense\");case 19:return Na(\"SuspenseList\");case 0:case 2:case 15:return a=Pa(a.type,!1),a;case 11:return a=Pa(a.type.render,!1),a;case 22:return a=Pa(a.type._render,!1),a;case 1:return a=Pa(a.type,!0),a;default:return\"\"}}\nfunction Ra(a){if(null==a)return null;if(\"function\"===typeof a)return a.displayName||a.name||null;if(\"string\"===typeof a)return a;switch(a){case ua:return\"Fragment\";case ta:return\"Portal\";case xa:return\"Profiler\";case wa:return\"StrictMode\";case Ba:return\"Suspense\";case Ca:return\"SuspenseList\"}if(\"object\"===typeof a)switch(a.$$typeof){case za:return(a.displayName||\"Context\")+\".Consumer\";case ya:return(a._context.displayName||\"Context\")+\".Provider\";case Aa:var b=a.render;b=b.displayName||b.name||\"\";\nreturn a.displayName||(\"\"!==b?\"ForwardRef(\"+b+\")\":\"ForwardRef\");case Da:return Ra(a.type);case Fa:return Ra(a._render);case Ea:b=a._payload;a=a._init;try{return Ra(a(b))}catch(c){}}return null}function Sa(a){switch(typeof a){case \"boolean\":case \"number\":case \"object\":case \"string\":case \"undefined\":return a;default:return\"\"}}function Ta(a){var b=a.type;return(a=a.nodeName)&&\"input\"===a.toLowerCase()&&(\"checkbox\"===b||\"radio\"===b)}\nfunction Ua(a){var b=Ta(a)?\"checked\":\"value\",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,b),d=\"\"+a[b];if(!a.hasOwnProperty(b)&&\"undefined\"!==typeof c&&\"function\"===typeof c.get&&\"function\"===typeof c.set){var e=c.get,f=c.set;Object.defineProperty(a,b,{configurable:!0,get:function(){return e.call(this)},set:function(a){d=\"\"+a;f.call(this,a)}});Object.defineProperty(a,b,{enumerable:c.enumerable});return{getValue:function(){return d},setValue:function(a){d=\"\"+a},stopTracking:function(){a._valueTracker=\nnull;delete a[b]}}}}function Va(a){a._valueTracker||(a._valueTracker=Ua(a))}function Wa(a){if(!a)return!1;var b=a._valueTracker;if(!b)return!0;var c=b.getValue();var d=\"\";a&&(d=Ta(a)?a.checked?\"true\":\"false\":a.value);a=d;return a!==c?(b.setValue(a),!0):!1}function Xa(a){a=a||(\"undefined\"!==typeof document?document:void 0);if(\"undefined\"===typeof a)return null;try{return a.activeElement||a.body}catch(b){return a.body}}\nfunction Ya(a,b){var c=b.checked;return m({},b,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=c?c:a._wrapperState.initialChecked})}function Za(a,b){var c=null==b.defaultValue?\"\":b.defaultValue,d=null!=b.checked?b.checked:b.defaultChecked;c=Sa(null!=b.value?b.value:c);a._wrapperState={initialChecked:d,initialValue:c,controlled:\"checkbox\"===b.type||\"radio\"===b.type?null!=b.checked:null!=b.value}}function $a(a,b){b=b.checked;null!=b&&qa(a,\"checked\",b,!1)}\nfunction ab(a,b){$a(a,b);var c=Sa(b.value),d=b.type;if(null!=c)if(\"number\"===d){if(0===c&&\"\"===a.value||a.value!=c)a.value=\"\"+c}else a.value!==\"\"+c&&(a.value=\"\"+c);else if(\"submit\"===d||\"reset\"===d){a.removeAttribute(\"value\");return}b.hasOwnProperty(\"value\")?bb(a,b.type,c):b.hasOwnProperty(\"defaultValue\")&&bb(a,b.type,Sa(b.defaultValue));null==b.checked&&null!=b.defaultChecked&&(a.defaultChecked=!!b.defaultChecked)}\nfunction cb(a,b,c){if(b.hasOwnProperty(\"value\")||b.hasOwnProperty(\"defaultValue\")){var d=b.type;if(!(\"submit\"!==d&&\"reset\"!==d||void 0!==b.value&&null!==b.value))return;b=\"\"+a._wrapperState.initialValue;c||b===a.value||(a.value=b);a.defaultValue=b}c=a.name;\"\"!==c&&(a.name=\"\");a.defaultChecked=!!a._wrapperState.initialChecked;\"\"!==c&&(a.name=c)}\nfunction bb(a,b,c){if(\"number\"!==b||Xa(a.ownerDocument)!==a)null==c?a.defaultValue=\"\"+a._wrapperState.initialValue:a.defaultValue!==\"\"+c&&(a.defaultValue=\"\"+c)}function db(a){var b=\"\";aa.Children.forEach(a,function(a){null!=a&&(b+=a)});return b}function eb(a,b){a=m({children:void 0},b);if(b=db(b.children))a.children=b;return a}\nfunction fb(a,b,c,d){a=a.options;if(b){b={};for(var e=0;e<c.length;e++)b[\"$\"+c[e]]=!0;for(c=0;c<a.length;c++)e=b.hasOwnProperty(\"$\"+a[c].value),a[c].selected!==e&&(a[c].selected=e),e&&d&&(a[c].defaultSelected=!0)}else{c=\"\"+Sa(c);b=null;for(e=0;e<a.length;e++){if(a[e].value===c){a[e].selected=!0;d&&(a[e].defaultSelected=!0);return}null!==b||a[e].disabled||(b=a[e])}null!==b&&(b.selected=!0)}}\nfunction gb(a,b){if(null!=b.dangerouslySetInnerHTML)throw Error(y(91));return m({},b,{value:void 0,defaultValue:void 0,children:\"\"+a._wrapperState.initialValue})}function hb(a,b){var c=b.value;if(null==c){c=b.children;b=b.defaultValue;if(null!=c){if(null!=b)throw Error(y(92));if(Array.isArray(c)){if(!(1>=c.length))throw Error(y(93));c=c[0]}b=c}null==b&&(b=\"\");c=b}a._wrapperState={initialValue:Sa(c)}}\nfunction ib(a,b){var c=Sa(b.value),d=Sa(b.defaultValue);null!=c&&(c=\"\"+c,c!==a.value&&(a.value=c),null==b.defaultValue&&a.defaultValue!==c&&(a.defaultValue=c));null!=d&&(a.defaultValue=\"\"+d)}function jb(a){var b=a.textContent;b===a._wrapperState.initialValue&&\"\"!==b&&null!==b&&(a.value=b)}var kb={html:\"http://www.w3.org/1999/xhtml\",mathml:\"http://www.w3.org/1998/Math/MathML\",svg:\"http://www.w3.org/2000/svg\"};\nfunction lb(a){switch(a){case \"svg\":return\"http://www.w3.org/2000/svg\";case \"math\":return\"http://www.w3.org/1998/Math/MathML\";default:return\"http://www.w3.org/1999/xhtml\"}}function mb(a,b){return null==a||\"http://www.w3.org/1999/xhtml\"===a?lb(b):\"http://www.w3.org/2000/svg\"===a&&\"foreignObject\"===b?\"http://www.w3.org/1999/xhtml\":a}\nvar nb,ob=function(a){return\"undefined\"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(b,c,d,e){MSApp.execUnsafeLocalFunction(function(){return a(b,c,d,e)})}:a}(function(a,b){if(a.namespaceURI!==kb.svg||\"innerHTML\"in a)a.innerHTML=b;else{nb=nb||document.createElement(\"div\");nb.innerHTML=\"<svg>\"+b.valueOf().toString()+\"</svg>\";for(b=nb.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;b.firstChild;)a.appendChild(b.firstChild)}});\nfunction pb(a,b){if(b){var c=a.firstChild;if(c&&c===a.lastChild&&3===c.nodeType){c.nodeValue=b;return}}a.textContent=b}\nvar qb={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,\nfloodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rb=[\"Webkit\",\"ms\",\"Moz\",\"O\"];Object.keys(qb).forEach(function(a){rb.forEach(function(b){b=b+a.charAt(0).toUpperCase()+a.substring(1);qb[b]=qb[a]})});function sb(a,b,c){return null==b||\"boolean\"===typeof b||\"\"===b?\"\":c||\"number\"!==typeof b||0===b||qb.hasOwnProperty(a)&&qb[a]?(\"\"+b).trim():b+\"px\"}\nfunction tb(a,b){a=a.style;for(var c in b)if(b.hasOwnProperty(c)){var d=0===c.indexOf(\"--\"),e=sb(c,b[c],d);\"float\"===c&&(c=\"cssFloat\");d?a.setProperty(c,e):a[c]=e}}var ub=m({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});\nfunction vb(a,b){if(b){if(ub[a]&&(null!=b.children||null!=b.dangerouslySetInnerHTML))throw Error(y(137,a));if(null!=b.dangerouslySetInnerHTML){if(null!=b.children)throw Error(y(60));if(!(\"object\"===typeof b.dangerouslySetInnerHTML&&\"__html\"in b.dangerouslySetInnerHTML))throw Error(y(61));}if(null!=b.style&&\"object\"!==typeof b.style)throw Error(y(62));}}\nfunction wb(a,b){if(-1===a.indexOf(\"-\"))return\"string\"===typeof b.is;switch(a){case \"annotation-xml\":case \"color-profile\":case \"font-face\":case \"font-face-src\":case \"font-face-uri\":case \"font-face-format\":case \"font-face-name\":case \"missing-glyph\":return!1;default:return!0}}function xb(a){a=a.target||a.srcElement||window;a.correspondingUseElement&&(a=a.correspondingUseElement);return 3===a.nodeType?a.parentNode:a}var yb=null,zb=null,Ab=null;\nfunction Bb(a){if(a=Cb(a)){if(\"function\"!==typeof yb)throw Error(y(280));var b=a.stateNode;b&&(b=Db(b),yb(a.stateNode,a.type,b))}}function Eb(a){zb?Ab?Ab.push(a):Ab=[a]:zb=a}function Fb(){if(zb){var a=zb,b=Ab;Ab=zb=null;Bb(a);if(b)for(a=0;a<b.length;a++)Bb(b[a])}}function Gb(a,b){return a(b)}function Hb(a,b,c,d,e){return a(b,c,d,e)}function Ib(){}var Jb=Gb,Kb=!1,Lb=!1;function Mb(){if(null!==zb||null!==Ab)Ib(),Fb()}\nfunction Nb(a,b,c){if(Lb)return a(b,c);Lb=!0;try{return Jb(a,b,c)}finally{Lb=!1,Mb()}}\nfunction Ob(a,b){var c=a.stateNode;if(null===c)return null;var d=Db(c);if(null===d)return null;c=d[b];a:switch(b){case \"onClick\":case \"onClickCapture\":case \"onDoubleClick\":case \"onDoubleClickCapture\":case \"onMouseDown\":case \"onMouseDownCapture\":case \"onMouseMove\":case \"onMouseMoveCapture\":case \"onMouseUp\":case \"onMouseUpCapture\":case \"onMouseEnter\":(d=!d.disabled)||(a=a.type,d=!(\"button\"===a||\"input\"===a||\"select\"===a||\"textarea\"===a));a=!d;break a;default:a=!1}if(a)return null;if(c&&\"function\"!==\ntypeof c)throw Error(y(231,b,typeof c));return c}var Pb=!1;if(fa)try{var Qb={};Object.defineProperty(Qb,\"passive\",{get:function(){Pb=!0}});window.addEventListener(\"test\",Qb,Qb);window.removeEventListener(\"test\",Qb,Qb)}catch(a){Pb=!1}function Rb(a,b,c,d,e,f,g,h,k){var l=Array.prototype.slice.call(arguments,3);try{b.apply(c,l)}catch(n){this.onError(n)}}var Sb=!1,Tb=null,Ub=!1,Vb=null,Wb={onError:function(a){Sb=!0;Tb=a}};function Xb(a,b,c,d,e,f,g,h,k){Sb=!1;Tb=null;Rb.apply(Wb,arguments)}\nfunction Yb(a,b,c,d,e,f,g,h,k){Xb.apply(this,arguments);if(Sb){if(Sb){var l=Tb;Sb=!1;Tb=null}else throw Error(y(198));Ub||(Ub=!0,Vb=l)}}function Zb(a){var b=a,c=a;if(a.alternate)for(;b.return;)b=b.return;else{a=b;do b=a,0!==(b.flags&1026)&&(c=b.return),a=b.return;while(a)}return 3===b.tag?c:null}function $b(a){if(13===a.tag){var b=a.memoizedState;null===b&&(a=a.alternate,null!==a&&(b=a.memoizedState));if(null!==b)return b.dehydrated}return null}function ac(a){if(Zb(a)!==a)throw Error(y(188));}\nfunction bc(a){var b=a.alternate;if(!b){b=Zb(a);if(null===b)throw Error(y(188));return b!==a?null:a}for(var c=a,d=b;;){var e=c.return;if(null===e)break;var f=e.alternate;if(null===f){d=e.return;if(null!==d){c=d;continue}break}if(e.child===f.child){for(f=e.child;f;){if(f===c)return ac(e),a;if(f===d)return ac(e),b;f=f.sibling}throw Error(y(188));}if(c.return!==d.return)c=e,d=f;else{for(var g=!1,h=e.child;h;){if(h===c){g=!0;c=e;d=f;break}if(h===d){g=!0;d=e;c=f;break}h=h.sibling}if(!g){for(h=f.child;h;){if(h===\nc){g=!0;c=f;d=e;break}if(h===d){g=!0;d=f;c=e;break}h=h.sibling}if(!g)throw Error(y(189));}}if(c.alternate!==d)throw Error(y(190));}if(3!==c.tag)throw Error(y(188));return c.stateNode.current===c?a:b}function cc(a){a=bc(a);if(!a)return null;for(var b=a;;){if(5===b.tag||6===b.tag)return b;if(b.child)b.child.return=b,b=b.child;else{if(b===a)break;for(;!b.sibling;){if(!b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}}return null}\nfunction dc(a,b){for(var c=a.alternate;null!==b;){if(b===a||b===c)return!0;b=b.return}return!1}var ec,fc,gc,hc,ic=!1,jc=[],kc=null,lc=null,mc=null,nc=new Map,oc=new Map,pc=[],qc=\"mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit\".split(\" \");\nfunction rc(a,b,c,d,e){return{blockedOn:a,domEventName:b,eventSystemFlags:c|16,nativeEvent:e,targetContainers:[d]}}function sc(a,b){switch(a){case \"focusin\":case \"focusout\":kc=null;break;case \"dragenter\":case \"dragleave\":lc=null;break;case \"mouseover\":case \"mouseout\":mc=null;break;case \"pointerover\":case \"pointerout\":nc.delete(b.pointerId);break;case \"gotpointercapture\":case \"lostpointercapture\":oc.delete(b.pointerId)}}\nfunction tc(a,b,c,d,e,f){if(null===a||a.nativeEvent!==f)return a=rc(b,c,d,e,f),null!==b&&(b=Cb(b),null!==b&&fc(b)),a;a.eventSystemFlags|=d;b=a.targetContainers;null!==e&&-1===b.indexOf(e)&&b.push(e);return a}\nfunction uc(a,b,c,d,e){switch(b){case \"focusin\":return kc=tc(kc,a,b,c,d,e),!0;case \"dragenter\":return lc=tc(lc,a,b,c,d,e),!0;case \"mouseover\":return mc=tc(mc,a,b,c,d,e),!0;case \"pointerover\":var f=e.pointerId;nc.set(f,tc(nc.get(f)||null,a,b,c,d,e));return!0;case \"gotpointercapture\":return f=e.pointerId,oc.set(f,tc(oc.get(f)||null,a,b,c,d,e)),!0}return!1}\nfunction vc(a){var b=wc(a.target);if(null!==b){var c=Zb(b);if(null!==c)if(b=c.tag,13===b){if(b=$b(c),null!==b){a.blockedOn=b;hc(a.lanePriority,function(){r.unstable_runWithPriority(a.priority,function(){gc(c)})});return}}else if(3===b&&c.stateNode.hydrate){a.blockedOn=3===c.tag?c.stateNode.containerInfo:null;return}}a.blockedOn=null}\nfunction xc(a){if(null!==a.blockedOn)return!1;for(var b=a.targetContainers;0<b.length;){var c=yc(a.domEventName,a.eventSystemFlags,b[0],a.nativeEvent);if(null!==c)return b=Cb(c),null!==b&&fc(b),a.blockedOn=c,!1;b.shift()}return!0}function zc(a,b,c){xc(a)&&c.delete(b)}\nfunction Ac(){for(ic=!1;0<jc.length;){var a=jc[0];if(null!==a.blockedOn){a=Cb(a.blockedOn);null!==a&&ec(a);break}for(var b=a.targetContainers;0<b.length;){var c=yc(a.domEventName,a.eventSystemFlags,b[0],a.nativeEvent);if(null!==c){a.blockedOn=c;break}b.shift()}null===a.blockedOn&&jc.shift()}null!==kc&&xc(kc)&&(kc=null);null!==lc&&xc(lc)&&(lc=null);null!==mc&&xc(mc)&&(mc=null);nc.forEach(zc);oc.forEach(zc)}\nfunction Bc(a,b){a.blockedOn===b&&(a.blockedOn=null,ic||(ic=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ac)))}\nfunction Cc(a){function b(b){return Bc(b,a)}if(0<jc.length){Bc(jc[0],a);for(var c=1;c<jc.length;c++){var d=jc[c];d.blockedOn===a&&(d.blockedOn=null)}}null!==kc&&Bc(kc,a);null!==lc&&Bc(lc,a);null!==mc&&Bc(mc,a);nc.forEach(b);oc.forEach(b);for(c=0;c<pc.length;c++)d=pc[c],d.blockedOn===a&&(d.blockedOn=null);for(;0<pc.length&&(c=pc[0],null===c.blockedOn);)vc(c),null===c.blockedOn&&pc.shift()}\nfunction Dc(a,b){var c={};c[a.toLowerCase()]=b.toLowerCase();c[\"Webkit\"+a]=\"webkit\"+b;c[\"Moz\"+a]=\"moz\"+b;return c}var Ec={animationend:Dc(\"Animation\",\"AnimationEnd\"),animationiteration:Dc(\"Animation\",\"AnimationIteration\"),animationstart:Dc(\"Animation\",\"AnimationStart\"),transitionend:Dc(\"Transition\",\"TransitionEnd\")},Fc={},Gc={};\nfa&&(Gc=document.createElement(\"div\").style,\"AnimationEvent\"in window||(delete Ec.animationend.animation,delete Ec.animationiteration.animation,delete Ec.animationstart.animation),\"TransitionEvent\"in window||delete Ec.transitionend.transition);function Hc(a){if(Fc[a])return Fc[a];if(!Ec[a])return a;var b=Ec[a],c;for(c in b)if(b.hasOwnProperty(c)&&c in Gc)return Fc[a]=b[c];return a}\nvar Ic=Hc(\"animationend\"),Jc=Hc(\"animationiteration\"),Kc=Hc(\"animationstart\"),Lc=Hc(\"transitionend\"),Mc=new Map,Nc=new Map,Oc=[\"abort\",\"abort\",Ic,\"animationEnd\",Jc,\"animationIteration\",Kc,\"animationStart\",\"canplay\",\"canPlay\",\"canplaythrough\",\"canPlayThrough\",\"durationchange\",\"durationChange\",\"emptied\",\"emptied\",\"encrypted\",\"encrypted\",\"ended\",\"ended\",\"error\",\"error\",\"gotpointercapture\",\"gotPointerCapture\",\"load\",\"load\",\"loadeddata\",\"loadedData\",\"loadedmetadata\",\"loadedMetadata\",\"loadstart\",\"loadStart\",\n\"lostpointercapture\",\"lostPointerCapture\",\"playing\",\"playing\",\"progress\",\"progress\",\"seeking\",\"seeking\",\"stalled\",\"stalled\",\"suspend\",\"suspend\",\"timeupdate\",\"timeUpdate\",Lc,\"transitionEnd\",\"waiting\",\"waiting\"];function Pc(a,b){for(var c=0;c<a.length;c+=2){var d=a[c],e=a[c+1];e=\"on\"+(e[0].toUpperCase()+e.slice(1));Nc.set(d,b);Mc.set(d,e);da(e,[d])}}var Qc=r.unstable_now;Qc();var F=8;\nfunction Rc(a){if(0!==(1&a))return F=15,1;if(0!==(2&a))return F=14,2;if(0!==(4&a))return F=13,4;var b=24&a;if(0!==b)return F=12,b;if(0!==(a&32))return F=11,32;b=192&a;if(0!==b)return F=10,b;if(0!==(a&256))return F=9,256;b=3584&a;if(0!==b)return F=8,b;if(0!==(a&4096))return F=7,4096;b=4186112&a;if(0!==b)return F=6,b;b=62914560&a;if(0!==b)return F=5,b;if(a&67108864)return F=4,67108864;if(0!==(a&134217728))return F=3,134217728;b=805306368&a;if(0!==b)return F=2,b;if(0!==(1073741824&a))return F=1,1073741824;\nF=8;return a}function Sc(a){switch(a){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function Tc(a){switch(a){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(y(358,a));}}\nfunction Uc(a,b){var c=a.pendingLanes;if(0===c)return F=0;var d=0,e=0,f=a.expiredLanes,g=a.suspendedLanes,h=a.pingedLanes;if(0!==f)d=f,e=F=15;else if(f=c&134217727,0!==f){var k=f&~g;0!==k?(d=Rc(k),e=F):(h&=f,0!==h&&(d=Rc(h),e=F))}else f=c&~g,0!==f?(d=Rc(f),e=F):0!==h&&(d=Rc(h),e=F);if(0===d)return 0;d=31-Vc(d);d=c&((0>d?0:1<<d)<<1)-1;if(0!==b&&b!==d&&0===(b&g)){Rc(b);if(e<=F)return b;F=e}b=a.entangledLanes;if(0!==b)for(a=a.entanglements,b&=d;0<b;)c=31-Vc(b),e=1<<c,d|=a[c],b&=~e;return d}\nfunction Wc(a){a=a.pendingLanes&-1073741825;return 0!==a?a:a&1073741824?1073741824:0}function Xc(a,b){switch(a){case 15:return 1;case 14:return 2;case 12:return a=Yc(24&~b),0===a?Xc(10,b):a;case 10:return a=Yc(192&~b),0===a?Xc(8,b):a;case 8:return a=Yc(3584&~b),0===a&&(a=Yc(4186112&~b),0===a&&(a=512)),a;case 2:return b=Yc(805306368&~b),0===b&&(b=268435456),b}throw Error(y(358,a));}function Yc(a){return a&-a}function Zc(a){for(var b=[],c=0;31>c;c++)b.push(a);return b}\nfunction $c(a,b,c){a.pendingLanes|=b;var d=b-1;a.suspendedLanes&=d;a.pingedLanes&=d;a=a.eventTimes;b=31-Vc(b);a[b]=c}var Vc=Math.clz32?Math.clz32:ad,bd=Math.log,cd=Math.LN2;function ad(a){return 0===a?32:31-(bd(a)/cd|0)|0}var dd=r.unstable_UserBlockingPriority,ed=r.unstable_runWithPriority,fd=!0;function gd(a,b,c,d){Kb||Ib();var e=hd,f=Kb;Kb=!0;try{Hb(e,a,b,c,d)}finally{(Kb=f)||Mb()}}function id(a,b,c,d){ed(dd,hd.bind(null,a,b,c,d))}\nfunction hd(a,b,c,d){if(fd){var e;if((e=0===(b&4))&&0<jc.length&&-1<qc.indexOf(a))a=rc(null,a,b,c,d),jc.push(a);else{var f=yc(a,b,c,d);if(null===f)e&&sc(a,d);else{if(e){if(-1<qc.indexOf(a)){a=rc(f,a,b,c,d);jc.push(a);return}if(uc(f,a,b,c,d))return;sc(a,d)}jd(a,b,d,null,c)}}}}\nfunction yc(a,b,c,d){var e=xb(d);e=wc(e);if(null!==e){var f=Zb(e);if(null===f)e=null;else{var g=f.tag;if(13===g){e=$b(f);if(null!==e)return e;e=null}else if(3===g){if(f.stateNode.hydrate)return 3===f.tag?f.stateNode.containerInfo:null;e=null}else f!==e&&(e=null)}}jd(a,b,d,e,c);return null}var kd=null,ld=null,md=null;\nfunction nd(){if(md)return md;var a,b=ld,c=b.length,d,e=\"value\"in kd?kd.value:kd.textContent,f=e.length;for(a=0;a<c&&b[a]===e[a];a++);var g=c-a;for(d=1;d<=g&&b[c-d]===e[f-d];d++);return md=e.slice(a,1<d?1-d:void 0)}function od(a){var b=a.keyCode;\"charCode\"in a?(a=a.charCode,0===a&&13===b&&(a=13)):a=b;10===a&&(a=13);return 32<=a||13===a?a:0}function pd(){return!0}function qd(){return!1}\nfunction rd(a){function b(b,d,e,f,g){this._reactName=b;this._targetInst=e;this.type=d;this.nativeEvent=f;this.target=g;this.currentTarget=null;for(var c in a)a.hasOwnProperty(c)&&(b=a[c],this[c]=b?b(f):f[c]);this.isDefaultPrevented=(null!=f.defaultPrevented?f.defaultPrevented:!1===f.returnValue)?pd:qd;this.isPropagationStopped=qd;return this}m(b.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():\"unknown\"!==typeof a.returnValue&&\n(a.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():\"unknown\"!==typeof a.cancelBubble&&(a.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd});return b}\nvar sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=m({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=m({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(a){return void 0===a.relatedTarget?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){if(\"movementX\"in\na)return a.movementX;a!==yd&&(yd&&\"mousemove\"===a.type?(wd=a.screenX-yd.screenX,xd=a.screenY-yd.screenY):xd=wd=0,yd=a);return wd},movementY:function(a){return\"movementY\"in a?a.movementY:xd}}),Bd=rd(Ad),Cd=m({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=m({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=m({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=m({},sd,{clipboardData:function(a){return\"clipboardData\"in a?a.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=m({},sd,{data:0}),Ld=rd(Kd),Md={Esc:\"Escape\",\nSpacebar:\" \",Left:\"ArrowLeft\",Up:\"ArrowUp\",Right:\"ArrowRight\",Down:\"ArrowDown\",Del:\"Delete\",Win:\"OS\",Menu:\"ContextMenu\",Apps:\"ContextMenu\",Scroll:\"ScrollLock\",MozPrintableKey:\"Unidentified\"},Nd={8:\"Backspace\",9:\"Tab\",12:\"Clear\",13:\"Enter\",16:\"Shift\",17:\"Control\",18:\"Alt\",19:\"Pause\",20:\"CapsLock\",27:\"Escape\",32:\" \",33:\"PageUp\",34:\"PageDown\",35:\"End\",36:\"Home\",37:\"ArrowLeft\",38:\"ArrowUp\",39:\"ArrowRight\",40:\"ArrowDown\",45:\"Insert\",46:\"Delete\",112:\"F1\",113:\"F2\",114:\"F3\",115:\"F4\",116:\"F5\",117:\"F6\",118:\"F7\",\n119:\"F8\",120:\"F9\",121:\"F10\",122:\"F11\",123:\"F12\",144:\"NumLock\",145:\"ScrollLock\",224:\"Meta\"},Od={Alt:\"altKey\",Control:\"ctrlKey\",Meta:\"metaKey\",Shift:\"shiftKey\"};function Pd(a){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(a):(a=Od[a])?!!b[a]:!1}function zd(){return Pd}\nvar Qd=m({},ud,{key:function(a){if(a.key){var b=Md[a.key]||a.key;if(\"Unidentified\"!==b)return b}return\"keypress\"===a.type?(a=od(a),13===a?\"Enter\":String.fromCharCode(a)):\"keydown\"===a.type||\"keyup\"===a.type?Nd[a.keyCode]||\"Unidentified\":\"\"},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(a){return\"keypress\"===a.type?od(a):0},keyCode:function(a){return\"keydown\"===a.type||\"keyup\"===a.type?a.keyCode:0},which:function(a){return\"keypress\"===\na.type?od(a):\"keydown\"===a.type||\"keyup\"===a.type?a.keyCode:0}}),Rd=rd(Qd),Sd=m({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=m({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=m({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=m({},Ad,{deltaX:function(a){return\"deltaX\"in a?a.deltaX:\"wheelDeltaX\"in a?-a.wheelDeltaX:0},\ndeltaY:function(a){return\"deltaY\"in a?a.deltaY:\"wheelDeltaY\"in a?-a.wheelDeltaY:\"wheelDelta\"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=fa&&\"CompositionEvent\"in window,be=null;fa&&\"documentMode\"in document&&(be=document.documentMode);var ce=fa&&\"TextEvent\"in window&&!be,de=fa&&(!ae||be&&8<be&&11>=be),ee=String.fromCharCode(32),fe=!1;\nfunction ge(a,b){switch(a){case \"keyup\":return-1!==$d.indexOf(b.keyCode);case \"keydown\":return 229!==b.keyCode;case \"keypress\":case \"mousedown\":case \"focusout\":return!0;default:return!1}}function he(a){a=a.detail;return\"object\"===typeof a&&\"data\"in a?a.data:null}var ie=!1;function je(a,b){switch(a){case \"compositionend\":return he(b);case \"keypress\":if(32!==b.which)return null;fe=!0;return ee;case \"textInput\":return a=b.data,a===ee&&fe?null:a;default:return null}}\nfunction ke(a,b){if(ie)return\"compositionend\"===a||!ae&&ge(a,b)?(a=nd(),md=ld=kd=null,ie=!1,a):null;switch(a){case \"paste\":return null;case \"keypress\":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;case \"compositionend\":return de&&\"ko\"!==b.locale?null:b.data;default:return null}}\nvar le={color:!0,date:!0,datetime:!0,\"datetime-local\":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return\"input\"===b?!!le[a.type]:\"textarea\"===b?!0:!1}function ne(a,b,c,d){Eb(d);b=oe(b,\"onChange\");0<b.length&&(c=new td(\"onChange\",\"change\",null,c,d),a.push({event:c,listeners:b}))}var pe=null,qe=null;function re(a){se(a,0)}function te(a){var b=ue(a);if(Wa(b))return a}\nfunction ve(a,b){if(\"change\"===a)return b}var we=!1;if(fa){var xe;if(fa){var ye=\"oninput\"in document;if(!ye){var ze=document.createElement(\"div\");ze.setAttribute(\"oninput\",\"return;\");ye=\"function\"===typeof ze.oninput}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent(\"onpropertychange\",Be),qe=pe=null)}function Be(a){if(\"value\"===a.propertyName&&te(qe)){var b=[];ne(b,qe,a,xb(a));a=re;if(Kb)a(b);else{Kb=!0;try{Gb(a,b)}finally{Kb=!1,Mb()}}}}\nfunction Ce(a,b,c){\"focusin\"===a?(Ae(),pe=b,qe=c,pe.attachEvent(\"onpropertychange\",Be)):\"focusout\"===a&&Ae()}function De(a){if(\"selectionchange\"===a||\"keyup\"===a||\"keydown\"===a)return te(qe)}function Ee(a,b){if(\"click\"===a)return te(b)}function Fe(a,b){if(\"input\"===a||\"change\"===a)return te(b)}function Ge(a,b){return a===b&&(0!==a||1/a===1/b)||a!==a&&b!==b}var He=\"function\"===typeof Object.is?Object.is:Ge,Ie=Object.prototype.hasOwnProperty;\nfunction Je(a,b){if(He(a,b))return!0;if(\"object\"!==typeof a||null===a||\"object\"!==typeof b||null===b)return!1;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++)if(!Ie.call(b,c[d])||!He(a[c[d]],b[c[d]]))return!1;return!0}function Ke(a){for(;a&&a.firstChild;)a=a.firstChild;return a}\nfunction Le(a,b){var c=Ke(a);a=0;for(var d;c;){if(3===c.nodeType){d=a+c.textContent.length;if(a<=b&&d>=b)return{node:c,offset:b-a};a=d}a:{for(;c;){if(c.nextSibling){c=c.nextSibling;break a}c=c.parentNode}c=void 0}c=Ke(c)}}function Me(a,b){return a&&b?a===b?!0:a&&3===a.nodeType?!1:b&&3===b.nodeType?Me(a,b.parentNode):\"contains\"in a?a.contains(b):a.compareDocumentPosition?!!(a.compareDocumentPosition(b)&16):!1:!1}\nfunction Ne(){for(var a=window,b=Xa();b instanceof a.HTMLIFrameElement;){try{var c=\"string\"===typeof b.contentWindow.location.href}catch(d){c=!1}if(c)a=b.contentWindow;else break;b=Xa(a.document)}return b}function Oe(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return b&&(\"input\"===b&&(\"text\"===a.type||\"search\"===a.type||\"tel\"===a.type||\"url\"===a.type||\"password\"===a.type)||\"textarea\"===b||\"true\"===a.contentEditable)}\nvar Pe=fa&&\"documentMode\"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;\nfunction Ue(a,b,c){var d=c.window===c?c.document:9===c.nodeType?c:c.ownerDocument;Te||null==Qe||Qe!==Xa(d)||(d=Qe,\"selectionStart\"in d&&Oe(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Se&&Je(Se,d)||(Se=d,d=oe(Re,\"onSelect\"),0<d.length&&(b=new td(\"onSelect\",\"select\",null,b,c),a.push({event:b,listeners:d}),b.target=Qe)))}\nPc(\"cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange\".split(\" \"),\n0);Pc(\"drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel\".split(\" \"),1);Pc(Oc,2);for(var Ve=\"change selectionchange textInput compositionstart compositionend compositionupdate\".split(\" \"),We=0;We<Ve.length;We++)Nc.set(Ve[We],0);ea(\"onMouseEnter\",[\"mouseout\",\"mouseover\"]);\nea(\"onMouseLeave\",[\"mouseout\",\"mouseover\"]);ea(\"onPointerEnter\",[\"pointerout\",\"pointerover\"]);ea(\"onPointerLeave\",[\"pointerout\",\"pointerover\"]);da(\"onChange\",\"change click focusin focusout input keydown keyup selectionchange\".split(\" \"));da(\"onSelect\",\"focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange\".split(\" \"));da(\"onBeforeInput\",[\"compositionend\",\"keypress\",\"textInput\",\"paste\"]);da(\"onCompositionEnd\",\"compositionend focusout keydown keypress keyup mousedown\".split(\" \"));\nda(\"onCompositionStart\",\"compositionstart focusout keydown keypress keyup mousedown\".split(\" \"));da(\"onCompositionUpdate\",\"compositionupdate focusout keydown keypress keyup mousedown\".split(\" \"));var Xe=\"abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting\".split(\" \"),Ye=new Set(\"cancel close invalid load scroll toggle\".split(\" \").concat(Xe));\nfunction Ze(a,b,c){var d=a.type||\"unknown-event\";a.currentTarget=c;Yb(d,b,void 0,a);a.currentTarget=null}\nfunction se(a,b){b=0!==(b&4);for(var c=0;c<a.length;c++){var d=a[c],e=d.event;d=d.listeners;a:{var f=void 0;if(b)for(var g=d.length-1;0<=g;g--){var h=d[g],k=h.instance,l=h.currentTarget;h=h.listener;if(k!==f&&e.isPropagationStopped())break a;Ze(e,h,l);f=k}else for(g=0;g<d.length;g++){h=d[g];k=h.instance;l=h.currentTarget;h=h.listener;if(k!==f&&e.isPropagationStopped())break a;Ze(e,h,l);f=k}}}if(Ub)throw a=Vb,Ub=!1,Vb=null,a;}\nfunction G(a,b){var c=$e(b),d=a+\"__bubble\";c.has(d)||(af(b,a,2,!1),c.add(d))}var bf=\"_reactListening\"+Math.random().toString(36).slice(2);function cf(a){a[bf]||(a[bf]=!0,ba.forEach(function(b){Ye.has(b)||df(b,!1,a,null);df(b,!0,a,null)}))}\nfunction df(a,b,c,d){var e=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,f=c;\"selectionchange\"===a&&9!==c.nodeType&&(f=c.ownerDocument);if(null!==d&&!b&&Ye.has(a)){if(\"scroll\"!==a)return;e|=2;f=d}var g=$e(f),h=a+\"__\"+(b?\"capture\":\"bubble\");g.has(h)||(b&&(e|=4),af(f,a,e,b),g.add(h))}\nfunction af(a,b,c,d){var e=Nc.get(b);switch(void 0===e?2:e){case 0:e=gd;break;case 1:e=id;break;default:e=hd}c=e.bind(null,b,c,a);e=void 0;!Pb||\"touchstart\"!==b&&\"touchmove\"!==b&&\"wheel\"!==b||(e=!0);d?void 0!==e?a.addEventListener(b,c,{capture:!0,passive:e}):a.addEventListener(b,c,!0):void 0!==e?a.addEventListener(b,c,{passive:e}):a.addEventListener(b,c,!1)}\nfunction jd(a,b,c,d,e){var f=d;if(0===(b&1)&&0===(b&2)&&null!==d)a:for(;;){if(null===d)return;var g=d.tag;if(3===g||4===g){var h=d.stateNode.containerInfo;if(h===e||8===h.nodeType&&h.parentNode===e)break;if(4===g)for(g=d.return;null!==g;){var k=g.tag;if(3===k||4===k)if(k=g.stateNode.containerInfo,k===e||8===k.nodeType&&k.parentNode===e)return;g=g.return}for(;null!==h;){g=wc(h);if(null===g)return;k=g.tag;if(5===k||6===k){d=f=g;continue a}h=h.parentNode}}d=d.return}Nb(function(){var d=f,e=xb(c),g=[];\na:{var h=Mc.get(a);if(void 0!==h){var k=td,x=a;switch(a){case \"keypress\":if(0===od(c))break a;case \"keydown\":case \"keyup\":k=Rd;break;case \"focusin\":x=\"focus\";k=Fd;break;case \"focusout\":x=\"blur\";k=Fd;break;case \"beforeblur\":case \"afterblur\":k=Fd;break;case \"click\":if(2===c.button)break a;case \"auxclick\":case \"dblclick\":case \"mousedown\":case \"mousemove\":case \"mouseup\":case \"mouseout\":case \"mouseover\":case \"contextmenu\":k=Bd;break;case \"drag\":case \"dragend\":case \"dragenter\":case \"dragexit\":case \"dragleave\":case \"dragover\":case \"dragstart\":case \"drop\":k=\nDd;break;case \"touchcancel\":case \"touchend\":case \"touchmove\":case \"touchstart\":k=Vd;break;case Ic:case Jc:case Kc:k=Hd;break;case Lc:k=Xd;break;case \"scroll\":k=vd;break;case \"wheel\":k=Zd;break;case \"copy\":case \"cut\":case \"paste\":k=Jd;break;case \"gotpointercapture\":case \"lostpointercapture\":case \"pointercancel\":case \"pointerdown\":case \"pointermove\":case \"pointerout\":case \"pointerover\":case \"pointerup\":k=Td}var w=0!==(b&4),z=!w&&\"scroll\"===a,u=w?null!==h?h+\"Capture\":null:h;w=[];for(var t=d,q;null!==\nt;){q=t;var v=q.stateNode;5===q.tag&&null!==v&&(q=v,null!==u&&(v=Ob(t,u),null!=v&&w.push(ef(t,v,q))));if(z)break;t=t.return}0<w.length&&(h=new k(h,x,null,c,e),g.push({event:h,listeners:w}))}}if(0===(b&7)){a:{h=\"mouseover\"===a||\"pointerover\"===a;k=\"mouseout\"===a||\"pointerout\"===a;if(h&&0===(b&16)&&(x=c.relatedTarget||c.fromElement)&&(wc(x)||x[ff]))break a;if(k||h){h=e.window===e?e:(h=e.ownerDocument)?h.defaultView||h.parentWindow:window;if(k){if(x=c.relatedTarget||c.toElement,k=d,x=x?wc(x):null,null!==\nx&&(z=Zb(x),x!==z||5!==x.tag&&6!==x.tag))x=null}else k=null,x=d;if(k!==x){w=Bd;v=\"onMouseLeave\";u=\"onMouseEnter\";t=\"mouse\";if(\"pointerout\"===a||\"pointerover\"===a)w=Td,v=\"onPointerLeave\",u=\"onPointerEnter\",t=\"pointer\";z=null==k?h:ue(k);q=null==x?h:ue(x);h=new w(v,t+\"leave\",k,c,e);h.target=z;h.relatedTarget=q;v=null;wc(e)===d&&(w=new w(u,t+\"enter\",x,c,e),w.target=q,w.relatedTarget=z,v=w);z=v;if(k&&x)b:{w=k;u=x;t=0;for(q=w;q;q=gf(q))t++;q=0;for(v=u;v;v=gf(v))q++;for(;0<t-q;)w=gf(w),t--;for(;0<q-t;)u=\ngf(u),q--;for(;t--;){if(w===u||null!==u&&w===u.alternate)break b;w=gf(w);u=gf(u)}w=null}else w=null;null!==k&&hf(g,h,k,w,!1);null!==x&&null!==z&&hf(g,z,x,w,!0)}}}a:{h=d?ue(d):window;k=h.nodeName&&h.nodeName.toLowerCase();if(\"select\"===k||\"input\"===k&&\"file\"===h.type)var J=ve;else if(me(h))if(we)J=Fe;else{J=De;var K=Ce}else(k=h.nodeName)&&\"input\"===k.toLowerCase()&&(\"checkbox\"===h.type||\"radio\"===h.type)&&(J=Ee);if(J&&(J=J(a,d))){ne(g,J,c,e);break a}K&&K(a,h,d);\"focusout\"===a&&(K=h._wrapperState)&&\nK.controlled&&\"number\"===h.type&&bb(h,\"number\",h.value)}K=d?ue(d):window;switch(a){case \"focusin\":if(me(K)||\"true\"===K.contentEditable)Qe=K,Re=d,Se=null;break;case \"focusout\":Se=Re=Qe=null;break;case \"mousedown\":Te=!0;break;case \"contextmenu\":case \"mouseup\":case \"dragend\":Te=!1;Ue(g,c,e);break;case \"selectionchange\":if(Pe)break;case \"keydown\":case \"keyup\":Ue(g,c,e)}var Q;if(ae)b:{switch(a){case \"compositionstart\":var L=\"onCompositionStart\";break b;case \"compositionend\":L=\"onCompositionEnd\";break b;\ncase \"compositionupdate\":L=\"onCompositionUpdate\";break b}L=void 0}else ie?ge(a,c)&&(L=\"onCompositionEnd\"):\"keydown\"===a&&229===c.keyCode&&(L=\"onCompositionStart\");L&&(de&&\"ko\"!==c.locale&&(ie||\"onCompositionStart\"!==L?\"onCompositionEnd\"===L&&ie&&(Q=nd()):(kd=e,ld=\"value\"in kd?kd.value:kd.textContent,ie=!0)),K=oe(d,L),0<K.length&&(L=new Ld(L,a,null,c,e),g.push({event:L,listeners:K}),Q?L.data=Q:(Q=he(c),null!==Q&&(L.data=Q))));if(Q=ce?je(a,c):ke(a,c))d=oe(d,\"onBeforeInput\"),0<d.length&&(e=new Ld(\"onBeforeInput\",\n\"beforeinput\",null,c,e),g.push({event:e,listeners:d}),e.data=Q)}se(g,b)})}function ef(a,b,c){return{instance:a,listener:b,currentTarget:c}}function oe(a,b){for(var c=b+\"Capture\",d=[];null!==a;){var e=a,f=e.stateNode;5===e.tag&&null!==f&&(e=f,f=Ob(a,c),null!=f&&d.unshift(ef(a,f,e)),f=Ob(a,b),null!=f&&d.push(ef(a,f,e)));a=a.return}return d}function gf(a){if(null===a)return null;do a=a.return;while(a&&5!==a.tag);return a?a:null}\nfunction hf(a,b,c,d,e){for(var f=b._reactName,g=[];null!==c&&c!==d;){var h=c,k=h.alternate,l=h.stateNode;if(null!==k&&k===d)break;5===h.tag&&null!==l&&(h=l,e?(k=Ob(c,f),null!=k&&g.unshift(ef(c,k,h))):e||(k=Ob(c,f),null!=k&&g.push(ef(c,k,h))));c=c.return}0!==g.length&&a.push({event:b,listeners:g})}function jf(){}var kf=null,lf=null;function mf(a,b){switch(a){case \"button\":case \"input\":case \"select\":case \"textarea\":return!!b.autoFocus}return!1}\nfunction nf(a,b){return\"textarea\"===a||\"option\"===a||\"noscript\"===a||\"string\"===typeof b.children||\"number\"===typeof b.children||\"object\"===typeof b.dangerouslySetInnerHTML&&null!==b.dangerouslySetInnerHTML&&null!=b.dangerouslySetInnerHTML.__html}var of=\"function\"===typeof setTimeout?setTimeout:void 0,pf=\"function\"===typeof clearTimeout?clearTimeout:void 0;function qf(a){1===a.nodeType?a.textContent=\"\":9===a.nodeType&&(a=a.body,null!=a&&(a.textContent=\"\"))}\nfunction rf(a){for(;null!=a;a=a.nextSibling){var b=a.nodeType;if(1===b||3===b)break}return a}function sf(a){a=a.previousSibling;for(var b=0;a;){if(8===a.nodeType){var c=a.data;if(\"$\"===c||\"$!\"===c||\"$?\"===c){if(0===b)return a;b--}else\"/$\"===c&&b++}a=a.previousSibling}return null}var tf=0;function uf(a){return{$$typeof:Ga,toString:a,valueOf:a}}var vf=Math.random().toString(36).slice(2),wf=\"__reactFiber$\"+vf,xf=\"__reactProps$\"+vf,ff=\"__reactContainer$\"+vf,yf=\"__reactEvents$\"+vf;\nfunction wc(a){var b=a[wf];if(b)return b;for(var c=a.parentNode;c;){if(b=c[ff]||c[wf]){c=b.alternate;if(null!==b.child||null!==c&&null!==c.child)for(a=sf(a);null!==a;){if(c=a[wf])return c;a=sf(a)}return b}a=c;c=a.parentNode}return null}function Cb(a){a=a[wf]||a[ff];return!a||5!==a.tag&&6!==a.tag&&13!==a.tag&&3!==a.tag?null:a}function ue(a){if(5===a.tag||6===a.tag)return a.stateNode;throw Error(y(33));}function Db(a){return a[xf]||null}\nfunction $e(a){var b=a[yf];void 0===b&&(b=a[yf]=new Set);return b}var zf=[],Af=-1;function Bf(a){return{current:a}}function H(a){0>Af||(a.current=zf[Af],zf[Af]=null,Af--)}function I(a,b){Af++;zf[Af]=a.current;a.current=b}var Cf={},M=Bf(Cf),N=Bf(!1),Df=Cf;\nfunction Ef(a,b){var c=a.type.contextTypes;if(!c)return Cf;var d=a.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===b)return d.__reactInternalMemoizedMaskedChildContext;var e={},f;for(f in c)e[f]=b[f];d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=e);return e}function Ff(a){a=a.childContextTypes;return null!==a&&void 0!==a}function Gf(){H(N);H(M)}function Hf(a,b,c){if(M.current!==Cf)throw Error(y(168));I(M,b);I(N,c)}\nfunction If(a,b,c){var d=a.stateNode;a=b.childContextTypes;if(\"function\"!==typeof d.getChildContext)return c;d=d.getChildContext();for(var e in d)if(!(e in a))throw Error(y(108,Ra(b)||\"Unknown\",e));return m({},c,d)}function Jf(a){a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Cf;Df=M.current;I(M,a);I(N,N.current);return!0}function Kf(a,b,c){var d=a.stateNode;if(!d)throw Error(y(169));c?(a=If(a,b,Df),d.__reactInternalMemoizedMergedChildContext=a,H(N),H(M),I(M,a)):H(N);I(N,c)}\nvar Lf=null,Mf=null,Nf=r.unstable_runWithPriority,Of=r.unstable_scheduleCallback,Pf=r.unstable_cancelCallback,Qf=r.unstable_shouldYield,Rf=r.unstable_requestPaint,Sf=r.unstable_now,Tf=r.unstable_getCurrentPriorityLevel,Uf=r.unstable_ImmediatePriority,Vf=r.unstable_UserBlockingPriority,Wf=r.unstable_NormalPriority,Xf=r.unstable_LowPriority,Yf=r.unstable_IdlePriority,Zf={},$f=void 0!==Rf?Rf:function(){},ag=null,bg=null,cg=!1,dg=Sf(),O=1E4>dg?Sf:function(){return Sf()-dg};\nfunction eg(){switch(Tf()){case Uf:return 99;case Vf:return 98;case Wf:return 97;case Xf:return 96;case Yf:return 95;default:throw Error(y(332));}}function fg(a){switch(a){case 99:return Uf;case 98:return Vf;case 97:return Wf;case 96:return Xf;case 95:return Yf;default:throw Error(y(332));}}function gg(a,b){a=fg(a);return Nf(a,b)}function hg(a,b,c){a=fg(a);return Of(a,b,c)}function ig(){if(null!==bg){var a=bg;bg=null;Pf(a)}jg()}\nfunction jg(){if(!cg&&null!==ag){cg=!0;var a=0;try{var b=ag;gg(99,function(){for(;a<b.length;a++){var c=b[a];do c=c(!0);while(null!==c)}});ag=null}catch(c){throw null!==ag&&(ag=ag.slice(a+1)),Of(Uf,ig),c;}finally{cg=!1}}}var kg=ra.ReactCurrentBatchConfig;function lg(a,b){if(a&&a.defaultProps){b=m({},b);a=a.defaultProps;for(var c in a)void 0===b[c]&&(b[c]=a[c]);return b}return b}var mg=Bf(null),ng=null,og=null,pg=null;function qg(){pg=og=ng=null}\nfunction rg(a){var b=mg.current;H(mg);a.type._context._currentValue=b}function sg(a,b){for(;null!==a;){var c=a.alternate;if((a.childLanes&b)===b)if(null===c||(c.childLanes&b)===b)break;else c.childLanes|=b;else a.childLanes|=b,null!==c&&(c.childLanes|=b);a=a.return}}function tg(a,b){ng=a;pg=og=null;a=a.dependencies;null!==a&&null!==a.firstContext&&(0!==(a.lanes&b)&&(ug=!0),a.firstContext=null)}\nfunction vg(a,b){if(pg!==a&&!1!==b&&0!==b){if(\"number\"!==typeof b||1073741823===b)pg=a,b=1073741823;b={context:a,observedBits:b,next:null};if(null===og){if(null===ng)throw Error(y(308));og=b;ng.dependencies={lanes:0,firstContext:b,responders:null}}else og=og.next=b}return a._currentValue}var wg=!1;function xg(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}\nfunction yg(a,b){a=a.updateQueue;b.updateQueue===a&&(b.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function zg(a,b){return{eventTime:a,lane:b,tag:0,payload:null,callback:null,next:null}}function Ag(a,b){a=a.updateQueue;if(null!==a){a=a.shared;var c=a.pending;null===c?b.next=b:(b.next=c.next,c.next=b);a.pending=b}}\nfunction Bg(a,b){var c=a.updateQueue,d=a.alternate;if(null!==d&&(d=d.updateQueue,c===d)){var e=null,f=null;c=c.firstBaseUpdate;if(null!==c){do{var g={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};null===f?e=f=g:f=f.next=g;c=c.next}while(null!==c);null===f?e=f=b:f=f.next=b}else e=f=b;c={baseState:d.baseState,firstBaseUpdate:e,lastBaseUpdate:f,shared:d.shared,effects:d.effects};a.updateQueue=c;return}a=c.lastBaseUpdate;null===a?c.firstBaseUpdate=b:a.next=\nb;c.lastBaseUpdate=b}\nfunction Cg(a,b,c,d){var e=a.updateQueue;wg=!1;var f=e.firstBaseUpdate,g=e.lastBaseUpdate,h=e.shared.pending;if(null!==h){e.shared.pending=null;var k=h,l=k.next;k.next=null;null===g?f=l:g.next=l;g=k;var n=a.alternate;if(null!==n){n=n.updateQueue;var A=n.lastBaseUpdate;A!==g&&(null===A?n.firstBaseUpdate=l:A.next=l,n.lastBaseUpdate=k)}}if(null!==f){A=e.baseState;g=0;n=l=k=null;do{h=f.lane;var p=f.eventTime;if((d&h)===h){null!==n&&(n=n.next={eventTime:p,lane:0,tag:f.tag,payload:f.payload,callback:f.callback,\nnext:null});a:{var C=a,x=f;h=b;p=c;switch(x.tag){case 1:C=x.payload;if(\"function\"===typeof C){A=C.call(p,A,h);break a}A=C;break a;case 3:C.flags=C.flags&-4097|64;case 0:C=x.payload;h=\"function\"===typeof C?C.call(p,A,h):C;if(null===h||void 0===h)break a;A=m({},A,h);break a;case 2:wg=!0}}null!==f.callback&&(a.flags|=32,h=e.effects,null===h?e.effects=[f]:h.push(f))}else p={eventTime:p,lane:h,tag:f.tag,payload:f.payload,callback:f.callback,next:null},null===n?(l=n=p,k=A):n=n.next=p,g|=h;f=f.next;if(null===\nf)if(h=e.shared.pending,null===h)break;else f=h.next,h.next=null,e.lastBaseUpdate=h,e.shared.pending=null}while(1);null===n&&(k=A);e.baseState=k;e.firstBaseUpdate=l;e.lastBaseUpdate=n;Dg|=g;a.lanes=g;a.memoizedState=A}}function Eg(a,b,c){a=b.effects;b.effects=null;if(null!==a)for(b=0;b<a.length;b++){var d=a[b],e=d.callback;if(null!==e){d.callback=null;d=c;if(\"function\"!==typeof e)throw Error(y(191,e));e.call(d)}}}var Fg=(new aa.Component).refs;\nfunction Gg(a,b,c,d){b=a.memoizedState;c=c(d,b);c=null===c||void 0===c?b:m({},b,c);a.memoizedState=c;0===a.lanes&&(a.updateQueue.baseState=c)}\nvar Kg={isMounted:function(a){return(a=a._reactInternals)?Zb(a)===a:!1},enqueueSetState:function(a,b,c){a=a._reactInternals;var d=Hg(),e=Ig(a),f=zg(d,e);f.payload=b;void 0!==c&&null!==c&&(f.callback=c);Ag(a,f);Jg(a,e,d)},enqueueReplaceState:function(a,b,c){a=a._reactInternals;var d=Hg(),e=Ig(a),f=zg(d,e);f.tag=1;f.payload=b;void 0!==c&&null!==c&&(f.callback=c);Ag(a,f);Jg(a,e,d)},enqueueForceUpdate:function(a,b){a=a._reactInternals;var c=Hg(),d=Ig(a),e=zg(c,d);e.tag=2;void 0!==b&&null!==b&&(e.callback=\nb);Ag(a,e);Jg(a,d,c)}};function Lg(a,b,c,d,e,f,g){a=a.stateNode;return\"function\"===typeof a.shouldComponentUpdate?a.shouldComponentUpdate(d,f,g):b.prototype&&b.prototype.isPureReactComponent?!Je(c,d)||!Je(e,f):!0}\nfunction Mg(a,b,c){var d=!1,e=Cf;var f=b.contextType;\"object\"===typeof f&&null!==f?f=vg(f):(e=Ff(b)?Df:M.current,d=b.contextTypes,f=(d=null!==d&&void 0!==d)?Ef(a,e):Cf);b=new b(c,f);a.memoizedState=null!==b.state&&void 0!==b.state?b.state:null;b.updater=Kg;a.stateNode=b;b._reactInternals=a;d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=e,a.__reactInternalMemoizedMaskedChildContext=f);return b}\nfunction Ng(a,b,c,d){a=b.state;\"function\"===typeof b.componentWillReceiveProps&&b.componentWillReceiveProps(c,d);\"function\"===typeof b.UNSAFE_componentWillReceiveProps&&b.UNSAFE_componentWillReceiveProps(c,d);b.state!==a&&Kg.enqueueReplaceState(b,b.state,null)}\nfunction Og(a,b,c,d){var e=a.stateNode;e.props=c;e.state=a.memoizedState;e.refs=Fg;xg(a);var f=b.contextType;\"object\"===typeof f&&null!==f?e.context=vg(f):(f=Ff(b)?Df:M.current,e.context=Ef(a,f));Cg(a,c,e,d);e.state=a.memoizedState;f=b.getDerivedStateFromProps;\"function\"===typeof f&&(Gg(a,b,f,c),e.state=a.memoizedState);\"function\"===typeof b.getDerivedStateFromProps||\"function\"===typeof e.getSnapshotBeforeUpdate||\"function\"!==typeof e.UNSAFE_componentWillMount&&\"function\"!==typeof e.componentWillMount||\n(b=e.state,\"function\"===typeof e.componentWillMount&&e.componentWillMount(),\"function\"===typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),b!==e.state&&Kg.enqueueReplaceState(e,e.state,null),Cg(a,c,e,d),e.state=a.memoizedState);\"function\"===typeof e.componentDidMount&&(a.flags|=4)}var Pg=Array.isArray;\nfunction Qg(a,b,c){a=c.ref;if(null!==a&&\"function\"!==typeof a&&\"object\"!==typeof a){if(c._owner){c=c._owner;if(c){if(1!==c.tag)throw Error(y(309));var d=c.stateNode}if(!d)throw Error(y(147,a));var e=\"\"+a;if(null!==b&&null!==b.ref&&\"function\"===typeof b.ref&&b.ref._stringRef===e)return b.ref;b=function(a){var b=d.refs;b===Fg&&(b=d.refs={});null===a?delete b[e]:b[e]=a};b._stringRef=e;return b}if(\"string\"!==typeof a)throw Error(y(284));if(!c._owner)throw Error(y(290,a));}return a}\nfunction Rg(a,b){if(\"textarea\"!==a.type)throw Error(y(31,\"[object Object]\"===Object.prototype.toString.call(b)?\"object with keys {\"+Object.keys(b).join(\", \")+\"}\":b));}\nfunction Sg(a){function b(b,c){if(a){var d=b.lastEffect;null!==d?(d.nextEffect=c,b.lastEffect=c):b.firstEffect=b.lastEffect=c;c.nextEffect=null;c.flags=8}}function c(c,d){if(!a)return null;for(;null!==d;)b(c,d),d=d.sibling;return null}function d(a,b){for(a=new Map;null!==b;)null!==b.key?a.set(b.key,b):a.set(b.index,b),b=b.sibling;return a}function e(a,b){a=Tg(a,b);a.index=0;a.sibling=null;return a}function f(b,c,d){b.index=d;if(!a)return c;d=b.alternate;if(null!==d)return d=d.index,d<c?(b.flags=2,\nc):d;b.flags=2;return c}function g(b){a&&null===b.alternate&&(b.flags=2);return b}function h(a,b,c,d){if(null===b||6!==b.tag)return b=Ug(c,a.mode,d),b.return=a,b;b=e(b,c);b.return=a;return b}function k(a,b,c,d){if(null!==b&&b.elementType===c.type)return d=e(b,c.props),d.ref=Qg(a,b,c),d.return=a,d;d=Vg(c.type,c.key,c.props,null,a.mode,d);d.ref=Qg(a,b,c);d.return=a;return d}function l(a,b,c,d){if(null===b||4!==b.tag||b.stateNode.containerInfo!==c.containerInfo||b.stateNode.implementation!==c.implementation)return b=\nWg(c,a.mode,d),b.return=a,b;b=e(b,c.children||[]);b.return=a;return b}function n(a,b,c,d,f){if(null===b||7!==b.tag)return b=Xg(c,a.mode,d,f),b.return=a,b;b=e(b,c);b.return=a;return b}function A(a,b,c){if(\"string\"===typeof b||\"number\"===typeof b)return b=Ug(\"\"+b,a.mode,c),b.return=a,b;if(\"object\"===typeof b&&null!==b){switch(b.$$typeof){case sa:return c=Vg(b.type,b.key,b.props,null,a.mode,c),c.ref=Qg(a,null,b),c.return=a,c;case ta:return b=Wg(b,a.mode,c),b.return=a,b}if(Pg(b)||La(b))return b=Xg(b,\na.mode,c,null),b.return=a,b;Rg(a,b)}return null}function p(a,b,c,d){var e=null!==b?b.key:null;if(\"string\"===typeof c||\"number\"===typeof c)return null!==e?null:h(a,b,\"\"+c,d);if(\"object\"===typeof c&&null!==c){switch(c.$$typeof){case sa:return c.key===e?c.type===ua?n(a,b,c.props.children,d,e):k(a,b,c,d):null;case ta:return c.key===e?l(a,b,c,d):null}if(Pg(c)||La(c))return null!==e?null:n(a,b,c,d,null);Rg(a,c)}return null}function C(a,b,c,d,e){if(\"string\"===typeof d||\"number\"===typeof d)return a=a.get(c)||\nnull,h(b,a,\"\"+d,e);if(\"object\"===typeof d&&null!==d){switch(d.$$typeof){case sa:return a=a.get(null===d.key?c:d.key)||null,d.type===ua?n(b,a,d.props.children,e,d.key):k(b,a,d,e);case ta:return a=a.get(null===d.key?c:d.key)||null,l(b,a,d,e)}if(Pg(d)||La(d))return a=a.get(c)||null,n(b,a,d,e,null);Rg(b,d)}return null}function x(e,g,h,k){for(var l=null,t=null,u=g,z=g=0,q=null;null!==u&&z<h.length;z++){u.index>z?(q=u,u=null):q=u.sibling;var n=p(e,u,h[z],k);if(null===n){null===u&&(u=q);break}a&&u&&null===\nn.alternate&&b(e,u);g=f(n,g,z);null===t?l=n:t.sibling=n;t=n;u=q}if(z===h.length)return c(e,u),l;if(null===u){for(;z<h.length;z++)u=A(e,h[z],k),null!==u&&(g=f(u,g,z),null===t?l=u:t.sibling=u,t=u);return l}for(u=d(e,u);z<h.length;z++)q=C(u,e,z,h[z],k),null!==q&&(a&&null!==q.alternate&&u.delete(null===q.key?z:q.key),g=f(q,g,z),null===t?l=q:t.sibling=q,t=q);a&&u.forEach(function(a){return b(e,a)});return l}function w(e,g,h,k){var l=La(h);if(\"function\"!==typeof l)throw Error(y(150));h=l.call(h);if(null==\nh)throw Error(y(151));for(var t=l=null,u=g,z=g=0,q=null,n=h.next();null!==u&&!n.done;z++,n=h.next()){u.index>z?(q=u,u=null):q=u.sibling;var w=p(e,u,n.value,k);if(null===w){null===u&&(u=q);break}a&&u&&null===w.alternate&&b(e,u);g=f(w,g,z);null===t?l=w:t.sibling=w;t=w;u=q}if(n.done)return c(e,u),l;if(null===u){for(;!n.done;z++,n=h.next())n=A(e,n.value,k),null!==n&&(g=f(n,g,z),null===t?l=n:t.sibling=n,t=n);return l}for(u=d(e,u);!n.done;z++,n=h.next())n=C(u,e,z,n.value,k),null!==n&&(a&&null!==n.alternate&&\nu.delete(null===n.key?z:n.key),g=f(n,g,z),null===t?l=n:t.sibling=n,t=n);a&&u.forEach(function(a){return b(e,a)});return l}return function(a,d,f,h){var k=\"object\"===typeof f&&null!==f&&f.type===ua&&null===f.key;k&&(f=f.props.children);var l=\"object\"===typeof f&&null!==f;if(l)switch(f.$$typeof){case sa:a:{l=f.key;for(k=d;null!==k;){if(k.key===l){switch(k.tag){case 7:if(f.type===ua){c(a,k.sibling);d=e(k,f.props.children);d.return=a;a=d;break a}break;default:if(k.elementType===f.type){c(a,k.sibling);\nd=e(k,f.props);d.ref=Qg(a,k,f);d.return=a;a=d;break a}}c(a,k);break}else b(a,k);k=k.sibling}f.type===ua?(d=Xg(f.props.children,a.mode,h,f.key),d.return=a,a=d):(h=Vg(f.type,f.key,f.props,null,a.mode,h),h.ref=Qg(a,d,f),h.return=a,a=h)}return g(a);case ta:a:{for(k=f.key;null!==d;){if(d.key===k)if(4===d.tag&&d.stateNode.containerInfo===f.containerInfo&&d.stateNode.implementation===f.implementation){c(a,d.sibling);d=e(d,f.children||[]);d.return=a;a=d;break a}else{c(a,d);break}else b(a,d);d=d.sibling}d=\nWg(f,a.mode,h);d.return=a;a=d}return g(a)}if(\"string\"===typeof f||\"number\"===typeof f)return f=\"\"+f,null!==d&&6===d.tag?(c(a,d.sibling),d=e(d,f),d.return=a,a=d):(c(a,d),d=Ug(f,a.mode,h),d.return=a,a=d),g(a);if(Pg(f))return x(a,d,f,h);if(La(f))return w(a,d,f,h);l&&Rg(a,f);if(\"undefined\"===typeof f&&!k)switch(a.tag){case 1:case 22:case 0:case 11:case 15:throw Error(y(152,Ra(a.type)||\"Component\"));}return c(a,d)}}var Yg=Sg(!0),Zg=Sg(!1),$g={},ah=Bf($g),bh=Bf($g),ch=Bf($g);\nfunction dh(a){if(a===$g)throw Error(y(174));return a}function eh(a,b){I(ch,b);I(bh,a);I(ah,$g);a=b.nodeType;switch(a){case 9:case 11:b=(b=b.documentElement)?b.namespaceURI:mb(null,\"\");break;default:a=8===a?b.parentNode:b,b=a.namespaceURI||null,a=a.tagName,b=mb(b,a)}H(ah);I(ah,b)}function fh(){H(ah);H(bh);H(ch)}function gh(a){dh(ch.current);var b=dh(ah.current);var c=mb(b,a.type);b!==c&&(I(bh,a),I(ah,c))}function hh(a){bh.current===a&&(H(ah),H(bh))}var P=Bf(0);\nfunction ih(a){for(var b=a;null!==b;){if(13===b.tag){var c=b.memoizedState;if(null!==c&&(c=c.dehydrated,null===c||\"$?\"===c.data||\"$!\"===c.data))return b}else if(19===b.tag&&void 0!==b.memoizedProps.revealOrder){if(0!==(b.flags&64))return b}else if(null!==b.child){b.child.return=b;b=b.child;continue}if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}return null}var jh=null,kh=null,lh=!1;\nfunction mh(a,b){var c=nh(5,null,null,0);c.elementType=\"DELETED\";c.type=\"DELETED\";c.stateNode=b;c.return=a;c.flags=8;null!==a.lastEffect?(a.lastEffect.nextEffect=c,a.lastEffect=c):a.firstEffect=a.lastEffect=c}function oh(a,b){switch(a.tag){case 5:var c=a.type;b=1!==b.nodeType||c.toLowerCase()!==b.nodeName.toLowerCase()?null:b;return null!==b?(a.stateNode=b,!0):!1;case 6:return b=\"\"===a.pendingProps||3!==b.nodeType?null:b,null!==b?(a.stateNode=b,!0):!1;case 13:return!1;default:return!1}}\nfunction ph(a){if(lh){var b=kh;if(b){var c=b;if(!oh(a,b)){b=rf(c.nextSibling);if(!b||!oh(a,b)){a.flags=a.flags&-1025|2;lh=!1;jh=a;return}mh(jh,c)}jh=a;kh=rf(b.firstChild)}else a.flags=a.flags&-1025|2,lh=!1,jh=a}}function qh(a){for(a=a.return;null!==a&&5!==a.tag&&3!==a.tag&&13!==a.tag;)a=a.return;jh=a}\nfunction rh(a){if(a!==jh)return!1;if(!lh)return qh(a),lh=!0,!1;var b=a.type;if(5!==a.tag||\"head\"!==b&&\"body\"!==b&&!nf(b,a.memoizedProps))for(b=kh;b;)mh(a,b),b=rf(b.nextSibling);qh(a);if(13===a.tag){a=a.memoizedState;a=null!==a?a.dehydrated:null;if(!a)throw Error(y(317));a:{a=a.nextSibling;for(b=0;a;){if(8===a.nodeType){var c=a.data;if(\"/$\"===c){if(0===b){kh=rf(a.nextSibling);break a}b--}else\"$\"!==c&&\"$!\"!==c&&\"$?\"!==c||b++}a=a.nextSibling}kh=null}}else kh=jh?rf(a.stateNode.nextSibling):null;return!0}\nfunction sh(){kh=jh=null;lh=!1}var th=[];function uh(){for(var a=0;a<th.length;a++)th[a]._workInProgressVersionPrimary=null;th.length=0}var vh=ra.ReactCurrentDispatcher,wh=ra.ReactCurrentBatchConfig,xh=0,R=null,S=null,T=null,yh=!1,zh=!1;function Ah(){throw Error(y(321));}function Bh(a,b){if(null===b)return!1;for(var c=0;c<b.length&&c<a.length;c++)if(!He(a[c],b[c]))return!1;return!0}\nfunction Ch(a,b,c,d,e,f){xh=f;R=b;b.memoizedState=null;b.updateQueue=null;b.lanes=0;vh.current=null===a||null===a.memoizedState?Dh:Eh;a=c(d,e);if(zh){f=0;do{zh=!1;if(!(25>f))throw Error(y(301));f+=1;T=S=null;b.updateQueue=null;vh.current=Fh;a=c(d,e)}while(zh)}vh.current=Gh;b=null!==S&&null!==S.next;xh=0;T=S=R=null;yh=!1;if(b)throw Error(y(300));return a}function Hh(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};null===T?R.memoizedState=T=a:T=T.next=a;return T}\nfunction Ih(){if(null===S){var a=R.alternate;a=null!==a?a.memoizedState:null}else a=S.next;var b=null===T?R.memoizedState:T.next;if(null!==b)T=b,S=a;else{if(null===a)throw Error(y(310));S=a;a={memoizedState:S.memoizedState,baseState:S.baseState,baseQueue:S.baseQueue,queue:S.queue,next:null};null===T?R.memoizedState=T=a:T=T.next=a}return T}function Jh(a,b){return\"function\"===typeof b?b(a):b}\nfunction Kh(a){var b=Ih(),c=b.queue;if(null===c)throw Error(y(311));c.lastRenderedReducer=a;var d=S,e=d.baseQueue,f=c.pending;if(null!==f){if(null!==e){var g=e.next;e.next=f.next;f.next=g}d.baseQueue=e=f;c.pending=null}if(null!==e){e=e.next;d=d.baseState;var h=g=f=null,k=e;do{var l=k.lane;if((xh&l)===l)null!==h&&(h=h.next={lane:0,action:k.action,eagerReducer:k.eagerReducer,eagerState:k.eagerState,next:null}),d=k.eagerReducer===a?k.eagerState:a(d,k.action);else{var n={lane:l,action:k.action,eagerReducer:k.eagerReducer,\neagerState:k.eagerState,next:null};null===h?(g=h=n,f=d):h=h.next=n;R.lanes|=l;Dg|=l}k=k.next}while(null!==k&&k!==e);null===h?f=d:h.next=g;He(d,b.memoizedState)||(ug=!0);b.memoizedState=d;b.baseState=f;b.baseQueue=h;c.lastRenderedState=d}return[b.memoizedState,c.dispatch]}\nfunction Lh(a){var b=Ih(),c=b.queue;if(null===c)throw Error(y(311));c.lastRenderedReducer=a;var d=c.dispatch,e=c.pending,f=b.memoizedState;if(null!==e){c.pending=null;var g=e=e.next;do f=a(f,g.action),g=g.next;while(g!==e);He(f,b.memoizedState)||(ug=!0);b.memoizedState=f;null===b.baseQueue&&(b.baseState=f);c.lastRenderedState=f}return[f,d]}\nfunction Mh(a,b,c){var d=b._getVersion;d=d(b._source);var e=b._workInProgressVersionPrimary;if(null!==e)a=e===d;else if(a=a.mutableReadLanes,a=(xh&a)===a)b._workInProgressVersionPrimary=d,th.push(b);if(a)return c(b._source);th.push(b);throw Error(y(350));}\nfunction Nh(a,b,c,d){var e=U;if(null===e)throw Error(y(349));var f=b._getVersion,g=f(b._source),h=vh.current,k=h.useState(function(){return Mh(e,b,c)}),l=k[1],n=k[0];k=T;var A=a.memoizedState,p=A.refs,C=p.getSnapshot,x=A.source;A=A.subscribe;var w=R;a.memoizedState={refs:p,source:b,subscribe:d};h.useEffect(function(){p.getSnapshot=c;p.setSnapshot=l;var a=f(b._source);if(!He(g,a)){a=c(b._source);He(n,a)||(l(a),a=Ig(w),e.mutableReadLanes|=a&e.pendingLanes);a=e.mutableReadLanes;e.entangledLanes|=a;for(var d=\ne.entanglements,h=a;0<h;){var k=31-Vc(h),v=1<<k;d[k]|=a;h&=~v}}},[c,b,d]);h.useEffect(function(){return d(b._source,function(){var a=p.getSnapshot,c=p.setSnapshot;try{c(a(b._source));var d=Ig(w);e.mutableReadLanes|=d&e.pendingLanes}catch(q){c(function(){throw q;})}})},[b,d]);He(C,c)&&He(x,b)&&He(A,d)||(a={pending:null,dispatch:null,lastRenderedReducer:Jh,lastRenderedState:n},a.dispatch=l=Oh.bind(null,R,a),k.queue=a,k.baseQueue=null,n=Mh(e,b,c),k.memoizedState=k.baseState=n);return n}\nfunction Ph(a,b,c){var d=Ih();return Nh(d,a,b,c)}function Qh(a){var b=Hh();\"function\"===typeof a&&(a=a());b.memoizedState=b.baseState=a;a=b.queue={pending:null,dispatch:null,lastRenderedReducer:Jh,lastRenderedState:a};a=a.dispatch=Oh.bind(null,R,a);return[b.memoizedState,a]}\nfunction Rh(a,b,c,d){a={tag:a,create:b,destroy:c,deps:d,next:null};b=R.updateQueue;null===b?(b={lastEffect:null},R.updateQueue=b,b.lastEffect=a.next=a):(c=b.lastEffect,null===c?b.lastEffect=a.next=a:(d=c.next,c.next=a,a.next=d,b.lastEffect=a));return a}function Sh(a){var b=Hh();a={current:a};return b.memoizedState=a}function Th(){return Ih().memoizedState}function Uh(a,b,c,d){var e=Hh();R.flags|=a;e.memoizedState=Rh(1|b,c,void 0,void 0===d?null:d)}\nfunction Vh(a,b,c,d){var e=Ih();d=void 0===d?null:d;var f=void 0;if(null!==S){var g=S.memoizedState;f=g.destroy;if(null!==d&&Bh(d,g.deps)){Rh(b,c,f,d);return}}R.flags|=a;e.memoizedState=Rh(1|b,c,f,d)}function Wh(a,b){return Uh(516,4,a,b)}function Xh(a,b){return Vh(516,4,a,b)}function Yh(a,b){return Vh(4,2,a,b)}function Zh(a,b){if(\"function\"===typeof b)return a=a(),b(a),function(){b(null)};if(null!==b&&void 0!==b)return a=a(),b.current=a,function(){b.current=null}}\nfunction $h(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return Vh(4,2,Zh.bind(null,b,a),c)}function ai(){}function bi(a,b){var c=Ih();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&Bh(b,d[1]))return d[0];c.memoizedState=[a,b];return a}function ci(a,b){var c=Ih();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&Bh(b,d[1]))return d[0];a=a();c.memoizedState=[a,b];return a}\nfunction di(a,b){var c=eg();gg(98>c?98:c,function(){a(!0)});gg(97<c?97:c,function(){var c=wh.transition;wh.transition=1;try{a(!1),b()}finally{wh.transition=c}})}\nfunction Oh(a,b,c){var d=Hg(),e=Ig(a),f={lane:e,action:c,eagerReducer:null,eagerState:null,next:null},g=b.pending;null===g?f.next=f:(f.next=g.next,g.next=f);b.pending=f;g=a.alternate;if(a===R||null!==g&&g===R)zh=yh=!0;else{if(0===a.lanes&&(null===g||0===g.lanes)&&(g=b.lastRenderedReducer,null!==g))try{var h=b.lastRenderedState,k=g(h,c);f.eagerReducer=g;f.eagerState=k;if(He(k,h))return}catch(l){}finally{}Jg(a,e,d)}}\nvar Gh={readContext:vg,useCallback:Ah,useContext:Ah,useEffect:Ah,useImperativeHandle:Ah,useLayoutEffect:Ah,useMemo:Ah,useReducer:Ah,useRef:Ah,useState:Ah,useDebugValue:Ah,useDeferredValue:Ah,useTransition:Ah,useMutableSource:Ah,useOpaqueIdentifier:Ah,unstable_isNewReconciler:!1},Dh={readContext:vg,useCallback:function(a,b){Hh().memoizedState=[a,void 0===b?null:b];return a},useContext:vg,useEffect:Wh,useImperativeHandle:function(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return Uh(4,2,Zh.bind(null,\nb,a),c)},useLayoutEffect:function(a,b){return Uh(4,2,a,b)},useMemo:function(a,b){var c=Hh();b=void 0===b?null:b;a=a();c.memoizedState=[a,b];return a},useReducer:function(a,b,c){var d=Hh();b=void 0!==c?c(b):b;d.memoizedState=d.baseState=b;a=d.queue={pending:null,dispatch:null,lastRenderedReducer:a,lastRenderedState:b};a=a.dispatch=Oh.bind(null,R,a);return[d.memoizedState,a]},useRef:Sh,useState:Qh,useDebugValue:ai,useDeferredValue:function(a){var b=Qh(a),c=b[0],d=b[1];Wh(function(){var b=wh.transition;\nwh.transition=1;try{d(a)}finally{wh.transition=b}},[a]);return c},useTransition:function(){var a=Qh(!1),b=a[0];a=di.bind(null,a[1]);Sh(a);return[a,b]},useMutableSource:function(a,b,c){var d=Hh();d.memoizedState={refs:{getSnapshot:b,setSnapshot:null},source:a,subscribe:c};return Nh(d,a,b,c)},useOpaqueIdentifier:function(){if(lh){var a=!1,b=uf(function(){a||(a=!0,c(\"r:\"+(tf++).toString(36)));throw Error(y(355));}),c=Qh(b)[1];0===(R.mode&2)&&(R.flags|=516,Rh(5,function(){c(\"r:\"+(tf++).toString(36))},\nvoid 0,null));return b}b=\"r:\"+(tf++).toString(36);Qh(b);return b},unstable_isNewReconciler:!1},Eh={readContext:vg,useCallback:bi,useContext:vg,useEffect:Xh,useImperativeHandle:$h,useLayoutEffect:Yh,useMemo:ci,useReducer:Kh,useRef:Th,useState:function(){return Kh(Jh)},useDebugValue:ai,useDeferredValue:function(a){var b=Kh(Jh),c=b[0],d=b[1];Xh(function(){var b=wh.transition;wh.transition=1;try{d(a)}finally{wh.transition=b}},[a]);return c},useTransition:function(){var a=Kh(Jh)[0];return[Th().current,\na]},useMutableSource:Ph,useOpaqueIdentifier:function(){return Kh(Jh)[0]},unstable_isNewReconciler:!1},Fh={readContext:vg,useCallback:bi,useContext:vg,useEffect:Xh,useImperativeHandle:$h,useLayoutEffect:Yh,useMemo:ci,useReducer:Lh,useRef:Th,useState:function(){return Lh(Jh)},useDebugValue:ai,useDeferredValue:function(a){var b=Lh(Jh),c=b[0],d=b[1];Xh(function(){var b=wh.transition;wh.transition=1;try{d(a)}finally{wh.transition=b}},[a]);return c},useTransition:function(){var a=Lh(Jh)[0];return[Th().current,\na]},useMutableSource:Ph,useOpaqueIdentifier:function(){return Lh(Jh)[0]},unstable_isNewReconciler:!1},ei=ra.ReactCurrentOwner,ug=!1;function fi(a,b,c,d){b.child=null===a?Zg(b,null,c,d):Yg(b,a.child,c,d)}function gi(a,b,c,d,e){c=c.render;var f=b.ref;tg(b,e);d=Ch(a,b,c,d,f,e);if(null!==a&&!ug)return b.updateQueue=a.updateQueue,b.flags&=-517,a.lanes&=~e,hi(a,b,e);b.flags|=1;fi(a,b,d,e);return b.child}\nfunction ii(a,b,c,d,e,f){if(null===a){var g=c.type;if(\"function\"===typeof g&&!ji(g)&&void 0===g.defaultProps&&null===c.compare&&void 0===c.defaultProps)return b.tag=15,b.type=g,ki(a,b,g,d,e,f);a=Vg(c.type,null,d,b,b.mode,f);a.ref=b.ref;a.return=b;return b.child=a}g=a.child;if(0===(e&f)&&(e=g.memoizedProps,c=c.compare,c=null!==c?c:Je,c(e,d)&&a.ref===b.ref))return hi(a,b,f);b.flags|=1;a=Tg(g,d);a.ref=b.ref;a.return=b;return b.child=a}\nfunction ki(a,b,c,d,e,f){if(null!==a&&Je(a.memoizedProps,d)&&a.ref===b.ref)if(ug=!1,0!==(f&e))0!==(a.flags&16384)&&(ug=!0);else return b.lanes=a.lanes,hi(a,b,f);return li(a,b,c,d,f)}\nfunction mi(a,b,c){var d=b.pendingProps,e=d.children,f=null!==a?a.memoizedState:null;if(\"hidden\"===d.mode||\"unstable-defer-without-hiding\"===d.mode)if(0===(b.mode&4))b.memoizedState={baseLanes:0},ni(b,c);else if(0!==(c&1073741824))b.memoizedState={baseLanes:0},ni(b,null!==f?f.baseLanes:c);else return a=null!==f?f.baseLanes|c:c,b.lanes=b.childLanes=1073741824,b.memoizedState={baseLanes:a},ni(b,a),null;else null!==f?(d=f.baseLanes|c,b.memoizedState=null):d=c,ni(b,d);fi(a,b,e,c);return b.child}\nfunction oi(a,b){var c=b.ref;if(null===a&&null!==c||null!==a&&a.ref!==c)b.flags|=128}function li(a,b,c,d,e){var f=Ff(c)?Df:M.current;f=Ef(b,f);tg(b,e);c=Ch(a,b,c,d,f,e);if(null!==a&&!ug)return b.updateQueue=a.updateQueue,b.flags&=-517,a.lanes&=~e,hi(a,b,e);b.flags|=1;fi(a,b,c,e);return b.child}\nfunction pi(a,b,c,d,e){if(Ff(c)){var f=!0;Jf(b)}else f=!1;tg(b,e);if(null===b.stateNode)null!==a&&(a.alternate=null,b.alternate=null,b.flags|=2),Mg(b,c,d),Og(b,c,d,e),d=!0;else if(null===a){var g=b.stateNode,h=b.memoizedProps;g.props=h;var k=g.context,l=c.contextType;\"object\"===typeof l&&null!==l?l=vg(l):(l=Ff(c)?Df:M.current,l=Ef(b,l));var n=c.getDerivedStateFromProps,A=\"function\"===typeof n||\"function\"===typeof g.getSnapshotBeforeUpdate;A||\"function\"!==typeof g.UNSAFE_componentWillReceiveProps&&\n\"function\"!==typeof g.componentWillReceiveProps||(h!==d||k!==l)&&Ng(b,g,d,l);wg=!1;var p=b.memoizedState;g.state=p;Cg(b,d,g,e);k=b.memoizedState;h!==d||p!==k||N.current||wg?(\"function\"===typeof n&&(Gg(b,c,n,d),k=b.memoizedState),(h=wg||Lg(b,c,h,d,p,k,l))?(A||\"function\"!==typeof g.UNSAFE_componentWillMount&&\"function\"!==typeof g.componentWillMount||(\"function\"===typeof g.componentWillMount&&g.componentWillMount(),\"function\"===typeof g.UNSAFE_componentWillMount&&g.UNSAFE_componentWillMount()),\"function\"===\ntypeof g.componentDidMount&&(b.flags|=4)):(\"function\"===typeof g.componentDidMount&&(b.flags|=4),b.memoizedProps=d,b.memoizedState=k),g.props=d,g.state=k,g.context=l,d=h):(\"function\"===typeof g.componentDidMount&&(b.flags|=4),d=!1)}else{g=b.stateNode;yg(a,b);h=b.memoizedProps;l=b.type===b.elementType?h:lg(b.type,h);g.props=l;A=b.pendingProps;p=g.context;k=c.contextType;\"object\"===typeof k&&null!==k?k=vg(k):(k=Ff(c)?Df:M.current,k=Ef(b,k));var C=c.getDerivedStateFromProps;(n=\"function\"===typeof C||\n\"function\"===typeof g.getSnapshotBeforeUpdate)||\"function\"!==typeof g.UNSAFE_componentWillReceiveProps&&\"function\"!==typeof g.componentWillReceiveProps||(h!==A||p!==k)&&Ng(b,g,d,k);wg=!1;p=b.memoizedState;g.state=p;Cg(b,d,g,e);var x=b.memoizedState;h!==A||p!==x||N.current||wg?(\"function\"===typeof C&&(Gg(b,c,C,d),x=b.memoizedState),(l=wg||Lg(b,c,l,d,p,x,k))?(n||\"function\"!==typeof g.UNSAFE_componentWillUpdate&&\"function\"!==typeof g.componentWillUpdate||(\"function\"===typeof g.componentWillUpdate&&g.componentWillUpdate(d,\nx,k),\"function\"===typeof g.UNSAFE_componentWillUpdate&&g.UNSAFE_componentWillUpdate(d,x,k)),\"function\"===typeof g.componentDidUpdate&&(b.flags|=4),\"function\"===typeof g.getSnapshotBeforeUpdate&&(b.flags|=256)):(\"function\"!==typeof g.componentDidUpdate||h===a.memoizedProps&&p===a.memoizedState||(b.flags|=4),\"function\"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&p===a.memoizedState||(b.flags|=256),b.memoizedProps=d,b.memoizedState=x),g.props=d,g.state=x,g.context=k,d=l):(\"function\"!==typeof g.componentDidUpdate||\nh===a.memoizedProps&&p===a.memoizedState||(b.flags|=4),\"function\"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&p===a.memoizedState||(b.flags|=256),d=!1)}return qi(a,b,c,d,f,e)}\nfunction qi(a,b,c,d,e,f){oi(a,b);var g=0!==(b.flags&64);if(!d&&!g)return e&&Kf(b,c,!1),hi(a,b,f);d=b.stateNode;ei.current=b;var h=g&&\"function\"!==typeof c.getDerivedStateFromError?null:d.render();b.flags|=1;null!==a&&g?(b.child=Yg(b,a.child,null,f),b.child=Yg(b,null,h,f)):fi(a,b,h,f);b.memoizedState=d.state;e&&Kf(b,c,!0);return b.child}function ri(a){var b=a.stateNode;b.pendingContext?Hf(a,b.pendingContext,b.pendingContext!==b.context):b.context&&Hf(a,b.context,!1);eh(a,b.containerInfo)}\nvar si={dehydrated:null,retryLane:0};\nfunction ti(a,b,c){var d=b.pendingProps,e=P.current,f=!1,g;(g=0!==(b.flags&64))||(g=null!==a&&null===a.memoizedState?!1:0!==(e&2));g?(f=!0,b.flags&=-65):null!==a&&null===a.memoizedState||void 0===d.fallback||!0===d.unstable_avoidThisFallback||(e|=1);I(P,e&1);if(null===a){void 0!==d.fallback&&ph(b);a=d.children;e=d.fallback;if(f)return a=ui(b,a,e,c),b.child.memoizedState={baseLanes:c},b.memoizedState=si,a;if(\"number\"===typeof d.unstable_expectedLoadTime)return a=ui(b,a,e,c),b.child.memoizedState={baseLanes:c},\nb.memoizedState=si,b.lanes=33554432,a;c=vi({mode:\"visible\",children:a},b.mode,c,null);c.return=b;return b.child=c}if(null!==a.memoizedState){if(f)return d=wi(a,b,d.children,d.fallback,c),f=b.child,e=a.child.memoizedState,f.memoizedState=null===e?{baseLanes:c}:{baseLanes:e.baseLanes|c},f.childLanes=a.childLanes&~c,b.memoizedState=si,d;c=xi(a,b,d.children,c);b.memoizedState=null;return c}if(f)return d=wi(a,b,d.children,d.fallback,c),f=b.child,e=a.child.memoizedState,f.memoizedState=null===e?{baseLanes:c}:\n{baseLanes:e.baseLanes|c},f.childLanes=a.childLanes&~c,b.memoizedState=si,d;c=xi(a,b,d.children,c);b.memoizedState=null;return c}function ui(a,b,c,d){var e=a.mode,f=a.child;b={mode:\"hidden\",children:b};0===(e&2)&&null!==f?(f.childLanes=0,f.pendingProps=b):f=vi(b,e,0,null);c=Xg(c,e,d,null);f.return=a;c.return=a;f.sibling=c;a.child=f;return c}\nfunction xi(a,b,c,d){var e=a.child;a=e.sibling;c=Tg(e,{mode:\"visible\",children:c});0===(b.mode&2)&&(c.lanes=d);c.return=b;c.sibling=null;null!==a&&(a.nextEffect=null,a.flags=8,b.firstEffect=b.lastEffect=a);return b.child=c}\nfunction wi(a,b,c,d,e){var f=b.mode,g=a.child;a=g.sibling;var h={mode:\"hidden\",children:c};0===(f&2)&&b.child!==g?(c=b.child,c.childLanes=0,c.pendingProps=h,g=c.lastEffect,null!==g?(b.firstEffect=c.firstEffect,b.lastEffect=g,g.nextEffect=null):b.firstEffect=b.lastEffect=null):c=Tg(g,h);null!==a?d=Tg(a,d):(d=Xg(d,f,e,null),d.flags|=2);d.return=b;c.return=b;c.sibling=d;b.child=c;return d}function yi(a,b){a.lanes|=b;var c=a.alternate;null!==c&&(c.lanes|=b);sg(a.return,b)}\nfunction zi(a,b,c,d,e,f){var g=a.memoizedState;null===g?a.memoizedState={isBackwards:b,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:e,lastEffect:f}:(g.isBackwards=b,g.rendering=null,g.renderingStartTime=0,g.last=d,g.tail=c,g.tailMode=e,g.lastEffect=f)}\nfunction Ai(a,b,c){var d=b.pendingProps,e=d.revealOrder,f=d.tail;fi(a,b,d.children,c);d=P.current;if(0!==(d&2))d=d&1|2,b.flags|=64;else{if(null!==a&&0!==(a.flags&64))a:for(a=b.child;null!==a;){if(13===a.tag)null!==a.memoizedState&&yi(a,c);else if(19===a.tag)yi(a,c);else if(null!==a.child){a.child.return=a;a=a.child;continue}if(a===b)break a;for(;null===a.sibling;){if(null===a.return||a.return===b)break a;a=a.return}a.sibling.return=a.return;a=a.sibling}d&=1}I(P,d);if(0===(b.mode&2))b.memoizedState=\nnull;else switch(e){case \"forwards\":c=b.child;for(e=null;null!==c;)a=c.alternate,null!==a&&null===ih(a)&&(e=c),c=c.sibling;c=e;null===c?(e=b.child,b.child=null):(e=c.sibling,c.sibling=null);zi(b,!1,e,c,f,b.lastEffect);break;case \"backwards\":c=null;e=b.child;for(b.child=null;null!==e;){a=e.alternate;if(null!==a&&null===ih(a)){b.child=e;break}a=e.sibling;e.sibling=c;c=e;e=a}zi(b,!0,c,null,f,b.lastEffect);break;case \"together\":zi(b,!1,null,null,void 0,b.lastEffect);break;default:b.memoizedState=null}return b.child}\nfunction hi(a,b,c){null!==a&&(b.dependencies=a.dependencies);Dg|=b.lanes;if(0!==(c&b.childLanes)){if(null!==a&&b.child!==a.child)throw Error(y(153));if(null!==b.child){a=b.child;c=Tg(a,a.pendingProps);b.child=c;for(c.return=b;null!==a.sibling;)a=a.sibling,c=c.sibling=Tg(a,a.pendingProps),c.return=b;c.sibling=null}return b.child}return null}var Bi,Ci,Di,Ei;\nBi=function(a,b){for(var c=b.child;null!==c;){if(5===c.tag||6===c.tag)a.appendChild(c.stateNode);else if(4!==c.tag&&null!==c.child){c.child.return=c;c=c.child;continue}if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return}c.sibling.return=c.return;c=c.sibling}};Ci=function(){};\nDi=function(a,b,c,d){var e=a.memoizedProps;if(e!==d){a=b.stateNode;dh(ah.current);var f=null;switch(c){case \"input\":e=Ya(a,e);d=Ya(a,d);f=[];break;case \"option\":e=eb(a,e);d=eb(a,d);f=[];break;case \"select\":e=m({},e,{value:void 0});d=m({},d,{value:void 0});f=[];break;case \"textarea\":e=gb(a,e);d=gb(a,d);f=[];break;default:\"function\"!==typeof e.onClick&&\"function\"===typeof d.onClick&&(a.onclick=jf)}vb(c,d);var g;c=null;for(l in e)if(!d.hasOwnProperty(l)&&e.hasOwnProperty(l)&&null!=e[l])if(\"style\"===\nl){var h=e[l];for(g in h)h.hasOwnProperty(g)&&(c||(c={}),c[g]=\"\")}else\"dangerouslySetInnerHTML\"!==l&&\"children\"!==l&&\"suppressContentEditableWarning\"!==l&&\"suppressHydrationWarning\"!==l&&\"autoFocus\"!==l&&(ca.hasOwnProperty(l)?f||(f=[]):(f=f||[]).push(l,null));for(l in d){var k=d[l];h=null!=e?e[l]:void 0;if(d.hasOwnProperty(l)&&k!==h&&(null!=k||null!=h))if(\"style\"===l)if(h){for(g in h)!h.hasOwnProperty(g)||k&&k.hasOwnProperty(g)||(c||(c={}),c[g]=\"\");for(g in k)k.hasOwnProperty(g)&&h[g]!==k[g]&&(c||\n(c={}),c[g]=k[g])}else c||(f||(f=[]),f.push(l,c)),c=k;else\"dangerouslySetInnerHTML\"===l?(k=k?k.__html:void 0,h=h?h.__html:void 0,null!=k&&h!==k&&(f=f||[]).push(l,k)):\"children\"===l?\"string\"!==typeof k&&\"number\"!==typeof k||(f=f||[]).push(l,\"\"+k):\"suppressContentEditableWarning\"!==l&&\"suppressHydrationWarning\"!==l&&(ca.hasOwnProperty(l)?(null!=k&&\"onScroll\"===l&&G(\"scroll\",a),f||h===k||(f=[])):\"object\"===typeof k&&null!==k&&k.$$typeof===Ga?k.toString():(f=f||[]).push(l,k))}c&&(f=f||[]).push(\"style\",\nc);var l=f;if(b.updateQueue=l)b.flags|=4}};Ei=function(a,b,c,d){c!==d&&(b.flags|=4)};function Fi(a,b){if(!lh)switch(a.tailMode){case \"hidden\":b=a.tail;for(var c=null;null!==b;)null!==b.alternate&&(c=b),b=b.sibling;null===c?a.tail=null:c.sibling=null;break;case \"collapsed\":c=a.tail;for(var d=null;null!==c;)null!==c.alternate&&(d=c),c=c.sibling;null===d?b||null===a.tail?a.tail=null:a.tail.sibling=null:d.sibling=null}}\nfunction Gi(a,b,c){var d=b.pendingProps;switch(b.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Ff(b.type)&&Gf(),null;case 3:fh();H(N);H(M);uh();d=b.stateNode;d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null);if(null===a||null===a.child)rh(b)?b.flags|=4:d.hydrate||(b.flags|=256);Ci(b);return null;case 5:hh(b);var e=dh(ch.current);c=b.type;if(null!==a&&null!=b.stateNode)Di(a,b,c,d,e),a.ref!==b.ref&&(b.flags|=128);else{if(!d){if(null===\nb.stateNode)throw Error(y(166));return null}a=dh(ah.current);if(rh(b)){d=b.stateNode;c=b.type;var f=b.memoizedProps;d[wf]=b;d[xf]=f;switch(c){case \"dialog\":G(\"cancel\",d);G(\"close\",d);break;case \"iframe\":case \"object\":case \"embed\":G(\"load\",d);break;case \"video\":case \"audio\":for(a=0;a<Xe.length;a++)G(Xe[a],d);break;case \"source\":G(\"error\",d);break;case \"img\":case \"image\":case \"link\":G(\"error\",d);G(\"load\",d);break;case \"details\":G(\"toggle\",d);break;case \"input\":Za(d,f);G(\"invalid\",d);break;case \"select\":d._wrapperState=\n{wasMultiple:!!f.multiple};G(\"invalid\",d);break;case \"textarea\":hb(d,f),G(\"invalid\",d)}vb(c,f);a=null;for(var g in f)f.hasOwnProperty(g)&&(e=f[g],\"children\"===g?\"string\"===typeof e?d.textContent!==e&&(a=[\"children\",e]):\"number\"===typeof e&&d.textContent!==\"\"+e&&(a=[\"children\",\"\"+e]):ca.hasOwnProperty(g)&&null!=e&&\"onScroll\"===g&&G(\"scroll\",d));switch(c){case \"input\":Va(d);cb(d,f,!0);break;case \"textarea\":Va(d);jb(d);break;case \"select\":case \"option\":break;default:\"function\"===typeof f.onClick&&(d.onclick=\njf)}d=a;b.updateQueue=d;null!==d&&(b.flags|=4)}else{g=9===e.nodeType?e:e.ownerDocument;a===kb.html&&(a=lb(c));a===kb.html?\"script\"===c?(a=g.createElement(\"div\"),a.innerHTML=\"<script>\\x3c/script>\",a=a.removeChild(a.firstChild)):\"string\"===typeof d.is?a=g.createElement(c,{is:d.is}):(a=g.createElement(c),\"select\"===c&&(g=a,d.multiple?g.multiple=!0:d.size&&(g.size=d.size))):a=g.createElementNS(a,c);a[wf]=b;a[xf]=d;Bi(a,b,!1,!1);b.stateNode=a;g=wb(c,d);switch(c){case \"dialog\":G(\"cancel\",a);G(\"close\",a);\ne=d;break;case \"iframe\":case \"object\":case \"embed\":G(\"load\",a);e=d;break;case \"video\":case \"audio\":for(e=0;e<Xe.length;e++)G(Xe[e],a);e=d;break;case \"source\":G(\"error\",a);e=d;break;case \"img\":case \"image\":case \"link\":G(\"error\",a);G(\"load\",a);e=d;break;case \"details\":G(\"toggle\",a);e=d;break;case \"input\":Za(a,d);e=Ya(a,d);G(\"invalid\",a);break;case \"option\":e=eb(a,d);break;case \"select\":a._wrapperState={wasMultiple:!!d.multiple};e=m({},d,{value:void 0});G(\"invalid\",a);break;case \"textarea\":hb(a,d);e=\ngb(a,d);G(\"invalid\",a);break;default:e=d}vb(c,e);var h=e;for(f in h)if(h.hasOwnProperty(f)){var k=h[f];\"style\"===f?tb(a,k):\"dangerouslySetInnerHTML\"===f?(k=k?k.__html:void 0,null!=k&&ob(a,k)):\"children\"===f?\"string\"===typeof k?(\"textarea\"!==c||\"\"!==k)&&pb(a,k):\"number\"===typeof k&&pb(a,\"\"+k):\"suppressContentEditableWarning\"!==f&&\"suppressHydrationWarning\"!==f&&\"autoFocus\"!==f&&(ca.hasOwnProperty(f)?null!=k&&\"onScroll\"===f&&G(\"scroll\",a):null!=k&&qa(a,f,k,g))}switch(c){case \"input\":Va(a);cb(a,d,!1);\nbreak;case \"textarea\":Va(a);jb(a);break;case \"option\":null!=d.value&&a.setAttribute(\"value\",\"\"+Sa(d.value));break;case \"select\":a.multiple=!!d.multiple;f=d.value;null!=f?fb(a,!!d.multiple,f,!1):null!=d.defaultValue&&fb(a,!!d.multiple,d.defaultValue,!0);break;default:\"function\"===typeof e.onClick&&(a.onclick=jf)}mf(c,d)&&(b.flags|=4)}null!==b.ref&&(b.flags|=128)}return null;case 6:if(a&&null!=b.stateNode)Ei(a,b,a.memoizedProps,d);else{if(\"string\"!==typeof d&&null===b.stateNode)throw Error(y(166));\nc=dh(ch.current);dh(ah.current);rh(b)?(d=b.stateNode,c=b.memoizedProps,d[wf]=b,d.nodeValue!==c&&(b.flags|=4)):(d=(9===c.nodeType?c:c.ownerDocument).createTextNode(d),d[wf]=b,b.stateNode=d)}return null;case 13:H(P);d=b.memoizedState;if(0!==(b.flags&64))return b.lanes=c,b;d=null!==d;c=!1;null===a?void 0!==b.memoizedProps.fallback&&rh(b):c=null!==a.memoizedState;if(d&&!c&&0!==(b.mode&2))if(null===a&&!0!==b.memoizedProps.unstable_avoidThisFallback||0!==(P.current&1))0===V&&(V=3);else{if(0===V||3===V)V=\n4;null===U||0===(Dg&134217727)&&0===(Hi&134217727)||Ii(U,W)}if(d||c)b.flags|=4;return null;case 4:return fh(),Ci(b),null===a&&cf(b.stateNode.containerInfo),null;case 10:return rg(b),null;case 17:return Ff(b.type)&&Gf(),null;case 19:H(P);d=b.memoizedState;if(null===d)return null;f=0!==(b.flags&64);g=d.rendering;if(null===g)if(f)Fi(d,!1);else{if(0!==V||null!==a&&0!==(a.flags&64))for(a=b.child;null!==a;){g=ih(a);if(null!==g){b.flags|=64;Fi(d,!1);f=g.updateQueue;null!==f&&(b.updateQueue=f,b.flags|=4);\nnull===d.lastEffect&&(b.firstEffect=null);b.lastEffect=d.lastEffect;d=c;for(c=b.child;null!==c;)f=c,a=d,f.flags&=2,f.nextEffect=null,f.firstEffect=null,f.lastEffect=null,g=f.alternate,null===g?(f.childLanes=0,f.lanes=a,f.child=null,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=g.childLanes,f.lanes=g.lanes,f.child=g.child,f.memoizedProps=g.memoizedProps,f.memoizedState=g.memoizedState,f.updateQueue=g.updateQueue,f.type=g.type,a=g.dependencies,\nf.dependencies=null===a?null:{lanes:a.lanes,firstContext:a.firstContext}),c=c.sibling;I(P,P.current&1|2);return b.child}a=a.sibling}null!==d.tail&&O()>Ji&&(b.flags|=64,f=!0,Fi(d,!1),b.lanes=33554432)}else{if(!f)if(a=ih(g),null!==a){if(b.flags|=64,f=!0,c=a.updateQueue,null!==c&&(b.updateQueue=c,b.flags|=4),Fi(d,!0),null===d.tail&&\"hidden\"===d.tailMode&&!g.alternate&&!lh)return b=b.lastEffect=d.lastEffect,null!==b&&(b.nextEffect=null),null}else 2*O()-d.renderingStartTime>Ji&&1073741824!==c&&(b.flags|=\n64,f=!0,Fi(d,!1),b.lanes=33554432);d.isBackwards?(g.sibling=b.child,b.child=g):(c=d.last,null!==c?c.sibling=g:b.child=g,d.last=g)}return null!==d.tail?(c=d.tail,d.rendering=c,d.tail=c.sibling,d.lastEffect=b.lastEffect,d.renderingStartTime=O(),c.sibling=null,b=P.current,I(P,f?b&1|2:b&1),c):null;case 23:case 24:return Ki(),null!==a&&null!==a.memoizedState!==(null!==b.memoizedState)&&\"unstable-defer-without-hiding\"!==d.mode&&(b.flags|=4),null}throw Error(y(156,b.tag));}\nfunction Li(a){switch(a.tag){case 1:Ff(a.type)&&Gf();var b=a.flags;return b&4096?(a.flags=b&-4097|64,a):null;case 3:fh();H(N);H(M);uh();b=a.flags;if(0!==(b&64))throw Error(y(285));a.flags=b&-4097|64;return a;case 5:return hh(a),null;case 13:return H(P),b=a.flags,b&4096?(a.flags=b&-4097|64,a):null;case 19:return H(P),null;case 4:return fh(),null;case 10:return rg(a),null;case 23:case 24:return Ki(),null;default:return null}}\nfunction Mi(a,b){try{var c=\"\",d=b;do c+=Qa(d),d=d.return;while(d);var e=c}catch(f){e=\"\\nError generating stack: \"+f.message+\"\\n\"+f.stack}return{value:a,source:b,stack:e}}function Ni(a,b){try{console.error(b.value)}catch(c){setTimeout(function(){throw c;})}}var Oi=\"function\"===typeof WeakMap?WeakMap:Map;function Pi(a,b,c){c=zg(-1,c);c.tag=3;c.payload={element:null};var d=b.value;c.callback=function(){Qi||(Qi=!0,Ri=d);Ni(a,b)};return c}\nfunction Si(a,b,c){c=zg(-1,c);c.tag=3;var d=a.type.getDerivedStateFromError;if(\"function\"===typeof d){var e=b.value;c.payload=function(){Ni(a,b);return d(e)}}var f=a.stateNode;null!==f&&\"function\"===typeof f.componentDidCatch&&(c.callback=function(){\"function\"!==typeof d&&(null===Ti?Ti=new Set([this]):Ti.add(this),Ni(a,b));var c=b.stack;this.componentDidCatch(b.value,{componentStack:null!==c?c:\"\"})});return c}var Ui=\"function\"===typeof WeakSet?WeakSet:Set;\nfunction Vi(a){var b=a.ref;if(null!==b)if(\"function\"===typeof b)try{b(null)}catch(c){Wi(a,c)}else b.current=null}function Xi(a,b){switch(b.tag){case 0:case 11:case 15:case 22:return;case 1:if(b.flags&256&&null!==a){var c=a.memoizedProps,d=a.memoizedState;a=b.stateNode;b=a.getSnapshotBeforeUpdate(b.elementType===b.type?c:lg(b.type,c),d);a.__reactInternalSnapshotBeforeUpdate=b}return;case 3:b.flags&256&&qf(b.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(y(163));}\nfunction Yi(a,b,c){switch(c.tag){case 0:case 11:case 15:case 22:b=c.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){a=b=b.next;do{if(3===(a.tag&3)){var d=a.create;a.destroy=d()}a=a.next}while(a!==b)}b=c.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){a=b=b.next;do{var e=a;d=e.next;e=e.tag;0!==(e&4)&&0!==(e&1)&&(Zi(c,a),$i(c,a));a=d}while(a!==b)}return;case 1:a=c.stateNode;c.flags&4&&(null===b?a.componentDidMount():(d=c.elementType===c.type?b.memoizedProps:lg(c.type,b.memoizedProps),a.componentDidUpdate(d,\nb.memoizedState,a.__reactInternalSnapshotBeforeUpdate)));b=c.updateQueue;null!==b&&Eg(c,b,a);return;case 3:b=c.updateQueue;if(null!==b){a=null;if(null!==c.child)switch(c.child.tag){case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}Eg(c,b,a)}return;case 5:a=c.stateNode;null===b&&c.flags&4&&mf(c.type,c.memoizedProps)&&a.focus();return;case 6:return;case 4:return;case 12:return;case 13:null===c.memoizedState&&(c=c.alternate,null!==c&&(c=c.memoizedState,null!==c&&(c=c.dehydrated,null!==c&&Cc(c))));\nreturn;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(y(163));}\nfunction aj(a,b){for(var c=a;;){if(5===c.tag){var d=c.stateNode;if(b)d=d.style,\"function\"===typeof d.setProperty?d.setProperty(\"display\",\"none\",\"important\"):d.display=\"none\";else{d=c.stateNode;var e=c.memoizedProps.style;e=void 0!==e&&null!==e&&e.hasOwnProperty(\"display\")?e.display:null;d.style.display=sb(\"display\",e)}}else if(6===c.tag)c.stateNode.nodeValue=b?\"\":c.memoizedProps;else if((23!==c.tag&&24!==c.tag||null===c.memoizedState||c===a)&&null!==c.child){c.child.return=c;c=c.child;continue}if(c===\na)break;for(;null===c.sibling;){if(null===c.return||c.return===a)return;c=c.return}c.sibling.return=c.return;c=c.sibling}}\nfunction bj(a,b){if(Mf&&\"function\"===typeof Mf.onCommitFiberUnmount)try{Mf.onCommitFiberUnmount(Lf,b)}catch(f){}switch(b.tag){case 0:case 11:case 14:case 15:case 22:a=b.updateQueue;if(null!==a&&(a=a.lastEffect,null!==a)){var c=a=a.next;do{var d=c,e=d.destroy;d=d.tag;if(void 0!==e)if(0!==(d&4))Zi(b,c);else{d=b;try{e()}catch(f){Wi(d,f)}}c=c.next}while(c!==a)}break;case 1:Vi(b);a=b.stateNode;if(\"function\"===typeof a.componentWillUnmount)try{a.props=b.memoizedProps,a.state=b.memoizedState,a.componentWillUnmount()}catch(f){Wi(b,\nf)}break;case 5:Vi(b);break;case 4:cj(a,b)}}function dj(a){a.alternate=null;a.child=null;a.dependencies=null;a.firstEffect=null;a.lastEffect=null;a.memoizedProps=null;a.memoizedState=null;a.pendingProps=null;a.return=null;a.updateQueue=null}function ej(a){return 5===a.tag||3===a.tag||4===a.tag}\nfunction fj(a){a:{for(var b=a.return;null!==b;){if(ej(b))break a;b=b.return}throw Error(y(160));}var c=b;b=c.stateNode;switch(c.tag){case 5:var d=!1;break;case 3:b=b.containerInfo;d=!0;break;case 4:b=b.containerInfo;d=!0;break;default:throw Error(y(161));}c.flags&16&&(pb(b,\"\"),c.flags&=-17);a:b:for(c=a;;){for(;null===c.sibling;){if(null===c.return||ej(c.return)){c=null;break a}c=c.return}c.sibling.return=c.return;for(c=c.sibling;5!==c.tag&&6!==c.tag&&18!==c.tag;){if(c.flags&2)continue b;if(null===\nc.child||4===c.tag)continue b;else c.child.return=c,c=c.child}if(!(c.flags&2)){c=c.stateNode;break a}}d?gj(a,c,b):hj(a,c,b)}\nfunction gj(a,b,c){var d=a.tag,e=5===d||6===d;if(e)a=e?a.stateNode:a.stateNode.instance,b?8===c.nodeType?c.parentNode.insertBefore(a,b):c.insertBefore(a,b):(8===c.nodeType?(b=c.parentNode,b.insertBefore(a,c)):(b=c,b.appendChild(a)),c=c._reactRootContainer,null!==c&&void 0!==c||null!==b.onclick||(b.onclick=jf));else if(4!==d&&(a=a.child,null!==a))for(gj(a,b,c),a=a.sibling;null!==a;)gj(a,b,c),a=a.sibling}\nfunction hj(a,b,c){var d=a.tag,e=5===d||6===d;if(e)a=e?a.stateNode:a.stateNode.instance,b?c.insertBefore(a,b):c.appendChild(a);else if(4!==d&&(a=a.child,null!==a))for(hj(a,b,c),a=a.sibling;null!==a;)hj(a,b,c),a=a.sibling}\nfunction cj(a,b){for(var c=b,d=!1,e,f;;){if(!d){d=c.return;a:for(;;){if(null===d)throw Error(y(160));e=d.stateNode;switch(d.tag){case 5:f=!1;break a;case 3:e=e.containerInfo;f=!0;break a;case 4:e=e.containerInfo;f=!0;break a}d=d.return}d=!0}if(5===c.tag||6===c.tag){a:for(var g=a,h=c,k=h;;)if(bj(g,k),null!==k.child&&4!==k.tag)k.child.return=k,k=k.child;else{if(k===h)break a;for(;null===k.sibling;){if(null===k.return||k.return===h)break a;k=k.return}k.sibling.return=k.return;k=k.sibling}f?(g=e,h=c.stateNode,\n8===g.nodeType?g.parentNode.removeChild(h):g.removeChild(h)):e.removeChild(c.stateNode)}else if(4===c.tag){if(null!==c.child){e=c.stateNode.containerInfo;f=!0;c.child.return=c;c=c.child;continue}}else if(bj(a,c),null!==c.child){c.child.return=c;c=c.child;continue}if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return;4===c.tag&&(d=!1)}c.sibling.return=c.return;c=c.sibling}}\nfunction ij(a,b){switch(b.tag){case 0:case 11:case 14:case 15:case 22:var c=b.updateQueue;c=null!==c?c.lastEffect:null;if(null!==c){var d=c=c.next;do 3===(d.tag&3)&&(a=d.destroy,d.destroy=void 0,void 0!==a&&a()),d=d.next;while(d!==c)}return;case 1:return;case 5:c=b.stateNode;if(null!=c){d=b.memoizedProps;var e=null!==a?a.memoizedProps:d;a=b.type;var f=b.updateQueue;b.updateQueue=null;if(null!==f){c[xf]=d;\"input\"===a&&\"radio\"===d.type&&null!=d.name&&$a(c,d);wb(a,e);b=wb(a,d);for(e=0;e<f.length;e+=\n2){var g=f[e],h=f[e+1];\"style\"===g?tb(c,h):\"dangerouslySetInnerHTML\"===g?ob(c,h):\"children\"===g?pb(c,h):qa(c,g,h,b)}switch(a){case \"input\":ab(c,d);break;case \"textarea\":ib(c,d);break;case \"select\":a=c._wrapperState.wasMultiple,c._wrapperState.wasMultiple=!!d.multiple,f=d.value,null!=f?fb(c,!!d.multiple,f,!1):a!==!!d.multiple&&(null!=d.defaultValue?fb(c,!!d.multiple,d.defaultValue,!0):fb(c,!!d.multiple,d.multiple?[]:\"\",!1))}}}return;case 6:if(null===b.stateNode)throw Error(y(162));b.stateNode.nodeValue=\nb.memoizedProps;return;case 3:c=b.stateNode;c.hydrate&&(c.hydrate=!1,Cc(c.containerInfo));return;case 12:return;case 13:null!==b.memoizedState&&(jj=O(),aj(b.child,!0));kj(b);return;case 19:kj(b);return;case 17:return;case 23:case 24:aj(b,null!==b.memoizedState);return}throw Error(y(163));}function kj(a){var b=a.updateQueue;if(null!==b){a.updateQueue=null;var c=a.stateNode;null===c&&(c=a.stateNode=new Ui);b.forEach(function(b){var d=lj.bind(null,a,b);c.has(b)||(c.add(b),b.then(d,d))})}}\nfunction mj(a,b){return null!==a&&(a=a.memoizedState,null===a||null!==a.dehydrated)?(b=b.memoizedState,null!==b&&null===b.dehydrated):!1}var nj=Math.ceil,oj=ra.ReactCurrentDispatcher,pj=ra.ReactCurrentOwner,X=0,U=null,Y=null,W=0,qj=0,rj=Bf(0),V=0,sj=null,tj=0,Dg=0,Hi=0,uj=0,vj=null,jj=0,Ji=Infinity;function wj(){Ji=O()+500}var Z=null,Qi=!1,Ri=null,Ti=null,xj=!1,yj=null,zj=90,Aj=[],Bj=[],Cj=null,Dj=0,Ej=null,Fj=-1,Gj=0,Hj=0,Ij=null,Jj=!1;function Hg(){return 0!==(X&48)?O():-1!==Fj?Fj:Fj=O()}\nfunction Ig(a){a=a.mode;if(0===(a&2))return 1;if(0===(a&4))return 99===eg()?1:2;0===Gj&&(Gj=tj);if(0!==kg.transition){0!==Hj&&(Hj=null!==vj?vj.pendingLanes:0);a=Gj;var b=4186112&~Hj;b&=-b;0===b&&(a=4186112&~a,b=a&-a,0===b&&(b=8192));return b}a=eg();0!==(X&4)&&98===a?a=Xc(12,Gj):(a=Sc(a),a=Xc(a,Gj));return a}\nfunction Jg(a,b,c){if(50<Dj)throw Dj=0,Ej=null,Error(y(185));a=Kj(a,b);if(null===a)return null;$c(a,b,c);a===U&&(Hi|=b,4===V&&Ii(a,W));var d=eg();1===b?0!==(X&8)&&0===(X&48)?Lj(a):(Mj(a,c),0===X&&(wj(),ig())):(0===(X&4)||98!==d&&99!==d||(null===Cj?Cj=new Set([a]):Cj.add(a)),Mj(a,c));vj=a}function Kj(a,b){a.lanes|=b;var c=a.alternate;null!==c&&(c.lanes|=b);c=a;for(a=a.return;null!==a;)a.childLanes|=b,c=a.alternate,null!==c&&(c.childLanes|=b),c=a,a=a.return;return 3===c.tag?c.stateNode:null}\nfunction Mj(a,b){for(var c=a.callbackNode,d=a.suspendedLanes,e=a.pingedLanes,f=a.expirationTimes,g=a.pendingLanes;0<g;){var h=31-Vc(g),k=1<<h,l=f[h];if(-1===l){if(0===(k&d)||0!==(k&e)){l=b;Rc(k);var n=F;f[h]=10<=n?l+250:6<=n?l+5E3:-1}}else l<=b&&(a.expiredLanes|=k);g&=~k}d=Uc(a,a===U?W:0);b=F;if(0===d)null!==c&&(c!==Zf&&Pf(c),a.callbackNode=null,a.callbackPriority=0);else{if(null!==c){if(a.callbackPriority===b)return;c!==Zf&&Pf(c)}15===b?(c=Lj.bind(null,a),null===ag?(ag=[c],bg=Of(Uf,jg)):ag.push(c),\nc=Zf):14===b?c=hg(99,Lj.bind(null,a)):(c=Tc(b),c=hg(c,Nj.bind(null,a)));a.callbackPriority=b;a.callbackNode=c}}\nfunction Nj(a){Fj=-1;Hj=Gj=0;if(0!==(X&48))throw Error(y(327));var b=a.callbackNode;if(Oj()&&a.callbackNode!==b)return null;var c=Uc(a,a===U?W:0);if(0===c)return null;var d=c;var e=X;X|=16;var f=Pj();if(U!==a||W!==d)wj(),Qj(a,d);do try{Rj();break}catch(h){Sj(a,h)}while(1);qg();oj.current=f;X=e;null!==Y?d=0:(U=null,W=0,d=V);if(0!==(tj&Hi))Qj(a,0);else if(0!==d){2===d&&(X|=64,a.hydrate&&(a.hydrate=!1,qf(a.containerInfo)),c=Wc(a),0!==c&&(d=Tj(a,c)));if(1===d)throw b=sj,Qj(a,0),Ii(a,c),Mj(a,O()),b;a.finishedWork=\na.current.alternate;a.finishedLanes=c;switch(d){case 0:case 1:throw Error(y(345));case 2:Uj(a);break;case 3:Ii(a,c);if((c&62914560)===c&&(d=jj+500-O(),10<d)){if(0!==Uc(a,0))break;e=a.suspendedLanes;if((e&c)!==c){Hg();a.pingedLanes|=a.suspendedLanes&e;break}a.timeoutHandle=of(Uj.bind(null,a),d);break}Uj(a);break;case 4:Ii(a,c);if((c&4186112)===c)break;d=a.eventTimes;for(e=-1;0<c;){var g=31-Vc(c);f=1<<g;g=d[g];g>e&&(e=g);c&=~f}c=e;c=O()-c;c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3E3>c?3E3:4320>\nc?4320:1960*nj(c/1960))-c;if(10<c){a.timeoutHandle=of(Uj.bind(null,a),c);break}Uj(a);break;case 5:Uj(a);break;default:throw Error(y(329));}}Mj(a,O());return a.callbackNode===b?Nj.bind(null,a):null}function Ii(a,b){b&=~uj;b&=~Hi;a.suspendedLanes|=b;a.pingedLanes&=~b;for(a=a.expirationTimes;0<b;){var c=31-Vc(b),d=1<<c;a[c]=-1;b&=~d}}\nfunction Lj(a){if(0!==(X&48))throw Error(y(327));Oj();if(a===U&&0!==(a.expiredLanes&W)){var b=W;var c=Tj(a,b);0!==(tj&Hi)&&(b=Uc(a,b),c=Tj(a,b))}else b=Uc(a,0),c=Tj(a,b);0!==a.tag&&2===c&&(X|=64,a.hydrate&&(a.hydrate=!1,qf(a.containerInfo)),b=Wc(a),0!==b&&(c=Tj(a,b)));if(1===c)throw c=sj,Qj(a,0),Ii(a,b),Mj(a,O()),c;a.finishedWork=a.current.alternate;a.finishedLanes=b;Uj(a);Mj(a,O());return null}\nfunction Vj(){if(null!==Cj){var a=Cj;Cj=null;a.forEach(function(a){a.expiredLanes|=24&a.pendingLanes;Mj(a,O())})}ig()}function Wj(a,b){var c=X;X|=1;try{return a(b)}finally{X=c,0===X&&(wj(),ig())}}function Xj(a,b){var c=X;X&=-2;X|=8;try{return a(b)}finally{X=c,0===X&&(wj(),ig())}}function ni(a,b){I(rj,qj);qj|=b;tj|=b}function Ki(){qj=rj.current;H(rj)}\nfunction Qj(a,b){a.finishedWork=null;a.finishedLanes=0;var c=a.timeoutHandle;-1!==c&&(a.timeoutHandle=-1,pf(c));if(null!==Y)for(c=Y.return;null!==c;){var d=c;switch(d.tag){case 1:d=d.type.childContextTypes;null!==d&&void 0!==d&&Gf();break;case 3:fh();H(N);H(M);uh();break;case 5:hh(d);break;case 4:fh();break;case 13:H(P);break;case 19:H(P);break;case 10:rg(d);break;case 23:case 24:Ki()}c=c.return}U=a;Y=Tg(a.current,null);W=qj=tj=b;V=0;sj=null;uj=Hi=Dg=0}\nfunction Sj(a,b){do{var c=Y;try{qg();vh.current=Gh;if(yh){for(var d=R.memoizedState;null!==d;){var e=d.queue;null!==e&&(e.pending=null);d=d.next}yh=!1}xh=0;T=S=R=null;zh=!1;pj.current=null;if(null===c||null===c.return){V=1;sj=b;Y=null;break}a:{var f=a,g=c.return,h=c,k=b;b=W;h.flags|=2048;h.firstEffect=h.lastEffect=null;if(null!==k&&\"object\"===typeof k&&\"function\"===typeof k.then){var l=k;if(0===(h.mode&2)){var n=h.alternate;n?(h.updateQueue=n.updateQueue,h.memoizedState=n.memoizedState,h.lanes=n.lanes):\n(h.updateQueue=null,h.memoizedState=null)}var A=0!==(P.current&1),p=g;do{var C;if(C=13===p.tag){var x=p.memoizedState;if(null!==x)C=null!==x.dehydrated?!0:!1;else{var w=p.memoizedProps;C=void 0===w.fallback?!1:!0!==w.unstable_avoidThisFallback?!0:A?!1:!0}}if(C){var z=p.updateQueue;if(null===z){var u=new Set;u.add(l);p.updateQueue=u}else z.add(l);if(0===(p.mode&2)){p.flags|=64;h.flags|=16384;h.flags&=-2981;if(1===h.tag)if(null===h.alternate)h.tag=17;else{var t=zg(-1,1);t.tag=2;Ag(h,t)}h.lanes|=1;break a}k=\nvoid 0;h=b;var q=f.pingCache;null===q?(q=f.pingCache=new Oi,k=new Set,q.set(l,k)):(k=q.get(l),void 0===k&&(k=new Set,q.set(l,k)));if(!k.has(h)){k.add(h);var v=Yj.bind(null,f,l,h);l.then(v,v)}p.flags|=4096;p.lanes=b;break a}p=p.return}while(null!==p);k=Error((Ra(h.type)||\"A React component\")+\" suspended while rendering, but no fallback UI was specified.\\n\\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.\")}5!==V&&(V=2);k=Mi(k,h);p=\ng;do{switch(p.tag){case 3:f=k;p.flags|=4096;b&=-b;p.lanes|=b;var J=Pi(p,f,b);Bg(p,J);break a;case 1:f=k;var K=p.type,Q=p.stateNode;if(0===(p.flags&64)&&(\"function\"===typeof K.getDerivedStateFromError||null!==Q&&\"function\"===typeof Q.componentDidCatch&&(null===Ti||!Ti.has(Q)))){p.flags|=4096;b&=-b;p.lanes|=b;var L=Si(p,f,b);Bg(p,L);break a}}p=p.return}while(null!==p)}Zj(c)}catch(va){b=va;Y===c&&null!==c&&(Y=c=c.return);continue}break}while(1)}\nfunction Pj(){var a=oj.current;oj.current=Gh;return null===a?Gh:a}function Tj(a,b){var c=X;X|=16;var d=Pj();U===a&&W===b||Qj(a,b);do try{ak();break}catch(e){Sj(a,e)}while(1);qg();X=c;oj.current=d;if(null!==Y)throw Error(y(261));U=null;W=0;return V}function ak(){for(;null!==Y;)bk(Y)}function Rj(){for(;null!==Y&&!Qf();)bk(Y)}function bk(a){var b=ck(a.alternate,a,qj);a.memoizedProps=a.pendingProps;null===b?Zj(a):Y=b;pj.current=null}\nfunction Zj(a){var b=a;do{var c=b.alternate;a=b.return;if(0===(b.flags&2048)){c=Gi(c,b,qj);if(null!==c){Y=c;return}c=b;if(24!==c.tag&&23!==c.tag||null===c.memoizedState||0!==(qj&1073741824)||0===(c.mode&4)){for(var d=0,e=c.child;null!==e;)d|=e.lanes|e.childLanes,e=e.sibling;c.childLanes=d}null!==a&&0===(a.flags&2048)&&(null===a.firstEffect&&(a.firstEffect=b.firstEffect),null!==b.lastEffect&&(null!==a.lastEffect&&(a.lastEffect.nextEffect=b.firstEffect),a.lastEffect=b.lastEffect),1<b.flags&&(null!==\na.lastEffect?a.lastEffect.nextEffect=b:a.firstEffect=b,a.lastEffect=b))}else{c=Li(b);if(null!==c){c.flags&=2047;Y=c;return}null!==a&&(a.firstEffect=a.lastEffect=null,a.flags|=2048)}b=b.sibling;if(null!==b){Y=b;return}Y=b=a}while(null!==b);0===V&&(V=5)}function Uj(a){var b=eg();gg(99,dk.bind(null,a,b));return null}\nfunction dk(a,b){do Oj();while(null!==yj);if(0!==(X&48))throw Error(y(327));var c=a.finishedWork;if(null===c)return null;a.finishedWork=null;a.finishedLanes=0;if(c===a.current)throw Error(y(177));a.callbackNode=null;var d=c.lanes|c.childLanes,e=d,f=a.pendingLanes&~e;a.pendingLanes=e;a.suspendedLanes=0;a.pingedLanes=0;a.expiredLanes&=e;a.mutableReadLanes&=e;a.entangledLanes&=e;e=a.entanglements;for(var g=a.eventTimes,h=a.expirationTimes;0<f;){var k=31-Vc(f),l=1<<k;e[k]=0;g[k]=-1;h[k]=-1;f&=~l}null!==\nCj&&0===(d&24)&&Cj.has(a)&&Cj.delete(a);a===U&&(Y=U=null,W=0);1<c.flags?null!==c.lastEffect?(c.lastEffect.nextEffect=c,d=c.firstEffect):d=c:d=c.firstEffect;if(null!==d){e=X;X|=32;pj.current=null;kf=fd;g=Ne();if(Oe(g)){if(\"selectionStart\"in g)h={start:g.selectionStart,end:g.selectionEnd};else a:if(h=(h=g.ownerDocument)&&h.defaultView||window,(l=h.getSelection&&h.getSelection())&&0!==l.rangeCount){h=l.anchorNode;f=l.anchorOffset;k=l.focusNode;l=l.focusOffset;try{h.nodeType,k.nodeType}catch(va){h=null;\nbreak a}var n=0,A=-1,p=-1,C=0,x=0,w=g,z=null;b:for(;;){for(var u;;){w!==h||0!==f&&3!==w.nodeType||(A=n+f);w!==k||0!==l&&3!==w.nodeType||(p=n+l);3===w.nodeType&&(n+=w.nodeValue.length);if(null===(u=w.firstChild))break;z=w;w=u}for(;;){if(w===g)break b;z===h&&++C===f&&(A=n);z===k&&++x===l&&(p=n);if(null!==(u=w.nextSibling))break;w=z;z=w.parentNode}w=u}h=-1===A||-1===p?null:{start:A,end:p}}else h=null;h=h||{start:0,end:0}}else h=null;lf={focusedElem:g,selectionRange:h};fd=!1;Ij=null;Jj=!1;Z=d;do try{ek()}catch(va){if(null===\nZ)throw Error(y(330));Wi(Z,va);Z=Z.nextEffect}while(null!==Z);Ij=null;Z=d;do try{for(g=a;null!==Z;){var t=Z.flags;t&16&&pb(Z.stateNode,\"\");if(t&128){var q=Z.alternate;if(null!==q){var v=q.ref;null!==v&&(\"function\"===typeof v?v(null):v.current=null)}}switch(t&1038){case 2:fj(Z);Z.flags&=-3;break;case 6:fj(Z);Z.flags&=-3;ij(Z.alternate,Z);break;case 1024:Z.flags&=-1025;break;case 1028:Z.flags&=-1025;ij(Z.alternate,Z);break;case 4:ij(Z.alternate,Z);break;case 8:h=Z;cj(g,h);var J=h.alternate;dj(h);null!==\nJ&&dj(J)}Z=Z.nextEffect}}catch(va){if(null===Z)throw Error(y(330));Wi(Z,va);Z=Z.nextEffect}while(null!==Z);v=lf;q=Ne();t=v.focusedElem;g=v.selectionRange;if(q!==t&&t&&t.ownerDocument&&Me(t.ownerDocument.documentElement,t)){null!==g&&Oe(t)&&(q=g.start,v=g.end,void 0===v&&(v=q),\"selectionStart\"in t?(t.selectionStart=q,t.selectionEnd=Math.min(v,t.value.length)):(v=(q=t.ownerDocument||document)&&q.defaultView||window,v.getSelection&&(v=v.getSelection(),h=t.textContent.length,J=Math.min(g.start,h),g=void 0===\ng.end?J:Math.min(g.end,h),!v.extend&&J>g&&(h=g,g=J,J=h),h=Le(t,J),f=Le(t,g),h&&f&&(1!==v.rangeCount||v.anchorNode!==h.node||v.anchorOffset!==h.offset||v.focusNode!==f.node||v.focusOffset!==f.offset)&&(q=q.createRange(),q.setStart(h.node,h.offset),v.removeAllRanges(),J>g?(v.addRange(q),v.extend(f.node,f.offset)):(q.setEnd(f.node,f.offset),v.addRange(q))))));q=[];for(v=t;v=v.parentNode;)1===v.nodeType&&q.push({element:v,left:v.scrollLeft,top:v.scrollTop});\"function\"===typeof t.focus&&t.focus();for(t=\n0;t<q.length;t++)v=q[t],v.element.scrollLeft=v.left,v.element.scrollTop=v.top}fd=!!kf;lf=kf=null;a.current=c;Z=d;do try{for(t=a;null!==Z;){var K=Z.flags;K&36&&Yi(t,Z.alternate,Z);if(K&128){q=void 0;var Q=Z.ref;if(null!==Q){var L=Z.stateNode;switch(Z.tag){case 5:q=L;break;default:q=L}\"function\"===typeof Q?Q(q):Q.current=q}}Z=Z.nextEffect}}catch(va){if(null===Z)throw Error(y(330));Wi(Z,va);Z=Z.nextEffect}while(null!==Z);Z=null;$f();X=e}else a.current=c;if(xj)xj=!1,yj=a,zj=b;else for(Z=d;null!==Z;)b=\nZ.nextEffect,Z.nextEffect=null,Z.flags&8&&(K=Z,K.sibling=null,K.stateNode=null),Z=b;d=a.pendingLanes;0===d&&(Ti=null);1===d?a===Ej?Dj++:(Dj=0,Ej=a):Dj=0;c=c.stateNode;if(Mf&&\"function\"===typeof Mf.onCommitFiberRoot)try{Mf.onCommitFiberRoot(Lf,c,void 0,64===(c.current.flags&64))}catch(va){}Mj(a,O());if(Qi)throw Qi=!1,a=Ri,Ri=null,a;if(0!==(X&8))return null;ig();return null}\nfunction ek(){for(;null!==Z;){var a=Z.alternate;Jj||null===Ij||(0!==(Z.flags&8)?dc(Z,Ij)&&(Jj=!0):13===Z.tag&&mj(a,Z)&&dc(Z,Ij)&&(Jj=!0));var b=Z.flags;0!==(b&256)&&Xi(a,Z);0===(b&512)||xj||(xj=!0,hg(97,function(){Oj();return null}));Z=Z.nextEffect}}function Oj(){if(90!==zj){var a=97<zj?97:zj;zj=90;return gg(a,fk)}return!1}function $i(a,b){Aj.push(b,a);xj||(xj=!0,hg(97,function(){Oj();return null}))}function Zi(a,b){Bj.push(b,a);xj||(xj=!0,hg(97,function(){Oj();return null}))}\nfunction fk(){if(null===yj)return!1;var a=yj;yj=null;if(0!==(X&48))throw Error(y(331));var b=X;X|=32;var c=Bj;Bj=[];for(var d=0;d<c.length;d+=2){var e=c[d],f=c[d+1],g=e.destroy;e.destroy=void 0;if(\"function\"===typeof g)try{g()}catch(k){if(null===f)throw Error(y(330));Wi(f,k)}}c=Aj;Aj=[];for(d=0;d<c.length;d+=2){e=c[d];f=c[d+1];try{var h=e.create;e.destroy=h()}catch(k){if(null===f)throw Error(y(330));Wi(f,k)}}for(h=a.current.firstEffect;null!==h;)a=h.nextEffect,h.nextEffect=null,h.flags&8&&(h.sibling=\nnull,h.stateNode=null),h=a;X=b;ig();return!0}function gk(a,b,c){b=Mi(c,b);b=Pi(a,b,1);Ag(a,b);b=Hg();a=Kj(a,1);null!==a&&($c(a,1,b),Mj(a,b))}\nfunction Wi(a,b){if(3===a.tag)gk(a,a,b);else for(var c=a.return;null!==c;){if(3===c.tag){gk(c,a,b);break}else if(1===c.tag){var d=c.stateNode;if(\"function\"===typeof c.type.getDerivedStateFromError||\"function\"===typeof d.componentDidCatch&&(null===Ti||!Ti.has(d))){a=Mi(b,a);var e=Si(c,a,1);Ag(c,e);e=Hg();c=Kj(c,1);if(null!==c)$c(c,1,e),Mj(c,e);else if(\"function\"===typeof d.componentDidCatch&&(null===Ti||!Ti.has(d)))try{d.componentDidCatch(b,a)}catch(f){}break}}c=c.return}}\nfunction Yj(a,b,c){var d=a.pingCache;null!==d&&d.delete(b);b=Hg();a.pingedLanes|=a.suspendedLanes&c;U===a&&(W&c)===c&&(4===V||3===V&&(W&62914560)===W&&500>O()-jj?Qj(a,0):uj|=c);Mj(a,b)}function lj(a,b){var c=a.stateNode;null!==c&&c.delete(b);b=0;0===b&&(b=a.mode,0===(b&2)?b=1:0===(b&4)?b=99===eg()?1:2:(0===Gj&&(Gj=tj),b=Yc(62914560&~Gj),0===b&&(b=4194304)));c=Hg();a=Kj(a,b);null!==a&&($c(a,b,c),Mj(a,c))}var ck;\nck=function(a,b,c){var d=b.lanes;if(null!==a)if(a.memoizedProps!==b.pendingProps||N.current)ug=!0;else if(0!==(c&d))ug=0!==(a.flags&16384)?!0:!1;else{ug=!1;switch(b.tag){case 3:ri(b);sh();break;case 5:gh(b);break;case 1:Ff(b.type)&&Jf(b);break;case 4:eh(b,b.stateNode.containerInfo);break;case 10:d=b.memoizedProps.value;var e=b.type._context;I(mg,e._currentValue);e._currentValue=d;break;case 13:if(null!==b.memoizedState){if(0!==(c&b.child.childLanes))return ti(a,b,c);I(P,P.current&1);b=hi(a,b,c);return null!==\nb?b.sibling:null}I(P,P.current&1);break;case 19:d=0!==(c&b.childLanes);if(0!==(a.flags&64)){if(d)return Ai(a,b,c);b.flags|=64}e=b.memoizedState;null!==e&&(e.rendering=null,e.tail=null,e.lastEffect=null);I(P,P.current);if(d)break;else return null;case 23:case 24:return b.lanes=0,mi(a,b,c)}return hi(a,b,c)}else ug=!1;b.lanes=0;switch(b.tag){case 2:d=b.type;null!==a&&(a.alternate=null,b.alternate=null,b.flags|=2);a=b.pendingProps;e=Ef(b,M.current);tg(b,c);e=Ch(null,b,d,a,e,c);b.flags|=1;if(\"object\"===\ntypeof e&&null!==e&&\"function\"===typeof e.render&&void 0===e.$$typeof){b.tag=1;b.memoizedState=null;b.updateQueue=null;if(Ff(d)){var f=!0;Jf(b)}else f=!1;b.memoizedState=null!==e.state&&void 0!==e.state?e.state:null;xg(b);var g=d.getDerivedStateFromProps;\"function\"===typeof g&&Gg(b,d,g,a);e.updater=Kg;b.stateNode=e;e._reactInternals=b;Og(b,d,a,c);b=qi(null,b,d,!0,f,c)}else b.tag=0,fi(null,b,e,c),b=b.child;return b;case 16:e=b.elementType;a:{null!==a&&(a.alternate=null,b.alternate=null,b.flags|=2);\na=b.pendingProps;f=e._init;e=f(e._payload);b.type=e;f=b.tag=hk(e);a=lg(e,a);switch(f){case 0:b=li(null,b,e,a,c);break a;case 1:b=pi(null,b,e,a,c);break a;case 11:b=gi(null,b,e,a,c);break a;case 14:b=ii(null,b,e,lg(e.type,a),d,c);break a}throw Error(y(306,e,\"\"));}return b;case 0:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:lg(d,e),li(a,b,d,e,c);case 1:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:lg(d,e),pi(a,b,d,e,c);case 3:ri(b);d=b.updateQueue;if(null===a||null===d)throw Error(y(282));\nd=b.pendingProps;e=b.memoizedState;e=null!==e?e.element:null;yg(a,b);Cg(b,d,null,c);d=b.memoizedState.element;if(d===e)sh(),b=hi(a,b,c);else{e=b.stateNode;if(f=e.hydrate)kh=rf(b.stateNode.containerInfo.firstChild),jh=b,f=lh=!0;if(f){a=e.mutableSourceEagerHydrationData;if(null!=a)for(e=0;e<a.length;e+=2)f=a[e],f._workInProgressVersionPrimary=a[e+1],th.push(f);c=Zg(b,null,d,c);for(b.child=c;c;)c.flags=c.flags&-3|1024,c=c.sibling}else fi(a,b,d,c),sh();b=b.child}return b;case 5:return gh(b),null===a&&\nph(b),d=b.type,e=b.pendingProps,f=null!==a?a.memoizedProps:null,g=e.children,nf(d,e)?g=null:null!==f&&nf(d,f)&&(b.flags|=16),oi(a,b),fi(a,b,g,c),b.child;case 6:return null===a&&ph(b),null;case 13:return ti(a,b,c);case 4:return eh(b,b.stateNode.containerInfo),d=b.pendingProps,null===a?b.child=Yg(b,null,d,c):fi(a,b,d,c),b.child;case 11:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:lg(d,e),gi(a,b,d,e,c);case 7:return fi(a,b,b.pendingProps,c),b.child;case 8:return fi(a,b,b.pendingProps.children,\nc),b.child;case 12:return fi(a,b,b.pendingProps.children,c),b.child;case 10:a:{d=b.type._context;e=b.pendingProps;g=b.memoizedProps;f=e.value;var h=b.type._context;I(mg,h._currentValue);h._currentValue=f;if(null!==g)if(h=g.value,f=He(h,f)?0:(\"function\"===typeof d._calculateChangedBits?d._calculateChangedBits(h,f):1073741823)|0,0===f){if(g.children===e.children&&!N.current){b=hi(a,b,c);break a}}else for(h=b.child,null!==h&&(h.return=b);null!==h;){var k=h.dependencies;if(null!==k){g=h.child;for(var l=\nk.firstContext;null!==l;){if(l.context===d&&0!==(l.observedBits&f)){1===h.tag&&(l=zg(-1,c&-c),l.tag=2,Ag(h,l));h.lanes|=c;l=h.alternate;null!==l&&(l.lanes|=c);sg(h.return,c);k.lanes|=c;break}l=l.next}}else g=10===h.tag?h.type===b.type?null:h.child:h.child;if(null!==g)g.return=h;else for(g=h;null!==g;){if(g===b){g=null;break}h=g.sibling;if(null!==h){h.return=g.return;g=h;break}g=g.return}h=g}fi(a,b,e.children,c);b=b.child}return b;case 9:return e=b.type,f=b.pendingProps,d=f.children,tg(b,c),e=vg(e,\nf.unstable_observedBits),d=d(e),b.flags|=1,fi(a,b,d,c),b.child;case 14:return e=b.type,f=lg(e,b.pendingProps),f=lg(e.type,f),ii(a,b,e,f,d,c);case 15:return ki(a,b,b.type,b.pendingProps,d,c);case 17:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:lg(d,e),null!==a&&(a.alternate=null,b.alternate=null,b.flags|=2),b.tag=1,Ff(d)?(a=!0,Jf(b)):a=!1,tg(b,c),Mg(b,d,e),Og(b,d,e,c),qi(null,b,d,!0,a,c);case 19:return Ai(a,b,c);case 23:return mi(a,b,c);case 24:return mi(a,b,c)}throw Error(y(156,b.tag));\n};function ik(a,b,c,d){this.tag=a;this.key=c;this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null;this.index=0;this.ref=null;this.pendingProps=b;this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null;this.mode=d;this.flags=0;this.lastEffect=this.firstEffect=this.nextEffect=null;this.childLanes=this.lanes=0;this.alternate=null}function nh(a,b,c,d){return new ik(a,b,c,d)}function ji(a){a=a.prototype;return!(!a||!a.isReactComponent)}\nfunction hk(a){if(\"function\"===typeof a)return ji(a)?1:0;if(void 0!==a&&null!==a){a=a.$$typeof;if(a===Aa)return 11;if(a===Da)return 14}return 2}\nfunction Tg(a,b){var c=a.alternate;null===c?(c=nh(a.tag,b,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=b,c.type=a.type,c.flags=0,c.nextEffect=null,c.firstEffect=null,c.lastEffect=null);c.childLanes=a.childLanes;c.lanes=a.lanes;c.child=a.child;c.memoizedProps=a.memoizedProps;c.memoizedState=a.memoizedState;c.updateQueue=a.updateQueue;b=a.dependencies;c.dependencies=null===b?null:{lanes:b.lanes,firstContext:b.firstContext};\nc.sibling=a.sibling;c.index=a.index;c.ref=a.ref;return c}\nfunction Vg(a,b,c,d,e,f){var g=2;d=a;if(\"function\"===typeof a)ji(a)&&(g=1);else if(\"string\"===typeof a)g=5;else a:switch(a){case ua:return Xg(c.children,e,f,b);case Ha:g=8;e|=16;break;case wa:g=8;e|=1;break;case xa:return a=nh(12,c,b,e|8),a.elementType=xa,a.type=xa,a.lanes=f,a;case Ba:return a=nh(13,c,b,e),a.type=Ba,a.elementType=Ba,a.lanes=f,a;case Ca:return a=nh(19,c,b,e),a.elementType=Ca,a.lanes=f,a;case Ia:return vi(c,e,f,b);case Ja:return a=nh(24,c,b,e),a.elementType=Ja,a.lanes=f,a;default:if(\"object\"===\ntypeof a&&null!==a)switch(a.$$typeof){case ya:g=10;break a;case za:g=9;break a;case Aa:g=11;break a;case Da:g=14;break a;case Ea:g=16;d=null;break a;case Fa:g=22;break a}throw Error(y(130,null==a?a:typeof a,\"\"));}b=nh(g,c,b,e);b.elementType=a;b.type=d;b.lanes=f;return b}function Xg(a,b,c,d){a=nh(7,a,d,b);a.lanes=c;return a}function vi(a,b,c,d){a=nh(23,a,d,b);a.elementType=Ia;a.lanes=c;return a}function Ug(a,b,c){a=nh(6,a,null,b);a.lanes=c;return a}\nfunction Wg(a,b,c){b=nh(4,null!==a.children?a.children:[],a.key,b);b.lanes=c;b.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation};return b}\nfunction jk(a,b,c){this.tag=b;this.containerInfo=a;this.finishedWork=this.pingCache=this.current=this.pendingChildren=null;this.timeoutHandle=-1;this.pendingContext=this.context=null;this.hydrate=c;this.callbackNode=null;this.callbackPriority=0;this.eventTimes=Zc(0);this.expirationTimes=Zc(-1);this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0;this.entanglements=Zc(0);this.mutableSourceEagerHydrationData=null}\nfunction kk(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:ta,key:null==d?null:\"\"+d,children:a,containerInfo:b,implementation:c}}\nfunction lk(a,b,c,d){var e=b.current,f=Hg(),g=Ig(e);a:if(c){c=c._reactInternals;b:{if(Zb(c)!==c||1!==c.tag)throw Error(y(170));var h=c;do{switch(h.tag){case 3:h=h.stateNode.context;break b;case 1:if(Ff(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break b}}h=h.return}while(null!==h);throw Error(y(171));}if(1===c.tag){var k=c.type;if(Ff(k)){c=If(c,k,h);break a}}c=h}else c=Cf;null===b.context?b.context=c:b.pendingContext=c;b=zg(f,g);b.payload={element:a};d=void 0===d?null:d;null!==\nd&&(b.callback=d);Ag(e,b);Jg(e,g,f);return g}function mk(a){a=a.current;if(!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function nk(a,b){a=a.memoizedState;if(null!==a&&null!==a.dehydrated){var c=a.retryLane;a.retryLane=0!==c&&c<b?c:b}}function ok(a,b){nk(a,b);(a=a.alternate)&&nk(a,b)}function pk(){return null}\nfunction qk(a,b,c){var d=null!=c&&null!=c.hydrationOptions&&c.hydrationOptions.mutableSources||null;c=new jk(a,b,null!=c&&!0===c.hydrate);b=nh(3,null,null,2===b?7:1===b?3:0);c.current=b;b.stateNode=c;xg(b);a[ff]=c.current;cf(8===a.nodeType?a.parentNode:a);if(d)for(a=0;a<d.length;a++){b=d[a];var e=b._getVersion;e=e(b._source);null==c.mutableSourceEagerHydrationData?c.mutableSourceEagerHydrationData=[b,e]:c.mutableSourceEagerHydrationData.push(b,e)}this._internalRoot=c}\nqk.prototype.render=function(a){lk(a,this._internalRoot,null,null)};qk.prototype.unmount=function(){var a=this._internalRoot,b=a.containerInfo;lk(null,a,null,function(){b[ff]=null})};function rk(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType&&(8!==a.nodeType||\" react-mount-point-unstable \"!==a.nodeValue))}\nfunction sk(a,b){b||(b=a?9===a.nodeType?a.documentElement:a.firstChild:null,b=!(!b||1!==b.nodeType||!b.hasAttribute(\"data-reactroot\")));if(!b)for(var c;c=a.lastChild;)a.removeChild(c);return new qk(a,0,b?{hydrate:!0}:void 0)}\nfunction tk(a,b,c,d,e){var f=c._reactRootContainer;if(f){var g=f._internalRoot;if(\"function\"===typeof e){var h=e;e=function(){var a=mk(g);h.call(a)}}lk(b,g,a,e)}else{f=c._reactRootContainer=sk(c,d);g=f._internalRoot;if(\"function\"===typeof e){var k=e;e=function(){var a=mk(g);k.call(a)}}Xj(function(){lk(b,g,a,e)})}return mk(g)}ec=function(a){if(13===a.tag){var b=Hg();Jg(a,4,b);ok(a,4)}};fc=function(a){if(13===a.tag){var b=Hg();Jg(a,67108864,b);ok(a,67108864)}};\ngc=function(a){if(13===a.tag){var b=Hg(),c=Ig(a);Jg(a,c,b);ok(a,c)}};hc=function(a,b){return b()};\nyb=function(a,b,c){switch(b){case \"input\":ab(a,c);b=c.name;if(\"radio\"===c.type&&null!=b){for(c=a;c.parentNode;)c=c.parentNode;c=c.querySelectorAll(\"input[name=\"+JSON.stringify(\"\"+b)+'][type=\"radio\"]');for(b=0;b<c.length;b++){var d=c[b];if(d!==a&&d.form===a.form){var e=Db(d);if(!e)throw Error(y(90));Wa(d);ab(d,e)}}}break;case \"textarea\":ib(a,c);break;case \"select\":b=c.value,null!=b&&fb(a,!!c.multiple,b,!1)}};Gb=Wj;\nHb=function(a,b,c,d,e){var f=X;X|=4;try{return gg(98,a.bind(null,b,c,d,e))}finally{X=f,0===X&&(wj(),ig())}};Ib=function(){0===(X&49)&&(Vj(),Oj())};Jb=function(a,b){var c=X;X|=2;try{return a(b)}finally{X=c,0===X&&(wj(),ig())}};function uk(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!rk(b))throw Error(y(200));return kk(a,b,null,c)}var vk={Events:[Cb,ue,Db,Eb,Fb,Oj,{current:!1}]},wk={findFiberByHostInstance:wc,bundleType:0,version:\"17.0.2\",rendererPackageName:\"react-dom\"};\nvar xk={bundleType:wk.bundleType,version:wk.version,rendererPackageName:wk.rendererPackageName,rendererConfig:wk.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ra.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){a=cc(a);return null===a?null:a.stateNode},findFiberByHostInstance:wk.findFiberByHostInstance||\npk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(\"undefined\"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var yk=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yk.isDisabled&&yk.supportsFiber)try{Lf=yk.inject(xk),Mf=yk}catch(a){}}exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vk;exports.createPortal=uk;\nexports.findDOMNode=function(a){if(null==a)return null;if(1===a.nodeType)return a;var b=a._reactInternals;if(void 0===b){if(\"function\"===typeof a.render)throw Error(y(188));throw Error(y(268,Object.keys(a)));}a=cc(b);a=null===a?null:a.stateNode;return a};exports.flushSync=function(a,b){var c=X;if(0!==(c&48))return a(b);X|=1;try{if(a)return gg(99,a.bind(null,b))}finally{X=c,ig()}};exports.hydrate=function(a,b,c){if(!rk(b))throw Error(y(200));return tk(null,a,b,!0,c)};\nexports.render=function(a,b,c){if(!rk(b))throw Error(y(200));return tk(null,a,b,!1,c)};exports.unmountComponentAtNode=function(a){if(!rk(a))throw Error(y(40));return a._reactRootContainer?(Xj(function(){tk(null,null,a,!1,function(){a._reactRootContainer=null;a[ff]=null})}),!0):!1};exports.unstable_batchedUpdates=Wj;exports.unstable_createPortal=function(a,b){return uk(a,b,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)};\nexports.unstable_renderSubtreeIntoContainer=function(a,b,c,d){if(!rk(c))throw Error(y(200));if(null==a||void 0===a._reactInternals)throw Error(y(38));return tk(a,b,c,!1,d)};exports.version=\"17.0.2\";\n","'use strict';\n\nfunction checkDCE() {\n  /* global __REACT_DEVTOOLS_GLOBAL_HOOK__ */\n  if (\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ === 'undefined' ||\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE !== 'function'\n  ) {\n    return;\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    // This branch is unreachable because this function is only called\n    // in production, but the condition is true only in development.\n    // Therefore if the branch is still here, dead code elimination wasn't\n    // properly applied.\n    // Don't change the message. React DevTools relies on it. Also make sure\n    // this message doesn't occur elsewhere in this function, or it will cause\n    // a false positive.\n    throw new Error('^_^');\n  }\n  try {\n    // Verify that the code above has been dead code eliminated (DCE'd).\n    __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE);\n  } catch (err) {\n    // DevTools shouldn't crash React, no matter what.\n    // We should still report in case we break this code.\n    console.error(err);\n  }\n}\n\nif (process.env.NODE_ENV === 'production') {\n  // DCE check should happen before ReactDOM bundle executes so that\n  // DevTools can report bad minification during injection.\n  checkDCE();\n  module.exports = require('./cjs/react-dom.production.min.js');\n} else {\n  module.exports = require('./cjs/react-dom.development.js');\n}\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nfunction componentWillMount() {\n  // Call this.constructor.gDSFP to support sub-classes.\n  var state = this.constructor.getDerivedStateFromProps(this.props, this.state);\n  if (state !== null && state !== undefined) {\n    this.setState(state);\n  }\n}\n\nfunction componentWillReceiveProps(nextProps) {\n  // Call this.constructor.gDSFP to support sub-classes.\n  // Use the setState() updater to ensure state isn't stale in certain edge cases.\n  function updater(prevState) {\n    var state = this.constructor.getDerivedStateFromProps(nextProps, prevState);\n    return state !== null && state !== undefined ? state : null;\n  }\n  // Binding \"this\" is important for shallow renderer support.\n  this.setState(updater.bind(this));\n}\n\nfunction componentWillUpdate(nextProps, nextState) {\n  try {\n    var prevProps = this.props;\n    var prevState = this.state;\n    this.props = nextProps;\n    this.state = nextState;\n    this.__reactInternalSnapshotFlag = true;\n    this.__reactInternalSnapshot = this.getSnapshotBeforeUpdate(\n      prevProps,\n      prevState\n    );\n  } finally {\n    this.props = prevProps;\n    this.state = prevState;\n  }\n}\n\n// React may warn about cWM/cWRP/cWU methods being deprecated.\n// Add a flag to suppress these warnings for this special case.\ncomponentWillMount.__suppressDeprecationWarning = true;\ncomponentWillReceiveProps.__suppressDeprecationWarning = true;\ncomponentWillUpdate.__suppressDeprecationWarning = true;\n\nfunction polyfill(Component) {\n  var prototype = Component.prototype;\n\n  if (!prototype || !prototype.isReactComponent) {\n    throw new Error('Can only polyfill class components');\n  }\n\n  if (\n    typeof Component.getDerivedStateFromProps !== 'function' &&\n    typeof prototype.getSnapshotBeforeUpdate !== 'function'\n  ) {\n    return Component;\n  }\n\n  // If new component APIs are defined, \"unsafe\" lifecycles won't be called.\n  // Error if any of these lifecycles are present,\n  // Because they would work differently between older and newer (16.3+) versions of React.\n  var foundWillMountName = null;\n  var foundWillReceivePropsName = null;\n  var foundWillUpdateName = null;\n  if (typeof prototype.componentWillMount === 'function') {\n    foundWillMountName = 'componentWillMount';\n  } else if (typeof prototype.UNSAFE_componentWillMount === 'function') {\n    foundWillMountName = 'UNSAFE_componentWillMount';\n  }\n  if (typeof prototype.componentWillReceiveProps === 'function') {\n    foundWillReceivePropsName = 'componentWillReceiveProps';\n  } else if (typeof prototype.UNSAFE_componentWillReceiveProps === 'function') {\n    foundWillReceivePropsName = 'UNSAFE_componentWillReceiveProps';\n  }\n  if (typeof prototype.componentWillUpdate === 'function') {\n    foundWillUpdateName = 'componentWillUpdate';\n  } else if (typeof prototype.UNSAFE_componentWillUpdate === 'function') {\n    foundWillUpdateName = 'UNSAFE_componentWillUpdate';\n  }\n  if (\n    foundWillMountName !== null ||\n    foundWillReceivePropsName !== null ||\n    foundWillUpdateName !== null\n  ) {\n    var componentName = Component.displayName || Component.name;\n    var newApiName =\n      typeof Component.getDerivedStateFromProps === 'function'\n        ? 'getDerivedStateFromProps()'\n        : 'getSnapshotBeforeUpdate()';\n\n    throw Error(\n      'Unsafe legacy lifecycles will not be called for components using new component APIs.\\n\\n' +\n        componentName +\n        ' uses ' +\n        newApiName +\n        ' but also contains the following legacy lifecycles:' +\n        (foundWillMountName !== null ? '\\n  ' + foundWillMountName : '') +\n        (foundWillReceivePropsName !== null\n          ? '\\n  ' + foundWillReceivePropsName\n          : '') +\n        (foundWillUpdateName !== null ? '\\n  ' + foundWillUpdateName : '') +\n        '\\n\\nThe above lifecycles should be removed. Learn more about this warning here:\\n' +\n        'https://fb.me/react-async-component-lifecycle-hooks'\n    );\n  }\n\n  // React <= 16.2 does not support static getDerivedStateFromProps.\n  // As a workaround, use cWM and cWRP to invoke the new static lifecycle.\n  // Newer versions of React will ignore these lifecycles if gDSFP exists.\n  if (typeof Component.getDerivedStateFromProps === 'function') {\n    prototype.componentWillMount = componentWillMount;\n    prototype.componentWillReceiveProps = componentWillReceiveProps;\n  }\n\n  // React <= 16.2 does not support getSnapshotBeforeUpdate.\n  // As a workaround, use cWU to invoke the new lifecycle.\n  // Newer versions of React will ignore that lifecycle if gSBU exists.\n  if (typeof prototype.getSnapshotBeforeUpdate === 'function') {\n    if (typeof prototype.componentDidUpdate !== 'function') {\n      throw new Error(\n        'Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype'\n      );\n    }\n\n    prototype.componentWillUpdate = componentWillUpdate;\n\n    var componentDidUpdate = prototype.componentDidUpdate;\n\n    prototype.componentDidUpdate = function componentDidUpdatePolyfill(\n      prevProps,\n      prevState,\n      maybeSnapshot\n    ) {\n      // 16.3+ will not execute our will-update method;\n      // It will pass a snapshot value to did-update though.\n      // Older versions will require our polyfilled will-update value.\n      // We need to handle both cases, but can't just check for the presence of \"maybeSnapshot\",\n      // Because for <= 15.x versions this might be a \"prevContext\" object.\n      // We also can't just check \"__reactInternalSnapshot\",\n      // Because get-snapshot might return a falsy value.\n      // So check for the explicit __reactInternalSnapshotFlag flag to determine behavior.\n      var snapshot = this.__reactInternalSnapshotFlag\n        ? this.__reactInternalSnapshot\n        : maybeSnapshot;\n\n      componentDidUpdate.call(this, prevProps, prevState, snapshot);\n    };\n  }\n\n  return Component;\n}\n\nexport { polyfill };\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.bodyOpenClassName = exports.portalClassName = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require(\"react-dom\");\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _ModalPortal = require(\"./ModalPortal\");\n\nvar _ModalPortal2 = _interopRequireDefault(_ModalPortal);\n\nvar _ariaAppHider = require(\"../helpers/ariaAppHider\");\n\nvar ariaAppHider = _interopRequireWildcard(_ariaAppHider);\n\nvar _safeHTMLElement = require(\"../helpers/safeHTMLElement\");\n\nvar _safeHTMLElement2 = _interopRequireDefault(_safeHTMLElement);\n\nvar _reactLifecyclesCompat = require(\"react-lifecycles-compat\");\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar portalClassName = exports.portalClassName = \"ReactModalPortal\";\nvar bodyOpenClassName = exports.bodyOpenClassName = \"ReactModal__Body--open\";\n\nvar isReact16 = _safeHTMLElement.canUseDOM && _reactDom2.default.createPortal !== undefined;\n\nvar createHTMLElement = function createHTMLElement(name) {\n  return document.createElement(name);\n};\n\nvar getCreatePortal = function getCreatePortal() {\n  return isReact16 ? _reactDom2.default.createPortal : _reactDom2.default.unstable_renderSubtreeIntoContainer;\n};\n\nfunction getParentElement(parentSelector) {\n  return parentSelector();\n}\n\nvar Modal = function (_Component) {\n  _inherits(Modal, _Component);\n\n  function Modal() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Modal);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = Modal.__proto__ || Object.getPrototypeOf(Modal)).call.apply(_ref, [this].concat(args))), _this), _this.removePortal = function () {\n      !isReact16 && _reactDom2.default.unmountComponentAtNode(_this.node);\n      var parent = getParentElement(_this.props.parentSelector);\n      if (parent && parent.contains(_this.node)) {\n        parent.removeChild(_this.node);\n      } else {\n        // eslint-disable-next-line no-console\n        console.warn('React-Modal: \"parentSelector\" prop did not returned any DOM ' + \"element. Make sure that the parent element is unmounted to \" + \"avoid any memory leaks.\");\n      }\n    }, _this.portalRef = function (ref) {\n      _this.portal = ref;\n    }, _this.renderPortal = function (props) {\n      var createPortal = getCreatePortal();\n      var portal = createPortal(_this, _react2.default.createElement(_ModalPortal2.default, _extends({ defaultStyles: Modal.defaultStyles }, props)), _this.node);\n      _this.portalRef(portal);\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(Modal, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (!_safeHTMLElement.canUseDOM) return;\n\n      if (!isReact16) {\n        this.node = createHTMLElement(\"div\");\n      }\n      this.node.className = this.props.portalClassName;\n\n      var parent = getParentElement(this.props.parentSelector);\n      parent.appendChild(this.node);\n\n      !isReact16 && this.renderPortal(this.props);\n    }\n  }, {\n    key: \"getSnapshotBeforeUpdate\",\n    value: function getSnapshotBeforeUpdate(prevProps) {\n      var prevParent = getParentElement(prevProps.parentSelector);\n      var nextParent = getParentElement(this.props.parentSelector);\n      return { prevParent: prevParent, nextParent: nextParent };\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, _, snapshot) {\n      if (!_safeHTMLElement.canUseDOM) return;\n      var _props = this.props,\n          isOpen = _props.isOpen,\n          portalClassName = _props.portalClassName;\n\n\n      if (prevProps.portalClassName !== portalClassName) {\n        this.node.className = portalClassName;\n      }\n\n      var prevParent = snapshot.prevParent,\n          nextParent = snapshot.nextParent;\n\n      if (nextParent !== prevParent) {\n        prevParent.removeChild(this.node);\n        nextParent.appendChild(this.node);\n      }\n\n      // Stop unnecessary renders if modal is remaining closed\n      if (!prevProps.isOpen && !isOpen) return;\n\n      !isReact16 && this.renderPortal(this.props);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (!_safeHTMLElement.canUseDOM || !this.node || !this.portal) return;\n\n      var state = this.portal.state;\n      var now = Date.now();\n      var closesAt = state.isOpen && this.props.closeTimeoutMS && (state.closesAt || now + this.props.closeTimeoutMS);\n\n      if (closesAt) {\n        if (!state.beforeClose) {\n          this.portal.closeWithTimeout();\n        }\n\n        setTimeout(this.removePortal, closesAt - now);\n      } else {\n        this.removePortal();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (!_safeHTMLElement.canUseDOM || !isReact16) {\n        return null;\n      }\n\n      if (!this.node && isReact16) {\n        this.node = createHTMLElement(\"div\");\n      }\n\n      var createPortal = getCreatePortal();\n      return createPortal(_react2.default.createElement(_ModalPortal2.default, _extends({\n        ref: this.portalRef,\n        defaultStyles: Modal.defaultStyles\n      }, this.props)), this.node);\n    }\n  }], [{\n    key: \"setAppElement\",\n    value: function setAppElement(element) {\n      ariaAppHider.setElement(element);\n    }\n\n    /* eslint-disable react/no-unused-prop-types */\n\n    /* eslint-enable react/no-unused-prop-types */\n\n  }]);\n\n  return Modal;\n}(_react.Component);\n\nModal.propTypes = {\n  isOpen: _propTypes2.default.bool.isRequired,\n  style: _propTypes2.default.shape({\n    content: _propTypes2.default.object,\n    overlay: _propTypes2.default.object\n  }),\n  portalClassName: _propTypes2.default.string,\n  bodyOpenClassName: _propTypes2.default.string,\n  htmlOpenClassName: _propTypes2.default.string,\n  className: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.shape({\n    base: _propTypes2.default.string.isRequired,\n    afterOpen: _propTypes2.default.string.isRequired,\n    beforeClose: _propTypes2.default.string.isRequired\n  })]),\n  overlayClassName: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.shape({\n    base: _propTypes2.default.string.isRequired,\n    afterOpen: _propTypes2.default.string.isRequired,\n    beforeClose: _propTypes2.default.string.isRequired\n  })]),\n  appElement: _propTypes2.default.oneOfType([_propTypes2.default.instanceOf(_safeHTMLElement2.default), _propTypes2.default.instanceOf(_safeHTMLElement.SafeHTMLCollection), _propTypes2.default.instanceOf(_safeHTMLElement.SafeNodeList), _propTypes2.default.arrayOf(_propTypes2.default.instanceOf(_safeHTMLElement2.default))]),\n  onAfterOpen: _propTypes2.default.func,\n  onRequestClose: _propTypes2.default.func,\n  closeTimeoutMS: _propTypes2.default.number,\n  ariaHideApp: _propTypes2.default.bool,\n  shouldFocusAfterRender: _propTypes2.default.bool,\n  shouldCloseOnOverlayClick: _propTypes2.default.bool,\n  shouldReturnFocusAfterClose: _propTypes2.default.bool,\n  preventScroll: _propTypes2.default.bool,\n  parentSelector: _propTypes2.default.func,\n  aria: _propTypes2.default.object,\n  data: _propTypes2.default.object,\n  role: _propTypes2.default.string,\n  contentLabel: _propTypes2.default.string,\n  shouldCloseOnEsc: _propTypes2.default.bool,\n  overlayRef: _propTypes2.default.func,\n  contentRef: _propTypes2.default.func,\n  id: _propTypes2.default.string,\n  overlayElement: _propTypes2.default.func,\n  contentElement: _propTypes2.default.func\n};\nModal.defaultProps = {\n  isOpen: false,\n  portalClassName: portalClassName,\n  bodyOpenClassName: bodyOpenClassName,\n  role: \"dialog\",\n  ariaHideApp: true,\n  closeTimeoutMS: 0,\n  shouldFocusAfterRender: true,\n  shouldCloseOnEsc: true,\n  shouldCloseOnOverlayClick: true,\n  shouldReturnFocusAfterClose: true,\n  preventScroll: false,\n  parentSelector: function parentSelector() {\n    return document.body;\n  },\n  overlayElement: function overlayElement(props, contentEl) {\n    return _react2.default.createElement(\n      \"div\",\n      props,\n      contentEl\n    );\n  },\n  contentElement: function contentElement(props, children) {\n    return _react2.default.createElement(\n      \"div\",\n      props,\n      children\n    );\n  }\n};\nModal.defaultStyles = {\n  overlay: {\n    position: \"fixed\",\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    backgroundColor: \"rgba(255, 255, 255, 0.75)\"\n  },\n  content: {\n    position: \"absolute\",\n    top: \"40px\",\n    left: \"40px\",\n    right: \"40px\",\n    bottom: \"40px\",\n    border: \"1px solid #ccc\",\n    background: \"#fff\",\n    overflow: \"auto\",\n    WebkitOverflowScrolling: \"touch\",\n    borderRadius: \"4px\",\n    outline: \"none\",\n    padding: \"20px\"\n  }\n};\n\n\n(0, _reactLifecyclesCompat.polyfill)(Modal);\n\nif (process.env.NODE_ENV !== \"production\") {\n  Modal.setCreateHTMLElement = function (fn) {\n    return createHTMLElement = fn;\n  };\n}\n\nexports.default = Modal;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require(\"react\");\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _focusManager = require(\"../helpers/focusManager\");\n\nvar focusManager = _interopRequireWildcard(_focusManager);\n\nvar _scopeTab = require(\"../helpers/scopeTab\");\n\nvar _scopeTab2 = _interopRequireDefault(_scopeTab);\n\nvar _ariaAppHider = require(\"../helpers/ariaAppHider\");\n\nvar ariaAppHider = _interopRequireWildcard(_ariaAppHider);\n\nvar _classList = require(\"../helpers/classList\");\n\nvar classList = _interopRequireWildcard(_classList);\n\nvar _safeHTMLElement = require(\"../helpers/safeHTMLElement\");\n\nvar _safeHTMLElement2 = _interopRequireDefault(_safeHTMLElement);\n\nvar _portalOpenInstances = require(\"../helpers/portalOpenInstances\");\n\nvar _portalOpenInstances2 = _interopRequireDefault(_portalOpenInstances);\n\nrequire(\"../helpers/bodyTrap\");\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n// so that our CSS is statically analyzable\nvar CLASS_NAMES = {\n  overlay: \"ReactModal__Overlay\",\n  content: \"ReactModal__Content\"\n};\n\nvar TAB_KEY = 9;\nvar ESC_KEY = 27;\n\nvar ariaHiddenInstances = 0;\n\nvar ModalPortal = function (_Component) {\n  _inherits(ModalPortal, _Component);\n\n  function ModalPortal(props) {\n    _classCallCheck(this, ModalPortal);\n\n    var _this = _possibleConstructorReturn(this, (ModalPortal.__proto__ || Object.getPrototypeOf(ModalPortal)).call(this, props));\n\n    _this.setOverlayRef = function (overlay) {\n      _this.overlay = overlay;\n      _this.props.overlayRef && _this.props.overlayRef(overlay);\n    };\n\n    _this.setContentRef = function (content) {\n      _this.content = content;\n      _this.props.contentRef && _this.props.contentRef(content);\n    };\n\n    _this.afterClose = function () {\n      var _this$props = _this.props,\n          appElement = _this$props.appElement,\n          ariaHideApp = _this$props.ariaHideApp,\n          htmlOpenClassName = _this$props.htmlOpenClassName,\n          bodyOpenClassName = _this$props.bodyOpenClassName;\n\n      // Remove classes.\n\n      bodyOpenClassName && classList.remove(document.body, bodyOpenClassName);\n\n      htmlOpenClassName && classList.remove(document.getElementsByTagName(\"html\")[0], htmlOpenClassName);\n\n      // Reset aria-hidden attribute if all modals have been removed\n      if (ariaHideApp && ariaHiddenInstances > 0) {\n        ariaHiddenInstances -= 1;\n\n        if (ariaHiddenInstances === 0) {\n          ariaAppHider.show(appElement);\n        }\n      }\n\n      if (_this.props.shouldFocusAfterRender) {\n        if (_this.props.shouldReturnFocusAfterClose) {\n          focusManager.returnFocus(_this.props.preventScroll);\n          focusManager.teardownScopedFocus();\n        } else {\n          focusManager.popWithoutFocus();\n        }\n      }\n\n      if (_this.props.onAfterClose) {\n        _this.props.onAfterClose();\n      }\n\n      _portalOpenInstances2.default.deregister(_this);\n    };\n\n    _this.open = function () {\n      _this.beforeOpen();\n      if (_this.state.afterOpen && _this.state.beforeClose) {\n        clearTimeout(_this.closeTimer);\n        _this.setState({ beforeClose: false });\n      } else {\n        if (_this.props.shouldFocusAfterRender) {\n          focusManager.setupScopedFocus(_this.node);\n          focusManager.markForFocusLater();\n        }\n\n        _this.setState({ isOpen: true }, function () {\n          _this.openAnimationFrame = requestAnimationFrame(function () {\n            _this.setState({ afterOpen: true });\n\n            if (_this.props.isOpen && _this.props.onAfterOpen) {\n              _this.props.onAfterOpen({\n                overlayEl: _this.overlay,\n                contentEl: _this.content\n              });\n            }\n          });\n        });\n      }\n    };\n\n    _this.close = function () {\n      if (_this.props.closeTimeoutMS > 0) {\n        _this.closeWithTimeout();\n      } else {\n        _this.closeWithoutTimeout();\n      }\n    };\n\n    _this.focusContent = function () {\n      return _this.content && !_this.contentHasFocus() && _this.content.focus({ preventScroll: true });\n    };\n\n    _this.closeWithTimeout = function () {\n      var closesAt = Date.now() + _this.props.closeTimeoutMS;\n      _this.setState({ beforeClose: true, closesAt: closesAt }, function () {\n        _this.closeTimer = setTimeout(_this.closeWithoutTimeout, _this.state.closesAt - Date.now());\n      });\n    };\n\n    _this.closeWithoutTimeout = function () {\n      _this.setState({\n        beforeClose: false,\n        isOpen: false,\n        afterOpen: false,\n        closesAt: null\n      }, _this.afterClose);\n    };\n\n    _this.handleKeyDown = function (event) {\n      if (event.keyCode === TAB_KEY) {\n        (0, _scopeTab2.default)(_this.content, event);\n      }\n\n      if (_this.props.shouldCloseOnEsc && event.keyCode === ESC_KEY) {\n        event.stopPropagation();\n        _this.requestClose(event);\n      }\n    };\n\n    _this.handleOverlayOnClick = function (event) {\n      if (_this.shouldClose === null) {\n        _this.shouldClose = true;\n      }\n\n      if (_this.shouldClose && _this.props.shouldCloseOnOverlayClick) {\n        if (_this.ownerHandlesClose()) {\n          _this.requestClose(event);\n        } else {\n          _this.focusContent();\n        }\n      }\n      _this.shouldClose = null;\n    };\n\n    _this.handleContentOnMouseUp = function () {\n      _this.shouldClose = false;\n    };\n\n    _this.handleOverlayOnMouseDown = function (event) {\n      if (!_this.props.shouldCloseOnOverlayClick && event.target == _this.overlay) {\n        event.preventDefault();\n      }\n    };\n\n    _this.handleContentOnClick = function () {\n      _this.shouldClose = false;\n    };\n\n    _this.handleContentOnMouseDown = function () {\n      _this.shouldClose = false;\n    };\n\n    _this.requestClose = function (event) {\n      return _this.ownerHandlesClose() && _this.props.onRequestClose(event);\n    };\n\n    _this.ownerHandlesClose = function () {\n      return _this.props.onRequestClose;\n    };\n\n    _this.shouldBeClosed = function () {\n      return !_this.state.isOpen && !_this.state.beforeClose;\n    };\n\n    _this.contentHasFocus = function () {\n      return document.activeElement === _this.content || _this.content.contains(document.activeElement);\n    };\n\n    _this.buildClassName = function (which, additional) {\n      var classNames = (typeof additional === \"undefined\" ? \"undefined\" : _typeof(additional)) === \"object\" ? additional : {\n        base: CLASS_NAMES[which],\n        afterOpen: CLASS_NAMES[which] + \"--after-open\",\n        beforeClose: CLASS_NAMES[which] + \"--before-close\"\n      };\n      var className = classNames.base;\n      if (_this.state.afterOpen) {\n        className = className + \" \" + classNames.afterOpen;\n      }\n      if (_this.state.beforeClose) {\n        className = className + \" \" + classNames.beforeClose;\n      }\n      return typeof additional === \"string\" && additional ? className + \" \" + additional : className;\n    };\n\n    _this.attributesFromObject = function (prefix, items) {\n      return Object.keys(items).reduce(function (acc, name) {\n        acc[prefix + \"-\" + name] = items[name];\n        return acc;\n      }, {});\n    };\n\n    _this.state = {\n      afterOpen: false,\n      beforeClose: false\n    };\n\n    _this.shouldClose = null;\n    _this.moveFromContentToOverlay = null;\n    return _this;\n  }\n\n  _createClass(ModalPortal, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.isOpen) {\n        this.open();\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (process.env.NODE_ENV !== \"production\") {\n        if (prevProps.bodyOpenClassName !== this.props.bodyOpenClassName) {\n          // eslint-disable-next-line no-console\n          console.warn('React-Modal: \"bodyOpenClassName\" prop has been modified. ' + \"This may cause unexpected behavior when multiple modals are open.\");\n        }\n        if (prevProps.htmlOpenClassName !== this.props.htmlOpenClassName) {\n          // eslint-disable-next-line no-console\n          console.warn('React-Modal: \"htmlOpenClassName\" prop has been modified. ' + \"This may cause unexpected behavior when multiple modals are open.\");\n        }\n      }\n\n      if (this.props.isOpen && !prevProps.isOpen) {\n        this.open();\n      } else if (!this.props.isOpen && prevProps.isOpen) {\n        this.close();\n      }\n\n      // Focus only needs to be set once when the modal is being opened\n      if (this.props.shouldFocusAfterRender && this.state.isOpen && !prevState.isOpen) {\n        this.focusContent();\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (this.state.isOpen) {\n        this.afterClose();\n      }\n      clearTimeout(this.closeTimer);\n      cancelAnimationFrame(this.openAnimationFrame);\n    }\n  }, {\n    key: \"beforeOpen\",\n    value: function beforeOpen() {\n      var _props = this.props,\n          appElement = _props.appElement,\n          ariaHideApp = _props.ariaHideApp,\n          htmlOpenClassName = _props.htmlOpenClassName,\n          bodyOpenClassName = _props.bodyOpenClassName;\n\n      // Add classes.\n\n      bodyOpenClassName && classList.add(document.body, bodyOpenClassName);\n\n      htmlOpenClassName && classList.add(document.getElementsByTagName(\"html\")[0], htmlOpenClassName);\n\n      if (ariaHideApp) {\n        ariaHiddenInstances += 1;\n        ariaAppHider.hide(appElement);\n      }\n\n      _portalOpenInstances2.default.register(this);\n    }\n\n    // Don't steal focus from inner elements\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _props2 = this.props,\n          id = _props2.id,\n          className = _props2.className,\n          overlayClassName = _props2.overlayClassName,\n          defaultStyles = _props2.defaultStyles,\n          children = _props2.children;\n\n      var contentStyles = className ? {} : defaultStyles.content;\n      var overlayStyles = overlayClassName ? {} : defaultStyles.overlay;\n\n      if (this.shouldBeClosed()) {\n        return null;\n      }\n\n      var overlayProps = {\n        ref: this.setOverlayRef,\n        className: this.buildClassName(\"overlay\", overlayClassName),\n        style: _extends({}, overlayStyles, this.props.style.overlay),\n        onClick: this.handleOverlayOnClick,\n        onMouseDown: this.handleOverlayOnMouseDown\n      };\n\n      var contentProps = _extends({\n        id: id,\n        ref: this.setContentRef,\n        style: _extends({}, contentStyles, this.props.style.content),\n        className: this.buildClassName(\"content\", className),\n        tabIndex: \"-1\",\n        onKeyDown: this.handleKeyDown,\n        onMouseDown: this.handleContentOnMouseDown,\n        onMouseUp: this.handleContentOnMouseUp,\n        onClick: this.handleContentOnClick,\n        role: this.props.role,\n        \"aria-label\": this.props.contentLabel\n      }, this.attributesFromObject(\"aria\", _extends({ modal: true }, this.props.aria)), this.attributesFromObject(\"data\", this.props.data || {}), {\n        \"data-testid\": this.props.testId\n      });\n\n      var contentElement = this.props.contentElement(contentProps, children);\n      return this.props.overlayElement(overlayProps, contentElement);\n    }\n  }]);\n\n  return ModalPortal;\n}(_react.Component);\n\nModalPortal.defaultProps = {\n  style: {\n    overlay: {},\n    content: {}\n  },\n  defaultStyles: {}\n};\nModalPortal.propTypes = {\n  isOpen: _propTypes2.default.bool.isRequired,\n  defaultStyles: _propTypes2.default.shape({\n    content: _propTypes2.default.object,\n    overlay: _propTypes2.default.object\n  }),\n  style: _propTypes2.default.shape({\n    content: _propTypes2.default.object,\n    overlay: _propTypes2.default.object\n  }),\n  className: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.object]),\n  overlayClassName: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.object]),\n  bodyOpenClassName: _propTypes2.default.string,\n  htmlOpenClassName: _propTypes2.default.string,\n  ariaHideApp: _propTypes2.default.bool,\n  appElement: _propTypes2.default.oneOfType([_propTypes2.default.instanceOf(_safeHTMLElement2.default), _propTypes2.default.instanceOf(_safeHTMLElement.SafeHTMLCollection), _propTypes2.default.instanceOf(_safeHTMLElement.SafeNodeList), _propTypes2.default.arrayOf(_propTypes2.default.instanceOf(_safeHTMLElement2.default))]),\n  onAfterOpen: _propTypes2.default.func,\n  onAfterClose: _propTypes2.default.func,\n  onRequestClose: _propTypes2.default.func,\n  closeTimeoutMS: _propTypes2.default.number,\n  shouldFocusAfterRender: _propTypes2.default.bool,\n  shouldCloseOnOverlayClick: _propTypes2.default.bool,\n  shouldReturnFocusAfterClose: _propTypes2.default.bool,\n  preventScroll: _propTypes2.default.bool,\n  role: _propTypes2.default.string,\n  contentLabel: _propTypes2.default.string,\n  aria: _propTypes2.default.object,\n  data: _propTypes2.default.object,\n  children: _propTypes2.default.node,\n  shouldCloseOnEsc: _propTypes2.default.bool,\n  overlayRef: _propTypes2.default.func,\n  contentRef: _propTypes2.default.func,\n  id: _propTypes2.default.string,\n  overlayElement: _propTypes2.default.func,\n  contentElement: _propTypes2.default.func,\n  testId: _propTypes2.default.string\n};\nexports.default = ModalPortal;\nmodule.exports = exports[\"default\"];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.resetState = resetState;\nexports.log = log;\nexports.assertNodeList = assertNodeList;\nexports.setElement = setElement;\nexports.validateElement = validateElement;\nexports.hide = hide;\nexports.show = show;\nexports.documentNotReadyOrSSRTesting = documentNotReadyOrSSRTesting;\n\nvar _warning = require(\"warning\");\n\nvar _warning2 = _interopRequireDefault(_warning);\n\nvar _safeHTMLElement = require(\"./safeHTMLElement\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar globalElement = null;\n\n/* eslint-disable no-console */\n/* istanbul ignore next */\nfunction resetState() {\n  if (globalElement) {\n    if (globalElement.removeAttribute) {\n      globalElement.removeAttribute(\"aria-hidden\");\n    } else if (globalElement.length != null) {\n      globalElement.forEach(function (element) {\n        return element.removeAttribute(\"aria-hidden\");\n      });\n    } else {\n      document.querySelectorAll(globalElement).forEach(function (element) {\n        return element.removeAttribute(\"aria-hidden\");\n      });\n    }\n  }\n  globalElement = null;\n}\n\n/* istanbul ignore next */\nfunction log() {\n  if (process.env.NODE_ENV !== \"production\") {\n    var check = globalElement || {};\n    console.log(\"ariaAppHider ----------\");\n    console.log(check.nodeName, check.className, check.id);\n    console.log(\"end ariaAppHider ----------\");\n  }\n}\n/* eslint-enable no-console */\n\nfunction assertNodeList(nodeList, selector) {\n  if (!nodeList || !nodeList.length) {\n    throw new Error(\"react-modal: No elements were found for selector \" + selector + \".\");\n  }\n}\n\nfunction setElement(element) {\n  var useElement = element;\n  if (typeof useElement === \"string\" && _safeHTMLElement.canUseDOM) {\n    var el = document.querySelectorAll(useElement);\n    assertNodeList(el, useElement);\n    useElement = el;\n  }\n  globalElement = useElement || globalElement;\n  return globalElement;\n}\n\nfunction validateElement(appElement) {\n  var el = appElement || globalElement;\n  if (el) {\n    return Array.isArray(el) || el instanceof HTMLCollection || el instanceof NodeList ? el : [el];\n  } else {\n    (0, _warning2.default)(false, [\"react-modal: App element is not defined.\", \"Please use `Modal.setAppElement(el)` or set `appElement={el}`.\", \"This is needed so screen readers don't see main content\", \"when modal is opened. It is not recommended, but you can opt-out\", \"by setting `ariaHideApp={false}`.\"].join(\" \"));\n\n    return [];\n  }\n}\n\nfunction hide(appElement) {\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = validateElement(appElement)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var el = _step.value;\n\n      el.setAttribute(\"aria-hidden\", \"true\");\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n}\n\nfunction show(appElement) {\n  var _iteratorNormalCompletion2 = true;\n  var _didIteratorError2 = false;\n  var _iteratorError2 = undefined;\n\n  try {\n    for (var _iterator2 = validateElement(appElement)[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n      var el = _step2.value;\n\n      el.removeAttribute(\"aria-hidden\");\n    }\n  } catch (err) {\n    _didIteratorError2 = true;\n    _iteratorError2 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion2 && _iterator2.return) {\n        _iterator2.return();\n      }\n    } finally {\n      if (_didIteratorError2) {\n        throw _iteratorError2;\n      }\n    }\n  }\n}\n\nfunction documentNotReadyOrSSRTesting() {\n  globalElement = null;\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.resetState = resetState;\nexports.log = log;\n\nvar _portalOpenInstances = require(\"./portalOpenInstances\");\n\nvar _portalOpenInstances2 = _interopRequireDefault(_portalOpenInstances);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Body focus trap see Issue #742\n\nvar before = void 0,\n    after = void 0,\n    instances = [];\n\n/* eslint-disable no-console */\n/* istanbul ignore next */\nfunction resetState() {\n  var _arr = [before, after];\n\n  for (var _i = 0; _i < _arr.length; _i++) {\n    var item = _arr[_i];\n    if (!item) continue;\n    item.parentNode && item.parentNode.removeChild(item);\n  }\n  before = after = null;\n  instances = [];\n}\n\n/* istanbul ignore next */\nfunction log() {\n  console.log(\"bodyTrap ----------\");\n  console.log(instances.length);\n  var _arr2 = [before, after];\n  for (var _i2 = 0; _i2 < _arr2.length; _i2++) {\n    var item = _arr2[_i2];\n    var check = item || {};\n    console.log(check.nodeName, check.className, check.id);\n  }\n  console.log(\"edn bodyTrap ----------\");\n}\n/* eslint-enable no-console */\n\nfunction focusContent() {\n  if (instances.length === 0) {\n    if (process.env.NODE_ENV !== \"production\") {\n      // eslint-disable-next-line no-console\n      console.warn(\"React-Modal: Open instances > 0 expected\");\n    }\n    return;\n  }\n  instances[instances.length - 1].focusContent();\n}\n\nfunction bodyTrap(eventType, openInstances) {\n  if (!before && !after) {\n    before = document.createElement(\"div\");\n    before.setAttribute(\"data-react-modal-body-trap\", \"\");\n    before.style.position = \"absolute\";\n    before.style.opacity = \"0\";\n    before.setAttribute(\"tabindex\", \"0\");\n    before.addEventListener(\"focus\", focusContent);\n    after = before.cloneNode();\n    after.addEventListener(\"focus\", focusContent);\n  }\n\n  instances = openInstances;\n\n  if (instances.length > 0) {\n    // Add focus trap\n    if (document.body.firstChild !== before) {\n      document.body.insertBefore(before, document.body.firstChild);\n    }\n    if (document.body.lastChild !== after) {\n      document.body.appendChild(after);\n    }\n  } else {\n    // Remove focus trap\n    if (before.parentElement) {\n      before.parentElement.removeChild(before);\n    }\n    if (after.parentElement) {\n      after.parentElement.removeChild(after);\n    }\n  }\n}\n\n_portalOpenInstances2.default.subscribe(bodyTrap);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.resetState = resetState;\nexports.log = log;\nvar htmlClassList = {};\nvar docBodyClassList = {};\n\n/* eslint-disable no-console */\n/* istanbul ignore next */\nfunction removeClass(at, cls) {\n  at.classList.remove(cls);\n}\n\n/* istanbul ignore next */\nfunction resetState() {\n  var htmlElement = document.getElementsByTagName(\"html\")[0];\n  for (var cls in htmlClassList) {\n    removeClass(htmlElement, htmlClassList[cls]);\n  }\n\n  var body = document.body;\n  for (var _cls in docBodyClassList) {\n    removeClass(body, docBodyClassList[_cls]);\n  }\n\n  htmlClassList = {};\n  docBodyClassList = {};\n}\n\n/* istanbul ignore next */\nfunction log() {\n  if (process.env.NODE_ENV !== \"production\") {\n    var classes = document.getElementsByTagName(\"html\")[0].className;\n    var buffer = \"Show tracked classes:\\n\\n\";\n\n    buffer += \"<html /> (\" + classes + \"):\\n  \";\n    for (var x in htmlClassList) {\n      buffer += \"  \" + x + \" \" + htmlClassList[x] + \"\\n  \";\n    }\n\n    classes = document.body.className;\n\n    buffer += \"\\n\\ndoc.body (\" + classes + \"):\\n  \";\n    for (var _x in docBodyClassList) {\n      buffer += \"  \" + _x + \" \" + docBodyClassList[_x] + \"\\n  \";\n    }\n\n    buffer += \"\\n\";\n\n    console.log(buffer);\n  }\n}\n/* eslint-enable no-console */\n\n/**\n * Track the number of reference of a class.\n * @param {object} poll The poll to receive the reference.\n * @param {string} className The class name.\n * @return {string}\n */\nvar incrementReference = function incrementReference(poll, className) {\n  if (!poll[className]) {\n    poll[className] = 0;\n  }\n  poll[className] += 1;\n  return className;\n};\n\n/**\n * Drop the reference of a class.\n * @param {object} poll The poll to receive the reference.\n * @param {string} className The class name.\n * @return {string}\n */\nvar decrementReference = function decrementReference(poll, className) {\n  if (poll[className]) {\n    poll[className] -= 1;\n  }\n  return className;\n};\n\n/**\n * Track a class and add to the given class list.\n * @param {Object} classListRef A class list of an element.\n * @param {Object} poll         The poll to be used.\n * @param {Array}  classes      The list of classes to be tracked.\n */\nvar trackClass = function trackClass(classListRef, poll, classes) {\n  classes.forEach(function (className) {\n    incrementReference(poll, className);\n    classListRef.add(className);\n  });\n};\n\n/**\n * Untrack a class and remove from the given class list if the reference\n * reaches 0.\n * @param {Object} classListRef A class list of an element.\n * @param {Object} poll         The poll to be used.\n * @param {Array}  classes      The list of classes to be untracked.\n */\nvar untrackClass = function untrackClass(classListRef, poll, classes) {\n  classes.forEach(function (className) {\n    decrementReference(poll, className);\n    poll[className] === 0 && classListRef.remove(className);\n  });\n};\n\n/**\n * Public inferface to add classes to the document.body.\n * @param {string} bodyClass The class string to be added.\n *                           It may contain more then one class\n *                           with ' ' as separator.\n */\nvar add = exports.add = function add(element, classString) {\n  return trackClass(element.classList, element.nodeName.toLowerCase() == \"html\" ? htmlClassList : docBodyClassList, classString.split(\" \"));\n};\n\n/**\n * Public inferface to remove classes from the document.body.\n * @param {string} bodyClass The class string to be added.\n *                           It may contain more then one class\n *                           with ' ' as separator.\n */\nvar remove = exports.remove = function remove(element, classString) {\n  return untrackClass(element.classList, element.nodeName.toLowerCase() == \"html\" ? htmlClassList : docBodyClassList, classString.split(\" \"));\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.resetState = resetState;\nexports.log = log;\nexports.handleBlur = handleBlur;\nexports.handleFocus = handleFocus;\nexports.markForFocusLater = markForFocusLater;\nexports.returnFocus = returnFocus;\nexports.popWithoutFocus = popWithoutFocus;\nexports.setupScopedFocus = setupScopedFocus;\nexports.teardownScopedFocus = teardownScopedFocus;\n\nvar _tabbable = require(\"../helpers/tabbable\");\n\nvar _tabbable2 = _interopRequireDefault(_tabbable);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar focusLaterElements = [];\nvar modalElement = null;\nvar needToFocus = false;\n\n/* eslint-disable no-console */\n/* istanbul ignore next */\nfunction resetState() {\n  focusLaterElements = [];\n}\n\n/* istanbul ignore next */\nfunction log() {\n  if (process.env.NODE_ENV !== \"production\") {\n    console.log(\"focusManager ----------\");\n    focusLaterElements.forEach(function (f) {\n      var check = f || {};\n      console.log(check.nodeName, check.className, check.id);\n    });\n    console.log(\"end focusManager ----------\");\n  }\n}\n/* eslint-enable no-console */\n\nfunction handleBlur() {\n  needToFocus = true;\n}\n\nfunction handleFocus() {\n  if (needToFocus) {\n    needToFocus = false;\n    if (!modalElement) {\n      return;\n    }\n    // need to see how jQuery shims document.on('focusin') so we don't need the\n    // setTimeout, firefox doesn't support focusin, if it did, we could focus\n    // the element outside of a setTimeout. Side-effect of this implementation\n    // is that the document.body gets focus, and then we focus our element right\n    // after, seems fine.\n    setTimeout(function () {\n      if (modalElement.contains(document.activeElement)) {\n        return;\n      }\n      var el = (0, _tabbable2.default)(modalElement)[0] || modalElement;\n      el.focus();\n    }, 0);\n  }\n}\n\nfunction markForFocusLater() {\n  focusLaterElements.push(document.activeElement);\n}\n\n/* eslint-disable no-console */\nfunction returnFocus() {\n  var preventScroll = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n  var toFocus = null;\n  try {\n    if (focusLaterElements.length !== 0) {\n      toFocus = focusLaterElements.pop();\n      toFocus.focus({ preventScroll: preventScroll });\n    }\n    return;\n  } catch (e) {\n    console.warn([\"You tried to return focus to\", toFocus, \"but it is not in the DOM anymore\"].join(\" \"));\n  }\n}\n/* eslint-enable no-console */\n\nfunction popWithoutFocus() {\n  focusLaterElements.length > 0 && focusLaterElements.pop();\n}\n\nfunction setupScopedFocus(element) {\n  modalElement = element;\n\n  if (window.addEventListener) {\n    window.addEventListener(\"blur\", handleBlur, false);\n    document.addEventListener(\"focus\", handleFocus, true);\n  } else {\n    window.attachEvent(\"onBlur\", handleBlur);\n    document.attachEvent(\"onFocus\", handleFocus);\n  }\n}\n\nfunction teardownScopedFocus() {\n  modalElement = null;\n\n  if (window.addEventListener) {\n    window.removeEventListener(\"blur\", handleBlur);\n    document.removeEventListener(\"focus\", handleFocus);\n  } else {\n    window.detachEvent(\"onBlur\", handleBlur);\n    document.detachEvent(\"onFocus\", handleFocus);\n  }\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.log = log;\nexports.resetState = resetState;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n// Tracks portals that are open and emits events to subscribers\n\nvar PortalOpenInstances = function PortalOpenInstances() {\n  var _this = this;\n\n  _classCallCheck(this, PortalOpenInstances);\n\n  this.register = function (openInstance) {\n    if (_this.openInstances.indexOf(openInstance) !== -1) {\n      if (process.env.NODE_ENV !== \"production\") {\n        // eslint-disable-next-line no-console\n        console.warn(\"React-Modal: Cannot register modal instance that's already open\");\n      }\n      return;\n    }\n    _this.openInstances.push(openInstance);\n    _this.emit(\"register\");\n  };\n\n  this.deregister = function (openInstance) {\n    var index = _this.openInstances.indexOf(openInstance);\n    if (index === -1) {\n      if (process.env.NODE_ENV !== \"production\") {\n        // eslint-disable-next-line no-console\n        console.warn(\"React-Modal: Unable to deregister \" + openInstance + \" as \" + \"it was never registered\");\n      }\n      return;\n    }\n    _this.openInstances.splice(index, 1);\n    _this.emit(\"deregister\");\n  };\n\n  this.subscribe = function (callback) {\n    _this.subscribers.push(callback);\n  };\n\n  this.emit = function (eventType) {\n    _this.subscribers.forEach(function (subscriber) {\n      return subscriber(eventType,\n      // shallow copy to avoid accidental mutation\n      _this.openInstances.slice());\n    });\n  };\n\n  this.openInstances = [];\n  this.subscribers = [];\n};\n\nvar portalOpenInstances = new PortalOpenInstances();\n\n/* eslint-disable no-console */\n/* istanbul ignore next */\nfunction log() {\n  console.log(\"portalOpenInstances ----------\");\n  console.log(portalOpenInstances.openInstances.length);\n  portalOpenInstances.openInstances.forEach(function (p) {\n    return console.log(p);\n  });\n  console.log(\"end portalOpenInstances ----------\");\n}\n\n/* istanbul ignore next */\nfunction resetState() {\n  portalOpenInstances = new PortalOpenInstances();\n}\n/* eslint-enable no-console */\n\nexports.default = portalOpenInstances;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.canUseDOM = exports.SafeNodeList = exports.SafeHTMLCollection = undefined;\n\nvar _exenv = require(\"exenv\");\n\nvar _exenv2 = _interopRequireDefault(_exenv);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar EE = _exenv2.default;\n\nvar SafeHTMLElement = EE.canUseDOM ? window.HTMLElement : {};\n\nvar SafeHTMLCollection = exports.SafeHTMLCollection = EE.canUseDOM ? window.HTMLCollection : {};\n\nvar SafeNodeList = exports.SafeNodeList = EE.canUseDOM ? window.NodeList : {};\n\nvar canUseDOM = exports.canUseDOM = EE.canUseDOM;\n\nexports.default = SafeHTMLElement;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = scopeTab;\n\nvar _tabbable = require(\"./tabbable\");\n\nvar _tabbable2 = _interopRequireDefault(_tabbable);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction getActiveElement() {\n  var el = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : document;\n\n  return el.activeElement.shadowRoot ? getActiveElement(el.activeElement.shadowRoot) : el.activeElement;\n}\n\nfunction scopeTab(node, event) {\n  var tabbable = (0, _tabbable2.default)(node);\n\n  if (!tabbable.length) {\n    // Do nothing, since there are no elements that can receive focus.\n    event.preventDefault();\n    return;\n  }\n\n  var target = void 0;\n\n  var shiftKey = event.shiftKey;\n  var head = tabbable[0];\n  var tail = tabbable[tabbable.length - 1];\n  var activeElement = getActiveElement();\n\n  // proceed with default browser behavior on tab.\n  // Focus on last element on shift + tab.\n  if (node === activeElement) {\n    if (!shiftKey) return;\n    target = tail;\n  }\n\n  if (tail === activeElement && !shiftKey) {\n    target = head;\n  }\n\n  if (head === activeElement && shiftKey) {\n    target = tail;\n  }\n\n  if (target) {\n    event.preventDefault();\n    target.focus();\n    return;\n  }\n\n  // Safari radio issue.\n  //\n  // Safari does not move the focus to the radio button,\n  // so we need to force it to really walk through all elements.\n  //\n  // This is very error prone, since we are trying to guess\n  // if it is a safari browser from the first occurence between\n  // chrome or safari.\n  //\n  // The chrome user agent contains the first ocurrence\n  // as the 'chrome/version' and later the 'safari/version'.\n  var checkSafari = /(\\bChrome\\b|\\bSafari\\b)\\//.exec(navigator.userAgent);\n  var isSafariDesktop = checkSafari != null && checkSafari[1] != \"Chrome\" && /\\biPod\\b|\\biPad\\b/g.exec(navigator.userAgent) == null;\n\n  // If we are not in safari desktop, let the browser control\n  // the focus\n  if (!isSafariDesktop) return;\n\n  var x = tabbable.indexOf(activeElement);\n\n  if (x > -1) {\n    x += shiftKey ? -1 : 1;\n  }\n\n  target = tabbable[x];\n\n  // If the tabbable element does not exist,\n  // focus head/tail based on shiftKey\n  if (typeof target === \"undefined\") {\n    event.preventDefault();\n    target = shiftKey ? tail : head;\n    target.focus();\n    return;\n  }\n\n  event.preventDefault();\n\n  target.focus();\n}\nmodule.exports = exports[\"default\"];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = findTabbableDescendants;\n/*!\n * Adapted from jQuery UI core\n *\n * http://jqueryui.com\n *\n * Copyright 2014 jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/category/ui-core/\n */\n\nvar tabbableNode = /input|select|textarea|button|object|iframe/;\n\nfunction hidesContents(element) {\n  var zeroSize = element.offsetWidth <= 0 && element.offsetHeight <= 0;\n\n  // If the node is empty, this is good enough\n  if (zeroSize && !element.innerHTML) return true;\n\n  try {\n    // Otherwise we need to check some styles\n    var style = window.getComputedStyle(element);\n    return zeroSize ? style.getPropertyValue(\"overflow\") !== \"visible\" ||\n    // if 'overflow: visible' set, check if there is actually any overflow\n    element.scrollWidth <= 0 && element.scrollHeight <= 0 : style.getPropertyValue(\"display\") == \"none\";\n  } catch (exception) {\n    // eslint-disable-next-line no-console\n    console.warn(\"Failed to inspect element style\");\n    return false;\n  }\n}\n\nfunction visible(element) {\n  var parentElement = element;\n  var rootNode = element.getRootNode && element.getRootNode();\n  while (parentElement) {\n    if (parentElement === document.body) break;\n\n    // if we are not hidden yet, skip to checking outside the Web Component\n    if (rootNode && parentElement === rootNode) parentElement = rootNode.host.parentNode;\n\n    if (hidesContents(parentElement)) return false;\n    parentElement = parentElement.parentNode;\n  }\n  return true;\n}\n\nfunction focusable(element, isTabIndexNotNaN) {\n  var nodeName = element.nodeName.toLowerCase();\n  var res = tabbableNode.test(nodeName) && !element.disabled || (nodeName === \"a\" ? element.href || isTabIndexNotNaN : isTabIndexNotNaN);\n  return res && visible(element);\n}\n\nfunction tabbable(element) {\n  var tabIndex = element.getAttribute(\"tabindex\");\n  if (tabIndex === null) tabIndex = undefined;\n  var isTabIndexNaN = isNaN(tabIndex);\n  return (isTabIndexNaN || tabIndex >= 0) && focusable(element, !isTabIndexNaN);\n}\n\nfunction findTabbableDescendants(element) {\n  var descendants = [].slice.call(element.querySelectorAll(\"*\"), 0).reduce(function (finished, el) {\n    return finished.concat(!el.shadowRoot ? [el] : findTabbableDescendants(el.shadowRoot));\n  }, []);\n  return descendants.filter(tabbable);\n}\nmodule.exports = exports[\"default\"];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _Modal = require(\"./components/Modal\");\n\nvar _Modal2 = _interopRequireDefault(_Modal);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _Modal2.default;\nmodule.exports = exports[\"default\"];","/** @license React v17.0.2\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';require(\"object-assign\");var f=require(\"react\"),g=60103;exports.Fragment=60107;if(\"function\"===typeof Symbol&&Symbol.for){var h=Symbol.for;g=h(\"react.element\");exports.Fragment=h(\"react.fragment\")}var m=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n=Object.prototype.hasOwnProperty,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,k){var b,d={},e=null,l=null;void 0!==k&&(e=\"\"+k);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(l=a.ref);for(b in a)n.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:g,type:c,key:e,ref:l,props:d,_owner:m.current}}exports.jsx=q;exports.jsxs=q;\n","/** @license React v17.0.2\n * react.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var l=require(\"object-assign\"),n=60103,p=60106;exports.Fragment=60107;exports.StrictMode=60108;exports.Profiler=60114;var q=60109,r=60110,t=60112;exports.Suspense=60113;var u=60115,v=60116;\nif(\"function\"===typeof Symbol&&Symbol.for){var w=Symbol.for;n=w(\"react.element\");p=w(\"react.portal\");exports.Fragment=w(\"react.fragment\");exports.StrictMode=w(\"react.strict_mode\");exports.Profiler=w(\"react.profiler\");q=w(\"react.provider\");r=w(\"react.context\");t=w(\"react.forward_ref\");exports.Suspense=w(\"react.suspense\");u=w(\"react.memo\");v=w(\"react.lazy\")}var x=\"function\"===typeof Symbol&&Symbol.iterator;\nfunction y(a){if(null===a||\"object\"!==typeof a)return null;a=x&&a[x]||a[\"@@iterator\"];return\"function\"===typeof a?a:null}function z(a){for(var b=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+a,c=1;c<arguments.length;c++)b+=\"&args[]=\"+encodeURIComponent(arguments[c]);return\"Minified React error #\"+a+\"; visit \"+b+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\"}\nvar A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B={};function C(a,b,c){this.props=a;this.context=b;this.refs=B;this.updater=c||A}C.prototype.isReactComponent={};C.prototype.setState=function(a,b){if(\"object\"!==typeof a&&\"function\"!==typeof a&&null!=a)throw Error(z(85));this.updater.enqueueSetState(this,a,b,\"setState\")};C.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,\"forceUpdate\")};\nfunction D(){}D.prototype=C.prototype;function E(a,b,c){this.props=a;this.context=b;this.refs=B;this.updater=c||A}var F=E.prototype=new D;F.constructor=E;l(F,C.prototype);F.isPureReactComponent=!0;var G={current:null},H=Object.prototype.hasOwnProperty,I={key:!0,ref:!0,__self:!0,__source:!0};\nfunction J(a,b,c){var e,d={},k=null,h=null;if(null!=b)for(e in void 0!==b.ref&&(h=b.ref),void 0!==b.key&&(k=\"\"+b.key),b)H.call(b,e)&&!I.hasOwnProperty(e)&&(d[e]=b[e]);var g=arguments.length-2;if(1===g)d.children=c;else if(1<g){for(var f=Array(g),m=0;m<g;m++)f[m]=arguments[m+2];d.children=f}if(a&&a.defaultProps)for(e in g=a.defaultProps,g)void 0===d[e]&&(d[e]=g[e]);return{$$typeof:n,type:a,key:k,ref:h,props:d,_owner:G.current}}\nfunction K(a,b){return{$$typeof:n,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}}function L(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===n}function escape(a){var b={\"=\":\"=0\",\":\":\"=2\"};return\"$\"+a.replace(/[=:]/g,function(a){return b[a]})}var M=/\\/+/g;function N(a,b){return\"object\"===typeof a&&null!==a&&null!=a.key?escape(\"\"+a.key):b.toString(36)}\nfunction O(a,b,c,e,d){var k=typeof a;if(\"undefined\"===k||\"boolean\"===k)a=null;var h=!1;if(null===a)h=!0;else switch(k){case \"string\":case \"number\":h=!0;break;case \"object\":switch(a.$$typeof){case n:case p:h=!0}}if(h)return h=a,d=d(h),a=\"\"===e?\".\"+N(h,0):e,Array.isArray(d)?(c=\"\",null!=a&&(c=a.replace(M,\"$&/\")+\"/\"),O(d,b,c,\"\",function(a){return a})):null!=d&&(L(d)&&(d=K(d,c+(!d.key||h&&h.key===d.key?\"\":(\"\"+d.key).replace(M,\"$&/\")+\"/\")+a)),b.push(d)),1;h=0;e=\"\"===e?\".\":e+\":\";if(Array.isArray(a))for(var g=\n0;g<a.length;g++){k=a[g];var f=e+N(k,g);h+=O(k,b,c,f,d)}else if(f=y(a),\"function\"===typeof f)for(a=f.call(a),g=0;!(k=a.next()).done;)k=k.value,f=e+N(k,g++),h+=O(k,b,c,f,d);else if(\"object\"===k)throw b=\"\"+a,Error(z(31,\"[object Object]\"===b?\"object with keys {\"+Object.keys(a).join(\", \")+\"}\":b));return h}function P(a,b,c){if(null==a)return a;var e=[],d=0;O(a,e,\"\",\"\",function(a){return b.call(c,a,d++)});return e}\nfunction Q(a){if(-1===a._status){var b=a._result;b=b();a._status=0;a._result=b;b.then(function(b){0===a._status&&(b=b.default,a._status=1,a._result=b)},function(b){0===a._status&&(a._status=2,a._result=b)})}if(1===a._status)return a._result;throw a._result;}var R={current:null};function S(){var a=R.current;if(null===a)throw Error(z(321));return a}var T={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:G,IsSomeRendererActing:{current:!1},assign:l};\nexports.Children={map:P,forEach:function(a,b,c){P(a,function(){b.apply(this,arguments)},c)},count:function(a){var b=0;P(a,function(){b++});return b},toArray:function(a){return P(a,function(a){return a})||[]},only:function(a){if(!L(a))throw Error(z(143));return a}};exports.Component=C;exports.PureComponent=E;exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T;\nexports.cloneElement=function(a,b,c){if(null===a||void 0===a)throw Error(z(267,a));var e=l({},a.props),d=a.key,k=a.ref,h=a._owner;if(null!=b){void 0!==b.ref&&(k=b.ref,h=G.current);void 0!==b.key&&(d=\"\"+b.key);if(a.type&&a.type.defaultProps)var g=a.type.defaultProps;for(f in b)H.call(b,f)&&!I.hasOwnProperty(f)&&(e[f]=void 0===b[f]&&void 0!==g?g[f]:b[f])}var f=arguments.length-2;if(1===f)e.children=c;else if(1<f){g=Array(f);for(var m=0;m<f;m++)g[m]=arguments[m+2];e.children=g}return{$$typeof:n,type:a.type,\nkey:d,ref:k,props:e,_owner:h}};exports.createContext=function(a,b){void 0===b&&(b=null);a={$$typeof:r,_calculateChangedBits:b,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null};a.Provider={$$typeof:q,_context:a};return a.Consumer=a};exports.createElement=J;exports.createFactory=function(a){var b=J.bind(null,a);b.type=a;return b};exports.createRef=function(){return{current:null}};exports.forwardRef=function(a){return{$$typeof:t,render:a}};exports.isValidElement=L;\nexports.lazy=function(a){return{$$typeof:v,_payload:{_status:-1,_result:a},_init:Q}};exports.memo=function(a,b){return{$$typeof:u,type:a,compare:void 0===b?null:b}};exports.useCallback=function(a,b){return S().useCallback(a,b)};exports.useContext=function(a,b){return S().useContext(a,b)};exports.useDebugValue=function(){};exports.useEffect=function(a,b){return S().useEffect(a,b)};exports.useImperativeHandle=function(a,b,c){return S().useImperativeHandle(a,b,c)};\nexports.useLayoutEffect=function(a,b){return S().useLayoutEffect(a,b)};exports.useMemo=function(a,b){return S().useMemo(a,b)};exports.useReducer=function(a,b,c){return S().useReducer(a,b,c)};exports.useRef=function(a){return S().useRef(a)};exports.useState=function(a){return S().useState(a)};exports.version=\"17.0.2\";\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react.production.min.js');\n} else {\n  module.exports = require('./cjs/react.development.js');\n}\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","/** @license React v0.20.2\n * scheduler.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f,g,h,k;if(\"object\"===typeof performance&&\"function\"===typeof performance.now){var l=performance;exports.unstable_now=function(){return l.now()}}else{var p=Date,q=p.now();exports.unstable_now=function(){return p.now()-q}}\nif(\"undefined\"===typeof window||\"function\"!==typeof MessageChannel){var t=null,u=null,w=function(){if(null!==t)try{var a=exports.unstable_now();t(!0,a);t=null}catch(b){throw setTimeout(w,0),b;}};f=function(a){null!==t?setTimeout(f,0,a):(t=a,setTimeout(w,0))};g=function(a,b){u=setTimeout(a,b)};h=function(){clearTimeout(u)};exports.unstable_shouldYield=function(){return!1};k=exports.unstable_forceFrameRate=function(){}}else{var x=window.setTimeout,y=window.clearTimeout;if(\"undefined\"!==typeof console){var z=\nwindow.cancelAnimationFrame;\"function\"!==typeof window.requestAnimationFrame&&console.error(\"This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills\");\"function\"!==typeof z&&console.error(\"This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills\")}var A=!1,B=null,C=-1,D=5,E=0;exports.unstable_shouldYield=function(){return exports.unstable_now()>=\nE};k=function(){};exports.unstable_forceFrameRate=function(a){0>a||125<a?console.error(\"forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported\"):D=0<a?Math.floor(1E3/a):5};var F=new MessageChannel,G=F.port2;F.port1.onmessage=function(){if(null!==B){var a=exports.unstable_now();E=a+D;try{B(!0,a)?G.postMessage(null):(A=!1,B=null)}catch(b){throw G.postMessage(null),b;}}else A=!1};f=function(a){B=a;A||(A=!0,G.postMessage(null))};g=function(a,b){C=\nx(function(){a(exports.unstable_now())},b)};h=function(){y(C);C=-1}}function H(a,b){var c=a.length;a.push(b);a:for(;;){var d=c-1>>>1,e=a[d];if(void 0!==e&&0<I(e,b))a[d]=b,a[c]=e,c=d;else break a}}function J(a){a=a[0];return void 0===a?null:a}\nfunction K(a){var b=a[0];if(void 0!==b){var c=a.pop();if(c!==b){a[0]=c;a:for(var d=0,e=a.length;d<e;){var m=2*(d+1)-1,n=a[m],v=m+1,r=a[v];if(void 0!==n&&0>I(n,c))void 0!==r&&0>I(r,n)?(a[d]=r,a[v]=c,d=v):(a[d]=n,a[m]=c,d=m);else if(void 0!==r&&0>I(r,c))a[d]=r,a[v]=c,d=v;else break a}}return b}return null}function I(a,b){var c=a.sortIndex-b.sortIndex;return 0!==c?c:a.id-b.id}var L=[],M=[],N=1,O=null,P=3,Q=!1,R=!1,S=!1;\nfunction T(a){for(var b=J(M);null!==b;){if(null===b.callback)K(M);else if(b.startTime<=a)K(M),b.sortIndex=b.expirationTime,H(L,b);else break;b=J(M)}}function U(a){S=!1;T(a);if(!R)if(null!==J(L))R=!0,f(V);else{var b=J(M);null!==b&&g(U,b.startTime-a)}}\nfunction V(a,b){R=!1;S&&(S=!1,h());Q=!0;var c=P;try{T(b);for(O=J(L);null!==O&&(!(O.expirationTime>b)||a&&!exports.unstable_shouldYield());){var d=O.callback;if(\"function\"===typeof d){O.callback=null;P=O.priorityLevel;var e=d(O.expirationTime<=b);b=exports.unstable_now();\"function\"===typeof e?O.callback=e:O===J(L)&&K(L);T(b)}else K(L);O=J(L)}if(null!==O)var m=!0;else{var n=J(M);null!==n&&g(U,n.startTime-b);m=!1}return m}finally{O=null,P=c,Q=!1}}var W=k;exports.unstable_IdlePriority=5;\nexports.unstable_ImmediatePriority=1;exports.unstable_LowPriority=4;exports.unstable_NormalPriority=3;exports.unstable_Profiling=null;exports.unstable_UserBlockingPriority=2;exports.unstable_cancelCallback=function(a){a.callback=null};exports.unstable_continueExecution=function(){R||Q||(R=!0,f(V))};exports.unstable_getCurrentPriorityLevel=function(){return P};exports.unstable_getFirstCallbackNode=function(){return J(L)};\nexports.unstable_next=function(a){switch(P){case 1:case 2:case 3:var b=3;break;default:b=P}var c=P;P=b;try{return a()}finally{P=c}};exports.unstable_pauseExecution=function(){};exports.unstable_requestPaint=W;exports.unstable_runWithPriority=function(a,b){switch(a){case 1:case 2:case 3:case 4:case 5:break;default:a=3}var c=P;P=a;try{return b()}finally{P=c}};\nexports.unstable_scheduleCallback=function(a,b,c){var d=exports.unstable_now();\"object\"===typeof c&&null!==c?(c=c.delay,c=\"number\"===typeof c&&0<c?d+c:d):c=d;switch(a){case 1:var e=-1;break;case 2:e=250;break;case 5:e=1073741823;break;case 4:e=1E4;break;default:e=5E3}e=c+e;a={id:N++,callback:b,priorityLevel:a,startTime:c,expirationTime:e,sortIndex:-1};c>d?(a.sortIndex=c,H(M,a),null===J(L)&&a===J(M)&&(S?h():S=!0,g(U,c-d))):(a.sortIndex=e,H(L,a),R||Q||(R=!0,f(V)));return a};\nexports.unstable_wrapCallback=function(a){var b=P;return function(){var c=P;P=b;try{return a.apply(this,arguments)}finally{P=c}}};\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/scheduler.production.min.js');\n} else {\n  module.exports = require('./cjs/scheduler.development.js');\n}\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\n/**\n * Similar to invariant but only logs a warning if the condition is not met.\n * This can be used to log issues in development environments in critical\n * paths. Removing the logging code for production environments will keep the\n * same logic and follow the same code paths.\n */\n\nvar __DEV__ = process.env.NODE_ENV !== 'production';\n\nvar warning = function() {};\n\nif (__DEV__) {\n  var printWarning = function printWarning(format, args) {\n    var len = arguments.length;\n    args = new Array(len > 1 ? len - 1 : 0);\n    for (var key = 1; key < len; key++) {\n      args[key - 1] = arguments[key];\n    }\n    var argIndex = 0;\n    var message = 'Warning: ' +\n      format.replace(/%s/g, function() {\n        return args[argIndex++];\n      });\n    if (typeof console !== 'undefined') {\n      console.error(message);\n    }\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) {}\n  }\n\n  warning = function(condition, format, args) {\n    var len = arguments.length;\n    args = new Array(len > 2 ? len - 2 : 0);\n    for (var key = 2; key < len; key++) {\n      args[key - 2] = arguments[key];\n    }\n    if (format === undefined) {\n      throw new Error(\n          '`warning(condition, format, ...args)` requires a warning ' +\n          'message argument'\n      );\n    }\n    if (!condition) {\n      printWarning.apply(null, [format].concat(args));\n    }\n  };\n}\n\nmodule.exports = warning;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/\";","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import Blockly from 'blockly';\n\n// var HtmlGenerator = new Blockly.Generator('HTML');\n\nBlockly.JavaScript.ORDER_ATOMIC = 0;\nBlockly.JavaScript.ORDER_NONE = 0;\n\nBlockly.JavaScript.init = function(workspace) {};\nBlockly.JavaScript.finish = function(code) {return code;};\n\nBlockly.JavaScript.scrub_ = function(block, code) {\n  var nextBlock = block.nextConnection && block.nextConnection.targetBlock();\n  var nextCode = Blockly.JavaScript.blockToCode(nextBlock);\n  return code + nextCode;\n};\n\n\nBlockly.Blocks['class'] = {\n  init: function() {\n    this.appendDummyInput()\n        .appendField(\"Type\")\n        .appendField(new Blockly.FieldDropdown([[\"Class\",\"CLASS_TYPE\"], [\"Abstract class\",\"ABSTRACT_TYPE\"], [\"Interface\",\"INTERFACE_TYPE\"]]), \"class_type\");\n    this.appendDummyInput()\n        .appendField(\"Name\")\n        .appendField(new Blockly.FieldTextInput(\"MyClass\"), \"class_name_input\");\n    this.appendStatementInput(\"fields\")\n        .setCheck(\"class_field\")\n        .appendField(\"Fields\");\n    this.appendStatementInput(\"methods\")\n        .setCheck(\"class_method\")\n        .appendField(\"Methods\");\n    this.setInputsInline(false);\n    this.setOutput(true, \"class\");\n    this.setColour(75);\n this.setTooltip(\"Create a definition of a class/interface\");\n this.setHelpUrl(\"\");\n  }\n};\n\nBlockly.JavaScript['class'] = function(block) {\n  // var value_classname_joint = Blockly.JavaScript.valueToCode(block, 'classname_joint', Blockly.JavaScript.ORDER_ATOMIC);\n  // var statements_methods = Blockly.JavaScript.statementToCode(block, 'methods');\n  // var statements_fields = Blockly.JavaScript.statementToCode(block, 'fields');\n  // TODO: Assemble JavaScript into code variable.\n  var code = 'A class';\n  // TODO: Change ORDER_NONE to the correct strength.\n  return [code, Blockly.JavaScript.ORDER_NONE];\n};\n\nBlockly.Blocks['class_field'] = {\n    init: function() {\n      this.appendDummyInput(\"field_name\")\n        .appendField(\"Field name\")\n        .appendField(new Blockly.FieldTextInput(\"fieldName\"), \"field_name_input\");\n      this.appendValueInput(\"field_type\")\n          .setCheck(\"String\")\n          .appendField(\"Type\")\n          .appendField(new Blockly.FieldDropdown([[\"custom\",\"custom_type\"], [\"boolean\",\"bool\"], [\"string\",\"String\"], [\"float\",\"float\"], [\"char\",\"char\"], [\"int\",\"int\"], [\"double\",\"double\"]]), \"field_type\")\n          .appendField(\"| or custom ->\");\n      this.appendDummyInput(\"element_visibility\")\n          .appendField(\"Visibility\")\n          .appendField(new Blockly.FieldDropdown([[\"public\",\"public\"], [\"protected\",\"protected\"], [\"private\",\"private\"], [\"package\",\"package\"]]), \"element_visibility\");\n      this.appendDummyInput(\"is_static\")\n          .appendField(\"Is static checkbox\")\n          .appendField(new Blockly.FieldCheckbox(\"FALSE\"), \"is_static_checkbox\");\n      this.setInputsInline(false);\n      this.setPreviousStatement(true, \"class_field\");\n      this.setNextStatement(true, \"class_field\");\n      this.setColour(150);\n   this.setTooltip(\"Add a field for the class\");\n   this.setHelpUrl(\"\");\n    }\n};\n\nBlockly.JavaScript['class_field'] = function(block) {\n    // var value_field_name = Blockly.JavaScript.valueToCode(block, 'field_name', Blockly.JavaScript.ORDER_ATOMIC);\n    // var dropdown_field_type = block.getFieldValue('field_type');\n    // var value_field_type = Blockly.JavaScript.valueToCode(block, 'field_type', Blockly.JavaScript.ORDER_ATOMIC);\n    // var value_field_visibility = Blockly.JavaScript.valueToCode(block, 'field_visibility', Blockly.JavaScript.ORDER_ATOMIC);\n    // var value_is_static = Blockly.JavaScript.valueToCode(block, 'is_static', Blockly.JavaScript.ORDER_ATOMIC);\n    // TODO: Assemble JavaScript into code variable.\n    var code = 'A field';\n    return code;\n};\n\nBlockly.Blocks['class_method'] = {\n    init: function() {\n      this.appendDummyInput(\"method_name\")\n        .appendField(\"Method name\")\n        .appendField(new Blockly.FieldTextInput(\"methodName\"), \"method_name_input\");\n      this.appendValueInput(\"method_type\")\n          .setCheck(\"String\")\n          .appendField(\"Returns\")\n          .appendField(new Blockly.FieldDropdown([[\"custom\",\"custom_type\"], [\"void\",\"void\"], [\"boolean\",\"bool\"], [\"string\",\"String\"], [\"float\",\"float\"], [\"char\",\"char\"], [\"int\",\"int\"], [\"double\",\"double\"]]), \"field_type\")\n          .appendField(\"| or custom ->\");\n      this.appendStatementInput(\"parameters\")\n          .setCheck(\"function_parameter\")\n          .appendField(\"Parameters\");\n      this.appendDummyInput(\"element_visibility\")\n          .appendField(\"Visibility\")\n          .appendField(new Blockly.FieldDropdown([[\"public\",\"public\"], [\"protected\",\"protected\"], [\"private\",\"private\"], [\"package\",\"package\"]]), \"element_visibility\");\n      this.appendDummyInput(\"is_static\")\n          .appendField(\"Is static checkbox\")\n          .appendField(new Blockly.FieldCheckbox(\"FALSE\"), \"is_static_checkbox\");\n      this.setPreviousStatement(true, \"class_method\");\n      this.setNextStatement(true, \"class_method\");\n      this.setColour(10);\n   this.setTooltip(\"Create a method definition\");\n   this.setHelpUrl(\"\");\n    }\n  };\n\nBlockly.JavaScript['class_method'] = function(block) {\n    // var value_method_name = Blockly.JavaScript.valueToCode(block, 'method_name', Blockly.JavaScript.ORDER_ATOMIC);\n    // var dropdown_field_type = block.getFieldValue('field_type');\n    // var value_method_type = Blockly.JavaScript.valueToCode(block, 'method_type', Blockly.JavaScript.ORDER_ATOMIC);\n    // var statements_parameters = Blockly.JavaScript.statementToCode(block, 'parameters');\n    // var value_method_visibility = Blockly.JavaScript.valueToCode(block, 'method_visibility', Blockly.JavaScript.ORDER_ATOMIC);\n    // TODO: Assemble JavaScript into code variable.\n    var code = 'A method';\n    return code;\n};\n\nBlockly.Blocks['visibility'] = {\n    init: function() {\n      this.appendDummyInput()\n          .appendField(\"Element visibility\")\n          .appendField(new Blockly.FieldDropdown([[\"public\",\"public\"], [\"protected\",\"protected\"], [\"private\",\"private\"], [\"package\",\"package\"]]), \"element_visibility\");\n      this.setOutput(true, \"visibility\");\n      this.setColour(230);\n   this.setTooltip(\"\");\n   this.setHelpUrl(\"\");\n    }\n  };\n\nBlockly.JavaScript['visibility'] = function(block) {\n    // var dropdown_element_visibility = block.getFieldValue('element_visibility');\n    // TODO: Assemble JavaScript into code variable.\n    console.log(Blockly.JavaScript.statementToCode(block, 'content'));\n    var code = \"A visibility\";\n    // TODO: Change ORDER_NONE to the correct strength.\n    return [code, Blockly.JavaScript.ORDER_NONE];\n};\n\nBlockly.Blocks['function_parameter'] = {\n  init: function() {\n    this.appendDummyInput(\"parameter_name\")\n        .appendField(\"Parameter name\")\n        .appendField(new Blockly.FieldTextInput(\"parameterName\"), \"parameter_name_input\");\n    this.appendValueInput(\"parameter_type\")\n        .setCheck(\"String\")\n        .appendField(\"Type\")\n        .appendField(new Blockly.FieldDropdown([[\"custom\",\"custom_type\"], [\"boolean\",\"bool\"], [\"string\",\"String\"], [\"float\",\"float\"], [\"char\",\"char\"], [\"int\",\"int\"], [\"double\",\"double\"]]), \"parameter_type\")\n        .appendField(\"| or custom ->\");\n    this.setPreviousStatement(true, \"function_parameter\");\n    this.setNextStatement(true, \"function_parameter\");\n    this.setColour(180);\n this.setTooltip(\"Add a function parameter\");\n this.setHelpUrl(\"\");\n  }\n};\n\nBlockly.JavaScript['function_parameter'] = function(block) {\n  // var value_parameter_name = Blockly.JavaScript.valueToCode(block, 'parameter_name', Blockly.JavaScript.ORDER_ATOMIC);\n  // var dropdown_parameter_type = block.getFieldValue('parameter_type');\n  // var value_parameter_type = Blockly.JavaScript.valueToCode(block, 'parameter_type', Blockly.JavaScript.ORDER_ATOMIC);\n  // TODO: Assemble JavaScript into code variable.\n  var code = 'A function parameter';\n  return code;\n};\n\nBlockly.Blocks['connection_hub'] = {\n  init: function() {\n    this.appendValueInput(\"connected_class\")\n        .appendField(\"HUB\")\n        .setCheck(\"class\");\n    this.appendStatementInput(\"connections\")\n        .setCheck(\"connection\");\n    this.setColour(230);\n this.setTooltip(\"\");\n this.setHelpUrl(\"\");\n  }\n};\n\nBlockly.Blocks['connection'] = {\n  init: function() {\n    this.appendDummyInput()\n        .appendField(\"Connected using\")\n        .appendField(new Blockly.FieldDropdown([[{\"src\":\"./relationships/association.png\",\"width\":50,\"height\":20,\"alt\":\"*\"},\"ASSOCIATION\"], [{\"src\":\"./relationships/bidir_association.png\",\"width\":50,\"height\":15,\"alt\":\"*\"},\"BIDIR_ASSOCIATION\"], [{\"src\":\"./relationships/aggregation.png\",\"width\":50,\"height\":20,\"alt\":\"*\"},\"AGGREGATION\"], [{\"src\":\"./relationships/composition.png\",\"width\":50,\"height\":15,\"alt\":\"*\"},\"COMPOSITION\"], [{\"src\":\"./relationships/generalization.png\",\"width\":50,\"height\":15,\"alt\":\"*\"},\"GENERALIZATION\"], [{\"src\":\"./relationships/realization.png\",\"width\":50,\"height\":15,\"alt\":\"*\"},\"REALIZATION\"], [{\"src\":\"./relationships/dependency.png\",\"width\":50,\"height\":15,\"alt\":\"*\"},\"DEPENDENCY\"]]), \"relationship_type\");\n    this.appendDummyInput()\n        .appendField(\"cardinality\")\n        .appendField(new Blockly.FieldDropdown([[\"0..1\",\"ZERO_OR_ONE\"], [\"1\",\"ONE\"], [\"*\",\"ANY\"], [\"1..*\",\"ONE_OR_MORE\"]]), \"cardinality_dropdown\");\n    this.appendDummyInput(\"is start\")\n        .appendField(\"Is start?\")\n        .appendField(new Blockly.FieldCheckbox(\"TRUE\"), \"is_start_checkbox\");\n    this.setPreviousStatement(true, \"connection\");\n    this.setNextStatement(true, \"connection\");\n    this.setColour(230);\n this.setTooltip(\"\");\n this.setHelpUrl(\"\");\n  }\n};","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport React from \"react\";\nimport Blockly from \"blockly\";\nimport debounce from \"./debounce\";\nfunction importFromXml(xml, workspace, onImportXmlError) {\n    try {\n        Blockly.Xml.domToWorkspace(Blockly.Xml.textToDom(xml), workspace);\n        return true;\n    }\n    catch (e) {\n        if (onImportXmlError) {\n            onImportXmlError(e);\n        }\n        return false;\n    }\n}\nvar useBlocklyWorkspace = function (_a) {\n    var ref = _a.ref, initialXml = _a.initialXml, toolboxConfiguration = _a.toolboxConfiguration, workspaceConfiguration = _a.workspaceConfiguration, onWorkspaceChange = _a.onWorkspaceChange, onImportXmlError = _a.onImportXmlError, onInject = _a.onInject, onDispose = _a.onDispose;\n    var _b = React.useState(null), workspace = _b[0], setWorkspace = _b[1];\n    var _c = React.useState(initialXml), xml = _c[0], setXml = _c[1];\n    var _d = React.useState(false), didInitialImport = _d[0], setDidInitialImport = _d[1];\n    var _e = React.useState(false), didHandleNewWorkspace = _e[0], setDidHandleNewWorkspace = _e[1];\n    // we explicitly don't want to recreate the workspace when the configuration changes\n    // so, we'll keep it in a ref and update as necessary in an effect hook\n    var workspaceConfigurationRef = React.useRef(workspaceConfiguration);\n    React.useEffect(function () {\n        workspaceConfigurationRef.current = workspaceConfiguration;\n    }, [workspaceConfiguration]);\n    var toolboxConfigurationRef = React.useRef(toolboxConfiguration);\n    React.useEffect(function () {\n        toolboxConfigurationRef.current = toolboxConfiguration;\n        if (toolboxConfiguration && workspace) {\n            workspace.updateToolbox(toolboxConfiguration);\n        }\n    }, [toolboxConfiguration, workspace]);\n    var onInjectRef = React.useRef(onInject);\n    var onDisposeRef = React.useRef(onDispose);\n    React.useEffect(function () {\n        onInjectRef.current = onInject;\n    }, [onInject]);\n    React.useEffect(function () {\n        onDisposeRef.current = onDispose;\n    }, [onDispose]);\n    var handleWorkspaceChanged = React.useCallback(function (newWorkspace) {\n        if (onWorkspaceChange) {\n            onWorkspaceChange(newWorkspace);\n        }\n    }, [onWorkspaceChange]);\n    // Workspace creation\n    React.useEffect(function () {\n        if (!ref.current) {\n            return;\n        }\n        var newWorkspace = Blockly.inject(ref.current, __assign(__assign({}, workspaceConfigurationRef.current), { toolbox: toolboxConfigurationRef.current }));\n        setWorkspace(newWorkspace);\n        setDidInitialImport(false); // force a re-import if we recreate the workspace\n        setDidHandleNewWorkspace(false); // Signal that a workspace change event needs to be sent.\n        if (onInjectRef.current) {\n            onInjectRef.current(newWorkspace);\n        }\n        var onDisposeFunction = onDisposeRef.current;\n        // Dispose of the workspace when our div ref goes away (Equivalent to didComponentUnmount)\n        return function () {\n            newWorkspace.dispose();\n            if (onDisposeFunction) {\n                onDisposeFunction(newWorkspace);\n            }\n        };\n    }, [ref]);\n    // Send a workspace change event when the workspace is created\n    React.useEffect(function () {\n        if (workspace && !didHandleNewWorkspace) {\n            handleWorkspaceChanged(workspace);\n        }\n    }, [handleWorkspaceChanged, didHandleNewWorkspace, workspace]);\n    // Workspace change listener\n    React.useEffect(function () {\n        if (workspace == null) {\n            return undefined;\n        }\n        var listener = function () {\n            handleWorkspaceChanged(workspace);\n        };\n        workspace.addChangeListener(listener);\n        return function () {\n            workspace.removeChangeListener(listener);\n        };\n    }, [workspace, handleWorkspaceChanged]);\n    // xmlDidChange callback\n    React.useEffect(function () {\n        if (workspace == null) {\n            return undefined;\n        }\n        var _a = debounce(function () {\n            var newXml = Blockly.Xml.domToText(Blockly.Xml.workspaceToDom(workspace));\n            if (newXml === xml) {\n                return;\n            }\n            setXml(newXml);\n        }, 200), callback = _a[0], cancel = _a[1];\n        workspace.addChangeListener(callback);\n        return function () {\n            workspace.removeChangeListener(callback);\n            cancel();\n        };\n    }, [workspace, xml]);\n    // Initial Xml Changes\n    React.useEffect(function () {\n        if (xml && workspace && !didInitialImport) {\n            var success = importFromXml(xml, workspace, onImportXmlError);\n            if (!success) {\n                setXml(null);\n            }\n            setDidInitialImport(true);\n        }\n    }, [xml, workspace, didInitialImport, onImportXmlError]);\n    return { workspace: workspace, xml: xml };\n};\nexport default useBlocklyWorkspace;\n","export default function debounce(func, wait) {\n    var timeout = null;\n    var later = null;\n    var debouncedFunction = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        later = function () {\n            timeout = null;\n            func.apply(void 0, args);\n        };\n        clearTimeout(timeout);\n        timeout = setTimeout(later, wait);\n    };\n    var cancel = function () {\n        if (timeout !== null) {\n            clearTimeout(timeout);\n            later();\n        }\n    };\n    return [debouncedFunction, cancel];\n}\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport useBlocklyWorkspace from \"./useBlocklyWorkspace\";\nvar propTypes = {\n    initialXml: PropTypes.string,\n    toolboxConfiguration: PropTypes.object,\n    workspaceConfiguration: PropTypes.object,\n    className: PropTypes.string,\n    onWorkspaceChange: PropTypes.func,\n    onImportXmlError: PropTypes.func,\n    onXmlChange: PropTypes.func,\n    onInject: PropTypes.func,\n    onDispose: PropTypes.func,\n};\nvar defaultProps = {\n    initialXml: null,\n    toolboxConfiguration: null,\n    workspaceConfiguration: null,\n    className: null,\n    onWorkspaceChange: null,\n    onImportXmlError: null,\n    onXmlChange: null,\n    onInject: null,\n    onDispose: null,\n};\nfunction BlocklyWorkspace(_a) {\n    var initialXml = _a.initialXml, toolboxConfiguration = _a.toolboxConfiguration, workspaceConfiguration = _a.workspaceConfiguration, className = _a.className, onWorkspaceChange = _a.onWorkspaceChange, onXmlChange = _a.onXmlChange, onImportXmlError = _a.onImportXmlError, onInject = _a.onInject, onDispose = _a.onDispose;\n    var editorDiv = React.useRef(null);\n    var xml = useBlocklyWorkspace({\n        ref: editorDiv,\n        initialXml: initialXml,\n        toolboxConfiguration: toolboxConfiguration,\n        workspaceConfiguration: workspaceConfiguration,\n        onWorkspaceChange: onWorkspaceChange,\n        onImportXmlError: onImportXmlError,\n        onInject: onInject,\n        onDispose: onDispose,\n    }).xml;\n    var onXmlChangeRef = React.useRef(onXmlChange);\n    React.useEffect(function () {\n        onXmlChangeRef.current = onXmlChange;\n    }, [onXmlChange]);\n    React.useEffect(function () {\n        if (onXmlChangeRef.current && xml) {\n            onXmlChangeRef.current(xml);\n        }\n    }, [xml]);\n    return _jsx(\"div\", { className: className, ref: editorDiv }, void 0);\n}\nBlocklyWorkspace.propTypes = propTypes;\nBlocklyWorkspace.defaultProps = defaultProps;\nexport default BlocklyWorkspace;\n","const DEFAULT_VISIBILITY = \"private\";\n\n\n\nfunction parseXmlByAttr(element, tagName, attrName, attrValue) {\n  if (!tagName || !attrName || !attrValue)\n    return undefined;\n\n  let el = Array.from(element.getElementsByTagName(tagName)).filter(el => el.attributes.getNamedItem(attrName).value === attrValue);\n  if (!el || el.length === 0)\n    return undefined;\n\n  return el;\n}\n\nfunction parseXmlChildByAttr(element, tagName, attrName, attrValue) {\n  if (!tagName || !attrName || !attrValue)\n    return undefined;\n\n  let el = Array.from(element.childNodes)?.filter(el => el.nodeName === tagName && el.attributes.getNamedItem(attrName).value === attrValue);\n  if (!el || el.length === 0)\n    return undefined;\n\n  return el;\n}\n\nfunction parseXmlClassType(element) {\n  let typeEl = parseXmlByAttr(element, \"field\", \"name\", \"class_type\");\n  if (!typeEl)\n    return \"\";\n  typeEl = typeEl[0];\n\n  return typeEl.textContent;\n}\n\nfunction parseXmlClassName(element) {\n  let nameEl = parseXmlByAttr(element, \"field\", \"name\", \"class_name_input\");\n  if (!nameEl)\n    return \"\"; // assign default name that is available [ClassXX]\n  nameEl = nameEl[0];\n\n  return nameEl.textContent;\n}\n\nfunction parseParameter(element) {\n  let parameterTypeEl = parseXmlByAttr(element, \"field\", \"name\", \"parameter_type\");\n  if (!parameterTypeEl)\n    return undefined;\n  parameterTypeEl = parameterTypeEl[0];\n  let parameterType = parameterTypeEl.textContent;\n\n  // Get parameter name\n  let parameterName = \"\";\n  let nameEl = parseXmlByAttr(element, \"field\", \"name\", \"parameter_name_input\");\n  if (!nameEl)\n    return undefined\n  nameEl = nameEl[0];\n  parameterName = nameEl.textContent;\n\n  let prmtTip = \"\";\n  let nameTextEl = parseXmlByAttr(element, \"field\", \"name\", \"TEXT\");\n  console.log(nameTextEl);\n  if (nameTextEl) {\n    nameTextEl = nameTextEl[0];\n    prmtTip = nameTextEl.textContent;\n  }\n\n  console.log(\"PARAM_CUSTOM_TYPE:\");\n  console.log(prmtTip);\n\n  return {\n    name: parameterName,\n    type: prmtTip ?? parameterType\n  }\n}\n\nfunction getVisibilityFromElement(element) {\n  let visibilityTypeEl = parseXmlByAttr(element, \"field\", \"name\", \"element_visibility\");\n  if (visibilityTypeEl) {\n    visibilityTypeEl = visibilityTypeEl[0];\n    return visibilityTypeEl.textContent;\n  }\n  return undefined;\n}\n\nfunction parseMethod(method) {\n  let methodRetTypeEl = parseXmlByAttr(method, \"field\", \"name\", \"field_type\");\n  if (!methodRetTypeEl)\n    return undefined; // assign default name that is available [ClassXX]\n  methodRetTypeEl = methodRetTypeEl[0];\n  let methodRetType = methodRetTypeEl.textContent;\n\n  if (methodRetType === \"custom_type\") {\n    // find if a custom type name is attached\n    let typeEl = parseXmlByAttr(method, \"value\", \"name\", \"method_type\");\n    if (typeEl) {\n      typeEl = typeEl[0];\n      let typeTextEl = parseXmlByAttr(typeEl, \"field\", \"name\", \"TEXT\");\n      if (typeTextEl)\n        methodRetType = typeTextEl[0].textContent;\n    }\n  }\n\n  // Get method name\n  let nameEl = parseXmlByAttr(method, \"field\", \"name\", \"method_name_input\");\n  if (!nameEl)\n    return undefined;\n  nameEl = nameEl[0];\n\n  let methodName = nameEl.textContent;\n\n  // Get method visibility\n  const methodVisibility = getVisibilityFromElement(method) ?? DEFAULT_VISIBILITY;\n\n  // Get method staticness\n  let methodIsStatic = false;\n  let staticnessEl = parseXmlByAttr(method, \"field\", \"name\", \"is_static_checkbox\");\n  if (staticnessEl) {\n    staticnessEl = staticnessEl[0];\n    methodIsStatic = staticnessEl.textContent === \"TRUE\";\n  }\n\n  // Get method parameters\n  let parameters = [];\n  let parametersEl = parseXmlChildByAttr(method, \"statement\", \"name\", \"parameters\");\n  if (parametersEl) {\n    parametersEl = parametersEl[0];\n\n    let parameterElements = parseXmlByAttr(parametersEl, \"block\", \"type\", \"function_parameter\");\n    parameterElements?.forEach(parameter => {\n      const parsedParam = parseParameter(parameter);\n      if (parsedParam)\n        parameters.push(parsedParam);\n    });\n  }\n\n  return {\n    name: methodName,\n    returnType: methodRetType,\n    visibility: methodVisibility,\n    parameters: parameters,\n    isStatic: methodIsStatic\n  }\n}\n\nfunction parseXmlMethods(element) {\n  let methodsBlockEl = parseXmlByAttr(element, \"statement\", \"name\", \"methods\");\n  if (!methodsBlockEl)\n    return []; // assign default name that is available [ClassXX]\n  methodsBlockEl = methodsBlockEl[0];\n\n  let methods = parseXmlByAttr(methodsBlockEl, \"block\", \"type\", \"class_method\");\n  if (!methods || methods.length === 0)\n    return []; // assign default name that is available [ClassXX]\n\n  let resultMethods = [];\n  methods.forEach(method => {\n    const parsedMethod = parseMethod(method);\n    if (parsedMethod)\n      resultMethods.push(parsedMethod);\n  });\n\n  return resultMethods;\n}\n\nfunction parseField(field) {\n  let fieldTypeEl = parseXmlByAttr(field, \"field\", \"name\", \"field_type\");\n  if (!fieldTypeEl)\n    return undefined; // assign default name that is available [ClassXX]\n  fieldTypeEl = fieldTypeEl[0];\n  let fieldType = fieldTypeEl.textContent;\n\n  // Get field name\n  let nameEl = parseXmlByAttr(field, \"field\", \"name\", \"field_name_input\");\n  if (!nameEl)\n    return undefined;\n  nameEl = nameEl[0];\n\n  let fieldName = nameEl.textContent;\n\n  // Get field visibility\n  const fieldVisibility = getVisibilityFromElement(field) ?? DEFAULT_VISIBILITY;\n\n  // Get field staticness\n  let fieldIsStatic = false;\n  let staticnessEl = parseXmlByAttr(field, \"field\", \"name\", \"is_static_checkbox\");\n  if (staticnessEl) {\n    staticnessEl = staticnessEl[0];\n    fieldIsStatic = staticnessEl.textContent === \"TRUE\";\n  }\n\n  return {\n    name: fieldName,\n    returnType: fieldType,\n    visibility: fieldVisibility,\n    isStatic: fieldIsStatic\n  }\n}\n\nfunction parseXmlFields(element) {\n  let fieldsBlockEl = parseXmlByAttr(element, \"statement\", \"name\", \"fields\");\n  if (!fieldsBlockEl)\n    return [];\n  fieldsBlockEl = fieldsBlockEl[0];\n\n  let fields = parseXmlByAttr(fieldsBlockEl, \"block\", \"type\", \"class_field\");\n  if (!fields)\n    return [];\n  \n  let resultFields = [];\n  fields.forEach(field => {\n    const parsedField = parseField(field);\n    if (parsedField)\n      resultFields.push(parsedField);\n  });\n  \n  return resultFields;\n}\n\n\nfunction parseXmlConnections(element, connectedClassId, hubId) {\n  \n  let connectionsEl = parseXmlByAttr(element, \"statement\", \"name\", \"connections\");\n  if (!connectionsEl)\n    return [];\n  connectionsEl = connectionsEl[0];\n\n  const allConns = parseXmlByAttr(connectionsEl, \"block\", \"type\", \"connection\");\n  if (!allConns)\n    return [];\n\n  let connections = [];\n  allConns.forEach(conn => {\n    const connType = parseXmlByAttr(conn, \"field\", \"name\", \"relationship_type\")[0].textContent;\n    const connCardinality = parseXmlByAttr(conn, \"field\", \"name\", \"cardinality_dropdown\")[0].textContent;\n    const id = conn.attributes.getNamedItem(\"id\").value;\n    let isConnStart = true;\n    let startEl = parseXmlByAttr(conn, \"field\", \"name\", \"is_start_checkbox\");\n    if (startEl) {\n      startEl = startEl[0];\n      isConnStart = startEl.textContent === \"TRUE\";\n    }\n    \n    let connected_to = parseXmlByAttr(conn, \"field\", \"name\", \"connected_to\");\n    if (!!connected_to) {\n      connected_to = connected_to[0].textContent\n    }\n\n    // if (connected_to === connectedClassId)\n    //   alert(\"Cannot connect to itself\");\n    \n    connections.push({\n      type: connType,\n      cardinality: connCardinality,\n      connectedClass: connectedClassId,\n      connectorId: id,\n      hubId: hubId,\n      connection_to: connected_to,\n      isStart: isConnStart\n    });\n  });\n\n  return connections;\n}\n\nexport const parseXMLClasses = (xml) => {\n\n  let parser = new DOMParser();\n  let xmlDoc = parser.parseFromString(xml, \"text/xml\");\n\n  let classes = [];\n  let hubMap = [];\n\n  // find all conn_hubs\n  const allHubs = parseXmlByAttr(xmlDoc, \"block\", \"type\", \"connection_hub\");\n\n  // if a hub has a class, parse and add to [hub_id, class_id] map and classes list\n  // else ignore hub (connectors should not be shown on it) and parse next\n  if (allHubs) {\n    console.log(`hubs count: ${allHubs.length}`);\n    allHubs.forEach(hub => {\n      const hubId = hub.attributes.getNamedItem(\"id\").value;\n      let hub_class = parseXmlByAttr(hub, \"block\", \"type\", \"class\");\n      if (!hub_class)\n        return;\n      hub_class = hub_class[0];\n\n      const classId = hub_class.attributes.getNamedItem(\"id\").value;\n      const classType = parseXmlClassType(hub_class);\n      const name = parseXmlClassName(hub_class);\n      const methods = parseXmlMethods(hub_class);\n      const fields = parseXmlFields(hub_class);\n\n      const classItem = {\n        id: classId,\n        name: name,\n        methods: methods,\n        fields: fields,\n        classType: classType,\n      }\n      // console.log(classItem.name);\n\n      const connections = parseXmlConnections(hub, classId, hubId);\n      const connect_hub = {\n        hubId: hubId,\n        classId: classId,\n        connections: connections\n      }\n      classItem[\"connect_hub\"] = connect_hub;\n\n      hubMap[hubId] = classId;\n      classes.push(classItem);\n    });\n  }\n\n  // find all classes\n  let allClasses = Array.from(xmlDoc.getElementsByTagName(\"block\")).filter(el => el.attributes.getNamedItem(\"type\").value === \"class\");\n  // let allClasses = parseXmlByAttr(xmlDoc, \"block\", \"type\", \"class\");\n\n  const registeredClasses = classes.map(cl => cl.id);\n  // filter out the ones already in map\n  allClasses = allClasses.filter(curr => undefined === registeredClasses\n                                                        .find(cl => cl === curr.attributes.getNamedItem(\"id\").value));\n\n  // if any classes are left, parse them and add to class list\n  allClasses.forEach(element => {\n    const name = parseXmlClassName(element);\n    const methods = parseXmlMethods(element);\n    const fields = parseXmlFields(element);\n    const classId = element.attributes.getNamedItem(\"id\").value;\n\n    let classItem = {\n      id: classId,\n      name: name,\n      methods: methods,\n      fields: fields,\n      connect_hub: undefined\n    }\n    classes.push(classItem);\n  });\n\n  return classes;\n}\n","export const toolboxCategories = {\n  kind: \"categoryToolbox\",\n  contents: [\n    {\n      kind: \"category\",\n      name: \"Standard\",\n      colour: \"#5C81A6\",\n      contents: [\n        {\n          kind: \"block\",\n          type: \"text\",\n        },\n        {\n          kind: \"block\",\n          type: \"logic_boolean\",\n        },\n      ]\n    },\n    {\n      kind: \"category\",\n      name: \"UML\",\n      colour: \"#5CA699\",\n      contents: [\n        {\n          kind: \"block\",\n          type: \"class\",\n        },\n        {\n          kind: \"block\",\n          type: \"class_field\",\n        },\n        {\n          kind: \"block\",\n          type: \"class_method\",\n        },\n        {\n          kind: \"block\",\n          type: \"visibility\",\n        },\n        {\n          kind: \"block\",\n          type: \"function_parameter\",\n        },\n        {\n          kind: \"block\",\n          type: \"connection_hub\",\n        },\n        {\n          kind: \"block\",\n          type: \"connection\",\n        },\n      ],\n    },\n  ],\n};","\nconst getVisibilityModifier = (visibilityString) => {\n  switch (visibilityString) {\n    case \"public\":\n      return '+';\n    case \"protected\":\n      return '#';\n    case \"package\":\n      return '~'\n    case \"private\":\n    default:\n      return '-';\n  }\n}\n\nconst connTypeToPlantUML = (connType) => {\n  // [\"ASSOCIATION\"],\"BIDIR_ASSOCIATION\"],\"AGGREGATION\"],\"COMPOSITION\"],\"GENERALIZATION\"],\"REALIZATION\"],\"DEPENDENCY\"]]\n  switch (connType) {\n    case \"ASSOCIATION\":\n      return \"-->\";\n    case \"BIDIR_ASSOCIATION\":\n      return \"--\";\n    case \"AGGREGATION\":\n      return \"--o\";\n    case \"COMPOSITION\":\n      return \"--*\";\n    case \"GENERALIZATION\":\n      return \"--|>\";\n    case \"REALIZATION\":\n      return \"..|>\";\n    case \"DEPENDENCY\":\n      return \"..>\";\n    default:\n      return \"\";\n  }\n}\n\nexport const generateUMLForClass = (classDescr) => {\n  let umlString = \"\"\n  switch (classDescr.classType) {\n    case \"ABSTRACT_TYPE\":\n      umlString = \"abstract class \"\n      break;\n    case \"INTERFACE_TYPE\":\n      umlString = \"interface \";\n      break;\n    default:\n      umlString = \"class \"\n      break;\n  }\n  let indent = \"  \";\n  umlString = umlString.concat(`${classDescr.name} {\\n`);\n  // concat element and methods\n  classDescr.methods?.forEach(method => {\n    let params = \"\";\n    method.parameters.forEach(param => {\n      params = params.concat(`${param.type} ${param.name},`)\n    });\n    if (params.length !== 0) {\n      params = params.substring(0, params.length-1);\n    }\n\n    const visibility = getVisibilityModifier(method.visibility);\n    umlString = umlString.concat(`${indent}${visibility}${method.returnType} ${method.name}(${params})\\n`);\n  });\n\n  classDescr.fields?.forEach(field => {\n    const visibility = getVisibilityModifier(field.visibility);\n    umlString = umlString.concat(`${indent}${visibility}${field.returnType} ${field.name}\\n`);\n  });\n  umlString = umlString.concat('}');\n  return umlString;\n}\n\nexport const getConnectionUMLString = (connections, classDefs) => {\n  let UMLstr = \"\";\n  connections.forEach(conn => {\n    UMLstr += `${classDefs.get(conn.classBegin.id).name} ${connTypeToPlantUML(conn.type)} ${classDefs.get(conn.classEnd.id).name}\\n`;\n  });\n\n  return UMLstr;\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"./defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}","/* Connection {\n    classBegin{\n        id,\n        cardinality\n    },\n    classEnd{\n        id,\n        cardinality\n    },\n    addedFromBegin\n    Type\n}*/\n\nconst connectionsEqual = (c1, c2) => {\n  return c1.classBegin.id === c2.classBegin.id\n   && c1.classEnd.id === c2.classEnd.id\n   && c1.addedFromBegin === c2.addedFromBegin;\n}\n\nexport const checkDuplicateConnections = (connections) => {\n  const warnings = [];\n  for (let i = 0; i < connections.length-1; i++) {\n    for (let j = i+1; j < connections.length; j++) {\n      if (connectionsEqual(connections[i], connections[j])) {\n        warnings.push({ first: connections[i].classBegin.id, second: connections[i].classEnd.id });\n      }\n    }\n  }\n  return warnings;\n}\n\nexport const filterDuplConnections = (connections) => {\n  const conns = new Map();\n  const confirmedConns = new Map();\n  for (const conn of connections) {\n    const key = `${conn.classBegin.id};${conn.classEnd.id};${conn.type}`;\n    if (!conns.has(key)) {\n      conns.set(key, conn);\n    } else {\n      // begin and end already the same. Check whether addedFromBegin differs to find a tuple\n      if (!connectionsEqual(conns.get(key), conn)) {\n        confirmedConns.set(key, conn);\n      }\n    }\n  }\n  return [...confirmedConns.values()];\n}\n\n/*\n  FIELD {\n    name:\n    returnType:\n    visibility:\n    isStatic: \n  }\n\n  METHOD {\n    name:\n    returnType:\n    visibility:\n    parameters:\n    isStatic: \n  }\n*/\n\nexport const validateClass = (cl) => {\n  const warnings = {\n    duplicateFields: new Set(),\n    duplicateMethods: new Set(),\n\n  };\n\n  // check if there are no duplicate fields\n  const fields = new Set();\n  cl.fields.forEach(field => {\n    if (fields.has(field.name)) {\n      warnings.duplicateFields.add(field.name);\n    } else {\n      fields.add(field.name);\n    }\n  });\n\n  // check if there are no duplicate method definitions\n  const methods = new Set();\n  cl.methods.forEach(method => {\n    const paramsString = !!method.parameters && method.parameters.length > 0 ? method.parameters?.reduce((accum, param) => `${accum}.${param.type}`, \"\") : \"\";\n    const methodKey = `${method.name}.${paramsString}`;\n    if (methods.has(methodKey)) {\n      warnings.duplicateMethods.add(method.name);\n    } else {\n      methods.add(methodKey);\n    }\n  });\n\n  return warnings;\n}\n\n\nexport class Validator {\n  \n  constructor(classes, conns) {\n    this._classes = classes;\n    this._connections = conns;\n  }\n\n  static isInheritanceRelationship(connectionType) {\n    switch (connectionType) {\n      case \"GENERALIZATION\":\n      case \"REALIZATION\":\n        return true;\n      default:\n        return false;\n    }\n  }\n\n  getClasses() {\n    return this._classes;\n  }\n\n  addParents() {\n    this._classes = this._classes.map(cl => {\n      const parentsIds = this._connections.filter(conn => conn.classBegin.id === cl.id && Validator.isInheritanceRelationship(conn.type)).map(conn => conn.classEnd.id);\n      const parentClasses = this._classes.filter(cls => parentsIds?.includes(cls.id)).map(cl => cl.id);\n      return {\n        ...cl,\n        parentClasses\n      }\n    });\n  }\n\n  /**\n   * \n   * @param {ClassDef} cl Class to retrieve inherited fields for\n   * @param {Array<Connection>} conns List of class connections\n   * @param {Set<string>} classesVisited Previously visited classes to break the cycle if there's a cyclic dep\n   * @returns fields inherited by class\n   */\n  getInheritedFields(cl, classesVisited) {\n    \n    if (classesVisited.has(cl.id)) {\n      // break the cycle - cycle of dependencies detected\n      return undefined;\n    }\n\n    classesVisited.add(cl.id);\n    if (cl.inheritedFields !== undefined) {\n      return cl.inheritedFields;\n    }\n\n    const parents = cl.parentClasses.map(prnt => this._classes.find(cls => cls.id === prnt));\n    cl.inheritedFields = parents?.flatMap(parent => {\n      const inhFields = this.getInheritedFields(parent, classesVisited);\n      return [...(inhFields || []), ...(parent.fields || [])];\n    }) ?? [];\n    return cl.inheritedFields;\n  }\n\n  getInheritedMethods(cl, classesVisited) {\n    if (classesVisited.has(cl.id)) {\n      // break the cycle - cycle of dependencies detected\n      return undefined;\n    }\n\n    classesVisited.add(cl.id);\n    if (cl.inheritedMethods !== undefined) {\n      return cl.inheritedMethods;\n    }\n\n    const parents = cl.parentClasses.map(prnt => this._classes.find(cls => cls.id === prnt));\n    cl.inheritedMethods = parents?.flatMap(parent => {\n      const inhMethods = this.getInheritedMethods(parent, classesVisited);\n      return [...(inhMethods || []), ...(parent.methods || [])];\n    }) ?? [];\n    return cl.inheritedMethods;\n  }\n\n  getAncestors(cl, classesVisited) {\n    if (classesVisited.has(cl.id)) {\n      // break the cycle - cycle of dependencies detected\n      return undefined;\n    }\n\n    classesVisited.add(cl.id);\n    if (cl.ancestors !== undefined) {\n      return cl.ancestors;\n    }\n\n    const parents = cl.parentClasses.map(prnt => this._classes.find(cls => cls.id === prnt));\n    cl.ancestors = parents?.flatMap(parent => {\n      const ancestors = this.getAncestors(parent, classesVisited);\n      return [...(ancestors || []), parent];\n    }) ?? [];\n    return cl.ancestors;\n  }\n\n  addInheritted() {\n\n    this._classes.forEach(cl => {\n      cl[\"inheritedFields\"] = this.getInheritedFields(cl, new Set());\n      cl[\"inheritedMethods\"] = this.getInheritedMethods(cl, new Set());\n      cl.ancestors = this.getAncestors(cl, new Set());\n    });\n    console.log(\"ADDED INHERITS:\");\n    console.log(this._classes);\n    /* {\n      type: connType,\n      cardinality: connCardinality,\n      connectedClass: connectedClassId,\n      connectorId: id,\n      hubId: hubId,\n      connection_to: connected_to,\n    }; */\n  }\n\n  checkDuplicateFields(cl) {\n    const warnings = [];\n    const fields = new Set();\n\n    cl.fields.forEach(field => fields.add(field.name));\n\n    cl.inheritedFields?.forEach(field => {\n      if (fields.has(field.name)) {\n        warnings.push(`Class cannot inherit fields with non-unique names. At class <${cl.name}> and field <${field.name}>`);\n        return;\n      }\n\n      fields.add(field.name);\n    })\n\n    return warnings;\n  }\n\n  checkDuplicateMethods(cl) {\n    const warnings = [];\n    const methods = new Set();\n\n    cl.methods.forEach(method => {\n      const paramsString = !!method.parameters && method.parameters.length > 0 ? method.parameters?.reduce((accum, param) => `${accum}.${param.type}`, \"\") : \"\";\n      const methodKey = `${method.name}.${paramsString}`;\n      methods.add(methodKey);\n    });\n\n    cl.inheritedMethods?.forEach(method => {\n      const paramsString = !!method.parameters && method.parameters.length > 0 ? method.parameters?.reduce((accum, param) => `${accum}.${param.type}`, \"\") : \"\";\n      const methodKey = `${method.name}.${paramsString}`;\n      if (methods.has(methodKey)) {\n        warnings.push(`Class cannot inherit methods with non-unique name and parameter list combination. At class <${cl.name}> and method <${method.name}> with parameters <${paramsString}>`);\n        return;\n      }\n\n      methods.add(methodKey);\n    })\n    \n    return warnings;\n  }\n\n  validateConnectionTypes() {\n    const warnings = [];\n    this._connections.forEach(conn => {\n      switch (conn.type) {\n        case \"REALIZATION\":\n          const cls = this._classes.find(c => c.id === conn.classEnd.id);\n          if (cls.classType !== \"INTERFACE_TYPE\" && cls.classType !== \"ABSTRACT_TYPE\") {\n            const beginClass = this._classes.find(c => c.id === conn.classBegin.id);\n            warnings.push(`Realization relationship cannot end with non-abstract model element type. Either change the type of <${cls.name}> or change the relationship type between it and <${beginClass.name}>`);\n          }\n          break;\n        case \"GENERALIZATION\":\n          const endClass = this._classes.find(c => c.id === conn.classEnd.id);\n          const beginClass = this._classes.find(c => c.id === conn.classBegin.id);\n          if (endClass.classType !==  beginClass.classType) {\n            warnings.push(`Generalization relationship cannot have different model element types. Either change the type of <${endClass.name}> or <${beginClass.name}> or change the relationship type between them`);\n          }\n          break;\n        case \"COMPOSITION\":\n          break;\n        case \"AGGREGATION\":\n          break;\n        default:\n          break;\n      }\n    });\n    return warnings;\n  }\n\n  validateInterfaces() {\n    const warnings = [];\n    this._classes.forEach(cl => {\n      if (cl.classType === \"INTERFACE_TYPE\" && cl.fields.length !== 0) {\n        warnings.push(`Interfaces cannot have fields. Either change the type of <${cl.name}> to Class or Abstract class OR remove all of it's fields`);\n      }\n    });\n    return warnings;\n  }\n\n  checkDiamond() {\n    const warnings = [];\n    this._classes.forEach(cl => {\n      const res = groupBy(cl.ancestors, \"id\");\n      console.log(\"Checking DMD\");\n      console.log(res);\n      for (const prop in res) {\n        if (res[prop].length > 1) {\n          warnings.push(`Class <${cl.name}> inherits from the same base class <${this._classes.find(cl => cl.id === prop).name}> more than once. Remove the diamond inheritance or continue at your own risk.`);\n        }\n      }\n    });\n    return warnings;\n  }\n}\n\nconst groupBy = function(data, key) { // `data` is an array of objects, `key` is the key (or property accessor) to group by\n  // reduce runs this anonymous function on each element of `data` (the `item` parameter,\n  // returning the `storage` parameter at the end\n  return data.reduce(function(storage, item) {\n    // get the first instance of the key by which we're grouping\n    var group = item[key];\n    \n    // set `storage` for this instance of group to the outer scope (if not empty) or initialize it\n    storage[group] = storage[group] || [];\n    \n    // add this item to its group within `storage`\n    storage[group].push(item);\n    \n    // return the updated storage to the reduce function, which will then loop through the next \n    return storage; \n  }, {}); // {} is the initial value of the storage\n};","import unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nexport default function _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n\n  if (!it) {\n    if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = it.call(o);\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","\r\nconst WarningItem = (props) => {\r\n\r\n  // TODO: add error/warning icon on the right or left of text\r\n  return (\r\n    <div className=\"warning\">\r\n      <span title={!!props.type ? `This is ${props.type}` : \"\"}>{props.text}</span>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default WarningItem;\r\n","import \"./styles/App.css\";\nimport \"./blockly/custom_Blocks\";\nimport React, { useCallback, useEffect, useRef, useState } from \"react\";\nimport { BlocklyWorkspace } from \"react-blockly\";\nimport Blockly from \"blockly\";\nimport { parseXMLClasses } from \"./XmlParser\";\nimport { toolboxCategories } from \"./blockly/toolbox\";\nimport { generateUMLForClass, getConnectionUMLString } from \"./UML_DSL_Generator\";\nimport { checkDuplicateConnections, filterDuplConnections, validateClass, Validator } from \"./Validator\";\nimport WarningItem from \"./WarningItem\";\nimport XMLData from './initialXml.xml';\n\n// const customStyles = {\n//   content: {\n//     top: '50%',\n//     left: '50%',\n//     right: 'auto',\n//     bottom: 'auto',\n//     marginRight: '-50%',\n//     transform: 'translate(-50%, -50%)',\n//     maxWidth: '50%',\n//     minWidth: '20%'\n//   },\n// }\n\nconst encoder = require(\"./helpers/encoder.js\");\nconst defl = require(\"./helpers/deflate.js\");\n\nconst dynamicDropdownOptions_ = [];\nconst addDynamicDropdownOptions = (options) => {\n  dynamicDropdownOptions_.splice(0, dynamicDropdownOptions_.length);\n  dynamicDropdownOptions_.push(['<not selected>', 'OPTION-1']);\n  options.forEach(option => dynamicDropdownOptions_.push(option));\n};\n\nBlockly.Blocks['connection'] = {\n  init: function() {\n    this.appendDummyInput()\n        .appendField(\"connected to\")\n        .appendField(new Blockly.FieldDropdown(this.dynamicOptions), \"connected_to\");\n    this.appendDummyInput()\n        .appendField(\"Connected using\")\n        .appendField(new Blockly.FieldDropdown([[{\"src\":\"./relationships/association.png\",\"width\":50,\"height\":20,\"alt\":\"*\"},\"ASSOCIATION\"], [{\"src\":\"./relationships/bidir_association.png\",\"width\":50,\"height\":15,\"alt\":\"*\"},\"BIDIR_ASSOCIATION\"], [{\"src\":\"./relationships/aggregation.png\",\"width\":50,\"height\":20,\"alt\":\"*\"},\"AGGREGATION\"], [{\"src\":\"./relationships/composition.png\",\"width\":50,\"height\":15,\"alt\":\"*\"},\"COMPOSITION\"], [{\"src\":\"./relationships/generalization.png\",\"width\":50,\"height\":15,\"alt\":\"*\"},\"GENERALIZATION\"], [{\"src\":\"./relationships/realization.png\",\"width\":50,\"height\":15,\"alt\":\"*\"},\"REALIZATION\"], [{\"src\":\"./relationships/dependency.png\",\"width\":50,\"height\":15,\"alt\":\"*\"},\"DEPENDENCY\"]]), \"relationship_type\");\n    this.appendDummyInput()\n        .appendField(\"cardinality\")\n        .appendField(new Blockly.FieldDropdown([[\"0..1\",\"ZERO_OR_ONE\"], [\"1\",\"ONE\"], [\"*\",\"ANY\"], [\"1..*\",\"ONE_OR_MORE\"]]), \"cardinality_dropdown\");\n    this.appendDummyInput(\"is start\")\n        .appendField(\"Is start?\")\n        .appendField(new Blockly.FieldCheckbox(\"TRUE\"), \"is_start_checkbox\");\n    this.setPreviousStatement(true, \"connection\");\n    this.setNextStatement(true, \"connection\");\n    this.setColour(230);\n    this.setTooltip(\"\");\n    this.setHelpUrl(\"\");\n  },\n  \n  dynamicOptions: function() {\n    if (!dynamicDropdownOptions_.length) {\n      return [['<no classes found>', 'OPTION0']];\n    }\n    return dynamicDropdownOptions_;\n  },\n};\n\n\nexport default function App() {\n  const [xml, setXml] = useState(\"\");\n  const [plantUMLText, setPlantUMLText] = useState(\"\");\n  const [imgSrc, setImgSrc] = useState(\"\");\n  const [initXml, setInitXml] = useState(undefined);\n\n  const [blocklyClasses, setBlocklyClasses] = useState([]);\n  const [previousImgString, setPreviousImgString] = useState(\"\");\n\n  // const [connectionStarted, setConnectionStarted] = useState(false);\n  // const [connectionInfo, setConnectionInfo] = useState(undefined);\n  // const [connectedClasses, setConnectedClasses] = useState([]);\n\n  // const [warningWndOpen, setWarningWndOpen] = useState(false);\n  const [warnings, setWarnings] = useState([]);\n\n  // [ [classId, classId], [connInfo, connInfo] ]\n  // const connectionsList = useRef([]); // : [ [len = 2], [len = 2] ]\n\n  const lastFuncId = React.useRef(undefined);\n  const lastGenerateFuncId = React.useRef(undefined);\n  const lastXML = useRef(\"\");\n\n  // const lineElement = React.useRef(undefined);\n\n  useEffect(() => {\n    // [\"className\", \"classId\"]\n    const allClasses = blocklyClasses.map(el => [ el.name, el.id] );\n    // const options = allClasses.length === 0 ? [ [\"empty\", \"empty\"] ] : allClasses;\n    addDynamicDropdownOptions(allClasses);\n  }, [blocklyClasses]);\n\n  const showPlantUMLImg = useCallback((text) => {\n    const currentEncodedImg = encoder.encode64(defl.deflate(text, 9));\n    if (previousImgString === currentEncodedImg)\n      return;\n\n    setPreviousImgString(currentEncodedImg);\n    clearTimeout(lastFuncId.current);\n\n    lastFuncId.current = setTimeout(() => {\n      setImgSrc(\"http://www.plantuml.com/plantuml/img/\" + currentEncodedImg);\n    }, 1000);\n  }, [previousImgString]);\n\n  const generateUml = useCallback(() => {\n\n    const jsClasses = parseXMLClasses(xml);\n    console.log(\"jsClasses:\");\n    console.log(jsClasses);\n\n    let umlString = \"\";\n    jsClasses.forEach(classDescr => {\n      umlString = umlString.concat(generateUMLForClass(classDescr));\n      umlString += \"\\n\\n\";\n    });\n\n    // Map<id, classDef>\n    const classDefs = new Map();\n    jsClasses.forEach(cl => classDefs.set(cl.id, {\n      id: cl.id,\n      methods: cl.methods,\n      name: cl.name,\n      type: cl.classType,\n      fields: cl.fields\n      })\n    );\n    console.log(`Mapped classes:`);\n    console.log(classDefs);\n    \n    // List<Connection> \n    /* Connection {\n        classBegin{\n          id,\n          cardinality\n        },\n        classEnd{\n          id,\n          cardinality\n        },\n        Type\n    }*/\n    let connections = [];\n    connections.push(...jsClasses.flatMap(cl => {\n      return cl.connect_hub?.connections.map(conn => {\n        const connDef = { id: cl.id, cardinality: conn.cardinality };\n        const classBegin = conn.isStart ? connDef : { id: conn.connection_to };\n        const classEnd = conn.isStart ? { id: conn.connection_to } : connDef;\n\n        return {\n          classBegin,\n          classEnd,\n          type: conn.type,\n          addedFromBegin: conn.isStart\n        }\n      })\n      }\n    ));\n\n    console.log(`Mapped conns:`);\n    console.log(connections);\n\n    // filter out connections that dont have a valid end or beginning\n    connections = connections.filter(conn => classDefs.has(conn.classBegin.id) && classDefs.has(conn.classEnd.id));\n    console.log(\"filtered conns\");\n    console.log(connections);\n\n    // check duplicates\n    const duplicateWarnings = checkDuplicateConnections(connections);\n    console.log(\"duplicates:\");\n    console.log(duplicateWarnings);\n\n    // check duplicate conns between classes\n    const filteredConns = filterDuplConnections(connections);\n    console.log(filteredConns);\n\n    umlString += getConnectionUMLString(filteredConns, classDefs);\n\n    const warns = [];\n    const validator = new Validator(jsClasses, filteredConns);\n\n    validator.addParents();\n    validator.addInheritted();\n    const classesWithParents = validator.getClasses();\n\n    classesWithParents.forEach(cl => {\n      const duplFieldsWarns = validator.checkDuplicateFields(cl);\n      duplFieldsWarns.forEach(warn => warns.push({ type: \"error\", text: warn }));\n      \n      const duplMethodsWarns = validator.checkDuplicateMethods(cl);\n      duplMethodsWarns.forEach(warn => warns.push({ type: \"error\", text: warn }));\n    });\n\n    console.log(\"Clases with parants\");\n    console.log(classesWithParents);\n\n    classDefs.forEach(cl => {\n      const res = validateClass(cl)\n      console.log(res);\n      res.duplicateFields.forEach(f => {\n        warns.push({ type: \"error\", text: `There are multiple fields named <${f}> in a class <${cl.name}>` });\n      });\n      res.duplicateMethods.forEach(m => {\n        warns.push({ type: \"error\", text: `There are multiple identical methods named <${m}> in a class <${cl.name}>` });\n      });\n    });\n\n    const connectionWarnings = validator.validateConnectionTypes();\n    connectionWarnings.forEach(warn => warns.push({ type: \"warning\", text: warn }));\n\n    const interfaceWarnings = validator.validateInterfaces();\n    interfaceWarnings.forEach(warn => warns.push({ type: \"error\", text: warn }));\n\n    const diamondWarnings = validator.checkDiamond();\n    diamondWarnings.forEach(warn => warns.push({ type: \"warning\", text: warn }));\n\n    setWarnings(warns);\n    setBlocklyClasses(jsClasses);\n    setPlantUMLText(umlString);\n    showPlantUMLImg(umlString);\n  }, [xml, showPlantUMLImg]);\n\n\n  const workspaceDidChange = useCallback((workspace) => {\n    clearTimeout(lastGenerateFuncId.current);\n\n    lastGenerateFuncId.current = setTimeout(() => {\n      if (xml !== lastXML.current) {\n        lastXML.current = xml;\n        console.log(xml);\n        generateUml();\n      }\n    }, 1000);\n  }, [generateUml, xml]);\n\n  const [umlOpened, setUmlOpened] = useState(false);\n\n  const toggleNav = useCallback(() => {\n    if (umlOpened) {\n      document.getElementById(\"mySidepanel\").style.width = \"0\";\n    } else {\n      document.getElementById(\"mySidepanel\").style.width = \"500px\";\n    }\n\n    setUmlOpened(!umlOpened);\n  }, [umlOpened]);\n\n  useEffect(() => {\n    fetch(XMLData)\n    .then(res => res.text())\n    .then((response) => {\n      setInitXml(response.replaceAll('\\n', ''));\n    })\n    .catch((err) => {\n      setInitXml(\"\");\n    });\n  }, []);\n\n  return (\n    <>\n    <div id=\"mySidepanel\" className=\"sidepanel\">\n      <button className=\"closebtn\" onClick={toggleNav}>&times;</button>\n      <h2>Warnings</h2>\n      {\n        warnings.length > 0\n          ? warnings.map((w, idx) => <WarningItem text={w.text} type={w.type} key={idx} />)\n          : <WarningItem text={\"0 warnings found :)\"} />\n      }\n    </div>\n\n    <button className=\"openbtn\" onClick={toggleNav}>&#9776; {`${warnings.length === 0 ? \"\": `(${warnings.length}) `}Warnings`}</button>\n      {\n      initXml !== undefined &&\n        <BlocklyWorkspace\n          toolboxConfiguration={toolboxCategories}\n          initialXml={initXml}\n          className=\"fill-height\"\n          workspaceConfiguration={{\n            grid: {\n              spacing: 20,\n              length: 3,\n              colour: \"#ccc\",\n              snap: true,\n            },\n          }}\n          onWorkspaceChange={workspaceDidChange}\n          onXmlChange={setXml}\n        />\n      }\n      <img alt={\"\"} src={imgSrc} />\n      <textarea\n        id=\"code\"\n        style={{ minHeight: \"200px\", width: \"400px\" }}\n        value={plantUMLText}\n        readOnly\n      />\n    </>\n  );\n}\n\n\n// <Modal\n// isOpen={warningWndOpen}\n// onRequestClose={() => setWarningWndOpen(false)}\n// style={customStyles}\n// contentLabel=\"Warning list modal\"\n// shouldCloseOnEsc={true}\n// shouldCloseOnOverlayClick={true}\n// >\n// <h2>Warnings</h2>\n// {warnings.length > 0\n//   ? warnings.map((w, idx) => <WarningItem text={w.text} type={w.type} key={idx} />)\n//   : <WarningItem text={\"0 warnings found :)\"} />\n// }\n// <button className=\"modalCloseBtn\" onClick={() => setWarningWndOpen(false)}>close</button>\n// </Modal>\n\n// <button onClick={() => setWarningWndOpen(true)} className={warnings.length === 0 ? \"validateBtn\" : \"validateBtnWarn\"}>{`${warnings.length === 0 ? \"\": `(${warnings.length}) `}Validate`}</button>\n// <button onClick={generateUml}>Generate</button>\n\n// <pre id=\"generated-xml\">{xml}</pre>\n\n\n// <path xmlns=\"http://www.w3.org/2000/svg\" stroke=\"black\" transform=\"translate(1000,300)\" d=\" M 0 0 L 255 108 L 375 -95\" fill=\"none\"></path>\n\n// const dynamicOptions = useCallback(() => {\n//   // [\"className\", \"classId\"]\n//   const allClasses = blocklyClasses.map(el => [ el.name, el.id] );\n//   console.log(\"classes for dropdwon:\");\n//   console.log(allClasses);\n//   const options = allClasses.length === 0 ? [ [\"empty\", \"empty\"] ] : allClasses;\n//   // addDynamicDropdownOptions(options);\n//   // addDynamicDropdownOption();\n//   return options;\n// }, [blocklyClasses]);\n\n// useEffect(() => {\n//   if (connectionStarted)\n//     document.onmousemove = handleMouseMove;\n// }, [handleMouseMove, connectionStarted]);\n\n\n// const createConnectors = React.useCallback((connInfo) => {\n//   connInfo.forEach(conn => {\n//     // calculate how much translate(x, y) is needed (investigate if it's possible to clip it to connector)\n\n//     // get html element that this current one needs to go after\n    \n//     // create next html sibling or whatever and keep the element ref\n\n//     // <path class=\"connector_arrow\" fill=\"#00ff00\" transform=\"translate(120,-1)\" stroke=\"green\" d=\"M 0 0 h 8.5 v 30 h -8.5 z\"></path>\n\n//     // add onclick handler to register the related class id and connector id?\n\n//     // TODO: unregister onclick handlers of the connectors that dont exist anymore\n//   });\n// }, []);\n\n// const escFunction = useCallback((event) => {\n//   if (event.keyCode === 27 && connectionStarted) {\n//     //Do whatever when esc is pressed\n//     setConnectionStarted(false);\n//     setConnectionInfo(undefined);\n//   }\n// }, [connectionStarted]);\n\n// const handleMouseMove = useCallback((event) => {\n//   if (!lineElement.current)\n//     return;\n\n//   event = event || window.event;\n\n//   let canvasEl =  document.getElementsByClassName(\"blocklyBlockCanvas\");\n//   if (canvasEl || canvasEl.length === 0)\n\n//   canvasEl = canvasEl[0];\n//   let canvasXY = canvasEl.attributes.getNamedItem(\"transform\").value;\n\n//   console.log();\n//   let translateString = canvasXY.slice(10)\n//   translateString = translateString.slice(0, translateString.indexOf(')'));\n\n//   console.log(translateString);\n//   let [canvasX, canvasY] = translateString.split(',');\n//   canvasX = Number(canvasX);\n//   canvasY = Number(canvasY);\n//   console.log(\"canvasX\");\n//   console.log(canvasX);\n//   console.log(canvasY);\n\n//   const candidateEls = Array.from(document.getElementsByTagName(\"g\")).filter(el => !!el.attributes.getNamedItem(\"data-id\"));\n//   let connectorEl = candidateEls.filter(el => el.attributes.getNamedItem(\"data-id\").value === connectionInfo.connectorId);\n//   let hubEl = candidateEls.filter(el => el.attributes.getNamedItem(\"data-id\").value === connectionInfo.hubId);\n\n//   if (!connectorEl || !hubEl || connectorEl.length === 0 || hubEl.length === 0)\n//     return;\n\n//   connectorEl = connectorEl[0];\n//   hubEl = hubEl[0];\n\n//   console.log(\"BOUNDING BOX OF CONNECTOR:\");\n//   console.log(connectorEl.getBoundingClientRect());\n\n//   let connXY = connectorEl.attributes.getNamedItem(\"transform\").value;\n//   let hubXY = hubEl.attributes.getNamedItem(\"transform\").value;\n\n//   let [cx, cy] = connXY.slice(10, -1).split(',');\n//   let [hx, hy] = hubXY.slice(10, -1).split(',');\n\n//   console.log(cx);\n//   console.log(cy);\n//   console.log(hx);\n//   console.log(hy);\n\n//   const offsetConnectorX = 252;\n//   const offsetConnectorY = 31;\n\n//   let x1 = document.createAttribute(\"x1\"); x1.value = Number(cx) + Number(hx) + canvasX + offsetConnectorX;\n//   let y1 = document.createAttribute(\"y1\"); y1.value = Number(cy) + Number(hy) + canvasY + offsetConnectorY;\n//   let x2 = document.createAttribute(\"x2\"); x2.value = event.pageX - 5; // offset from mouse so there is lower chance of clicking on the line\n//   let y2 = document.createAttribute(\"y2\"); y2.value = event.pageY - 3;\n//   lineElement.current.setAttributeNode(x1);\n//   lineElement.current.setAttributeNode(y1);\n//   lineElement.current.setAttributeNode(x2);\n//   lineElement.current.setAttributeNode(y2);\n//   console.log(\"LINE ELEMENT COORDS\");\n//   console.log(lineElement);\n// }, [lineElement, connectionInfo]);\n\n// React.useEffect(() => { // might be a useCallback thats called on workspaceDidChange\n//   if (!xml)\n//     return;\n\n//   // find all relevant hubs\n//   let hubs = blocklyClasses.map(cl => cl.connect_hub).filter(cl => cl !== undefined);\n\n//   // flatten connector list\n//   let connectors = hubs.flatMap(x => x.connections);\n  \n//   // find relevant connector html elements\n//   let connector_elements = Array.from(document.getElementsByTagName(\"g\")).filter(el => !!el.attributes.getNamedItem(\"data-id\"));\n  \n//   connector_elements = connector_elements.filter(el => connectors.find(conn => conn.connectorId === el.attributes.getNamedItem(\"data-id\").value) !== undefined);\n\n//   const beginTime = (new Date()).getTime();\n//   connector_elements.forEach(connector_el => {\n//     const currentConnId = connector_el.attributes.getNamedItem(\"data-id\").value;\n//     if (true /*!document.getElementById(currentConnId)*/) {\n//       // <g style=\"display: block;\" transform=\"translate(200,16)\"><path d=\"M 0 0 h 40 l 15 12.5 l -15 12.5 h -40 Z\" fill=\"#495284\" transform=\"translate(0,2.5)\"></path></g>\n\n//       // let attrClass = document.createAttribute(\"class\");\n//       // attrClass.value = \"connector_arrow\";\n\n//       // remove previously added element for this connector\n//       const prevElement = document.getElementById(currentConnId);\n//       if (!!prevElement)\n//         prevElement.remove();\n\n//       // find relevant connector info\n//       let conn_info = connectors.find(conn => conn.connectorId === currentConnId);\n      \n//       let xTr = 255;\n//       let yTr = 16;\n//       let attrTransform = document.createAttribute(\"transform\");\n//       attrTransform.value = `translate(${xTr},${yTr})`;\n      \n//       // fill=\"#00ff00\"\n//       let attrFill = document.createAttribute(\"fill\");\n//       attrFill.value = \"#495284\";\n\n//       // TODO: replace with class selector in css\n//       let attrStyle = document.createAttribute(\"style\");\n//       attrStyle.value = \"display: block;\";\n\n//       // stroke=\"green\"\n//       // let attrStroke = document.createAttribute(\"stroke\");\n//       // attrStroke.value = \"green\";\n      \n//       let attrD = document.createAttribute(\"d\");\n//       attrD.value = \"M 0 0 h 40 l 15 12.5 l -15 12.5 h -40 Z\";\n      \n//       let attrId = document.createAttribute(\"id\");\n//       attrId.value = currentConnId; // \"1234560\";\n      \n//       const svgns = \"http://www.w3.org/2000/svg\";\n//       const elementG = document.createElementNS(svgns, \"g\");\n//       const elementPath = document.createElementNS(svgns, \"path\");\n      \n//       // elementG.setAttributeNode(attrClass);\n//       elementG.setAttributeNode(attrStyle);\n//       elementG.setAttributeNode(attrTransform);\n//       elementG.setAttributeNode(attrId);\n      \n//       let attrTransformPath = document.createAttribute(\"transform\");\n//       attrTransformPath.value = `translate(${0},${2.5})`;\n\n//       elementPath.setAttributeNode(attrTransformPath);\n//       elementPath.setAttributeNode(attrFill);\n//       elementPath.setAttributeNode(attrD);\n//       //elemen.setAttributeNode(attrStroke);\n\n//       elementG.appendChild(elementPath);\n//       // connector_el.appendChild(elementG);\n\n//       // elementG.onclick = () => {\n//       connector_el.onclick = () => {\n//         const coninfo = {\n//           connectorId: currentConnId,\n//           hubId: conn_info.hubId,\n//           classId: conn_info.connectedClass,\n//           connType: conn_info.type,\n//           cardinality: conn_info.cardinality\n//         }\n//         console.log(`connector clicked:`);\n//         console.log(coninfo);\n//         connectorClicked(coninfo);\n//       };\n//     }\n//   });\n//   // console.log(`TIME TOOK TO CREATE CONNECTORS: ${(new Date()).getTime() - beginTime}`);\n\n// }, [xml, blocklyClasses, connectorClicked]);\n\n// React.useMemo(() => {\n//   if (classId) {\n//     // console.log(\"onclick REGISTERED\");\n//     let htmlElement = Array.from(document.getElementsByClassName(\"blocklyDraggable\")).filter(el => el.attributes.getNamedItem(\"data-id\").value === classId);\n//     if (htmlElement && htmlElement.length === 1) {\n//       htmlElement = htmlElement[0];\n//       // console.log(htmlElement);\n//       htmlElement.onclick = () => {\n//         console.log(\"CLIKCED CLASs\");\n//       };\n//     }\n//   }\n//   return () => {\n//     // unregister onclick handler\n//     // htmlElement.onclick = null;\n//   }\n// }, []);\n\n// useEffect(() => {\n//   document.addEventListener(\"keydown\", escFunction);\n\n//   return () => {\n//     document.removeEventListener(\"keydown\", escFunction);\n//   };\n// }, [escFunction]);\n\n// const drawLine = useCallback(() => {\n//   const lineEl = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n    \n//   const attrId = document.createAttribute(\"id\");\n//   attrId.value = \"line-path\";\n\n//   const attrStroke = document.createAttribute(\"stroke\");\n//   attrStroke.value = \"black\";\n\n//   const attrFill = document.createAttribute(\"fill\");\n//   attrFill.value = \"none\";\n\n//   const attrTransform = document.createAttribute(\"transform\");\n//   attrTransform.value = \"translate(100,100)\";\n\n//   const attrD = document.createAttribute(\"d\");\n//   attrD.value = \" m 0 0 l 255 108 l 375 -95\";\n\n//   lineEl.setAttributeNode(attrId);\n//   lineEl.setAttributeNode(attrStroke);\n//   lineEl.setAttributeNode(attrFill);\n//   lineEl.setAttributeNode(attrTransform);\n//   lineEl.setAttributeNode(attrD);\n\n//   let canvasEl = document.getElementsByClassName(\"blocklyWorkspace\")[0];\n//   canvasEl.appendChild(lineEl);\n\n//   var matrix = [\n//     [0, 0, 0, 1, 0],\n//     [1, 0, 0, 0, 1],\n//     [0, 0, 1, 0, 0],\n//   ];\n//   var grid = new PF.Grid(matrix);\n\n//   var finder = new PF.AStarFinder();\n//   var path = finder.findPath(1, 2, 4, 2, grid);\n//   console.log(path);\n\n//   var newPath = PF.Util.compressPath(path);\n//   console.log(newPath);\n// }, []);\n\n// const connectorClicked = useCallback((connInfo) => {\n\n//   if (!connectionStarted) {\n//     // check if connector not already connected\n//     const existingConnectionIdx = connectionsList.current.findIndex(conn => conn[1][0].connectorId === connInfo.connectorId || conn[1][1].connectorId === connInfo.connectorId);\n//     if (existingConnectionIdx !== -1) {\n\n//       const existingConnection = connectionsList.current[existingConnectionIdx];\n//       // setup as if connection was started from the other side of existing connection\n//       if (existingConnection[1][0].connectorId === connInfo.connectorId) {\n//         setConnectionInfo(existingConnection[1][1]);\n//       } else {\n//         setConnectionInfo(existingConnection[1][0]);\n//       }\n//       setConnectionStarted(true);\n\n//       // remove existing connection from the list\n//       connectionsList.current.splice(existingConnectionIdx);\n      \n//       const classesIdx = connectedClasses.findIndex(cl => cl[0] === connInfo.classId || cl[1] === connInfo.classId);\n      \n//       // remove existing connection between classes\n//       const connClasses = connectedClasses;\n//       connClasses.splice(classesIdx);\n//       setConnectedClasses(connClasses);\n//     }\n\n//     setConnectionInfo(connInfo);\n//     setConnectionStarted(true);\n//     console.log(\"CONNECTION STARTED\");\n//     console.log(connInfo.classId);\n//     const lineEl = document.createElementNS(\"http://www.w3.org/2000/svg\", \"line\");\n    \n//     const attrId = document.createAttribute(\"id\");\n//     attrId.value = \"current-conn-line\";\n\n//     const attrStroke = document.createAttribute(\"stroke\");\n//     attrStroke.value = \"black\";\n//     lineEl.setAttributeNode(attrId);\n//     lineEl.setAttributeNode(attrStroke);\n\n//     let canvasEl = document.getElementsByClassName(\"blocklyWorkspace\");\n//     if (canvasEl && canvasEl.length !== 0) {\n//       canvasEl = canvasEl[0];\n//       //canvasEl.appendChild(lineEl);\n//     }\n\n//     lineElement.current = lineEl;\n//   } else {\n//     // finish connection\n    \n//     // something wrong if info does not exist, reset connection\n//     if (!connectionInfo) {\n//       setConnectionStarted(false);\n//       setConnectionInfo(undefined);\n//       return;\n//     }\n    \n//     // check if connector not already connected\n//     if (connectionsList.current.find(conn => conn[1][0].connectorId === connInfo.connectorId\n//                                           || conn[1][1].connectorId === connInfo.connectorId) !== undefined) {\n//       // dont do anything. User might find a valid connector to click\n//       return;\n//     }\n\n//     // check if class is not already connected\n//     if (connectedClasses.find(cl => cl[0] === connInfo.classId || cl[1] === connInfo.classId) !== undefined) {\n//       setConnectionStarted(false);\n//       setConnectionInfo(undefined);\n//       return;\n//     }\n\n//     // check if not the same class\n//     if (connectionInfo.classId === connInfo.classId) {\n//       // setConnectionStarted(false);\n//       // setConnectionInfo(undefined);\n//       return;\n//     }\n\n//     // add to connections\n//     const connClasses = connectedClasses;\n//     connClasses.push([connectionInfo.classId, connInfo.classId]);\n//     setConnectedClasses(connClasses);\n\n//     connectionsList.current.push( [ [connectionInfo.classId, connInfo.classId],\n//                                     [connectionInfo, connInfo]\n//                                   ]\n//     );\n//     setConnectionInfo(undefined)\n//     setConnectionStarted(false);\n\n//     console.log(\"CONNECTION CREATED\");\n//   }\n// }, [connectionStarted, connectedClasses, connectionInfo]);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './styles/index.css';\nimport App from './App';\nimport Modal from 'react-modal';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\nModal.setAppElement(document.getElementById('root'));\n"],"names":["zip_free_queue","zip_qhead","zip_qtail","zip_initflag","zip_outcnt","zip_outoff","zip_complete","zip_window","zip_d_buf","zip_l_buf","zip_prev","zip_bi_buf","zip_bi_valid","zip_block_start","zip_ins_h","zip_hash_head","zip_prev_match","zip_match_available","zip_match_length","zip_prev_length","zip_strstart","zip_match_start","zip_eofile","zip_lookahead","zip_max_chain_length","zip_max_lazy_match","zip_compr_level","zip_good_match","zip_dyn_ltree","zip_dyn_dtree","zip_static_ltree","zip_static_dtree","zip_bl_tree","zip_l_desc","zip_d_desc","zip_bl_desc","zip_bl_count","zip_heap","zip_heap_len","zip_heap_max","zip_depth","zip_length_code","zip_dist_code","zip_base_length","zip_base_dist","zip_flag_buf","zip_last_lit","zip_last_dist","zip_last_flags","zip_flags","zip_flag_bit","zip_opt_len","zip_static_len","zip_deflate_data","zip_deflate_pos","zip_WSIZE","zip_OUTBUFSIZ","zip_MAX_MATCH","zip_HASH_SIZE","zip_HASH_MASK","zip_MIN_LOOKAHEAD","zip_MAX_DIST","zip_MAX_BITS","zip_LITERALS","zip_L_CODES","zip_D_CODES","zip_BL_CODES","zip_HEAP_SIZE","zip_H_SHIFT","parseInt","zip_outbuf","zip_DeflateCT","this","fc","dl","zip_DeflateTreeDesc","dyn_tree","static_tree","extra_bits","extra_base","elems","max_length","max_code","zip_DeflateConfiguration","a","b","c","d","good_length","max_lazy","nice_length","max_chain","zip_DeflateBuffer","next","len","ptr","Array","off","zip_extra_lbits","zip_extra_dbits","zip_extra_blbits","zip_bl_order","zip_configuration_table","zip_reuse_queue","p","zip_head1","i","zip_head2","val","zip_put_byte","q","zip_new_queue","zip_qoutbuf","zip_put_short","w","zip_INSERT_STRING","zip_SEND_CODE","tree","zip_send_bits","zip_D_CODE","dist","zip_SMALLER","n","m","zip_read_buff","buff","offset","length","charCodeAt","zip_longest_match","cur_match","matchp","chain_length","scanp","best_len","limit","strendp","scan_end1","scan_end","zip_fill_window","more","zip_init_deflate","bits","code","zip_LENGTH_CODES","zip_gen_codes","zip_bi_reverse","zip_init_block","zip_ct_init","j","zip_MIN_MATCH","zip_lm_init","zip_deflate_internal","buff_size","zip_qcopy","flush","zip_ct_tally","zip_flush_block","zip_deflate_fast","zip_deflate_better","zip_pqdownheap","k","v","next_code","zip_build_tree","desc","stree","node","xnew","h","xbits","f","extra","base","overflow","zip_gen_bitlen","zip_scan_tree","curlen","prevlen","nextlen","count","max_count","min_count","zip_send_tree","eof","opt_lenb","static_lenb","max_blindex","stored_len","zip_build_bl_tree","zip_bi_windup","zip_compress_block","lcodes","dcodes","blcodes","rank","zip_send_all_trees","lc","dcode","out_length","in_length","zip_LIT_BUFSIZE","ltree","dtree","lx","dx","fx","flag","value","res","deflate","str","level","zip_INBUFSIZ","zip_deflate_start","aout","cbuf","String","fromCharCode","join","encode64","data","r","append3bytes","b1","b2","b3","c2","c3","c4","encode6bit","define","Blockly","$","scope","createTemplateTagFirstArg","createTemplateTagFirstArgWithRaw","arrayIteratorImpl","done","arrayIterator","makeIterator","Symbol","arrayFromIterator","arrayFromIterable","owns","Object","hasOwnProperty","call","ASSUME_ES5","ASSUME_NO_NATIVE_MAP","ASSUME_NO_NATIVE_SET","SIMPLE_FROUND_POLYFILL","ISOLATE_POLYFILLS","FORCE_POLYFILL_PROMISE","FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION","defineProperty","getGlobal","globalThis","window","self","global","Math","Error","IS_SYMBOL_NATIVE","TRUST_ES6_POLYFILLS","polyfills","propertyToPolyfillSymbol","POLYFILL_PREFIX","polyfill","polyfillIsolated","polyfillUnisolated","e","configurable","writable","g","assign","arguments","objectCreate","getConstructImplementation","Reflect","Function","apply","construct","underscoreProtoCanBeSet","setPrototypeOf","TypeError","inherits","constructor","checkStringArgs","RegExp","initSymbol","$jscomp$symbol$id_","toString","iteratorPrototype","iteratorFromArray","checkEs6ConformanceViaProxy","get","USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS","ES6_CONFORMANCE","l","id_","set","has","delete","substring","Number","typedArrayFill","fill","MapEntry","entries","x","WeakMap","data_","head_","size","previous","head","key","push","splice","clear","entry","keys","values","forEach","id","list","index","map_","Map","add","goog","root","goog.define","name","defaultValue","DEBUG","DISALLOW_TEST_ONLY_CODE","provide","goog.provide","module","goog.module","goog.module.get","declareLegacyNamespace","goog.module.declareLegacyNamespace","setTestOnly","goog.setTestOnly","opt_message","require","goog.require","namespace","requireType","goog.requireType","wrapLine","wrapScore","wrapMutate","wrapToText","warn","deprecationDate","deletionDate","opt_use","msg","console","injected","register","cssContent","isArray","content","inject","hasCss","pathToMedia","mediaPath","replace","cssNode","document","createElement","cssTextNode","createTextNode","appendChild","insertBefore","firstChild","startsWith","prefix","lastIndexOf","shortestStringLength","array","reduce","commonWordPrefix","opt_shortest","wordPrefix","max","letter","commonWordSuffix","substr","charAt","wrap","text","lines","split","words","trim","score","lineCount","lastScore","wordBreaks","steps","insertedBreaks","lastText","lineLengths","linePunctuation","maxLength","pow","abs","indexOf","bestBreaks","bestScore","mutatedWordBreaks","concat","mutatedScore","undefined","isNumber","test","exports","TOUCH_ENABLED","documentElement","touchIdentifier_","TOUCH_MAP","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","touchend","touchcancel","longPid_","longStart","gesture","longStop","changedTouches","setTimeout","button","clientX","clientY","handleRightClick","clearTimeout","clearTouchIdentifier","shouldHandleEvent","isMouseOrTouchEvent","checkTouchIdentifier","getTouchIdentifierFromEvent","pointerId","identifier","type","setClientFromTouch","touchPoint","isTouchEvent","splitEventByTouches","events","newEvent","target","stopPropagation","preventDefault","raw","rawUpper","toUpperCase","rawUserAgent","isIe","isEdge","isJavaFx","isChrome","isWebKit","isGecko","isAndroid","maxTouchPoints","isIPad","isIPod","isIPhone","isMac","isTablet","isMobile","mainWorkspace","conditionalBind","thisObject","func","opt_noCaptureIdentifier","opt_noPreventDefault","handled","wrapFunc","captureIdentifier","event","bindData","Touch","addEventListener","touchWrapFunc","bind","unbind","bindDatum","pop","removeEventListener","isTargetInput","isContentEditable","dataset","isTextInput","isRightButton","ctrlKey","userAgent","MAC","mouseToSvg","svg","matrix","svgPoint","createSVGPoint","y","getScreenCTM","inverse","matrixTransform","getScrollDeltaPixels","deltaMode","deltaX","deltaY","Blocks","create","getMainWorkspace","setMainWorkspace","workspace","parentContainer","selected","getSelected","setSelected","newSelection","getParentContainer","setParentContainer","newParent","svgResize","options","parentWorkspace","getParentSvg","cachedSize","getCachedParentSvgSize","div","parentNode","width","offsetWidth","height","offsetHeight","setAttribute","setCachedParentSvgSize","resize","draggingConnections","getBlockTypeCounts","block","opt_stripFollowing","typeCountsMap","descendants","getDescendants","nextBlock","getNextBlock","checkBlock","jsonInitFactory","jsonDef","jsonInit","defineBlocksWithJsonArray","jsonArray","defineBlocks","createBlockDefinitionsFromJsonArray","blocks","elem","init","definition","customTooltip","setCustomTooltip","customFn","getCustomTooltip","visible","isVisible","defineProperties","blocked","LIMIT","mouseOutPid","showPid","lastX","lastY","element","poisonedElement","OFFSET_X","OFFSET_Y","RADIUS_OK","HOVER_MS","MARGINS","DIV","getDiv","getTooltipOfObject","object","obj","getTargetObject","tooltip","createDom","className","body","bindMouseEvents","mouseOverWrapper_","onMouseOver","mouseOutWrapper_","onMouseOut","onMouseMove","unbindMouseEvents","newElement","currentTarget","hide","_e","pageX","dy","pageY","sqrt","show","dispose","style","display","unblock","renderDefaultContent","tip","textContent","rtl","RTL","direction","getPosition","windowWidth","clientWidth","windowHeight","clientHeight","anchorX","anchorY","scrollY","scrollX","left","top","SVG_NS","HTML_NS","XLINK_NS","NodeType","ELEMENT_NODE","TEXT_NODE","COMMENT_NODE","DOCUMENT_POSITION_CONTAINED_BY","cacheWidths","cacheReference","canvasContext","createSvgElement","attrs","opt_parent","createElementNS","runtimeStyle","currentStyle","addClass","classes","getAttribute","removeClasses","classNames","classList","removeClass","removeAttribute","hasClass","removeNode","removeChild","insertAfter","newNode","refNode","siblingNode","nextSibling","containsNode","parent","descendant","compareDocumentPosition","setCssTransform","transform","startTextWidthCache","stopTextWidthCache","getTextWidth","textElement","baseVal","IE","EDGE","getBBox","getComputedTextLength","getFastTextWidth","fontSize","fontWeight","fontFamily","getFastTextWidthWithSizeString","computeCanvas","getContext","font","measureText","measureFontMetrics","span","result","baseline","alignItems","offsetTop","owner","rendererClassName","themeClassName","testOnly_setDiv","newDiv","newOwner","newDispose","getRenderer","getClassName","getTheme","markFocused","hideIfOwner","oldOwner","positionInternal","positionWithAnchor","viewportBBox","anchorBBox","widgetSize","calculateY","calculateX","min","right","bottom","Role","GRID","GRIDCELL","GROUP","LISTBOX","MENU","MENUITEM","MENUITEMCHECKBOX","OPTION","PRESENTATION","ROW","TREE","TREEITEM","ACTIVEDESCENDANT","COLCOUNT","DISABLED","EXPANDED","INVALID","LABEL","LABELLEDBY","LEVEL","ORIENTATION","POSINSET","ROWCOUNT","SELECTED","SETSIZE","VALUEMAX","VALUEMIN","setRole","roleName","setState","stateName","TEST_ONLY","nextId","getNextUniqueId","soup","internal","genUid","internal.genUid","soupLength","random","typeMap","nameMap","DEFAULT","Type","name_","module$exports$Blockly$registry","CONNECTION_CHECKER","CURSOR","EVENT","FIELD","RENDERER","TOOLBOX","THEME","TOOLBOX_ITEM","FLYOUTS_VERTICAL_TOOLBOX","FLYOUTS_HORIZONTAL_TOOLBOX","METRICS_MANAGER","BLOCK_DRAGGER","SERIALIZER","registryItem","opt_allowOverrides","toLowerCase","caselessName","typeRegistry","nameRegistry","validate","fromJson","unregister","getItem","opt_throwIfMissing","hasItem","getClass","getObject","getAllItems","opt_cased","casedRegistry","getClassFromOptions","plugin","plugins","group","recordUndo","setRecordUndo","newValue","getRecordUndo","disabled","CREATE","BLOCK_CREATE","DELETE","BLOCK_DELETE","CHANGE","BLOCK_CHANGE","MOVE","BLOCK_MOVE","VAR_CREATE","VAR_DELETE","VAR_RENAME","UI","BLOCK_DRAG","CLICK","MARKER_MOVE","BUBBLE_OPEN","TRASHCAN_OPEN","TOOLBOX_ITEM_SELECT","THEME_CHANGE","VIEWPORT_CHANGE","COMMENT_CREATE","COMMENT_DELETE","COMMENT_CHANGE","COMMENT_MOVE","FINISHED_LOADING","BUMP_EVENTS","FIRE_QUEUE","fire","isEnabled","fireNow","queue","filter","workspaceId","eventWorkspace","Blockly.Workspace","Workspace","getById","fireChangeListener","queueIn","forward","slice","reverse","mergedQueue","hash","isNull","isUiEvent","blockId","lastEntry","lastEvent","newParentId","moveEvent","newInputName","newCoordinate","viewportEvent","viewTop","viewLeft","scale","oldScale","unshift","clearPendingUndo","disable","enable","getGroup","setGroup","state","getDescendantIds","ids","json","eventClass","eventType","registry","disableOrphans","getBlockById","initialUndoFlag","getParent","children","child","setEnabled","outputConnection","previousConnection","isDragging","toRadians","angleDegrees","PI","toDegrees","angleRadians","clamp","lowerBound","number","upperBound","temp","bumpIntoBounds","bumpObjectIntoBounds","scrollMetrics","objectMetrics","getBoundingRectangle","newYPosition","leftClamp","rightClamp","newXPosition","moveBy","bumpIntoBoundsHandler","metricsManager","getMetricsManager","hasFixedEdges","eventUtils","scrollMetricsInWsCoords","getScrollMetrics","extractObjectFromEvent","oldGroup","wasBumped","bumpTopObjectsIntoBounds","getRootBlock","getCommentById","commentId","topBlocks","getTopBoundedElements","Coordinate","module$exports$Blockly$utils$Coordinate","s","tx","ty","equals","distance","magnitude","difference","sum","Size","module$exports$Blockly$utils$Size","getSize","getStyle","getSizeWithDisplay","originalDisplay","originalVisibility","visibility","originalPosition","position","getComputedStyle","getCascadedStyle","property","defaultView","styles","getPropertyValue","getPageOffset","el","pos","box","getBoundingClientRect","scrollCoord","pageXOffset","scrollLeft","pageYOffset","scrollTop","getViewportPageOffset","setElementShown","isShown","isRightToLeft","getBorderBox","parseFloat","scrollIntoContainerView","container","opt_center","getContainerOffsetToScrollInto","elementPos","containerPos","containerBorder","relX","relY","elementSize","spaceX","spaceY","Rect","module$exports$Blockly$utils$Rect","other","arrow","ARROW_SIZE","BORDER_SIZE","ARROW_HORIZONTAL_PADDING","PADDING_Y","ANIMATION_TIME","animateOutTimer","onHide","renderedClassName","boundsElement","positionToField","opacity","transition","setBoundsElement","boundsElem","getContentDiv","clearContent","setColour","backgroundColour","borderColour","backgroundColor","borderColor","showPositionedByBlock","field","opt_onHide","opt_secondaryYOffset","showPositionedByRect","getScaledBboxOfBlock","showPositionedByField","getScaledBboxOfField","blockSvg","getSvgRoot","bBox","scaledHeight","scaledWidth","xy","getScaledBBox","primaryX","primaryY","secondaryY","sourceBlock","getSourceBlock","secondaryX","getBoundsInfo","internal.getBoundsInfo","boundPosition","boundSize","getPositionMetrics","internal.getPositionMetrics","boundsInfo","divSize","getPositionBelowMetrics","getPositionAboveMetrics","clientTop","getPositionTopOfPageMetrics","initialX","xCoords","divX","initialY","finalX","finalY","arrowX","arrowY","arrowAtTop","arrowVisible","sourceX","getPositionX","boundsLeft","boundsRight","divWidth","relativeArrowX","horizPadding","divOwner","opt_withoutAnimation","hideWithoutAnimation","metrics","floor","repositionForWindowResize","XY_REGEX","XY_STYLE_REGEX","getRelativeXY","match","styleComponents","getInjectionDivXY","is3dSupported","cached_","has3d","transforms","webkitTransform","OTransform","msTransform","MozTransform","t","computedStyle","getViewportBBox","scrollOffset","getDocumentScroll","win","screenToWsCoordinates","ws","screenCoordinates","screenX","screenY","boundingRect","getInjectionDiv","clientOffsetPixels","mainOffsetPixels","getOriginOffsetInPixels","svgSize","cachedWidth_","cachedHeight_","Svg","tagName","tagName_","module$exports$Blockly$utils$Svg","ANIMATE","CIRCLE","CLIPPATH","DEFS","FECOMPOSITE","FECOMPONENTTRANSFER","FEFLOOD","FEFUNCA","FEGAUSSIANBLUR","FEPOINTLIGHT","FESPECULARLIGHTING","FILTER","FOREIGNOBJECT","G","IMAGE","LINE","PATH","PATTERN","POLYGON","RECT","SVG","TEXT","TSPAN","BlockDragSurfaceSvg","dragGroup_","SVG_","container_","scale_","surfaceXY_","childSurfaceXY_","xmlns","dom","version","module$exports$Blockly$BlockDragSurfaceSvg","childNodes","translateAndScaleGroup","fixedX","toFixed","fixedY","translateSurfaceInternal_","translateBy","getSurfaceTranslation","getCurrentBlock","clone","clearAndHide","opt_newSurface","currentBlockElement","xmlDocument","fieldToDom","allFieldsToDom","Grid","pattern","gridPattern_","spacing_","length_","line2_","line1_","snapToGrid_","module$exports$Blockly$Grid","getPatternId","safeSpacing","start","half","end","setLineAttributes_","line","x1","x2","y1","y2","update","rnd","gridOptions","defs","gridPattern","patternUnits","stroke","Msg","NAME_SPACE","getDocument","setDocument","textToDomDocument","oParser","DOMParser","parseFromString","domToText","oSerializer","XMLSerializer","serializeToString","ConnectionType","INPUT_VALUE","OUTPUT_VALUE","NEXT_STATEMENT","PREVIOUS_STATEMENT","inputTypes","VALUE","STATEMENT","DUMMY","workspaceToDom","opt_noId","treeXml","variablesElement","variablesToDom","Blockly.Variables","allUsedVarModels","hasChildNodes","comments","getTopComments","toXmlWithXY","getTopBlocks","blockToDomWithXY","variableList","variables","variable","getId","isInsertionMarker","getChildren","DocumentFragment","getWidth","blockToDom","getRelativeToSurfaceXY","round","isSerializable","toXml","inputList","input","fieldRow","fieldDom","isShadow","mutationToDom","mutation","hasAttributes","commentText","getCommentText","commentModel","pinned","commentElement","dataElement","empty","childBlock","connection","targetBlock","childShadow","getShadowDom","cloneShadow","childElem","nodeType","inputsInline","inputsInlineDefault","isCollapsed","isDeletable","isMovable","isEditable","nextElem","nextShadow","nextConnection","shadow","textNode","cloneNode","nodeName","domToPrettyText","blob","indent","textToDom","doc","getElementsByTagName","clearWorkspaceAndLoadFromXml","xml","setResizesEnabled","blockIds","domToWorkspace","swap","newBlockIds","existingGroup","variablesFirst","xmlChild","xmlChildElement","domToBlock","blockX","hasAttribute","blockY","isNaN","rendered","Blockly.WorkspaceCommentSvg","WorkspaceCommentSvg","fromXmlRendered","Blockly.WorkspaceComment","WorkspaceComment","fromXml","domToVariables","appendDomToWorkspace","getBlocksBoundingBox","bbox","farY","topX","newLeftX","Infinity","newRightX","newY","blockXY","offsetY","ySeparation","offsetX","xmlBlock","variablesBeforeCreation","getAllVariables","domToBlockHeadless","topBlockSvg","topBlock","setConnectionTracking","initSvg","render","disposed","updateDisabled","resizeContents","initModel","newVariables","getAddedVariables","thisVariable","xmlVariables","createVariable","findChildBlocks","xmlNode","childBlockInfo","childBlockElement","childShadowElement","applyInputTagNodes","xmlChildren","prototypeName","getInput","setShadowDom","applyNextTagNodes","isConnected","parentConnection","connectedToParentNext","outerHTML","newBlock","xmlChildNameMap","mapSupportedXmlTags","childNodeMap","comment","Blockly.Comment","shouldCallInitSvg","applyMutationTagNodes","domToMutation","applyCommentTagNodes","$jscomp$loop$prop$blockSvg$289","setCommentText","getCommentIcon","isInFlyout","setVisible","applyDataTagNodes","connect","applyFieldTagNodes","domToField","inline","setInputsInline","deletable","setDeletable","movable","setMovable","editable","setEditable","collapsed","setCollapsed","getVarModels","setShadow","fieldName","getField","deleteNext","CATEGORY_TOOLBOX_KIND","FLYOUT_TOOLBOX_KIND","Position","TOP","BOTTOM","LEFT","RIGHT","convertToolboxDefToJson","toolboxDef","Element","parseToolboxTree","convertToToolboxJson","validateToolbox","toolboxJson","toolboxKind","toolboxContents","convertFlyoutDefToJsonArray","flyoutDef","xmlToJsonArray","hasCategories","item","isCategoryCollapsible","categoryInfo","contents","Node","addAttributes","arr","attributes","attr","childCtor","parentCtor","superClass_","prototype","mixin","source","deepMerge","map","Theme","opt_blockStyles","opt_categoryStyles","opt_componentStyles","blockStyles","categoryStyles","componentStyles","fontStyle","startHats","module$exports$Blockly$Theme","setBlockStyle","blockStyleName","blockStyle","categoryStyleName","categoryStyle","componentName","getComponentStyle","styleValue","setFontStyle","defineTheme","themeObj","theme","Classic","colour_blocks","colourPrimary","list_blocks","logic_blocks","loop_blocks","math_blocks","procedure_blocks","text_blocks","variable_blocks","variable_dynamic_blocks","hat_blocks","hat","colour_category","colour","list_category","logic_category","loop_category","math_category","procedure_category","text_category","variable_category","variable_dynamic_category","Options","toolboxJsonDef","hasTrashcan","hasCollapse","hasComments","hasDisable","hasSounds","readOnly","maxTrashcanContents","horizontalLayout","toolboxAtStart","toolboxPosition","toolbox","renderer","oneBasedIndex","collapse","maxBlocks","maxInstances","moveOptions","parseMoveOptions_","hasScrollbars","scrollbars","languageTree","parseGridOptions_","zoomOptions","parseZoomOptions_","parseThemeOptions_","rendererOverrides","getMetrics","setMetrics","move","horizontal","vertical","wheel","drag","zoom","controls","startScale","maxScale","minScale","scaleSpeed","pinch","grid","spacing","snap","Scrollbar","opt_pair","opt_class","opt_margin","workspace_","pair_","horizontal_","margin_","DEFAULT_SCROLLBAR_MARGIN","ratio","oldHostMetrics_","origin_","startDragHandle","handlePosition_","handleLength_","scrollbarLength_","startDragMouse_","containerVisible_","isVisible_","svgGroup_","outerSvg_","svgHandle_","svgBackground_","createDom_","scrollbarThickness","lengthAttribute_","positionAttribute_","onMouseDownBarWrapper_","scrollbar","onMouseDownBar_","onMouseDownHandleWrapper_","onMouseDownHandle_","cleanUp_","getThemeManager","unsubscribe","module$exports$Blockly$Scrollbar","newLength","constrainHandlePosition_","newPosition","setScrollbarLength_","newSize","setPosition","opt_metrics","hostMetrics","metricsAreEquivalent_","resizeHorizontal_","resizeVertical_","updateMetrics_","requiresViewResize_","viewWidth","viewHeight","absoluteLeft","absoluteTop","resizeViewHorizontal","resizeContentHorizontal","viewSize","xCoordinate","scrollWidth","setHandleLength_","setHandlePosition","handleLength","constrainHandleLength_","maxScrollDistance","maxHandleOffset","handleOffset","resizeViewVertical","resizeContentVertical","scrollHeight","radius","rx","ry","subscribe","visibilityChanged","updateDisplay_","mouseXY","getInverseScreenCTM","mouseLocation","handleXY","handlePosition","pageLength","handleStart","setupDragSurface","onMouseUpWrapper_","onMouseUpHandle_","onMouseMoveWrapper_","onMouseMoveHandle_","resetDragSurface","hideChaff","getRatio_","xyRatio","updateMetrics","first","second","ScrollbarPair","addHorizontal","addVertical","isPair","hScroll","vScroll","corner_","getBubbleCanvas","module$exports$Blockly$ScrollbarPair","resizeH","resizeV","maybeFireViewportChangeEvent","canScrollVertically","setOrigin","setY","setContainerVisible","resizeContent","WIN_KEY_FF_LINUX","MAC_ENTER","BACKSPACE","TAB","NUM_CENTER","ENTER","SHIFT","CTRL","ALT","PAUSE","CAPS_LOCK","ESC","SPACE","PAGE_UP","PAGE_DOWN","END","HOME","UP","DOWN","PLUS_SIGN","PRINT_SCREEN","INSERT","ZERO","ONE","TWO","THREE","FOUR","FIVE","SIX","SEVEN","EIGHT","NINE","FF_SEMICOLON","FF_EQUALS","FF_DASH","FF_HASH","QUESTION_MARK","AT_SIGN","A","B","C","D","E","F","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","META","WIN_KEY_RIGHT","CONTEXT_MENU","NUM_ZERO","NUM_ONE","NUM_TWO","NUM_THREE","NUM_FOUR","NUM_FIVE","NUM_SIX","NUM_SEVEN","NUM_EIGHT","NUM_NINE","NUM_MULTIPLY","NUM_PLUS","NUM_MINUS","NUM_PERIOD","NUM_DIVISION","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","NUMLOCK","SCROLL_LOCK","FIRST_MEDIA_KEY","LAST_MEDIA_KEY","SEMICOLON","DASH","EQUALS","COMMA","PERIOD","SLASH","APOSTROPHE","TILDE","SINGLE_QUOTE","OPEN_SQUARE_BRACKET","BACKSLASH","CLOSE_SQUARE_BRACKET","WIN_KEY","MAC_FF_META","MAC_WK_CMD_LEFT","MAC_WK_CMD_RIGHT","WIN_IME","VK_NONAME","PHANTOM","ShortcutRegistry","reset","module$exports$Blockly$ShortcutRegistry","registry_","keyMap_","shortcut","shortcutName","removeAllKeyMappings","addKeyMapping","keyCode","opt_allowCollision","shortcutNames","removeKeyMapping","opt_quiet","shortcutIdx","keyMap","getRegistry","serializeKeyEvent_","getShortcutNamesByKeyCode","preconditionFn","callback","modifier","serializedKey","modifierKeys","getModifierState","checkModifiers_","modifiers","validModifiers","createSerializedKey","Shift","KeyCodes","Control","Alt","Meta","WorkspaceDragSurfaceSvg","previousSibling_","translateSurface","module$exports$Blockly$WorkspaceDragSurfaceSvg","newSurface","blockCanvas","bubbleCanvas","setContentsAndShow","previousSibling","copyData","copy","toCopy","toCopyData","paste","isFlyout","targetWorkspace","typeCounts","isCapacityAvailable","saveInfo","duplicate","toDuplicate","oldCopyData","pastedThing","config","dragRadius","flyoutDragRadius","snapRadius","connectingSnapRadius","currentConnectionPreference","bumpDelay","MenuItem","opt_value","content_","value_","enabled_","element_","rightToLeft_","roleName_","highlight_","checked_","checkable_","actionHandler_","checkbox","contentDom","aria","State","module$exports$Blockly$MenuItem","setRightToLeft","checkable","checked","setHighlighted","highlight","getElement","nameDep","enabled","fn","Menu","menuItems_","onKeyDownHandler_","mouseLeaveHandler_","mouseEnterHandler_","clickHandler_","mouseOverHandler_","highlightedItem_","openingCoords","module$exports$Blockly$Menu","menuItem","tabIndex","handleMouseOver_","handleClick_","handleMouseEnter_","handleMouseLeave_","handleKeyEvent_","focus","preventScroll","blur","menuElem","parentElement","currentHighlighted","highlightNext","highlightHelper_","highlightLast_","startIndex","delta","getMenuItem_","oldCoords","newCoords","performAction","blur_","shiftKey","metaKey","altKey","highlighted","highlightPrevious","highlightFirst_","menuDom","menuSize","VARIABLES","BLOCKS","serializer","DeserializationError","MissingBlockType","module$exports$Blockly$serialization$exceptions","MissingConnection","toDevString","BadConnectionCheck","reason","childConnection","childState","RealChildOfShadow","ISerializer","module$exports$Blockly$serialization$ISerializer","save","addCoordinates","addInputBlocks","addNextBlocks","doFullSerialization","saveCoords","saveAttributes","saveExtraState","saveIcons","saveFields","saveInputBlocks","saveNextBlocks","extraState","fields","saveState","inputs","connectionState","saveConnection","getShadowState","append","appendInternal","prevRecordUndo","appendPrivate","loadCoords","loadAttributes","loadExtraState","tryToConnectParent","loadIcons","loadFields","loadInputBlocks","loadNextBlocks","initBlock","checker","connectionChecker","getErrorMessage","canConnectWithReason","fieldState","loadState","inputName","loadConnection","setShadowState","icons","getIcons","computeIconLocation","saveBlock","BlockSerializer","priority","priorities","blockStates","languageVersion","load","module$contents$Blockly$serialization$blocks_BlockSerializer","serializationRegistry","Abstract","isBlank","module$exports$Blockly$Events$Abstract","_forward","getEventWorkspace_","BlockBase","opt_block","AbstractEvent","toJson","module$exports$Blockly$Events$BlockBase","currentBlock","BlockCreate","module$exports$Blockly$Events$BlockCreate","run","setCurrentBlock","menu_","menu","populate_","position_","option","addChild","onAction","actionHandler","_menuItem","createWidget_","haltPropagation","callbackFactory","select","commentDeleteOption","deleteOption","commentDuplicateOption","duplicateOption","workspaceCommentOption","wsCommentOption","wsCommentOption.callback","DEFAULT_SIZE","finalOffset","removeElem","useDebugger","isDebuggerEnabled","startDebugger","stopDebugger","Types","NONE","HAT","ICON","SPACER","BETWEEN_ROW_SPACER","IN_ROW_SPACER","EXTERNAL_VALUE_INPUT","INPUT","INLINE_INPUT","STATEMENT_INPUT","CONNECTION","PREVIOUS_CONNECTION","NEXT_CONNECTION","OUTPUT_CONNECTION","CORNER","LEFT_SQUARE_CORNER","LEFT_ROUND_CORNER","RIGHT_SQUARE_CORNER","RIGHT_ROUND_CORNER","JAGGED_EDGE","TOP_ROW","BOTTOM_ROW","INPUT_ROW","LEFT_CORNER","RIGHT_CORNER","nextTypeValue_","getType","Types.getType","isField","Types.isField","isHat","Types.isHat","isIcon","Types.isIcon","isSpacer","Types.isSpacer","isInRowSpacer","Types.isInRowSpacer","isInput","Types.isInput","isExternalInput","Types.isExternalInput","isInlineInput","Types.isInlineInput","isStatementInput","Types.isStatementInput","isPreviousConnection","Types.isPreviousConnection","isNextConnection","Types.isNextConnection","isPreviousOrNextConnection","Types.isPreviousOrNextConnection","isLeftRoundedCorner","Types.isLeftRoundedCorner","isRightRoundedCorner","Types.isRightRoundedCorner","isLeftSquareCorner","Types.isLeftSquareCorner","isRightSquareCorner","Types.isRightSquareCorner","isCorner","Types.isCorner","isJaggedEdge","Types.isJaggedEdge","isRow","Types.isRow","row","isBetweenRowSpacer","Types.isBetweenRowSpacer","isTopRow","Types.isTopRow","isBottomRow","Types.isBottomRow","isTopOrBottomRow","Types.isTopOrBottomRow","isInputRow","Types.isInputRow","Row","constants","elements","xPos","yPos","widthWithConnectedBlocks","minWidth","minHeight","hasStatement","hasExternalInput","statementEdge","hasJaggedEdge","hasDummyInput","hasInlineInput","constants_","notchOffset","NOTCH_OFFSET_LEFT","align","getLastInput","module$exports$Blockly$blockRendering$Row","endsWithElemSpacer","BottomRow","hasNextConnection","descenderHeight","hasLeftSquareCorner","module$exports$Blockly$blockRendering$BottomRow","_block","measure","startsWithElemSpacer","Measurable","centerline","Connection","connectionModel","module$exports$Blockly$blockRendering$Measurable","shape","shapeFor","isDynamicShape","hsvSaturation","getHsvSaturation","setHsvSaturation","newSaturation","hsvValue","getHsvValue","setHsvValue","parse","hex","names","rgb","rgbToHex","hexToRgb","hsvToHex","red","green","blue","sextant","remainder","val1","val2","val3","blend","colour1","colour2","factor","hex1","hex2","rgb1","rgb2","aqua","black","fuchsia","gray","lime","maroon","navy","olive","purple","silver","teal","white","yellow","hueToHex","hue","point","curve","command","points","moveTo","lineTo","lineOnAxis","arc","flags","tokenizeInterpolationInternal","message","parseInterpolationTokens","tokens","chars","buffer","rawKey","keyUpper","bklyKey","rawValue","mergedTokens","tokenizeInterpolation","replaceMessageReferences","interpolatedResult","checkMessageReferences","validSoFar","msgTable","parseBlockColour","dereferenced","errorMsg","ConstantProvider","NO_PADDING","SMALL_PADDING","MEDIUM_PADDING","MEDIUM_LARGE_PADDING","LARGE_PADDING","TALL_INPUT_FIELD_OFFSET_Y","TAB_HEIGHT","TAB_OFFSET_FROM_TOP","TAB_VERTICAL_OVERLAP","TAB_WIDTH","NOTCH_WIDTH","NOTCH_HEIGHT","MIN_BLOCK_WIDTH","EMPTY_BLOCK_SPACER_HEIGHT","DUMMY_INPUT_SHADOW_MIN_HEIGHT","DUMMY_INPUT_MIN_HEIGHT","CORNER_RADIUS","STATEMENT_INPUT_NOTCH_OFFSET","STATEMENT_BOTTOM_SPACER","STATEMENT_INPUT_PADDING_LEFT","BETWEEN_STATEMENT_PADDING_Y","TOP_ROW_MIN_HEIGHT","TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT","BOTTOM_ROW_MIN_HEIGHT","BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT","ADD_START_HATS","START_HAT_HEIGHT","START_HAT_WIDTH","SPACER_DEFAULT_HEIGHT","MIN_BLOCK_HEIGHT","EMPTY_INLINE_INPUT_PADDING","EMPTY_INLINE_INPUT_HEIGHT","EXTERNAL_VALUE_INPUT_PADDING","EMPTY_STATEMENT_INPUT_HEIGHT","START_POINT","JAGGED_TEETH_HEIGHT","JAGGED_TEETH_WIDTH","FIELD_TEXT_FONTSIZE","FIELD_TEXT_FONTWEIGHT","FIELD_TEXT_FONTFAMILY","FIELD_TEXT_BASELINE","FIELD_TEXT_HEIGHT","FIELD_BORDER_RECT_RADIUS","FIELD_BORDER_RECT_HEIGHT","FIELD_BORDER_RECT_X_PADDING","FIELD_BORDER_RECT_Y_PADDING","FIELD_BORDER_RECT_COLOUR","FIELD_TEXT_BASELINE_CENTER","FIELD_DROPDOWN_BORDER_RECT_HEIGHT","FIELD_DROPDOWN_SVG_ARROW","FIELD_DROPDOWN_COLOURED_DIV","FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW","FIELD_DROPDOWN_SVG_ARROW_PADDING","FIELD_DROPDOWN_SVG_ARROW_SIZE","FIELD_DROPDOWN_SVG_ARROW_DATAURI","FIELD_COLOUR_FULL_BLOCK","FIELD_TEXTINPUT_BOX_SHADOW","FIELD_COLOUR_DEFAULT_WIDTH","FIELD_COLOUR_DEFAULT_HEIGHT","FIELD_CHECKBOX_X_OFFSET","randomIdentifier","defs_","embossFilterId","embossFilter_","disabledPatternId","disabledPattern_","debugFilterId","cssNode_","debugFilter_","CURSOR_COLOUR","MARKER_COLOUR","CURSOR_WS_WIDTH","WS_CURSOR_HEIGHT","CURSOR_STACK_PADDING","CURSOR_BLOCK_PADDING","CURSOR_STROKE_WIDTH","FULL_BLOCK_FIELDS","INSERTION_MARKER_COLOUR","INSERTION_MARKER_OPACITY","SHAPES","PUZZLE","NOTCH","JAGGED_TEETH","makeJaggedTeeth","makeNotch","START_HAT","makeStartHat","PUZZLE_TAB","makePuzzleTab","INSIDE_CORNERS","makeInsideCorners","OUTSIDE_CORNERS","makeOutsideCorners","setTheme","validatedBlockStyle_","setDynamicProperties_","module$exports$Blockly$blockRendering$ConstantProvider","setFontConstants_","setComponentConstants_","fontMetrics","getBlockStyleForColour","createBlockStyle_","valid","parsedColour","colourSecondary","generateSecondaryColour_","colourTertiary","generateTertiaryColour_","inputColour","path","makeMainPath","up","back","halfHeight","control1Y","overlap","control2Y","endPoint1","endPoint2","pathUp","pathDown","dir","outerWidth","innerWidth","pathLeft","pathRight","pathTop","pathBottom","topLeft","topRight","bottomLeft","bottomRight","rightHeight","selector","injectCSS_","embossFilter","stdDeviation","feSpecularLighting","surfaceScale","specularConstant","specularExponent","z","in2","operator","k1","k2","k3","k4","disabledPattern","createDebugFilter","debugFilter","debugComponentTransfer","tableValues","cssArray","getCSS_","cssNodeId","getElementById","parentInput","EDITABLE","flipRtl","getFlipRtl","Field","fieldClass","fieldObject","MarkerManager","cursorSvg_","cursor_","markers_","markerSvg_","module$exports$Blockly$MarkerManager","marker","unregisterMarker","setDrawer","makeMarkerDrawer","setMarkerSvg","getDrawer","setCursor","cursor","drawer","setCursorSvg","cursorSvg","getBlockCanvas","markerSvg","updateMarkers","keyboardAccessibilityMode","getCursor","draw","markerId","markerIds","LOCAL_MARKER","BlockChange","opt_element","opt_name","opt_oldValue","opt_newValue","oldValue","module$exports$Blockly$Events$BlockChange","mutator","setValue","oldState","getExtraBlockState_","JSON","stringify","disconnectPid","disconnectGroup","disposeUiEffect","svgGroup","getAudioManager","play","getSvgXY","translateX_","translateY_","bBox_","disposeUiStep","Date","workspaceScale","percent","connectionUiEffect","ripple","cx","cy","connectionUiStep","disconnectUiEffect","getHeightWidth","atan","DISPLACEMENT","disconnectUiStep","DURATION","skew_","sin","WIGGLES","translate_","disconnectUiStop","COLLAPSE_CHARS","DRAG_STACK","OPPOSITE_TYPE","RENAME_VARIABLE_ID","DELETE_VARIABLE_ID","ComponentManager","componentData_","capabilityToComponentIds_","addComponent","componentInfo","component","capabilities","stringCapabilities","capability","module$exports$Blockly$ComponentManager","addCapability","getComponent","hasCapability","removeCapability","getComponents","sorted","componentIds","components","componentDataList","componentData","sort","weight","ComponentDatum","Capability","POSITIONABLE","DRAG_TARGET","DELETE_AREA","AUTOHIDEABLE","alertImplementation","opt_callback","alert","confirmImplementation","confirm","promptImplementation","prompt","setAlert","alertFunction","setConfirm","confirmFunction","setPrompt","promptFunction","VarBase","opt_variable","varId","module$exports$Blockly$Events$VarBase","VarCreate","varType","varName","module$exports$Blockly$Events$VarCreate","deleteVariableById","ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE","VariableModel","opt_type","opt_id","module$exports$Blockly$VariableModel","compareByName","var1","var2","localeCompare","sensitivity","CATEGORY_NAME","getAllBlocks","variableHash","blockVariables","allDeveloperVariables","getDeveloperVariables","getDeveloperVars","devVars","flyoutCategory","xmlList","registerButtonCallback","createVariableButtonHandler","getTargetWorkspace","blockList","flyoutCategoryBlocks","variableModelList","getVariablesOfType","mostRecentVariable","generateVariableFieldDom","VAR_LETTER_OPTIONS","generateUniqueName","generateUniqueNameFromOptions","getAllVariableNames","startChar","usedNames","letters","suffix","letterIndex","inUse","potName","promptAndCheckWithAlert","defaultName","promptName","existing","nameUsedWithAnyType","renameVariable","promptText","newName","nameUsedWithOtherType","renameVariableById","defaultText","newVar","allVariables","getVariableMap","variableModel","getOrCreateVariablePackage","getVariable","potentialVariableMap","getPotentialVariableMap","getVariableById","originalVariables","allCurrentVariables","addedVariables","Names","reservedWords","opt_variablePrefix","variablePrefix_","reservedDict_","db_","dbReverse_","variableMap_","splitWords","setVariableMap","populateVariables","getName","NameType","VARIABLE","procedures","Blockly.Procedures","allProcedures","PROCEDURE","nameOrId","getNameForUserVariable_","normalizedName","DEVELOPER_VARIABLE","typeDb","safeName","getDistinctName","getUserNames","safeName_","encodeURI","name1","name2","DEVELOPER_VARIABLE_TYPE","VarDelete","module$exports$Blockly$Events$VarDelete","VarRename","oldName","module$exports$Blockly$Events$VarRename","VariableMap","module$exports$Blockly$VariableMap","conflictVar","renameVariableWithConflict_","renameVariableAndUses_","updateVarName","renameVarById","variableId","variableName","uses","getVariableUsesById","procedureName","getFieldValue","deleteText","confirmText","ok","deleteVariableInternal","deleteVariable","getVariableTypes","variableMap","types","hasEmpty","allNames","BlockMove","location","currentLocation_","oldParentId","parentId","oldInputName","oldCoordinate","coordinate","recordNew","module$exports$Blockly$Events$BlockMove","getInputWithBlock","parentBlock","unplug","blockConnection","connectionType","COLLAPSED_INPUT_NAME","COLLAPSED_FIELD_NAME","sourceBlock_","targetConnection","shadowDom_","check_","shadowState_","connect_","disconnect","shadowState","stashShadowState_","applyShadowState_","setParent","orphan","orphanConnection","getConnectionForOrphanedConnection","onFailedConnect","setShadowStateInternal_","module$exports$Blockly$Connection","_otherConnection","otherConnection","getConnectionChecker","canConnect","eventGroup","isSuperior","disconnectInternal_","respawnShadow_","createShadowBlock_","setCheck","check","onCheckChanged_","shadowDom","returnCurrent","_maxLimit","getParentInput","serializeShadow_","attemptToConnect","blockShadow","startBlock","getConnectionForOrphanedOutput","lastConnectionInStack","CAN_CONNECT","REASON_SELF_CONNECTION","REASON_WRONG_TYPE","REASON_TARGET_NULL","REASON_CHECKS_FAILED","REASON_DIFFERENT_WORKSPACES","REASON_SHADOW_PARENT","REASON_DRAG_CHECKS_FAILED","REASON_PREVIOUS_AND_OUTPUT","connectReciprocally","getSingleConnection","orphanBlock","foundConnection","typeChecker","output","ConnectionChecker","module$exports$Blockly$ConnectionChecker","opt_distance","safety","doSafetyChecks","doTypeChecks","doDragChecks","errorCode","getCheck","inferiorBlock","superiorBlock","inferiorConnection","superiorConnection","internalConstants","checkArrayOne","checkArrayTwo","distanceFrom","canConnectToPrevious_","common","getPreviousBlock","WorkspaceDB_","opt_options","isClearing","isMutator","MAX_UNDO","connectionDBList","connectionCheckerClass","topBlocks_","topComments_","commentDB_","listeners_","undoStack_","redoStack_","blockDB_","typedBlocksDB_","potentialVariableMap_","module$exports$Blockly$Workspace","aXY","bXY","sortObjects_","addTopBlock","ordered","SCAN_ANGLE","removeTypedBlock","getBlocksByType","addTopComment","Blockly.Block","Block","remainingCapacity","hasBlockLimits","copyableBlocksCount","remainingCapacityOfType","getRedoStack","undo","redo","inputStack","outputStack","inputEvent","clearUndo","shift","setBlockById","opt_shadowBlocksAreFilled","allInputsFilled","getAll","workspaces","Bubble","anchorXY","bubbleWidth","bubbleHeight","shape_","rendered_","anchorXY_","resizeGroup_","bubbleBack_","bubbleArrow_","bubbleGroup_","height_","width_","relativeTop_","relativeLeft_","autoLayout_","onMouseDownResizeWrapper_","onMouseDownBubbleWrapper_","moveCallback_","resizeCallback_","angle","ARROW_ANGLE","arrow_radians_","setAnchorLocation","BORDER_WIDTH","setBubbleSize","positionBubble_","renderArrow_","hasResize","getConstants","JAVA_FX","bubbleEmboss","resizeSize","bubbleMouseDown_","resizeMouseDown_","module$exports$Blockly$Bubble","setSvgId","getGesture","handleBubbleStart","_enable","promote","unbindDragEvents_","startDrag","bubbleMouseUp_","resizeMouseMove_","newXY","moveDrag","registerResizeEvent","lastChild","layoutBubble_","viewMetrics","getViewMetrics","optimalLeft","getOptimalRelativeLeft_","optimalTop","getOptimalRelativeTop_","topPosition","startPosition","endPosition","bottomPosition","closerPosition","fartherPosition","topPositionOverlap","getOverlap_","startPositionOverlap","closerPositionOverlap","fartherPositionOverlap","mostOverlap","relativeMin","relativeLeft","bubbleRight","workspaceRight","workspaceLeft","bubbleLeft","relativeTop","bubbleTop","bubbleBottom","workspaceTop","workspaceBottom","adding","getBubbleSize","doubleBorderWidth","relBubbleX","relBubbleY","relAnchorX","relAnchorY","hypotenuse","rise","acos","rightAngle","rightRise","rightRun","cos","bubbleSize","thickness","ARROW_THICKNESS","backoffRatio","ANCHOR_RADIUS","baseX1","baseY1","swirlAngle","swirlRise","ARROW_BEND","swirlRun","baseX2","baseY2","hexColour","moveDuringDrag","dragSurface","newLoc","paragraph","tspanElement","createNonEditableBubble","paragraphElement","iconXY","bubble","pathObject","svgPath","maxWidth","CommentBase","opt_comment","module$exports$Blockly$Events$CommentBase","CommentCreateDeleteHelper","xmlElement","CommentMove","comment_","oldCoordinate_","getXY","newCoordinate_","module$exports$Blockly$Events$CommentMove","current","BubbleDragger","draggingBubble_","dragTarget_","wouldDeleteBubble_","startXY_","dragSurface_","getBlockDragSurface","module$exports$Blockly$BubbleDragger","startBubbleDrag","setAutoLayout","moveToDragSurface_","setDragging","dragBubble","currentDragDeltaXY","pixelsToWorkspaceUnits_","oldDragTarget","getDragTarget","oldWouldDeleteBubble","shouldDelete_","updateCursorDuringBubbleDrag_","onDragExit","onDragEnter","onDragOver","dragTarget","getComponentManager","wouldDelete","setDeleteStyle","endBubbleDrag","shouldPreventMove","onDrop","fireMoveEvent_","isComment","setOldCoordinate","pixelCoord","setBlocksAndShow","WorkspaceDragger","horizontalScrollEnabled_","isMovableHorizontally","verticalScrollEnabled_","isMovableVertically","startScrollXY_","module$exports$Blockly$WorkspaceDragger","unselect","scroll","DUPLICATE_BLOCK_ERROR","InsertionMarkerManager","topBlock_","lastMarker_","lastOnStack_","firstMarker_","createMarkerBlock_","localConnection_","closestConnection_","wouldDeleteBlock_","fadedBlock_","highlightedBlock_","markerConnection_","availableConnections_","initAvailableConnections_","module$exports$Blockly$InsertionMarkerManager","wouldDeleteBlock","applyConnections","hidePreview_","bringToFront","dxy","candidate","getCandidate_","shouldUpdatePreviews_","maybeHidePreview_","maybeShowPreview_","imType","setInsertionMarker","oldMutationDom","sourceInput","resultInput","sourceField","resultField","getValue","getInputsInline","available","getConnections_","lastOnStack","candidateLocal","local","candidateClosest","closest","xDiff","yDiff","curDistance","error","getStartRadius_","updateAvailableConnections","myConnection","neighbour","log","showPreview_","getConnectionPreviewMethod","PREVIEW_TYPE","INPUT_OUTLINE","showInsertionInputOutline_","INSERTION_MARKER","showInsertionMarker_","REPLACEMENT_FADE","showReplacementFade_","shouldHighlightConnection","closestChanged","localChanged","unhighlight","hideReplacementFade_","hideInsertionInputOutline_","hideInsertionMarker_","isLastInStack","imBlock","getMatchingConnection","imConn","positionNearConnection","markerNext","markerPrev","markerOutput","isFirstInOutputStack","isFirstInStatementStack","innerConnection","previousBlockNextConnection","highlightShapeForInput","fadeForReplacement","getInsertionMarkers","UiBase","opt_workspaceId","BlockDrag","opt_isStart","opt_blocks","module$exports$Blockly$Events$UiBase","isStart","module$exports$Blockly$Events$BlockDrag","BlockDragger","draggingBlock_","draggedConnectionManager_","dragIconData_","initIconData","healStack","fireDragStartEvent_","shouldDisconnect_","disconnectBlock_","moveToDragSurface","module$exports$Blockly$BlockDragger","translate","dragIcons_","oldWouldDeleteBlock","updateCursorDuringBlockDrag_","endDrag","fireDragEndEvent_","newValues","getNewLocationAfterDrag_","newLocation","moveOffDragSurface","maybeDeleteBlock_","updateBlockAfterMove_","moveConnections","wouldConnectBlock","scheduleSnapAndBump","updateToolboxStyle_","isEnd","getToolbox","removeStyle","addStyle","icon","setIconLocation","dragIconData","getIconLocation","Click","opt_targetType","targetType","module$exports$Blockly$Events$Click","Gesture","creatorWorkspace","mouseDownXY_","currentDragDeltaXY_","startWorkspace_","targetBlock_","startBlock_","startField_","startBubble_","creatorWorkspace_","isDraggingBubble_","isDraggingBlock_","isDraggingWorkspace_","hasExceededDragRadius_","mostRecentEvent_","flyout_","workspaceDragger_","blockDragger_","bubbleDragger_","onUpWrapper_","onMoveWrapper_","isEnding_","hasStarted_","calledUpdateIsDragging_","healStack_","clearGesture","module$exports$Blockly$Gesture","currentXY","updateDragDelta_","updateIsDragging_","updateIsDraggingFromFlyout_","isBlockCreatable_","isScrollable","isDragTowardWorkspace","updateScreenCalculationsIfScrolled","createBlock","startDraggingBubble_","updateIsDraggingBlock_","startDraggingBlock_","updateIsDraggingWorkspace_","isDraggable","updateIsDraggingBubble_","BlockDraggerClass","doStart","cancel","pointerType","handleMove","handleUp","updateFromEvent_","isBubbleClick_","doBubbleClick_","isFieldClick_","doFieldClick_","isBlockClick_","doBlockClick_","isWorkspaceClick_","doWorkspaceClick_","bringBlockToFront_","showContextMenu","handleWsStart","setStartWorkspace_","handleFlyoutStart","flyout","setStartFlyout_","getWorkspace","handleBlockStart","setStartBlock","setStartBubble","setFocus","showEditor","autoClose","fireWorkspaceClick_","setStartField","setTargetBlock_","isClickable","getCurrentDragger","inProgress","currentGesture_","opt_validator","opt_config","DEFAULT_VALUE","tooltip_","validator_","size_","mouseDownWrapper_","textContent_","textElement_","borderRect_","fieldGroup_","maxDisplayLength","visible_","isDirty_","suffixField","prefixField","clickTarget_","SERIALIZABLE","SKIP_SETUP","configure_","setValidator","module$exports$Blockly$Field","setTooltip","setSourceBlock","initView","updateEditable","bindEvents_","createBorderRect_","createTextElement_","getClickTarget_","onMouseDown_","fieldElement","_doFullSerialization","legacyState","saveLegacyState","loadLegacyState","callingClass","showEditor_","isCurrentlyEditable","handler","applyColour","nodeValue","getDisplayText_","updateSize_","opt_e","totalWidth","xOffset","totalHeight","contentWidth","positionTextElement_","positionBorderRect_","render_","getAbsoluteXY_","GECKO","getText","NBSP","getText_","forceRerender","bumpNeighbours","updateMarkers_","validatedValue","doClassValidation_","processValidation_","localValidator","getValidator","doValueUpdate_","doValueInvalid_","_invalidValue","newTip","clickTarget","idx","fieldRows","_shortcut","getMarker","Sentinel","FieldLabel","class_","setClass","cssClass","InputConnection","module$exports$Blockly$blockRendering$Connection","connectedBlock","connectedBlockWidth","connectedBlockHeight","connectionOffsetY","connectionOffsetX","Debug","debugElements_","svgRoot_","randomColour_","module$exports$Blockly$blockRendering$Debug","drawSpacerRow","cursorY","isRtl","rowSpacers","isNegativeSpacing","drawSpacerElem","rowHeight","elemSpacers","drawRenderedElem","connections","drawConnection","conn","offsetInBlock_","drawRenderedRow","rows","connectedBlockBounds","drawRowWithElements","drawBoundingBox","info","blockBounds","widthWithChildren","drawDebug","clearElems","rightSide","drawRender","Drawer","block_","info_","topLeft_","inlinePath_","outlinePath_","hideHiddenIcons_","drawOutline_","drawInternals_","setPath","flipRTL","renderingDebugger","recordSizeOnBlock_","module$exports$Blockly$blockRendering$Drawer","iconInfo","hiddenIcons","iconGroup_","drawTop_","drawJaggedEdge_","drawStatementInput_","drawValueInput_","drawRightSideRow_","drawBottom_","drawLeft_","topRow","positionPreviousConnection_","startY","positionExternalValueConnection_","connectionHeight","innerTopLeftCorner","innerHeight","positionStatementInputConnection_","bottomRow","positionNextConnection_","rightCornerYOffset","outlinePath","positionOutputConnection_","tabBottom","drawInlineInput_","layoutField_","fieldInfo","connectionTop","connectionBottom","connectionWidth","positionInlineInputConnection_","connX","setOffsetInBlock","connInfo","startX","module$exports$Blockly$blockRendering$InputConnection","ExternalValueInput","ascenderHeight","Hat","getCorrectedSize","Icon","InRowSpacer","InlineInput","StatementInput","InputRow","connectedBlockWidths","JaggedEdge","ASTNode","opt_params","type_","isConnection_","isConnectionType_","location_","wsCoordinate_","processParams_","module$exports$Blockly$ASTNode","params","wsCoordinate","findNextForInput_","NAVIGATE_ALL_FIELDS","createFieldNode","createInputNode","findNextForField_","curIdx","fieldIdx","newInput","findPrevForInput_","findPrevForField_","navigateBetweenStacks_","curLocation","getLocation","curRoot","resultIndex","createStackNode","findTopASTNodeForBlock_","topConnection","getParentConnection","createConnectionNode","createBlockNode","getOutAstNodeForBlock_","getTopStackBlock","findFirstFieldOrInput_","BLOCK","STACK","WORKSPACE","OUTPUT","PREVIOUS","NEXT","in","prev","out","blockPos","DEFAULT_OFFSET_Y","createWorkspaceNode","createTopNode","MarkerMove","isCursor","opt_oldNode","opt_newNode","oldNode","marker_","parent_","currentMarkerSvg","defaultColour","colour_","markerSvgRect_","markerSvgLine_","markerInput_","markerBlock_","module$exports$Blockly$blockRendering$MarkerSvg","createDomInternal_","setParent_","curNode","applyColour_","showAtLocation_","fireMarkerEvent_","animate","beginElement","showWithBlock_","showWithOutput_","showWithInput_","showWithNext_","showWithPrevious_","showWithField_","showWithCoordinates_","showWithStack_","showWithBlockPrevOutput_","markerHeight","markerOffset","connectionShape","positionPrevious_","positionOutput_","positionBlock_","showCurrent_","getWsCoordinate","positionLine_","positionRect_","positionInput_","getOffsetInBlock","heightWidth","xPadding","yPadding","markerPath","flipRtl_","curBlock","getBlinkProperties_","attributeType","attributeName","dur","repeatCount","blinkProperties","_curNode","NextConnection","OutputConnection","PathObject","svgRoot","module$exports$Blockly$blockRendering$PathObject","pathString","updateShadow_","updateDisabled_","getInheritedDisabled","setClass_","updateSelected","updateMovable","_conn","PreviousConnection","Input","Align","appendField","insertFieldAt","removeField","renderList","startTrackingAll","stopTrackingAll","markDirty","CENTRE","RoundCorner","opt_position","SpacerRow","precedesStatement","followsStatement","module$exports$Blockly$blockRendering$SpacerRow","SquareCorner","TopRow","capline","hasPreviousConnection","hasHat","prevBlock","module$exports$Blockly$blockRendering$TopRow","RenderInfo","renderer_","isInline","inputRows","module$exports$Blockly$blockRendering$RenderInfo","createRows_","addElemSpacing_","addRowSpacing_","computeBounds_","alignRowElements_","finalize_","populateTopRow_","activeRow","collapseHidden","lastInput","shouldStartNewRow_","addInput_","populateBottomRow_","hasPrevious","cornerClass","hasRightSquareCorner","oldElems","getInRowSpacing_","widestStatementRowFields","blockWidth","widestRowWithConnectedBlocks","statementInput","alignStatementRow_","currentWidth","missingSpace","getDesiredRowWidth_","addAlignmentPadding_","_row","firstSpacer","getFirstSpacer","lastSpacer","getLastSpacer","desiredWidth","oldRows","makeSpacerRow_","getSpacerRowHeight_","getSpacerRowWidth_","spacer","_prev","_next","getElemCenterline_","xCursor","yCursor","recordElemPositions_","Renderer","overrides","module$exports$Blockly$blockRendering$Renderer","opt_rendererOverrides","makeConstants_","refreshDom","previousConstants","makeDrawer_","Blockly.blockRendering.Debug","MarkerSvg","localType","orphanCanConnectAtEnd","makeDebugger_","makeRenderInfo_","rendererClass","debug","IPathObject","_root","_constants","FieldDropdown","menuGenerator","svgArrow_","arrow_","imageElement_","selectedMenuItem_","validateOptions","menuGenerator_","generatedOptions_","trimOptions_","selectedOption_","getOptions","isOptionListDynamic","shouldAddBorderRect_","createSVGArrow_","createTextArrow_","ARROW_CHAR","setAttributeNS","dropdownCreate_","menuElement","primaryColour","getColour","dropdownDispose_","image","Image","src","alt","setCheckable","setChecked","handleMenuActionEvent_","onItemSelected_","hasImages","label","strings","shortest","suffixLength","prefixLength","applyTrim_","opt_useCache","isValueValid","renderSelectedImage_","renderSelectedText_","imageJson","imageHeight","imageWidth","hasBorder","IMAGE_Y_PADDING","positionSVGArrow_","arrowWidth","textWidth","textPadding","svgArrowSize","newOptions","CHECKMARK_OVERHANG","MAX_MENU_HEIGHT_VH","ANDROID","allExtensions","foundError","tuple","initFn","registerMixin","mixinObj","registerMutator","opt_helperFn","opt_blockList","errorPrefix","checkHasMutatorProperties","hasMutatorDialog","checkMutatorDialog","Blockly.Mutator","Mutator","setMutator","isRegistered","mutatorProperties","extensionFn","checkNoMutatorProperties","getMutatorProperties","mutatorPropertiesMatch","mutationName","checkHasFunctionPair","compose","decompose","func1","func2","hasXmlHooks","checkXmlHooks","hasJsonHooks","checkJsonHooks","oldProperties","newProperties","runAfterPageLoad","readyState","readyStateCheckInterval","setInterval","clearInterval","buildTooltipForDropdown","dropdownName","lookupTable","blockTypesChecked","checkDropdownOptionsInTable","warning","dropdown","optionKey","buildTooltipWithFieldText","msgTemplate","extensionParentTooltip","tooltipWhenNotConnected","colourUtils","deprecation","idGenerator","math","Metrics","parsing","string","stringUtils","svgPaths","svgMath","xmlUtils","noEvent","arrayRemove","BlockDelete","oldXml","wasShadow","oldJson","module$exports$Blockly$Events$BlockDelete","Blockly.Generator","Generator","hue_","styleName_","suppressPrefixSuffix","contextMenu","parentBlock_","childBlocks_","editable_","movable_","deletable_","collapsed_","isShadow_","outputShape_","xy_","isInMutator","isInsertionMarker_","onchangeWrapper_","helpUrl","statementInputCount","addTypedBlock","doInit_","onchange","setOnChange","removeChangeListener","removeTopBlock","removeBlockById","module$exports$Blockly$Block","opt_healStack","unplugFromRow_","unplugFromStack_","thisConnection","getOnlyValueConnection_","previousTarget","nextTarget","_all","myConnections","ignoreShadows","getSurroundParent","getFirstStatementConnection","rootBlock","childBlocks","isDuplicatable","insertionMarker","otherBlock","otherConnections","url","getTooltip","parsed","onchangeFn","addChangeListener","getVars","vars","referencesVariables","model","refreshVariableName","oldId","newId","setPreviousStatement","newBoolean","opt_check","makeConnection_","setNextStatement","setOutput","outputShape","ancestor","opt_maxLength","opt_emptyToken","shouldAddParentheses","checks","checkRoot","rootNode","emptyFieldPlaceholder","prevNavigateFields","acc","appendInput_","appendStatementInput","warningPrefix","jsonInitStyle_","jsonInitColour_","interpolate_","setOutputShape","localizedText","localizedValue","setHelpUrl","extensionNames","setStyle","styleError","opt_disableCheck","overwrites","args","lastDummyAlign","validateTokens_","interpolateArguments_","fieldStack","isInputKeyword_","inputFromJson_","fieldFromJson_","argsCount","visitedArgsHash","visitedArgsCount","token","stringToFieldJson_","dummyInput","alignmentLookup","CENTER","appendValueInput","appendDummyInput","alignment","setAlign","moveInputBefore","refName","inputIndex","refIndex","moveNumberedInputBefore","RangeError","removeInput","getInputTargetBlock","_text","_opt_id","_mutator","ContextMenuRegistry","module$exports$Blockly$ContextMenuRegistry","getContextMenuOptions","scopeType","menuOptions","precondition","menuOption","displayText","ScopeType","dbOpposite_","trackedState_","RenderedConnection","TrackedState","WILL_TRACK","module$exports$Blockly$RenderedConnection","TRACKED","removeConnection","bumpAwayFrom","staticConnection","addSelect","removeSelect","addConnection","blockTL","tighten","maxLimit","searchForClosest","renderConstants","yLen","xLen","highlightedPath_","setTracking","doTracking","UNTRACKED","isDisposed","getNeighbours","parentRendered","childRendered","Marker","drawer_","curNode_","module$exports$Blockly$Marker","setCurNode","Cursor","getCurNode","BasicCursor","module$exports$Blockly$Cursor","module$exports$Blockly$BasicCursor","getNextNode_","validNode_","getPreviousNode_","isValid","siblingOrParent","findSiblingOrParent_","getRightMostChild_","nextNode","registrationName","TabNavigateCursor","isTabNavigable","Selected","opt_oldElementId","opt_newElementId","oldElementId","newElementId","module$exports$Blockly$Events$Selected","BlockSvg","saveConnections","customContextMenu","commentIcon_","warningTextDb_","getBlockStyle","makePathObject","eventsInit_","renderIsInProgress_","useDragSurface_","createIcon","getCanvas","module$exports$Blockly$BlockSvg","oldParent","oldXY","dragSurfaceGroup","surfaceTranslation","eventsEnabled","clearTransformAttributes_","curXY","snapToGrid","getGrid","shouldSnap","getSpacing","updateCollapsed_","collapsedInputName","collapsedFieldName","tabCursor","currentNode","open","generateContextMenu","updateInsertionMarker","blockWorkspace","cancelCurrentGesture","checkAndDelete","Comment","shouldHaveComment","updateText","setWarningText","Blockly.Warning","Warning","thisBlock","changedState","collapsedParent","COLLAPSED_WARNING_ID","setText","oldText","newText","setBlock","updateHighlighted","updateDraggingDelete","styleObj","removed","track","all","renderedConn","neighbours","renderedOther","sourceConnection","opt_bubble","updateConnectionLocations_","moveToOffset","nextHeightWidth","tabHeight","updateReplacementFade","updateShapeForInputHighlight","INLINE","ConnectionDB","connections_","connectionChecker_","module$exports$Blockly$ConnectionDB","calculateIndexForYPos_","findIndexOfConnection_","bestGuess","pointer","pointerMin","pointerMax","pointerMid","maxRadius","checkConnection_","yIndex","currentX","db","currentY","isInYRange_","baseY","baseX","closestIndex","bestConnection","bestRadius","dbList","ThemeManager","theme_","subscribedWorkspaces_","componentDB_","module$exports$Blockly$ThemeManager","prevTheme","injectionDiv","refreshTheme","propertyName","unsubscribeWorkspace","componentNames","owner_","TouchGesture","isMultiTouch_","cachedPoints_","startDistance_","previousScale_","isPinchZoomEnabled_","onStartWrapper_","handleTouchStart","module$exports$Blockly$TouchGesture","isMultiTouch","handleTouchMove","handleTouchEnd","getTouchPoint","pointers","handlePinch_","gestureScale","WorkspaceAudio","parentWorkspace_","SOUNDS_","lastSound_","module$exports$Blockly$WorkspaceAudio","filenames","sound","filename","ext","audioTest","canPlayType","preload","volume","playPromise","then","pause","catch","IPAD","IPHONE","opt_volume","now","mySound","ThemeChange","opt_themeName","themeName","module$exports$Blockly$Events$ThemeChange","ViewportChange","opt_top","opt_left","opt_scale","opt_oldScale","MetricsManager","module$exports$Blockly$MetricsManager","getHeight","opt_own","flyoutDimensions","getDimensionsPx_","getFlyout","getToolboxMetrics","toolboxDimensions","getAbsoluteMetrics","toolboxMetrics","flyoutMetrics","getFlyoutMetrics","doesToolboxExist","doesFlyoutExist","atLeft","toolboxUtils","atTop","opt_getWorkspaceCoordinates","svgMetrics","getSvgMetrics","getContentMetrics","blockBox","getComputedFixedEdges_","opt_viewMetrics","hScrollEnabled","vScrollEnabled","edges","getPaddedContent_","contentMetrics","contentBottom","contentRight","halfWidth","opt_contentMetrics","fixedEdges","paddedContent","getUiMetrics","absoluteMetrics","contentHeight","contentTop","contentLeft","svgHeight","svgWidth","toolboxWidth","toolboxHeight","flyoutWidth","flyoutHeight","WorkspaceSvg","opt_blockDragSurface","opt_wsDragSurface","resizeHandlerWrapper_","resizesEnabled_","startScrollY","startScrollX","dragDeltaXY_","oldScale_","oldLeft_","oldTop_","workspaceDragSurface_","blockDragSurface_","toolbox_","trashcan","isDragSurfaceActive_","useWorkspaceDragSurface_","inverseScreenCTM_","lastRecordedPageScroll_","injectionDiv_","inverseScreenCTMDirty_","metricsManager_","MetricsManagerClass","setTopLevelWorkspaceMetrics_","componentManager_","highlightedBlocks_","audioManager_","grid_","markerManager_","toolboxCategoryCallbacks_","flyoutButtonCallbacks_","Variables","registerToolboxCategoryCallback","VariablesDynamic","Blockly.VariablesDynamic","Procedures","mutatorOpenListener","themeManager_","subscribeWorkspace","cachedParentSvg_","topBoundedElements_","dragTargetAreas_","cachedParentSvgSize_","module$exports$Blockly$WorkspaceSvg","updateBlockStyles_","getStyleName","refreshToolboxSelection","updateBlockStyle","ctm","updateInverseScreenCTM","svgBlockCanvas_","setResizeHandlerWrapper","opt_backgroundClass","svgBubbleCanvas_","onMouseWheel_","ToolboxClass","recordDragTargets","CursorClass","zoomControls_","parentSvg","Blockly.Trashcan","Trashcan","svgTrashcan","addZoomControls","Blockly.ZoomControls","ZoomControls","svgZoomControls","addFlyout","workspaceOptions","HorizontalFlyout","VerticalFlyout","positionable","positionables","savedPositions","updateScreenCalculations_","currScroll","translation","trans","previousElement","coord","imList","highlightBlock","opt_state","pasteBlock_","pasteWorkspaceComment_","jsonBlock","allBlocks","otherXY","collide","xmlComment","commentX","commentY","fireCreateEvent","refreshSelection","recordDeleteAreas","utils","dragTargets","targetArea","rect","getClientRect","clientRect","contains","canScrollHorizontally","canWheelZoom","canWheelMove","scrollDelta","commandKey","PIXELS_PER_ZOOM_STEP","topElements","boundary","topElement","blockBoundary","cleanUp","configureContextMenu","updateToolbox","parsedToolboxDef","setBrowserFocus","activeElement","setActive","amount","scaleChange","newScale","getCTM","center","setScale","zoomToFit","workspaceWidth","workspaceHeight","blocksBox","blocksWidth","blocksHeight","ratioX","ratioY","scrollCenter","beginCanvasTransition","endCanvasTransition","centerOnBlock","pixelX","pixelY","reflow","resizeView","getScale","maxYScroll","addTopBoundedElement","removeTopBoundedElement","removeTopComment","reenabled","getButtonCallback","getToolboxCategoryCallback","hasStarted","opt_onlyClosePopups","onlyClosePopups","autoHideable","autoHide","resizeSvgContents","querySelector","subContainer","blockDragSurface","workspaceDragSurface","createMainWorkspace","tabindex","wsOptions","addTrashcan","dropDownDiv","workspaceResizeHandler","bindDocumentEvents","scrollToStart","loadSounds","onKeyDown","documentEventsBound","audioMgr","soundBinds","unbindSounds","DragTarget","module$exports$Blockly$DragTarget","_dragElement","DeleteArea","wouldDelete_","module$exports$Blockly$DeleteArea","couldConnect","couldDeleteBlock","updateWouldDelete_","FlyoutMetricsManager","module$exports$Blockly$FlyoutMetricsManager","blockBoundingBox","getBoundingBox_","margin","MARGIN","Flyout","setMetrics_","setMetricsManager","toolboxPosition_","eventWrappers_","filterWrapper_","reflowWrapper_","mats_","buttons_","permanentlyDisabled_","tabWidth_","recycledBlocks_","rectMap_","GAP_X","GAP_Y","SCROLLBAR_MARGIN","dragAngleRange_","wheel_","filterForCapacity_","createPotentialVariableMap","removeComponent","module$exports$Blockly$Flyout","positionAt_","listen","clearOldBlocks_","getDynamicCategoryContents_","parsedContent","flyoutInfo","createFlyoutInfo_","layout_","gaps","deselectAll","emptyRecycledBlocks_","contentInfo","defaultGap","categoryName","parsedDynamicContent","createFlyoutBlock_","blockInfo","addBlockGap_","addSeparatorGap_","createButton_","fnToApply","btnInfo","isLabel","Blockly.FlyoutButton","FlyoutButton","curButton","getRecycledBlock_","blockType","gap","sepInfo","newGap","oldBlocks","blockIsRecyclable_","recycleBlock_","addBlockListeners_","blockMouseDown_","originalBlock","placeNewBlock_","initFlyoutButton_","buttonSvg","createRect_","blockHW","moveRectToBlock_","reflowInternal_","oldBlock","positionNewBlock_","flyoutOffsetPixels","oldBlockPos","oldBlockOffsetPixels","getX","module$exports$Blockly$VerticalFlyout","targetWorkspaceViewMetrics","setBackgroundPath_","getY","atRight","cursorX","moveX","dragDirection","atan2","range","flyoutRect","BIG_NUM","getFlyoutScale","oldX","newX","registryName","ToolboxItem","toolboxItemDef","level_","getLevel","toolboxItemDef_","parentToolbox_","module$exports$Blockly$ToolboxItem","getClickTarget","isCollapsible","ToolboxCategory","categoryDef","labelDom_","iconDom_","rowContents_","rowDiv_","htmlDiv_","cssConfig_","makeDefaultCssConfig_","isDisabled_","isHidden_","flyoutItems_","parseCategoryDef_","parseContents_","rowcontentcontainer","openicon","closedicon","module$exports$Blockly$ToolboxCategory","getColour_","createContainer_","createRowContainer_","pointerEvents","createRowContentsContainer_","createIconDom_","createLabelDom_","addColourBorder_","rowDiv","nestedPadding","paddingRight","paddingLeft","contentsContainer","toolboxIcon","isHorizontal","toolboxLabel","border","borderWidth","borderRight","borderLeft","styleName","getColourfromStyle_","parseColour_","colourValue","openIcon_","iconDiv","setVisible_","getSelectedItem","clearSelection","allAncestorsExpanded_","category","isExpanded","onClick","isSelected","defaultBackgroundColour","isDisabled","updateFlyoutContents","ToolboxSeparator","separatorDef","module$exports$Blockly$ToolboxSeparator","CollapsibleToolboxCategory","subcategoriesDiv_","expanded_","toolboxItems_","cssConfig","prevIsFlyoutItem","itemDef","createToolboxItem_","toolboxItem","ToolboxItemClass","setExpanded","subCategories","getChildToolboxItems","createSubCategoriesDom_","subcategories","newCategory","newCategoryDiv","closeIcon_","handleToolboxItemResize","childToolboxItems","module$exports$Blockly$CollapsibleToolboxCategory","toggleExpanded","ToolboxItemSelect","opt_oldItem","opt_newItem","oldItem","newItem","module$exports$Blockly$Events$ToolboxItemSelect","Toolbox","toolboxDef_","horizontalLayout_","contentsDiv_","HtmlDiv","contents_","contentMap_","previouslySelectedItem_","selectedItem_","boundEvents_","module$exports$Blockly$Toolbox","createFlyout_","themeManager","createContentsContainer_","attachEvents_","toolboxContainer","flexDirection","clickEvent","onClick_","keyDownEvent","onKeyDown_","itemId","getToolboxItemById","isSelectable","setSelectedItem","selectNext_","selectPrevious_","selectParent_","selectChild_","renderContents_","fragment","createDocumentFragment","addToolboxItem_","toolboxItemDom","toolboxRect","_couldConnect","updateCursorDeleteStyle_","workspaceMetrics","toolboxDiv","getContents","shouldDeselectItem_","deselectItem_","shouldSelectItem_","selectItem_","updateFlyout_","fireSelectEvent_","oldElement","collapsibleItem","nextItemIdx","nextItem","prevItemIdx","prevItem","module$exports$Blockly$HorizontalFlyout","setX","tab","buttons","FUNCTION_NAME_PLACEHOLDER_","FUNCTION_NAME_PLACEHOLDER_REGEXP_","STATEMENT_SUFFIX","STATEMENT_PREFIX","INFINITE_LOOP_TRAP","INDENT","COMMENT_WRAP","ORDER_OVERRIDES","isInitialized","RESERVED_WORDS_","nameDB_","functionNames_","definitions_","workspaceToCode","blockToCode","scrubNakedValue","injectId","finish","allNestedComments","opt_thisOnly","scrub_","SyntaxError","valueToCode","outerOrder","innerOrder","parensNeeded","outerOrderClass","innerOrderClass","prefixLines","addLoopTrap","branch","provideFunction_","desiredName","oldCodeText","functionName","codeText","_workspace","_opt_thisOnly","variableDB_","nameDb","FieldVariable","opt_variableTypes","opt_defaultType","dropdownCreate","defaultVariableName","defaultType_","variableTypes","variable_","setTypes_","module$exports$Blockly$FieldVariable","variableType","typeIsAllowed_","typeList","getVariableTypes_","defaultType","isInArray","FieldTextInput","spellcheck_","htmlInput_","isTextValid_","isBeingEdited_","onKeyInputWrapper_","onKeyDownWrapper_","fullBlockClickTarget_","nFields","nConnections","untypedDefaultValue_","resizeEditor_","htmlInput","_opt_e","opt_quietInput","quietInput","MOBILE","showPromptEditor_","showInlineEditor_","getValueFromEditorText_","widgetDispose_","widgetCreate_","borderRadius","BORDERRADIUS","strokeColour","boxShadow","getEditorText_","oldValue_","bindInputEvents_","onFinishEditing_","unbindInputEvents_","_value","onHtmlInputKeyDown_","onHtmlInputChange_","setEditorValue_","FieldNumber","opt_min","opt_max","opt_precision","min_","max_","precision_","decimalPlaces_","setConstraints","setMinInternal_","setMaxInternal_","setPrecisionInternal_","module$exports$Blockly$FieldNumber","precision","setMin","precisionString","toLocaleString","maximumFractionDigits","decimalIndex","isFinite","FieldMultilineInput","textGroup_","maxLines_","isOverflowedY_","maxLines","setMaxLines","module$exports$Blockly$FieldMultilineInput","textLines","displayLinesNumber","currentChild","lineHeight","nodes","actualEditorLines","dummyTextElement","lineWidth","paddingY","padding","paddingX","fieldRegistry","FieldLabelSerializable","FieldColour","onMouseLeaveWrapper_","onMouseEnterWrapper_","onClickWrapper_","highlightedIndex_","picker_","titles_","colours_","columns_","module$exports$Blockly$FieldColour","setColours","colours","opt_titles","columns","cell","moveHighlightBy_","getHighlighted_","COLOURS","COLUMNS","setHighlightedCell_","onMouseLeave_","titles","TITLES","selectedColour","table","title","onMouseMove_","onMouseEnter_","FieldCheckbox","checkChar_","CHECK_CHAR","getValueBoolean","character","convertValueToBool_","FieldAngle","clockwise_","CLOCKWISE","offset_","OFFSET","wrap_","WRAP","round_","ROUND","moveSurfaceWrapper_","clickSurfaceWrapper_","clickWrapper_","symbol_","line_","gauge_","editor_","clockwise","module$exports$Blockly$FieldAngle","updateGraph_","HALF","circle","RADIUS","hide_","ownerSVGElement","displayMouseOrKeyboardValue_","wrapValue_","clockwiseFlag","angle1","largeFlag","multiplier","BaseBottomRow","module$exports$Blockly$zelos$BottomRow","GRID_UNIT","STATEMENT_INPUT_SPACER_MIN_WIDTH","CURSOR_RADIUS","HEXAGONAL","SQUARE","SHAPE_IN_SHAPE_PADDING","MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH","SELECTED_GLOW_COLOUR","SELECTED_GLOW_SIZE","REPLACEMENT_GLOW_COLOUR","REPLACEMENT_GLOW_SIZE","selectedGlowFilterId","selectedGlowFilter_","replacementGlowFilterId","SQUARED","ROUNDED","replacementGlowFilter_","BaseConstantProvider","makeHexagonal","makeRounded","makeSquared","rightWidth","selectedGlowSize","replacementGlowSize","module$exports$Blockly$zelos$ConstantProvider","isDynamic","pathRightDown","pathRightUp","blockHeight","remainingHeight","maxHeight","_height","getOutputShape","curveWidth","quarterHeight","innerTopRightCorner","pathTopRight","pathBottomRight","selectedGlowFilter","selectedComponentTransfer","replacementGlowFilter","replacementComponentTransfer","BaseDrawer","beginDrawing","outputShapeType","endDrawing","module$exports$Blockly$zelos$Drawer","hasStatementInput","drawFlatTop_","drawRightDynamicConnection_","drawFlatBottom_","drawLeftDynamicConnection_","cornerHeight","setOutlinePath","innerBottomLeftCorner","connectedBottomNextConnection","markerCircle_","BaseMarkerSvg","showWithInputOutput_","offsetInBlock","positionCircle_","module$exports$Blockly$zelos$MarkerSvg","svgPathSelected_","outlines_","remainingOutlines_","BasePathObject","getOutlinePath_","module$exports$Blockly$zelos$PathObject","removeOutlinePath_","outline","FieldImage","opt_alt","opt_onClick","opt_flipRtl","Y_PADDING","imageHeight_","altText_","setOnClickHandler","RightConnectionShape","module$exports$Blockly$blockRendering$StatementInput","BaseStatementInput","BaseTopRow","module$exports$Blockly$zelos$TopRow","isMultiRow","rightAlignedDummyInputs_","BaseRenderInfo","module$exports$Blockly$zelos$RenderInfo","adjustXPosition_","alignmentDivider","notchTotalWidth","minXPos","prevSpacer","nextSpacer","hasPrevNotch","hasNextNotch","prevInRowSpacer","finalizeOutputConnection_","rightConnectionWidth","finalizeHorizontalAlignment_","totalNegativeSpacing","lastElem","leftNegPadding","getNegativeSpacing_","rightNegPadding","minBlockWidth","outerShape","innerShape","finalizeVerticalAlignment_","firstRow","hasSingleTextOrImageField","hasNonShadowConnectedBlocks","minVerticalTightNestingHeight","BaseRenderer","module$exports$Blockly$zelos$Renderer","module$exports$Blockly$thrasos$RenderInfo","hasExternalInputs","heightWithoutHat","diff","module$exports$Blockly$thrasos$Renderer","serializerMap","deserializers","deserializer","VariableSerializer","module$contents$Blockly$serialization$variables_VariableSerializer","variableStates","varState","module$exports$Blockly$minimalist$RenderInfo","module$exports$Blockly$minimalist$Renderer","DARK_PATH_OFFSET","svgPathDark","svgPathLight","colourDark","module$exports$Blockly$geras$PathObject","mainPath","highlightPath","MAX_BOTTOM_WIDTH","module$exports$Blockly$blockRendering$InlineInput","BaseInlineInput","Highlighter","inlineSteps_","steps_","RTL_","highlightConstants_","getHighlightConstants","highlightOffset_","outsideCornerPaths_","OUTSIDE_CORNER","insideCornerPaths_","INSIDE_CORNER","puzzleTabPaths_","notchPaths_","startPaths_","jaggedTeethPaths_","module$exports$Blockly$geras$Highlighter","drawTopCorner","drawValueInput","belowTabHeight","drawStatementInput","drawRightSideRow","rightEdge","drawBottomRow","cornerElem","drawLeft","drawInlineInput","connectionRight","bottomHighlightWidth","aboveTabHeight","highlighter_","setHighlightPath","getPath","module$exports$Blockly$geras$Drawer","HighlightConstantProvider","constantProvider","makeInsideCorner","makeOutsideCorner","distance45outside","SQRT1_2","pathTopRtl","pathBottomRtl","pathBottomLtr","distance45inside","topLeftCornerHighlightRtl","topLeftCornerHighlightLtr","bottomLeftStartY","bottomLeftPath","highlightRtlUp","highlightRtlDown","verticalOverlap","highlightLtrUp","highlightLtrDown","module$exports$Blockly$geras$HighlightConstantProvider","hatHeight","pathRtl","pathLtr","module$exports$Blockly$geras$RenderInfo","nextRightEdge","rowNextRightEdges","prevInput","prevRightEdge","makeHighlightConstants_","module$exports$Blockly$geras$Renderer","blockRendering","Zelos","ESCAPE","COPY","CUT","PASTE","UNDO","REDO","registerEscape","escapeAction","registerDelete","deleteShortcut","registerCopy","copyShortcut","ctrlC","altC","metaC","registerCut","cutShortcut","ctrlX","altX","metaX","registerPaste","pasteShortcut","ctrlV","altV","metaV","registerUndo","undoShortcut","ctrlZ","altZ","metaZ","registerRedo","redoShortcut","ctrlShiftZ","altShiftZ","metaShiftZ","ctrlY","registerDefaultShortcuts","FinishedLoading","opt_workspace","module$exports$Blockly$Events$FinishedLoading","Ui","module$exports$Blockly$Events$Ui","BubbleOpen","opt_isOpen","opt_bubbleType","isOpen","bubbleType","module$exports$Blockly$Events$BubbleOpen","CommentChange","opt_oldContents","opt_newContents","oldContents_","newContents_","module$exports$Blockly$Events$CommentChange","setContent","CommentCreate","module$exports$Blockly$Events$CommentCreate","CommentDelete","module$exports$Blockly$Events$CommentDelete","TrashcanOpen","module$exports$Blockly$Events$TrashcanOpen","BumpEvent","record","undoOption","getUndoStack","redoOption","registerCleanup","cleanOption","toggleOption_","shouldCollapse","ms","timeoutCounter","timeoutFn","DELAY","registerCollapse","collapseOption","registerExpand","expandOption","addDeletableBlocks_","deleteList","getDeletableBlocks_","deleteNext_","registerDeleteAll","deletableBlocksLength","deletableBlocks","registerDuplicate","registerComment","commentOption","registerInline","inlineOption","registerCollapseExpandBlock","collapseExpandOption","registerDisable","disableOption","descendantCount","registerHelp","helpOption","showHelp","registerDefaultOptions","SIZE","iconXY_","bubble_","drawIcon_","iconClick_","module$exports$Blockly$Icon","_group","_visible","quarkNames","quarkNames_","workspaceHeight_","workspaceWidth_","sourceListener_","rootBlock_","svgDialog_","createEditor_","quarkName","quarkXml","media","hasFlyout","flyoutSvg","background","resizeBubble_","workspaceSize","flyoutScrollMetrics","registerMoveEvent","onBubbleMove_","thisRootBlock","this.sourceListener_","workspaceChanged_","updateWorkspace_","oldExtraState","savedRendered","newExtraState","mutationGroup","workspaceBlocks","flyoutBlocks","reconnect","connectionChild","connectionParent","currentParent","findParentWs","outerWs","text_","paragraphElement_","module$exports$Blockly$Warning","createBubble_","disposeBubble_","allWarnings","model_","cachedText_","textarea_","foreignObject_","onInputWrapper_","onChangeWrapper_","onWheelWrapper_","textarea","resizeTextarea_","startEdit_","module$exports$Blockly$Comment","widthMinusBorder","heightMinusBorder","createNonEditableBubble_","createEditableBubble_","onBubbleResize_","Css","verticalPosition","horizontalPosition","bumpDirection","getStartPositionRect","horizontalPadding","verticalPadding","hasVerticalScrollbar","getCornerOppositeToolbox","bumpPositionRect","startRect","bumpDir","otherEl","intersects","zoomResetGroup_","zoomOutGroup_","zoomInGroup_","onZoomOutWrapper_","onZoomInWrapper_","onZoomResetWrapper_","HEIGHT_","WIDTH_","SMALL_SPACING_","LARGE_SPACING_","MARGIN_HORIZONTAL_","MARGIN_VERTICAL_","top_","left_","initialized_","createZoomOutSvg_","createZoomInSvg_","createZoomResetSvg_","cornerPosition","positionRect","uiPosition","zoomInTranslateY","clip","zoomoutSvg","SPRITE","zoom_","zoominSvg","module$exports$Blockly$ZoomControls","zoomCenter","fireZoomEvent_","zoomresetSvg","resetZoom_","uiEvent","disposed_","module$exports$Blockly$WorkspaceComment","setHeight","getContent","parseAttributes","xmlH","xmlW","deleteIconBorder_","deleteGroup_","svgHandleTarget_","svgRectTarget_","focused_","svgRect_","disposeInternal_","opt_noSelect","pathMouseDown_","module$exports$Blockly$WorkspaceCommentSvg","blurFocus","addFocus","commentBounds","addResizeDom_","addDeleteDom_","setSize_","deleteMouseDown_","deleteMouseOut_","deleteMouseUp_","TOP_OFFSET","RESIZE_SIZE","resizeMouseUp_","resizeComment_","topOffset","removeFocus","opt_wsWidth","wsWidth","isLidOpen","minOpenness_","svgLid_","lidOpen_","lidTask_","flyoutWorkspaceOptions","onDelete_","WIDTH","BODY_HEIGHT","LID_HEIGHT","SPRITE_LEFT","SPRITE_TOP","browserEvents","blockMouseDownWhenOpenable_","click","mouseOver_","mouseOut_","animateLid_","setLidOpen","module$exports$Blockly$Trashcan","hasContents_","contentsIsOpen","fireUiEvent_","closeFlyout","setMinOpenness_","MARGIN_HORIZONTAL","MARGIN_VERTICAL","trashRect","MARGIN_HOTSPOT","frames","ANIMATION_FRAMES","setLidAngle_","MAX_LID_ANGLE","OPACITY_MIN","OPACITY_MAX","ANIMATION_LENGTH","lidAngle","openAtRight","newMin","openFlyout","trashcanOpen","cleanedJson","cleanBlockJson_","HAS_BLOCKS_LID_ANGLE","cleanRec","targetWorkspace_","isLabel_","callbackKey_","cssClass_","svgText_","svgText","TEXT_MARGIN_X","TEXT_MARGIN_Y","updateTransform_","onMouseUp_","module$exports$Blockly$FlyoutButton","procTupleComparator","onCreateVariableButtonClick_String","stringButtonClickHandler","onCreateVariableButtonClick_Number","numberButtonClickHandler","onCreateVariableButtonClick_Colour","colourButtonClickHandler","firstVariable","DEFAULT_ARG","proceduresNoReturn","getProcedureDef","proceduresReturn","ta","tb","findLegalName","isLegalName","opt_exclude","isNameUsed","procedureBlock","procName","rename","legalName","renameProcedure","populateProcedures","procedureList","templateName","arg","nameField","updateMutatorFlyout","argBlock","argValue","fieldContent","mutatorChangeListener","getCallers","callers","getProcedureCall","mutateCallers","defBlock","caller","oldRecordUndo","oldMutation","newMutationDom","newMutation","getDefinition","VERSION","ALIGN_LEFT","ALIGN_CENTRE","ALIGN_RIGHT","DUMMY_INPUT","TOOLBOX_AT_TOP","TOOLBOX_AT_BOTTOM","TOOLBOX_AT_LEFT","TOOLBOX_AT_RIGHT","newAlert","dialog","newConfirm","newPrompt","HSV_SATURATION","HSV_VALUE","resizeSvgContentsLocal","bindEvent_","unbindEvent_","bindEventWithChecks_","VARIABLE_CATEGORY_NAME","VARIABLE_DYNAMIC_CATEGORY_NAME","PROCEDURE_CATEGORY_NAME","BlocklyOptions","ContextMenu","ContextMenuItems","DropDownDiv","Events","Extensions","IASTNodeLocation","IASTNodeLocationSvg","IASTNodeLocationWithBlock","IAutoHideable","IBlockDragger","IBoundedElement","IBubble","ICollapsibleToolboxItem","IComponent","IConnectionChecker","IContextMenu","ICopyable","IDeletable","IDeleteArea","IDragTarget","IDraggable","IFlyout","IKeyboardAccessible","IMetricsManager","IMovable","IPositionable","IRegistrable","IRegistrableField","ISelectable","ISelectableToolboxItem","IStyleable","IToolbox","IToolboxItem","ShortcutItems","Themes","Tooltip","WidgetDiv","Xml","blockAnimations","bumpObjects","clipboard","connectionTypes","geras","minimalist","serialization","serializationBlocks","exceptions","serializationExceptions","serializationPriorities","serializationWorkspaces","thrasos","zelos","BlocklyBlocks","message0","args0","extensions","previousStatement","nextStatement","CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN","renameOption","renameOptionCallbackFactory","deleteOptionCallbackFactory","oppositeType","contextMenuMsg","xmlField","enableContextMenu","updateAt_","isAt1","isAt2","isAt","newAt","setFieldValue","OPERATORS","TEXT_PROMPT_COMMON","updateType_","newOp","TYPES","QUOTE_IMAGE_MIXIN","newQuote_","QUOTE_IMAGE_LEFT_DATAURI","QUOTE_IMAGE_RIGHT_DATAURI","QUOTE_IMAGE_WIDTH","QUOTE_IMAGE_HEIGHT","quoteField_","isLeft","TEXT_QUOTES_EXTENSION","TEXT_JOIN_MUTATOR_MIXIN","itemCount_","updateShape_","itemCount","containerBlock","itemBlock","valueConnection_","TEXT_JOIN_EXTENSION","TEXT_INDEXOF_TOOLTIP_EXTENSION","TEXT_CHARAT_MUTATOR_MIXIN","isAt_","TEXT_CHARAT_EXTENSION","where","PROCEDURE_DEF_COMMON","setStatements_","hasStatements","hasStatements_","updateParams_","paramString","arguments_","opt_paramIds","argumentVarModels_","parameter","argModel","paramIds_","childNode","param","containerBlockNode","statementNode","argBlockNode","fieldNode","argumentName","paramBlock","statementConnection_","stackConnection","stackBlock","oldVariable","change","displayRenamedVar_","xmlMutation","xmlArg","callType_","argOption","argVar","argXmlField","argXmlBlock","initName","setSpellcheck","oldShowEditorFn_","newShowEditorFn","createdVariables_","deleteIntermediateVars_","otherVar","PROCEDURE_CALL_COMMON","setProcedureParameters_","paramNames","paramIds","mutatorOpen","quarkConnections_","quarkIds_","quarkId","argField","newField","def","defType_","callName","previousEnabledState_","option.callback","hasReturnValue_","legal","FUNCTION_TYPES","TOOLTIPS_BY_OP","ADD","MINUS","MULTIPLY","DIVIDE","POWER","ROOT","ABS","NEG","LN","LOG10","EXP","POW10","SIN","COS","TAN","ASIN","ACOS","ATAN","SUM","MIN","MAX","AVERAGE","MEDIAN","MODE","STD_DEV","RANDOM","IS_DIVISIBLEBY_MUTATOR_MIXIN","divisorInput","inputExists","IS_DIVISIBLE_MUTATOR_EXTENSION","LIST_MODES_MUTATOR_MIXIN","LIST_MODES_MUTATOR_EXTENSION","message1","args1","WHILE_UNTIL_TOOLTIPS","WHILE","UNTIL","BREAK_CONTINUE_TOOLTIPS","BREAK","CONTINUE","CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN","loopTypes","Set","CONTROL_FLOW_IN_LOOP_CHECK_MIXIN","getSurroundLoop","message2","args2","EQ","NEQ","LT","LTE","GT","GTE","AND","OR","CONTROLS_IF_MUTATOR_MIXIN","elseifCount_","elseCount_","rebuildShape_","elseifBlock","elseBlock","clauseBlock","valueConnections","statementConnections","elseStatementConnection","reconnectChildBlocks_","inputIf","inputDo","CONTROLS_IF_TOOLTIP_EXTENSION","LOGIC_COMPARE_ONCHANGE_MIXIN","prevBlocks_","blockA","blockB","prevA","prevB","LOGIC_COMPARE_EXTENSION","LOGIC_TERNARY_ONCHANGE_MIXIN","prevParentConnection_","WHERE_OPTIONS","modeMenu","isStatement","updateStatement_","mode","newStatement","newMode","inputConnection","inputBlock","lists","logic","loops","texts","variablesDynamic","En","BlocklyJS","setLocale","locale","BlocklyJavaScript","JavaScript","addReservedWords","getOwnPropertyNames","ORDER_ATOMIC","ORDER_NEW","ORDER_MEMBER","ORDER_FUNCTION_CALL","ORDER_INCREMENT","ORDER_DECREMENT","ORDER_BITWISE_NOT","ORDER_UNARY_PLUS","ORDER_UNARY_NEGATION","ORDER_LOGICAL_NOT","ORDER_TYPEOF","ORDER_VOID","ORDER_DELETE","ORDER_AWAIT","ORDER_EXPONENTIATION","ORDER_MULTIPLICATION","ORDER_DIVISION","ORDER_MODULUS","ORDER_SUBTRACTION","ORDER_ADDITION","ORDER_BITWISE_SHIFT","ORDER_RELATIONAL","ORDER_IN","ORDER_INSTANCEOF","ORDER_EQUALITY","ORDER_BITWISE_AND","ORDER_BITWISE_XOR","ORDER_BITWISE_OR","ORDER_LOGICAL_AND","ORDER_LOGICAL_OR","ORDER_CONDITIONAL","ORDER_ASSIGNMENT","ORDER_YIELD","ORDER_COMMA","ORDER_NONE","JavaScript.init","getPrototypeOf","defvars","devVarList","JavaScript.finish","definitions","JavaScript.scrubNakedValue","quote_","JavaScript.quote_","multiline_quote_","JavaScript.multiline_quote_","JavaScript.scrub_","commentCode","nextCode","getAdjusted","JavaScript.getAdjusted","atId","opt_delta","opt_negate","opt_order","order","defaultAtIndex","at","argument0","strRegExp","forceString","getSubstringIndex","stringName","opt_at","element0","element1","where1","where2","requiresLengthCall","at1","at2","wherePascalCase","FIRST","LAST","FROM_START","FROM_END","UPPERCASE","LOWERCASE","TITLECASE","BOTH","sub","from","to","funcName","xfix1","loopTrap","statementToCode","returnValue","xfix2","argument1","CONSTANTS","GOLDEN_RATIO","SQRT2","INFINITY","PROPERTIES","EVEN","ODD","WHOLE","POSITIVE","NEGATIVE","DIVISIBLE_BY","PRIME","dropdownProperty","inputOrder","outputOrder","numberToCheck","divisor","argument2","loopVar","endVar","repeats","until","variable0","increment","step","startVar","incVar","listVar","indexVar","xfix","loop","conditionCode","branchCode","defaultArgument","value_else","cacheList","xVar","listName","delimiter","c1","canUseDOM","ExecutionEnvironment","canUseWorkers","Worker","canUseEventListeners","attachEvent","canUseViewport","screen","getOwnPropertySymbols","propIsEnumerable","propertyIsEnumerable","toObject","test1","test2","test3","err","shouldUseNative","symbols","ReactPropTypesSecret","emptyFunction","emptyFunctionWithReset","resetWarningCache","shim","props","propName","propFullName","secret","getShim","isRequired","ReactPropTypes","bigint","bool","symbol","any","arrayOf","elementType","instanceOf","objectOf","oneOf","oneOfType","exact","checkPropTypes","PropTypes","aa","encodeURIComponent","ba","ca","da","ea","fa","ha","ia","ja","ka","acceptsBooleans","attributeNamespace","mustUseProperty","sanitizeURL","removeEmptyString","oa","pa","qa","ma","na","la","xlinkHref","ra","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","sa","ua","wa","xa","ya","za","Aa","Ba","Ca","Da","Ea","Fa","Ga","Ha","Ia","Ja","for","Ma","Ka","iterator","La","Na","stack","Oa","Pa","prepareStackTrace","displayName","Qa","tag","_render","Ra","$$typeof","_context","_payload","_init","Sa","Ta","Va","_valueTracker","getOwnPropertyDescriptor","enumerable","stopTracking","Ua","Wa","Xa","Ya","defaultChecked","_wrapperState","initialChecked","Za","initialValue","controlled","$a","ab","bb","cb","ownerDocument","eb","Children","fb","defaultSelected","gb","dangerouslySetInnerHTML","hb","ib","jb","kb","lb","mb","nb","ob","namespaceURI","innerHTML","valueOf","MSApp","execUnsafeLocalFunction","pb","qb","animationIterationCount","borderImageOutset","borderImageSlice","borderImageWidth","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","flex","flexGrow","flexPositive","flexShrink","flexNegative","flexOrder","gridArea","gridRow","gridRowEnd","gridRowSpan","gridRowStart","gridColumn","gridColumnEnd","gridColumnSpan","gridColumnStart","lineClamp","orphans","tabSize","widows","zIndex","fillOpacity","floodOpacity","stopOpacity","strokeDasharray","strokeDashoffset","strokeMiterlimit","strokeOpacity","strokeWidth","rb","sb","setProperty","ub","menuitem","area","br","col","embed","hr","img","keygen","link","meta","wbr","vb","wb","is","xb","srcElement","correspondingUseElement","yb","zb","Ab","Bb","Cb","stateNode","Db","Eb","Fb","Gb","Hb","Ib","Jb","Kb","Lb","Mb","Ob","Pb","Qb","Rb","onError","Sb","Tb","Ub","Vb","Wb","Xb","Zb","alternate","return","$b","memoizedState","dehydrated","ac","cc","sibling","bc","dc","ec","gc","hc","ic","jc","kc","mc","nc","oc","pc","qc","rc","blockedOn","domEventName","eventSystemFlags","nativeEvent","targetContainers","sc","tc","vc","wc","lanePriority","unstable_runWithPriority","hydrate","containerInfo","xc","yc","zc","Ac","Bc","unstable_scheduleCallback","unstable_NormalPriority","Cc","Dc","Ec","animationend","animationiteration","animationstart","transitionend","Fc","Gc","Hc","animation","Ic","Jc","Kc","Lc","Mc","Nc","Oc","Pc","Qc","unstable_now","Rc","Uc","pendingLanes","expiredLanes","suspendedLanes","pingedLanes","Vc","entangledLanes","entanglements","Wc","Xc","Yc","Zc","$c","eventTimes","clz32","bd","cd","LN2","dd","unstable_UserBlockingPriority","ed","fd","gd","hd","uc","jd","kd","ld","md","nd","od","charCode","pd","qd","rd","_reactName","_targetInst","isDefaultPrevented","defaultPrevented","isPropagationStopped","cancelBubble","persist","isPersistent","wd","xd","yd","sd","eventPhase","bubbles","cancelable","timeStamp","isTrusted","td","ud","view","detail","vd","Ad","zd","relatedTarget","fromElement","toElement","movementX","movementY","Bd","Dd","dataTransfer","Fd","Hd","animationName","elapsedTime","pseudoElement","Id","clipboardData","Jd","Ld","Md","Esc","Spacebar","Left","Up","Right","Down","Del","Win","Apps","Scroll","MozPrintableKey","Nd","Od","Pd","Qd","repeat","which","Rd","Td","pressure","tangentialPressure","tiltX","tiltY","twist","isPrimary","Vd","touches","targetTouches","Xd","Yd","wheelDeltaX","wheelDeltaY","wheelDelta","deltaZ","Zd","$d","ae","be","documentMode","ce","de","ee","fe","ge","he","ie","le","color","date","datetime","email","month","password","search","tel","time","week","me","ne","oe","listeners","pe","qe","re","se","te","ue","ve","we","xe","ye","ze","oninput","Ae","detachEvent","Be","Ce","De","Ee","Fe","He","Ie","Je","Ke","Le","Me","Ne","HTMLIFrameElement","contentWindow","href","Oe","contentEditable","Pe","Qe","Re","Se","Te","Ue","selectionStart","selectionEnd","anchorNode","getSelection","anchorOffset","focusNode","focusOffset","Ve","We","Xe","Ye","Ze","Yb","instance","listener","$e","af","bf","cf","df","capture","passive","Nb","u","ef","ff","parentWindow","gf","hf","je","char","ke","jf","kf","lf","mf","autoFocus","nf","__html","of","pf","qf","rf","sf","tf","vf","wf","xf","yf","zf","Af","Bf","Cf","Df","Ef","contextTypes","__reactInternalMemoizedUnmaskedChildContext","__reactInternalMemoizedMaskedChildContext","Ff","childContextTypes","Gf","Hf","If","getChildContext","Jf","__reactInternalMemoizedMergedChildContext","Kf","Lf","Mf","Nf","Of","Pf","unstable_cancelCallback","Qf","unstable_shouldYield","Rf","unstable_requestPaint","Sf","Tf","unstable_getCurrentPriorityLevel","Uf","unstable_ImmediatePriority","Vf","Wf","Xf","unstable_LowPriority","Yf","unstable_IdlePriority","Zf","$f","ag","bg","cg","dg","eg","fg","gg","hg","ig","jg","kg","ReactCurrentBatchConfig","lg","defaultProps","mg","ng","og","pg","qg","rg","_currentValue","sg","childLanes","tg","dependencies","firstContext","lanes","ug","vg","context","observedBits","responders","wg","xg","updateQueue","baseState","firstBaseUpdate","lastBaseUpdate","shared","pending","effects","yg","zg","eventTime","lane","payload","Ag","Bg","Cg","Dg","Eg","Fg","Component","refs","Gg","Kg","isMounted","_reactInternals","enqueueSetState","Hg","Ig","Jg","enqueueReplaceState","enqueueForceUpdate","Lg","shouldComponentUpdate","isPureReactComponent","Mg","contextType","updater","Ng","componentWillReceiveProps","UNSAFE_componentWillReceiveProps","Og","getDerivedStateFromProps","getSnapshotBeforeUpdate","UNSAFE_componentWillMount","componentWillMount","componentDidMount","Pg","Qg","ref","_owner","_stringRef","Rg","Sg","lastEffect","nextEffect","firstEffect","Tg","Ug","Vg","implementation","Wg","Xg","Yg","Zg","$g","ah","bh","ch","dh","eh","fh","gh","hh","ih","memoizedProps","revealOrder","jh","kh","lh","mh","nh","oh","pendingProps","ph","qh","rh","sh","th","uh","_workInProgressVersionPrimary","vh","ReactCurrentDispatcher","wh","xh","yh","zh","Ah","Bh","Ch","Dh","Eh","Fh","Gh","Hh","baseQueue","Ih","Jh","Kh","lastRenderedReducer","action","eagerReducer","eagerState","lastRenderedState","dispatch","Lh","Mh","_getVersion","_source","mutableReadLanes","Nh","useState","getSnapshot","useEffect","setSnapshot","Oh","Ph","Qh","Rh","destroy","deps","Sh","Th","Uh","Vh","Wh","Xh","Yh","Zh","$h","ai","bi","ci","di","readContext","useCallback","useContext","useImperativeHandle","useLayoutEffect","useMemo","useReducer","useRef","useDebugValue","useDeferredValue","useTransition","useMutableSource","useOpaqueIdentifier","unstable_isNewReconciler","uf","ei","ReactCurrentOwner","fi","gi","hi","ii","ji","compare","ki","li","mi","baseLanes","ni","oi","pi","UNSAFE_componentWillUpdate","componentWillUpdate","componentDidUpdate","qi","getDerivedStateFromError","ri","pendingContext","Bi","Di","Ei","si","retryLane","ti","fallback","unstable_avoidThisFallback","ui","unstable_expectedLoadTime","vi","wi","xi","yi","zi","isBackwards","rendering","renderingStartTime","last","tail","tailMode","Ai","Fi","Gi","wasMultiple","multiple","onclick","Hi","Ii","Ji","Ki","Li","Mi","Ni","Oi","Pi","Qi","Ri","Si","componentDidCatch","Ti","componentStack","WeakSet","Vi","Wi","Xi","__reactInternalSnapshotBeforeUpdate","Yi","Zi","$i","aj","bj","onCommitFiberUnmount","componentWillUnmount","cj","dj","ej","fj","gj","hj","_reactRootContainer","ij","jj","kj","lj","mj","nj","ceil","oj","pj","qj","rj","sj","tj","uj","vj","wj","ck","xj","yj","zj","Aj","Bj","Cj","Dj","Ej","Fj","Gj","Hj","Ij","Jj","Sc","Kj","Lj","Mj","callbackNode","expirationTimes","callbackPriority","Tc","Nj","Oj","Pj","Qj","Rj","Sj","Tj","finishedWork","finishedLanes","Uj","timeoutHandle","Wj","Xj","pingCache","Yj","Zj","va","ak","bk","dk","rangeCount","focusedElem","selectionRange","ek","extend","createRange","setStart","removeAllRanges","addRange","setEnd","onCommitFiberRoot","fk","gk","ik","isReactComponent","pendingChildren","jk","mutableSourceEagerHydrationData","kk","lk","mk","nk","qk","hydrationOptions","mutableSources","_internalRoot","rk","tk","sk","uk","hk","_calculateChangedBits","unstable_observedBits","unmount","querySelectorAll","form","Vj","vk","wk","findFiberByHostInstance","bundleType","rendererPackageName","xk","rendererConfig","overrideHookState","overrideHookStateDeletePath","overrideHookStateRenamePath","overrideProps","overridePropsDeletePath","overridePropsRenamePath","setSuspenseHandler","scheduleUpdate","currentDispatcherRef","findHostInstanceByFiber","findHostInstancesForRefresh","scheduleRefresh","scheduleRoot","setRefreshHandler","getCurrentFiber","__REACT_DEVTOOLS_GLOBAL_HOOK__","yk","supportsFiber","createPortal","findDOMNode","flushSync","unmountComponentAtNode","unstable_batchedUpdates","unstable_createPortal","unstable_renderSubtreeIntoContainer","checkDCE","nextProps","prevState","nextState","prevProps","__reactInternalSnapshotFlag","__reactInternalSnapshot","foundWillMountName","foundWillReceivePropsName","foundWillUpdateName","newApiName","maybeSnapshot","snapshot","__suppressDeprecationWarning","bodyOpenClassName","portalClassName","_extends","_createClass","descriptor","Constructor","protoProps","staticProps","_react","_react2","_interopRequireDefault","_reactDom2","_propTypes2","_ModalPortal2","ariaAppHider","__esModule","newObj","default","_interopRequireWildcard","_safeHTMLElement","_safeHTMLElement2","_reactLifecyclesCompat","_classCallCheck","_possibleConstructorReturn","ReferenceError","isReact16","createHTMLElement","getCreatePortal","getParentElement","parentSelector","Modal","_Component","_ref","_temp","_this","_len","_key","__proto__","removePortal","portalRef","portal","renderPortal","defaultStyles","subClass","superClass","_inherits","prevParent","nextParent","_","_props","closesAt","closeTimeoutMS","beforeClose","closeWithTimeout","setElement","propTypes","overlay","htmlOpenClassName","afterOpen","overlayClassName","appElement","SafeHTMLCollection","SafeNodeList","onAfterOpen","onRequestClose","ariaHideApp","shouldFocusAfterRender","shouldCloseOnOverlayClick","shouldReturnFocusAfterClose","role","contentLabel","shouldCloseOnEsc","overlayRef","contentRef","overlayElement","contentElement","contentEl","WebkitOverflowScrolling","_typeof","focusManager","_scopeTab2","_portalOpenInstances2","CLASS_NAMES","ariaHiddenInstances","ModalPortal","setOverlayRef","setContentRef","afterClose","_this$props","remove","returnFocus","teardownScopedFocus","popWithoutFocus","onAfterClose","deregister","beforeOpen","closeTimer","setupScopedFocus","markForFocusLater","openAnimationFrame","requestAnimationFrame","overlayEl","close","closeWithoutTimeout","focusContent","contentHasFocus","handleKeyDown","requestClose","handleOverlayOnClick","shouldClose","ownerHandlesClose","handleContentOnMouseUp","handleOverlayOnMouseDown","handleContentOnClick","handleContentOnMouseDown","shouldBeClosed","buildClassName","additional","attributesFromObject","items","moveFromContentToOverlay","cancelAnimationFrame","_props2","contentStyles","overlayStyles","overlayProps","onMouseDown","contentProps","onMouseUp","modal","testId","resetState","globalElement","process","assertNodeList","useElement","validateElement","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","documentNotReadyOrSSRTesting","_warning","_warning2","nodeList","HTMLCollection","NodeList","_arr","before","after","_i","instances","_arr2","_i2","_portalOpenInstances","openInstances","htmlElement","cls","htmlClassList","_cls","docBodyClassList","classString","classListRef","poll","incrementReference","decrementReference","focusLaterElements","handleBlur","handleFocus","toFocus","modalElement","_tabbable","_tabbable2","needToFocus","portalOpenInstances","PortalOpenInstances","openInstance","emit","subscribers","subscriber","_exenv","EE","SafeHTMLElement","HTMLElement","tabbable","getActiveElement","checkSafari","exec","navigator","shadowRoot","findTabbableDescendants","finished","tabbableNode","hidesContents","zeroSize","exception","focusable","isTabIndexNotNaN","getRootNode","host","isTabIndexNaN","_Modal","_Modal2","Fragment","__self","__source","jsx","jsxs","StrictMode","Profiler","Suspense","forceUpdate","escape","_status","_result","IsSomeRendererActing","toArray","only","PureComponent","cloneElement","createContext","_currentValue2","_threadCount","Provider","Consumer","createFactory","createRef","forwardRef","isValidElement","lazy","memo","performance","MessageChannel","unstable_forceFrameRate","port2","port1","onmessage","postMessage","sortIndex","startTime","expirationTime","priorityLevel","unstable_Profiling","unstable_continueExecution","unstable_getFirstCallbackNode","unstable_next","unstable_pauseExecution","delay","unstable_wrapCallback","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","o","prop","toStringTag","_arrayLikeToArray","arr2","_unsupportedIterableToArray","minLen","_toConsumableArray","iter","_slicedToArray","_s","_n","_d","__assign","_a","initialXml","toolboxConfiguration","workspaceConfiguration","onWorkspaceChange","onImportXmlError","onInject","onDispose","_b","React","setWorkspace","_c","setXml","didInitialImport","setDidInitialImport","didHandleNewWorkspace","setDidHandleNewWorkspace","workspaceConfigurationRef","toolboxConfigurationRef","onInjectRef","onDisposeRef","handleWorkspaceChanged","newWorkspace","onDisposeFunction","wait","timeout","later","debounce","newXml","success","importFromXml","onXmlChange","BlocklyWorkspace","editorDiv","useBlocklyWorkspace","onXmlChangeRef","_jsx","DEFAULT_VISIBILITY","parseXmlByAttr","attrName","attrValue","getNamedItem","parseXmlClassName","nameEl","getVisibilityFromElement","visibilityTypeEl","parseMethod","method","methodRetTypeEl","methodRetType","typeEl","typeTextEl","methodName","methodVisibility","methodIsStatic","staticnessEl","parameters","parametersEl","parseXmlChildByAttr","parameterElements","parsedParam","parameterTypeEl","parameterName","parameterType","prmtTip","nameTextEl","parseParameter","returnType","isStatic","parseXmlMethods","methodsBlockEl","methods","resultMethods","parsedMethod","parseXmlFields","fieldsBlockEl","resultFields","parsedField","fieldTypeEl","fieldType","fieldVisibility","fieldIsStatic","parseField","parseXMLClasses","xmlDoc","hubMap","allHubs","hub","hubId","hub_class","classId","classType","parseXmlClassType","classItem","connectedClassId","connectionsEl","allConns","connType","connCardinality","isConnStart","startEl","connected_to","cardinality","connectedClass","connectorId","connection_to","parseXmlConnections","connect_hub","allClasses","registeredClasses","cl","curr","find","toolboxCategories","kind","getVisibilityModifier","visibilityString","_defineProperty","ownKeys","enumerableOnly","sym","_objectSpread2","getOwnPropertyDescriptors","_defineProperties","connectionsEqual","classBegin","classEnd","addedFromBegin","filterDuplConnections","conns","confirmedConns","allowArrayLike","it","normalCompletion","didErr","_e2","Validator","_classes","_connections","parentsIds","isInheritanceRelationship","parentClasses","includes","classesVisited","inheritedFields","parents","prnt","flatMap","inhFields","getInheritedFields","inheritedMethods","inhMethods","getInheritedMethods","ancestors","getAncestors","warnings","paramsString","accum","methodKey","beginClass","endClass","groupBy","storage","encoder","defl","dynamicDropdownOptions_","App","plantUMLText","setPlantUMLText","imgSrc","setImgSrc","initXml","setInitXml","blocklyClasses","setBlocklyClasses","previousImgString","setPreviousImgString","setWarnings","lastFuncId","lastGenerateFuncId","lastXML","showPlantUMLImg","currentEncodedImg","generateUml","jsClasses","umlString","classDescr","generateUMLForClass","classDefs","connDef","duplicateWarnings","checkDuplicateConnections","filteredConns","UMLstr","connTypeToPlantUML","getConnectionUMLString","warns","validator","addParents","addInheritted","classesWithParents","getClasses","checkDuplicateFields","checkDuplicateMethods","duplicateFields","duplicateMethods","validateClass","validateConnectionTypes","validateInterfaces","checkDiamond","workspaceDidChange","umlOpened","setUmlOpened","toggleNav","fetch","XMLData","response","replaceAll","dynamicOptions","ReactDOM"],"sourceRoot":""}